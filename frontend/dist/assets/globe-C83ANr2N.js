import{g as $M,c as UB,r as Qt,j as Xr,_ as OB}from"./index-B6z7R5KF.js";/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const o5="179",S2={LEFT:0,MIDDLE:1,RIGHT:2,ROTATE:0,DOLLY:1,PAN:2},T2={ROTATE:0,PAN:1,DOLLY_PAN:2,DOLLY_ROTATE:3},Gy=0,id=1,qy=2,kB=3,Hy=0,O8=1,Wh=2,Ao=3,So=0,Bi=1,Mr=2,qo=0,Js=1,K2=2,Z2=3,J2=4,z2=5,Ds=100,l9=101,u9=102,Wy=103,jy=104,K0=200,c9=201,h9=202,f9=203,M4=204,E4=205,d9=206,A9=207,p9=208,m9=209,g9=210,XM=211,QM=212,YM=213,KM=214,R4=0,C4=1,P4=2,e1=3,N4=4,I4=5,L4=6,D4=7,a5=0,$y=1,Xy=2,eo=0,Qy=1,Yy=2,Ky=3,y9=4,ZM=5,Zy=6,Jy=7,fg="attached",JM="detached",k8=300,_a=301,Xa=302,fu=303,du=304,t1=306,n1=1e3,xo=1001,i1=1002,qi=1003,V8=1004,VB=1004,R0=1005,zB=1005,Wi=1006,su=1007,GB=1007,Fs=1008,eE=1008,ar=1009,ou=1010,au=1011,qa=1012,as=1013,Oi=1014,nr=1015,Yr=1016,z8=1017,G8=1018,Ho=1020,q8=35902,v9=1021,l5=1022,Zi=1023,Wo=1026,jo=1027,Tc=1028,gu=1029,nl=1030,wc=1031,tE=1032,Mc=1033,lu=33776,jl=33777,$l=33778,Xl=33779,B4=35840,F4=35841,U4=35842,O4=35843,k4=36196,ec=37492,tc=37496,nc=37808,ic=37809,rc=37810,sc=37811,oc=37812,ac=37813,lc=37814,uc=37815,cc=37816,hc=37817,fc=37818,dc=37819,Ac=37820,pc=37821,uu=36492,rd=36494,sd=36495,_9=36283,V4=36284,z4=36285,G4=36286,nE=2200,iE=2201,rE=2202,s8=2300,od=2301,kf=2302,I2=2400,L2=2401,o8=2402,x9=2500,ev=2501,sE=0,oE=1,dg=2,aE=3200,lE=3201,qB=3202,HB=3203,fl=0,tv=1,vo="",xs="srgb",r1="srgb-linear",mc="linear",qt="srgb",uE=0,Y1=7680,cE=7681,hE=7682,fE=7683,dE=34055,AE=34056,pE=5386,mE=512,gE=513,yE=514,vE=515,_E=516,xE=517,bE=518,ad=519,b9=512,H8=513,S9=514,W8=515,T9=516,w9=517,M9=518,E9=519,q4=35044,D2=35048,WB=35040,jB=35045,$B=35049,XB=35041,QB=35046,YB=35050,KB=35042,ZB="100",Ag="300 es",bs=2e3,Qa=2001,JB={COMPUTE:"compute",RENDER:"render"},eF={PERSPECTIVE:"perspective",LINEAR:"linear",FLAT:"flat"},tF={NORMAL:"normal",CENTROID:"centroid",SAMPLE:"sample",FIRST:"first",EITHER:"either"};let Ta=class{addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){const n=this._listeners;return n===void 0?!1:n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){const n=this._listeners;if(n===void 0)return;const r=n[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){const t=this._listeners;if(t===void 0)return;const n=t[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}};const js=["00","01","02","03","04","05","06","07","08","09","0a","0b","0c","0d","0e","0f","10","11","12","13","14","15","16","17","18","19","1a","1b","1c","1d","1e","1f","20","21","22","23","24","25","26","27","28","29","2a","2b","2c","2d","2e","2f","30","31","32","33","34","35","36","37","38","39","3a","3b","3c","3d","3e","3f","40","41","42","43","44","45","46","47","48","49","4a","4b","4c","4d","4e","4f","50","51","52","53","54","55","56","57","58","59","5a","5b","5c","5d","5e","5f","60","61","62","63","64","65","66","67","68","69","6a","6b","6c","6d","6e","6f","70","71","72","73","74","75","76","77","78","79","7a","7b","7c","7d","7e","7f","80","81","82","83","84","85","86","87","88","89","8a","8b","8c","8d","8e","8f","90","91","92","93","94","95","96","97","98","99","9a","9b","9c","9d","9e","9f","a0","a1","a2","a3","a4","a5","a6","a7","a8","a9","aa","ab","ac","ad","ae","af","b0","b1","b2","b3","b4","b5","b6","b7","b8","b9","ba","bb","bc","bd","be","bf","c0","c1","c2","c3","c4","c5","c6","c7","c8","c9","ca","cb","cc","cd","ce","cf","d0","d1","d2","d3","d4","d5","d6","d7","d8","d9","da","db","dc","dd","de","df","e0","e1","e2","e3","e4","e5","e6","e7","e8","e9","ea","eb","ec","ed","ee","ef","f0","f1","f2","f3","f4","f5","f6","f7","f8","f9","fa","fb","fc","fd","fe","ff"];let Yx=1234567;const G2=Math.PI/180,gc=180/Math.PI;function va(){const i=Math.random()*4294967295|0,e=Math.random()*4294967295|0,t=Math.random()*4294967295|0,n=Math.random()*4294967295|0;return(js[i&255]+js[i>>8&255]+js[i>>16&255]+js[i>>24&255]+"-"+js[e&255]+js[e>>8&255]+"-"+js[e>>16&15|64]+js[e>>24&255]+"-"+js[t&63|128]+js[t>>8&255]+"-"+js[t>>16&255]+js[t>>24&255]+js[n&255]+js[n>>8&255]+js[n>>16&255]+js[n>>24&255]).toLowerCase()}function Dn(i,e,t){return Math.max(e,Math.min(t,i))}function nv(i,e){return(i%e+e)%e}function nF(i,e,t,n,r){return n+(i-e)*(r-n)/(t-e)}function iF(i,e,t){return i!==e?(t-i)/(e-i):0}function jh(i,e,t){return(1-t)*i+t*e}function rF(i,e,t,n){return jh(i,e,1-Math.exp(-t*n))}function sF(i,e=1){return e-Math.abs(nv(i,e*2)-e)}function oF(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*(3-2*i))}function aF(i,e,t){return i<=e?0:i>=t?1:(i=(i-e)/(t-e),i*i*i*(i*(i*6-15)+10))}function lF(i,e){return i+Math.floor(Math.random()*(e-i+1))}function uF(i,e){return i+Math.random()*(e-i)}function cF(i){return i*(.5-Math.random())}function hF(i){i!==void 0&&(Yx=i);let e=Yx+=1831565813;return e=Math.imul(e^e>>>15,e|1),e^=e+Math.imul(e^e>>>7,e|61),((e^e>>>14)>>>0)/4294967296}function fF(i){return i*G2}function dF(i){return i*gc}function AF(i){return(i&i-1)===0&&i!==0}function pF(i){return Math.pow(2,Math.ceil(Math.log(i)/Math.LN2))}function mF(i){return Math.pow(2,Math.floor(Math.log(i)/Math.LN2))}function gF(i,e,t,n,r){const s=Math.cos,o=Math.sin,a=s(t/2),l=o(t/2),u=s((e+n)/2),c=o((e+n)/2),A=s((e-n)/2),m=o((e-n)/2),_=s((n-e)/2),b=o((n-e)/2);switch(r){case"XYX":i.set(a*c,l*A,l*m,a*u);break;case"YZY":i.set(l*m,a*c,l*A,a*u);break;case"ZXZ":i.set(l*A,l*m,a*c,a*u);break;case"XZX":i.set(a*c,l*b,l*_,a*u);break;case"YXY":i.set(l*_,a*c,l*b,a*u);break;case"ZYZ":i.set(l*b,l*_,a*c,a*u);break;default:console.warn("THREE.MathUtils: .setQuaternionFromProperEuler() encountered an unknown order: "+r)}}function _o(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return i/4294967295;case Uint16Array:return i/65535;case Uint8Array:return i/255;case Int32Array:return Math.max(i/2147483647,-1);case Int16Array:return Math.max(i/32767,-1);case Int8Array:return Math.max(i/127,-1);default:throw new Error("Invalid component type.")}}function Jn(i,e){switch(e.constructor){case Float32Array:return i;case Uint32Array:return Math.round(i*4294967295);case Uint16Array:return Math.round(i*65535);case Uint8Array:return Math.round(i*255);case Int32Array:return Math.round(i*2147483647);case Int16Array:return Math.round(i*32767);case Int8Array:return Math.round(i*127);default:throw new Error("Invalid component type.")}}const R9={DEG2RAD:G2,RAD2DEG:gc,generateUUID:va,clamp:Dn,euclideanModulo:nv,mapLinear:nF,inverseLerp:iF,lerp:jh,damp:rF,pingpong:sF,smoothstep:oF,smootherstep:aF,randInt:lF,randFloat:uF,randFloatSpread:cF,seededRandom:hF,degToRad:fF,radToDeg:dF,isPowerOfTwo:AF,ceilPowerOfTwo:pF,floorPowerOfTwo:mF,setQuaternionFromProperEuler:gF,normalize:Jn,denormalize:_o};class Ge{constructor(e=0,t=0){Ge.prototype.isVector2=!0,this.x=e,this.y=t}get width(){return this.x}set width(e){this.x=e}get height(){return this.y}set height(e){this.y=e}set(e,t){return this.x=e,this.y=t,this}setScalar(e){return this.x=e,this.y=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y)}copy(e){return this.x=e.x,this.y=e.y,this}add(e){return this.x+=e.x,this.y+=e.y,this}addScalar(e){return this.x+=e,this.y+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this}subScalar(e){return this.x-=e,this.y-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this}multiply(e){return this.x*=e.x,this.y*=e.y,this}multiplyScalar(e){return this.x*=e,this.y*=e,this}divide(e){return this.x/=e.x,this.y/=e.y,this}divideScalar(e){return this.multiplyScalar(1/e)}applyMatrix3(e){const t=this.x,n=this.y,r=e.elements;return this.x=r[0]*t+r[3]*n+r[6],this.y=r[1]*t+r[4]*n+r[7],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this}clamp(e,t){return this.x=Dn(this.x,e.x,t.x),this.y=Dn(this.y,e.y,t.y),this}clampScalar(e,t){return this.x=Dn(this.x,e,t),this.y=Dn(this.y,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Dn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this}negate(){return this.x=-this.x,this.y=-this.y,this}dot(e){return this.x*e.x+this.y*e.y}cross(e){return this.x*e.y-this.y*e.x}lengthSq(){return this.x*this.x+this.y*this.y}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)}normalize(){return this.divideScalar(this.length()||1)}angle(){return Math.atan2(-this.y,-this.x)+Math.PI}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Dn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y;return t*t+n*n}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this}equals(e){return e.x===this.x&&e.y===this.y}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this}rotateAround(e,t){const n=Math.cos(t),r=Math.sin(t),s=this.x-e.x,o=this.y-e.y;return this.x=s*n-o*r+e.x,this.y=s*r+o*n+e.y,this}random(){return this.x=Math.random(),this.y=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y}}class Os{constructor(e=0,t=0,n=0,r=1){this.isQuaternion=!0,this._x=e,this._y=t,this._z=n,this._w=r}static slerpFlat(e,t,n,r,s,o,a){let l=n[r+0],u=n[r+1],c=n[r+2],A=n[r+3];const m=s[o+0],_=s[o+1],b=s[o+2],M=s[o+3];if(a===0){e[t+0]=l,e[t+1]=u,e[t+2]=c,e[t+3]=A;return}if(a===1){e[t+0]=m,e[t+1]=_,e[t+2]=b,e[t+3]=M;return}if(A!==M||l!==m||u!==_||c!==b){let w=1-a;const T=l*m+u*_+c*b+A*M,N=T>=0?1:-1,P=1-T*T;if(P>Number.EPSILON){const B=Math.sqrt(P),F=Math.atan2(B,T*N);w=Math.sin(w*F)/B,a=Math.sin(a*F)/B}const I=a*N;if(l=l*w+m*I,u=u*w+_*I,c=c*w+b*I,A=A*w+M*I,w===1-a){const B=1/Math.sqrt(l*l+u*u+c*c+A*A);l*=B,u*=B,c*=B,A*=B}}e[t]=l,e[t+1]=u,e[t+2]=c,e[t+3]=A}static multiplyQuaternionsFlat(e,t,n,r,s,o){const a=n[r],l=n[r+1],u=n[r+2],c=n[r+3],A=s[o],m=s[o+1],_=s[o+2],b=s[o+3];return e[t]=a*b+c*A+l*_-u*m,e[t+1]=l*b+c*m+u*A-a*_,e[t+2]=u*b+c*_+a*m-l*A,e[t+3]=c*b-a*A-l*m-u*_,e}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get w(){return this._w}set w(e){this._w=e,this._onChangeCallback()}set(e,t,n,r){return this._x=e,this._y=t,this._z=n,this._w=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._w)}copy(e){return this._x=e.x,this._y=e.y,this._z=e.z,this._w=e.w,this._onChangeCallback(),this}setFromEuler(e,t=!0){const n=e._x,r=e._y,s=e._z,o=e._order,a=Math.cos,l=Math.sin,u=a(n/2),c=a(r/2),A=a(s/2),m=l(n/2),_=l(r/2),b=l(s/2);switch(o){case"XYZ":this._x=m*c*A+u*_*b,this._y=u*_*A-m*c*b,this._z=u*c*b+m*_*A,this._w=u*c*A-m*_*b;break;case"YXZ":this._x=m*c*A+u*_*b,this._y=u*_*A-m*c*b,this._z=u*c*b-m*_*A,this._w=u*c*A+m*_*b;break;case"ZXY":this._x=m*c*A-u*_*b,this._y=u*_*A+m*c*b,this._z=u*c*b+m*_*A,this._w=u*c*A-m*_*b;break;case"ZYX":this._x=m*c*A-u*_*b,this._y=u*_*A+m*c*b,this._z=u*c*b-m*_*A,this._w=u*c*A+m*_*b;break;case"YZX":this._x=m*c*A+u*_*b,this._y=u*_*A+m*c*b,this._z=u*c*b-m*_*A,this._w=u*c*A-m*_*b;break;case"XZY":this._x=m*c*A-u*_*b,this._y=u*_*A-m*c*b,this._z=u*c*b+m*_*A,this._w=u*c*A+m*_*b;break;default:console.warn("THREE.Quaternion: .setFromEuler() encountered an unknown order: "+o)}return t===!0&&this._onChangeCallback(),this}setFromAxisAngle(e,t){const n=t/2,r=Math.sin(n);return this._x=e.x*r,this._y=e.y*r,this._z=e.z*r,this._w=Math.cos(n),this._onChangeCallback(),this}setFromRotationMatrix(e){const t=e.elements,n=t[0],r=t[4],s=t[8],o=t[1],a=t[5],l=t[9],u=t[2],c=t[6],A=t[10],m=n+a+A;if(m>0){const _=.5/Math.sqrt(m+1);this._w=.25/_,this._x=(c-l)*_,this._y=(s-u)*_,this._z=(o-r)*_}else if(n>a&&n>A){const _=2*Math.sqrt(1+n-a-A);this._w=(c-l)/_,this._x=.25*_,this._y=(r+o)/_,this._z=(s+u)/_}else if(a>A){const _=2*Math.sqrt(1+a-n-A);this._w=(s-u)/_,this._x=(r+o)/_,this._y=.25*_,this._z=(l+c)/_}else{const _=2*Math.sqrt(1+A-n-a);this._w=(o-r)/_,this._x=(s+u)/_,this._y=(l+c)/_,this._z=.25*_}return this._onChangeCallback(),this}setFromUnitVectors(e,t){let n=e.dot(t)+1;return n<1e-8?(n=0,Math.abs(e.x)>Math.abs(e.z)?(this._x=-e.y,this._y=e.x,this._z=0,this._w=n):(this._x=0,this._y=-e.z,this._z=e.y,this._w=n)):(this._x=e.y*t.z-e.z*t.y,this._y=e.z*t.x-e.x*t.z,this._z=e.x*t.y-e.y*t.x,this._w=n),this.normalize()}angleTo(e){return 2*Math.acos(Math.abs(Dn(this.dot(e),-1,1)))}rotateTowards(e,t){const n=this.angleTo(e);if(n===0)return this;const r=Math.min(1,t/n);return this.slerp(e,r),this}identity(){return this.set(0,0,0,1)}invert(){return this.conjugate()}conjugate(){return this._x*=-1,this._y*=-1,this._z*=-1,this._onChangeCallback(),this}dot(e){return this._x*e._x+this._y*e._y+this._z*e._z+this._w*e._w}lengthSq(){return this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w}length(){return Math.sqrt(this._x*this._x+this._y*this._y+this._z*this._z+this._w*this._w)}normalize(){let e=this.length();return e===0?(this._x=0,this._y=0,this._z=0,this._w=1):(e=1/e,this._x=this._x*e,this._y=this._y*e,this._z=this._z*e,this._w=this._w*e),this._onChangeCallback(),this}multiply(e){return this.multiplyQuaternions(this,e)}premultiply(e){return this.multiplyQuaternions(e,this)}multiplyQuaternions(e,t){const n=e._x,r=e._y,s=e._z,o=e._w,a=t._x,l=t._y,u=t._z,c=t._w;return this._x=n*c+o*a+r*u-s*l,this._y=r*c+o*l+s*a-n*u,this._z=s*c+o*u+n*l-r*a,this._w=o*c-n*a-r*l-s*u,this._onChangeCallback(),this}slerp(e,t){if(t===0)return this;if(t===1)return this.copy(e);const n=this._x,r=this._y,s=this._z,o=this._w;let a=o*e._w+n*e._x+r*e._y+s*e._z;if(a<0?(this._w=-e._w,this._x=-e._x,this._y=-e._y,this._z=-e._z,a=-a):this.copy(e),a>=1)return this._w=o,this._x=n,this._y=r,this._z=s,this;const l=1-a*a;if(l<=Number.EPSILON){const _=1-t;return this._w=_*o+t*this._w,this._x=_*n+t*this._x,this._y=_*r+t*this._y,this._z=_*s+t*this._z,this.normalize(),this}const u=Math.sqrt(l),c=Math.atan2(u,a),A=Math.sin((1-t)*c)/u,m=Math.sin(t*c)/u;return this._w=o*A+this._w*m,this._x=n*A+this._x*m,this._y=r*A+this._y*m,this._z=s*A+this._z*m,this._onChangeCallback(),this}slerpQuaternions(e,t,n){return this.copy(e).slerp(t,n)}random(){const e=2*Math.PI*Math.random(),t=2*Math.PI*Math.random(),n=Math.random(),r=Math.sqrt(1-n),s=Math.sqrt(n);return this.set(r*Math.sin(e),r*Math.cos(e),s*Math.sin(t),s*Math.cos(t))}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._w===this._w}fromArray(e,t=0){return this._x=e[t],this._y=e[t+1],this._z=e[t+2],this._w=e[t+3],this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._w,e}fromBufferAttribute(e,t){return this._x=e.getX(t),this._y=e.getY(t),this._z=e.getZ(t),this._w=e.getW(t),this._onChangeCallback(),this}toJSON(){return this.toArray()}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._w}}class J{constructor(e=0,t=0,n=0){J.prototype.isVector3=!0,this.x=e,this.y=t,this.z=n}set(e,t,n){return n===void 0&&(n=this.z),this.x=e,this.y=t,this.z=n,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this}multiplyVectors(e,t){return this.x=e.x*t.x,this.y=e.y*t.y,this.z=e.z*t.z,this}applyEuler(e){return this.applyQuaternion(Kx.setFromEuler(e))}applyAxisAngle(e,t){return this.applyQuaternion(Kx.setFromAxisAngle(e,t))}applyMatrix3(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[3]*n+s[6]*r,this.y=s[1]*t+s[4]*n+s[7]*r,this.z=s[2]*t+s[5]*n+s[8]*r,this}applyNormalMatrix(e){return this.applyMatrix3(e).normalize()}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=e.elements,o=1/(s[3]*t+s[7]*n+s[11]*r+s[15]);return this.x=(s[0]*t+s[4]*n+s[8]*r+s[12])*o,this.y=(s[1]*t+s[5]*n+s[9]*r+s[13])*o,this.z=(s[2]*t+s[6]*n+s[10]*r+s[14])*o,this}applyQuaternion(e){const t=this.x,n=this.y,r=this.z,s=e.x,o=e.y,a=e.z,l=e.w,u=2*(o*r-a*n),c=2*(a*t-s*r),A=2*(s*n-o*t);return this.x=t+l*u+o*A-a*c,this.y=n+l*c+a*u-s*A,this.z=r+l*A+s*c-o*u,this}project(e){return this.applyMatrix4(e.matrixWorldInverse).applyMatrix4(e.projectionMatrix)}unproject(e){return this.applyMatrix4(e.projectionMatrixInverse).applyMatrix4(e.matrixWorld)}transformDirection(e){const t=this.x,n=this.y,r=this.z,s=e.elements;return this.x=s[0]*t+s[4]*n+s[8]*r,this.y=s[1]*t+s[5]*n+s[9]*r,this.z=s[2]*t+s[6]*n+s[10]*r,this.normalize()}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this}divideScalar(e){return this.multiplyScalar(1/e)}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this}clamp(e,t){return this.x=Dn(this.x,e.x,t.x),this.y=Dn(this.y,e.y,t.y),this.z=Dn(this.z,e.z,t.z),this}clampScalar(e,t){return this.x=Dn(this.x,e,t),this.y=Dn(this.y,e,t),this.z=Dn(this.z,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Dn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this}cross(e){return this.crossVectors(this,e)}crossVectors(e,t){const n=e.x,r=e.y,s=e.z,o=t.x,a=t.y,l=t.z;return this.x=r*l-s*a,this.y=s*o-n*l,this.z=n*a-r*o,this}projectOnVector(e){const t=e.lengthSq();if(t===0)return this.set(0,0,0);const n=e.dot(this)/t;return this.copy(e).multiplyScalar(n)}projectOnPlane(e){return cp.copy(this).projectOnVector(e),this.sub(cp)}reflect(e){return this.sub(cp.copy(e).multiplyScalar(2*this.dot(e)))}angleTo(e){const t=Math.sqrt(this.lengthSq()*e.lengthSq());if(t===0)return Math.PI/2;const n=this.dot(e)/t;return Math.acos(Dn(n,-1,1))}distanceTo(e){return Math.sqrt(this.distanceToSquared(e))}distanceToSquared(e){const t=this.x-e.x,n=this.y-e.y,r=this.z-e.z;return t*t+n*n+r*r}manhattanDistanceTo(e){return Math.abs(this.x-e.x)+Math.abs(this.y-e.y)+Math.abs(this.z-e.z)}setFromSpherical(e){return this.setFromSphericalCoords(e.radius,e.phi,e.theta)}setFromSphericalCoords(e,t,n){const r=Math.sin(t)*e;return this.x=r*Math.sin(n),this.y=Math.cos(t)*e,this.z=r*Math.cos(n),this}setFromCylindrical(e){return this.setFromCylindricalCoords(e.radius,e.theta,e.y)}setFromCylindricalCoords(e,t,n){return this.x=e*Math.sin(t),this.y=n,this.z=e*Math.cos(t),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this}setFromMatrixScale(e){const t=this.setFromMatrixColumn(e,0).length(),n=this.setFromMatrixColumn(e,1).length(),r=this.setFromMatrixColumn(e,2).length();return this.x=t,this.y=n,this.z=r,this}setFromMatrixColumn(e,t){return this.fromArray(e.elements,t*4)}setFromMatrix3Column(e,t){return this.fromArray(e.elements,t*3)}setFromEuler(e){return this.x=e._x,this.y=e._y,this.z=e._z,this}setFromColor(e){return this.x=e.r,this.y=e.g,this.z=e.b,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this}randomDirection(){const e=Math.random()*Math.PI*2,t=Math.random()*2-1,n=Math.sqrt(1-t*t);return this.x=n*Math.cos(e),this.y=t,this.z=n*Math.sin(e),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z}}const cp=new J,Kx=new Os;class Fn{constructor(e,t,n,r,s,o,a,l,u){Fn.prototype.isMatrix3=!0,this.elements=[1,0,0,0,1,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u)}set(e,t,n,r,s,o,a,l,u){const c=this.elements;return c[0]=e,c[1]=r,c[2]=a,c[3]=t,c[4]=s,c[5]=l,c[6]=n,c[7]=o,c[8]=u,this}identity(){return this.set(1,0,0,0,1,0,0,0,1),this}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],this}extractBasis(e,t,n){return e.setFromMatrix3Column(this,0),t.setFromMatrix3Column(this,1),n.setFromMatrix3Column(this,2),this}setFromMatrix4(e){const t=e.elements;return this.set(t[0],t[4],t[8],t[1],t[5],t[9],t[2],t[6],t[10]),this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[3],l=n[6],u=n[1],c=n[4],A=n[7],m=n[2],_=n[5],b=n[8],M=r[0],w=r[3],T=r[6],N=r[1],P=r[4],I=r[7],B=r[2],F=r[5],O=r[8];return s[0]=o*M+a*N+l*B,s[3]=o*w+a*P+l*F,s[6]=o*T+a*I+l*O,s[1]=u*M+c*N+A*B,s[4]=u*w+c*P+A*F,s[7]=u*T+c*I+A*O,s[2]=m*M+_*N+b*B,s[5]=m*w+_*P+b*F,s[8]=m*T+_*I+b*O,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[3]*=e,t[6]*=e,t[1]*=e,t[4]*=e,t[7]*=e,t[2]*=e,t[5]*=e,t[8]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8];return t*o*c-t*a*u-n*s*c+n*a*l+r*s*u-r*o*l}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],A=c*o-a*u,m=a*l-c*s,_=u*s-o*l,b=t*A+n*m+r*_;if(b===0)return this.set(0,0,0,0,0,0,0,0,0);const M=1/b;return e[0]=A*M,e[1]=(r*u-c*n)*M,e[2]=(a*n-r*o)*M,e[3]=m*M,e[4]=(c*t-r*l)*M,e[5]=(r*s-a*t)*M,e[6]=_*M,e[7]=(n*l-u*t)*M,e[8]=(o*t-n*s)*M,this}transpose(){let e;const t=this.elements;return e=t[1],t[1]=t[3],t[3]=e,e=t[2],t[2]=t[6],t[6]=e,e=t[5],t[5]=t[7],t[7]=e,this}getNormalMatrix(e){return this.setFromMatrix4(e).invert().transpose()}transposeIntoArray(e){const t=this.elements;return e[0]=t[0],e[1]=t[3],e[2]=t[6],e[3]=t[1],e[4]=t[4],e[5]=t[7],e[6]=t[2],e[7]=t[5],e[8]=t[8],this}setUvTransform(e,t,n,r,s,o,a){const l=Math.cos(s),u=Math.sin(s);return this.set(n*l,n*u,-n*(l*o+u*a)+o+e,-r*u,r*l,-r*(-u*o+l*a)+a+t,0,0,1),this}scale(e,t){return this.premultiply(hp.makeScale(e,t)),this}rotate(e){return this.premultiply(hp.makeRotation(-e)),this}translate(e,t){return this.premultiply(hp.makeTranslation(e,t)),this}makeTranslation(e,t){return e.isVector2?this.set(1,0,e.x,0,1,e.y,0,0,1):this.set(1,0,e,0,1,t,0,0,1),this}makeRotation(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,n,t,0,0,0,1),this}makeScale(e,t){return this.set(e,0,0,0,t,0,0,0,1),this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<9;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<9;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e}clone(){return new this.constructor().fromArray(this.elements)}}const hp=new Fn;function iv(i){for(let e=i.length-1;e>=0;--e)if(i[e]>=65535)return!0;return!1}const yF={Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array};function a4(i,e){return new yF[i](e)}function a8(i){return document.createElementNS("http://www.w3.org/1999/xhtml",i)}function rv(){const i=a8("canvas");return i.style.display="block",i}const Zx={};function $o(i){i in Zx||(Zx[i]=!0,console.warn(i))}function vF(i,e,t){return new Promise(function(n,r){function s(){switch(i.clientWaitSync(e,i.SYNC_FLUSH_COMMANDS_BIT,0)){case i.WAIT_FAILED:r();break;case i.TIMEOUT_EXPIRED:setTimeout(s,t);break;default:n()}}setTimeout(s,t)})}const Jx=new Fn().set(.4123908,.3575843,.1804808,.212639,.7151687,.0721923,.0193308,.1191948,.9505322),eb=new Fn().set(3.2409699,-1.5373832,-.4986108,-.9692436,1.8759675,.0415551,.0556301,-.203977,1.0569715);function _F(){const i={enabled:!0,workingColorSpace:r1,spaces:{},convert:function(r,s,o){return this.enabled===!1||s===o||!s||!o||(this.spaces[s].transfer===qt&&(r.r=Ql(r.r),r.g=Ql(r.g),r.b=Ql(r.b)),this.spaces[s].primaries!==this.spaces[o].primaries&&(r.applyMatrix3(this.spaces[s].toXYZ),r.applyMatrix3(this.spaces[o].fromXYZ)),this.spaces[o].transfer===qt&&(r.r=y4(r.r),r.g=y4(r.g),r.b=y4(r.b))),r},workingToColorSpace:function(r,s){return this.convert(r,this.workingColorSpace,s)},colorSpaceToWorking:function(r,s){return this.convert(r,s,this.workingColorSpace)},getPrimaries:function(r){return this.spaces[r].primaries},getTransfer:function(r){return r===vo?mc:this.spaces[r].transfer},getLuminanceCoefficients:function(r,s=this.workingColorSpace){return r.fromArray(this.spaces[s].luminanceCoefficients)},define:function(r){Object.assign(this.spaces,r)},_getMatrix:function(r,s,o){return r.copy(this.spaces[s].toXYZ).multiply(this.spaces[o].fromXYZ)},_getDrawingBufferColorSpace:function(r){return this.spaces[r].outputColorSpaceConfig.drawingBufferColorSpace},_getUnpackColorSpace:function(r=this.workingColorSpace){return this.spaces[r].workingColorSpaceConfig.unpackColorSpace},fromWorkingColorSpace:function(r,s){return $o("THREE.ColorManagement: .fromWorkingColorSpace() has been renamed to .workingToColorSpace()."),i.workingToColorSpace(r,s)},toWorkingColorSpace:function(r,s){return $o("THREE.ColorManagement: .toWorkingColorSpace() has been renamed to .colorSpaceToWorking()."),i.colorSpaceToWorking(r,s)}},e=[.64,.33,.3,.6,.15,.06],t=[.2126,.7152,.0722],n=[.3127,.329];return i.define({[r1]:{primaries:e,whitePoint:n,transfer:mc,toXYZ:Jx,fromXYZ:eb,luminanceCoefficients:t,workingColorSpaceConfig:{unpackColorSpace:xs},outputColorSpaceConfig:{drawingBufferColorSpace:xs}},[xs]:{primaries:e,whitePoint:n,transfer:qt,toXYZ:Jx,fromXYZ:eb,luminanceCoefficients:t,outputColorSpaceConfig:{drawingBufferColorSpace:xs}}}),i}const Sn=_F();function Ql(i){return i<.04045?i*.0773993808:Math.pow(i*.9478672986+.0521327014,2.4)}function y4(i){return i<.0031308?i*12.92:1.055*Math.pow(i,.41666)-.055}let g3;class SE{static getDataURL(e,t="image/png"){if(/^data:/i.test(e.src)||typeof HTMLCanvasElement>"u")return e.src;let n;if(e instanceof HTMLCanvasElement)n=e;else{g3===void 0&&(g3=a8("canvas")),g3.width=e.width,g3.height=e.height;const r=g3.getContext("2d");e instanceof ImageData?r.putImageData(e,0,0):r.drawImage(e,0,0,e.width,e.height),n=g3}return n.toDataURL(t)}static sRGBToLinear(e){if(typeof HTMLImageElement<"u"&&e instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&e instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&e instanceof ImageBitmap){const t=a8("canvas");t.width=e.width,t.height=e.height;const n=t.getContext("2d");n.drawImage(e,0,0,e.width,e.height);const r=n.getImageData(0,0,e.width,e.height),s=r.data;for(let o=0;o<s.length;o++)s[o]=Ql(s[o]/255)*255;return n.putImageData(r,0,0),t}else if(e.data){const t=e.data.slice(0);for(let n=0;n<t.length;n++)t instanceof Uint8Array||t instanceof Uint8ClampedArray?t[n]=Math.floor(Ql(t[n]/255)*255):t[n]=Ql(t[n]);return{data:t,width:e.width,height:e.height}}else return console.warn("THREE.ImageUtils.sRGBToLinear(): Unsupported image type. No color space conversion applied."),e}}let xF=0;class iu{constructor(e=null){this.isSource=!0,Object.defineProperty(this,"id",{value:xF++}),this.uuid=va(),this.data=e,this.dataReady=!0,this.version=0}getSize(e){const t=this.data;return t instanceof HTMLVideoElement?e.set(t.videoWidth,t.videoHeight,0):t instanceof VideoFrame?e.set(t.displayHeight,t.displayWidth,0):t!==null?e.set(t.width,t.height,t.depth||0):e.set(0,0,0),e}set needsUpdate(e){e===!0&&this.version++}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.images[this.uuid]!==void 0)return e.images[this.uuid];const n={uuid:this.uuid,url:""},r=this.data;if(r!==null){let s;if(Array.isArray(r)){s=[];for(let o=0,a=r.length;o<a;o++)r[o].isDataTexture?s.push(fp(r[o].image)):s.push(fp(r[o]))}else s=fp(r);n.url=s}return t||(e.images[this.uuid]=n),n}}function fp(i){return typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap?SE.getDataURL(i):i.data?{data:Array.from(i.data),width:i.width,height:i.height,type:i.data.constructor.name}:(console.warn("THREE.Texture: Unable to serialize Texture."),{})}let bF=0;const dp=new J;class ur extends Ta{constructor(e=ur.DEFAULT_IMAGE,t=ur.DEFAULT_MAPPING,n=xo,r=xo,s=Wi,o=Fs,a=Zi,l=ar,u=ur.DEFAULT_ANISOTROPY,c=vo){super(),this.isTexture=!0,Object.defineProperty(this,"id",{value:bF++}),this.uuid=va(),this.name="",this.source=new iu(e),this.mipmaps=[],this.mapping=t,this.channel=0,this.wrapS=n,this.wrapT=r,this.magFilter=s,this.minFilter=o,this.anisotropy=u,this.format=a,this.internalFormat=null,this.type=l,this.offset=new Ge(0,0),this.repeat=new Ge(1,1),this.center=new Ge(0,0),this.rotation=0,this.matrixAutoUpdate=!0,this.matrix=new Fn,this.generateMipmaps=!0,this.premultiplyAlpha=!1,this.flipY=!0,this.unpackAlignment=4,this.colorSpace=c,this.userData={},this.updateRanges=[],this.version=0,this.onUpdate=null,this.renderTarget=null,this.isRenderTargetTexture=!1,this.isArrayTexture=!!(e&&e.depth&&e.depth>1),this.pmremVersion=0}get width(){return this.source.getSize(dp).x}get height(){return this.source.getSize(dp).y}get depth(){return this.source.getSize(dp).z}get image(){return this.source.data}set image(e=null){this.source.data=e}updateMatrix(){this.matrix.setUvTransform(this.offset.x,this.offset.y,this.repeat.x,this.repeat.y,this.rotation,this.center.x,this.center.y)}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}clone(){return new this.constructor().copy(this)}copy(e){return this.name=e.name,this.source=e.source,this.mipmaps=e.mipmaps.slice(0),this.mapping=e.mapping,this.channel=e.channel,this.wrapS=e.wrapS,this.wrapT=e.wrapT,this.magFilter=e.magFilter,this.minFilter=e.minFilter,this.anisotropy=e.anisotropy,this.format=e.format,this.internalFormat=e.internalFormat,this.type=e.type,this.offset.copy(e.offset),this.repeat.copy(e.repeat),this.center.copy(e.center),this.rotation=e.rotation,this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrix.copy(e.matrix),this.generateMipmaps=e.generateMipmaps,this.premultiplyAlpha=e.premultiplyAlpha,this.flipY=e.flipY,this.unpackAlignment=e.unpackAlignment,this.colorSpace=e.colorSpace,this.renderTarget=e.renderTarget,this.isRenderTargetTexture=e.isRenderTargetTexture,this.isArrayTexture=e.isArrayTexture,this.userData=JSON.parse(JSON.stringify(e.userData)),this.needsUpdate=!0,this}setValues(e){for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Texture.setValues(): parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Texture.setValues(): property '${t}' does not exist.`);continue}r&&n&&r.isVector2&&n.isVector2||r&&n&&r.isVector3&&n.isVector3||r&&n&&r.isMatrix3&&n.isMatrix3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";if(!t&&e.textures[this.uuid]!==void 0)return e.textures[this.uuid];const n={metadata:{version:4.7,type:"Texture",generator:"Texture.toJSON"},uuid:this.uuid,name:this.name,image:this.source.toJSON(e).uuid,mapping:this.mapping,channel:this.channel,repeat:[this.repeat.x,this.repeat.y],offset:[this.offset.x,this.offset.y],center:[this.center.x,this.center.y],rotation:this.rotation,wrap:[this.wrapS,this.wrapT],format:this.format,internalFormat:this.internalFormat,type:this.type,colorSpace:this.colorSpace,minFilter:this.minFilter,magFilter:this.magFilter,anisotropy:this.anisotropy,flipY:this.flipY,generateMipmaps:this.generateMipmaps,premultiplyAlpha:this.premultiplyAlpha,unpackAlignment:this.unpackAlignment};return Object.keys(this.userData).length>0&&(n.userData=this.userData),t||(e.textures[this.uuid]=n),n}dispose(){this.dispatchEvent({type:"dispose"})}transformUv(e){if(this.mapping!==k8)return e;if(e.applyMatrix3(this.matrix),e.x<0||e.x>1)switch(this.wrapS){case n1:e.x=e.x-Math.floor(e.x);break;case xo:e.x=e.x<0?0:1;break;case i1:Math.abs(Math.floor(e.x)%2)===1?e.x=Math.ceil(e.x)-e.x:e.x=e.x-Math.floor(e.x);break}if(e.y<0||e.y>1)switch(this.wrapT){case n1:e.y=e.y-Math.floor(e.y);break;case xo:e.y=e.y<0?0:1;break;case i1:Math.abs(Math.floor(e.y)%2)===1?e.y=Math.ceil(e.y)-e.y:e.y=e.y-Math.floor(e.y);break}return this.flipY&&(e.y=1-e.y),e}set needsUpdate(e){e===!0&&(this.version++,this.source.needsUpdate=!0)}set needsPMREMUpdate(e){e===!0&&this.pmremVersion++}}ur.DEFAULT_IMAGE=null;ur.DEFAULT_MAPPING=k8;ur.DEFAULT_ANISOTROPY=1;class rn{constructor(e=0,t=0,n=0,r=1){rn.prototype.isVector4=!0,this.x=e,this.y=t,this.z=n,this.w=r}get width(){return this.z}set width(e){this.z=e}get height(){return this.w}set height(e){this.w=e}set(e,t,n,r){return this.x=e,this.y=t,this.z=n,this.w=r,this}setScalar(e){return this.x=e,this.y=e,this.z=e,this.w=e,this}setX(e){return this.x=e,this}setY(e){return this.y=e,this}setZ(e){return this.z=e,this}setW(e){return this.w=e,this}setComponent(e,t){switch(e){case 0:this.x=t;break;case 1:this.y=t;break;case 2:this.z=t;break;case 3:this.w=t;break;default:throw new Error("index is out of range: "+e)}return this}getComponent(e){switch(e){case 0:return this.x;case 1:return this.y;case 2:return this.z;case 3:return this.w;default:throw new Error("index is out of range: "+e)}}clone(){return new this.constructor(this.x,this.y,this.z,this.w)}copy(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w!==void 0?e.w:1,this}add(e){return this.x+=e.x,this.y+=e.y,this.z+=e.z,this.w+=e.w,this}addScalar(e){return this.x+=e,this.y+=e,this.z+=e,this.w+=e,this}addVectors(e,t){return this.x=e.x+t.x,this.y=e.y+t.y,this.z=e.z+t.z,this.w=e.w+t.w,this}addScaledVector(e,t){return this.x+=e.x*t,this.y+=e.y*t,this.z+=e.z*t,this.w+=e.w*t,this}sub(e){return this.x-=e.x,this.y-=e.y,this.z-=e.z,this.w-=e.w,this}subScalar(e){return this.x-=e,this.y-=e,this.z-=e,this.w-=e,this}subVectors(e,t){return this.x=e.x-t.x,this.y=e.y-t.y,this.z=e.z-t.z,this.w=e.w-t.w,this}multiply(e){return this.x*=e.x,this.y*=e.y,this.z*=e.z,this.w*=e.w,this}multiplyScalar(e){return this.x*=e,this.y*=e,this.z*=e,this.w*=e,this}applyMatrix4(e){const t=this.x,n=this.y,r=this.z,s=this.w,o=e.elements;return this.x=o[0]*t+o[4]*n+o[8]*r+o[12]*s,this.y=o[1]*t+o[5]*n+o[9]*r+o[13]*s,this.z=o[2]*t+o[6]*n+o[10]*r+o[14]*s,this.w=o[3]*t+o[7]*n+o[11]*r+o[15]*s,this}divide(e){return this.x/=e.x,this.y/=e.y,this.z/=e.z,this.w/=e.w,this}divideScalar(e){return this.multiplyScalar(1/e)}setAxisAngleFromQuaternion(e){this.w=2*Math.acos(e.w);const t=Math.sqrt(1-e.w*e.w);return t<1e-4?(this.x=1,this.y=0,this.z=0):(this.x=e.x/t,this.y=e.y/t,this.z=e.z/t),this}setAxisAngleFromRotationMatrix(e){let t,n,r,s;const l=e.elements,u=l[0],c=l[4],A=l[8],m=l[1],_=l[5],b=l[9],M=l[2],w=l[6],T=l[10];if(Math.abs(c-m)<.01&&Math.abs(A-M)<.01&&Math.abs(b-w)<.01){if(Math.abs(c+m)<.1&&Math.abs(A+M)<.1&&Math.abs(b+w)<.1&&Math.abs(u+_+T-3)<.1)return this.set(1,0,0,0),this;t=Math.PI;const P=(u+1)/2,I=(_+1)/2,B=(T+1)/2,F=(c+m)/4,O=(A+M)/4,V=(b+w)/4;return P>I&&P>B?P<.01?(n=0,r=.707106781,s=.707106781):(n=Math.sqrt(P),r=F/n,s=O/n):I>B?I<.01?(n=.707106781,r=0,s=.707106781):(r=Math.sqrt(I),n=F/r,s=V/r):B<.01?(n=.707106781,r=.707106781,s=0):(s=Math.sqrt(B),n=O/s,r=V/s),this.set(n,r,s,t),this}let N=Math.sqrt((w-b)*(w-b)+(A-M)*(A-M)+(m-c)*(m-c));return Math.abs(N)<.001&&(N=1),this.x=(w-b)/N,this.y=(A-M)/N,this.z=(m-c)/N,this.w=Math.acos((u+_+T-1)/2),this}setFromMatrixPosition(e){const t=e.elements;return this.x=t[12],this.y=t[13],this.z=t[14],this.w=t[15],this}min(e){return this.x=Math.min(this.x,e.x),this.y=Math.min(this.y,e.y),this.z=Math.min(this.z,e.z),this.w=Math.min(this.w,e.w),this}max(e){return this.x=Math.max(this.x,e.x),this.y=Math.max(this.y,e.y),this.z=Math.max(this.z,e.z),this.w=Math.max(this.w,e.w),this}clamp(e,t){return this.x=Dn(this.x,e.x,t.x),this.y=Dn(this.y,e.y,t.y),this.z=Dn(this.z,e.z,t.z),this.w=Dn(this.w,e.w,t.w),this}clampScalar(e,t){return this.x=Dn(this.x,e,t),this.y=Dn(this.y,e,t),this.z=Dn(this.z,e,t),this.w=Dn(this.w,e,t),this}clampLength(e,t){const n=this.length();return this.divideScalar(n||1).multiplyScalar(Dn(n,e,t))}floor(){return this.x=Math.floor(this.x),this.y=Math.floor(this.y),this.z=Math.floor(this.z),this.w=Math.floor(this.w),this}ceil(){return this.x=Math.ceil(this.x),this.y=Math.ceil(this.y),this.z=Math.ceil(this.z),this.w=Math.ceil(this.w),this}round(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this.z=Math.round(this.z),this.w=Math.round(this.w),this}roundToZero(){return this.x=Math.trunc(this.x),this.y=Math.trunc(this.y),this.z=Math.trunc(this.z),this.w=Math.trunc(this.w),this}negate(){return this.x=-this.x,this.y=-this.y,this.z=-this.z,this.w=-this.w,this}dot(e){return this.x*e.x+this.y*e.y+this.z*e.z+this.w*e.w}lengthSq(){return this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w}length(){return Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w)}manhattanLength(){return Math.abs(this.x)+Math.abs(this.y)+Math.abs(this.z)+Math.abs(this.w)}normalize(){return this.divideScalar(this.length()||1)}setLength(e){return this.normalize().multiplyScalar(e)}lerp(e,t){return this.x+=(e.x-this.x)*t,this.y+=(e.y-this.y)*t,this.z+=(e.z-this.z)*t,this.w+=(e.w-this.w)*t,this}lerpVectors(e,t,n){return this.x=e.x+(t.x-e.x)*n,this.y=e.y+(t.y-e.y)*n,this.z=e.z+(t.z-e.z)*n,this.w=e.w+(t.w-e.w)*n,this}equals(e){return e.x===this.x&&e.y===this.y&&e.z===this.z&&e.w===this.w}fromArray(e,t=0){return this.x=e[t],this.y=e[t+1],this.z=e[t+2],this.w=e[t+3],this}toArray(e=[],t=0){return e[t]=this.x,e[t+1]=this.y,e[t+2]=this.z,e[t+3]=this.w,e}fromBufferAttribute(e,t){return this.x=e.getX(t),this.y=e.getY(t),this.z=e.getZ(t),this.w=e.getW(t),this}random(){return this.x=Math.random(),this.y=Math.random(),this.z=Math.random(),this.w=Math.random(),this}*[Symbol.iterator](){yield this.x,yield this.y,yield this.z,yield this.w}}class F0 extends Ta{constructor(e=1,t=1,n={}){super(),n=Object.assign({generateMipmaps:!1,internalFormat:null,minFilter:Wi,depthBuffer:!0,stencilBuffer:!1,resolveDepthBuffer:!0,resolveStencilBuffer:!0,depthTexture:null,samples:0,count:1,depth:1,multiview:!1},n),this.isRenderTarget=!0,this.width=e,this.height=t,this.depth=n.depth,this.scissor=new rn(0,0,e,t),this.scissorTest=!1,this.viewport=new rn(0,0,e,t);const r={width:e,height:t,depth:n.depth},s=new ur(r);this.textures=[];const o=n.count;for(let a=0;a<o;a++)this.textures[a]=s.clone(),this.textures[a].isRenderTargetTexture=!0,this.textures[a].renderTarget=this;this._setTextureOptions(n),this.depthBuffer=n.depthBuffer,this.stencilBuffer=n.stencilBuffer,this.resolveDepthBuffer=n.resolveDepthBuffer,this.resolveStencilBuffer=n.resolveStencilBuffer,this._depthTexture=null,this.depthTexture=n.depthTexture,this.samples=n.samples,this.multiview=n.multiview}_setTextureOptions(e={}){const t={minFilter:Wi,generateMipmaps:!1,flipY:!1,internalFormat:null};e.mapping!==void 0&&(t.mapping=e.mapping),e.wrapS!==void 0&&(t.wrapS=e.wrapS),e.wrapT!==void 0&&(t.wrapT=e.wrapT),e.wrapR!==void 0&&(t.wrapR=e.wrapR),e.magFilter!==void 0&&(t.magFilter=e.magFilter),e.minFilter!==void 0&&(t.minFilter=e.minFilter),e.format!==void 0&&(t.format=e.format),e.type!==void 0&&(t.type=e.type),e.anisotropy!==void 0&&(t.anisotropy=e.anisotropy),e.colorSpace!==void 0&&(t.colorSpace=e.colorSpace),e.flipY!==void 0&&(t.flipY=e.flipY),e.generateMipmaps!==void 0&&(t.generateMipmaps=e.generateMipmaps),e.internalFormat!==void 0&&(t.internalFormat=e.internalFormat);for(let n=0;n<this.textures.length;n++)this.textures[n].setValues(t)}get texture(){return this.textures[0]}set texture(e){this.textures[0]=e}set depthTexture(e){this._depthTexture!==null&&(this._depthTexture.renderTarget=null),e!==null&&(e.renderTarget=this),this._depthTexture=e}get depthTexture(){return this._depthTexture}setSize(e,t,n=1){if(this.width!==e||this.height!==t||this.depth!==n){this.width=e,this.height=t,this.depth=n;for(let r=0,s=this.textures.length;r<s;r++)this.textures[r].image.width=e,this.textures[r].image.height=t,this.textures[r].image.depth=n,this.textures[r].isArrayTexture=this.textures[r].image.depth>1;this.dispose()}this.viewport.set(0,0,e,t),this.scissor.set(0,0,e,t)}clone(){return new this.constructor().copy(this)}copy(e){this.width=e.width,this.height=e.height,this.depth=e.depth,this.scissor.copy(e.scissor),this.scissorTest=e.scissorTest,this.viewport.copy(e.viewport),this.textures.length=0;for(let t=0,n=e.textures.length;t<n;t++){this.textures[t]=e.textures[t].clone(),this.textures[t].isRenderTargetTexture=!0,this.textures[t].renderTarget=this;const r=Object.assign({},e.textures[t].image);this.textures[t].source=new iu(r)}return this.depthBuffer=e.depthBuffer,this.stencilBuffer=e.stencilBuffer,this.resolveDepthBuffer=e.resolveDepthBuffer,this.resolveStencilBuffer=e.resolveStencilBuffer,e.depthTexture!==null&&(this.depthTexture=e.depthTexture.clone()),this.samples=e.samples,this}dispose(){this.dispatchEvent({type:"dispose"})}}class dl extends F0{constructor(e=1,t=1,n={}){super(e,t,n),this.isWebGLRenderTarget=!0}}class j8 extends ur{constructor(e=null,t=1,n=1,r=1){super(null),this.isDataArrayTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=qi,this.minFilter=qi,this.wrapR=xo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class SF extends dl{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGLArrayRenderTarget=!0,this.depth=n,this.texture=new j8(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class C9 extends ur{constructor(e=null,t=1,n=1,r=1){super(null),this.isData3DTexture=!0,this.image={data:e,width:t,height:n,depth:r},this.magFilter=qi,this.minFilter=qi,this.wrapR=xo,this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}class TF extends dl{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isWebGL3DRenderTarget=!0,this.depth=n,this.texture=new C9(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}class ls{constructor(e=new J(1/0,1/0,1/0),t=new J(-1/0,-1/0,-1/0)){this.isBox3=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromArray(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t+=3)this.expandByPoint(g0.fromArray(e,t));return this}setFromBufferAttribute(e){this.makeEmpty();for(let t=0,n=e.count;t<n;t++)this.expandByPoint(g0.fromBufferAttribute(e,t));return this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=g0.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}setFromObject(e,t=!1){return this.makeEmpty(),this.expandByObject(e,t)}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=this.min.z=1/0,this.max.x=this.max.y=this.max.z=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y||this.max.z<this.min.z}getCenter(e){return this.isEmpty()?e.set(0,0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}expandByObject(e,t=!1){e.updateWorldMatrix(!1,!1);const n=e.geometry;if(n!==void 0){const s=n.getAttribute("position");if(t===!0&&s!==void 0&&e.isInstancedMesh!==!0)for(let o=0,a=s.count;o<a;o++)e.isMesh===!0?e.getVertexPosition(o,g0):g0.fromBufferAttribute(s,o),g0.applyMatrix4(e.matrixWorld),this.expandByPoint(g0);else e.boundingBox!==void 0?(e.boundingBox===null&&e.computeBoundingBox(),n7.copy(e.boundingBox)):(n.boundingBox===null&&n.computeBoundingBox(),n7.copy(n.boundingBox)),n7.applyMatrix4(e.matrixWorld),this.union(n7)}const r=e.children;for(let s=0,o=r.length;s<o;s++)this.expandByObject(r[s],t);return this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y&&e.z>=this.min.z&&e.z<=this.max.z}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y&&this.min.z<=e.min.z&&e.max.z<=this.max.z}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y),(e.z-this.min.z)/(this.max.z-this.min.z))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y&&e.max.z>=this.min.z&&e.min.z<=this.max.z}intersectsSphere(e){return this.clampPoint(e.center,g0),g0.distanceToSquared(e.center)<=e.radius*e.radius}intersectsPlane(e){let t,n;return e.normal.x>0?(t=e.normal.x*this.min.x,n=e.normal.x*this.max.x):(t=e.normal.x*this.max.x,n=e.normal.x*this.min.x),e.normal.y>0?(t+=e.normal.y*this.min.y,n+=e.normal.y*this.max.y):(t+=e.normal.y*this.max.y,n+=e.normal.y*this.min.y),e.normal.z>0?(t+=e.normal.z*this.min.z,n+=e.normal.z*this.max.z):(t+=e.normal.z*this.max.z,n+=e.normal.z*this.min.z),t<=-e.constant&&n>=-e.constant}intersectsTriangle(e){if(this.isEmpty())return!1;this.getCenter(Y5),i7.subVectors(this.max,Y5),y3.subVectors(e.a,Y5),v3.subVectors(e.b,Y5),_3.subVectors(e.c,Y5),U1.subVectors(v3,y3),O1.subVectors(_3,v3),Ju.subVectors(y3,_3);let t=[0,-U1.z,U1.y,0,-O1.z,O1.y,0,-Ju.z,Ju.y,U1.z,0,-U1.x,O1.z,0,-O1.x,Ju.z,0,-Ju.x,-U1.y,U1.x,0,-O1.y,O1.x,0,-Ju.y,Ju.x,0];return!Ap(t,y3,v3,_3,i7)||(t=[1,0,0,0,1,0,0,0,1],!Ap(t,y3,v3,_3,i7))?!1:(r7.crossVectors(U1,O1),t=[r7.x,r7.y,r7.z],Ap(t,y3,v3,_3,i7))}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,g0).distanceTo(e)}getBoundingSphere(e){return this.isEmpty()?e.makeEmpty():(this.getCenter(e.center),e.radius=this.getSize(g0).length()*.5),e}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}applyMatrix4(e){return this.isEmpty()?this:(Il[0].set(this.min.x,this.min.y,this.min.z).applyMatrix4(e),Il[1].set(this.min.x,this.min.y,this.max.z).applyMatrix4(e),Il[2].set(this.min.x,this.max.y,this.min.z).applyMatrix4(e),Il[3].set(this.min.x,this.max.y,this.max.z).applyMatrix4(e),Il[4].set(this.max.x,this.min.y,this.min.z).applyMatrix4(e),Il[5].set(this.max.x,this.min.y,this.max.z).applyMatrix4(e),Il[6].set(this.max.x,this.max.y,this.min.z).applyMatrix4(e),Il[7].set(this.max.x,this.max.y,this.max.z).applyMatrix4(e),this.setFromPoints(Il),this)}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}toJSON(){return{min:this.min.toArray(),max:this.max.toArray()}}fromJSON(e){return this.min.fromArray(e.min),this.max.fromArray(e.max),this}}const Il=[new J,new J,new J,new J,new J,new J,new J,new J],g0=new J,n7=new ls,y3=new J,v3=new J,_3=new J,U1=new J,O1=new J,Ju=new J,Y5=new J,i7=new J,r7=new J,e2=new J;function Ap(i,e,t,n,r){for(let s=0,o=i.length-3;s<=o;s+=3){e2.fromArray(i,s);const a=r.x*Math.abs(e2.x)+r.y*Math.abs(e2.y)+r.z*Math.abs(e2.z),l=e.dot(e2),u=t.dot(e2),c=n.dot(e2);if(Math.max(-Math.max(l,u,c),Math.min(l,u,c))>a)return!1}return!0}const wF=new ls,K5=new J,pp=new J;class Kr{constructor(e=new J,t=-1){this.isSphere=!0,this.center=e,this.radius=t}set(e,t){return this.center.copy(e),this.radius=t,this}setFromPoints(e,t){const n=this.center;t!==void 0?n.copy(t):wF.setFromPoints(e).getCenter(n);let r=0;for(let s=0,o=e.length;s<o;s++)r=Math.max(r,n.distanceToSquared(e[s]));return this.radius=Math.sqrt(r),this}copy(e){return this.center.copy(e.center),this.radius=e.radius,this}isEmpty(){return this.radius<0}makeEmpty(){return this.center.set(0,0,0),this.radius=-1,this}containsPoint(e){return e.distanceToSquared(this.center)<=this.radius*this.radius}distanceToPoint(e){return e.distanceTo(this.center)-this.radius}intersectsSphere(e){const t=this.radius+e.radius;return e.center.distanceToSquared(this.center)<=t*t}intersectsBox(e){return e.intersectsSphere(this)}intersectsPlane(e){return Math.abs(e.distanceToPoint(this.center))<=this.radius}clampPoint(e,t){const n=this.center.distanceToSquared(e);return t.copy(e),n>this.radius*this.radius&&(t.sub(this.center).normalize(),t.multiplyScalar(this.radius).add(this.center)),t}getBoundingBox(e){return this.isEmpty()?(e.makeEmpty(),e):(e.set(this.center,this.center),e.expandByScalar(this.radius),e)}applyMatrix4(e){return this.center.applyMatrix4(e),this.radius=this.radius*e.getMaxScaleOnAxis(),this}translate(e){return this.center.add(e),this}expandByPoint(e){if(this.isEmpty())return this.center.copy(e),this.radius=0,this;K5.subVectors(e,this.center);const t=K5.lengthSq();if(t>this.radius*this.radius){const n=Math.sqrt(t),r=(n-this.radius)*.5;this.center.addScaledVector(K5,r/n),this.radius+=r}return this}union(e){return e.isEmpty()?this:this.isEmpty()?(this.copy(e),this):(this.center.equals(e.center)===!0?this.radius=Math.max(this.radius,e.radius):(pp.subVectors(e.center,this.center).setLength(e.radius),this.expandByPoint(K5.copy(e.center).add(pp)),this.expandByPoint(K5.copy(e.center).sub(pp))),this)}equals(e){return e.center.equals(this.center)&&e.radius===this.radius}clone(){return new this.constructor().copy(this)}toJSON(){return{radius:this.radius,center:this.center.toArray()}}fromJSON(e){return this.radius=e.radius,this.center.fromArray(e.center),this}}const Ll=new J,mp=new J,s7=new J,k1=new J,gp=new J,o7=new J,yp=new J;class Ec{constructor(e=new J,t=new J(0,0,-1)){this.origin=e,this.direction=t}set(e,t){return this.origin.copy(e),this.direction.copy(t),this}copy(e){return this.origin.copy(e.origin),this.direction.copy(e.direction),this}at(e,t){return t.copy(this.origin).addScaledVector(this.direction,e)}lookAt(e){return this.direction.copy(e).sub(this.origin).normalize(),this}recast(e){return this.origin.copy(this.at(e,Ll)),this}closestPointToPoint(e,t){t.subVectors(e,this.origin);const n=t.dot(this.direction);return n<0?t.copy(this.origin):t.copy(this.origin).addScaledVector(this.direction,n)}distanceToPoint(e){return Math.sqrt(this.distanceSqToPoint(e))}distanceSqToPoint(e){const t=Ll.subVectors(e,this.origin).dot(this.direction);return t<0?this.origin.distanceToSquared(e):(Ll.copy(this.origin).addScaledVector(this.direction,t),Ll.distanceToSquared(e))}distanceSqToSegment(e,t,n,r){mp.copy(e).add(t).multiplyScalar(.5),s7.copy(t).sub(e).normalize(),k1.copy(this.origin).sub(mp);const s=e.distanceTo(t)*.5,o=-this.direction.dot(s7),a=k1.dot(this.direction),l=-k1.dot(s7),u=k1.lengthSq(),c=Math.abs(1-o*o);let A,m,_,b;if(c>0)if(A=o*l-a,m=o*a-l,b=s*c,A>=0)if(m>=-b)if(m<=b){const M=1/c;A*=M,m*=M,_=A*(A+o*m+2*a)+m*(o*A+m+2*l)+u}else m=s,A=Math.max(0,-(o*m+a)),_=-A*A+m*(m+2*l)+u;else m=-s,A=Math.max(0,-(o*m+a)),_=-A*A+m*(m+2*l)+u;else m<=-b?(A=Math.max(0,-(-o*s+a)),m=A>0?-s:Math.min(Math.max(-s,-l),s),_=-A*A+m*(m+2*l)+u):m<=b?(A=0,m=Math.min(Math.max(-s,-l),s),_=m*(m+2*l)+u):(A=Math.max(0,-(o*s+a)),m=A>0?s:Math.min(Math.max(-s,-l),s),_=-A*A+m*(m+2*l)+u);else m=o>0?-s:s,A=Math.max(0,-(o*m+a)),_=-A*A+m*(m+2*l)+u;return n&&n.copy(this.origin).addScaledVector(this.direction,A),r&&r.copy(mp).addScaledVector(s7,m),_}intersectSphere(e,t){Ll.subVectors(e.center,this.origin);const n=Ll.dot(this.direction),r=Ll.dot(Ll)-n*n,s=e.radius*e.radius;if(r>s)return null;const o=Math.sqrt(s-r),a=n-o,l=n+o;return l<0?null:a<0?this.at(l,t):this.at(a,t)}intersectsSphere(e){return e.radius<0?!1:this.distanceSqToPoint(e.center)<=e.radius*e.radius}distanceToPlane(e){const t=e.normal.dot(this.direction);if(t===0)return e.distanceToPoint(this.origin)===0?0:null;const n=-(this.origin.dot(e.normal)+e.constant)/t;return n>=0?n:null}intersectPlane(e,t){const n=this.distanceToPlane(e);return n===null?null:this.at(n,t)}intersectsPlane(e){const t=e.distanceToPoint(this.origin);return t===0||e.normal.dot(this.direction)*t<0}intersectBox(e,t){let n,r,s,o,a,l;const u=1/this.direction.x,c=1/this.direction.y,A=1/this.direction.z,m=this.origin;return u>=0?(n=(e.min.x-m.x)*u,r=(e.max.x-m.x)*u):(n=(e.max.x-m.x)*u,r=(e.min.x-m.x)*u),c>=0?(s=(e.min.y-m.y)*c,o=(e.max.y-m.y)*c):(s=(e.max.y-m.y)*c,o=(e.min.y-m.y)*c),n>o||s>r||((s>n||isNaN(n))&&(n=s),(o<r||isNaN(r))&&(r=o),A>=0?(a=(e.min.z-m.z)*A,l=(e.max.z-m.z)*A):(a=(e.max.z-m.z)*A,l=(e.min.z-m.z)*A),n>l||a>r)||((a>n||n!==n)&&(n=a),(l<r||r!==r)&&(r=l),r<0)?null:this.at(n>=0?n:r,t)}intersectsBox(e){return this.intersectBox(e,Ll)!==null}intersectTriangle(e,t,n,r,s){gp.subVectors(t,e),o7.subVectors(n,e),yp.crossVectors(gp,o7);let o=this.direction.dot(yp),a;if(o>0){if(r)return null;a=1}else if(o<0)a=-1,o=-o;else return null;k1.subVectors(this.origin,e);const l=a*this.direction.dot(o7.crossVectors(k1,o7));if(l<0)return null;const u=a*this.direction.dot(gp.cross(k1));if(u<0||l+u>o)return null;const c=-a*k1.dot(yp);return c<0?null:this.at(c/o,s)}applyMatrix4(e){return this.origin.applyMatrix4(e),this.direction.transformDirection(e),this}equals(e){return e.origin.equals(this.origin)&&e.direction.equals(this.direction)}clone(){return new this.constructor().copy(this)}}class Wt{constructor(e,t,n,r,s,o,a,l,u,c,A,m,_,b,M,w){Wt.prototype.isMatrix4=!0,this.elements=[1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],e!==void 0&&this.set(e,t,n,r,s,o,a,l,u,c,A,m,_,b,M,w)}set(e,t,n,r,s,o,a,l,u,c,A,m,_,b,M,w){const T=this.elements;return T[0]=e,T[4]=t,T[8]=n,T[12]=r,T[1]=s,T[5]=o,T[9]=a,T[13]=l,T[2]=u,T[6]=c,T[10]=A,T[14]=m,T[3]=_,T[7]=b,T[11]=M,T[15]=w,this}identity(){return this.set(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1),this}clone(){return new Wt().fromArray(this.elements)}copy(e){const t=this.elements,n=e.elements;return t[0]=n[0],t[1]=n[1],t[2]=n[2],t[3]=n[3],t[4]=n[4],t[5]=n[5],t[6]=n[6],t[7]=n[7],t[8]=n[8],t[9]=n[9],t[10]=n[10],t[11]=n[11],t[12]=n[12],t[13]=n[13],t[14]=n[14],t[15]=n[15],this}copyPosition(e){const t=this.elements,n=e.elements;return t[12]=n[12],t[13]=n[13],t[14]=n[14],this}setFromMatrix3(e){const t=e.elements;return this.set(t[0],t[3],t[6],0,t[1],t[4],t[7],0,t[2],t[5],t[8],0,0,0,0,1),this}extractBasis(e,t,n){return e.setFromMatrixColumn(this,0),t.setFromMatrixColumn(this,1),n.setFromMatrixColumn(this,2),this}makeBasis(e,t,n){return this.set(e.x,t.x,n.x,0,e.y,t.y,n.y,0,e.z,t.z,n.z,0,0,0,0,1),this}extractRotation(e){const t=this.elements,n=e.elements,r=1/x3.setFromMatrixColumn(e,0).length(),s=1/x3.setFromMatrixColumn(e,1).length(),o=1/x3.setFromMatrixColumn(e,2).length();return t[0]=n[0]*r,t[1]=n[1]*r,t[2]=n[2]*r,t[3]=0,t[4]=n[4]*s,t[5]=n[5]*s,t[6]=n[6]*s,t[7]=0,t[8]=n[8]*o,t[9]=n[9]*o,t[10]=n[10]*o,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromEuler(e){const t=this.elements,n=e.x,r=e.y,s=e.z,o=Math.cos(n),a=Math.sin(n),l=Math.cos(r),u=Math.sin(r),c=Math.cos(s),A=Math.sin(s);if(e.order==="XYZ"){const m=o*c,_=o*A,b=a*c,M=a*A;t[0]=l*c,t[4]=-l*A,t[8]=u,t[1]=_+b*u,t[5]=m-M*u,t[9]=-a*l,t[2]=M-m*u,t[6]=b+_*u,t[10]=o*l}else if(e.order==="YXZ"){const m=l*c,_=l*A,b=u*c,M=u*A;t[0]=m+M*a,t[4]=b*a-_,t[8]=o*u,t[1]=o*A,t[5]=o*c,t[9]=-a,t[2]=_*a-b,t[6]=M+m*a,t[10]=o*l}else if(e.order==="ZXY"){const m=l*c,_=l*A,b=u*c,M=u*A;t[0]=m-M*a,t[4]=-o*A,t[8]=b+_*a,t[1]=_+b*a,t[5]=o*c,t[9]=M-m*a,t[2]=-o*u,t[6]=a,t[10]=o*l}else if(e.order==="ZYX"){const m=o*c,_=o*A,b=a*c,M=a*A;t[0]=l*c,t[4]=b*u-_,t[8]=m*u+M,t[1]=l*A,t[5]=M*u+m,t[9]=_*u-b,t[2]=-u,t[6]=a*l,t[10]=o*l}else if(e.order==="YZX"){const m=o*l,_=o*u,b=a*l,M=a*u;t[0]=l*c,t[4]=M-m*A,t[8]=b*A+_,t[1]=A,t[5]=o*c,t[9]=-a*c,t[2]=-u*c,t[6]=_*A+b,t[10]=m-M*A}else if(e.order==="XZY"){const m=o*l,_=o*u,b=a*l,M=a*u;t[0]=l*c,t[4]=-A,t[8]=u*c,t[1]=m*A+M,t[5]=o*c,t[9]=_*A-b,t[2]=b*A-_,t[6]=a*c,t[10]=M*A+m}return t[3]=0,t[7]=0,t[11]=0,t[12]=0,t[13]=0,t[14]=0,t[15]=1,this}makeRotationFromQuaternion(e){return this.compose(MF,e,EF)}lookAt(e,t,n){const r=this.elements;return ua.subVectors(e,t),ua.lengthSq()===0&&(ua.z=1),ua.normalize(),V1.crossVectors(n,ua),V1.lengthSq()===0&&(Math.abs(n.z)===1?ua.x+=1e-4:ua.z+=1e-4,ua.normalize(),V1.crossVectors(n,ua)),V1.normalize(),a7.crossVectors(ua,V1),r[0]=V1.x,r[4]=a7.x,r[8]=ua.x,r[1]=V1.y,r[5]=a7.y,r[9]=ua.y,r[2]=V1.z,r[6]=a7.z,r[10]=ua.z,this}multiply(e){return this.multiplyMatrices(this,e)}premultiply(e){return this.multiplyMatrices(e,this)}multiplyMatrices(e,t){const n=e.elements,r=t.elements,s=this.elements,o=n[0],a=n[4],l=n[8],u=n[12],c=n[1],A=n[5],m=n[9],_=n[13],b=n[2],M=n[6],w=n[10],T=n[14],N=n[3],P=n[7],I=n[11],B=n[15],F=r[0],O=r[4],V=r[8],U=r[12],z=r[1],H=r[5],Q=r[9],Y=r[13],ne=r[2],ee=r[6],se=r[10],pe=r[14],re=r[3],de=r[7],ye=r[11],Pe=r[15];return s[0]=o*F+a*z+l*ne+u*re,s[4]=o*O+a*H+l*ee+u*de,s[8]=o*V+a*Q+l*se+u*ye,s[12]=o*U+a*Y+l*pe+u*Pe,s[1]=c*F+A*z+m*ne+_*re,s[5]=c*O+A*H+m*ee+_*de,s[9]=c*V+A*Q+m*se+_*ye,s[13]=c*U+A*Y+m*pe+_*Pe,s[2]=b*F+M*z+w*ne+T*re,s[6]=b*O+M*H+w*ee+T*de,s[10]=b*V+M*Q+w*se+T*ye,s[14]=b*U+M*Y+w*pe+T*Pe,s[3]=N*F+P*z+I*ne+B*re,s[7]=N*O+P*H+I*ee+B*de,s[11]=N*V+P*Q+I*se+B*ye,s[15]=N*U+P*Y+I*pe+B*Pe,this}multiplyScalar(e){const t=this.elements;return t[0]*=e,t[4]*=e,t[8]*=e,t[12]*=e,t[1]*=e,t[5]*=e,t[9]*=e,t[13]*=e,t[2]*=e,t[6]*=e,t[10]*=e,t[14]*=e,t[3]*=e,t[7]*=e,t[11]*=e,t[15]*=e,this}determinant(){const e=this.elements,t=e[0],n=e[4],r=e[8],s=e[12],o=e[1],a=e[5],l=e[9],u=e[13],c=e[2],A=e[6],m=e[10],_=e[14],b=e[3],M=e[7],w=e[11],T=e[15];return b*(+s*l*A-r*u*A-s*a*m+n*u*m+r*a*_-n*l*_)+M*(+t*l*_-t*u*m+s*o*m-r*o*_+r*u*c-s*l*c)+w*(+t*u*A-t*a*_-s*o*A+n*o*_+s*a*c-n*u*c)+T*(-r*a*c-t*l*A+t*a*m+r*o*A-n*o*m+n*l*c)}transpose(){const e=this.elements;let t;return t=e[1],e[1]=e[4],e[4]=t,t=e[2],e[2]=e[8],e[8]=t,t=e[6],e[6]=e[9],e[9]=t,t=e[3],e[3]=e[12],e[12]=t,t=e[7],e[7]=e[13],e[13]=t,t=e[11],e[11]=e[14],e[14]=t,this}setPosition(e,t,n){const r=this.elements;return e.isVector3?(r[12]=e.x,r[13]=e.y,r[14]=e.z):(r[12]=e,r[13]=t,r[14]=n),this}invert(){const e=this.elements,t=e[0],n=e[1],r=e[2],s=e[3],o=e[4],a=e[5],l=e[6],u=e[7],c=e[8],A=e[9],m=e[10],_=e[11],b=e[12],M=e[13],w=e[14],T=e[15],N=A*w*u-M*m*u+M*l*_-a*w*_-A*l*T+a*m*T,P=b*m*u-c*w*u-b*l*_+o*w*_+c*l*T-o*m*T,I=c*M*u-b*A*u+b*a*_-o*M*_-c*a*T+o*A*T,B=b*A*l-c*M*l-b*a*m+o*M*m+c*a*w-o*A*w,F=t*N+n*P+r*I+s*B;if(F===0)return this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0);const O=1/F;return e[0]=N*O,e[1]=(M*m*s-A*w*s-M*r*_+n*w*_+A*r*T-n*m*T)*O,e[2]=(a*w*s-M*l*s+M*r*u-n*w*u-a*r*T+n*l*T)*O,e[3]=(A*l*s-a*m*s-A*r*u+n*m*u+a*r*_-n*l*_)*O,e[4]=P*O,e[5]=(c*w*s-b*m*s+b*r*_-t*w*_-c*r*T+t*m*T)*O,e[6]=(b*l*s-o*w*s-b*r*u+t*w*u+o*r*T-t*l*T)*O,e[7]=(o*m*s-c*l*s+c*r*u-t*m*u-o*r*_+t*l*_)*O,e[8]=I*O,e[9]=(b*A*s-c*M*s-b*n*_+t*M*_+c*n*T-t*A*T)*O,e[10]=(o*M*s-b*a*s+b*n*u-t*M*u-o*n*T+t*a*T)*O,e[11]=(c*a*s-o*A*s-c*n*u+t*A*u+o*n*_-t*a*_)*O,e[12]=B*O,e[13]=(c*M*r-b*A*r+b*n*m-t*M*m-c*n*w+t*A*w)*O,e[14]=(b*a*r-o*M*r-b*n*l+t*M*l+o*n*w-t*a*w)*O,e[15]=(o*A*r-c*a*r+c*n*l-t*A*l-o*n*m+t*a*m)*O,this}scale(e){const t=this.elements,n=e.x,r=e.y,s=e.z;return t[0]*=n,t[4]*=r,t[8]*=s,t[1]*=n,t[5]*=r,t[9]*=s,t[2]*=n,t[6]*=r,t[10]*=s,t[3]*=n,t[7]*=r,t[11]*=s,this}getMaxScaleOnAxis(){const e=this.elements,t=e[0]*e[0]+e[1]*e[1]+e[2]*e[2],n=e[4]*e[4]+e[5]*e[5]+e[6]*e[6],r=e[8]*e[8]+e[9]*e[9]+e[10]*e[10];return Math.sqrt(Math.max(t,n,r))}makeTranslation(e,t,n){return e.isVector3?this.set(1,0,0,e.x,0,1,0,e.y,0,0,1,e.z,0,0,0,1):this.set(1,0,0,e,0,1,0,t,0,0,1,n,0,0,0,1),this}makeRotationX(e){const t=Math.cos(e),n=Math.sin(e);return this.set(1,0,0,0,0,t,-n,0,0,n,t,0,0,0,0,1),this}makeRotationY(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,0,n,0,0,1,0,0,-n,0,t,0,0,0,0,1),this}makeRotationZ(e){const t=Math.cos(e),n=Math.sin(e);return this.set(t,-n,0,0,n,t,0,0,0,0,1,0,0,0,0,1),this}makeRotationAxis(e,t){const n=Math.cos(t),r=Math.sin(t),s=1-n,o=e.x,a=e.y,l=e.z,u=s*o,c=s*a;return this.set(u*o+n,u*a-r*l,u*l+r*a,0,u*a+r*l,c*a+n,c*l-r*o,0,u*l-r*a,c*l+r*o,s*l*l+n,0,0,0,0,1),this}makeScale(e,t,n){return this.set(e,0,0,0,0,t,0,0,0,0,n,0,0,0,0,1),this}makeShear(e,t,n,r,s,o){return this.set(1,n,s,0,e,1,o,0,t,r,1,0,0,0,0,1),this}compose(e,t,n){const r=this.elements,s=t._x,o=t._y,a=t._z,l=t._w,u=s+s,c=o+o,A=a+a,m=s*u,_=s*c,b=s*A,M=o*c,w=o*A,T=a*A,N=l*u,P=l*c,I=l*A,B=n.x,F=n.y,O=n.z;return r[0]=(1-(M+T))*B,r[1]=(_+I)*B,r[2]=(b-P)*B,r[3]=0,r[4]=(_-I)*F,r[5]=(1-(m+T))*F,r[6]=(w+N)*F,r[7]=0,r[8]=(b+P)*O,r[9]=(w-N)*O,r[10]=(1-(m+M))*O,r[11]=0,r[12]=e.x,r[13]=e.y,r[14]=e.z,r[15]=1,this}decompose(e,t,n){const r=this.elements;let s=x3.set(r[0],r[1],r[2]).length();const o=x3.set(r[4],r[5],r[6]).length(),a=x3.set(r[8],r[9],r[10]).length();this.determinant()<0&&(s=-s),e.x=r[12],e.y=r[13],e.z=r[14],y0.copy(this);const u=1/s,c=1/o,A=1/a;return y0.elements[0]*=u,y0.elements[1]*=u,y0.elements[2]*=u,y0.elements[4]*=c,y0.elements[5]*=c,y0.elements[6]*=c,y0.elements[8]*=A,y0.elements[9]*=A,y0.elements[10]*=A,t.setFromRotationMatrix(y0),n.x=s,n.y=o,n.z=a,this}makePerspective(e,t,n,r,s,o,a=bs,l=!1){const u=this.elements,c=2*s/(t-e),A=2*s/(n-r),m=(t+e)/(t-e),_=(n+r)/(n-r);let b,M;if(l)b=s/(o-s),M=o*s/(o-s);else if(a===bs)b=-(o+s)/(o-s),M=-2*o*s/(o-s);else if(a===Qa)b=-o/(o-s),M=-o*s/(o-s);else throw new Error("THREE.Matrix4.makePerspective(): Invalid coordinate system: "+a);return u[0]=c,u[4]=0,u[8]=m,u[12]=0,u[1]=0,u[5]=A,u[9]=_,u[13]=0,u[2]=0,u[6]=0,u[10]=b,u[14]=M,u[3]=0,u[7]=0,u[11]=-1,u[15]=0,this}makeOrthographic(e,t,n,r,s,o,a=bs,l=!1){const u=this.elements,c=2/(t-e),A=2/(n-r),m=-(t+e)/(t-e),_=-(n+r)/(n-r);let b,M;if(l)b=1/(o-s),M=o/(o-s);else if(a===bs)b=-2/(o-s),M=-(o+s)/(o-s);else if(a===Qa)b=-1/(o-s),M=-s/(o-s);else throw new Error("THREE.Matrix4.makeOrthographic(): Invalid coordinate system: "+a);return u[0]=c,u[4]=0,u[8]=0,u[12]=m,u[1]=0,u[5]=A,u[9]=0,u[13]=_,u[2]=0,u[6]=0,u[10]=b,u[14]=M,u[3]=0,u[7]=0,u[11]=0,u[15]=1,this}equals(e){const t=this.elements,n=e.elements;for(let r=0;r<16;r++)if(t[r]!==n[r])return!1;return!0}fromArray(e,t=0){for(let n=0;n<16;n++)this.elements[n]=e[n+t];return this}toArray(e=[],t=0){const n=this.elements;return e[t]=n[0],e[t+1]=n[1],e[t+2]=n[2],e[t+3]=n[3],e[t+4]=n[4],e[t+5]=n[5],e[t+6]=n[6],e[t+7]=n[7],e[t+8]=n[8],e[t+9]=n[9],e[t+10]=n[10],e[t+11]=n[11],e[t+12]=n[12],e[t+13]=n[13],e[t+14]=n[14],e[t+15]=n[15],e}}const x3=new J,y0=new Wt,MF=new J(0,0,0),EF=new J(1,1,1),V1=new J,a7=new J,ua=new J,tb=new Wt,nb=new Os;class Ts{constructor(e=0,t=0,n=0,r=Ts.DEFAULT_ORDER){this.isEuler=!0,this._x=e,this._y=t,this._z=n,this._order=r}get x(){return this._x}set x(e){this._x=e,this._onChangeCallback()}get y(){return this._y}set y(e){this._y=e,this._onChangeCallback()}get z(){return this._z}set z(e){this._z=e,this._onChangeCallback()}get order(){return this._order}set order(e){this._order=e,this._onChangeCallback()}set(e,t,n,r=this._order){return this._x=e,this._y=t,this._z=n,this._order=r,this._onChangeCallback(),this}clone(){return new this.constructor(this._x,this._y,this._z,this._order)}copy(e){return this._x=e._x,this._y=e._y,this._z=e._z,this._order=e._order,this._onChangeCallback(),this}setFromRotationMatrix(e,t=this._order,n=!0){const r=e.elements,s=r[0],o=r[4],a=r[8],l=r[1],u=r[5],c=r[9],A=r[2],m=r[6],_=r[10];switch(t){case"XYZ":this._y=Math.asin(Dn(a,-1,1)),Math.abs(a)<.9999999?(this._x=Math.atan2(-c,_),this._z=Math.atan2(-o,s)):(this._x=Math.atan2(m,u),this._z=0);break;case"YXZ":this._x=Math.asin(-Dn(c,-1,1)),Math.abs(c)<.9999999?(this._y=Math.atan2(a,_),this._z=Math.atan2(l,u)):(this._y=Math.atan2(-A,s),this._z=0);break;case"ZXY":this._x=Math.asin(Dn(m,-1,1)),Math.abs(m)<.9999999?(this._y=Math.atan2(-A,_),this._z=Math.atan2(-o,u)):(this._y=0,this._z=Math.atan2(l,s));break;case"ZYX":this._y=Math.asin(-Dn(A,-1,1)),Math.abs(A)<.9999999?(this._x=Math.atan2(m,_),this._z=Math.atan2(l,s)):(this._x=0,this._z=Math.atan2(-o,u));break;case"YZX":this._z=Math.asin(Dn(l,-1,1)),Math.abs(l)<.9999999?(this._x=Math.atan2(-c,u),this._y=Math.atan2(-A,s)):(this._x=0,this._y=Math.atan2(a,_));break;case"XZY":this._z=Math.asin(-Dn(o,-1,1)),Math.abs(o)<.9999999?(this._x=Math.atan2(m,u),this._y=Math.atan2(a,s)):(this._x=Math.atan2(-c,_),this._y=0);break;default:console.warn("THREE.Euler: .setFromRotationMatrix() encountered an unknown order: "+t)}return this._order=t,n===!0&&this._onChangeCallback(),this}setFromQuaternion(e,t,n){return tb.makeRotationFromQuaternion(e),this.setFromRotationMatrix(tb,t,n)}setFromVector3(e,t=this._order){return this.set(e.x,e.y,e.z,t)}reorder(e){return nb.setFromEuler(this),this.setFromQuaternion(nb,e)}equals(e){return e._x===this._x&&e._y===this._y&&e._z===this._z&&e._order===this._order}fromArray(e){return this._x=e[0],this._y=e[1],this._z=e[2],e[3]!==void 0&&(this._order=e[3]),this._onChangeCallback(),this}toArray(e=[],t=0){return e[t]=this._x,e[t+1]=this._y,e[t+2]=this._z,e[t+3]=this._order,e}_onChange(e){return this._onChangeCallback=e,this}_onChangeCallback(){}*[Symbol.iterator](){yield this._x,yield this._y,yield this._z,yield this._order}}Ts.DEFAULT_ORDER="XYZ";class q2{constructor(){this.mask=1}set(e){this.mask=(1<<e|0)>>>0}enable(e){this.mask|=1<<e|0}enableAll(){this.mask=-1}toggle(e){this.mask^=1<<e|0}disable(e){this.mask&=~(1<<e|0)}disableAll(){this.mask=0}test(e){return(this.mask&e.mask)!==0}isEnabled(e){return(this.mask&(1<<e|0))!==0}}let RF=0;const ib=new J,b3=new Os,Dl=new Wt,l7=new J,Z5=new J,CF=new J,PF=new Os,rb=new J(1,0,0),sb=new J(0,1,0),ob=new J(0,0,1),ab={type:"added"},NF={type:"removed"},S3={type:"childadded",child:null},vp={type:"childremoved",child:null};class Ai extends Ta{constructor(){super(),this.isObject3D=!0,Object.defineProperty(this,"id",{value:RF++}),this.uuid=va(),this.name="",this.type="Object3D",this.parent=null,this.children=[],this.up=Ai.DEFAULT_UP.clone();const e=new J,t=new Ts,n=new Os,r=new J(1,1,1);function s(){n.setFromEuler(t,!1)}function o(){t.setFromQuaternion(n,void 0,!1)}t._onChange(s),n._onChange(o),Object.defineProperties(this,{position:{configurable:!0,enumerable:!0,value:e},rotation:{configurable:!0,enumerable:!0,value:t},quaternion:{configurable:!0,enumerable:!0,value:n},scale:{configurable:!0,enumerable:!0,value:r},modelViewMatrix:{value:new Wt},normalMatrix:{value:new Fn}}),this.matrix=new Wt,this.matrixWorld=new Wt,this.matrixAutoUpdate=Ai.DEFAULT_MATRIX_AUTO_UPDATE,this.matrixWorldAutoUpdate=Ai.DEFAULT_MATRIX_WORLD_AUTO_UPDATE,this.matrixWorldNeedsUpdate=!1,this.layers=new q2,this.visible=!0,this.castShadow=!1,this.receiveShadow=!1,this.frustumCulled=!0,this.renderOrder=0,this.animations=[],this.customDepthMaterial=void 0,this.customDistanceMaterial=void 0,this.userData={}}onBeforeShadow(){}onAfterShadow(){}onBeforeRender(){}onAfterRender(){}applyMatrix4(e){this.matrixAutoUpdate&&this.updateMatrix(),this.matrix.premultiply(e),this.matrix.decompose(this.position,this.quaternion,this.scale)}applyQuaternion(e){return this.quaternion.premultiply(e),this}setRotationFromAxisAngle(e,t){this.quaternion.setFromAxisAngle(e,t)}setRotationFromEuler(e){this.quaternion.setFromEuler(e,!0)}setRotationFromMatrix(e){this.quaternion.setFromRotationMatrix(e)}setRotationFromQuaternion(e){this.quaternion.copy(e)}rotateOnAxis(e,t){return b3.setFromAxisAngle(e,t),this.quaternion.multiply(b3),this}rotateOnWorldAxis(e,t){return b3.setFromAxisAngle(e,t),this.quaternion.premultiply(b3),this}rotateX(e){return this.rotateOnAxis(rb,e)}rotateY(e){return this.rotateOnAxis(sb,e)}rotateZ(e){return this.rotateOnAxis(ob,e)}translateOnAxis(e,t){return ib.copy(e).applyQuaternion(this.quaternion),this.position.add(ib.multiplyScalar(t)),this}translateX(e){return this.translateOnAxis(rb,e)}translateY(e){return this.translateOnAxis(sb,e)}translateZ(e){return this.translateOnAxis(ob,e)}localToWorld(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(this.matrixWorld)}worldToLocal(e){return this.updateWorldMatrix(!0,!1),e.applyMatrix4(Dl.copy(this.matrixWorld).invert())}lookAt(e,t,n){e.isVector3?l7.copy(e):l7.set(e,t,n);const r=this.parent;this.updateWorldMatrix(!0,!1),Z5.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?Dl.lookAt(Z5,l7,this.up):Dl.lookAt(l7,Z5,this.up),this.quaternion.setFromRotationMatrix(Dl),r&&(Dl.extractRotation(r.matrixWorld),b3.setFromRotationMatrix(Dl),this.quaternion.premultiply(b3.invert()))}add(e){if(arguments.length>1){for(let t=0;t<arguments.length;t++)this.add(arguments[t]);return this}return e===this?(console.error("THREE.Object3D.add: object can't be added as a child of itself.",e),this):(e&&e.isObject3D?(e.removeFromParent(),e.parent=this,this.children.push(e),e.dispatchEvent(ab),S3.child=e,this.dispatchEvent(S3),S3.child=null):console.error("THREE.Object3D.add: object not an instance of THREE.Object3D.",e),this)}remove(e){if(arguments.length>1){for(let n=0;n<arguments.length;n++)this.remove(arguments[n]);return this}const t=this.children.indexOf(e);return t!==-1&&(e.parent=null,this.children.splice(t,1),e.dispatchEvent(NF),vp.child=e,this.dispatchEvent(vp),vp.child=null),this}removeFromParent(){const e=this.parent;return e!==null&&e.remove(this),this}clear(){return this.remove(...this.children)}attach(e){return this.updateWorldMatrix(!0,!1),Dl.copy(this.matrixWorld).invert(),e.parent!==null&&(e.parent.updateWorldMatrix(!0,!1),Dl.multiply(e.parent.matrixWorld)),e.applyMatrix4(Dl),e.removeFromParent(),e.parent=this,this.children.push(e),e.updateWorldMatrix(!1,!0),e.dispatchEvent(ab),S3.child=e,this.dispatchEvent(S3),S3.child=null,this}getObjectById(e){return this.getObjectByProperty("id",e)}getObjectByName(e){return this.getObjectByProperty("name",e)}getObjectByProperty(e,t){if(this[e]===t)return this;for(let n=0,r=this.children.length;n<r;n++){const o=this.children[n].getObjectByProperty(e,t);if(o!==void 0)return o}}getObjectsByProperty(e,t,n=[]){this[e]===t&&n.push(this);const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].getObjectsByProperty(e,t,n);return n}getWorldPosition(e){return this.updateWorldMatrix(!0,!1),e.setFromMatrixPosition(this.matrixWorld)}getWorldQuaternion(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Z5,e,CF),e}getWorldScale(e){return this.updateWorldMatrix(!0,!1),this.matrixWorld.decompose(Z5,PF,e),e}getWorldDirection(e){this.updateWorldMatrix(!0,!1);const t=this.matrixWorld.elements;return e.set(t[8],t[9],t[10]).normalize()}raycast(){}traverse(e){e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverse(e)}traverseVisible(e){if(this.visible===!1)return;e(this);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].traverseVisible(e)}traverseAncestors(e){const t=this.parent;t!==null&&(e(t),t.traverseAncestors(e))}updateMatrix(){this.matrix.compose(this.position,this.quaternion,this.scale),this.matrixWorldNeedsUpdate=!0}updateMatrixWorld(e){this.matrixAutoUpdate&&this.updateMatrix(),(this.matrixWorldNeedsUpdate||e)&&(this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),this.matrixWorldNeedsUpdate=!1,e=!0);const t=this.children;for(let n=0,r=t.length;n<r;n++)t[n].updateMatrixWorld(e)}updateWorldMatrix(e,t){const n=this.parent;if(e===!0&&n!==null&&n.updateWorldMatrix(!0,!1),this.matrixAutoUpdate&&this.updateMatrix(),this.matrixWorldAutoUpdate===!0&&(this.parent===null?this.matrixWorld.copy(this.matrix):this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix)),t===!0){const r=this.children;for(let s=0,o=r.length;s<o;s++)r[s].updateWorldMatrix(!1,!0)}}toJSON(e){const t=e===void 0||typeof e=="string",n={};t&&(e={geometries:{},materials:{},textures:{},images:{},shapes:{},skeletons:{},animations:{},nodes:{}},n.metadata={version:4.7,type:"Object",generator:"Object3D.toJSON"});const r={};r.uuid=this.uuid,r.type=this.type,this.name!==""&&(r.name=this.name),this.castShadow===!0&&(r.castShadow=!0),this.receiveShadow===!0&&(r.receiveShadow=!0),this.visible===!1&&(r.visible=!1),this.frustumCulled===!1&&(r.frustumCulled=!1),this.renderOrder!==0&&(r.renderOrder=this.renderOrder),Object.keys(this.userData).length>0&&(r.userData=this.userData),r.layers=this.layers.mask,r.matrix=this.matrix.toArray(),r.up=this.up.toArray(),this.matrixAutoUpdate===!1&&(r.matrixAutoUpdate=!1),this.isInstancedMesh&&(r.type="InstancedMesh",r.count=this.count,r.instanceMatrix=this.instanceMatrix.toJSON(),this.instanceColor!==null&&(r.instanceColor=this.instanceColor.toJSON())),this.isBatchedMesh&&(r.type="BatchedMesh",r.perObjectFrustumCulled=this.perObjectFrustumCulled,r.sortObjects=this.sortObjects,r.drawRanges=this._drawRanges,r.reservedRanges=this._reservedRanges,r.geometryInfo=this._geometryInfo.map(a=>({...a,boundingBox:a.boundingBox?a.boundingBox.toJSON():void 0,boundingSphere:a.boundingSphere?a.boundingSphere.toJSON():void 0})),r.instanceInfo=this._instanceInfo.map(a=>({...a})),r.availableInstanceIds=this._availableInstanceIds.slice(),r.availableGeometryIds=this._availableGeometryIds.slice(),r.nextIndexStart=this._nextIndexStart,r.nextVertexStart=this._nextVertexStart,r.geometryCount=this._geometryCount,r.maxInstanceCount=this._maxInstanceCount,r.maxVertexCount=this._maxVertexCount,r.maxIndexCount=this._maxIndexCount,r.geometryInitialized=this._geometryInitialized,r.matricesTexture=this._matricesTexture.toJSON(e),r.indirectTexture=this._indirectTexture.toJSON(e),this._colorsTexture!==null&&(r.colorsTexture=this._colorsTexture.toJSON(e)),this.boundingSphere!==null&&(r.boundingSphere=this.boundingSphere.toJSON()),this.boundingBox!==null&&(r.boundingBox=this.boundingBox.toJSON()));function s(a,l){return a[l.uuid]===void 0&&(a[l.uuid]=l.toJSON(e)),l.uuid}if(this.isScene)this.background&&(this.background.isColor?r.background=this.background.toJSON():this.background.isTexture&&(r.background=this.background.toJSON(e).uuid)),this.environment&&this.environment.isTexture&&this.environment.isRenderTargetTexture!==!0&&(r.environment=this.environment.toJSON(e).uuid);else if(this.isMesh||this.isLine||this.isPoints){r.geometry=s(e.geometries,this.geometry);const a=this.geometry.parameters;if(a!==void 0&&a.shapes!==void 0){const l=a.shapes;if(Array.isArray(l))for(let u=0,c=l.length;u<c;u++){const A=l[u];s(e.shapes,A)}else s(e.shapes,l)}}if(this.isSkinnedMesh&&(r.bindMode=this.bindMode,r.bindMatrix=this.bindMatrix.toArray(),this.skeleton!==void 0&&(s(e.skeletons,this.skeleton),r.skeleton=this.skeleton.uuid)),this.material!==void 0)if(Array.isArray(this.material)){const a=[];for(let l=0,u=this.material.length;l<u;l++)a.push(s(e.materials,this.material[l]));r.material=a}else r.material=s(e.materials,this.material);if(this.children.length>0){r.children=[];for(let a=0;a<this.children.length;a++)r.children.push(this.children[a].toJSON(e).object)}if(this.animations.length>0){r.animations=[];for(let a=0;a<this.animations.length;a++){const l=this.animations[a];r.animations.push(s(e.animations,l))}}if(t){const a=o(e.geometries),l=o(e.materials),u=o(e.textures),c=o(e.images),A=o(e.shapes),m=o(e.skeletons),_=o(e.animations),b=o(e.nodes);a.length>0&&(n.geometries=a),l.length>0&&(n.materials=l),u.length>0&&(n.textures=u),c.length>0&&(n.images=c),A.length>0&&(n.shapes=A),m.length>0&&(n.skeletons=m),_.length>0&&(n.animations=_),b.length>0&&(n.nodes=b)}return n.object=r,n;function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}}clone(e){return new this.constructor().copy(this,e)}copy(e,t=!0){if(this.name=e.name,this.up.copy(e.up),this.position.copy(e.position),this.rotation.order=e.rotation.order,this.quaternion.copy(e.quaternion),this.scale.copy(e.scale),this.matrix.copy(e.matrix),this.matrixWorld.copy(e.matrixWorld),this.matrixAutoUpdate=e.matrixAutoUpdate,this.matrixWorldAutoUpdate=e.matrixWorldAutoUpdate,this.matrixWorldNeedsUpdate=e.matrixWorldNeedsUpdate,this.layers.mask=e.layers.mask,this.visible=e.visible,this.castShadow=e.castShadow,this.receiveShadow=e.receiveShadow,this.frustumCulled=e.frustumCulled,this.renderOrder=e.renderOrder,this.animations=e.animations.slice(),this.userData=JSON.parse(JSON.stringify(e.userData)),t===!0)for(let n=0;n<e.children.length;n++){const r=e.children[n];this.add(r.clone())}return this}}Ai.DEFAULT_UP=new J(0,1,0);Ai.DEFAULT_MATRIX_AUTO_UPDATE=!0;Ai.DEFAULT_MATRIX_WORLD_AUTO_UPDATE=!0;const v0=new J,Bl=new J,_p=new J,Fl=new J,T3=new J,w3=new J,lb=new J,xp=new J,bp=new J,Sp=new J,Tp=new rn,wp=new rn,Mp=new rn;class Oo{constructor(e=new J,t=new J,n=new J){this.a=e,this.b=t,this.c=n}static getNormal(e,t,n,r){r.subVectors(n,t),v0.subVectors(e,t),r.cross(v0);const s=r.lengthSq();return s>0?r.multiplyScalar(1/Math.sqrt(s)):r.set(0,0,0)}static getBarycoord(e,t,n,r,s){v0.subVectors(r,t),Bl.subVectors(n,t),_p.subVectors(e,t);const o=v0.dot(v0),a=v0.dot(Bl),l=v0.dot(_p),u=Bl.dot(Bl),c=Bl.dot(_p),A=o*u-a*a;if(A===0)return s.set(0,0,0),null;const m=1/A,_=(u*l-a*c)*m,b=(o*c-a*l)*m;return s.set(1-_-b,b,_)}static containsPoint(e,t,n,r){return this.getBarycoord(e,t,n,r,Fl)===null?!1:Fl.x>=0&&Fl.y>=0&&Fl.x+Fl.y<=1}static getInterpolation(e,t,n,r,s,o,a,l){return this.getBarycoord(e,t,n,r,Fl)===null?(l.x=0,l.y=0,"z"in l&&(l.z=0),"w"in l&&(l.w=0),null):(l.setScalar(0),l.addScaledVector(s,Fl.x),l.addScaledVector(o,Fl.y),l.addScaledVector(a,Fl.z),l)}static getInterpolatedAttribute(e,t,n,r,s,o){return Tp.setScalar(0),wp.setScalar(0),Mp.setScalar(0),Tp.fromBufferAttribute(e,t),wp.fromBufferAttribute(e,n),Mp.fromBufferAttribute(e,r),o.setScalar(0),o.addScaledVector(Tp,s.x),o.addScaledVector(wp,s.y),o.addScaledVector(Mp,s.z),o}static isFrontFacing(e,t,n,r){return v0.subVectors(n,t),Bl.subVectors(e,t),v0.cross(Bl).dot(r)<0}set(e,t,n){return this.a.copy(e),this.b.copy(t),this.c.copy(n),this}setFromPointsAndIndices(e,t,n,r){return this.a.copy(e[t]),this.b.copy(e[n]),this.c.copy(e[r]),this}setFromAttributeAndIndices(e,t,n,r){return this.a.fromBufferAttribute(e,t),this.b.fromBufferAttribute(e,n),this.c.fromBufferAttribute(e,r),this}clone(){return new this.constructor().copy(this)}copy(e){return this.a.copy(e.a),this.b.copy(e.b),this.c.copy(e.c),this}getArea(){return v0.subVectors(this.c,this.b),Bl.subVectors(this.a,this.b),v0.cross(Bl).length()*.5}getMidpoint(e){return e.addVectors(this.a,this.b).add(this.c).multiplyScalar(1/3)}getNormal(e){return Oo.getNormal(this.a,this.b,this.c,e)}getPlane(e){return e.setFromCoplanarPoints(this.a,this.b,this.c)}getBarycoord(e,t){return Oo.getBarycoord(e,this.a,this.b,this.c,t)}getInterpolation(e,t,n,r,s){return Oo.getInterpolation(e,this.a,this.b,this.c,t,n,r,s)}containsPoint(e){return Oo.containsPoint(e,this.a,this.b,this.c)}isFrontFacing(e){return Oo.isFrontFacing(this.a,this.b,this.c,e)}intersectsBox(e){return e.intersectsTriangle(this)}closestPointToPoint(e,t){const n=this.a,r=this.b,s=this.c;let o,a;T3.subVectors(r,n),w3.subVectors(s,n),xp.subVectors(e,n);const l=T3.dot(xp),u=w3.dot(xp);if(l<=0&&u<=0)return t.copy(n);bp.subVectors(e,r);const c=T3.dot(bp),A=w3.dot(bp);if(c>=0&&A<=c)return t.copy(r);const m=l*A-c*u;if(m<=0&&l>=0&&c<=0)return o=l/(l-c),t.copy(n).addScaledVector(T3,o);Sp.subVectors(e,s);const _=T3.dot(Sp),b=w3.dot(Sp);if(b>=0&&_<=b)return t.copy(s);const M=_*u-l*b;if(M<=0&&u>=0&&b<=0)return a=u/(u-b),t.copy(n).addScaledVector(w3,a);const w=c*b-_*A;if(w<=0&&A-c>=0&&_-b>=0)return lb.subVectors(s,r),a=(A-c)/(A-c+(_-b)),t.copy(r).addScaledVector(lb,a);const T=1/(w+M+m);return o=M*T,a=m*T,t.copy(n).addScaledVector(T3,o).addScaledVector(w3,a)}equals(e){return e.a.equals(this.a)&&e.b.equals(this.b)&&e.c.equals(this.c)}}const TE={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074},z1={h:0,s:0,l:0},u7={h:0,s:0,l:0};function Ep(i,e,t){return t<0&&(t+=1),t>1&&(t-=1),t<1/6?i+(e-i)*6*t:t<1/2?e:t<2/3?i+(e-i)*6*(2/3-t):i}let Et=class{constructor(e,t,n){return this.isColor=!0,this.r=1,this.g=1,this.b=1,this.set(e,t,n)}set(e,t,n){if(t===void 0&&n===void 0){const r=e;r&&r.isColor?this.copy(r):typeof r=="number"?this.setHex(r):typeof r=="string"&&this.setStyle(r)}else this.setRGB(e,t,n);return this}setScalar(e){return this.r=e,this.g=e,this.b=e,this}setHex(e,t=xs){return e=Math.floor(e),this.r=(e>>16&255)/255,this.g=(e>>8&255)/255,this.b=(e&255)/255,Sn.colorSpaceToWorking(this,t),this}setRGB(e,t,n,r=Sn.workingColorSpace){return this.r=e,this.g=t,this.b=n,Sn.colorSpaceToWorking(this,r),this}setHSL(e,t,n,r=Sn.workingColorSpace){if(e=nv(e,1),t=Dn(t,0,1),n=Dn(n,0,1),t===0)this.r=this.g=this.b=n;else{const s=n<=.5?n*(1+t):n+t-n*t,o=2*n-s;this.r=Ep(o,s,e+1/3),this.g=Ep(o,s,e),this.b=Ep(o,s,e-1/3)}return Sn.colorSpaceToWorking(this,r),this}setStyle(e,t=xs){function n(s){s!==void 0&&parseFloat(s)<1&&console.warn("THREE.Color: Alpha component of "+e+" will be ignored.")}let r;if(r=/^(\w+)\(([^\)]*)\)/.exec(e)){let s;const o=r[1],a=r[2];switch(o){case"rgb":case"rgba":if(s=/^\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(255,parseInt(s[1],10))/255,Math.min(255,parseInt(s[2],10))/255,Math.min(255,parseInt(s[3],10))/255,t);if(s=/^\s*(\d+)\%\s*,\s*(\d+)\%\s*,\s*(\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setRGB(Math.min(100,parseInt(s[1],10))/100,Math.min(100,parseInt(s[2],10))/100,Math.min(100,parseInt(s[3],10))/100,t);break;case"hsl":case"hsla":if(s=/^\s*(\d*\.?\d+)\s*,\s*(\d*\.?\d+)\%\s*,\s*(\d*\.?\d+)\%\s*(?:,\s*(\d*\.?\d+)\s*)?$/.exec(a))return n(s[4]),this.setHSL(parseFloat(s[1])/360,parseFloat(s[2])/100,parseFloat(s[3])/100,t);break;default:console.warn("THREE.Color: Unknown color model "+e)}}else if(r=/^\#([A-Fa-f\d]+)$/.exec(e)){const s=r[1],o=s.length;if(o===3)return this.setRGB(parseInt(s.charAt(0),16)/15,parseInt(s.charAt(1),16)/15,parseInt(s.charAt(2),16)/15,t);if(o===6)return this.setHex(parseInt(s,16),t);console.warn("THREE.Color: Invalid hex color "+e)}else if(e&&e.length>0)return this.setColorName(e,t);return this}setColorName(e,t=xs){const n=TE[e.toLowerCase()];return n!==void 0?this.setHex(n,t):console.warn("THREE.Color: Unknown color "+e),this}clone(){return new this.constructor(this.r,this.g,this.b)}copy(e){return this.r=e.r,this.g=e.g,this.b=e.b,this}copySRGBToLinear(e){return this.r=Ql(e.r),this.g=Ql(e.g),this.b=Ql(e.b),this}copyLinearToSRGB(e){return this.r=y4(e.r),this.g=y4(e.g),this.b=y4(e.b),this}convertSRGBToLinear(){return this.copySRGBToLinear(this),this}convertLinearToSRGB(){return this.copyLinearToSRGB(this),this}getHex(e=xs){return Sn.workingToColorSpace($s.copy(this),e),Math.round(Dn($s.r*255,0,255))*65536+Math.round(Dn($s.g*255,0,255))*256+Math.round(Dn($s.b*255,0,255))}getHexString(e=xs){return("000000"+this.getHex(e).toString(16)).slice(-6)}getHSL(e,t=Sn.workingColorSpace){Sn.workingToColorSpace($s.copy(this),t);const n=$s.r,r=$s.g,s=$s.b,o=Math.max(n,r,s),a=Math.min(n,r,s);let l,u;const c=(a+o)/2;if(a===o)l=0,u=0;else{const A=o-a;switch(u=c<=.5?A/(o+a):A/(2-o-a),o){case n:l=(r-s)/A+(r<s?6:0);break;case r:l=(s-n)/A+2;break;case s:l=(n-r)/A+4;break}l/=6}return e.h=l,e.s=u,e.l=c,e}getRGB(e,t=Sn.workingColorSpace){return Sn.workingToColorSpace($s.copy(this),t),e.r=$s.r,e.g=$s.g,e.b=$s.b,e}getStyle(e=xs){Sn.workingToColorSpace($s.copy(this),e);const t=$s.r,n=$s.g,r=$s.b;return e!==xs?`color(${e} ${t.toFixed(3)} ${n.toFixed(3)} ${r.toFixed(3)})`:`rgb(${Math.round(t*255)},${Math.round(n*255)},${Math.round(r*255)})`}offsetHSL(e,t,n){return this.getHSL(z1),this.setHSL(z1.h+e,z1.s+t,z1.l+n)}add(e){return this.r+=e.r,this.g+=e.g,this.b+=e.b,this}addColors(e,t){return this.r=e.r+t.r,this.g=e.g+t.g,this.b=e.b+t.b,this}addScalar(e){return this.r+=e,this.g+=e,this.b+=e,this}sub(e){return this.r=Math.max(0,this.r-e.r),this.g=Math.max(0,this.g-e.g),this.b=Math.max(0,this.b-e.b),this}multiply(e){return this.r*=e.r,this.g*=e.g,this.b*=e.b,this}multiplyScalar(e){return this.r*=e,this.g*=e,this.b*=e,this}lerp(e,t){return this.r+=(e.r-this.r)*t,this.g+=(e.g-this.g)*t,this.b+=(e.b-this.b)*t,this}lerpColors(e,t,n){return this.r=e.r+(t.r-e.r)*n,this.g=e.g+(t.g-e.g)*n,this.b=e.b+(t.b-e.b)*n,this}lerpHSL(e,t){this.getHSL(z1),e.getHSL(u7);const n=jh(z1.h,u7.h,t),r=jh(z1.s,u7.s,t),s=jh(z1.l,u7.l,t);return this.setHSL(n,r,s),this}setFromVector3(e){return this.r=e.x,this.g=e.y,this.b=e.z,this}applyMatrix3(e){const t=this.r,n=this.g,r=this.b,s=e.elements;return this.r=s[0]*t+s[3]*n+s[6]*r,this.g=s[1]*t+s[4]*n+s[7]*r,this.b=s[2]*t+s[5]*n+s[8]*r,this}equals(e){return e.r===this.r&&e.g===this.g&&e.b===this.b}fromArray(e,t=0){return this.r=e[t],this.g=e[t+1],this.b=e[t+2],this}toArray(e=[],t=0){return e[t]=this.r,e[t+1]=this.g,e[t+2]=this.b,e}fromBufferAttribute(e,t){return this.r=e.getX(t),this.g=e.getY(t),this.b=e.getZ(t),this}toJSON(){return this.getHex()}*[Symbol.iterator](){yield this.r,yield this.g,yield this.b}};const $s=new Et;Et.NAMES=TE;let IF=0;class ws extends Ta{constructor(){super(),this.isMaterial=!0,Object.defineProperty(this,"id",{value:IF++}),this.uuid=va(),this.name="",this.type="Material",this.blending=Js,this.side=So,this.vertexColors=!1,this.opacity=1,this.transparent=!1,this.alphaHash=!1,this.blendSrc=M4,this.blendDst=E4,this.blendEquation=Ds,this.blendSrcAlpha=null,this.blendDstAlpha=null,this.blendEquationAlpha=null,this.blendColor=new Et(0,0,0),this.blendAlpha=0,this.depthFunc=e1,this.depthTest=!0,this.depthWrite=!0,this.stencilWriteMask=255,this.stencilFunc=ad,this.stencilRef=0,this.stencilFuncMask=255,this.stencilFail=Y1,this.stencilZFail=Y1,this.stencilZPass=Y1,this.stencilWrite=!1,this.clippingPlanes=null,this.clipIntersection=!1,this.clipShadows=!1,this.shadowSide=null,this.colorWrite=!0,this.precision=null,this.polygonOffset=!1,this.polygonOffsetFactor=0,this.polygonOffsetUnits=0,this.dithering=!1,this.alphaToCoverage=!1,this.premultipliedAlpha=!1,this.forceSinglePass=!1,this.allowOverride=!0,this.visible=!0,this.toneMapped=!0,this.userData={},this.version=0,this._alphaTest=0}get alphaTest(){return this._alphaTest}set alphaTest(e){this._alphaTest>0!=e>0&&this.version++,this._alphaTest=e}onBeforeRender(){}onBeforeCompile(){}customProgramCacheKey(){return this.onBeforeCompile.toString()}setValues(e){if(e!==void 0)for(const t in e){const n=e[t];if(n===void 0){console.warn(`THREE.Material: parameter '${t}' has value of undefined.`);continue}const r=this[t];if(r===void 0){console.warn(`THREE.Material: '${t}' is not a property of THREE.${this.type}.`);continue}r&&r.isColor?r.set(n):r&&r.isVector3&&n&&n.isVector3?r.copy(n):this[t]=n}}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{}});const n={metadata:{version:4.7,type:"Material",generator:"Material.toJSON"}};n.uuid=this.uuid,n.type=this.type,this.name!==""&&(n.name=this.name),this.color&&this.color.isColor&&(n.color=this.color.getHex()),this.roughness!==void 0&&(n.roughness=this.roughness),this.metalness!==void 0&&(n.metalness=this.metalness),this.sheen!==void 0&&(n.sheen=this.sheen),this.sheenColor&&this.sheenColor.isColor&&(n.sheenColor=this.sheenColor.getHex()),this.sheenRoughness!==void 0&&(n.sheenRoughness=this.sheenRoughness),this.emissive&&this.emissive.isColor&&(n.emissive=this.emissive.getHex()),this.emissiveIntensity!==void 0&&this.emissiveIntensity!==1&&(n.emissiveIntensity=this.emissiveIntensity),this.specular&&this.specular.isColor&&(n.specular=this.specular.getHex()),this.specularIntensity!==void 0&&(n.specularIntensity=this.specularIntensity),this.specularColor&&this.specularColor.isColor&&(n.specularColor=this.specularColor.getHex()),this.shininess!==void 0&&(n.shininess=this.shininess),this.clearcoat!==void 0&&(n.clearcoat=this.clearcoat),this.clearcoatRoughness!==void 0&&(n.clearcoatRoughness=this.clearcoatRoughness),this.clearcoatMap&&this.clearcoatMap.isTexture&&(n.clearcoatMap=this.clearcoatMap.toJSON(e).uuid),this.clearcoatRoughnessMap&&this.clearcoatRoughnessMap.isTexture&&(n.clearcoatRoughnessMap=this.clearcoatRoughnessMap.toJSON(e).uuid),this.clearcoatNormalMap&&this.clearcoatNormalMap.isTexture&&(n.clearcoatNormalMap=this.clearcoatNormalMap.toJSON(e).uuid,n.clearcoatNormalScale=this.clearcoatNormalScale.toArray()),this.dispersion!==void 0&&(n.dispersion=this.dispersion),this.iridescence!==void 0&&(n.iridescence=this.iridescence),this.iridescenceIOR!==void 0&&(n.iridescenceIOR=this.iridescenceIOR),this.iridescenceThicknessRange!==void 0&&(n.iridescenceThicknessRange=this.iridescenceThicknessRange),this.iridescenceMap&&this.iridescenceMap.isTexture&&(n.iridescenceMap=this.iridescenceMap.toJSON(e).uuid),this.iridescenceThicknessMap&&this.iridescenceThicknessMap.isTexture&&(n.iridescenceThicknessMap=this.iridescenceThicknessMap.toJSON(e).uuid),this.anisotropy!==void 0&&(n.anisotropy=this.anisotropy),this.anisotropyRotation!==void 0&&(n.anisotropyRotation=this.anisotropyRotation),this.anisotropyMap&&this.anisotropyMap.isTexture&&(n.anisotropyMap=this.anisotropyMap.toJSON(e).uuid),this.map&&this.map.isTexture&&(n.map=this.map.toJSON(e).uuid),this.matcap&&this.matcap.isTexture&&(n.matcap=this.matcap.toJSON(e).uuid),this.alphaMap&&this.alphaMap.isTexture&&(n.alphaMap=this.alphaMap.toJSON(e).uuid),this.lightMap&&this.lightMap.isTexture&&(n.lightMap=this.lightMap.toJSON(e).uuid,n.lightMapIntensity=this.lightMapIntensity),this.aoMap&&this.aoMap.isTexture&&(n.aoMap=this.aoMap.toJSON(e).uuid,n.aoMapIntensity=this.aoMapIntensity),this.bumpMap&&this.bumpMap.isTexture&&(n.bumpMap=this.bumpMap.toJSON(e).uuid,n.bumpScale=this.bumpScale),this.normalMap&&this.normalMap.isTexture&&(n.normalMap=this.normalMap.toJSON(e).uuid,n.normalMapType=this.normalMapType,n.normalScale=this.normalScale.toArray()),this.displacementMap&&this.displacementMap.isTexture&&(n.displacementMap=this.displacementMap.toJSON(e).uuid,n.displacementScale=this.displacementScale,n.displacementBias=this.displacementBias),this.roughnessMap&&this.roughnessMap.isTexture&&(n.roughnessMap=this.roughnessMap.toJSON(e).uuid),this.metalnessMap&&this.metalnessMap.isTexture&&(n.metalnessMap=this.metalnessMap.toJSON(e).uuid),this.emissiveMap&&this.emissiveMap.isTexture&&(n.emissiveMap=this.emissiveMap.toJSON(e).uuid),this.specularMap&&this.specularMap.isTexture&&(n.specularMap=this.specularMap.toJSON(e).uuid),this.specularIntensityMap&&this.specularIntensityMap.isTexture&&(n.specularIntensityMap=this.specularIntensityMap.toJSON(e).uuid),this.specularColorMap&&this.specularColorMap.isTexture&&(n.specularColorMap=this.specularColorMap.toJSON(e).uuid),this.envMap&&this.envMap.isTexture&&(n.envMap=this.envMap.toJSON(e).uuid,this.combine!==void 0&&(n.combine=this.combine)),this.envMapRotation!==void 0&&(n.envMapRotation=this.envMapRotation.toArray()),this.envMapIntensity!==void 0&&(n.envMapIntensity=this.envMapIntensity),this.reflectivity!==void 0&&(n.reflectivity=this.reflectivity),this.refractionRatio!==void 0&&(n.refractionRatio=this.refractionRatio),this.gradientMap&&this.gradientMap.isTexture&&(n.gradientMap=this.gradientMap.toJSON(e).uuid),this.transmission!==void 0&&(n.transmission=this.transmission),this.transmissionMap&&this.transmissionMap.isTexture&&(n.transmissionMap=this.transmissionMap.toJSON(e).uuid),this.thickness!==void 0&&(n.thickness=this.thickness),this.thicknessMap&&this.thicknessMap.isTexture&&(n.thicknessMap=this.thicknessMap.toJSON(e).uuid),this.attenuationDistance!==void 0&&this.attenuationDistance!==1/0&&(n.attenuationDistance=this.attenuationDistance),this.attenuationColor!==void 0&&(n.attenuationColor=this.attenuationColor.getHex()),this.size!==void 0&&(n.size=this.size),this.shadowSide!==null&&(n.shadowSide=this.shadowSide),this.sizeAttenuation!==void 0&&(n.sizeAttenuation=this.sizeAttenuation),this.blending!==Js&&(n.blending=this.blending),this.side!==So&&(n.side=this.side),this.vertexColors===!0&&(n.vertexColors=!0),this.opacity<1&&(n.opacity=this.opacity),this.transparent===!0&&(n.transparent=!0),this.blendSrc!==M4&&(n.blendSrc=this.blendSrc),this.blendDst!==E4&&(n.blendDst=this.blendDst),this.blendEquation!==Ds&&(n.blendEquation=this.blendEquation),this.blendSrcAlpha!==null&&(n.blendSrcAlpha=this.blendSrcAlpha),this.blendDstAlpha!==null&&(n.blendDstAlpha=this.blendDstAlpha),this.blendEquationAlpha!==null&&(n.blendEquationAlpha=this.blendEquationAlpha),this.blendColor&&this.blendColor.isColor&&(n.blendColor=this.blendColor.getHex()),this.blendAlpha!==0&&(n.blendAlpha=this.blendAlpha),this.depthFunc!==e1&&(n.depthFunc=this.depthFunc),this.depthTest===!1&&(n.depthTest=this.depthTest),this.depthWrite===!1&&(n.depthWrite=this.depthWrite),this.colorWrite===!1&&(n.colorWrite=this.colorWrite),this.stencilWriteMask!==255&&(n.stencilWriteMask=this.stencilWriteMask),this.stencilFunc!==ad&&(n.stencilFunc=this.stencilFunc),this.stencilRef!==0&&(n.stencilRef=this.stencilRef),this.stencilFuncMask!==255&&(n.stencilFuncMask=this.stencilFuncMask),this.stencilFail!==Y1&&(n.stencilFail=this.stencilFail),this.stencilZFail!==Y1&&(n.stencilZFail=this.stencilZFail),this.stencilZPass!==Y1&&(n.stencilZPass=this.stencilZPass),this.stencilWrite===!0&&(n.stencilWrite=this.stencilWrite),this.rotation!==void 0&&this.rotation!==0&&(n.rotation=this.rotation),this.polygonOffset===!0&&(n.polygonOffset=!0),this.polygonOffsetFactor!==0&&(n.polygonOffsetFactor=this.polygonOffsetFactor),this.polygonOffsetUnits!==0&&(n.polygonOffsetUnits=this.polygonOffsetUnits),this.linewidth!==void 0&&this.linewidth!==1&&(n.linewidth=this.linewidth),this.dashSize!==void 0&&(n.dashSize=this.dashSize),this.gapSize!==void 0&&(n.gapSize=this.gapSize),this.scale!==void 0&&(n.scale=this.scale),this.dithering===!0&&(n.dithering=!0),this.alphaTest>0&&(n.alphaTest=this.alphaTest),this.alphaHash===!0&&(n.alphaHash=!0),this.alphaToCoverage===!0&&(n.alphaToCoverage=!0),this.premultipliedAlpha===!0&&(n.premultipliedAlpha=!0),this.forceSinglePass===!0&&(n.forceSinglePass=!0),this.wireframe===!0&&(n.wireframe=!0),this.wireframeLinewidth>1&&(n.wireframeLinewidth=this.wireframeLinewidth),this.wireframeLinecap!=="round"&&(n.wireframeLinecap=this.wireframeLinecap),this.wireframeLinejoin!=="round"&&(n.wireframeLinejoin=this.wireframeLinejoin),this.flatShading===!0&&(n.flatShading=!0),this.visible===!1&&(n.visible=!1),this.toneMapped===!1&&(n.toneMapped=!1),this.fog===!1&&(n.fog=!1),Object.keys(this.userData).length>0&&(n.userData=this.userData);function r(s){const o=[];for(const a in s){const l=s[a];delete l.metadata,o.push(l)}return o}if(t){const s=r(e.textures),o=r(e.images);s.length>0&&(n.textures=s),o.length>0&&(n.images=o)}return n}clone(){return new this.constructor().copy(this)}copy(e){this.name=e.name,this.blending=e.blending,this.side=e.side,this.vertexColors=e.vertexColors,this.opacity=e.opacity,this.transparent=e.transparent,this.blendSrc=e.blendSrc,this.blendDst=e.blendDst,this.blendEquation=e.blendEquation,this.blendSrcAlpha=e.blendSrcAlpha,this.blendDstAlpha=e.blendDstAlpha,this.blendEquationAlpha=e.blendEquationAlpha,this.blendColor.copy(e.blendColor),this.blendAlpha=e.blendAlpha,this.depthFunc=e.depthFunc,this.depthTest=e.depthTest,this.depthWrite=e.depthWrite,this.stencilWriteMask=e.stencilWriteMask,this.stencilFunc=e.stencilFunc,this.stencilRef=e.stencilRef,this.stencilFuncMask=e.stencilFuncMask,this.stencilFail=e.stencilFail,this.stencilZFail=e.stencilZFail,this.stencilZPass=e.stencilZPass,this.stencilWrite=e.stencilWrite;const t=e.clippingPlanes;let n=null;if(t!==null){const r=t.length;n=new Array(r);for(let s=0;s!==r;++s)n[s]=t[s].clone()}return this.clippingPlanes=n,this.clipIntersection=e.clipIntersection,this.clipShadows=e.clipShadows,this.shadowSide=e.shadowSide,this.colorWrite=e.colorWrite,this.precision=e.precision,this.polygonOffset=e.polygonOffset,this.polygonOffsetFactor=e.polygonOffsetFactor,this.polygonOffsetUnits=e.polygonOffsetUnits,this.dithering=e.dithering,this.alphaTest=e.alphaTest,this.alphaHash=e.alphaHash,this.alphaToCoverage=e.alphaToCoverage,this.premultipliedAlpha=e.premultipliedAlpha,this.forceSinglePass=e.forceSinglePass,this.visible=e.visible,this.toneMapped=e.toneMapped,this.userData=JSON.parse(JSON.stringify(e.userData)),this}dispose(){this.dispatchEvent({type:"dispose"})}set needsUpdate(e){e===!0&&this.version++}}class Bs extends ws{constructor(e){super(),this.isMeshBasicMaterial=!0,this.type="MeshBasicMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=a5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}const ql=LF();function LF(){const i=new ArrayBuffer(4),e=new Float32Array(i),t=new Uint32Array(i),n=new Uint32Array(512),r=new Uint32Array(512);for(let l=0;l<256;++l){const u=l-127;u<-27?(n[l]=0,n[l|256]=32768,r[l]=24,r[l|256]=24):u<-14?(n[l]=1024>>-u-14,n[l|256]=1024>>-u-14|32768,r[l]=-u-1,r[l|256]=-u-1):u<=15?(n[l]=u+15<<10,n[l|256]=u+15<<10|32768,r[l]=13,r[l|256]=13):u<128?(n[l]=31744,n[l|256]=64512,r[l]=24,r[l|256]=24):(n[l]=31744,n[l|256]=64512,r[l]=13,r[l|256]=13)}const s=new Uint32Array(2048),o=new Uint32Array(64),a=new Uint32Array(64);for(let l=1;l<1024;++l){let u=l<<13,c=0;for(;!(u&8388608);)u<<=1,c-=8388608;u&=-8388609,c+=947912704,s[l]=u|c}for(let l=1024;l<2048;++l)s[l]=939524096+(l-1024<<13);for(let l=1;l<31;++l)o[l]=l<<23;o[31]=1199570944,o[32]=2147483648;for(let l=33;l<63;++l)o[l]=2147483648+(l-32<<23);o[63]=3347054592;for(let l=1;l<64;++l)l!==32&&(a[l]=1024);return{floatView:e,uint32View:t,baseTable:n,shiftTable:r,mantissaTable:s,exponentTable:o,offsetTable:a}}function Bo(i){Math.abs(i)>65504&&console.warn("THREE.DataUtils.toHalfFloat(): Value out of range."),i=Dn(i,-65504,65504),ql.floatView[0]=i;const e=ql.uint32View[0],t=e>>23&511;return ql.baseTable[t]+((e&8388607)>>ql.shiftTable[t])}function Ih(i){const e=i>>10;return ql.uint32View[0]=ql.mantissaTable[ql.offsetTable[e]+(i&1023)]+ql.exponentTable[e],ql.floatView[0]}class DF{static toHalfFloat(e){return Bo(e)}static fromHalfFloat(e){return Ih(e)}}const Wr=new J,c7=new Ge;let BF=0;class oi{constructor(e,t,n=!1){if(Array.isArray(e))throw new TypeError("THREE.BufferAttribute: array should be a Typed Array.");this.isBufferAttribute=!0,Object.defineProperty(this,"id",{value:BF++}),this.name="",this.array=e,this.itemSize=t,this.count=e!==void 0?e.length/t:0,this.normalized=n,this.usage=q4,this.updateRanges=[],this.gpuType=nr,this.version=0}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.name=e.name,this.array=new e.array.constructor(e.array),this.itemSize=e.itemSize,this.count=e.count,this.normalized=e.normalized,this.usage=e.usage,this.gpuType=e.gpuType,this}copyAt(e,t,n){e*=this.itemSize,n*=t.itemSize;for(let r=0,s=this.itemSize;r<s;r++)this.array[e+r]=t.array[n+r];return this}copyArray(e){return this.array.set(e),this}applyMatrix3(e){if(this.itemSize===2)for(let t=0,n=this.count;t<n;t++)c7.fromBufferAttribute(this,t),c7.applyMatrix3(e),this.setXY(t,c7.x,c7.y);else if(this.itemSize===3)for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.applyMatrix3(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}applyMatrix4(e){for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.applyMatrix4(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.applyNormalMatrix(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)Wr.fromBufferAttribute(this,t),Wr.transformDirection(e),this.setXYZ(t,Wr.x,Wr.y,Wr.z);return this}set(e,t=0){return this.array.set(e,t),this}getComponent(e,t){let n=this.array[e*this.itemSize+t];return this.normalized&&(n=_o(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Jn(n,this.array)),this.array[e*this.itemSize+t]=n,this}getX(e){let t=this.array[e*this.itemSize];return this.normalized&&(t=_o(t,this.array)),t}setX(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize]=t,this}getY(e){let t=this.array[e*this.itemSize+1];return this.normalized&&(t=_o(t,this.array)),t}setY(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize+1]=t,this}getZ(e){let t=this.array[e*this.itemSize+2];return this.normalized&&(t=_o(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize+2]=t,this}getW(e){let t=this.array[e*this.itemSize+3];return this.normalized&&(t=_o(t,this.array)),t}setW(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize+3]=t,this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array)),this.array[e+0]=t,this.array[e+1]=n,this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array),r=Jn(r,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array),r=Jn(r,this.array),s=Jn(s,this.array)),this.array[e+0]=t,this.array[e+1]=n,this.array[e+2]=r,this.array[e+3]=s,this}onUpload(e){return this.onUploadCallback=e,this}clone(){return new this.constructor(this.array,this.itemSize).copy(this)}toJSON(){const e={itemSize:this.itemSize,type:this.array.constructor.name,array:Array.from(this.array),normalized:this.normalized};return this.name!==""&&(e.name=this.name),this.usage!==q4&&(e.usage=this.usage),e}}class FF extends oi{constructor(e,t,n){super(new Int8Array(e),t,n)}}class UF extends oi{constructor(e,t,n){super(new Uint8Array(e),t,n)}}class OF extends oi{constructor(e,t,n){super(new Uint8ClampedArray(e),t,n)}}class kF extends oi{constructor(e,t,n){super(new Int16Array(e),t,n)}}class P9 extends oi{constructor(e,t,n){super(new Uint16Array(e),t,n)}}class VF extends oi{constructor(e,t,n){super(new Int32Array(e),t,n)}}class N9 extends oi{constructor(e,t,n){super(new Uint32Array(e),t,n)}}class sv extends oi{constructor(e,t,n){super(new Uint16Array(e),t,n),this.isFloat16BufferAttribute=!0}getX(e){let t=Ih(this.array[e*this.itemSize]);return this.normalized&&(t=_o(t,this.array)),t}setX(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize]=Bo(t),this}getY(e){let t=Ih(this.array[e*this.itemSize+1]);return this.normalized&&(t=_o(t,this.array)),t}setY(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize+1]=Bo(t),this}getZ(e){let t=Ih(this.array[e*this.itemSize+2]);return this.normalized&&(t=_o(t,this.array)),t}setZ(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize+2]=Bo(t),this}getW(e){let t=Ih(this.array[e*this.itemSize+3]);return this.normalized&&(t=_o(t,this.array)),t}setW(e,t){return this.normalized&&(t=Jn(t,this.array)),this.array[e*this.itemSize+3]=Bo(t),this}setXY(e,t,n){return e*=this.itemSize,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array)),this.array[e+0]=Bo(t),this.array[e+1]=Bo(n),this}setXYZ(e,t,n,r){return e*=this.itemSize,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array),r=Jn(r,this.array)),this.array[e+0]=Bo(t),this.array[e+1]=Bo(n),this.array[e+2]=Bo(r),this}setXYZW(e,t,n,r,s){return e*=this.itemSize,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array),r=Jn(r,this.array),s=Jn(s,this.array)),this.array[e+0]=Bo(t),this.array[e+1]=Bo(n),this.array[e+2]=Bo(r),this.array[e+3]=Bo(s),this}}class Ht extends oi{constructor(e,t,n){super(new Float32Array(e),t,n)}}let zF=0;const Ua=new Wt,Rp=new Ai,M3=new J,ca=new ls,J5=new ls,ys=new J;class Tn extends Ta{constructor(){super(),this.isBufferGeometry=!0,Object.defineProperty(this,"id",{value:zF++}),this.uuid=va(),this.name="",this.type="BufferGeometry",this.index=null,this.indirect=null,this.attributes={},this.morphAttributes={},this.morphTargetsRelative=!1,this.groups=[],this.boundingBox=null,this.boundingSphere=null,this.drawRange={start:0,count:1/0},this.userData={}}getIndex(){return this.index}setIndex(e){return Array.isArray(e)?this.index=new(iv(e)?N9:P9)(e,1):this.index=e,this}setIndirect(e){return this.indirect=e,this}getIndirect(){return this.indirect}getAttribute(e){return this.attributes[e]}setAttribute(e,t){return this.attributes[e]=t,this}deleteAttribute(e){return delete this.attributes[e],this}hasAttribute(e){return this.attributes[e]!==void 0}addGroup(e,t,n=0){this.groups.push({start:e,count:t,materialIndex:n})}clearGroups(){this.groups=[]}setDrawRange(e,t){this.drawRange.start=e,this.drawRange.count=t}applyMatrix4(e){const t=this.attributes.position;t!==void 0&&(t.applyMatrix4(e),t.needsUpdate=!0);const n=this.attributes.normal;if(n!==void 0){const s=new Fn().getNormalMatrix(e);n.applyNormalMatrix(s),n.needsUpdate=!0}const r=this.attributes.tangent;return r!==void 0&&(r.transformDirection(e),r.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}applyQuaternion(e){return Ua.makeRotationFromQuaternion(e),this.applyMatrix4(Ua),this}rotateX(e){return Ua.makeRotationX(e),this.applyMatrix4(Ua),this}rotateY(e){return Ua.makeRotationY(e),this.applyMatrix4(Ua),this}rotateZ(e){return Ua.makeRotationZ(e),this.applyMatrix4(Ua),this}translate(e,t,n){return Ua.makeTranslation(e,t,n),this.applyMatrix4(Ua),this}scale(e,t,n){return Ua.makeScale(e,t,n),this.applyMatrix4(Ua),this}lookAt(e){return Rp.lookAt(e),Rp.updateMatrix(),this.applyMatrix4(Rp.matrix),this}center(){return this.computeBoundingBox(),this.boundingBox.getCenter(M3).negate(),this.translate(M3.x,M3.y,M3.z),this}setFromPoints(e){const t=this.getAttribute("position");if(t===void 0){const n=[];for(let r=0,s=e.length;r<s;r++){const o=e[r];n.push(o.x,o.y,o.z||0)}this.setAttribute("position",new Ht(n,3))}else{const n=Math.min(e.length,t.count);for(let r=0;r<n;r++){const s=e[r];t.setXYZ(r,s.x,s.y,s.z||0)}e.length>t.count&&console.warn("THREE.BufferGeometry: Buffer size too small for points data. Use .dispose() and create a new geometry."),t.needsUpdate=!0}return this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ls);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingBox(): GLBufferAttribute requires a manual bounding box.",this),this.boundingBox.set(new J(-1/0,-1/0,-1/0),new J(1/0,1/0,1/0));return}if(e!==void 0){if(this.boundingBox.setFromBufferAttribute(e),t)for(let n=0,r=t.length;n<r;n++){const s=t[n];ca.setFromBufferAttribute(s),this.morphTargetsRelative?(ys.addVectors(this.boundingBox.min,ca.min),this.boundingBox.expandByPoint(ys),ys.addVectors(this.boundingBox.max,ca.max),this.boundingBox.expandByPoint(ys)):(this.boundingBox.expandByPoint(ca.min),this.boundingBox.expandByPoint(ca.max))}}else this.boundingBox.makeEmpty();(isNaN(this.boundingBox.min.x)||isNaN(this.boundingBox.min.y)||isNaN(this.boundingBox.min.z))&&console.error('THREE.BufferGeometry.computeBoundingBox(): Computed min/max have NaN values. The "position" attribute is likely to have NaN values.',this)}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kr);const e=this.attributes.position,t=this.morphAttributes.position;if(e&&e.isGLBufferAttribute){console.error("THREE.BufferGeometry.computeBoundingSphere(): GLBufferAttribute requires a manual bounding sphere.",this),this.boundingSphere.set(new J,1/0);return}if(e){const n=this.boundingSphere.center;if(ca.setFromBufferAttribute(e),t)for(let s=0,o=t.length;s<o;s++){const a=t[s];J5.setFromBufferAttribute(a),this.morphTargetsRelative?(ys.addVectors(ca.min,J5.min),ca.expandByPoint(ys),ys.addVectors(ca.max,J5.max),ca.expandByPoint(ys)):(ca.expandByPoint(J5.min),ca.expandByPoint(J5.max))}ca.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)ys.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(ys));if(t)for(let s=0,o=t.length;s<o;s++){const a=t[s],l=this.morphTargetsRelative;for(let u=0,c=a.count;u<c;u++)ys.fromBufferAttribute(a,u),l&&(M3.fromBufferAttribute(e,u),ys.add(M3)),r=Math.max(r,n.distanceToSquared(ys))}this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error('THREE.BufferGeometry.computeBoundingSphere(): Computed radius is NaN. The "position" attribute is likely to have NaN values.',this)}}computeTangents(){const e=this.index,t=this.attributes;if(e===null||t.position===void 0||t.normal===void 0||t.uv===void 0){console.error("THREE.BufferGeometry: .computeTangents() failed. Missing required attributes (index, position, normal or uv)");return}const n=t.position,r=t.normal,s=t.uv;this.hasAttribute("tangent")===!1&&this.setAttribute("tangent",new oi(new Float32Array(4*n.count),4));const o=this.getAttribute("tangent"),a=[],l=[];for(let V=0;V<n.count;V++)a[V]=new J,l[V]=new J;const u=new J,c=new J,A=new J,m=new Ge,_=new Ge,b=new Ge,M=new J,w=new J;function T(V,U,z){u.fromBufferAttribute(n,V),c.fromBufferAttribute(n,U),A.fromBufferAttribute(n,z),m.fromBufferAttribute(s,V),_.fromBufferAttribute(s,U),b.fromBufferAttribute(s,z),c.sub(u),A.sub(u),_.sub(m),b.sub(m);const H=1/(_.x*b.y-b.x*_.y);isFinite(H)&&(M.copy(c).multiplyScalar(b.y).addScaledVector(A,-_.y).multiplyScalar(H),w.copy(A).multiplyScalar(_.x).addScaledVector(c,-b.x).multiplyScalar(H),a[V].add(M),a[U].add(M),a[z].add(M),l[V].add(w),l[U].add(w),l[z].add(w))}let N=this.groups;N.length===0&&(N=[{start:0,count:e.count}]);for(let V=0,U=N.length;V<U;++V){const z=N[V],H=z.start,Q=z.count;for(let Y=H,ne=H+Q;Y<ne;Y+=3)T(e.getX(Y+0),e.getX(Y+1),e.getX(Y+2))}const P=new J,I=new J,B=new J,F=new J;function O(V){B.fromBufferAttribute(r,V),F.copy(B);const U=a[V];P.copy(U),P.sub(B.multiplyScalar(B.dot(U))).normalize(),I.crossVectors(F,U);const H=I.dot(l[V])<0?-1:1;o.setXYZW(V,P.x,P.y,P.z,H)}for(let V=0,U=N.length;V<U;++V){const z=N[V],H=z.start,Q=z.count;for(let Y=H,ne=H+Q;Y<ne;Y+=3)O(e.getX(Y+0)),O(e.getX(Y+1)),O(e.getX(Y+2))}}computeVertexNormals(){const e=this.index,t=this.getAttribute("position");if(t!==void 0){let n=this.getAttribute("normal");if(n===void 0)n=new oi(new Float32Array(t.count*3),3),this.setAttribute("normal",n);else for(let m=0,_=n.count;m<_;m++)n.setXYZ(m,0,0,0);const r=new J,s=new J,o=new J,a=new J,l=new J,u=new J,c=new J,A=new J;if(e)for(let m=0,_=e.count;m<_;m+=3){const b=e.getX(m+0),M=e.getX(m+1),w=e.getX(m+2);r.fromBufferAttribute(t,b),s.fromBufferAttribute(t,M),o.fromBufferAttribute(t,w),c.subVectors(o,s),A.subVectors(r,s),c.cross(A),a.fromBufferAttribute(n,b),l.fromBufferAttribute(n,M),u.fromBufferAttribute(n,w),a.add(c),l.add(c),u.add(c),n.setXYZ(b,a.x,a.y,a.z),n.setXYZ(M,l.x,l.y,l.z),n.setXYZ(w,u.x,u.y,u.z)}else for(let m=0,_=t.count;m<_;m+=3)r.fromBufferAttribute(t,m+0),s.fromBufferAttribute(t,m+1),o.fromBufferAttribute(t,m+2),c.subVectors(o,s),A.subVectors(r,s),c.cross(A),n.setXYZ(m+0,c.x,c.y,c.z),n.setXYZ(m+1,c.x,c.y,c.z),n.setXYZ(m+2,c.x,c.y,c.z);this.normalizeNormals(),n.needsUpdate=!0}}normalizeNormals(){const e=this.attributes.normal;for(let t=0,n=e.count;t<n;t++)ys.fromBufferAttribute(e,t),ys.normalize(),e.setXYZ(t,ys.x,ys.y,ys.z)}toNonIndexed(){function e(a,l){const u=a.array,c=a.itemSize,A=a.normalized,m=new u.constructor(l.length*c);let _=0,b=0;for(let M=0,w=l.length;M<w;M++){a.isInterleavedBufferAttribute?_=l[M]*a.data.stride+a.offset:_=l[M]*c;for(let T=0;T<c;T++)m[b++]=u[_++]}return new oi(m,c,A)}if(this.index===null)return console.warn("THREE.BufferGeometry.toNonIndexed(): BufferGeometry is already non-indexed."),this;const t=new Tn,n=this.index.array,r=this.attributes;for(const a in r){const l=r[a],u=e(l,n);t.setAttribute(a,u)}const s=this.morphAttributes;for(const a in s){const l=[],u=s[a];for(let c=0,A=u.length;c<A;c++){const m=u[c],_=e(m,n);l.push(_)}t.morphAttributes[a]=l}t.morphTargetsRelative=this.morphTargetsRelative;const o=this.groups;for(let a=0,l=o.length;a<l;a++){const u=o[a];t.addGroup(u.start,u.count,u.materialIndex)}return t}toJSON(){const e={metadata:{version:4.7,type:"BufferGeometry",generator:"BufferGeometry.toJSON"}};if(e.uuid=this.uuid,e.type=this.type,this.name!==""&&(e.name=this.name),Object.keys(this.userData).length>0&&(e.userData=this.userData),this.parameters!==void 0){const l=this.parameters;for(const u in l)l[u]!==void 0&&(e[u]=l[u]);return e}e.data={attributes:{}};const t=this.index;t!==null&&(e.data.index={type:t.array.constructor.name,array:Array.prototype.slice.call(t.array)});const n=this.attributes;for(const l in n){const u=n[l];e.data.attributes[l]=u.toJSON(e.data)}const r={};let s=!1;for(const l in this.morphAttributes){const u=this.morphAttributes[l],c=[];for(let A=0,m=u.length;A<m;A++){const _=u[A];c.push(_.toJSON(e.data))}c.length>0&&(r[l]=c,s=!0)}s&&(e.data.morphAttributes=r,e.data.morphTargetsRelative=this.morphTargetsRelative);const o=this.groups;o.length>0&&(e.data.groups=JSON.parse(JSON.stringify(o)));const a=this.boundingSphere;return a!==null&&(e.data.boundingSphere=a.toJSON()),e}clone(){return new this.constructor().copy(this)}copy(e){this.index=null,this.attributes={},this.morphAttributes={},this.groups=[],this.boundingBox=null,this.boundingSphere=null;const t={};this.name=e.name;const n=e.index;n!==null&&this.setIndex(n.clone());const r=e.attributes;for(const u in r){const c=r[u];this.setAttribute(u,c.clone(t))}const s=e.morphAttributes;for(const u in s){const c=[],A=s[u];for(let m=0,_=A.length;m<_;m++)c.push(A[m].clone(t));this.morphAttributes[u]=c}this.morphTargetsRelative=e.morphTargetsRelative;const o=e.groups;for(let u=0,c=o.length;u<c;u++){const A=o[u];this.addGroup(A.start,A.count,A.materialIndex)}const a=e.boundingBox;a!==null&&(this.boundingBox=a.clone());const l=e.boundingSphere;return l!==null&&(this.boundingSphere=l.clone()),this.drawRange.start=e.drawRange.start,this.drawRange.count=e.drawRange.count,this.userData=e.userData,this}dispose(){this.dispatchEvent({type:"dispose"})}}const ub=new Wt,t2=new Ec,h7=new Kr,cb=new J,f7=new J,d7=new J,A7=new J,Cp=new J,p7=new J,hb=new J,m7=new J;class ei extends Ai{constructor(e=new Tn,t=new Bs){super(),this.isMesh=!0,this.type="Mesh",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.count=1,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),e.morphTargetInfluences!==void 0&&(this.morphTargetInfluences=e.morphTargetInfluences.slice()),e.morphTargetDictionary!==void 0&&(this.morphTargetDictionary=Object.assign({},e.morphTargetDictionary)),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}getVertexPosition(e,t){const n=this.geometry,r=n.attributes.position,s=n.morphAttributes.position,o=n.morphTargetsRelative;t.fromBufferAttribute(r,e);const a=this.morphTargetInfluences;if(s&&a){p7.set(0,0,0);for(let l=0,u=s.length;l<u;l++){const c=a[l],A=s[l];c!==0&&(Cp.fromBufferAttribute(A,e),o?p7.addScaledVector(Cp,c):p7.addScaledVector(Cp.sub(t),c))}t.add(p7)}return t}raycast(e,t){const n=this.geometry,r=this.material,s=this.matrixWorld;r!==void 0&&(n.boundingSphere===null&&n.computeBoundingSphere(),h7.copy(n.boundingSphere),h7.applyMatrix4(s),t2.copy(e.ray).recast(e.near),!(h7.containsPoint(t2.origin)===!1&&(t2.intersectSphere(h7,cb)===null||t2.origin.distanceToSquared(cb)>(e.far-e.near)**2))&&(ub.copy(s).invert(),t2.copy(e.ray).applyMatrix4(ub),!(n.boundingBox!==null&&t2.intersectsBox(n.boundingBox)===!1)&&this._computeIntersections(e,t,t2)))}_computeIntersections(e,t,n){let r;const s=this.geometry,o=this.material,a=s.index,l=s.attributes.position,u=s.attributes.uv,c=s.attributes.uv1,A=s.attributes.normal,m=s.groups,_=s.drawRange;if(a!==null)if(Array.isArray(o))for(let b=0,M=m.length;b<M;b++){const w=m[b],T=o[w.materialIndex],N=Math.max(w.start,_.start),P=Math.min(a.count,Math.min(w.start+w.count,_.start+_.count));for(let I=N,B=P;I<B;I+=3){const F=a.getX(I),O=a.getX(I+1),V=a.getX(I+2);r=g7(this,T,e,n,u,c,A,F,O,V),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const b=Math.max(0,_.start),M=Math.min(a.count,_.start+_.count);for(let w=b,T=M;w<T;w+=3){const N=a.getX(w),P=a.getX(w+1),I=a.getX(w+2);r=g7(this,o,e,n,u,c,A,N,P,I),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}else if(l!==void 0)if(Array.isArray(o))for(let b=0,M=m.length;b<M;b++){const w=m[b],T=o[w.materialIndex],N=Math.max(w.start,_.start),P=Math.min(l.count,Math.min(w.start+w.count,_.start+_.count));for(let I=N,B=P;I<B;I+=3){const F=I,O=I+1,V=I+2;r=g7(this,T,e,n,u,c,A,F,O,V),r&&(r.faceIndex=Math.floor(I/3),r.face.materialIndex=w.materialIndex,t.push(r))}}else{const b=Math.max(0,_.start),M=Math.min(l.count,_.start+_.count);for(let w=b,T=M;w<T;w+=3){const N=w,P=w+1,I=w+2;r=g7(this,o,e,n,u,c,A,N,P,I),r&&(r.faceIndex=Math.floor(w/3),t.push(r))}}}}function GF(i,e,t,n,r,s,o,a){let l;if(e.side===Bi?l=n.intersectTriangle(o,s,r,!0,a):l=n.intersectTriangle(r,s,o,e.side===So,a),l===null)return null;m7.copy(a),m7.applyMatrix4(i.matrixWorld);const u=t.ray.origin.distanceTo(m7);return u<t.near||u>t.far?null:{distance:u,point:m7.clone(),object:i}}function g7(i,e,t,n,r,s,o,a,l,u){i.getVertexPosition(a,f7),i.getVertexPosition(l,d7),i.getVertexPosition(u,A7);const c=GF(i,e,t,n,f7,d7,A7,hb);if(c){const A=new J;Oo.getBarycoord(hb,f7,d7,A7,A),r&&(c.uv=Oo.getInterpolatedAttribute(r,a,l,u,A,new Ge)),s&&(c.uv1=Oo.getInterpolatedAttribute(s,a,l,u,A,new Ge)),o&&(c.normal=Oo.getInterpolatedAttribute(o,a,l,u,A,new J),c.normal.dot(n.direction)>0&&c.normal.multiplyScalar(-1));const m={a,b:l,c:u,normal:new J,materialIndex:0};Oo.getNormal(f7,d7,A7,m.normal),c.face=m,c.barycoord=A}return c}class _l extends Tn{constructor(e=1,t=1,n=1,r=1,s=1,o=1){super(),this.type="BoxGeometry",this.parameters={width:e,height:t,depth:n,widthSegments:r,heightSegments:s,depthSegments:o};const a=this;r=Math.floor(r),s=Math.floor(s),o=Math.floor(o);const l=[],u=[],c=[],A=[];let m=0,_=0;b("z","y","x",-1,-1,n,t,e,o,s,0),b("z","y","x",1,-1,n,t,-e,o,s,1),b("x","z","y",1,1,e,n,t,r,o,2),b("x","z","y",1,-1,e,n,-t,r,o,3),b("x","y","z",1,-1,e,t,n,r,s,4),b("x","y","z",-1,-1,e,t,-n,r,s,5),this.setIndex(l),this.setAttribute("position",new Ht(u,3)),this.setAttribute("normal",new Ht(c,3)),this.setAttribute("uv",new Ht(A,2));function b(M,w,T,N,P,I,B,F,O,V,U){const z=I/O,H=B/V,Q=I/2,Y=B/2,ne=F/2,ee=O+1,se=V+1;let pe=0,re=0;const de=new J;for(let ye=0;ye<se;ye++){const Pe=ye*H-Y;for(let Qe=0;Qe<ee;Qe++){const et=Qe*z-Q;de[M]=et*N,de[w]=Pe*P,de[T]=ne,u.push(de.x,de.y,de.z),de[M]=0,de[w]=0,de[T]=F>0?1:-1,c.push(de.x,de.y,de.z),A.push(Qe/O),A.push(1-ye/V),pe+=1}}for(let ye=0;ye<V;ye++)for(let Pe=0;Pe<O;Pe++){const Qe=m+Pe+ee*ye,et=m+Pe+ee*(ye+1),Pt=m+(Pe+1)+ee*(ye+1),Ne=m+(Pe+1)+ee*ye;l.push(Qe,et,Ne),l.push(et,Pt,Ne),re+=6}a.addGroup(_,re,U),_+=re,m+=pe}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new _l(e.width,e.height,e.depth,e.widthSegments,e.heightSegments,e.depthSegments)}}function H4(i){const e={};for(const t in i){e[t]={};for(const n in i[t]){const r=i[t][n];r&&(r.isColor||r.isMatrix3||r.isMatrix4||r.isVector2||r.isVector3||r.isVector4||r.isTexture||r.isQuaternion)?r.isRenderTargetTexture?(console.warn("UniformsUtils: Textures of render targets cannot be cloned via cloneUniforms() or mergeUniforms()."),e[t][n]=null):e[t][n]=r.clone():Array.isArray(r)?e[t][n]=r.slice():e[t][n]=r}}return e}function ho(i){const e={};for(let t=0;t<i.length;t++){const n=H4(i[t]);for(const r in n)e[r]=n[r]}return e}function qF(i){const e=[];for(let t=0;t<i.length;t++)e.push(i[t].clone());return e}function wE(i){const e=i.getRenderTarget();return e===null?i.outputColorSpace:e.isXRRenderTarget===!0?e.texture.colorSpace:Sn.workingColorSpace}const I9={clone:H4,merge:ho};var HF=`void main() {
	gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );
}`,WF=`void main() {
	gl_FragColor = vec4( 1.0, 0.0, 0.0, 1.0 );
}`;class To extends ws{constructor(e){super(),this.isShaderMaterial=!0,this.type="ShaderMaterial",this.defines={},this.uniforms={},this.uniformsGroups=[],this.vertexShader=HF,this.fragmentShader=WF,this.linewidth=1,this.wireframe=!1,this.wireframeLinewidth=1,this.fog=!1,this.lights=!1,this.clipping=!1,this.forceSinglePass=!0,this.extensions={clipCullDistance:!1,multiDraw:!1},this.defaultAttributeValues={color:[1,1,1],uv:[0,0],uv1:[0,0]},this.index0AttributeName=void 0,this.uniformsNeedUpdate=!1,this.glslVersion=null,e!==void 0&&this.setValues(e)}copy(e){return super.copy(e),this.fragmentShader=e.fragmentShader,this.vertexShader=e.vertexShader,this.uniforms=H4(e.uniforms),this.uniformsGroups=qF(e.uniformsGroups),this.defines=Object.assign({},e.defines),this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.fog=e.fog,this.lights=e.lights,this.clipping=e.clipping,this.extensions=Object.assign({},e.extensions),this.glslVersion=e.glslVersion,this}toJSON(e){const t=super.toJSON(e);t.glslVersion=this.glslVersion,t.uniforms={};for(const r in this.uniforms){const o=this.uniforms[r].value;o&&o.isTexture?t.uniforms[r]={type:"t",value:o.toJSON(e).uuid}:o&&o.isColor?t.uniforms[r]={type:"c",value:o.getHex()}:o&&o.isVector2?t.uniforms[r]={type:"v2",value:o.toArray()}:o&&o.isVector3?t.uniforms[r]={type:"v3",value:o.toArray()}:o&&o.isVector4?t.uniforms[r]={type:"v4",value:o.toArray()}:o&&o.isMatrix3?t.uniforms[r]={type:"m3",value:o.toArray()}:o&&o.isMatrix4?t.uniforms[r]={type:"m4",value:o.toArray()}:t.uniforms[r]={value:o}}Object.keys(this.defines).length>0&&(t.defines=this.defines),t.vertexShader=this.vertexShader,t.fragmentShader=this.fragmentShader,t.lights=this.lights,t.clipping=this.clipping;const n={};for(const r in this.extensions)this.extensions[r]===!0&&(n[r]=!0);return Object.keys(n).length>0&&(t.extensions=n),t}}class yu extends Ai{constructor(){super(),this.isCamera=!0,this.type="Camera",this.matrixWorldInverse=new Wt,this.projectionMatrix=new Wt,this.projectionMatrixInverse=new Wt,this.coordinateSystem=bs,this._reversedDepth=!1}get reversedDepth(){return this._reversedDepth}copy(e,t){return super.copy(e,t),this.matrixWorldInverse.copy(e.matrixWorldInverse),this.projectionMatrix.copy(e.projectionMatrix),this.projectionMatrixInverse.copy(e.projectionMatrixInverse),this.coordinateSystem=e.coordinateSystem,this}getWorldDirection(e){return super.getWorldDirection(e).negate()}updateMatrixWorld(e){super.updateMatrixWorld(e),this.matrixWorldInverse.copy(this.matrixWorld).invert()}updateWorldMatrix(e,t){super.updateWorldMatrix(e,t),this.matrixWorldInverse.copy(this.matrixWorld).invert()}clone(){return new this.constructor().copy(this)}}const G1=new J,fb=new Ge,db=new Ge;class tr extends yu{constructor(e=50,t=1,n=.1,r=2e3){super(),this.isPerspectiveCamera=!0,this.type="PerspectiveCamera",this.fov=e,this.zoom=1,this.near=n,this.far=r,this.focus=10,this.aspect=t,this.view=null,this.filmGauge=35,this.filmOffset=0,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.fov=e.fov,this.zoom=e.zoom,this.near=e.near,this.far=e.far,this.focus=e.focus,this.aspect=e.aspect,this.view=e.view===null?null:Object.assign({},e.view),this.filmGauge=e.filmGauge,this.filmOffset=e.filmOffset,this}setFocalLength(e){const t=.5*this.getFilmHeight()/e;this.fov=gc*2*Math.atan(t),this.updateProjectionMatrix()}getFocalLength(){const e=Math.tan(G2*.5*this.fov);return .5*this.getFilmHeight()/e}getEffectiveFOV(){return gc*2*Math.atan(Math.tan(G2*.5*this.fov)/this.zoom)}getFilmWidth(){return this.filmGauge*Math.min(this.aspect,1)}getFilmHeight(){return this.filmGauge/Math.max(this.aspect,1)}getViewBounds(e,t,n){G1.set(-1,-1,.5).applyMatrix4(this.projectionMatrixInverse),t.set(G1.x,G1.y).multiplyScalar(-e/G1.z),G1.set(1,1,.5).applyMatrix4(this.projectionMatrixInverse),n.set(G1.x,G1.y).multiplyScalar(-e/G1.z)}getViewSize(e,t){return this.getViewBounds(e,fb,db),t.subVectors(db,fb)}setViewOffset(e,t,n,r,s,o){this.aspect=e/t,this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=this.near;let t=e*Math.tan(G2*.5*this.fov)/this.zoom,n=2*t,r=this.aspect*n,s=-.5*r;const o=this.view;if(this.view!==null&&this.view.enabled){const l=o.fullWidth,u=o.fullHeight;s+=o.offsetX*r/l,t-=o.offsetY*n/u,r*=o.width/l,n*=o.height/u}const a=this.filmOffset;a!==0&&(s+=e*a/this.getFilmWidth()),this.projectionMatrix.makePerspective(s,s+r,t,t-n,e,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.fov=this.fov,t.object.zoom=this.zoom,t.object.near=this.near,t.object.far=this.far,t.object.focus=this.focus,t.object.aspect=this.aspect,this.view!==null&&(t.object.view=Object.assign({},this.view)),t.object.filmGauge=this.filmGauge,t.object.filmOffset=this.filmOffset,t}}const E3=-90,R3=1;class ov extends Ai{constructor(e,t,n){super(),this.type="CubeCamera",this.renderTarget=n,this.coordinateSystem=null,this.activeMipmapLevel=0;const r=new tr(E3,R3,e,t);r.layers=this.layers,this.add(r);const s=new tr(E3,R3,e,t);s.layers=this.layers,this.add(s);const o=new tr(E3,R3,e,t);o.layers=this.layers,this.add(o);const a=new tr(E3,R3,e,t);a.layers=this.layers,this.add(a);const l=new tr(E3,R3,e,t);l.layers=this.layers,this.add(l);const u=new tr(E3,R3,e,t);u.layers=this.layers,this.add(u)}updateCoordinateSystem(){const e=this.coordinateSystem,t=this.children.concat(),[n,r,s,o,a,l]=t;for(const u of t)this.remove(u);if(e===bs)n.up.set(0,1,0),n.lookAt(1,0,0),r.up.set(0,1,0),r.lookAt(-1,0,0),s.up.set(0,0,-1),s.lookAt(0,1,0),o.up.set(0,0,1),o.lookAt(0,-1,0),a.up.set(0,1,0),a.lookAt(0,0,1),l.up.set(0,1,0),l.lookAt(0,0,-1);else if(e===Qa)n.up.set(0,-1,0),n.lookAt(-1,0,0),r.up.set(0,-1,0),r.lookAt(1,0,0),s.up.set(0,0,1),s.lookAt(0,1,0),o.up.set(0,0,-1),o.lookAt(0,-1,0),a.up.set(0,-1,0),a.lookAt(0,0,1),l.up.set(0,-1,0),l.lookAt(0,0,-1);else throw new Error("THREE.CubeCamera.updateCoordinateSystem(): Invalid coordinate system: "+e);for(const u of t)this.add(u),u.updateMatrixWorld()}update(e,t){this.parent===null&&this.updateMatrixWorld();const{renderTarget:n,activeMipmapLevel:r}=this;this.coordinateSystem!==e.coordinateSystem&&(this.coordinateSystem=e.coordinateSystem,this.updateCoordinateSystem());const[s,o,a,l,u,c]=this.children,A=e.getRenderTarget(),m=e.getActiveCubeFace(),_=e.getActiveMipmapLevel(),b=e.xr.enabled;e.xr.enabled=!1;const M=n.texture.generateMipmaps;n.texture.generateMipmaps=!1,e.setRenderTarget(n,0,r),e.render(t,s),e.setRenderTarget(n,1,r),e.render(t,o),e.setRenderTarget(n,2,r),e.render(t,a),e.setRenderTarget(n,3,r),e.render(t,l),e.setRenderTarget(n,4,r),e.render(t,u),n.texture.generateMipmaps=M,e.setRenderTarget(n,5,r),e.render(t,c),e.setRenderTarget(A,m,_),e.xr.enabled=b,n.texture.needsPMREMUpdate=!0}}class vu extends ur{constructor(e=[],t=_a,n,r,s,o,a,l,u,c){super(e,t,n,r,s,o,a,l,u,c),this.isCubeTexture=!0,this.flipY=!1}get images(){return this.image}set images(e){this.image=e}}class av extends dl{constructor(e=1,t={}){super(e,e,t),this.isWebGLCubeRenderTarget=!0;const n={width:e,height:e,depth:1},r=[n,n,n,n,n,n];this.texture=new vu(r),this._setTextureOptions(t),this.texture.isRenderTargetTexture=!0}fromEquirectangularTexture(e,t){this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const n={uniforms:{tEquirect:{value:null}},vertexShader:`

				varying vec3 vWorldDirection;

				vec3 transformDirection( in vec3 dir, in mat4 matrix ) {

					return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );

				}

				void main() {

					vWorldDirection = transformDirection( position, modelMatrix );

					#include <begin_vertex>
					#include <project_vertex>

				}
			`,fragmentShader:`

				uniform sampler2D tEquirect;

				varying vec3 vWorldDirection;

				#include <common>

				void main() {

					vec3 direction = normalize( vWorldDirection );

					vec2 sampleUV = equirectUv( direction );

					gl_FragColor = texture2D( tEquirect, sampleUV );

				}
			`},r=new _l(5,5,5),s=new To({name:"CubemapFromEquirect",uniforms:H4(n.uniforms),vertexShader:n.vertexShader,fragmentShader:n.fragmentShader,side:Bi,blending:qo});s.uniforms.tEquirect.value=t;const o=new ei(r,s),a=t.minFilter;return t.minFilter===Fs&&(t.minFilter=Wi),new ov(1,10,this).update(e,o),t.minFilter=a,o.geometry.dispose(),o.material.dispose(),this}clear(e,t=!0,n=!0,r=!0){const s=e.getRenderTarget();for(let o=0;o<6;o++)e.setRenderTarget(this,o),e.clear(t,n,r);e.setRenderTarget(s)}}let Zs=class extends Ai{constructor(){super(),this.isGroup=!0,this.type="Group"}};const jF={type:"move"};class $h{constructor(){this._targetRay=null,this._grip=null,this._hand=null}getHandSpace(){return this._hand===null&&(this._hand=new Zs,this._hand.matrixAutoUpdate=!1,this._hand.visible=!1,this._hand.joints={},this._hand.inputState={pinching:!1}),this._hand}getTargetRaySpace(){return this._targetRay===null&&(this._targetRay=new Zs,this._targetRay.matrixAutoUpdate=!1,this._targetRay.visible=!1,this._targetRay.hasLinearVelocity=!1,this._targetRay.linearVelocity=new J,this._targetRay.hasAngularVelocity=!1,this._targetRay.angularVelocity=new J),this._targetRay}getGripSpace(){return this._grip===null&&(this._grip=new Zs,this._grip.matrixAutoUpdate=!1,this._grip.visible=!1,this._grip.hasLinearVelocity=!1,this._grip.linearVelocity=new J,this._grip.hasAngularVelocity=!1,this._grip.angularVelocity=new J),this._grip}dispatchEvent(e){return this._targetRay!==null&&this._targetRay.dispatchEvent(e),this._grip!==null&&this._grip.dispatchEvent(e),this._hand!==null&&this._hand.dispatchEvent(e),this}connect(e){if(e&&e.hand){const t=this._hand;if(t)for(const n of e.hand.values())this._getHandJoint(t,n)}return this.dispatchEvent({type:"connected",data:e}),this}disconnect(e){return this.dispatchEvent({type:"disconnected",data:e}),this._targetRay!==null&&(this._targetRay.visible=!1),this._grip!==null&&(this._grip.visible=!1),this._hand!==null&&(this._hand.visible=!1),this}update(e,t,n){let r=null,s=null,o=null;const a=this._targetRay,l=this._grip,u=this._hand;if(e&&t.session.visibilityState!=="visible-blurred"){if(u&&e.hand){o=!0;for(const M of e.hand.values()){const w=t.getJointPose(M,n),T=this._getHandJoint(u,M);w!==null&&(T.matrix.fromArray(w.transform.matrix),T.matrix.decompose(T.position,T.rotation,T.scale),T.matrixWorldNeedsUpdate=!0,T.jointRadius=w.radius),T.visible=w!==null}const c=u.joints["index-finger-tip"],A=u.joints["thumb-tip"],m=c.position.distanceTo(A.position),_=.02,b=.005;u.inputState.pinching&&m>_+b?(u.inputState.pinching=!1,this.dispatchEvent({type:"pinchend",handedness:e.handedness,target:this})):!u.inputState.pinching&&m<=_-b&&(u.inputState.pinching=!0,this.dispatchEvent({type:"pinchstart",handedness:e.handedness,target:this}))}else l!==null&&e.gripSpace&&(s=t.getPose(e.gripSpace,n),s!==null&&(l.matrix.fromArray(s.transform.matrix),l.matrix.decompose(l.position,l.rotation,l.scale),l.matrixWorldNeedsUpdate=!0,s.linearVelocity?(l.hasLinearVelocity=!0,l.linearVelocity.copy(s.linearVelocity)):l.hasLinearVelocity=!1,s.angularVelocity?(l.hasAngularVelocity=!0,l.angularVelocity.copy(s.angularVelocity)):l.hasAngularVelocity=!1));a!==null&&(r=t.getPose(e.targetRaySpace,n),r===null&&s!==null&&(r=s),r!==null&&(a.matrix.fromArray(r.transform.matrix),a.matrix.decompose(a.position,a.rotation,a.scale),a.matrixWorldNeedsUpdate=!0,r.linearVelocity?(a.hasLinearVelocity=!0,a.linearVelocity.copy(r.linearVelocity)):a.hasLinearVelocity=!1,r.angularVelocity?(a.hasAngularVelocity=!0,a.angularVelocity.copy(r.angularVelocity)):a.hasAngularVelocity=!1,this.dispatchEvent(jF)))}return a!==null&&(a.visible=r!==null),l!==null&&(l.visible=s!==null),u!==null&&(u.visible=o!==null),this}_getHandJoint(e,t){if(e.joints[t.jointName]===void 0){const n=new Zs;n.matrixAutoUpdate=!1,n.visible=!1,e.joints[t.jointName]=n,e.add(n)}return e.joints[t.jointName]}}class L9{constructor(e,t=25e-5){this.isFogExp2=!0,this.name="",this.color=new Et(e),this.density=t}clone(){return new L9(this.color,this.density)}toJSON(){return{type:"FogExp2",name:this.name,color:this.color.getHex(),density:this.density}}}class $8{constructor(e,t=1,n=1e3){this.isFog=!0,this.name="",this.color=new Et(e),this.near=t,this.far=n}clone(){return new $8(this.color,this.near,this.far)}toJSON(){return{type:"Fog",name:this.name,color:this.color.getHex(),near:this.near,far:this.far}}}class Rc extends Ai{constructor(){super(),this.isScene=!0,this.type="Scene",this.background=null,this.environment=null,this.fog=null,this.backgroundBlurriness=0,this.backgroundIntensity=1,this.backgroundRotation=new Ts,this.environmentIntensity=1,this.environmentRotation=new Ts,this.overrideMaterial=null,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}copy(e,t){return super.copy(e,t),e.background!==null&&(this.background=e.background.clone()),e.environment!==null&&(this.environment=e.environment.clone()),e.fog!==null&&(this.fog=e.fog.clone()),this.backgroundBlurriness=e.backgroundBlurriness,this.backgroundIntensity=e.backgroundIntensity,this.backgroundRotation.copy(e.backgroundRotation),this.environmentIntensity=e.environmentIntensity,this.environmentRotation.copy(e.environmentRotation),e.overrideMaterial!==null&&(this.overrideMaterial=e.overrideMaterial.clone()),this.matrixAutoUpdate=e.matrixAutoUpdate,this}toJSON(e){const t=super.toJSON(e);return this.fog!==null&&(t.object.fog=this.fog.toJSON()),this.backgroundBlurriness>0&&(t.object.backgroundBlurriness=this.backgroundBlurriness),this.backgroundIntensity!==1&&(t.object.backgroundIntensity=this.backgroundIntensity),t.object.backgroundRotation=this.backgroundRotation.toArray(),this.environmentIntensity!==1&&(t.object.environmentIntensity=this.environmentIntensity),t.object.environmentRotation=this.environmentRotation.toArray(),t}}class u5{constructor(e,t){this.isInterleavedBuffer=!0,this.array=e,this.stride=t,this.count=e!==void 0?e.length/t:0,this.usage=q4,this.updateRanges=[],this.version=0,this.uuid=va()}onUploadCallback(){}set needsUpdate(e){e===!0&&this.version++}setUsage(e){return this.usage=e,this}addUpdateRange(e,t){this.updateRanges.push({start:e,count:t})}clearUpdateRanges(){this.updateRanges.length=0}copy(e){return this.array=new e.array.constructor(e.array),this.count=e.count,this.stride=e.stride,this.usage=e.usage,this}copyAt(e,t,n){e*=this.stride,n*=t.stride;for(let r=0,s=this.stride;r<s;r++)this.array[e+r]=t.array[n+r];return this}set(e,t=0){return this.array.set(e,t),this}clone(e){e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=va()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=this.array.slice(0).buffer);const t=new this.array.constructor(e.arrayBuffers[this.array.buffer._uuid]),n=new this.constructor(t,this.stride);return n.setUsage(this.usage),n}onUpload(e){return this.onUploadCallback=e,this}toJSON(e){return e.arrayBuffers===void 0&&(e.arrayBuffers={}),this.array.buffer._uuid===void 0&&(this.array.buffer._uuid=va()),e.arrayBuffers[this.array.buffer._uuid]===void 0&&(e.arrayBuffers[this.array.buffer._uuid]=Array.from(new Uint32Array(this.array.buffer))),{uuid:this.uuid,buffer:this.array.buffer._uuid,type:this.array.constructor.name,stride:this.stride}}}const uo=new J;class bo{constructor(e,t,n,r=!1){this.isInterleavedBufferAttribute=!0,this.name="",this.data=e,this.itemSize=t,this.offset=n,this.normalized=r}get count(){return this.data.count}get array(){return this.data.array}set needsUpdate(e){this.data.needsUpdate=e}applyMatrix4(e){for(let t=0,n=this.data.count;t<n;t++)uo.fromBufferAttribute(this,t),uo.applyMatrix4(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}applyNormalMatrix(e){for(let t=0,n=this.count;t<n;t++)uo.fromBufferAttribute(this,t),uo.applyNormalMatrix(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}transformDirection(e){for(let t=0,n=this.count;t<n;t++)uo.fromBufferAttribute(this,t),uo.transformDirection(e),this.setXYZ(t,uo.x,uo.y,uo.z);return this}getComponent(e,t){let n=this.array[e*this.data.stride+this.offset+t];return this.normalized&&(n=_o(n,this.array)),n}setComponent(e,t,n){return this.normalized&&(n=Jn(n,this.array)),this.data.array[e*this.data.stride+this.offset+t]=n,this}setX(e,t){return this.normalized&&(t=Jn(t,this.array)),this.data.array[e*this.data.stride+this.offset]=t,this}setY(e,t){return this.normalized&&(t=Jn(t,this.array)),this.data.array[e*this.data.stride+this.offset+1]=t,this}setZ(e,t){return this.normalized&&(t=Jn(t,this.array)),this.data.array[e*this.data.stride+this.offset+2]=t,this}setW(e,t){return this.normalized&&(t=Jn(t,this.array)),this.data.array[e*this.data.stride+this.offset+3]=t,this}getX(e){let t=this.data.array[e*this.data.stride+this.offset];return this.normalized&&(t=_o(t,this.array)),t}getY(e){let t=this.data.array[e*this.data.stride+this.offset+1];return this.normalized&&(t=_o(t,this.array)),t}getZ(e){let t=this.data.array[e*this.data.stride+this.offset+2];return this.normalized&&(t=_o(t,this.array)),t}getW(e){let t=this.data.array[e*this.data.stride+this.offset+3];return this.normalized&&(t=_o(t,this.array)),t}setXY(e,t,n){return e=e*this.data.stride+this.offset,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this}setXYZ(e,t,n,r){return e=e*this.data.stride+this.offset,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array),r=Jn(r,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this}setXYZW(e,t,n,r,s){return e=e*this.data.stride+this.offset,this.normalized&&(t=Jn(t,this.array),n=Jn(n,this.array),r=Jn(r,this.array),s=Jn(s,this.array)),this.data.array[e+0]=t,this.data.array[e+1]=n,this.data.array[e+2]=r,this.data.array[e+3]=s,this}clone(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.clone(): Cloning an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return new oi(new this.array.constructor(t),this.itemSize,this.normalized)}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.clone(e)),new bo(e.interleavedBuffers[this.data.uuid],this.itemSize,this.offset,this.normalized)}toJSON(e){if(e===void 0){console.log("THREE.InterleavedBufferAttribute.toJSON(): Serializing an interleaved buffer attribute will de-interleave buffer data.");const t=[];for(let n=0;n<this.count;n++){const r=n*this.data.stride+this.offset;for(let s=0;s<this.itemSize;s++)t.push(this.data.array[r+s])}return{itemSize:this.itemSize,type:this.array.constructor.name,array:t,normalized:this.normalized}}else return e.interleavedBuffers===void 0&&(e.interleavedBuffers={}),e.interleavedBuffers[this.data.uuid]===void 0&&(e.interleavedBuffers[this.data.uuid]=this.data.toJSON(e)),{isInterleavedBufferAttribute:!0,itemSize:this.itemSize,data:this.data.uuid,offset:this.offset,normalized:this.normalized}}}class D9 extends ws{constructor(e){super(),this.isSpriteMaterial=!0,this.type="SpriteMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.rotation=0,this.sizeAttenuation=!0,this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.rotation=e.rotation,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}let C3;const eh=new J,P3=new J,N3=new J,I3=new Ge,th=new Ge,ME=new Wt,y7=new J,nh=new J,v7=new J,Ab=new Ge,Pp=new Ge,pb=new Ge;class EE extends Ai{constructor(e=new D9){if(super(),this.isSprite=!0,this.type="Sprite",C3===void 0){C3=new Tn;const t=new Float32Array([-.5,-.5,0,0,0,.5,-.5,0,1,0,.5,.5,0,1,1,-.5,.5,0,0,1]),n=new u5(t,5);C3.setIndex([0,1,2,0,2,3]),C3.setAttribute("position",new bo(n,3,0,!1)),C3.setAttribute("uv",new bo(n,2,3,!1))}this.geometry=C3,this.material=e,this.center=new Ge(.5,.5),this.count=1}raycast(e,t){e.camera===null&&console.error('THREE.Sprite: "Raycaster.camera" needs to be set in order to raycast against sprites.'),P3.setFromMatrixScale(this.matrixWorld),ME.copy(e.camera.matrixWorld),this.modelViewMatrix.multiplyMatrices(e.camera.matrixWorldInverse,this.matrixWorld),N3.setFromMatrixPosition(this.modelViewMatrix),e.camera.isPerspectiveCamera&&this.material.sizeAttenuation===!1&&P3.multiplyScalar(-N3.z);const n=this.material.rotation;let r,s;n!==0&&(s=Math.cos(n),r=Math.sin(n));const o=this.center;_7(y7.set(-.5,-.5,0),N3,o,P3,r,s),_7(nh.set(.5,-.5,0),N3,o,P3,r,s),_7(v7.set(.5,.5,0),N3,o,P3,r,s),Ab.set(0,0),Pp.set(1,0),pb.set(1,1);let a=e.ray.intersectTriangle(y7,nh,v7,!1,eh);if(a===null&&(_7(nh.set(-.5,.5,0),N3,o,P3,r,s),Pp.set(0,1),a=e.ray.intersectTriangle(y7,v7,nh,!1,eh),a===null))return;const l=e.ray.origin.distanceTo(eh);l<e.near||l>e.far||t.push({distance:l,point:eh.clone(),uv:Oo.getInterpolation(eh,y7,nh,v7,Ab,Pp,pb,new Ge),face:null,object:this})}copy(e,t){return super.copy(e,t),e.center!==void 0&&this.center.copy(e.center),this.material=e.material,this}}function _7(i,e,t,n,r,s){I3.subVectors(i,t).addScalar(.5).multiply(n),r!==void 0?(th.x=s*I3.x-r*I3.y,th.y=r*I3.x+s*I3.y):th.copy(I3),i.copy(e),i.x+=th.x,i.y+=th.y,i.applyMatrix4(ME)}const x7=new J,mb=new J;class RE extends Ai{constructor(){super(),this.isLOD=!0,this._currentLevel=0,this.type="LOD",Object.defineProperties(this,{levels:{enumerable:!0,value:[]}}),this.autoUpdate=!0}copy(e){super.copy(e,!1);const t=e.levels;for(let n=0,r=t.length;n<r;n++){const s=t[n];this.addLevel(s.object.clone(),s.distance,s.hysteresis)}return this.autoUpdate=e.autoUpdate,this}addLevel(e,t=0,n=0){t=Math.abs(t);const r=this.levels;let s;for(s=0;s<r.length&&!(t<r[s].distance);s++);return r.splice(s,0,{distance:t,hysteresis:n,object:e}),this.add(e),this}removeLevel(e){const t=this.levels;for(let n=0;n<t.length;n++)if(t[n].distance===e){const r=t.splice(n,1);return this.remove(r[0].object),!0}return!1}getCurrentLevel(){return this._currentLevel}getObjectForDistance(e){const t=this.levels;if(t.length>0){let n,r;for(n=1,r=t.length;n<r;n++){let s=t[n].distance;if(t[n].object.visible&&(s-=s*t[n].hysteresis),e<s)break}return t[n-1].object}return null}raycast(e,t){if(this.levels.length>0){x7.setFromMatrixPosition(this.matrixWorld);const r=e.ray.origin.distanceTo(x7);this.getObjectForDistance(r).raycast(e,t)}}update(e){const t=this.levels;if(t.length>1){x7.setFromMatrixPosition(e.matrixWorld),mb.setFromMatrixPosition(this.matrixWorld);const n=x7.distanceTo(mb)/e.zoom;t[0].object.visible=!0;let r,s;for(r=1,s=t.length;r<s;r++){let o=t[r].distance;if(t[r].object.visible&&(o-=o*t[r].hysteresis),n>=o)t[r-1].object.visible=!1,t[r].object.visible=!0;else break}for(this._currentLevel=r-1;r<s;r++)t[r].object.visible=!1}}toJSON(e){const t=super.toJSON(e);this.autoUpdate===!1&&(t.object.autoUpdate=!1),t.object.levels=[];const n=this.levels;for(let r=0,s=n.length;r<s;r++){const o=n[r];t.object.levels.push({object:o.object.uuid,distance:o.distance,hysteresis:o.hysteresis})}return t}}const gb=new J,yb=new rn,vb=new rn,$F=new J,_b=new Wt,b7=new J,Np=new Kr,xb=new Wt,Ip=new Ec;class CE extends ei{constructor(e,t){super(e,t),this.isSkinnedMesh=!0,this.type="SkinnedMesh",this.bindMode=fg,this.bindMatrix=new Wt,this.bindMatrixInverse=new Wt,this.boundingBox=null,this.boundingSphere=null}computeBoundingBox(){const e=this.geometry;this.boundingBox===null&&(this.boundingBox=new ls),this.boundingBox.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,b7),this.boundingBox.expandByPoint(b7)}computeBoundingSphere(){const e=this.geometry;this.boundingSphere===null&&(this.boundingSphere=new Kr),this.boundingSphere.makeEmpty();const t=e.getAttribute("position");for(let n=0;n<t.count;n++)this.getVertexPosition(n,b7),this.boundingSphere.expandByPoint(b7)}copy(e,t){return super.copy(e,t),this.bindMode=e.bindMode,this.bindMatrix.copy(e.bindMatrix),this.bindMatrixInverse.copy(e.bindMatrixInverse),this.skeleton=e.skeleton,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}raycast(e,t){const n=this.material,r=this.matrixWorld;n!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),Np.copy(this.boundingSphere),Np.applyMatrix4(r),e.ray.intersectsSphere(Np)!==!1&&(xb.copy(r).invert(),Ip.copy(e.ray).applyMatrix4(xb),!(this.boundingBox!==null&&Ip.intersectsBox(this.boundingBox)===!1)&&this._computeIntersections(e,t,Ip)))}getVertexPosition(e,t){return super.getVertexPosition(e,t),this.applyBoneTransform(e,t),t}bind(e,t){this.skeleton=e,t===void 0&&(this.updateMatrixWorld(!0),this.skeleton.calculateInverses(),t=this.matrixWorld),this.bindMatrix.copy(t),this.bindMatrixInverse.copy(t).invert()}pose(){this.skeleton.pose()}normalizeSkinWeights(){const e=new rn,t=this.geometry.attributes.skinWeight;for(let n=0,r=t.count;n<r;n++){e.fromBufferAttribute(t,n);const s=1/e.manhattanLength();s!==1/0?e.multiplyScalar(s):e.set(1,0,0,0),t.setXYZW(n,e.x,e.y,e.z,e.w)}}updateMatrixWorld(e){super.updateMatrixWorld(e),this.bindMode===fg?this.bindMatrixInverse.copy(this.matrixWorld).invert():this.bindMode===JM?this.bindMatrixInverse.copy(this.bindMatrix).invert():console.warn("THREE.SkinnedMesh: Unrecognized bindMode: "+this.bindMode)}applyBoneTransform(e,t){const n=this.skeleton,r=this.geometry;yb.fromBufferAttribute(r.attributes.skinIndex,e),vb.fromBufferAttribute(r.attributes.skinWeight,e),gb.copy(t).applyMatrix4(this.bindMatrix),t.set(0,0,0);for(let s=0;s<4;s++){const o=vb.getComponent(s);if(o!==0){const a=yb.getComponent(s);_b.multiplyMatrices(n.bones[a].matrixWorld,n.boneInverses[a]),t.addScaledVector($F.copy(gb).applyMatrix4(_b),o)}}return t.applyMatrix4(this.bindMatrixInverse)}}class lv extends Ai{constructor(){super(),this.isBone=!0,this.type="Bone"}}class I0 extends ur{constructor(e=null,t=1,n=1,r,s,o,a,l,u=qi,c=qi,A,m){super(null,o,a,l,u,c,r,s,A,m),this.isDataTexture=!0,this.image={data:e,width:t,height:n},this.generateMipmaps=!1,this.flipY=!1,this.unpackAlignment=1}}const bb=new Wt,XF=new Wt;class B9{constructor(e=[],t=[]){this.uuid=va(),this.bones=e.slice(0),this.boneInverses=t,this.boneMatrices=null,this.boneTexture=null,this.init()}init(){const e=this.bones,t=this.boneInverses;if(this.boneMatrices=new Float32Array(e.length*16),t.length===0)this.calculateInverses();else if(e.length!==t.length){console.warn("THREE.Skeleton: Number of inverse bone matrices does not match amount of bones."),this.boneInverses=[];for(let n=0,r=this.bones.length;n<r;n++)this.boneInverses.push(new Wt)}}calculateInverses(){this.boneInverses.length=0;for(let e=0,t=this.bones.length;e<t;e++){const n=new Wt;this.bones[e]&&n.copy(this.bones[e].matrixWorld).invert(),this.boneInverses.push(n)}}pose(){for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&n.matrixWorld.copy(this.boneInverses[e]).invert()}for(let e=0,t=this.bones.length;e<t;e++){const n=this.bones[e];n&&(n.parent&&n.parent.isBone?(n.matrix.copy(n.parent.matrixWorld).invert(),n.matrix.multiply(n.matrixWorld)):n.matrix.copy(n.matrixWorld),n.matrix.decompose(n.position,n.quaternion,n.scale))}}update(){const e=this.bones,t=this.boneInverses,n=this.boneMatrices,r=this.boneTexture;for(let s=0,o=e.length;s<o;s++){const a=e[s]?e[s].matrixWorld:XF;bb.multiplyMatrices(a,t[s]),bb.toArray(n,s*16)}r!==null&&(r.needsUpdate=!0)}clone(){return new B9(this.bones,this.boneInverses)}computeBoneTexture(){let e=Math.sqrt(this.bones.length*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4);t.set(this.boneMatrices);const n=new I0(t,e,e,Zi,nr);return n.needsUpdate=!0,this.boneMatrices=t,this.boneTexture=n,this}getBoneByName(e){for(let t=0,n=this.bones.length;t<n;t++){const r=this.bones[t];if(r.name===e)return r}}dispose(){this.boneTexture!==null&&(this.boneTexture.dispose(),this.boneTexture=null)}fromJSON(e,t){this.uuid=e.uuid;for(let n=0,r=e.bones.length;n<r;n++){const s=e.bones[n];let o=t[s];o===void 0&&(console.warn("THREE.Skeleton: No bone found with UUID:",s),o=new lv),this.bones.push(o),this.boneInverses.push(new Wt().fromArray(e.boneInverses[n]))}return this.init(),this}toJSON(){const e={metadata:{version:4.7,type:"Skeleton",generator:"Skeleton.toJSON"},bones:[],boneInverses:[]};e.uuid=this.uuid;const t=this.bones,n=this.boneInverses;for(let r=0,s=t.length;r<s;r++){const o=t[r];e.bones.push(o.uuid);const a=n[r];e.boneInverses.push(a.toArray())}return e}}class Xo extends oi{constructor(e,t,n,r=1){super(e,t,n),this.isInstancedBufferAttribute=!0,this.meshPerAttribute=r}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}toJSON(){const e=super.toJSON();return e.meshPerAttribute=this.meshPerAttribute,e.isInstancedBufferAttribute=!0,e}}const L3=new Wt,Sb=new Wt,S7=[],Tb=new ls,QF=new Wt,ih=new ei,rh=new Kr;class PE extends ei{constructor(e,t,n){super(e,t),this.isInstancedMesh=!0,this.instanceMatrix=new Xo(new Float32Array(n*16),16),this.instanceColor=null,this.morphTexture=null,this.count=n,this.boundingBox=null,this.boundingSphere=null;for(let r=0;r<n;r++)this.setMatrixAt(r,QF)}computeBoundingBox(){const e=this.geometry,t=this.count;this.boundingBox===null&&(this.boundingBox=new ls),e.boundingBox===null&&e.computeBoundingBox(),this.boundingBox.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,L3),Tb.copy(e.boundingBox).applyMatrix4(L3),this.boundingBox.union(Tb)}computeBoundingSphere(){const e=this.geometry,t=this.count;this.boundingSphere===null&&(this.boundingSphere=new Kr),e.boundingSphere===null&&e.computeBoundingSphere(),this.boundingSphere.makeEmpty();for(let n=0;n<t;n++)this.getMatrixAt(n,L3),rh.copy(e.boundingSphere).applyMatrix4(L3),this.boundingSphere.union(rh)}copy(e,t){return super.copy(e,t),this.instanceMatrix.copy(e.instanceMatrix),e.morphTexture!==null&&(this.morphTexture=e.morphTexture.clone()),e.instanceColor!==null&&(this.instanceColor=e.instanceColor.clone()),this.count=e.count,e.boundingBox!==null&&(this.boundingBox=e.boundingBox.clone()),e.boundingSphere!==null&&(this.boundingSphere=e.boundingSphere.clone()),this}getColorAt(e,t){t.fromArray(this.instanceColor.array,e*3)}getMatrixAt(e,t){t.fromArray(this.instanceMatrix.array,e*16)}getMorphAt(e,t){const n=t.morphTargetInfluences,r=this.morphTexture.source.data.data,s=n.length+1,o=e*s+1;for(let a=0;a<n.length;a++)n[a]=r[o+a]}raycast(e,t){const n=this.matrixWorld,r=this.count;if(ih.geometry=this.geometry,ih.material=this.material,ih.material!==void 0&&(this.boundingSphere===null&&this.computeBoundingSphere(),rh.copy(this.boundingSphere),rh.applyMatrix4(n),e.ray.intersectsSphere(rh)!==!1))for(let s=0;s<r;s++){this.getMatrixAt(s,L3),Sb.multiplyMatrices(n,L3),ih.matrixWorld=Sb,ih.raycast(e,S7);for(let o=0,a=S7.length;o<a;o++){const l=S7[o];l.instanceId=s,l.object=this,t.push(l)}S7.length=0}}setColorAt(e,t){this.instanceColor===null&&(this.instanceColor=new Xo(new Float32Array(this.instanceMatrix.count*3).fill(1),3)),t.toArray(this.instanceColor.array,e*3)}setMatrixAt(e,t){t.toArray(this.instanceMatrix.array,e*16)}setMorphAt(e,t){const n=t.morphTargetInfluences,r=n.length+1;this.morphTexture===null&&(this.morphTexture=new I0(new Float32Array(r*this.count),r,this.count,Tc,nr));const s=this.morphTexture.source.data.data;let o=0;for(let u=0;u<n.length;u++)o+=n[u];const a=this.geometry.morphTargetsRelative?1:1-o,l=r*e;s[l]=a,s.set(n,l+1)}updateMorphTargets(){}dispose(){this.dispatchEvent({type:"dispose"}),this.morphTexture!==null&&(this.morphTexture.dispose(),this.morphTexture=null)}}const Lp=new J,YF=new J,KF=new Fn;class M0{constructor(e=new J(1,0,0),t=0){this.isPlane=!0,this.normal=e,this.constant=t}set(e,t){return this.normal.copy(e),this.constant=t,this}setComponents(e,t,n,r){return this.normal.set(e,t,n),this.constant=r,this}setFromNormalAndCoplanarPoint(e,t){return this.normal.copy(e),this.constant=-t.dot(this.normal),this}setFromCoplanarPoints(e,t,n){const r=Lp.subVectors(n,t).cross(YF.subVectors(e,t)).normalize();return this.setFromNormalAndCoplanarPoint(r,e),this}copy(e){return this.normal.copy(e.normal),this.constant=e.constant,this}normalize(){const e=1/this.normal.length();return this.normal.multiplyScalar(e),this.constant*=e,this}negate(){return this.constant*=-1,this.normal.negate(),this}distanceToPoint(e){return this.normal.dot(e)+this.constant}distanceToSphere(e){return this.distanceToPoint(e.center)-e.radius}projectPoint(e,t){return t.copy(e).addScaledVector(this.normal,-this.distanceToPoint(e))}intersectLine(e,t){const n=e.delta(Lp),r=this.normal.dot(n);if(r===0)return this.distanceToPoint(e.start)===0?t.copy(e.start):null;const s=-(e.start.dot(this.normal)+this.constant)/r;return s<0||s>1?null:t.copy(e.start).addScaledVector(n,s)}intersectsLine(e){const t=this.distanceToPoint(e.start),n=this.distanceToPoint(e.end);return t<0&&n>0||n<0&&t>0}intersectsBox(e){return e.intersectsPlane(this)}intersectsSphere(e){return e.intersectsPlane(this)}coplanarPoint(e){return e.copy(this.normal).multiplyScalar(-this.constant)}applyMatrix4(e,t){const n=t||KF.getNormalMatrix(e),r=this.coplanarPoint(Lp).applyMatrix4(e),s=this.normal.applyMatrix3(n).normalize();return this.constant=-r.dot(s),this}translate(e){return this.constant-=e.dot(this.normal),this}equals(e){return e.normal.equals(this.normal)&&e.constant===this.constant}clone(){return new this.constructor().copy(this)}}const n2=new Kr,ZF=new Ge(.5,.5),T7=new J;class _u{constructor(e=new M0,t=new M0,n=new M0,r=new M0,s=new M0,o=new M0){this.planes=[e,t,n,r,s,o]}set(e,t,n,r,s,o){const a=this.planes;return a[0].copy(e),a[1].copy(t),a[2].copy(n),a[3].copy(r),a[4].copy(s),a[5].copy(o),this}copy(e){const t=this.planes;for(let n=0;n<6;n++)t[n].copy(e.planes[n]);return this}setFromProjectionMatrix(e,t=bs,n=!1){const r=this.planes,s=e.elements,o=s[0],a=s[1],l=s[2],u=s[3],c=s[4],A=s[5],m=s[6],_=s[7],b=s[8],M=s[9],w=s[10],T=s[11],N=s[12],P=s[13],I=s[14],B=s[15];if(r[0].setComponents(u-o,_-c,T-b,B-N).normalize(),r[1].setComponents(u+o,_+c,T+b,B+N).normalize(),r[2].setComponents(u+a,_+A,T+M,B+P).normalize(),r[3].setComponents(u-a,_-A,T-M,B-P).normalize(),n)r[4].setComponents(l,m,w,I).normalize(),r[5].setComponents(u-l,_-m,T-w,B-I).normalize();else if(r[4].setComponents(u-l,_-m,T-w,B-I).normalize(),t===bs)r[5].setComponents(u+l,_+m,T+w,B+I).normalize();else if(t===Qa)r[5].setComponents(l,m,w,I).normalize();else throw new Error("THREE.Frustum.setFromProjectionMatrix(): Invalid coordinate system: "+t);return this}intersectsObject(e){if(e.boundingSphere!==void 0)e.boundingSphere===null&&e.computeBoundingSphere(),n2.copy(e.boundingSphere).applyMatrix4(e.matrixWorld);else{const t=e.geometry;t.boundingSphere===null&&t.computeBoundingSphere(),n2.copy(t.boundingSphere).applyMatrix4(e.matrixWorld)}return this.intersectsSphere(n2)}intersectsSprite(e){n2.center.set(0,0,0);const t=ZF.distanceTo(e.center);return n2.radius=.7071067811865476+t,n2.applyMatrix4(e.matrixWorld),this.intersectsSphere(n2)}intersectsSphere(e){const t=this.planes,n=e.center,r=-e.radius;for(let s=0;s<6;s++)if(t[s].distanceToPoint(n)<r)return!1;return!0}intersectsBox(e){const t=this.planes;for(let n=0;n<6;n++){const r=t[n];if(T7.x=r.normal.x>0?e.max.x:e.min.x,T7.y=r.normal.y>0?e.max.y:e.min.y,T7.z=r.normal.z>0?e.max.z:e.min.z,r.distanceToPoint(T7)<0)return!1}return!0}containsPoint(e){const t=this.planes;for(let n=0;n<6;n++)if(t[n].distanceToPoint(e)<0)return!1;return!0}clone(){return new this.constructor().copy(this)}}const H0=new Wt,W0=new _u;class X8{constructor(){this.coordinateSystem=bs}intersectsObject(e,t){if(!t.isArrayCamera||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(H0.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),W0.setFromProjectionMatrix(H0,r.coordinateSystem,r.reversedDepth),W0.intersectsObject(e))return!0}return!1}intersectsSprite(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(H0.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),W0.setFromProjectionMatrix(H0,r.coordinateSystem,r.reversedDepth),W0.intersectsSprite(e))return!0}return!1}intersectsSphere(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(H0.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),W0.setFromProjectionMatrix(H0,r.coordinateSystem,r.reversedDepth),W0.intersectsSphere(e))return!0}return!1}intersectsBox(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(H0.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),W0.setFromProjectionMatrix(H0,r.coordinateSystem,r.reversedDepth),W0.intersectsBox(e))return!0}return!1}containsPoint(e,t){if(!t||!t.cameras||t.cameras.length===0)return!1;for(let n=0;n<t.cameras.length;n++){const r=t.cameras[n];if(H0.multiplyMatrices(r.projectionMatrix,r.matrixWorldInverse),W0.setFromProjectionMatrix(H0,r.coordinateSystem,r.reversedDepth),W0.containsPoint(e))return!0}return!1}clone(){return new X8}}function Dp(i,e){return i-e}function JF(i,e){return i.z-e.z}function eU(i,e){return e.z-i.z}class tU{constructor(){this.index=0,this.pool=[],this.list=[]}push(e,t,n,r){const s=this.pool,o=this.list;this.index>=s.length&&s.push({start:-1,count:-1,z:-1,index:-1});const a=s[this.index];o.push(a),this.index++,a.start=e,a.count=t,a.z=n,a.index=r}reset(){this.list.length=0,this.index=0}}const Do=new Wt,nU=new Et(1,1,1),wb=new _u,iU=new X8,w7=new ls,i2=new Kr,sh=new J,Mb=new J,rU=new J,Bp=new tU,Xs=new ei,M7=[];function sU(i,e,t=0){const n=e.itemSize;if(i.isInterleavedBufferAttribute||i.array.constructor!==e.array.constructor){const r=i.count;for(let s=0;s<r;s++)for(let o=0;o<n;o++)e.setComponent(s+t,o,i.getComponent(s,o))}else e.array.set(i.array,t*n);e.needsUpdate=!0}function r2(i,e){if(i.constructor!==e.constructor){const t=Math.min(i.length,e.length);for(let n=0;n<t;n++)e[n]=i[n]}else{const t=Math.min(i.length,e.length);e.set(new i.constructor(i.buffer,0,t))}}class NE extends ei{constructor(e,t,n=t*2,r){super(new Tn,r),this.isBatchedMesh=!0,this.perObjectFrustumCulled=!0,this.sortObjects=!0,this.boundingBox=null,this.boundingSphere=null,this.customSort=null,this._instanceInfo=[],this._geometryInfo=[],this._availableInstanceIds=[],this._availableGeometryIds=[],this._nextIndexStart=0,this._nextVertexStart=0,this._geometryCount=0,this._visibilityChanged=!0,this._geometryInitialized=!1,this._maxInstanceCount=e,this._maxVertexCount=t,this._maxIndexCount=n,this._multiDrawCounts=new Int32Array(e),this._multiDrawStarts=new Int32Array(e),this._multiDrawCount=0,this._multiDrawInstances=null,this._matricesTexture=null,this._indirectTexture=null,this._colorsTexture=null,this._initMatricesTexture(),this._initIndirectTexture()}get maxInstanceCount(){return this._maxInstanceCount}get instanceCount(){return this._instanceInfo.length-this._availableInstanceIds.length}get unusedVertexCount(){return this._maxVertexCount-this._nextVertexStart}get unusedIndexCount(){return this._maxIndexCount-this._nextIndexStart}_initMatricesTexture(){let e=Math.sqrt(this._maxInstanceCount*4);e=Math.ceil(e/4)*4,e=Math.max(e,4);const t=new Float32Array(e*e*4),n=new I0(t,e,e,Zi,nr);this._matricesTexture=n}_initIndirectTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Uint32Array(e*e),n=new I0(t,e,e,gu,Oi);this._indirectTexture=n}_initColorsTexture(){let e=Math.sqrt(this._maxInstanceCount);e=Math.ceil(e);const t=new Float32Array(e*e*4).fill(1),n=new I0(t,e,e,Zi,nr);n.colorSpace=Sn.workingColorSpace,this._colorsTexture=n}_initializeGeometry(e){const t=this.geometry,n=this._maxVertexCount,r=this._maxIndexCount;if(this._geometryInitialized===!1){for(const s in e.attributes){const o=e.getAttribute(s),{array:a,itemSize:l,normalized:u}=o,c=new a.constructor(n*l),A=new oi(c,l,u);t.setAttribute(s,A)}if(e.getIndex()!==null){const s=n>65535?new Uint32Array(r):new Uint16Array(r);t.setIndex(new oi(s,1))}this._geometryInitialized=!0}}_validateGeometry(e){const t=this.geometry;if(!!e.getIndex()!=!!t.getIndex())throw new Error('THREE.BatchedMesh: All geometries must consistently have "index".');for(const n in t.attributes){if(!e.hasAttribute(n))throw new Error(`THREE.BatchedMesh: Added geometry missing "${n}". All geometries must have consistent attributes.`);const r=e.getAttribute(n),s=t.getAttribute(n);if(r.itemSize!==s.itemSize||r.normalized!==s.normalized)throw new Error("THREE.BatchedMesh: All attributes must have a consistent itemSize and normalized value.")}}validateInstanceId(e){const t=this._instanceInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid instanceId ${e}. Instance is either out of range or has been deleted.`)}validateGeometryId(e){const t=this._geometryInfo;if(e<0||e>=t.length||t[e].active===!1)throw new Error(`THREE.BatchedMesh: Invalid geometryId ${e}. Geometry is either out of range or has been deleted.`)}setCustomSort(e){return this.customSort=e,this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ls);const e=this.boundingBox,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Do),this.getBoundingBoxAt(s,w7).applyMatrix4(Do),e.union(w7)}}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kr);const e=this.boundingSphere,t=this._instanceInfo;e.makeEmpty();for(let n=0,r=t.length;n<r;n++){if(t[n].active===!1)continue;const s=t[n].geometryIndex;this.getMatrixAt(n,Do),this.getBoundingSphereAt(s,i2).applyMatrix4(Do),e.union(i2)}}addInstance(e){if(this._instanceInfo.length>=this.maxInstanceCount&&this._availableInstanceIds.length===0)throw new Error("THREE.BatchedMesh: Maximum item count reached.");const n={visible:!0,active:!0,geometryIndex:e};let r=null;this._availableInstanceIds.length>0?(this._availableInstanceIds.sort(Dp),r=this._availableInstanceIds.shift(),this._instanceInfo[r]=n):(r=this._instanceInfo.length,this._instanceInfo.push(n));const s=this._matricesTexture;Do.identity().toArray(s.image.data,r*16),s.needsUpdate=!0;const o=this._colorsTexture;return o&&(nU.toArray(o.image.data,r*4),o.needsUpdate=!0),this._visibilityChanged=!0,r}addGeometry(e,t=-1,n=-1){this._initializeGeometry(e),this._validateGeometry(e);const r={vertexStart:-1,vertexCount:-1,reservedVertexCount:-1,indexStart:-1,indexCount:-1,reservedIndexCount:-1,start:-1,count:-1,boundingBox:null,boundingSphere:null,active:!0},s=this._geometryInfo;r.vertexStart=this._nextVertexStart,r.reservedVertexCount=t===-1?e.getAttribute("position").count:t;const o=e.getIndex();if(o!==null&&(r.indexStart=this._nextIndexStart,r.reservedIndexCount=n===-1?o.count:n),r.indexStart!==-1&&r.indexStart+r.reservedIndexCount>this._maxIndexCount||r.vertexStart+r.reservedVertexCount>this._maxVertexCount)throw new Error("THREE.BatchedMesh: Reserved space request exceeds the maximum buffer size.");let l;return this._availableGeometryIds.length>0?(this._availableGeometryIds.sort(Dp),l=this._availableGeometryIds.shift(),s[l]=r):(l=this._geometryCount,this._geometryCount++,s.push(r)),this.setGeometryAt(l,e),this._nextIndexStart=r.indexStart+r.reservedIndexCount,this._nextVertexStart=r.vertexStart+r.reservedVertexCount,l}setGeometryAt(e,t){if(e>=this._geometryCount)throw new Error("THREE.BatchedMesh: Maximum geometry count reached.");this._validateGeometry(t);const n=this.geometry,r=n.getIndex()!==null,s=n.getIndex(),o=t.getIndex(),a=this._geometryInfo[e];if(r&&o.count>a.reservedIndexCount||t.attributes.position.count>a.reservedVertexCount)throw new Error("THREE.BatchedMesh: Reserved space not large enough for provided geometry.");const l=a.vertexStart,u=a.reservedVertexCount;a.vertexCount=t.getAttribute("position").count;for(const c in n.attributes){const A=t.getAttribute(c),m=n.getAttribute(c);sU(A,m,l);const _=A.itemSize;for(let b=A.count,M=u;b<M;b++){const w=l+b;for(let T=0;T<_;T++)m.setComponent(w,T,0)}m.needsUpdate=!0,m.addUpdateRange(l*_,u*_)}if(r){const c=a.indexStart,A=a.reservedIndexCount;a.indexCount=t.getIndex().count;for(let m=0;m<o.count;m++)s.setX(c+m,l+o.getX(m));for(let m=o.count,_=A;m<_;m++)s.setX(c+m,l);s.needsUpdate=!0,s.addUpdateRange(c,a.reservedIndexCount)}return a.start=r?a.indexStart:a.vertexStart,a.count=r?a.indexCount:a.vertexCount,a.boundingBox=null,t.boundingBox!==null&&(a.boundingBox=t.boundingBox.clone()),a.boundingSphere=null,t.boundingSphere!==null&&(a.boundingSphere=t.boundingSphere.clone()),this._visibilityChanged=!0,e}deleteGeometry(e){const t=this._geometryInfo;if(e>=t.length||t[e].active===!1)return this;const n=this._instanceInfo;for(let r=0,s=n.length;r<s;r++)n[r].active&&n[r].geometryIndex===e&&this.deleteInstance(r);return t[e].active=!1,this._availableGeometryIds.push(e),this._visibilityChanged=!0,this}deleteInstance(e){return this.validateInstanceId(e),this._instanceInfo[e].active=!1,this._availableInstanceIds.push(e),this._visibilityChanged=!0,this}optimize(){let e=0,t=0;const n=this._geometryInfo,r=n.map((o,a)=>a).sort((o,a)=>n[o].vertexStart-n[a].vertexStart),s=this.geometry;for(let o=0,a=n.length;o<a;o++){const l=r[o],u=n[l];if(u.active!==!1){if(s.index!==null){if(u.indexStart!==t){const{indexStart:c,vertexStart:A,reservedIndexCount:m}=u,_=s.index,b=_.array,M=e-A;for(let w=c;w<c+m;w++)b[w]=b[w]+M;_.array.copyWithin(t,c,c+m),_.addUpdateRange(t,m),u.indexStart=t}t+=u.reservedIndexCount}if(u.vertexStart!==e){const{vertexStart:c,reservedVertexCount:A}=u,m=s.attributes;for(const _ in m){const b=m[_],{array:M,itemSize:w}=b;M.copyWithin(e*w,c*w,(c+A)*w),b.addUpdateRange(e*w,A*w)}u.vertexStart=e}e+=u.reservedVertexCount,u.start=s.index?u.indexStart:u.vertexStart,this._nextIndexStart=s.index?u.indexStart+u.reservedIndexCount:0,this._nextVertexStart=u.vertexStart+u.reservedVertexCount}}return this}getBoundingBoxAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingBox===null){const s=new ls,o=n.index,a=n.attributes.position;for(let l=r.start,u=r.start+r.count;l<u;l++){let c=l;o&&(c=o.getX(c)),s.expandByPoint(sh.fromBufferAttribute(a,c))}r.boundingBox=s}return t.copy(r.boundingBox),t}getBoundingSphereAt(e,t){if(e>=this._geometryCount)return null;const n=this.geometry,r=this._geometryInfo[e];if(r.boundingSphere===null){const s=new Kr;this.getBoundingBoxAt(e,w7),w7.getCenter(s.center);const o=n.index,a=n.attributes.position;let l=0;for(let u=r.start,c=r.start+r.count;u<c;u++){let A=u;o&&(A=o.getX(A)),sh.fromBufferAttribute(a,A),l=Math.max(l,s.center.distanceToSquared(sh))}s.radius=Math.sqrt(l),r.boundingSphere=s}return t.copy(r.boundingSphere),t}setMatrixAt(e,t){this.validateInstanceId(e);const n=this._matricesTexture,r=this._matricesTexture.image.data;return t.toArray(r,e*16),n.needsUpdate=!0,this}getMatrixAt(e,t){return this.validateInstanceId(e),t.fromArray(this._matricesTexture.image.data,e*16)}setColorAt(e,t){return this.validateInstanceId(e),this._colorsTexture===null&&this._initColorsTexture(),t.toArray(this._colorsTexture.image.data,e*4),this._colorsTexture.needsUpdate=!0,this}getColorAt(e,t){return this.validateInstanceId(e),t.fromArray(this._colorsTexture.image.data,e*4)}setVisibleAt(e,t){return this.validateInstanceId(e),this._instanceInfo[e].visible===t?this:(this._instanceInfo[e].visible=t,this._visibilityChanged=!0,this)}getVisibleAt(e){return this.validateInstanceId(e),this._instanceInfo[e].visible}setGeometryIdAt(e,t){return this.validateInstanceId(e),this.validateGeometryId(t),this._instanceInfo[e].geometryIndex=t,this}getGeometryIdAt(e){return this.validateInstanceId(e),this._instanceInfo[e].geometryIndex}getGeometryRangeAt(e,t={}){this.validateGeometryId(e);const n=this._geometryInfo[e];return t.vertexStart=n.vertexStart,t.vertexCount=n.vertexCount,t.reservedVertexCount=n.reservedVertexCount,t.indexStart=n.indexStart,t.indexCount=n.indexCount,t.reservedIndexCount=n.reservedIndexCount,t.start=n.start,t.count=n.count,t}setInstanceCount(e){const t=this._availableInstanceIds,n=this._instanceInfo;for(t.sort(Dp);t[t.length-1]===n.length-1;)n.pop(),t.pop();if(e<n.length)throw new Error(`BatchedMesh: Instance ids outside the range ${e} are being used. Cannot shrink instance count.`);const r=new Int32Array(e),s=new Int32Array(e);r2(this._multiDrawCounts,r),r2(this._multiDrawStarts,s),this._multiDrawCounts=r,this._multiDrawStarts=s,this._maxInstanceCount=e;const o=this._indirectTexture,a=this._matricesTexture,l=this._colorsTexture;o.dispose(),this._initIndirectTexture(),r2(o.image.data,this._indirectTexture.image.data),a.dispose(),this._initMatricesTexture(),r2(a.image.data,this._matricesTexture.image.data),l&&(l.dispose(),this._initColorsTexture(),r2(l.image.data,this._colorsTexture.image.data))}setGeometrySize(e,t){const n=[...this._geometryInfo].filter(a=>a.active);if(Math.max(...n.map(a=>a.vertexStart+a.reservedVertexCount))>e)throw new Error(`BatchedMesh: Geometry vertex values are being used outside the range ${t}. Cannot shrink further.`);if(this.geometry.index&&Math.max(...n.map(l=>l.indexStart+l.reservedIndexCount))>t)throw new Error(`BatchedMesh: Geometry index values are being used outside the range ${t}. Cannot shrink further.`);const s=this.geometry;s.dispose(),this._maxVertexCount=e,this._maxIndexCount=t,this._geometryInitialized&&(this._geometryInitialized=!1,this.geometry=new Tn,this._initializeGeometry(s));const o=this.geometry;s.index&&r2(s.index.array,o.index.array);for(const a in s.attributes)r2(s.attributes[a].array,o.attributes[a].array)}raycast(e,t){const n=this._instanceInfo,r=this._geometryInfo,s=this.matrixWorld,o=this.geometry;Xs.material=this.material,Xs.geometry.index=o.index,Xs.geometry.attributes=o.attributes,Xs.geometry.boundingBox===null&&(Xs.geometry.boundingBox=new ls),Xs.geometry.boundingSphere===null&&(Xs.geometry.boundingSphere=new Kr);for(let a=0,l=n.length;a<l;a++){if(!n[a].visible||!n[a].active)continue;const u=n[a].geometryIndex,c=r[u];Xs.geometry.setDrawRange(c.start,c.count),this.getMatrixAt(a,Xs.matrixWorld).premultiply(s),this.getBoundingBoxAt(u,Xs.geometry.boundingBox),this.getBoundingSphereAt(u,Xs.geometry.boundingSphere),Xs.raycast(e,M7);for(let A=0,m=M7.length;A<m;A++){const _=M7[A];_.object=this,_.batchId=a,t.push(_)}M7.length=0}Xs.material=null,Xs.geometry.index=null,Xs.geometry.attributes={},Xs.geometry.setDrawRange(0,1/0)}copy(e){return super.copy(e),this.geometry=e.geometry.clone(),this.perObjectFrustumCulled=e.perObjectFrustumCulled,this.sortObjects=e.sortObjects,this.boundingBox=e.boundingBox!==null?e.boundingBox.clone():null,this.boundingSphere=e.boundingSphere!==null?e.boundingSphere.clone():null,this._geometryInfo=e._geometryInfo.map(t=>({...t,boundingBox:t.boundingBox!==null?t.boundingBox.clone():null,boundingSphere:t.boundingSphere!==null?t.boundingSphere.clone():null})),this._instanceInfo=e._instanceInfo.map(t=>({...t})),this._availableInstanceIds=e._availableInstanceIds.slice(),this._availableGeometryIds=e._availableGeometryIds.slice(),this._nextIndexStart=e._nextIndexStart,this._nextVertexStart=e._nextVertexStart,this._geometryCount=e._geometryCount,this._maxInstanceCount=e._maxInstanceCount,this._maxVertexCount=e._maxVertexCount,this._maxIndexCount=e._maxIndexCount,this._geometryInitialized=e._geometryInitialized,this._multiDrawCounts=e._multiDrawCounts.slice(),this._multiDrawStarts=e._multiDrawStarts.slice(),this._indirectTexture=e._indirectTexture.clone(),this._indirectTexture.image.data=this._indirectTexture.image.data.slice(),this._matricesTexture=e._matricesTexture.clone(),this._matricesTexture.image.data=this._matricesTexture.image.data.slice(),this._colorsTexture!==null&&(this._colorsTexture=e._colorsTexture.clone(),this._colorsTexture.image.data=this._colorsTexture.image.data.slice()),this}dispose(){this.geometry.dispose(),this._matricesTexture.dispose(),this._matricesTexture=null,this._indirectTexture.dispose(),this._indirectTexture=null,this._colorsTexture!==null&&(this._colorsTexture.dispose(),this._colorsTexture=null)}onBeforeRender(e,t,n,r,s){if(!this._visibilityChanged&&!this.perObjectFrustumCulled&&!this.sortObjects)return;const o=r.getIndex(),a=o===null?1:o.array.BYTES_PER_ELEMENT,l=this._instanceInfo,u=this._multiDrawStarts,c=this._multiDrawCounts,A=this._geometryInfo,m=this.perObjectFrustumCulled,_=this._indirectTexture,b=_.image.data,M=n.isArrayCamera?iU:wb;m&&!n.isArrayCamera&&(Do.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse).multiply(this.matrixWorld),wb.setFromProjectionMatrix(Do,n.coordinateSystem,n.reversedDepth));let w=0;if(this.sortObjects){Do.copy(this.matrixWorld).invert(),sh.setFromMatrixPosition(n.matrixWorld).applyMatrix4(Do),Mb.set(0,0,-1).transformDirection(n.matrixWorld).transformDirection(Do);for(let P=0,I=l.length;P<I;P++)if(l[P].visible&&l[P].active){const B=l[P].geometryIndex;this.getMatrixAt(P,Do),this.getBoundingSphereAt(B,i2).applyMatrix4(Do);let F=!1;if(m&&(F=!M.intersectsSphere(i2,n)),!F){const O=A[B],V=rU.subVectors(i2.center,sh).dot(Mb);Bp.push(O.start,O.count,V,P)}}const T=Bp.list,N=this.customSort;N===null?T.sort(s.transparent?eU:JF):N.call(this,T,n);for(let P=0,I=T.length;P<I;P++){const B=T[P];u[w]=B.start*a,c[w]=B.count,b[w]=B.index,w++}Bp.reset()}else for(let T=0,N=l.length;T<N;T++)if(l[T].visible&&l[T].active){const P=l[T].geometryIndex;let I=!1;if(m&&(this.getMatrixAt(T,Do),this.getBoundingSphereAt(P,i2).applyMatrix4(Do),I=!M.intersectsSphere(i2,n)),!I){const B=A[P];u[w]=B.start*a,c[w]=B.count,b[w]=T,w++}}_.needsUpdate=!0,this._multiDrawCount=w,this._visibilityChanged=!1}onBeforeShadow(e,t,n,r,s,o){this.onBeforeRender(e,null,r,s,o)}}class hs extends ws{constructor(e){super(),this.isLineBasicMaterial=!0,this.type="LineBasicMaterial",this.color=new Et(16777215),this.map=null,this.linewidth=1,this.linecap="round",this.linejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.linewidth=e.linewidth,this.linecap=e.linecap,this.linejoin=e.linejoin,this.fog=e.fog,this}}const ld=new J,ud=new J,Eb=new Wt,oh=new Ec,E7=new Kr,Fp=new J,Rb=new J;class D0 extends Ai{constructor(e=new Tn,t=new hs){super(),this.isLine=!0,this.type="Line",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[0];for(let r=1,s=t.count;r<s;r++)ld.fromBufferAttribute(t,r-1),ud.fromBufferAttribute(t,r),n[r]=n[r-1],n[r]+=ld.distanceTo(ud);e.setAttribute("lineDistance",new Ht(n,1))}else console.warn("THREE.Line.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Line.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),E7.copy(n.boundingSphere),E7.applyMatrix4(r),E7.radius+=s,e.ray.intersectsSphere(E7)===!1)return;Eb.copy(r).invert(),oh.copy(e.ray).applyMatrix4(Eb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=this.isLineSegments?2:1,c=n.index,m=n.attributes.position;if(c!==null){const _=Math.max(0,o.start),b=Math.min(c.count,o.start+o.count);for(let M=_,w=b-1;M<w;M+=u){const T=c.getX(M),N=c.getX(M+1),P=R7(this,e,oh,l,T,N,M);P&&t.push(P)}if(this.isLineLoop){const M=c.getX(b-1),w=c.getX(_),T=R7(this,e,oh,l,M,w,b-1);T&&t.push(T)}}else{const _=Math.max(0,o.start),b=Math.min(m.count,o.start+o.count);for(let M=_,w=b-1;M<w;M+=u){const T=R7(this,e,oh,l,M,M+1,M);T&&t.push(T)}if(this.isLineLoop){const M=R7(this,e,oh,l,b-1,_,b-1);M&&t.push(M)}}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function R7(i,e,t,n,r,s,o){const a=i.geometry.attributes.position;if(ld.fromBufferAttribute(a,r),ud.fromBufferAttribute(a,s),t.distanceSqToSegment(ld,ud,Fp,Rb)>n)return;Fp.applyMatrix4(i.matrixWorld);const u=e.ray.origin.distanceTo(Fp);if(!(u<e.near||u>e.far))return{distance:u,point:Rb.clone().applyMatrix4(i.matrixWorld),index:o,face:null,faceIndex:null,barycoord:null,object:i}}const Cb=new J,Pb=new J;class t0 extends D0{constructor(e,t){super(e,t),this.isLineSegments=!0,this.type="LineSegments"}computeLineDistances(){const e=this.geometry;if(e.index===null){const t=e.attributes.position,n=[];for(let r=0,s=t.count;r<s;r+=2)Cb.fromBufferAttribute(t,r),Pb.fromBufferAttribute(t,r+1),n[r]=r===0?0:n[r-1],n[r+1]=n[r]+Cb.distanceTo(Pb);e.setAttribute("lineDistance",new Ht(n,1))}else console.warn("THREE.LineSegments.computeLineDistances(): Computation only possible with non-indexed BufferGeometry.");return this}}class IE extends D0{constructor(e,t){super(e,t),this.isLineLoop=!0,this.type="LineLoop"}}class Q8 extends ws{constructor(e){super(),this.isPointsMaterial=!0,this.type="PointsMaterial",this.color=new Et(16777215),this.map=null,this.alphaMap=null,this.size=1,this.sizeAttenuation=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.alphaMap=e.alphaMap,this.size=e.size,this.sizeAttenuation=e.sizeAttenuation,this.fog=e.fog,this}}const Nb=new Wt,pg=new Ec,C7=new Kr,P7=new J;class uv extends Ai{constructor(e=new Tn,t=new Q8){super(),this.isPoints=!0,this.type="Points",this.geometry=e,this.material=t,this.morphTargetDictionary=void 0,this.morphTargetInfluences=void 0,this.updateMorphTargets()}copy(e,t){return super.copy(e,t),this.material=Array.isArray(e.material)?e.material.slice():e.material,this.geometry=e.geometry,this}raycast(e,t){const n=this.geometry,r=this.matrixWorld,s=e.params.Points.threshold,o=n.drawRange;if(n.boundingSphere===null&&n.computeBoundingSphere(),C7.copy(n.boundingSphere),C7.applyMatrix4(r),C7.radius+=s,e.ray.intersectsSphere(C7)===!1)return;Nb.copy(r).invert(),pg.copy(e.ray).applyMatrix4(Nb);const a=s/((this.scale.x+this.scale.y+this.scale.z)/3),l=a*a,u=n.index,A=n.attributes.position;if(u!==null){const m=Math.max(0,o.start),_=Math.min(u.count,o.start+o.count);for(let b=m,M=_;b<M;b++){const w=u.getX(b);P7.fromBufferAttribute(A,w),Ib(P7,w,l,r,e,t,this)}}else{const m=Math.max(0,o.start),_=Math.min(A.count,o.start+o.count);for(let b=m,M=_;b<M;b++)P7.fromBufferAttribute(A,b),Ib(P7,b,l,r,e,t,this)}}updateMorphTargets(){const t=this.geometry.morphAttributes,n=Object.keys(t);if(n.length>0){const r=t[n[0]];if(r!==void 0){this.morphTargetInfluences=[],this.morphTargetDictionary={};for(let s=0,o=r.length;s<o;s++){const a=r[s].name||String(s);this.morphTargetInfluences.push(0),this.morphTargetDictionary[a]=s}}}}}function Ib(i,e,t,n,r,s,o){const a=pg.distanceSqToPoint(i);if(a<t){const l=new J;pg.closestPointToPoint(i,l),l.applyMatrix4(n);const u=r.ray.origin.distanceTo(l);if(u<r.near||u>r.far)return;s.push({distance:u,distanceToRay:Math.sqrt(a),point:l,index:e,face:null,faceIndex:null,barycoord:null,object:o})}}class LE extends ur{constructor(e,t,n,r,s=Wi,o=Wi,a,l,u){super(e,t,n,r,s,o,a,l,u),this.isVideoTexture=!0,this.generateMipmaps=!1,this._requestVideoFrameCallbackId=0;const c=this;function A(){c.needsUpdate=!0,c._requestVideoFrameCallbackId=e.requestVideoFrameCallback(A)}"requestVideoFrameCallback"in e&&(this._requestVideoFrameCallbackId=e.requestVideoFrameCallback(A))}clone(){return new this.constructor(this.image).copy(this)}update(){const e=this.image;"requestVideoFrameCallback"in e===!1&&e.readyState>=e.HAVE_CURRENT_DATA&&(this.needsUpdate=!0)}dispose(){this._requestVideoFrameCallbackId!==0&&this.source.data.cancelVideoFrameCallback(this._requestVideoFrameCallbackId),super.dispose()}}class oU extends LE{constructor(e,t,n,r,s,o,a,l){super({},e,t,n,r,s,o,a,l),this.isVideoFrameTexture=!0}update(){}clone(){return new this.constructor().copy(this)}setFrame(e){this.image=e,this.needsUpdate=!0}}class cv extends ur{constructor(e,t){super({width:e,height:t}),this.isFramebufferTexture=!0,this.magFilter=qi,this.minFilter=qi,this.generateMipmaps=!1,this.needsUpdate=!0}}class F9 extends ur{constructor(e,t,n,r,s,o,a,l,u,c,A,m){super(null,o,a,l,u,c,r,s,A,m),this.isCompressedTexture=!0,this.image={width:t,height:n},this.mipmaps=e,this.flipY=!1,this.generateMipmaps=!1}}class aU extends F9{constructor(e,t,n,r,s,o){super(e,t,n,s,o),this.isCompressedArrayTexture=!0,this.image.depth=r,this.wrapR=xo,this.layerUpdates=new Set}addLayerUpdate(e){this.layerUpdates.add(e)}clearLayerUpdates(){this.layerUpdates.clear()}}class lU extends F9{constructor(e,t,n){super(void 0,e[0].width,e[0].height,t,n,_a),this.isCompressedCubeTexture=!0,this.isCubeTexture=!0,this.image=e}}class uU extends ur{constructor(e,t,n,r,s,o,a,l,u){super(e,t,n,r,s,o,a,l,u),this.isCanvasTexture=!0,this.needsUpdate=!0}}class Qo extends ur{constructor(e,t,n=Oi,r,s,o,a=qi,l=qi,u,c=Wo,A=1){if(c!==Wo&&c!==jo)throw new Error("DepthTexture format must be either THREE.DepthFormat or THREE.DepthStencilFormat");const m={width:e,height:t,depth:A};super(m,r,s,o,a,l,c,n,u),this.isDepthTexture=!0,this.flipY=!1,this.generateMipmaps=!1,this.compareFunction=null}copy(e){return super.copy(e),this.source=new iu(Object.assign({},e.image)),this.compareFunction=e.compareFunction,this}toJSON(e){const t=super.toJSON(e);return this.compareFunction!==null&&(t.compareFunction=this.compareFunction),t}}class U9 extends Tn{constructor(e=1,t=1,n=4,r=8,s=1){super(),this.type="CapsuleGeometry",this.parameters={radius:e,height:t,capSegments:n,radialSegments:r,heightSegments:s},t=Math.max(0,t),n=Math.max(1,Math.floor(n)),r=Math.max(3,Math.floor(r)),s=Math.max(1,Math.floor(s));const o=[],a=[],l=[],u=[],c=t/2,A=Math.PI/2*e,m=t,_=2*A+m,b=n*2+s,M=r+1,w=new J,T=new J;for(let N=0;N<=b;N++){let P=0,I=0,B=0,F=0;if(N<=n){const U=N/n,z=U*Math.PI/2;I=-c-e*Math.cos(z),B=e*Math.sin(z),F=-e*Math.cos(z),P=U*A}else if(N<=n+s){const U=(N-n)/s;I=-c+U*t,B=e,F=0,P=A+U*m}else{const U=(N-n-s)/n,z=U*Math.PI/2;I=c+e*Math.sin(z),B=e*Math.cos(z),F=e*Math.sin(z),P=A+m+U*A}const O=Math.max(0,Math.min(1,P/_));let V=0;N===0?V=.5/r:N===b&&(V=-.5/r);for(let U=0;U<=r;U++){const z=U/r,H=z*Math.PI*2,Q=Math.sin(H),Y=Math.cos(H);T.x=-B*Y,T.y=I,T.z=B*Q,a.push(T.x,T.y,T.z),w.set(-B*Y,F,B*Q),w.normalize(),l.push(w.x,w.y,w.z),u.push(z+V,O)}if(N>0){const U=(N-1)*M;for(let z=0;z<r;z++){const H=U+z,Q=U+z+1,Y=N*M+z,ne=N*M+z+1;o.push(H,Q,Y),o.push(Q,ne,Y)}}}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new U9(e.radius,e.height,e.capSegments,e.radialSegments,e.heightSegments)}}class c5 extends Tn{constructor(e=1,t=32,n=0,r=Math.PI*2){super(),this.type="CircleGeometry",this.parameters={radius:e,segments:t,thetaStart:n,thetaLength:r},t=Math.max(3,t);const s=[],o=[],a=[],l=[],u=new J,c=new Ge;o.push(0,0,0),a.push(0,0,1),l.push(.5,.5);for(let A=0,m=3;A<=t;A++,m+=3){const _=n+A/t*r;u.x=e*Math.cos(_),u.y=e*Math.sin(_),o.push(u.x,u.y,u.z),a.push(0,0,1),c.x=(o[m]/e+1)/2,c.y=(o[m+1]/e+1)/2,l.push(c.x,c.y)}for(let A=1;A<=t;A++)s.push(A,A+1,0);this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("normal",new Ht(a,3)),this.setAttribute("uv",new Ht(l,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new c5(e.radius,e.segments,e.thetaStart,e.thetaLength)}}class Cc extends Tn{constructor(e=1,t=1,n=1,r=32,s=1,o=!1,a=0,l=Math.PI*2){super(),this.type="CylinderGeometry",this.parameters={radiusTop:e,radiusBottom:t,height:n,radialSegments:r,heightSegments:s,openEnded:o,thetaStart:a,thetaLength:l};const u=this;r=Math.floor(r),s=Math.floor(s);const c=[],A=[],m=[],_=[];let b=0;const M=[],w=n/2;let T=0;N(),o===!1&&(e>0&&P(!0),t>0&&P(!1)),this.setIndex(c),this.setAttribute("position",new Ht(A,3)),this.setAttribute("normal",new Ht(m,3)),this.setAttribute("uv",new Ht(_,2));function N(){const I=new J,B=new J;let F=0;const O=(t-e)/n;for(let V=0;V<=s;V++){const U=[],z=V/s,H=z*(t-e)+e;for(let Q=0;Q<=r;Q++){const Y=Q/r,ne=Y*l+a,ee=Math.sin(ne),se=Math.cos(ne);B.x=H*ee,B.y=-z*n+w,B.z=H*se,A.push(B.x,B.y,B.z),I.set(ee,O,se).normalize(),m.push(I.x,I.y,I.z),_.push(Y,1-z),U.push(b++)}M.push(U)}for(let V=0;V<r;V++)for(let U=0;U<s;U++){const z=M[U][V],H=M[U+1][V],Q=M[U+1][V+1],Y=M[U][V+1];(e>0||U!==0)&&(c.push(z,H,Y),F+=3),(t>0||U!==s-1)&&(c.push(H,Q,Y),F+=3)}u.addGroup(T,F,0),T+=F}function P(I){const B=b,F=new Ge,O=new J;let V=0;const U=I===!0?e:t,z=I===!0?1:-1;for(let Q=1;Q<=r;Q++)A.push(0,w*z,0),m.push(0,z,0),_.push(.5,.5),b++;const H=b;for(let Q=0;Q<=r;Q++){const ne=Q/r*l+a,ee=Math.cos(ne),se=Math.sin(ne);O.x=U*se,O.y=w*z,O.z=U*ee,A.push(O.x,O.y,O.z),m.push(0,z,0),F.x=ee*.5+.5,F.y=se*.5*z+.5,_.push(F.x,F.y),b++}for(let Q=0;Q<r;Q++){const Y=B+Q,ne=H+Q;I===!0?c.push(ne,ne+1,Y):c.push(ne+1,ne,Y),V+=3}u.addGroup(T,V,I===!0?1:2),T+=V}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Cc(e.radiusTop,e.radiusBottom,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class Y8 extends Cc{constructor(e=1,t=1,n=32,r=1,s=!1,o=0,a=Math.PI*2){super(0,e,t,n,r,s,o,a),this.type="ConeGeometry",this.parameters={radius:e,height:t,radialSegments:n,heightSegments:r,openEnded:s,thetaStart:o,thetaLength:a}}static fromJSON(e){return new Y8(e.radius,e.height,e.radialSegments,e.heightSegments,e.openEnded,e.thetaStart,e.thetaLength)}}class xu extends Tn{constructor(e=[],t=[],n=1,r=0){super(),this.type="PolyhedronGeometry",this.parameters={vertices:e,indices:t,radius:n,detail:r};const s=[],o=[];a(r),u(n),c(),this.setAttribute("position",new Ht(s,3)),this.setAttribute("normal",new Ht(s.slice(),3)),this.setAttribute("uv",new Ht(o,2)),r===0?this.computeVertexNormals():this.normalizeNormals();function a(N){const P=new J,I=new J,B=new J;for(let F=0;F<t.length;F+=3)_(t[F+0],P),_(t[F+1],I),_(t[F+2],B),l(P,I,B,N)}function l(N,P,I,B){const F=B+1,O=[];for(let V=0;V<=F;V++){O[V]=[];const U=N.clone().lerp(I,V/F),z=P.clone().lerp(I,V/F),H=F-V;for(let Q=0;Q<=H;Q++)Q===0&&V===F?O[V][Q]=U:O[V][Q]=U.clone().lerp(z,Q/H)}for(let V=0;V<F;V++)for(let U=0;U<2*(F-V)-1;U++){const z=Math.floor(U/2);U%2===0?(m(O[V][z+1]),m(O[V+1][z]),m(O[V][z])):(m(O[V][z+1]),m(O[V+1][z+1]),m(O[V+1][z]))}}function u(N){const P=new J;for(let I=0;I<s.length;I+=3)P.x=s[I+0],P.y=s[I+1],P.z=s[I+2],P.normalize().multiplyScalar(N),s[I+0]=P.x,s[I+1]=P.y,s[I+2]=P.z}function c(){const N=new J;for(let P=0;P<s.length;P+=3){N.x=s[P+0],N.y=s[P+1],N.z=s[P+2];const I=w(N)/2/Math.PI+.5,B=T(N)/Math.PI+.5;o.push(I,1-B)}b(),A()}function A(){for(let N=0;N<o.length;N+=6){const P=o[N+0],I=o[N+2],B=o[N+4],F=Math.max(P,I,B),O=Math.min(P,I,B);F>.9&&O<.1&&(P<.2&&(o[N+0]+=1),I<.2&&(o[N+2]+=1),B<.2&&(o[N+4]+=1))}}function m(N){s.push(N.x,N.y,N.z)}function _(N,P){const I=N*3;P.x=e[I+0],P.y=e[I+1],P.z=e[I+2]}function b(){const N=new J,P=new J,I=new J,B=new J,F=new Ge,O=new Ge,V=new Ge;for(let U=0,z=0;U<s.length;U+=9,z+=6){N.set(s[U+0],s[U+1],s[U+2]),P.set(s[U+3],s[U+4],s[U+5]),I.set(s[U+6],s[U+7],s[U+8]),F.set(o[z+0],o[z+1]),O.set(o[z+2],o[z+3]),V.set(o[z+4],o[z+5]),B.copy(N).add(P).add(I).divideScalar(3);const H=w(B);M(F,z+0,N,H),M(O,z+2,P,H),M(V,z+4,I,H)}}function M(N,P,I,B){B<0&&N.x===1&&(o[P]=N.x-1),I.x===0&&I.z===0&&(o[P]=B/2/Math.PI+.5)}function w(N){return Math.atan2(N.z,-N.x)}function T(N){return Math.atan2(-N.y,Math.sqrt(N.x*N.x+N.z*N.z))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new xu(e.vertices,e.indices,e.radius,e.details)}}class O9 extends xu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=1/n,s=[-1,-1,-1,-1,-1,1,-1,1,-1,-1,1,1,1,-1,-1,1,-1,1,1,1,-1,1,1,1,0,-r,-n,0,-r,n,0,r,-n,0,r,n,-r,-n,0,-r,n,0,r,-n,0,r,n,0,-n,0,-r,n,0,-r,-n,0,r,n,0,r],o=[3,11,7,3,7,15,3,15,13,7,19,17,7,17,6,7,6,15,17,4,8,17,8,10,17,10,6,8,0,16,8,16,2,8,2,10,0,12,1,0,1,18,0,18,16,6,10,2,6,2,13,6,13,15,2,16,18,2,18,3,2,3,13,18,1,9,18,9,11,18,11,3,4,14,12,4,12,0,4,0,8,11,9,5,11,5,19,11,19,7,19,5,14,19,14,4,19,4,17,1,12,14,1,14,5,1,5,9];super(s,o,e,t),this.type="DodecahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new O9(e.radius,e.detail)}}const N7=new J,I7=new J,Up=new J,L7=new Oo;class DE extends Tn{constructor(e=null,t=1){if(super(),this.type="EdgesGeometry",this.parameters={geometry:e,thresholdAngle:t},e!==null){const r=Math.pow(10,4),s=Math.cos(G2*t),o=e.getIndex(),a=e.getAttribute("position"),l=o?o.count:a.count,u=[0,0,0],c=["a","b","c"],A=new Array(3),m={},_=[];for(let b=0;b<l;b+=3){o?(u[0]=o.getX(b),u[1]=o.getX(b+1),u[2]=o.getX(b+2)):(u[0]=b,u[1]=b+1,u[2]=b+2);const{a:M,b:w,c:T}=L7;if(M.fromBufferAttribute(a,u[0]),w.fromBufferAttribute(a,u[1]),T.fromBufferAttribute(a,u[2]),L7.getNormal(Up),A[0]=`${Math.round(M.x*r)},${Math.round(M.y*r)},${Math.round(M.z*r)}`,A[1]=`${Math.round(w.x*r)},${Math.round(w.y*r)},${Math.round(w.z*r)}`,A[2]=`${Math.round(T.x*r)},${Math.round(T.y*r)},${Math.round(T.z*r)}`,!(A[0]===A[1]||A[1]===A[2]||A[2]===A[0]))for(let N=0;N<3;N++){const P=(N+1)%3,I=A[N],B=A[P],F=L7[c[N]],O=L7[c[P]],V=`${I}_${B}`,U=`${B}_${I}`;U in m&&m[U]?(Up.dot(m[U].normal)<=s&&(_.push(F.x,F.y,F.z),_.push(O.x,O.y,O.z)),m[U]=null):V in m||(m[V]={index0:u[N],index1:u[P],normal:Up.clone()})}}for(const b in m)if(m[b]){const{index0:M,index1:w}=m[b];N7.fromBufferAttribute(a,M),I7.fromBufferAttribute(a,w),_.push(N7.x,N7.y,N7.z),_.push(I7.x,I7.y,I7.z)}this.setAttribute("position",new Ht(_,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}class n0{constructor(){this.type="Curve",this.arcLengthDivisions=200,this.needsUpdate=!1,this.cacheArcLengths=null}getPoint(){console.warn("THREE.Curve: .getPoint() not implemented.")}getPointAt(e,t){const n=this.getUtoTmapping(e);return this.getPoint(n,t)}getPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return t}getSpacedPoints(e=5){const t=[];for(let n=0;n<=e;n++)t.push(this.getPointAt(n/e));return t}getLength(){const e=this.getLengths();return e[e.length-1]}getLengths(e=this.arcLengthDivisions){if(this.cacheArcLengths&&this.cacheArcLengths.length===e+1&&!this.needsUpdate)return this.cacheArcLengths;this.needsUpdate=!1;const t=[];let n,r=this.getPoint(0),s=0;t.push(0);for(let o=1;o<=e;o++)n=this.getPoint(o/e),s+=n.distanceTo(r),t.push(s),r=n;return this.cacheArcLengths=t,t}updateArcLengths(){this.needsUpdate=!0,this.getLengths()}getUtoTmapping(e,t=null){const n=this.getLengths();let r=0;const s=n.length;let o;t?o=t:o=e*n[s-1];let a=0,l=s-1,u;for(;a<=l;)if(r=Math.floor(a+(l-a)/2),u=n[r]-o,u<0)a=r+1;else if(u>0)l=r-1;else{l=r;break}if(r=l,n[r]===o)return r/(s-1);const c=n[r],m=n[r+1]-c,_=(o-c)/m;return(r+_)/(s-1)}getTangent(e,t){let r=e-1e-4,s=e+1e-4;r<0&&(r=0),s>1&&(s=1);const o=this.getPoint(r),a=this.getPoint(s),l=t||(o.isVector2?new Ge:new J);return l.copy(a).sub(o).normalize(),l}getTangentAt(e,t){const n=this.getUtoTmapping(e);return this.getTangent(n,t)}computeFrenetFrames(e,t=!1){const n=new J,r=[],s=[],o=[],a=new J,l=new Wt;for(let _=0;_<=e;_++){const b=_/e;r[_]=this.getTangentAt(b,new J)}s[0]=new J,o[0]=new J;let u=Number.MAX_VALUE;const c=Math.abs(r[0].x),A=Math.abs(r[0].y),m=Math.abs(r[0].z);c<=u&&(u=c,n.set(1,0,0)),A<=u&&(u=A,n.set(0,1,0)),m<=u&&n.set(0,0,1),a.crossVectors(r[0],n).normalize(),s[0].crossVectors(r[0],a),o[0].crossVectors(r[0],s[0]);for(let _=1;_<=e;_++){if(s[_]=s[_-1].clone(),o[_]=o[_-1].clone(),a.crossVectors(r[_-1],r[_]),a.length()>Number.EPSILON){a.normalize();const b=Math.acos(Dn(r[_-1].dot(r[_]),-1,1));s[_].applyMatrix4(l.makeRotationAxis(a,b))}o[_].crossVectors(r[_],s[_])}if(t===!0){let _=Math.acos(Dn(s[0].dot(s[e]),-1,1));_/=e,r[0].dot(a.crossVectors(s[0],s[e]))>0&&(_=-_);for(let b=1;b<=e;b++)s[b].applyMatrix4(l.makeRotationAxis(r[b],_*b)),o[b].crossVectors(r[b],s[b])}return{tangents:r,normals:s,binormals:o}}clone(){return new this.constructor().copy(this)}copy(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}toJSON(){const e={metadata:{version:4.7,type:"Curve",generator:"Curve.toJSON"}};return e.arcLengthDivisions=this.arcLengthDivisions,e.type=this.type,e}fromJSON(e){return this.arcLengthDivisions=e.arcLengthDivisions,this}}class k9 extends n0{constructor(e=0,t=0,n=1,r=1,s=0,o=Math.PI*2,a=!1,l=0){super(),this.isEllipseCurve=!0,this.type="EllipseCurve",this.aX=e,this.aY=t,this.xRadius=n,this.yRadius=r,this.aStartAngle=s,this.aEndAngle=o,this.aClockwise=a,this.aRotation=l}getPoint(e,t=new Ge){const n=t,r=Math.PI*2;let s=this.aEndAngle-this.aStartAngle;const o=Math.abs(s)<Number.EPSILON;for(;s<0;)s+=r;for(;s>r;)s-=r;s<Number.EPSILON&&(o?s=0:s=r),this.aClockwise===!0&&!o&&(s===r?s=-r:s=s-r);const a=this.aStartAngle+e*s;let l=this.aX+this.xRadius*Math.cos(a),u=this.aY+this.yRadius*Math.sin(a);if(this.aRotation!==0){const c=Math.cos(this.aRotation),A=Math.sin(this.aRotation),m=l-this.aX,_=u-this.aY;l=m*c-_*A+this.aX,u=m*A+_*c+this.aY}return n.set(l,u)}copy(e){return super.copy(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}toJSON(){const e=super.toJSON();return e.aX=this.aX,e.aY=this.aY,e.xRadius=this.xRadius,e.yRadius=this.yRadius,e.aStartAngle=this.aStartAngle,e.aEndAngle=this.aEndAngle,e.aClockwise=this.aClockwise,e.aRotation=this.aRotation,e}fromJSON(e){return super.fromJSON(e),this.aX=e.aX,this.aY=e.aY,this.xRadius=e.xRadius,this.yRadius=e.yRadius,this.aStartAngle=e.aStartAngle,this.aEndAngle=e.aEndAngle,this.aClockwise=e.aClockwise,this.aRotation=e.aRotation,this}}class BE extends k9{constructor(e,t,n,r,s,o){super(e,t,n,n,r,s,o),this.isArcCurve=!0,this.type="ArcCurve"}}function hv(){let i=0,e=0,t=0,n=0;function r(s,o,a,l){i=s,e=a,t=-3*s+3*o-2*a-l,n=2*s-2*o+a+l}return{initCatmullRom:function(s,o,a,l,u){r(o,a,u*(a-s),u*(l-o))},initNonuniformCatmullRom:function(s,o,a,l,u,c,A){let m=(o-s)/u-(a-s)/(u+c)+(a-o)/c,_=(a-o)/c-(l-o)/(c+A)+(l-a)/A;m*=c,_*=c,r(o,a,m,_)},calc:function(s){const o=s*s,a=o*s;return i+e*s+t*o+n*a}}}const D7=new J,Op=new hv,kp=new hv,Vp=new hv;class FE extends n0{constructor(e=[],t=!1,n="centripetal",r=.5){super(),this.isCatmullRomCurve3=!0,this.type="CatmullRomCurve3",this.points=e,this.closed=t,this.curveType=n,this.tension=r}getPoint(e,t=new J){const n=t,r=this.points,s=r.length,o=(s-(this.closed?0:1))*e;let a=Math.floor(o),l=o-a;this.closed?a+=a>0?0:(Math.floor(Math.abs(a)/s)+1)*s:l===0&&a===s-1&&(a=s-2,l=1);let u,c;this.closed||a>0?u=r[(a-1)%s]:(D7.subVectors(r[0],r[1]).add(r[0]),u=D7);const A=r[a%s],m=r[(a+1)%s];if(this.closed||a+2<s?c=r[(a+2)%s]:(D7.subVectors(r[s-1],r[s-2]).add(r[s-1]),c=D7),this.curveType==="centripetal"||this.curveType==="chordal"){const _=this.curveType==="chordal"?.5:.25;let b=Math.pow(u.distanceToSquared(A),_),M=Math.pow(A.distanceToSquared(m),_),w=Math.pow(m.distanceToSquared(c),_);M<1e-4&&(M=1),b<1e-4&&(b=M),w<1e-4&&(w=M),Op.initNonuniformCatmullRom(u.x,A.x,m.x,c.x,b,M,w),kp.initNonuniformCatmullRom(u.y,A.y,m.y,c.y,b,M,w),Vp.initNonuniformCatmullRom(u.z,A.z,m.z,c.z,b,M,w)}else this.curveType==="catmullrom"&&(Op.initCatmullRom(u.x,A.x,m.x,c.x,this.tension),kp.initCatmullRom(u.y,A.y,m.y,c.y,this.tension),Vp.initCatmullRom(u.z,A.z,m.z,c.z,this.tension));return n.set(Op.calc(l),kp.calc(l),Vp.calc(l)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e.closed=this.closed,e.curveType=this.curveType,e.tension=this.tension,e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new J().fromArray(r))}return this.closed=e.closed,this.curveType=e.curveType,this.tension=e.tension,this}}function Lb(i,e,t,n,r){const s=(n-e)*.5,o=(r-t)*.5,a=i*i,l=i*a;return(2*t-2*n+s+o)*l+(-3*t+3*n-2*s-o)*a+s*i+t}function cU(i,e){const t=1-i;return t*t*e}function hU(i,e){return 2*(1-i)*i*e}function fU(i,e){return i*i*e}function Xh(i,e,t,n){return cU(i,e)+hU(i,t)+fU(i,n)}function dU(i,e){const t=1-i;return t*t*t*e}function AU(i,e){const t=1-i;return 3*t*t*i*e}function pU(i,e){return 3*(1-i)*i*i*e}function mU(i,e){return i*i*i*e}function Qh(i,e,t,n,r){return dU(i,e)+AU(i,t)+pU(i,n)+mU(i,r)}class fv extends n0{constructor(e=new Ge,t=new Ge,n=new Ge,r=new Ge){super(),this.isCubicBezierCurve=!0,this.type="CubicBezierCurve",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new Ge){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Qh(e,r.x,s.x,o.x,a.x),Qh(e,r.y,s.y,o.y,a.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class dv extends n0{constructor(e=new J,t=new J,n=new J,r=new J){super(),this.isCubicBezierCurve3=!0,this.type="CubicBezierCurve3",this.v0=e,this.v1=t,this.v2=n,this.v3=r}getPoint(e,t=new J){const n=t,r=this.v0,s=this.v1,o=this.v2,a=this.v3;return n.set(Qh(e,r.x,s.x,o.x,a.x),Qh(e,r.y,s.y,o.y,a.y),Qh(e,r.z,s.z,o.z,a.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this.v3.copy(e.v3),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e.v3=this.v3.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this.v3.fromArray(e.v3),this}}class Av extends n0{constructor(e=new Ge,t=new Ge){super(),this.isLineCurve=!0,this.type="LineCurve",this.v1=e,this.v2=t}getPoint(e,t=new Ge){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new Ge){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class UE extends n0{constructor(e=new J,t=new J){super(),this.isLineCurve3=!0,this.type="LineCurve3",this.v1=e,this.v2=t}getPoint(e,t=new J){const n=t;return e===1?n.copy(this.v2):(n.copy(this.v2).sub(this.v1),n.multiplyScalar(e).add(this.v1)),n}getPointAt(e,t){return this.getPoint(e,t)}getTangent(e,t=new J){return t.subVectors(this.v2,this.v1).normalize()}getTangentAt(e,t){return this.getTangent(e,t)}copy(e){return super.copy(e),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class pv extends n0{constructor(e=new Ge,t=new Ge,n=new Ge){super(),this.isQuadraticBezierCurve=!0,this.type="QuadraticBezierCurve",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new Ge){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Xh(e,r.x,s.x,o.x),Xh(e,r.y,s.y,o.y)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class mv extends n0{constructor(e=new J,t=new J,n=new J){super(),this.isQuadraticBezierCurve3=!0,this.type="QuadraticBezierCurve3",this.v0=e,this.v1=t,this.v2=n}getPoint(e,t=new J){const n=t,r=this.v0,s=this.v1,o=this.v2;return n.set(Xh(e,r.x,s.x,o.x),Xh(e,r.y,s.y,o.y),Xh(e,r.z,s.z,o.z)),n}copy(e){return super.copy(e),this.v0.copy(e.v0),this.v1.copy(e.v1),this.v2.copy(e.v2),this}toJSON(){const e=super.toJSON();return e.v0=this.v0.toArray(),e.v1=this.v1.toArray(),e.v2=this.v2.toArray(),e}fromJSON(e){return super.fromJSON(e),this.v0.fromArray(e.v0),this.v1.fromArray(e.v1),this.v2.fromArray(e.v2),this}}class gv extends n0{constructor(e=[]){super(),this.isSplineCurve=!0,this.type="SplineCurve",this.points=e}getPoint(e,t=new Ge){const n=t,r=this.points,s=(r.length-1)*e,o=Math.floor(s),a=s-o,l=r[o===0?o:o-1],u=r[o],c=r[o>r.length-2?r.length-1:o+1],A=r[o>r.length-3?r.length-1:o+2];return n.set(Lb(a,l.x,u.x,c.x,A.x),Lb(a,l.y,u.y,c.y,A.y)),n}copy(e){super.copy(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.points=[];for(let t=0,n=this.points.length;t<n;t++){const r=this.points[t];e.points.push(r.toArray())}return e}fromJSON(e){super.fromJSON(e),this.points=[];for(let t=0,n=e.points.length;t<n;t++){const r=e.points[t];this.points.push(new Ge().fromArray(r))}return this}}var cd=Object.freeze({__proto__:null,ArcCurve:BE,CatmullRomCurve3:FE,CubicBezierCurve:fv,CubicBezierCurve3:dv,EllipseCurve:k9,LineCurve:Av,LineCurve3:UE,QuadraticBezierCurve:pv,QuadraticBezierCurve3:mv,SplineCurve:gv});class OE extends n0{constructor(){super(),this.type="CurvePath",this.curves=[],this.autoClose=!1}add(e){this.curves.push(e)}closePath(){const e=this.curves[0].getPoint(0),t=this.curves[this.curves.length-1].getPoint(1);if(!e.equals(t)){const n=e.isVector2===!0?"LineCurve":"LineCurve3";this.curves.push(new cd[n](t,e))}return this}getPoint(e,t){const n=e*this.getLength(),r=this.getCurveLengths();let s=0;for(;s<r.length;){if(r[s]>=n){const o=r[s]-n,a=this.curves[s],l=a.getLength(),u=l===0?0:1-o/l;return a.getPointAt(u,t)}s++}return null}getLength(){const e=this.getCurveLengths();return e[e.length-1]}updateArcLengths(){this.needsUpdate=!0,this.cacheLengths=null,this.getCurveLengths()}getCurveLengths(){if(this.cacheLengths&&this.cacheLengths.length===this.curves.length)return this.cacheLengths;const e=[];let t=0;for(let n=0,r=this.curves.length;n<r;n++)t+=this.curves[n].getLength(),e.push(t);return this.cacheLengths=e,e}getSpacedPoints(e=40){const t=[];for(let n=0;n<=e;n++)t.push(this.getPoint(n/e));return this.autoClose&&t.push(t[0]),t}getPoints(e=12){const t=[];let n;for(let r=0,s=this.curves;r<s.length;r++){const o=s[r],a=o.isEllipseCurve?e*2:o.isLineCurve||o.isLineCurve3?1:o.isSplineCurve?e*o.points.length:e,l=o.getPoints(a);for(let u=0;u<l.length;u++){const c=l[u];n&&n.equals(c)||(t.push(c),n=c)}}return this.autoClose&&t.length>1&&!t[t.length-1].equals(t[0])&&t.push(t[0]),t}copy(e){super.copy(e),this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(r.clone())}return this.autoClose=e.autoClose,this}toJSON(){const e=super.toJSON();e.autoClose=this.autoClose,e.curves=[];for(let t=0,n=this.curves.length;t<n;t++){const r=this.curves[t];e.curves.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.autoClose=e.autoClose,this.curves=[];for(let t=0,n=e.curves.length;t<n;t++){const r=e.curves[t];this.curves.push(new cd[r.type]().fromJSON(r))}return this}}let hd=class extends OE{constructor(e){super(),this.type="Path",this.currentPoint=new Ge,e&&this.setFromPoints(e)}setFromPoints(e){this.moveTo(e[0].x,e[0].y);for(let t=1,n=e.length;t<n;t++)this.lineTo(e[t].x,e[t].y);return this}moveTo(e,t){return this.currentPoint.set(e,t),this}lineTo(e,t){const n=new Av(this.currentPoint.clone(),new Ge(e,t));return this.curves.push(n),this.currentPoint.set(e,t),this}quadraticCurveTo(e,t,n,r){const s=new pv(this.currentPoint.clone(),new Ge(e,t),new Ge(n,r));return this.curves.push(s),this.currentPoint.set(n,r),this}bezierCurveTo(e,t,n,r,s,o){const a=new fv(this.currentPoint.clone(),new Ge(e,t),new Ge(n,r),new Ge(s,o));return this.curves.push(a),this.currentPoint.set(s,o),this}splineThru(e){const t=[this.currentPoint.clone()].concat(e),n=new gv(t);return this.curves.push(n),this.currentPoint.copy(e[e.length-1]),this}arc(e,t,n,r,s,o){const a=this.currentPoint.x,l=this.currentPoint.y;return this.absarc(e+a,t+l,n,r,s,o),this}absarc(e,t,n,r,s,o){return this.absellipse(e,t,n,n,r,s,o),this}ellipse(e,t,n,r,s,o,a,l){const u=this.currentPoint.x,c=this.currentPoint.y;return this.absellipse(e+u,t+c,n,r,s,o,a,l),this}absellipse(e,t,n,r,s,o,a,l){const u=new k9(e,t,n,r,s,o,a,l);if(this.curves.length>0){const A=u.getPoint(0);A.equals(this.currentPoint)||this.lineTo(A.x,A.y)}this.curves.push(u);const c=u.getPoint(1);return this.currentPoint.copy(c),this}copy(e){return super.copy(e),this.currentPoint.copy(e.currentPoint),this}toJSON(){const e=super.toJSON();return e.currentPoint=this.currentPoint.toArray(),e}fromJSON(e){return super.fromJSON(e),this.currentPoint.fromArray(e.currentPoint),this}};class H2 extends hd{constructor(e){super(e),this.uuid=va(),this.type="Shape",this.holes=[]}getPointsHoles(e){const t=[];for(let n=0,r=this.holes.length;n<r;n++)t[n]=this.holes[n].getPoints(e);return t}extractPoints(e){return{shape:this.getPoints(e),holes:this.getPointsHoles(e)}}copy(e){super.copy(e),this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(r.clone())}return this}toJSON(){const e=super.toJSON();e.uuid=this.uuid,e.holes=[];for(let t=0,n=this.holes.length;t<n;t++){const r=this.holes[t];e.holes.push(r.toJSON())}return e}fromJSON(e){super.fromJSON(e),this.uuid=e.uuid,this.holes=[];for(let t=0,n=e.holes.length;t<n;t++){const r=e.holes[t];this.holes.push(new hd().fromJSON(r))}return this}}function gU(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=kE(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(n&&(s=bU(i,e,s,t)),i.length>80*t){a=1/0,l=1/0;let c=-1/0,A=-1/0;for(let m=t;m<r;m+=t){const _=i[m],b=i[m+1];_<a&&(a=_),b<l&&(l=b),_>c&&(c=_),b>A&&(A=b)}u=Math.max(c-a,A-l),u=u!==0?32767/u:0}return l8(s,o,t,a,l,u,0),o}function kE(i,e,t,n,r){let s;if(r===LU(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=Db(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=Db(o/n|0,i[o],i[o+1],s);return s&&W4(s,s.next)&&(c8(s),s=s.next),s}function yc(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(W4(t,t.next)||yr(t.prev,t,t.next)===0)){if(c8(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function l8(i,e,t,n,r,s,o){if(!i)return;!o&&s&&EU(i,n,r,s);let a=i;for(;i.prev!==i.next;){const l=i.prev,u=i.next;if(s?vU(i,n,r,s):yU(i)){e.push(l.i,i.i,u.i),c8(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=_U(yc(i),e),l8(i,e,t,n,r,s,2)):o===2&&xU(i,e,t,n,r,s):l8(yc(i),e,t,n,r,s,1);break}}}function yU(i){const e=i.prev,t=i,n=i.next;if(yr(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,c=Math.min(r,s,o),A=Math.min(a,l,u),m=Math.max(r,s,o),_=Math.max(a,l,u);let b=n.next;for(;b!==e;){if(b.x>=c&&b.x<=m&&b.y>=A&&b.y<=_&&Lh(r,a,s,l,o,u,b.x,b.y)&&yr(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function vU(i,e,t,n){const r=i.prev,s=i,o=i.next;if(yr(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,c=r.y,A=s.y,m=o.y,_=Math.min(a,l,u),b=Math.min(c,A,m),M=Math.max(a,l,u),w=Math.max(c,A,m),T=mg(_,b,e,t,n),N=mg(M,w,e,t,n);let P=i.prevZ,I=i.nextZ;for(;P&&P.z>=T&&I&&I.z<=N;){if(P.x>=_&&P.x<=M&&P.y>=b&&P.y<=w&&P!==r&&P!==o&&Lh(a,c,l,A,u,m,P.x,P.y)&&yr(P.prev,P,P.next)>=0||(P=P.prevZ,I.x>=_&&I.x<=M&&I.y>=b&&I.y<=w&&I!==r&&I!==o&&Lh(a,c,l,A,u,m,I.x,I.y)&&yr(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;P&&P.z>=T;){if(P.x>=_&&P.x<=M&&P.y>=b&&P.y<=w&&P!==r&&P!==o&&Lh(a,c,l,A,u,m,P.x,P.y)&&yr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;I&&I.z<=N;){if(I.x>=_&&I.x<=M&&I.y>=b&&I.y<=w&&I!==r&&I!==o&&Lh(a,c,l,A,u,m,I.x,I.y)&&yr(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function _U(i,e){let t=i;do{const n=t.prev,r=t.next.next;!W4(n,r)&&zE(n,t,t.next,r)&&u8(n,r)&&u8(r,n)&&(e.push(n.i,t.i,r.i),c8(t),c8(t.next),t=i=r),t=t.next}while(t!==i);return yc(t)}function xU(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&PU(o,a)){let l=GE(o,a);o=yc(o,o.next),l=yc(l,l.next),l8(o,e,t,n,r,s,0),l8(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function bU(i,e,t,n){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,u=kE(i,a,l,n,!1);u===u.next&&(u.steiner=!0),r.push(CU(u))}r.sort(SU);for(let s=0;s<r.length;s++)t=TU(r[s],t);return t}function SU(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function TU(i,e){const t=wU(i,e);if(!t)return e;const n=GE(t,i);return yc(n,n.next),yc(t,t.next)}function wU(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;if(W4(i,t))return t;do{if(W4(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const A=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(A<=n&&A>s&&(s=A,o=t.x<t.next.x?t:t.next,A===n))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let c=1/0;t=o;do{if(n>=t.x&&t.x>=l&&n!==t.x&&VE(r<u?n:s,r,l,u,r<u?s:n,r,t.x,t.y)){const A=Math.abs(r-t.y)/(n-t.x);u8(t,i)&&(A<c||A===c&&(t.x>o.x||t.x===o.x&&MU(o,t)))&&(o=t,c=A)}t=t.next}while(t!==a);return o}function MU(i,e){return yr(i.prev,i,e.prev)<0&&yr(e.next,i,i.next)<0}function EU(i,e,t,n){let r=i;do r.z===0&&(r.z=mg(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,RU(r)}function RU(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let o=n,a=0;for(let u=0;u<t&&(a++,o=o.nextZ,!!o);u++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||n.z<=o.z)?(r=n,n=n.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=o}s.nextZ=null,t*=2}while(e>1);return i}function mg(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function CU(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function VE(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function Lh(i,e,t,n,r,s,o,a){return!(i===o&&e===a)&&VE(i,e,t,n,r,s,o,a)}function PU(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!NU(i,e)&&(u8(i,e)&&u8(e,i)&&IU(i,e)&&(yr(i.prev,i,e.prev)||yr(i,e.prev,e))||W4(i,e)&&yr(i.prev,i,i.next)>0&&yr(e.prev,e,e.next)>0)}function yr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function W4(i,e){return i.x===e.x&&i.y===e.y}function zE(i,e,t,n){const r=F7(yr(i,e,t)),s=F7(yr(i,e,n)),o=F7(yr(t,n,i)),a=F7(yr(t,n,e));return!!(r!==s&&o!==a||r===0&&B7(i,t,e)||s===0&&B7(i,n,e)||o===0&&B7(t,i,n)||a===0&&B7(t,e,n))}function B7(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function F7(i){return i>0?1:i<0?-1:0}function NU(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&zE(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function u8(i,e){return yr(i.prev,i,i.next)<0?yr(i,e,i.next)>=0&&yr(i,i.prev,e)>=0:yr(i,e,i.prev)<0||yr(i,i.next,e)<0}function IU(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function GE(i,e){const t=gg(i.i,i.x,i.y),n=gg(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function Db(i,e,t,n){const r=gg(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function c8(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function gg(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function LU(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}class DU{static triangulate(e,t,n=2){return gU(e,t,n)}}class C0{static area(e){const t=e.length;let n=0;for(let r=t-1,s=0;s<t;r=s++)n+=e[r].x*e[s].y-e[s].x*e[r].y;return n*.5}static isClockWise(e){return C0.area(e)<0}static triangulateShape(e,t){const n=[],r=[],s=[];Bb(e),Fb(n,e);let o=e.length;t.forEach(Bb);for(let l=0;l<t.length;l++)r.push(o),o+=t[l].length,Fb(n,t[l]);const a=DU.triangulate(n,r);for(let l=0;l<a.length;l+=3)s.push(a.slice(l,l+3));return s}}function Bb(i){const e=i.length;e>2&&i[e-1].equals(i[0])&&i.pop()}function Fb(i,e){for(let t=0;t<e.length;t++)i.push(e[t].x),i.push(e[t].y)}class K8 extends Tn{constructor(e=new H2([new Ge(.5,.5),new Ge(-.5,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),t={}){super(),this.type="ExtrudeGeometry",this.parameters={shapes:e,options:t},e=Array.isArray(e)?e:[e];const n=this,r=[],s=[];for(let a=0,l=e.length;a<l;a++){const u=e[a];o(u)}this.setAttribute("position",new Ht(r,3)),this.setAttribute("uv",new Ht(s,2)),this.computeVertexNormals();function o(a){const l=[],u=t.curveSegments!==void 0?t.curveSegments:12,c=t.steps!==void 0?t.steps:1,A=t.depth!==void 0?t.depth:1;let m=t.bevelEnabled!==void 0?t.bevelEnabled:!0,_=t.bevelThickness!==void 0?t.bevelThickness:.2,b=t.bevelSize!==void 0?t.bevelSize:_-.1,M=t.bevelOffset!==void 0?t.bevelOffset:0,w=t.bevelSegments!==void 0?t.bevelSegments:3;const T=t.extrudePath,N=t.UVGenerator!==void 0?t.UVGenerator:BU;let P,I=!1,B,F,O,V;T&&(P=T.getSpacedPoints(c),I=!0,m=!1,B=T.computeFrenetFrames(c,!1),F=new J,O=new J,V=new J),m||(w=0,_=0,b=0,M=0);const U=a.extractPoints(u);let z=U.shape;const H=U.holes;if(!C0.isClockWise(z)){z=z.reverse();for(let Je=0,Xe=H.length;Je<Xe;Je++){const ht=H[Je];C0.isClockWise(ht)&&(H[Je]=ht.reverse())}}function Y(Je){const ht=10000000000000001e-36;let Ze=Je[0];for(let vt=1;vt<=Je.length;vt++){const ut=vt%Je.length,Tt=Je[ut],fn=Tt.x-Ze.x,bn=Tt.y-Ze.y,he=fn*fn+bn*bn,Z=Math.max(Math.abs(Tt.x),Math.abs(Tt.y),Math.abs(Ze.x),Math.abs(Ze.y)),De=ht*Z*Z;if(he<=De){Je.splice(ut,1),vt--;continue}Ze=Tt}}Y(z),H.forEach(Y);const ne=H.length,ee=z;for(let Je=0;Je<ne;Je++){const Xe=H[Je];z=z.concat(Xe)}function se(Je,Xe,ht){return Xe||console.error("THREE.ExtrudeGeometry: vec does not exist"),Je.clone().addScaledVector(Xe,ht)}const pe=z.length;function re(Je,Xe,ht){let Ze,vt,ut;const Tt=Je.x-Xe.x,fn=Je.y-Xe.y,bn=ht.x-Je.x,he=ht.y-Je.y,Z=Tt*Tt+fn*fn,De=Tt*he-fn*bn;if(Math.abs(De)>Number.EPSILON){const ze=Math.sqrt(Z),ft=Math.sqrt(bn*bn+he*he),We=Xe.x-fn/ze,Zt=Xe.y+Tt/ze,St=ht.x-he/ft,$t=ht.y+bn/ft,Yt=((St-We)*he-($t-Zt)*bn)/(Tt*he-fn*bn);Ze=We+Tt*Yt-Je.x,vt=Zt+fn*Yt-Je.y;const yt=Ze*Ze+vt*vt;if(yt<=2)return new Ge(Ze,vt);ut=Math.sqrt(yt/2)}else{let ze=!1;Tt>Number.EPSILON?bn>Number.EPSILON&&(ze=!0):Tt<-Number.EPSILON?bn<-Number.EPSILON&&(ze=!0):Math.sign(fn)===Math.sign(he)&&(ze=!0),ze?(Ze=-fn,vt=Tt,ut=Math.sqrt(Z)):(Ze=Tt,vt=fn,ut=Math.sqrt(Z/2))}return new Ge(Ze/ut,vt/ut)}const de=[];for(let Je=0,Xe=ee.length,ht=Xe-1,Ze=Je+1;Je<Xe;Je++,ht++,Ze++)ht===Xe&&(ht=0),Ze===Xe&&(Ze=0),de[Je]=re(ee[Je],ee[ht],ee[Ze]);const ye=[];let Pe,Qe=de.concat();for(let Je=0,Xe=ne;Je<Xe;Je++){const ht=H[Je];Pe=[];for(let Ze=0,vt=ht.length,ut=vt-1,Tt=Ze+1;Ze<vt;Ze++,ut++,Tt++)ut===vt&&(ut=0),Tt===vt&&(Tt=0),Pe[Ze]=re(ht[Ze],ht[ut],ht[Tt]);ye.push(Pe),Qe=Qe.concat(Pe)}let et;if(w===0)et=C0.triangulateShape(ee,H);else{const Je=[],Xe=[];for(let ht=0;ht<w;ht++){const Ze=ht/w,vt=_*Math.cos(Ze*Math.PI/2),ut=b*Math.sin(Ze*Math.PI/2)+M;for(let Tt=0,fn=ee.length;Tt<fn;Tt++){const bn=se(ee[Tt],de[Tt],ut);Rt(bn.x,bn.y,-vt),Ze===0&&Je.push(bn)}for(let Tt=0,fn=ne;Tt<fn;Tt++){const bn=H[Tt];Pe=ye[Tt];const he=[];for(let Z=0,De=bn.length;Z<De;Z++){const ze=se(bn[Z],Pe[Z],ut);Rt(ze.x,ze.y,-vt),Ze===0&&he.push(ze)}Ze===0&&Xe.push(he)}}et=C0.triangulateShape(Je,Xe)}const Pt=et.length,Ne=b+M;for(let Je=0;Je<pe;Je++){const Xe=m?se(z[Je],Qe[Je],Ne):z[Je];I?(O.copy(B.normals[0]).multiplyScalar(Xe.x),F.copy(B.binormals[0]).multiplyScalar(Xe.y),V.copy(P[0]).add(O).add(F),Rt(V.x,V.y,V.z)):Rt(Xe.x,Xe.y,0)}for(let Je=1;Je<=c;Je++)for(let Xe=0;Xe<pe;Xe++){const ht=m?se(z[Xe],Qe[Xe],Ne):z[Xe];I?(O.copy(B.normals[Je]).multiplyScalar(ht.x),F.copy(B.binormals[Je]).multiplyScalar(ht.y),V.copy(P[Je]).add(O).add(F),Rt(V.x,V.y,V.z)):Rt(ht.x,ht.y,A/c*Je)}for(let Je=w-1;Je>=0;Je--){const Xe=Je/w,ht=_*Math.cos(Xe*Math.PI/2),Ze=b*Math.sin(Xe*Math.PI/2)+M;for(let vt=0,ut=ee.length;vt<ut;vt++){const Tt=se(ee[vt],de[vt],Ze);Rt(Tt.x,Tt.y,A+ht)}for(let vt=0,ut=H.length;vt<ut;vt++){const Tt=H[vt];Pe=ye[vt];for(let fn=0,bn=Tt.length;fn<bn;fn++){const he=se(Tt[fn],Pe[fn],Ze);I?Rt(he.x,he.y+P[c-1].y,P[c-1].x+ht):Rt(he.x,he.y,A+ht)}}}nt(),tt();function nt(){const Je=r.length/3;if(m){let Xe=0,ht=pe*Xe;for(let Ze=0;Ze<Pt;Ze++){const vt=et[Ze];It(vt[2]+ht,vt[1]+ht,vt[0]+ht)}Xe=c+w*2,ht=pe*Xe;for(let Ze=0;Ze<Pt;Ze++){const vt=et[Ze];It(vt[0]+ht,vt[1]+ht,vt[2]+ht)}}else{for(let Xe=0;Xe<Pt;Xe++){const ht=et[Xe];It(ht[2],ht[1],ht[0])}for(let Xe=0;Xe<Pt;Xe++){const ht=et[Xe];It(ht[0]+pe*c,ht[1]+pe*c,ht[2]+pe*c)}}n.addGroup(Je,r.length/3-Je,0)}function tt(){const Je=r.length/3;let Xe=0;Dt(ee,Xe),Xe+=ee.length;for(let ht=0,Ze=H.length;ht<Ze;ht++){const vt=H[ht];Dt(vt,Xe),Xe+=vt.length}n.addGroup(Je,r.length/3-Je,1)}function Dt(Je,Xe){let ht=Je.length;for(;--ht>=0;){const Ze=ht;let vt=ht-1;vt<0&&(vt=Je.length-1);for(let ut=0,Tt=c+w*2;ut<Tt;ut++){const fn=pe*ut,bn=pe*(ut+1),he=Xe+Ze+fn,Z=Xe+vt+fn,De=Xe+vt+bn,ze=Xe+Ze+bn;yn(he,Z,De,ze)}}}function Rt(Je,Xe,ht){l.push(Je),l.push(Xe),l.push(ht)}function It(Je,Xe,ht){Kt(Je),Kt(Xe),Kt(ht);const Ze=r.length/3,vt=N.generateTopUV(n,r,Ze-3,Ze-2,Ze-1);Ae(vt[0]),Ae(vt[1]),Ae(vt[2])}function yn(Je,Xe,ht,Ze){Kt(Je),Kt(Xe),Kt(Ze),Kt(Xe),Kt(ht),Kt(Ze);const vt=r.length/3,ut=N.generateSideWallUV(n,r,vt-6,vt-3,vt-2,vt-1);Ae(ut[0]),Ae(ut[1]),Ae(ut[3]),Ae(ut[1]),Ae(ut[2]),Ae(ut[3])}function Kt(Je){r.push(l[Je*3+0]),r.push(l[Je*3+1]),r.push(l[Je*3+2])}function Ae(Je){s.push(Je.x),s.push(Je.y)}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes,n=this.parameters.options;return FU(t,n,e)}static fromJSON(e,t){const n=[];for(let s=0,o=e.shapes.length;s<o;s++){const a=t[e.shapes[s]];n.push(a)}const r=e.options.extrudePath;return r!==void 0&&(e.options.extrudePath=new cd[r.type]().fromJSON(r)),new K8(n,e.options)}}const BU={generateTopUV:function(i,e,t,n,r){const s=e[t*3],o=e[t*3+1],a=e[n*3],l=e[n*3+1],u=e[r*3],c=e[r*3+1];return[new Ge(s,o),new Ge(a,l),new Ge(u,c)]},generateSideWallUV:function(i,e,t,n,r,s){const o=e[t*3],a=e[t*3+1],l=e[t*3+2],u=e[n*3],c=e[n*3+1],A=e[n*3+2],m=e[r*3],_=e[r*3+1],b=e[r*3+2],M=e[s*3],w=e[s*3+1],T=e[s*3+2];return Math.abs(a-c)<Math.abs(o-u)?[new Ge(o,1-l),new Ge(u,1-A),new Ge(m,1-b),new Ge(M,1-T)]:[new Ge(a,1-l),new Ge(c,1-A),new Ge(_,1-b),new Ge(w,1-T)]}};function FU(i,e,t){if(t.shapes=[],Array.isArray(i))for(let n=0,r=i.length;n<r;n++){const s=i[n];t.shapes.push(s.uuid)}else t.shapes.push(i.uuid);return t.options=Object.assign({},e),e.extrudePath!==void 0&&(t.options.extrudePath=e.extrudePath.toJSON()),t}class V9 extends xu{constructor(e=1,t=0){const n=(1+Math.sqrt(5))/2,r=[-1,n,0,1,n,0,-1,-n,0,1,-n,0,0,-1,n,0,1,n,0,-1,-n,0,1,-n,n,0,-1,n,0,1,-n,0,-1,-n,0,1],s=[0,11,5,0,5,1,0,1,7,0,7,10,0,10,11,1,5,9,5,11,4,11,10,2,10,7,6,7,1,8,3,9,4,3,4,2,3,2,6,3,6,8,3,8,9,4,9,5,2,4,11,6,2,10,8,6,7,9,8,1];super(r,s,e,t),this.type="IcosahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new V9(e.radius,e.detail)}}class z9 extends Tn{constructor(e=[new Ge(0,-.5),new Ge(.5,0),new Ge(0,.5)],t=12,n=0,r=Math.PI*2){super(),this.type="LatheGeometry",this.parameters={points:e,segments:t,phiStart:n,phiLength:r},t=Math.floor(t),r=Dn(r,0,Math.PI*2);const s=[],o=[],a=[],l=[],u=[],c=1/t,A=new J,m=new Ge,_=new J,b=new J,M=new J;let w=0,T=0;for(let N=0;N<=e.length-1;N++)switch(N){case 0:w=e[N+1].x-e[N].x,T=e[N+1].y-e[N].y,_.x=T*1,_.y=-w,_.z=T*0,M.copy(_),_.normalize(),l.push(_.x,_.y,_.z);break;case e.length-1:l.push(M.x,M.y,M.z);break;default:w=e[N+1].x-e[N].x,T=e[N+1].y-e[N].y,_.x=T*1,_.y=-w,_.z=T*0,b.copy(_),_.x+=M.x,_.y+=M.y,_.z+=M.z,_.normalize(),l.push(_.x,_.y,_.z),M.copy(b)}for(let N=0;N<=t;N++){const P=n+N*c*r,I=Math.sin(P),B=Math.cos(P);for(let F=0;F<=e.length-1;F++){A.x=e[F].x*I,A.y=e[F].y,A.z=e[F].x*B,o.push(A.x,A.y,A.z),m.x=N/t,m.y=F/(e.length-1),a.push(m.x,m.y);const O=l[3*F+0]*I,V=l[3*F+1],U=l[3*F+0]*B;u.push(O,V,U)}}for(let N=0;N<t;N++)for(let P=0;P<e.length-1;P++){const I=P+N*e.length,B=I,F=I+e.length,O=I+e.length+1,V=I+1;s.push(B,F,V),s.push(O,V,F)}this.setIndex(s),this.setAttribute("position",new Ht(o,3)),this.setAttribute("uv",new Ht(a,2)),this.setAttribute("normal",new Ht(u,3))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new z9(e.points,e.segments,e.phiStart,e.phiLength)}}class Z8 extends xu{constructor(e=1,t=0){const n=[1,0,0,-1,0,0,0,1,0,0,-1,0,0,0,1,0,0,-1],r=[0,2,4,0,4,3,0,3,5,0,5,2,1,2,5,1,5,3,1,3,4,1,4,2];super(n,r,e,t),this.type="OctahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new Z8(e.radius,e.detail)}}class Pc extends Tn{constructor(e=1,t=1,n=1,r=1){super(),this.type="PlaneGeometry",this.parameters={width:e,height:t,widthSegments:n,heightSegments:r};const s=e/2,o=t/2,a=Math.floor(n),l=Math.floor(r),u=a+1,c=l+1,A=e/a,m=t/l,_=[],b=[],M=[],w=[];for(let T=0;T<c;T++){const N=T*m-o;for(let P=0;P<u;P++){const I=P*A-s;b.push(I,-N,0),M.push(0,0,1),w.push(P/a),w.push(1-T/l)}}for(let T=0;T<l;T++)for(let N=0;N<a;N++){const P=N+u*T,I=N+u*(T+1),B=N+1+u*(T+1),F=N+1+u*T;_.push(P,I,F),_.push(I,B,F)}this.setIndex(_),this.setAttribute("position",new Ht(b,3)),this.setAttribute("normal",new Ht(M,3)),this.setAttribute("uv",new Ht(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new Pc(e.width,e.height,e.widthSegments,e.heightSegments)}}class G9 extends Tn{constructor(e=.5,t=1,n=32,r=1,s=0,o=Math.PI*2){super(),this.type="RingGeometry",this.parameters={innerRadius:e,outerRadius:t,thetaSegments:n,phiSegments:r,thetaStart:s,thetaLength:o},n=Math.max(3,n),r=Math.max(1,r);const a=[],l=[],u=[],c=[];let A=e;const m=(t-e)/r,_=new J,b=new Ge;for(let M=0;M<=r;M++){for(let w=0;w<=n;w++){const T=s+w/n*o;_.x=A*Math.cos(T),_.y=A*Math.sin(T),l.push(_.x,_.y,_.z),u.push(0,0,1),b.x=(_.x/t+1)/2,b.y=(_.y/t+1)/2,c.push(b.x,b.y)}A+=m}for(let M=0;M<r;M++){const w=M*(n+1);for(let T=0;T<n;T++){const N=T+w,P=N,I=N+n+1,B=N+n+2,F=N+1;a.push(P,I,F),a.push(I,B,F)}}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(c,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new G9(e.innerRadius,e.outerRadius,e.thetaSegments,e.phiSegments,e.thetaStart,e.thetaLength)}}class q9 extends Tn{constructor(e=new H2([new Ge(0,.5),new Ge(-.5,-.5),new Ge(.5,-.5)]),t=12){super(),this.type="ShapeGeometry",this.parameters={shapes:e,curveSegments:t};const n=[],r=[],s=[],o=[];let a=0,l=0;if(Array.isArray(e)===!1)u(e);else for(let c=0;c<e.length;c++)u(e[c]),this.addGroup(a,l,c),a+=l,l=0;this.setIndex(n),this.setAttribute("position",new Ht(r,3)),this.setAttribute("normal",new Ht(s,3)),this.setAttribute("uv",new Ht(o,2));function u(c){const A=r.length/3,m=c.extractPoints(t);let _=m.shape;const b=m.holes;C0.isClockWise(_)===!1&&(_=_.reverse());for(let w=0,T=b.length;w<T;w++){const N=b[w];C0.isClockWise(N)===!0&&(b[w]=N.reverse())}const M=C0.triangulateShape(_,b);for(let w=0,T=b.length;w<T;w++){const N=b[w];_=_.concat(N)}for(let w=0,T=_.length;w<T;w++){const N=_[w];r.push(N.x,N.y,0),s.push(0,0,1),o.push(N.x,N.y)}for(let w=0,T=M.length;w<T;w++){const N=M[w],P=N[0]+A,I=N[1]+A,B=N[2]+A;n.push(P,I,B),l+=3}}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON(),t=this.parameters.shapes;return UU(t,e)}static fromJSON(e,t){const n=[];for(let r=0,s=e.shapes.length;r<s;r++){const o=t[e.shapes[r]];n.push(o)}return new q9(n,e.curveSegments)}}function UU(i,e){if(e.shapes=[],Array.isArray(i))for(let t=0,n=i.length;t<n;t++){const r=i[t];e.shapes.push(r.uuid)}else e.shapes.push(i.uuid);return e}class i0 extends Tn{constructor(e=1,t=32,n=16,r=0,s=Math.PI*2,o=0,a=Math.PI){super(),this.type="SphereGeometry",this.parameters={radius:e,widthSegments:t,heightSegments:n,phiStart:r,phiLength:s,thetaStart:o,thetaLength:a},t=Math.max(3,Math.floor(t)),n=Math.max(2,Math.floor(n));const l=Math.min(o+a,Math.PI);let u=0;const c=[],A=new J,m=new J,_=[],b=[],M=[],w=[];for(let T=0;T<=n;T++){const N=[],P=T/n;let I=0;T===0&&o===0?I=.5/t:T===n&&l===Math.PI&&(I=-.5/t);for(let B=0;B<=t;B++){const F=B/t;A.x=-e*Math.cos(r+F*s)*Math.sin(o+P*a),A.y=e*Math.cos(o+P*a),A.z=e*Math.sin(r+F*s)*Math.sin(o+P*a),b.push(A.x,A.y,A.z),m.copy(A).normalize(),M.push(m.x,m.y,m.z),w.push(F+I,1-P),N.push(u++)}c.push(N)}for(let T=0;T<n;T++)for(let N=0;N<t;N++){const P=c[T][N+1],I=c[T][N],B=c[T+1][N],F=c[T+1][N+1];(T!==0||o>0)&&_.push(P,I,F),(T!==n-1||l<Math.PI)&&_.push(I,B,F)}this.setIndex(_),this.setAttribute("position",new Ht(b,3)),this.setAttribute("normal",new Ht(M,3)),this.setAttribute("uv",new Ht(w,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new i0(e.radius,e.widthSegments,e.heightSegments,e.phiStart,e.phiLength,e.thetaStart,e.thetaLength)}}class H9 extends xu{constructor(e=1,t=0){const n=[1,1,1,-1,-1,1,-1,1,-1,1,-1,-1],r=[2,1,0,0,3,2,1,3,0,2,3,1];super(n,r,e,t),this.type="TetrahedronGeometry",this.parameters={radius:e,detail:t}}static fromJSON(e){return new H9(e.radius,e.detail)}}class W9 extends Tn{constructor(e=1,t=.4,n=12,r=48,s=Math.PI*2){super(),this.type="TorusGeometry",this.parameters={radius:e,tube:t,radialSegments:n,tubularSegments:r,arc:s},n=Math.floor(n),r=Math.floor(r);const o=[],a=[],l=[],u=[],c=new J,A=new J,m=new J;for(let _=0;_<=n;_++)for(let b=0;b<=r;b++){const M=b/r*s,w=_/n*Math.PI*2;A.x=(e+t*Math.cos(w))*Math.cos(M),A.y=(e+t*Math.cos(w))*Math.sin(M),A.z=t*Math.sin(w),a.push(A.x,A.y,A.z),c.x=e*Math.cos(M),c.y=e*Math.sin(M),m.subVectors(A,c).normalize(),l.push(m.x,m.y,m.z),u.push(b/r),u.push(_/n)}for(let _=1;_<=n;_++)for(let b=1;b<=r;b++){const M=(r+1)*_+b-1,w=(r+1)*(_-1)+b-1,T=(r+1)*(_-1)+b,N=(r+1)*_+b;o.push(M,w,N),o.push(w,T,N)}this.setIndex(o),this.setAttribute("position",new Ht(a,3)),this.setAttribute("normal",new Ht(l,3)),this.setAttribute("uv",new Ht(u,2))}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new W9(e.radius,e.tube,e.radialSegments,e.tubularSegments,e.arc)}}class j9 extends Tn{constructor(e=1,t=.4,n=64,r=8,s=2,o=3){super(),this.type="TorusKnotGeometry",this.parameters={radius:e,tube:t,tubularSegments:n,radialSegments:r,p:s,q:o},n=Math.floor(n),r=Math.floor(r);const a=[],l=[],u=[],c=[],A=new J,m=new J,_=new J,b=new J,M=new J,w=new J,T=new J;for(let P=0;P<=n;++P){const I=P/n*s*Math.PI*2;N(I,s,o,e,_),N(I+.01,s,o,e,b),w.subVectors(b,_),T.addVectors(b,_),M.crossVectors(w,T),T.crossVectors(M,w),M.normalize(),T.normalize();for(let B=0;B<=r;++B){const F=B/r*Math.PI*2,O=-t*Math.cos(F),V=t*Math.sin(F);A.x=_.x+(O*T.x+V*M.x),A.y=_.y+(O*T.y+V*M.y),A.z=_.z+(O*T.z+V*M.z),l.push(A.x,A.y,A.z),m.subVectors(A,_).normalize(),u.push(m.x,m.y,m.z),c.push(P/n),c.push(B/r)}}for(let P=1;P<=n;P++)for(let I=1;I<=r;I++){const B=(r+1)*(P-1)+(I-1),F=(r+1)*P+(I-1),O=(r+1)*P+I,V=(r+1)*(P-1)+I;a.push(B,F,V),a.push(F,O,V)}this.setIndex(a),this.setAttribute("position",new Ht(l,3)),this.setAttribute("normal",new Ht(u,3)),this.setAttribute("uv",new Ht(c,2));function N(P,I,B,F,O){const V=Math.cos(P),U=Math.sin(P),z=B/I*P,H=Math.cos(z);O.x=F*(2+H)*.5*V,O.y=F*(2+H)*U*.5,O.z=F*Math.sin(z)*.5}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}static fromJSON(e){return new j9(e.radius,e.tube,e.tubularSegments,e.radialSegments,e.p,e.q)}}class J8 extends Tn{constructor(e=new mv(new J(-1,-1,0),new J(-1,1,0),new J(1,1,0)),t=64,n=1,r=8,s=!1){super(),this.type="TubeGeometry",this.parameters={path:e,tubularSegments:t,radius:n,radialSegments:r,closed:s};const o=e.computeFrenetFrames(t,s);this.tangents=o.tangents,this.normals=o.normals,this.binormals=o.binormals;const a=new J,l=new J,u=new Ge;let c=new J;const A=[],m=[],_=[],b=[];M(),this.setIndex(b),this.setAttribute("position",new Ht(A,3)),this.setAttribute("normal",new Ht(m,3)),this.setAttribute("uv",new Ht(_,2));function M(){for(let P=0;P<t;P++)w(P);w(s===!1?t:0),N(),T()}function w(P){c=e.getPointAt(P/t,c);const I=o.normals[P],B=o.binormals[P];for(let F=0;F<=r;F++){const O=F/r*Math.PI*2,V=Math.sin(O),U=-Math.cos(O);l.x=U*I.x+V*B.x,l.y=U*I.y+V*B.y,l.z=U*I.z+V*B.z,l.normalize(),m.push(l.x,l.y,l.z),a.x=c.x+n*l.x,a.y=c.y+n*l.y,a.z=c.z+n*l.z,A.push(a.x,a.y,a.z)}}function T(){for(let P=1;P<=t;P++)for(let I=1;I<=r;I++){const B=(r+1)*(P-1)+(I-1),F=(r+1)*P+(I-1),O=(r+1)*P+I,V=(r+1)*(P-1)+I;b.push(B,F,V),b.push(F,O,V)}}function N(){for(let P=0;P<=t;P++)for(let I=0;I<=r;I++)u.x=P/t,u.y=I/r,_.push(u.x,u.y)}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}toJSON(){const e=super.toJSON();return e.path=this.parameters.path.toJSON(),e}static fromJSON(e){return new J8(new cd[e.path.type]().fromJSON(e.path),e.tubularSegments,e.radius,e.radialSegments,e.closed)}}class yv extends Tn{constructor(e=null){if(super(),this.type="WireframeGeometry",this.parameters={geometry:e},e!==null){const t=[],n=new Set,r=new J,s=new J;if(e.index!==null){const o=e.attributes.position,a=e.index;let l=e.groups;l.length===0&&(l=[{start:0,count:a.count,materialIndex:0}]);for(let u=0,c=l.length;u<c;++u){const A=l[u],m=A.start,_=A.count;for(let b=m,M=m+_;b<M;b+=3)for(let w=0;w<3;w++){const T=a.getX(b+w),N=a.getX(b+(w+1)%3);r.fromBufferAttribute(o,T),s.fromBufferAttribute(o,N),Ub(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}}else{const o=e.attributes.position;for(let a=0,l=o.count/3;a<l;a++)for(let u=0;u<3;u++){const c=3*a+u,A=3*a+(u+1)%3;r.fromBufferAttribute(o,c),s.fromBufferAttribute(o,A),Ub(r,s,n)===!0&&(t.push(r.x,r.y,r.z),t.push(s.x,s.y,s.z))}}this.setAttribute("position",new Ht(t,3))}}copy(e){return super.copy(e),this.parameters=Object.assign({},e.parameters),this}}function Ub(i,e,t){const n=`${i.x},${i.y},${i.z}-${e.x},${e.y},${e.z}`,r=`${e.x},${e.y},${e.z}-${i.x},${i.y},${i.z}`;return t.has(n)===!0||t.has(r)===!0?!1:(t.add(n),t.add(r),!0)}var Ob=Object.freeze({__proto__:null,BoxGeometry:_l,CapsuleGeometry:U9,CircleGeometry:c5,ConeGeometry:Y8,CylinderGeometry:Cc,DodecahedronGeometry:O9,EdgesGeometry:DE,ExtrudeGeometry:K8,IcosahedronGeometry:V9,LatheGeometry:z9,OctahedronGeometry:Z8,PlaneGeometry:Pc,PolyhedronGeometry:xu,RingGeometry:G9,ShapeGeometry:q9,SphereGeometry:i0,TetrahedronGeometry:H9,TorusGeometry:W9,TorusKnotGeometry:j9,TubeGeometry:J8,WireframeGeometry:yv});class vv extends ws{constructor(e){super(),this.isShadowMaterial=!0,this.type="ShadowMaterial",this.color=new Et(0),this.transparent=!0,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.fog=e.fog,this}}class qE extends To{constructor(e){super(e),this.isRawShaderMaterial=!0,this.type="RawShaderMaterial"}}class $9 extends ws{constructor(e){super(),this.isMeshStandardMaterial=!0,this.type="MeshStandardMaterial",this.defines={STANDARD:""},this.color=new Et(16777215),this.roughness=1,this.metalness=0,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.roughnessMap=null,this.metalnessMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.envMapIntensity=1,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={STANDARD:""},this.color.copy(e.color),this.roughness=e.roughness,this.metalness=e.metalness,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.roughnessMap=e.roughnessMap,this.metalnessMap=e.metalnessMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.envMapIntensity=e.envMapIntensity,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class _v extends $9{constructor(e){super(),this.isMeshPhysicalMaterial=!0,this.defines={STANDARD:"",PHYSICAL:""},this.type="MeshPhysicalMaterial",this.anisotropyRotation=0,this.anisotropyMap=null,this.clearcoatMap=null,this.clearcoatRoughness=0,this.clearcoatRoughnessMap=null,this.clearcoatNormalScale=new Ge(1,1),this.clearcoatNormalMap=null,this.ior=1.5,Object.defineProperty(this,"reflectivity",{get:function(){return Dn(2.5*(this.ior-1)/(this.ior+1),0,1)},set:function(t){this.ior=(1+.4*t)/(1-.4*t)}}),this.iridescenceMap=null,this.iridescenceIOR=1.3,this.iridescenceThicknessRange=[100,400],this.iridescenceThicknessMap=null,this.sheenColor=new Et(0),this.sheenColorMap=null,this.sheenRoughness=1,this.sheenRoughnessMap=null,this.transmissionMap=null,this.thickness=0,this.thicknessMap=null,this.attenuationDistance=1/0,this.attenuationColor=new Et(1,1,1),this.specularIntensity=1,this.specularIntensityMap=null,this.specularColor=new Et(1,1,1),this.specularColorMap=null,this._anisotropy=0,this._clearcoat=0,this._dispersion=0,this._iridescence=0,this._sheen=0,this._transmission=0,this.setValues(e)}get anisotropy(){return this._anisotropy}set anisotropy(e){this._anisotropy>0!=e>0&&this.version++,this._anisotropy=e}get clearcoat(){return this._clearcoat}set clearcoat(e){this._clearcoat>0!=e>0&&this.version++,this._clearcoat=e}get iridescence(){return this._iridescence}set iridescence(e){this._iridescence>0!=e>0&&this.version++,this._iridescence=e}get dispersion(){return this._dispersion}set dispersion(e){this._dispersion>0!=e>0&&this.version++,this._dispersion=e}get sheen(){return this._sheen}set sheen(e){this._sheen>0!=e>0&&this.version++,this._sheen=e}get transmission(){return this._transmission}set transmission(e){this._transmission>0!=e>0&&this.version++,this._transmission=e}copy(e){return super.copy(e),this.defines={STANDARD:"",PHYSICAL:""},this.anisotropy=e.anisotropy,this.anisotropyRotation=e.anisotropyRotation,this.anisotropyMap=e.anisotropyMap,this.clearcoat=e.clearcoat,this.clearcoatMap=e.clearcoatMap,this.clearcoatRoughness=e.clearcoatRoughness,this.clearcoatRoughnessMap=e.clearcoatRoughnessMap,this.clearcoatNormalMap=e.clearcoatNormalMap,this.clearcoatNormalScale.copy(e.clearcoatNormalScale),this.dispersion=e.dispersion,this.ior=e.ior,this.iridescence=e.iridescence,this.iridescenceMap=e.iridescenceMap,this.iridescenceIOR=e.iridescenceIOR,this.iridescenceThicknessRange=[...e.iridescenceThicknessRange],this.iridescenceThicknessMap=e.iridescenceThicknessMap,this.sheen=e.sheen,this.sheenColor.copy(e.sheenColor),this.sheenColorMap=e.sheenColorMap,this.sheenRoughness=e.sheenRoughness,this.sheenRoughnessMap=e.sheenRoughnessMap,this.transmission=e.transmission,this.transmissionMap=e.transmissionMap,this.thickness=e.thickness,this.thicknessMap=e.thicknessMap,this.attenuationDistance=e.attenuationDistance,this.attenuationColor.copy(e.attenuationColor),this.specularIntensity=e.specularIntensity,this.specularIntensityMap=e.specularIntensityMap,this.specularColor.copy(e.specularColor),this.specularColorMap=e.specularColorMap,this}}class X9 extends ws{constructor(e){super(),this.isMeshPhongMaterial=!0,this.type="MeshPhongMaterial",this.color=new Et(16777215),this.specular=new Et(1118481),this.shininess=30,this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=a5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.specular.copy(e.specular),this.shininess=e.shininess,this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class xv extends ws{constructor(e){super(),this.isMeshToonMaterial=!0,this.defines={TOON:""},this.type="MeshToonMaterial",this.color=new Et(16777215),this.map=null,this.gradientMap=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.gradientMap=e.gradientMap,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.fog=e.fog,this}}class bv extends ws{constructor(e){super(),this.isMeshNormalMaterial=!0,this.type="MeshNormalMaterial",this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.flatShading=!1,this.setValues(e)}copy(e){return super.copy(e),this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.flatShading=e.flatShading,this}}class U0 extends ws{constructor(e){super(),this.isMeshLambertMaterial=!0,this.type="MeshLambertMaterial",this.color=new Et(16777215),this.map=null,this.lightMap=null,this.lightMapIntensity=1,this.aoMap=null,this.aoMapIntensity=1,this.emissive=new Et(0),this.emissiveIntensity=1,this.emissiveMap=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.specularMap=null,this.alphaMap=null,this.envMap=null,this.envMapRotation=new Ts,this.combine=a5,this.reflectivity=1,this.refractionRatio=.98,this.wireframe=!1,this.wireframeLinewidth=1,this.wireframeLinecap="round",this.wireframeLinejoin="round",this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.color.copy(e.color),this.map=e.map,this.lightMap=e.lightMap,this.lightMapIntensity=e.lightMapIntensity,this.aoMap=e.aoMap,this.aoMapIntensity=e.aoMapIntensity,this.emissive.copy(e.emissive),this.emissiveMap=e.emissiveMap,this.emissiveIntensity=e.emissiveIntensity,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.specularMap=e.specularMap,this.alphaMap=e.alphaMap,this.envMap=e.envMap,this.envMapRotation.copy(e.envMapRotation),this.combine=e.combine,this.reflectivity=e.reflectivity,this.refractionRatio=e.refractionRatio,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this.wireframeLinecap=e.wireframeLinecap,this.wireframeLinejoin=e.wireframeLinejoin,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Sv extends ws{constructor(e){super(),this.isMeshDepthMaterial=!0,this.type="MeshDepthMaterial",this.depthPacking=aE,this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.wireframe=!1,this.wireframeLinewidth=1,this.setValues(e)}copy(e){return super.copy(e),this.depthPacking=e.depthPacking,this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.wireframe=e.wireframe,this.wireframeLinewidth=e.wireframeLinewidth,this}}class Tv extends ws{constructor(e){super(),this.isMeshDistanceMaterial=!0,this.type="MeshDistanceMaterial",this.map=null,this.alphaMap=null,this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.setValues(e)}copy(e){return super.copy(e),this.map=e.map,this.alphaMap=e.alphaMap,this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this}}class wv extends ws{constructor(e){super(),this.isMeshMatcapMaterial=!0,this.defines={MATCAP:""},this.type="MeshMatcapMaterial",this.color=new Et(16777215),this.matcap=null,this.map=null,this.bumpMap=null,this.bumpScale=1,this.normalMap=null,this.normalMapType=fl,this.normalScale=new Ge(1,1),this.displacementMap=null,this.displacementScale=1,this.displacementBias=0,this.alphaMap=null,this.flatShading=!1,this.fog=!0,this.setValues(e)}copy(e){return super.copy(e),this.defines={MATCAP:""},this.color.copy(e.color),this.matcap=e.matcap,this.map=e.map,this.bumpMap=e.bumpMap,this.bumpScale=e.bumpScale,this.normalMap=e.normalMap,this.normalMapType=e.normalMapType,this.normalScale.copy(e.normalScale),this.displacementMap=e.displacementMap,this.displacementScale=e.displacementScale,this.displacementBias=e.displacementBias,this.alphaMap=e.alphaMap,this.flatShading=e.flatShading,this.fog=e.fog,this}}class Mv extends hs{constructor(e){super(),this.isLineDashedMaterial=!0,this.type="LineDashedMaterial",this.scale=1,this.dashSize=3,this.gapSize=1,this.setValues(e)}copy(e){return super.copy(e),this.scale=e.scale,this.dashSize=e.dashSize,this.gapSize=e.gapSize,this}}function B2(i,e){return!i||i.constructor===e?i:typeof e.BYTES_PER_ELEMENT=="number"?new e(i):Array.prototype.slice.call(i)}function HE(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function WE(i){function e(r,s){return i[r]-i[s]}const t=i.length,n=new Array(t);for(let r=0;r!==t;++r)n[r]=r;return n.sort(e),n}function yg(i,e,t){const n=i.length,r=new i.constructor(n);for(let s=0,o=0;o!==n;++s){const a=t[s]*e;for(let l=0;l!==e;++l)r[o++]=i[a+l]}return r}function Ev(i,e,t,n){let r=1,s=i[0];for(;s!==void 0&&s[n]===void 0;)s=i[r++];if(s===void 0)return;let o=s[n];if(o!==void 0)if(Array.isArray(o))do o=s[n],o!==void 0&&(e.push(s.time),t.push(...o)),s=i[r++];while(s!==void 0);else if(o.toArray!==void 0)do o=s[n],o!==void 0&&(e.push(s.time),o.toArray(t,t.length)),s=i[r++];while(s!==void 0);else do o=s[n],o!==void 0&&(e.push(s.time),t.push(o)),s=i[r++];while(s!==void 0)}function OU(i,e,t,n,r=30){const s=i.clone();s.name=e;const o=[];for(let l=0;l<s.tracks.length;++l){const u=s.tracks[l],c=u.getValueSize(),A=[],m=[];for(let _=0;_<u.times.length;++_){const b=u.times[_]*r;if(!(b<t||b>=n)){A.push(u.times[_]);for(let M=0;M<c;++M)m.push(u.values[_*c+M])}}A.length!==0&&(u.times=B2(A,u.times.constructor),u.values=B2(m,u.values.constructor),o.push(u))}s.tracks=o;let a=1/0;for(let l=0;l<s.tracks.length;++l)a>s.tracks[l].times[0]&&(a=s.tracks[l].times[0]);for(let l=0;l<s.tracks.length;++l)s.tracks[l].shift(-1*a);return s.resetDuration(),s}function kU(i,e=0,t=i,n=30){n<=0&&(n=30);const r=t.tracks.length,s=e/n;for(let o=0;o<r;++o){const a=t.tracks[o],l=a.ValueTypeName;if(l==="bool"||l==="string")continue;const u=i.tracks.find(function(T){return T.name===a.name&&T.ValueTypeName===l});if(u===void 0)continue;let c=0;const A=a.getValueSize();a.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(c=A/3);let m=0;const _=u.getValueSize();u.createInterpolant.isInterpolantFactoryMethodGLTFCubicSpline&&(m=_/3);const b=a.times.length-1;let M;if(s<=a.times[0]){const T=c,N=A-c;M=a.values.slice(T,N)}else if(s>=a.times[b]){const T=b*A+c,N=T+A-c;M=a.values.slice(T,N)}else{const T=a.createInterpolant(),N=c,P=A-c;T.evaluate(s),M=T.resultBuffer.slice(N,P)}l==="quaternion"&&new Os().fromArray(M).normalize().conjugate().toArray(M);const w=u.times.length;for(let T=0;T<w;++T){const N=T*_+m;if(l==="quaternion")Os.multiplyQuaternionsFlat(u.values,N,M,0,u.values,N);else{const P=_-m*2;for(let I=0;I<P;++I)u.values[N+I]-=M[I]}}}return i.blendMode=ev,i}class VU{static convertArray(e,t){return B2(e,t)}static isTypedArray(e){return HE(e)}static getKeyframeOrder(e){return WE(e)}static sortedArray(e,t,n){return yg(e,t,n)}static flattenJSON(e,t,n,r){Ev(e,t,n,r)}static subclip(e,t,n,r,s=30){return OU(e,t,n,r,s)}static makeClipAdditive(e,t=0,n=e,r=30){return kU(e,t,n,r)}}class e6{constructor(e,t,n,r){this.parameterPositions=e,this._cachedIndex=0,this.resultBuffer=r!==void 0?r:new t.constructor(n),this.sampleValues=t,this.valueSize=n,this.settings=null,this.DefaultSettings_={}}evaluate(e){const t=this.parameterPositions;let n=this._cachedIndex,r=t[n],s=t[n-1];e:{t:{let o;n:{i:if(!(e<r)){for(let a=n+2;;){if(r===void 0){if(e<s)break i;return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}if(n===a)break;if(s=r,r=t[++n],e<r)break t}o=t.length;break n}if(!(e>=s)){const a=t[1];e<a&&(n=2,s=a);for(let l=n-2;;){if(s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(n===l)break;if(r=s,s=t[--n-1],e>=s)break t}o=n,n=0;break n}break e}for(;n<o;){const a=n+o>>>1;e<t[a]?o=a:n=a+1}if(r=t[n],s=t[n-1],s===void 0)return this._cachedIndex=0,this.copySampleValue_(0);if(r===void 0)return n=t.length,this._cachedIndex=n,this.copySampleValue_(n-1)}this._cachedIndex=n,this.intervalChanged_(n,s,r)}return this.interpolate_(n,s,e,r)}getSettings_(){return this.settings||this.DefaultSettings_}copySampleValue_(e){const t=this.resultBuffer,n=this.sampleValues,r=this.valueSize,s=e*r;for(let o=0;o!==r;++o)t[o]=n[s+o];return t}interpolate_(){throw new Error("call to abstract method")}intervalChanged_(){}}class jE extends e6{constructor(e,t,n,r){super(e,t,n,r),this._weightPrev=-0,this._offsetPrev=-0,this._weightNext=-0,this._offsetNext=-0,this.DefaultSettings_={endingStart:I2,endingEnd:I2}}intervalChanged_(e,t,n){const r=this.parameterPositions;let s=e-2,o=e+1,a=r[s],l=r[o];if(a===void 0)switch(this.getSettings_().endingStart){case L2:s=e,a=2*t-n;break;case o8:s=r.length-2,a=t+r[s]-r[s+1];break;default:s=e,a=n}if(l===void 0)switch(this.getSettings_().endingEnd){case L2:o=e,l=2*n-t;break;case o8:o=1,l=n+r[1]-r[0];break;default:o=e-1,l=t}const u=(n-t)*.5,c=this.valueSize;this._weightPrev=u/(t-a),this._weightNext=u/(l-n),this._offsetPrev=s*c,this._offsetNext=o*c}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=this._offsetPrev,A=this._offsetNext,m=this._weightPrev,_=this._weightNext,b=(n-t)/(r-t),M=b*b,w=M*b,T=-m*w+2*m*M-m*b,N=(1+m)*w+(-1.5-2*m)*M+(-.5+m)*b+1,P=(-1-_)*w+(1.5+_)*M+.5*b,I=_*w-_*M;for(let B=0;B!==a;++B)s[B]=T*o[c+B]+N*o[u+B]+P*o[l+B]+I*o[A+B];return s}}class Rv extends e6{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=e*a,u=l-a,c=(n-t)/(r-t),A=1-c;for(let m=0;m!==a;++m)s[m]=o[u+m]*A+o[l+m]*c;return s}}class $E extends e6{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e){return this.copySampleValue_(e-1)}}class r0{constructor(e,t,n,r){if(e===void 0)throw new Error("THREE.KeyframeTrack: track name is undefined");if(t===void 0||t.length===0)throw new Error("THREE.KeyframeTrack: no keyframes in track named "+e);this.name=e,this.times=B2(t,this.TimeBufferType),this.values=B2(n,this.ValueBufferType),this.setInterpolation(r||this.DefaultInterpolation)}static toJSON(e){const t=e.constructor;let n;if(t.toJSON!==this.toJSON)n=t.toJSON(e);else{n={name:e.name,times:B2(e.times,Array),values:B2(e.values,Array)};const r=e.getInterpolation();r!==e.DefaultInterpolation&&(n.interpolation=r)}return n.type=e.ValueTypeName,n}InterpolantFactoryMethodDiscrete(e){return new $E(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodLinear(e){return new Rv(this.times,this.values,this.getValueSize(),e)}InterpolantFactoryMethodSmooth(e){return new jE(this.times,this.values,this.getValueSize(),e)}setInterpolation(e){let t;switch(e){case s8:t=this.InterpolantFactoryMethodDiscrete;break;case od:t=this.InterpolantFactoryMethodLinear;break;case kf:t=this.InterpolantFactoryMethodSmooth;break}if(t===void 0){const n="unsupported interpolation for "+this.ValueTypeName+" keyframe track named "+this.name;if(this.createInterpolant===void 0)if(e!==this.DefaultInterpolation)this.setInterpolation(this.DefaultInterpolation);else throw new Error(n);return console.warn("THREE.KeyframeTrack:",n),this}return this.createInterpolant=t,this}getInterpolation(){switch(this.createInterpolant){case this.InterpolantFactoryMethodDiscrete:return s8;case this.InterpolantFactoryMethodLinear:return od;case this.InterpolantFactoryMethodSmooth:return kf}}getValueSize(){return this.values.length/this.times.length}shift(e){if(e!==0){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]+=e}return this}scale(e){if(e!==1){const t=this.times;for(let n=0,r=t.length;n!==r;++n)t[n]*=e}return this}trim(e,t){const n=this.times,r=n.length;let s=0,o=r-1;for(;s!==r&&n[s]<e;)++s;for(;o!==-1&&n[o]>t;)--o;if(++o,s!==0||o!==r){s>=o&&(o=Math.max(o,1),s=o-1);const a=this.getValueSize();this.times=n.slice(s,o),this.values=this.values.slice(s*a,o*a)}return this}validate(){let e=!0;const t=this.getValueSize();t-Math.floor(t)!==0&&(console.error("THREE.KeyframeTrack: Invalid value size in track.",this),e=!1);const n=this.times,r=this.values,s=n.length;s===0&&(console.error("THREE.KeyframeTrack: Track is empty.",this),e=!1);let o=null;for(let a=0;a!==s;a++){const l=n[a];if(typeof l=="number"&&isNaN(l)){console.error("THREE.KeyframeTrack: Time is not a valid number.",this,a,l),e=!1;break}if(o!==null&&o>l){console.error("THREE.KeyframeTrack: Out of order keys.",this,a,l,o),e=!1;break}o=l}if(r!==void 0&&HE(r))for(let a=0,l=r.length;a!==l;++a){const u=r[a];if(isNaN(u)){console.error("THREE.KeyframeTrack: Value is not a valid number.",this,a,u),e=!1;break}}return e}optimize(){const e=this.times.slice(),t=this.values.slice(),n=this.getValueSize(),r=this.getInterpolation()===kf,s=e.length-1;let o=1;for(let a=1;a<s;++a){let l=!1;const u=e[a],c=e[a+1];if(u!==c&&(a!==1||u!==e[0]))if(r)l=!0;else{const A=a*n,m=A-n,_=A+n;for(let b=0;b!==n;++b){const M=t[A+b];if(M!==t[m+b]||M!==t[_+b]){l=!0;break}}}if(l){if(a!==o){e[o]=e[a];const A=a*n,m=o*n;for(let _=0;_!==n;++_)t[m+_]=t[A+_]}++o}}if(s>0){e[o]=e[s];for(let a=s*n,l=o*n,u=0;u!==n;++u)t[l+u]=t[a+u];++o}return o!==e.length?(this.times=e.slice(0,o),this.values=t.slice(0,o*n)):(this.times=e,this.values=t),this}clone(){const e=this.times.slice(),t=this.values.slice(),n=this.constructor,r=new n(this.name,e,t);return r.createInterpolant=this.createInterpolant,r}}r0.prototype.ValueTypeName="";r0.prototype.TimeBufferType=Float32Array;r0.prototype.ValueBufferType=Float32Array;r0.prototype.DefaultInterpolation=od;class Nc extends r0{constructor(e,t,n){super(e,t,n)}}Nc.prototype.ValueTypeName="bool";Nc.prototype.ValueBufferType=Array;Nc.prototype.DefaultInterpolation=s8;Nc.prototype.InterpolantFactoryMethodLinear=void 0;Nc.prototype.InterpolantFactoryMethodSmooth=void 0;class Cv extends r0{constructor(e,t,n,r){super(e,t,n,r)}}Cv.prototype.ValueTypeName="color";class h8 extends r0{constructor(e,t,n,r){super(e,t,n,r)}}h8.prototype.ValueTypeName="number";class XE extends e6{constructor(e,t,n,r){super(e,t,n,r)}interpolate_(e,t,n,r){const s=this.resultBuffer,o=this.sampleValues,a=this.valueSize,l=(n-t)/(r-t);let u=e*a;for(let c=u+a;u!==c;u+=4)Os.slerpFlat(s,0,o,u-a,o,u,l);return s}}class t6 extends r0{constructor(e,t,n,r){super(e,t,n,r)}InterpolantFactoryMethodLinear(e){return new XE(this.times,this.values,this.getValueSize(),e)}}t6.prototype.ValueTypeName="quaternion";t6.prototype.InterpolantFactoryMethodSmooth=void 0;class Ic extends r0{constructor(e,t,n){super(e,t,n)}}Ic.prototype.ValueTypeName="string";Ic.prototype.ValueBufferType=Array;Ic.prototype.DefaultInterpolation=s8;Ic.prototype.InterpolantFactoryMethodLinear=void 0;Ic.prototype.InterpolantFactoryMethodSmooth=void 0;class f8 extends r0{constructor(e,t,n,r){super(e,t,n,r)}}f8.prototype.ValueTypeName="vector";class d8{constructor(e="",t=-1,n=[],r=x9){this.name=e,this.tracks=n,this.duration=t,this.blendMode=r,this.uuid=va(),this.duration<0&&this.resetDuration()}static parse(e){const t=[],n=e.tracks,r=1/(e.fps||1);for(let o=0,a=n.length;o!==a;++o)t.push(GU(n[o]).scale(r));const s=new this(e.name,e.duration,t,e.blendMode);return s.uuid=e.uuid,s}static toJSON(e){const t=[],n=e.tracks,r={name:e.name,duration:e.duration,tracks:t,uuid:e.uuid,blendMode:e.blendMode};for(let s=0,o=n.length;s!==o;++s)t.push(r0.toJSON(n[s]));return r}static CreateFromMorphTargetSequence(e,t,n,r){const s=t.length,o=[];for(let a=0;a<s;a++){let l=[],u=[];l.push((a+s-1)%s,a,(a+1)%s),u.push(0,1,0);const c=WE(l);l=yg(l,1,c),u=yg(u,1,c),!r&&l[0]===0&&(l.push(s),u.push(u[0])),o.push(new h8(".morphTargetInfluences["+t[a].name+"]",l,u).scale(1/n))}return new this(e,-1,o)}static findByName(e,t){let n=e;if(!Array.isArray(e)){const r=e;n=r.geometry&&r.geometry.animations||r.animations}for(let r=0;r<n.length;r++)if(n[r].name===t)return n[r];return null}static CreateClipsFromMorphTargetSequences(e,t,n){const r={},s=/^([\w-]*?)([\d]+)$/;for(let a=0,l=e.length;a<l;a++){const u=e[a],c=u.name.match(s);if(c&&c.length>1){const A=c[1];let m=r[A];m||(r[A]=m=[]),m.push(u)}}const o=[];for(const a in r)o.push(this.CreateFromMorphTargetSequence(a,r[a],t,n));return o}static parseAnimation(e,t){if(console.warn("THREE.AnimationClip: parseAnimation() is deprecated and will be removed with r185"),!e)return console.error("THREE.AnimationClip: No animation in JSONLoader data."),null;const n=function(A,m,_,b,M){if(_.length!==0){const w=[],T=[];Ev(_,w,T,b),w.length!==0&&M.push(new A(m,w,T))}},r=[],s=e.name||"default",o=e.fps||30,a=e.blendMode;let l=e.length||-1;const u=e.hierarchy||[];for(let A=0;A<u.length;A++){const m=u[A].keys;if(!(!m||m.length===0))if(m[0].morphTargets){const _={};let b;for(b=0;b<m.length;b++)if(m[b].morphTargets)for(let M=0;M<m[b].morphTargets.length;M++)_[m[b].morphTargets[M]]=-1;for(const M in _){const w=[],T=[];for(let N=0;N!==m[b].morphTargets.length;++N){const P=m[b];w.push(P.time),T.push(P.morphTarget===M?1:0)}r.push(new h8(".morphTargetInfluence["+M+"]",w,T))}l=_.length*o}else{const _=".bones["+t[A].name+"]";n(f8,_+".position",m,"pos",r),n(t6,_+".quaternion",m,"rot",r),n(f8,_+".scale",m,"scl",r)}}return r.length===0?null:new this(s,l,r,a)}resetDuration(){const e=this.tracks;let t=0;for(let n=0,r=e.length;n!==r;++n){const s=this.tracks[n];t=Math.max(t,s.times[s.times.length-1])}return this.duration=t,this}trim(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].trim(0,this.duration);return this}validate(){let e=!0;for(let t=0;t<this.tracks.length;t++)e=e&&this.tracks[t].validate();return e}optimize(){for(let e=0;e<this.tracks.length;e++)this.tracks[e].optimize();return this}clone(){const e=[];for(let t=0;t<this.tracks.length;t++)e.push(this.tracks[t].clone());return new this.constructor(this.name,this.duration,e,this.blendMode)}toJSON(){return this.constructor.toJSON(this)}}function zU(i){switch(i.toLowerCase()){case"scalar":case"double":case"float":case"number":case"integer":return h8;case"vector":case"vector2":case"vector3":case"vector4":return f8;case"color":return Cv;case"quaternion":return t6;case"bool":case"boolean":return Nc;case"string":return Ic}throw new Error("THREE.KeyframeTrack: Unsupported typeName: "+i)}function GU(i){if(i.type===void 0)throw new Error("THREE.KeyframeTrack: track type undefined, can not parse");const e=zU(i.type);if(i.times===void 0){const t=[],n=[];Ev(i.keys,t,n,"value"),i.times=t,i.values=n}return e.parse!==void 0?e.parse(i):new e(i.name,i.times,i.values,i.interpolation)}const il={enabled:!1,files:{},add:function(i,e){this.enabled!==!1&&(this.files[i]=e)},get:function(i){if(this.enabled!==!1)return this.files[i]},remove:function(i){delete this.files[i]},clear:function(){this.files={}}};class Pv{constructor(e,t,n){const r=this;let s=!1,o=0,a=0,l;const u=[];this.onStart=void 0,this.onLoad=e,this.onProgress=t,this.onError=n,this.abortController=new AbortController,this.itemStart=function(c){a++,s===!1&&r.onStart!==void 0&&r.onStart(c,o,a),s=!0},this.itemEnd=function(c){o++,r.onProgress!==void 0&&r.onProgress(c,o,a),o===a&&(s=!1,r.onLoad!==void 0&&r.onLoad())},this.itemError=function(c){r.onError!==void 0&&r.onError(c)},this.resolveURL=function(c){return l?l(c):c},this.setURLModifier=function(c){return l=c,this},this.addHandler=function(c,A){return u.push(c,A),this},this.removeHandler=function(c){const A=u.indexOf(c);return A!==-1&&u.splice(A,2),this},this.getHandler=function(c){for(let A=0,m=u.length;A<m;A+=2){const _=u[A],b=u[A+1];if(_.global&&(_.lastIndex=0),_.test(c))return b}return null},this.abort=function(){return this.abortController.abort(),this.abortController=new AbortController,this}}}const QE=new Pv;class Jo{constructor(e){this.manager=e!==void 0?e:QE,this.crossOrigin="anonymous",this.withCredentials=!1,this.path="",this.resourcePath="",this.requestHeader={}}load(){}loadAsync(e,t){const n=this;return new Promise(function(r,s){n.load(e,r,t,s)})}parse(){}setCrossOrigin(e){return this.crossOrigin=e,this}setWithCredentials(e){return this.withCredentials=e,this}setPath(e){return this.path=e,this}setResourcePath(e){return this.resourcePath=e,this}setRequestHeader(e){return this.requestHeader=e,this}abort(){return this}}Jo.DEFAULT_MATERIAL_NAME="__DEFAULT";const Ul={};class qU extends Error{constructor(e,t){super(e),this.response=t}}class s1 extends Jo{constructor(e){super(e),this.mimeType="",this.responseType="",this._abortController=new AbortController}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=il.get(`file:${e}`);if(s!==void 0)return this.manager.itemStart(e),setTimeout(()=>{t&&t(s),this.manager.itemEnd(e)},0),s;if(Ul[e]!==void 0){Ul[e].push({onLoad:t,onProgress:n,onError:r});return}Ul[e]=[],Ul[e].push({onLoad:t,onProgress:n,onError:r});const o=new Request(e,{headers:new Headers(this.requestHeader),credentials:this.withCredentials?"include":"same-origin",signal:typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal}),a=this.mimeType,l=this.responseType;fetch(o).then(u=>{if(u.status===200||u.status===0){if(u.status===0&&console.warn("THREE.FileLoader: HTTP Status 0 received."),typeof ReadableStream>"u"||u.body===void 0||u.body.getReader===void 0)return u;const c=Ul[e],A=u.body.getReader(),m=u.headers.get("X-File-Size")||u.headers.get("Content-Length"),_=m?parseInt(m):0,b=_!==0;let M=0;const w=new ReadableStream({start(T){N();function N(){A.read().then(({done:P,value:I})=>{if(P)T.close();else{M+=I.byteLength;const B=new ProgressEvent("progress",{lengthComputable:b,loaded:M,total:_});for(let F=0,O=c.length;F<O;F++){const V=c[F];V.onProgress&&V.onProgress(B)}T.enqueue(I),N()}},P=>{T.error(P)})}}});return new Response(w)}else throw new qU(`fetch for "${u.url}" responded with ${u.status}: ${u.statusText}`,u)}).then(u=>{switch(l){case"arraybuffer":return u.arrayBuffer();case"blob":return u.blob();case"document":return u.text().then(c=>new DOMParser().parseFromString(c,a));case"json":return u.json();default:if(a==="")return u.text();{const A=/charset="?([^;"\s]*)"?/i.exec(a),m=A&&A[1]?A[1].toLowerCase():void 0,_=new TextDecoder(m);return u.arrayBuffer().then(b=>_.decode(b))}}}).then(u=>{il.add(`file:${e}`,u);const c=Ul[e];delete Ul[e];for(let A=0,m=c.length;A<m;A++){const _=c[A];_.onLoad&&_.onLoad(u)}}).catch(u=>{const c=Ul[e];if(c===void 0)throw this.manager.itemError(e),u;delete Ul[e];for(let A=0,m=c.length;A<m;A++){const _=c[A];_.onError&&_.onError(u)}this.manager.itemError(e)}).finally(()=>{this.manager.itemEnd(e)}),this.manager.itemStart(e)}setResponseType(e){return this.responseType=e,this}setMimeType(e){return this.mimeType=e,this}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}class HU extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new s1(this.manager);o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=[];for(let n=0;n<e.length;n++){const r=d8.parse(e[n]);t.push(r)}return t}}class WU extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=this,o=[],a=new F9,l=new s1(this.manager);l.setPath(this.path),l.setResponseType("arraybuffer"),l.setRequestHeader(this.requestHeader),l.setWithCredentials(s.withCredentials);let u=0;function c(A){l.load(e[A],function(m){const _=s.parse(m,!0);o[A]={width:_.width,height:_.height,format:_.format,mipmaps:_.mipmaps},u+=1,u===6&&(_.mipmapCount===1&&(a.minFilter=Wi),a.image=o,a.format=_.format,a.needsUpdate=!0,t&&t(a))},n,r)}if(Array.isArray(e))for(let A=0,m=e.length;A<m;++A)c(A);else l.load(e,function(A){const m=s.parse(A,!0);if(m.isCubemap){const _=m.mipmaps.length/m.mipmapCount;for(let b=0;b<_;b++){o[b]={mipmaps:[]};for(let M=0;M<m.mipmapCount;M++)o[b].mipmaps.push(m.mipmaps[b*m.mipmapCount+M]),o[b].format=m.format,o[b].width=m.width,o[b].height=m.height}a.image=o}else a.image.width=m.width,a.image.height=m.height,a.mipmaps=m.mipmaps;m.mipmapCount===1&&(a.minFilter=Wi),a.format=m.format,a.needsUpdate=!0,t&&t(a)},n,r);return a}}const D3=new WeakMap;class A8 extends Jo{constructor(e){super(e)}load(e,t,n,r){this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=il.get(`image:${e}`);if(o!==void 0){if(o.complete===!0)s.manager.itemStart(e),setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0);else{let A=D3.get(o);A===void 0&&(A=[],D3.set(o,A)),A.push({onLoad:t,onError:r})}return o}const a=a8("img");function l(){c(),t&&t(this);const A=D3.get(this)||[];for(let m=0;m<A.length;m++){const _=A[m];_.onLoad&&_.onLoad(this)}D3.delete(this),s.manager.itemEnd(e)}function u(A){c(),r&&r(A),il.remove(`image:${e}`);const m=D3.get(this)||[];for(let _=0;_<m.length;_++){const b=m[_];b.onError&&b.onError(A)}D3.delete(this),s.manager.itemError(e),s.manager.itemEnd(e)}function c(){a.removeEventListener("load",l,!1),a.removeEventListener("error",u,!1)}return a.addEventListener("load",l,!1),a.addEventListener("error",u,!1),e.slice(0,5)!=="data:"&&this.crossOrigin!==void 0&&(a.crossOrigin=this.crossOrigin),il.add(`image:${e}`,a),s.manager.itemStart(e),a.src=e,a}}class jU extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=new vu;s.colorSpace=xs;const o=new A8(this.manager);o.setCrossOrigin(this.crossOrigin),o.setPath(this.path);let a=0;function l(u){o.load(e[u],function(c){s.images[u]=c,a++,a===6&&(s.needsUpdate=!0,t&&t(s))},void 0,r)}for(let u=0;u<e.length;++u)l(u);return s}}class $U extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new I0,a=new s1(this.manager);return a.setResponseType("arraybuffer"),a.setRequestHeader(this.requestHeader),a.setPath(this.path),a.setWithCredentials(s.withCredentials),a.load(e,function(l){let u;try{u=s.parse(l)}catch(c){if(r!==void 0)r(c);else{console.error(c);return}}u.image!==void 0?o.image=u.image:u.data!==void 0&&(o.image.width=u.width,o.image.height=u.height,o.image.data=u.data),o.wrapS=u.wrapS!==void 0?u.wrapS:xo,o.wrapT=u.wrapT!==void 0?u.wrapT:xo,o.magFilter=u.magFilter!==void 0?u.magFilter:Wi,o.minFilter=u.minFilter!==void 0?u.minFilter:Wi,o.anisotropy=u.anisotropy!==void 0?u.anisotropy:1,u.colorSpace!==void 0&&(o.colorSpace=u.colorSpace),u.flipY!==void 0&&(o.flipY=u.flipY),u.format!==void 0&&(o.format=u.format),u.type!==void 0&&(o.type=u.type),u.mipmaps!==void 0&&(o.mipmaps=u.mipmaps,o.minFilter=Fs),u.mipmapCount===1&&(o.minFilter=Wi),u.generateMipmaps!==void 0&&(o.generateMipmaps=u.generateMipmaps),o.needsUpdate=!0,t&&t(o,u)},n,r),o}}class Nv extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=new ur,o=new A8(this.manager);return o.setCrossOrigin(this.crossOrigin),o.setPath(this.path),o.load(e,function(a){s.image=a,s.needsUpdate=!0,t!==void 0&&t(s)},n,r),s}}class bu extends Ai{constructor(e,t=1){super(),this.isLight=!0,this.type="Light",this.color=new Et(e),this.intensity=t}dispose(){}copy(e,t){return super.copy(e,t),this.color.copy(e.color),this.intensity=e.intensity,this}toJSON(e){const t=super.toJSON(e);return t.object.color=this.color.getHex(),t.object.intensity=this.intensity,this.groundColor!==void 0&&(t.object.groundColor=this.groundColor.getHex()),this.distance!==void 0&&(t.object.distance=this.distance),this.angle!==void 0&&(t.object.angle=this.angle),this.decay!==void 0&&(t.object.decay=this.decay),this.penumbra!==void 0&&(t.object.penumbra=this.penumbra),this.shadow!==void 0&&(t.object.shadow=this.shadow.toJSON()),this.target!==void 0&&(t.object.target=this.target.uuid),t}}class Iv extends bu{constructor(e,t,n){super(e,n),this.isHemisphereLight=!0,this.type="HemisphereLight",this.position.copy(Ai.DEFAULT_UP),this.updateMatrix(),this.groundColor=new Et(t)}copy(e,t){return super.copy(e,t),this.groundColor.copy(e.groundColor),this}}const zp=new Wt,kb=new J,Vb=new J;class Lv{constructor(e){this.camera=e,this.intensity=1,this.bias=0,this.normalBias=0,this.radius=1,this.blurSamples=8,this.mapSize=new Ge(512,512),this.mapType=ar,this.map=null,this.mapPass=null,this.matrix=new Wt,this.autoUpdate=!0,this.needsUpdate=!1,this._frustum=new _u,this._frameExtents=new Ge(1,1),this._viewportCount=1,this._viewports=[new rn(0,0,1,1)]}getViewportCount(){return this._viewportCount}getFrustum(){return this._frustum}updateMatrices(e){const t=this.camera,n=this.matrix;kb.setFromMatrixPosition(e.matrixWorld),t.position.copy(kb),Vb.setFromMatrixPosition(e.target.matrixWorld),t.lookAt(Vb),t.updateMatrixWorld(),zp.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zp,t.coordinateSystem,t.reversedDepth),t.reversedDepth?n.set(.5,0,0,.5,0,.5,0,.5,0,0,1,0,0,0,0,1):n.set(.5,0,0,.5,0,.5,0,.5,0,0,.5,.5,0,0,0,1),n.multiply(zp)}getViewport(e){return this._viewports[e]}getFrameExtents(){return this._frameExtents}dispose(){this.map&&this.map.dispose(),this.mapPass&&this.mapPass.dispose()}copy(e){return this.camera=e.camera.clone(),this.intensity=e.intensity,this.bias=e.bias,this.radius=e.radius,this.autoUpdate=e.autoUpdate,this.needsUpdate=e.needsUpdate,this.normalBias=e.normalBias,this.blurSamples=e.blurSamples,this.mapSize.copy(e.mapSize),this}clone(){return new this.constructor().copy(this)}toJSON(){const e={};return this.intensity!==1&&(e.intensity=this.intensity),this.bias!==0&&(e.bias=this.bias),this.normalBias!==0&&(e.normalBias=this.normalBias),this.radius!==1&&(e.radius=this.radius),(this.mapSize.x!==512||this.mapSize.y!==512)&&(e.mapSize=this.mapSize.toArray()),e.camera=this.camera.toJSON(!1).object,delete e.camera.matrix,e}}class XU extends Lv{constructor(){super(new tr(50,1,.5,500)),this.isSpotLightShadow=!0,this.focus=1,this.aspect=1}updateMatrices(e){const t=this.camera,n=gc*2*e.angle*this.focus,r=this.mapSize.width/this.mapSize.height*this.aspect,s=e.distance||t.far;(n!==t.fov||r!==t.aspect||s!==t.far)&&(t.fov=n,t.aspect=r,t.far=s,t.updateProjectionMatrix()),super.updateMatrices(e)}copy(e){return super.copy(e),this.focus=e.focus,this}}class n6 extends bu{constructor(e,t,n=0,r=Math.PI/3,s=0,o=2){super(e,t),this.isSpotLight=!0,this.type="SpotLight",this.position.copy(Ai.DEFAULT_UP),this.updateMatrix(),this.target=new Ai,this.distance=n,this.angle=r,this.penumbra=s,this.decay=o,this.map=null,this.shadow=new XU}get power(){return this.intensity*Math.PI}set power(e){this.intensity=e/Math.PI}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.angle=e.angle,this.penumbra=e.penumbra,this.decay=e.decay,this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}const zb=new Wt,ah=new J,Gp=new J;class QU extends Lv{constructor(){super(new tr(90,1,.5,500)),this.isPointLightShadow=!0,this._frameExtents=new Ge(4,2),this._viewportCount=6,this._viewports=[new rn(2,1,1,1),new rn(0,1,1,1),new rn(3,1,1,1),new rn(1,1,1,1),new rn(3,0,1,1),new rn(1,0,1,1)],this._cubeDirections=[new J(1,0,0),new J(-1,0,0),new J(0,0,1),new J(0,0,-1),new J(0,1,0),new J(0,-1,0)],this._cubeUps=[new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,1,0),new J(0,0,1),new J(0,0,-1)]}updateMatrices(e,t=0){const n=this.camera,r=this.matrix,s=e.distance||n.far;s!==n.far&&(n.far=s,n.updateProjectionMatrix()),ah.setFromMatrixPosition(e.matrixWorld),n.position.copy(ah),Gp.copy(n.position),Gp.add(this._cubeDirections[t]),n.up.copy(this._cubeUps[t]),n.lookAt(Gp),n.updateMatrixWorld(),r.makeTranslation(-ah.x,-ah.y,-ah.z),zb.multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse),this._frustum.setFromProjectionMatrix(zb,n.coordinateSystem,n.reversedDepth)}}class Dv extends bu{constructor(e,t,n=0,r=2){super(e,t),this.isPointLight=!0,this.type="PointLight",this.distance=n,this.decay=r,this.shadow=new QU}get power(){return this.intensity*4*Math.PI}set power(e){this.intensity=e/(4*Math.PI)}dispose(){this.shadow.dispose()}copy(e,t){return super.copy(e,t),this.distance=e.distance,this.decay=e.decay,this.shadow=e.shadow.clone(),this}}class rl extends yu{constructor(e=-1,t=1,n=1,r=-1,s=.1,o=2e3){super(),this.isOrthographicCamera=!0,this.type="OrthographicCamera",this.zoom=1,this.view=null,this.left=e,this.right=t,this.top=n,this.bottom=r,this.near=s,this.far=o,this.updateProjectionMatrix()}copy(e,t){return super.copy(e,t),this.left=e.left,this.right=e.right,this.top=e.top,this.bottom=e.bottom,this.near=e.near,this.far=e.far,this.zoom=e.zoom,this.view=e.view===null?null:Object.assign({},e.view),this}setViewOffset(e,t,n,r,s,o){this.view===null&&(this.view={enabled:!0,fullWidth:1,fullHeight:1,offsetX:0,offsetY:0,width:1,height:1}),this.view.enabled=!0,this.view.fullWidth=e,this.view.fullHeight=t,this.view.offsetX=n,this.view.offsetY=r,this.view.width=s,this.view.height=o,this.updateProjectionMatrix()}clearViewOffset(){this.view!==null&&(this.view.enabled=!1),this.updateProjectionMatrix()}updateProjectionMatrix(){const e=(this.right-this.left)/(2*this.zoom),t=(this.top-this.bottom)/(2*this.zoom),n=(this.right+this.left)/2,r=(this.top+this.bottom)/2;let s=n-e,o=n+e,a=r+t,l=r-t;if(this.view!==null&&this.view.enabled){const u=(this.right-this.left)/this.view.fullWidth/this.zoom,c=(this.top-this.bottom)/this.view.fullHeight/this.zoom;s+=u*this.view.offsetX,o=s+u*this.view.width,a-=c*this.view.offsetY,l=a-c*this.view.height}this.projectionMatrix.makeOrthographic(s,o,a,l,this.near,this.far,this.coordinateSystem,this.reversedDepth),this.projectionMatrixInverse.copy(this.projectionMatrix).invert()}toJSON(e){const t=super.toJSON(e);return t.object.zoom=this.zoom,t.object.left=this.left,t.object.right=this.right,t.object.top=this.top,t.object.bottom=this.bottom,t.object.near=this.near,t.object.far=this.far,this.view!==null&&(t.object.view=Object.assign({},this.view)),t}}class YU extends Lv{constructor(){super(new rl(-5,5,5,-5,.5,500)),this.isDirectionalLightShadow=!0}}class Bv extends bu{constructor(e,t){super(e,t),this.isDirectionalLight=!0,this.type="DirectionalLight",this.position.copy(Ai.DEFAULT_UP),this.updateMatrix(),this.target=new Ai,this.shadow=new YU}dispose(){this.shadow.dispose()}copy(e){return super.copy(e),this.target=e.target.clone(),this.shadow=e.shadow.clone(),this}}class Fv extends bu{constructor(e,t){super(e,t),this.isAmbientLight=!0,this.type="AmbientLight"}}class Uv extends bu{constructor(e,t,n=10,r=10){super(e,t),this.isRectAreaLight=!0,this.type="RectAreaLight",this.width=n,this.height=r}get power(){return this.intensity*this.width*this.height*Math.PI}set power(e){this.intensity=e/(this.width*this.height*Math.PI)}copy(e){return super.copy(e),this.width=e.width,this.height=e.height,this}toJSON(e){const t=super.toJSON(e);return t.object.width=this.width,t.object.height=this.height,t}}class YE{constructor(){this.isSphericalHarmonics3=!0,this.coefficients=[];for(let e=0;e<9;e++)this.coefficients.push(new J)}set(e){for(let t=0;t<9;t++)this.coefficients[t].copy(e[t]);return this}zero(){for(let e=0;e<9;e++)this.coefficients[e].set(0,0,0);return this}getAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.282095),t.addScaledVector(o[1],.488603*r),t.addScaledVector(o[2],.488603*s),t.addScaledVector(o[3],.488603*n),t.addScaledVector(o[4],1.092548*(n*r)),t.addScaledVector(o[5],1.092548*(r*s)),t.addScaledVector(o[6],.315392*(3*s*s-1)),t.addScaledVector(o[7],1.092548*(n*s)),t.addScaledVector(o[8],.546274*(n*n-r*r)),t}getIrradianceAt(e,t){const n=e.x,r=e.y,s=e.z,o=this.coefficients;return t.copy(o[0]).multiplyScalar(.886227),t.addScaledVector(o[1],2*.511664*r),t.addScaledVector(o[2],2*.511664*s),t.addScaledVector(o[3],2*.511664*n),t.addScaledVector(o[4],2*.429043*n*r),t.addScaledVector(o[5],2*.429043*r*s),t.addScaledVector(o[6],.743125*s*s-.247708),t.addScaledVector(o[7],2*.429043*n*s),t.addScaledVector(o[8],.429043*(n*n-r*r)),t}add(e){for(let t=0;t<9;t++)this.coefficients[t].add(e.coefficients[t]);return this}addScaledSH(e,t){for(let n=0;n<9;n++)this.coefficients[n].addScaledVector(e.coefficients[n],t);return this}scale(e){for(let t=0;t<9;t++)this.coefficients[t].multiplyScalar(e);return this}lerp(e,t){for(let n=0;n<9;n++)this.coefficients[n].lerp(e.coefficients[n],t);return this}equals(e){for(let t=0;t<9;t++)if(!this.coefficients[t].equals(e.coefficients[t]))return!1;return!0}copy(e){return this.set(e.coefficients)}clone(){return new this.constructor().copy(this)}fromArray(e,t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].fromArray(e,t+r*3);return this}toArray(e=[],t=0){const n=this.coefficients;for(let r=0;r<9;r++)n[r].toArray(e,t+r*3);return e}static getBasisAt(e,t){const n=e.x,r=e.y,s=e.z;t[0]=.282095,t[1]=.488603*r,t[2]=.488603*s,t[3]=.488603*n,t[4]=1.092548*n*r,t[5]=1.092548*r*s,t[6]=.315392*(3*s*s-1),t[7]=1.092548*n*s,t[8]=.546274*(n*n-r*r)}}class Ov extends bu{constructor(e=new YE,t=1){super(void 0,t),this.isLightProbe=!0,this.sh=e}copy(e){return super.copy(e),this.sh.copy(e.sh),this}fromJSON(e){return this.intensity=e.intensity,this.sh.fromArray(e.sh),this}toJSON(e){const t=super.toJSON(e);return t.object.sh=this.sh.toArray(),t}}class Q9 extends Jo{constructor(e){super(e),this.textures={}}load(e,t,n,r){const s=this,o=new s1(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t=this.textures;function n(s){return t[s]===void 0&&console.warn("THREE.MaterialLoader: Undefined texture",s),t[s]}const r=this.createMaterialFromType(e.type);if(e.uuid!==void 0&&(r.uuid=e.uuid),e.name!==void 0&&(r.name=e.name),e.color!==void 0&&r.color!==void 0&&r.color.setHex(e.color),e.roughness!==void 0&&(r.roughness=e.roughness),e.metalness!==void 0&&(r.metalness=e.metalness),e.sheen!==void 0&&(r.sheen=e.sheen),e.sheenColor!==void 0&&(r.sheenColor=new Et().setHex(e.sheenColor)),e.sheenRoughness!==void 0&&(r.sheenRoughness=e.sheenRoughness),e.emissive!==void 0&&r.emissive!==void 0&&r.emissive.setHex(e.emissive),e.specular!==void 0&&r.specular!==void 0&&r.specular.setHex(e.specular),e.specularIntensity!==void 0&&(r.specularIntensity=e.specularIntensity),e.specularColor!==void 0&&r.specularColor!==void 0&&r.specularColor.setHex(e.specularColor),e.shininess!==void 0&&(r.shininess=e.shininess),e.clearcoat!==void 0&&(r.clearcoat=e.clearcoat),e.clearcoatRoughness!==void 0&&(r.clearcoatRoughness=e.clearcoatRoughness),e.dispersion!==void 0&&(r.dispersion=e.dispersion),e.iridescence!==void 0&&(r.iridescence=e.iridescence),e.iridescenceIOR!==void 0&&(r.iridescenceIOR=e.iridescenceIOR),e.iridescenceThicknessRange!==void 0&&(r.iridescenceThicknessRange=e.iridescenceThicknessRange),e.transmission!==void 0&&(r.transmission=e.transmission),e.thickness!==void 0&&(r.thickness=e.thickness),e.attenuationDistance!==void 0&&(r.attenuationDistance=e.attenuationDistance),e.attenuationColor!==void 0&&r.attenuationColor!==void 0&&r.attenuationColor.setHex(e.attenuationColor),e.anisotropy!==void 0&&(r.anisotropy=e.anisotropy),e.anisotropyRotation!==void 0&&(r.anisotropyRotation=e.anisotropyRotation),e.fog!==void 0&&(r.fog=e.fog),e.flatShading!==void 0&&(r.flatShading=e.flatShading),e.blending!==void 0&&(r.blending=e.blending),e.combine!==void 0&&(r.combine=e.combine),e.side!==void 0&&(r.side=e.side),e.shadowSide!==void 0&&(r.shadowSide=e.shadowSide),e.opacity!==void 0&&(r.opacity=e.opacity),e.transparent!==void 0&&(r.transparent=e.transparent),e.alphaTest!==void 0&&(r.alphaTest=e.alphaTest),e.alphaHash!==void 0&&(r.alphaHash=e.alphaHash),e.depthFunc!==void 0&&(r.depthFunc=e.depthFunc),e.depthTest!==void 0&&(r.depthTest=e.depthTest),e.depthWrite!==void 0&&(r.depthWrite=e.depthWrite),e.colorWrite!==void 0&&(r.colorWrite=e.colorWrite),e.blendSrc!==void 0&&(r.blendSrc=e.blendSrc),e.blendDst!==void 0&&(r.blendDst=e.blendDst),e.blendEquation!==void 0&&(r.blendEquation=e.blendEquation),e.blendSrcAlpha!==void 0&&(r.blendSrcAlpha=e.blendSrcAlpha),e.blendDstAlpha!==void 0&&(r.blendDstAlpha=e.blendDstAlpha),e.blendEquationAlpha!==void 0&&(r.blendEquationAlpha=e.blendEquationAlpha),e.blendColor!==void 0&&r.blendColor!==void 0&&r.blendColor.setHex(e.blendColor),e.blendAlpha!==void 0&&(r.blendAlpha=e.blendAlpha),e.stencilWriteMask!==void 0&&(r.stencilWriteMask=e.stencilWriteMask),e.stencilFunc!==void 0&&(r.stencilFunc=e.stencilFunc),e.stencilRef!==void 0&&(r.stencilRef=e.stencilRef),e.stencilFuncMask!==void 0&&(r.stencilFuncMask=e.stencilFuncMask),e.stencilFail!==void 0&&(r.stencilFail=e.stencilFail),e.stencilZFail!==void 0&&(r.stencilZFail=e.stencilZFail),e.stencilZPass!==void 0&&(r.stencilZPass=e.stencilZPass),e.stencilWrite!==void 0&&(r.stencilWrite=e.stencilWrite),e.wireframe!==void 0&&(r.wireframe=e.wireframe),e.wireframeLinewidth!==void 0&&(r.wireframeLinewidth=e.wireframeLinewidth),e.wireframeLinecap!==void 0&&(r.wireframeLinecap=e.wireframeLinecap),e.wireframeLinejoin!==void 0&&(r.wireframeLinejoin=e.wireframeLinejoin),e.rotation!==void 0&&(r.rotation=e.rotation),e.linewidth!==void 0&&(r.linewidth=e.linewidth),e.dashSize!==void 0&&(r.dashSize=e.dashSize),e.gapSize!==void 0&&(r.gapSize=e.gapSize),e.scale!==void 0&&(r.scale=e.scale),e.polygonOffset!==void 0&&(r.polygonOffset=e.polygonOffset),e.polygonOffsetFactor!==void 0&&(r.polygonOffsetFactor=e.polygonOffsetFactor),e.polygonOffsetUnits!==void 0&&(r.polygonOffsetUnits=e.polygonOffsetUnits),e.dithering!==void 0&&(r.dithering=e.dithering),e.alphaToCoverage!==void 0&&(r.alphaToCoverage=e.alphaToCoverage),e.premultipliedAlpha!==void 0&&(r.premultipliedAlpha=e.premultipliedAlpha),e.forceSinglePass!==void 0&&(r.forceSinglePass=e.forceSinglePass),e.visible!==void 0&&(r.visible=e.visible),e.toneMapped!==void 0&&(r.toneMapped=e.toneMapped),e.userData!==void 0&&(r.userData=e.userData),e.vertexColors!==void 0&&(typeof e.vertexColors=="number"?r.vertexColors=e.vertexColors>0:r.vertexColors=e.vertexColors),e.uniforms!==void 0)for(const s in e.uniforms){const o=e.uniforms[s];switch(r.uniforms[s]={},o.type){case"t":r.uniforms[s].value=n(o.value);break;case"c":r.uniforms[s].value=new Et().setHex(o.value);break;case"v2":r.uniforms[s].value=new Ge().fromArray(o.value);break;case"v3":r.uniforms[s].value=new J().fromArray(o.value);break;case"v4":r.uniforms[s].value=new rn().fromArray(o.value);break;case"m3":r.uniforms[s].value=new Fn().fromArray(o.value);break;case"m4":r.uniforms[s].value=new Wt().fromArray(o.value);break;default:r.uniforms[s].value=o.value}}if(e.defines!==void 0&&(r.defines=e.defines),e.vertexShader!==void 0&&(r.vertexShader=e.vertexShader),e.fragmentShader!==void 0&&(r.fragmentShader=e.fragmentShader),e.glslVersion!==void 0&&(r.glslVersion=e.glslVersion),e.extensions!==void 0)for(const s in e.extensions)r.extensions[s]=e.extensions[s];if(e.lights!==void 0&&(r.lights=e.lights),e.clipping!==void 0&&(r.clipping=e.clipping),e.size!==void 0&&(r.size=e.size),e.sizeAttenuation!==void 0&&(r.sizeAttenuation=e.sizeAttenuation),e.map!==void 0&&(r.map=n(e.map)),e.matcap!==void 0&&(r.matcap=n(e.matcap)),e.alphaMap!==void 0&&(r.alphaMap=n(e.alphaMap)),e.bumpMap!==void 0&&(r.bumpMap=n(e.bumpMap)),e.bumpScale!==void 0&&(r.bumpScale=e.bumpScale),e.normalMap!==void 0&&(r.normalMap=n(e.normalMap)),e.normalMapType!==void 0&&(r.normalMapType=e.normalMapType),e.normalScale!==void 0){let s=e.normalScale;Array.isArray(s)===!1&&(s=[s,s]),r.normalScale=new Ge().fromArray(s)}return e.displacementMap!==void 0&&(r.displacementMap=n(e.displacementMap)),e.displacementScale!==void 0&&(r.displacementScale=e.displacementScale),e.displacementBias!==void 0&&(r.displacementBias=e.displacementBias),e.roughnessMap!==void 0&&(r.roughnessMap=n(e.roughnessMap)),e.metalnessMap!==void 0&&(r.metalnessMap=n(e.metalnessMap)),e.emissiveMap!==void 0&&(r.emissiveMap=n(e.emissiveMap)),e.emissiveIntensity!==void 0&&(r.emissiveIntensity=e.emissiveIntensity),e.specularMap!==void 0&&(r.specularMap=n(e.specularMap)),e.specularIntensityMap!==void 0&&(r.specularIntensityMap=n(e.specularIntensityMap)),e.specularColorMap!==void 0&&(r.specularColorMap=n(e.specularColorMap)),e.envMap!==void 0&&(r.envMap=n(e.envMap)),e.envMapRotation!==void 0&&r.envMapRotation.fromArray(e.envMapRotation),e.envMapIntensity!==void 0&&(r.envMapIntensity=e.envMapIntensity),e.reflectivity!==void 0&&(r.reflectivity=e.reflectivity),e.refractionRatio!==void 0&&(r.refractionRatio=e.refractionRatio),e.lightMap!==void 0&&(r.lightMap=n(e.lightMap)),e.lightMapIntensity!==void 0&&(r.lightMapIntensity=e.lightMapIntensity),e.aoMap!==void 0&&(r.aoMap=n(e.aoMap)),e.aoMapIntensity!==void 0&&(r.aoMapIntensity=e.aoMapIntensity),e.gradientMap!==void 0&&(r.gradientMap=n(e.gradientMap)),e.clearcoatMap!==void 0&&(r.clearcoatMap=n(e.clearcoatMap)),e.clearcoatRoughnessMap!==void 0&&(r.clearcoatRoughnessMap=n(e.clearcoatRoughnessMap)),e.clearcoatNormalMap!==void 0&&(r.clearcoatNormalMap=n(e.clearcoatNormalMap)),e.clearcoatNormalScale!==void 0&&(r.clearcoatNormalScale=new Ge().fromArray(e.clearcoatNormalScale)),e.iridescenceMap!==void 0&&(r.iridescenceMap=n(e.iridescenceMap)),e.iridescenceThicknessMap!==void 0&&(r.iridescenceThicknessMap=n(e.iridescenceThicknessMap)),e.transmissionMap!==void 0&&(r.transmissionMap=n(e.transmissionMap)),e.thicknessMap!==void 0&&(r.thicknessMap=n(e.thicknessMap)),e.anisotropyMap!==void 0&&(r.anisotropyMap=n(e.anisotropyMap)),e.sheenColorMap!==void 0&&(r.sheenColorMap=n(e.sheenColorMap)),e.sheenRoughnessMap!==void 0&&(r.sheenRoughnessMap=n(e.sheenRoughnessMap)),r}setTextures(e){return this.textures=e,this}createMaterialFromType(e){return Q9.createMaterialFromType(e)}static createMaterialFromType(e){const t={ShadowMaterial:vv,SpriteMaterial:D9,RawShaderMaterial:qE,ShaderMaterial:To,PointsMaterial:Q8,MeshPhysicalMaterial:_v,MeshStandardMaterial:$9,MeshPhongMaterial:X9,MeshToonMaterial:xv,MeshNormalMaterial:bv,MeshLambertMaterial:U0,MeshDepthMaterial:Sv,MeshDistanceMaterial:Tv,MeshBasicMaterial:Bs,MeshMatcapMaterial:wv,LineDashedMaterial:Mv,LineBasicMaterial:hs,Material:ws};return new t[e]}}class vg{static extractUrlBase(e){const t=e.lastIndexOf("/");return t===-1?"./":e.slice(0,t+1)}static resolveURL(e,t){return typeof e!="string"||e===""?"":(/^https?:\/\//i.test(t)&&/^\//.test(e)&&(t=t.replace(/(^https?:\/\/[^\/]+).*/i,"$1")),/^(https?:)?\/\//i.test(e)||/^data:.*,.*$/i.test(e)||/^blob:.*$/i.test(e)?e:t+e)}}class kv extends Tn{constructor(){super(),this.isInstancedBufferGeometry=!0,this.type="InstancedBufferGeometry",this.instanceCount=1/0}copy(e){return super.copy(e),this.instanceCount=e.instanceCount,this}toJSON(){const e=super.toJSON();return e.instanceCount=this.instanceCount,e.isInstancedBufferGeometry=!0,e}}class KE extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new s1(s.manager);o.setPath(s.path),o.setRequestHeader(s.requestHeader),o.setWithCredentials(s.withCredentials),o.load(e,function(a){try{t(s.parse(JSON.parse(a)))}catch(l){r?r(l):console.error(l),s.manager.itemError(e)}},n,r)}parse(e){const t={},n={};function r(_,b){if(t[b]!==void 0)return t[b];const w=_.interleavedBuffers[b],T=s(_,w.buffer),N=a4(w.type,T),P=new u5(N,w.stride);return P.uuid=w.uuid,t[b]=P,P}function s(_,b){if(n[b]!==void 0)return n[b];const w=_.arrayBuffers[b],T=new Uint32Array(w).buffer;return n[b]=T,T}const o=e.isInstancedBufferGeometry?new kv:new Tn,a=e.data.index;if(a!==void 0){const _=a4(a.type,a.array);o.setIndex(new oi(_,1))}const l=e.data.attributes;for(const _ in l){const b=l[_];let M;if(b.isInterleavedBufferAttribute){const w=r(e.data,b.data);M=new bo(w,b.itemSize,b.offset,b.normalized)}else{const w=a4(b.type,b.array),T=b.isInstancedBufferAttribute?Xo:oi;M=new T(w,b.itemSize,b.normalized)}b.name!==void 0&&(M.name=b.name),b.usage!==void 0&&M.setUsage(b.usage),o.setAttribute(_,M)}const u=e.data.morphAttributes;if(u)for(const _ in u){const b=u[_],M=[];for(let w=0,T=b.length;w<T;w++){const N=b[w];let P;if(N.isInterleavedBufferAttribute){const I=r(e.data,N.data);P=new bo(I,N.itemSize,N.offset,N.normalized)}else{const I=a4(N.type,N.array);P=new oi(I,N.itemSize,N.normalized)}N.name!==void 0&&(P.name=N.name),M.push(P)}o.morphAttributes[_]=M}e.data.morphTargetsRelative&&(o.morphTargetsRelative=!0);const A=e.data.groups||e.data.drawcalls||e.data.offsets;if(A!==void 0)for(let _=0,b=A.length;_!==b;++_){const M=A[_];o.addGroup(M.start,M.count,M.materialIndex)}const m=e.data.boundingSphere;return m!==void 0&&(o.boundingSphere=new Kr().fromJSON(m)),e.name&&(o.name=e.name),e.userData&&(o.userData=e.userData),o}}class KU extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=this,o=this.path===""?vg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||o;const a=new s1(this.manager);a.setPath(this.path),a.setRequestHeader(this.requestHeader),a.setWithCredentials(this.withCredentials),a.load(e,function(l){let u=null;try{u=JSON.parse(l)}catch(A){r!==void 0&&r(A),console.error("THREE:ObjectLoader: Can't parse "+e+".",A.message);return}const c=u.metadata;if(c===void 0||c.type===void 0||c.type.toLowerCase()==="geometry"){r!==void 0&&r(new Error("THREE.ObjectLoader: Can't load "+e)),console.error("THREE.ObjectLoader: Can't load "+e);return}s.parse(u,t)},n,r)}async loadAsync(e,t){const n=this,r=this.path===""?vg.extractUrlBase(e):this.path;this.resourcePath=this.resourcePath||r;const s=new s1(this.manager);s.setPath(this.path),s.setRequestHeader(this.requestHeader),s.setWithCredentials(this.withCredentials);const o=await s.loadAsync(e,t),a=JSON.parse(o),l=a.metadata;if(l===void 0||l.type===void 0||l.type.toLowerCase()==="geometry")throw new Error("THREE.ObjectLoader: Can't load "+e);return await n.parseAsync(a)}parse(e,t){const n=this.parseAnimations(e.animations),r=this.parseShapes(e.shapes),s=this.parseGeometries(e.geometries,r),o=this.parseImages(e.images,function(){t!==void 0&&t(u)}),a=this.parseTextures(e.textures,o),l=this.parseMaterials(e.materials,a),u=this.parseObject(e.object,s,l,a,n),c=this.parseSkeletons(e.skeletons,u);if(this.bindSkeletons(u,c),this.bindLightTargets(u),t!==void 0){let A=!1;for(const m in o)if(o[m].data instanceof HTMLImageElement){A=!0;break}A===!1&&t(u)}return u}async parseAsync(e){const t=this.parseAnimations(e.animations),n=this.parseShapes(e.shapes),r=this.parseGeometries(e.geometries,n),s=await this.parseImagesAsync(e.images),o=this.parseTextures(e.textures,s),a=this.parseMaterials(e.materials,o),l=this.parseObject(e.object,r,a,o,t),u=this.parseSkeletons(e.skeletons,l);return this.bindSkeletons(l,u),this.bindLightTargets(l),l}parseShapes(e){const t={};if(e!==void 0)for(let n=0,r=e.length;n<r;n++){const s=new H2().fromJSON(e[n]);t[s.uuid]=s}return t}parseSkeletons(e,t){const n={},r={};if(t.traverse(function(s){s.isBone&&(r[s.uuid]=s)}),e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=new B9().fromJSON(e[s],r);n[a.uuid]=a}return n}parseGeometries(e,t){const n={};if(e!==void 0){const r=new KE;for(let s=0,o=e.length;s<o;s++){let a;const l=e[s];switch(l.type){case"BufferGeometry":case"InstancedBufferGeometry":a=r.parse(l);break;default:l.type in Ob?a=Ob[l.type].fromJSON(l,t):console.warn(`THREE.ObjectLoader: Unsupported geometry type "${l.type}"`)}a.uuid=l.uuid,l.name!==void 0&&(a.name=l.name),l.userData!==void 0&&(a.userData=l.userData),n[l.uuid]=a}}return n}parseMaterials(e,t){const n={},r={};if(e!==void 0){const s=new Q9;s.setTextures(t);for(let o=0,a=e.length;o<a;o++){const l=e[o];n[l.uuid]===void 0&&(n[l.uuid]=s.parse(l)),r[l.uuid]=n[l.uuid]}}return r}parseAnimations(e){const t={};if(e!==void 0)for(let n=0;n<e.length;n++){const r=e[n],s=d8.parse(r);t[s.uuid]=s}return t}parseImages(e,t){const n=this,r={};let s;function o(l){return n.manager.itemStart(l),s.load(l,function(){n.manager.itemEnd(l)},void 0,function(){n.manager.itemError(l),n.manager.itemEnd(l)})}function a(l){if(typeof l=="string"){const u=l,c=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(u)?u:n.resourcePath+u;return o(c)}else return l.data?{data:a4(l.type,l.data),width:l.width,height:l.height}:null}if(e!==void 0&&e.length>0){const l=new Pv(t);s=new A8(l),s.setCrossOrigin(this.crossOrigin);for(let u=0,c=e.length;u<c;u++){const A=e[u],m=A.url;if(Array.isArray(m)){const _=[];for(let b=0,M=m.length;b<M;b++){const w=m[b],T=a(w);T!==null&&(T instanceof HTMLImageElement?_.push(T):_.push(new I0(T.data,T.width,T.height)))}r[A.uuid]=new iu(_)}else{const _=a(A.url);r[A.uuid]=new iu(_)}}}return r}async parseImagesAsync(e){const t=this,n={};let r;async function s(o){if(typeof o=="string"){const a=o,l=/^(\/\/)|([a-z]+:(\/\/)?)/i.test(a)?a:t.resourcePath+a;return await r.loadAsync(l)}else return o.data?{data:a4(o.type,o.data),width:o.width,height:o.height}:null}if(e!==void 0&&e.length>0){r=new A8(this.manager),r.setCrossOrigin(this.crossOrigin);for(let o=0,a=e.length;o<a;o++){const l=e[o],u=l.url;if(Array.isArray(u)){const c=[];for(let A=0,m=u.length;A<m;A++){const _=u[A],b=await s(_);b!==null&&(b instanceof HTMLImageElement?c.push(b):c.push(new I0(b.data,b.width,b.height)))}n[l.uuid]=new iu(c)}else{const c=await s(l.url);n[l.uuid]=new iu(c)}}}return n}parseTextures(e,t){function n(s,o){return typeof s=="number"?s:(console.warn("THREE.ObjectLoader.parseTexture: Constant should be in numeric form.",s),o[s])}const r={};if(e!==void 0)for(let s=0,o=e.length;s<o;s++){const a=e[s];a.image===void 0&&console.warn('THREE.ObjectLoader: No "image" specified for',a.uuid),t[a.image]===void 0&&console.warn("THREE.ObjectLoader: Undefined image",a.image);const l=t[a.image],u=l.data;let c;Array.isArray(u)?(c=new vu,u.length===6&&(c.needsUpdate=!0)):(u&&u.data?c=new I0:c=new ur,u&&(c.needsUpdate=!0)),c.source=l,c.uuid=a.uuid,a.name!==void 0&&(c.name=a.name),a.mapping!==void 0&&(c.mapping=n(a.mapping,ZU)),a.channel!==void 0&&(c.channel=a.channel),a.offset!==void 0&&c.offset.fromArray(a.offset),a.repeat!==void 0&&c.repeat.fromArray(a.repeat),a.center!==void 0&&c.center.fromArray(a.center),a.rotation!==void 0&&(c.rotation=a.rotation),a.wrap!==void 0&&(c.wrapS=n(a.wrap[0],Gb),c.wrapT=n(a.wrap[1],Gb)),a.format!==void 0&&(c.format=a.format),a.internalFormat!==void 0&&(c.internalFormat=a.internalFormat),a.type!==void 0&&(c.type=a.type),a.colorSpace!==void 0&&(c.colorSpace=a.colorSpace),a.minFilter!==void 0&&(c.minFilter=n(a.minFilter,qb)),a.magFilter!==void 0&&(c.magFilter=n(a.magFilter,qb)),a.anisotropy!==void 0&&(c.anisotropy=a.anisotropy),a.flipY!==void 0&&(c.flipY=a.flipY),a.generateMipmaps!==void 0&&(c.generateMipmaps=a.generateMipmaps),a.premultiplyAlpha!==void 0&&(c.premultiplyAlpha=a.premultiplyAlpha),a.unpackAlignment!==void 0&&(c.unpackAlignment=a.unpackAlignment),a.compareFunction!==void 0&&(c.compareFunction=a.compareFunction),a.userData!==void 0&&(c.userData=a.userData),r[a.uuid]=c}return r}parseObject(e,t,n,r,s){let o;function a(m){return t[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined geometry",m),t[m]}function l(m){if(m!==void 0){if(Array.isArray(m)){const _=[];for(let b=0,M=m.length;b<M;b++){const w=m[b];n[w]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",w),_.push(n[w])}return _}return n[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined material",m),n[m]}}function u(m){return r[m]===void 0&&console.warn("THREE.ObjectLoader: Undefined texture",m),r[m]}let c,A;switch(e.type){case"Scene":o=new Rc,e.background!==void 0&&(Number.isInteger(e.background)?o.background=new Et(e.background):o.background=u(e.background)),e.environment!==void 0&&(o.environment=u(e.environment)),e.fog!==void 0&&(e.fog.type==="Fog"?o.fog=new $8(e.fog.color,e.fog.near,e.fog.far):e.fog.type==="FogExp2"&&(o.fog=new L9(e.fog.color,e.fog.density)),e.fog.name!==""&&(o.fog.name=e.fog.name)),e.backgroundBlurriness!==void 0&&(o.backgroundBlurriness=e.backgroundBlurriness),e.backgroundIntensity!==void 0&&(o.backgroundIntensity=e.backgroundIntensity),e.backgroundRotation!==void 0&&o.backgroundRotation.fromArray(e.backgroundRotation),e.environmentIntensity!==void 0&&(o.environmentIntensity=e.environmentIntensity),e.environmentRotation!==void 0&&o.environmentRotation.fromArray(e.environmentRotation);break;case"PerspectiveCamera":o=new tr(e.fov,e.aspect,e.near,e.far),e.focus!==void 0&&(o.focus=e.focus),e.zoom!==void 0&&(o.zoom=e.zoom),e.filmGauge!==void 0&&(o.filmGauge=e.filmGauge),e.filmOffset!==void 0&&(o.filmOffset=e.filmOffset),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"OrthographicCamera":o=new rl(e.left,e.right,e.top,e.bottom,e.near,e.far),e.zoom!==void 0&&(o.zoom=e.zoom),e.view!==void 0&&(o.view=Object.assign({},e.view));break;case"AmbientLight":o=new Fv(e.color,e.intensity);break;case"DirectionalLight":o=new Bv(e.color,e.intensity),o.target=e.target||"";break;case"PointLight":o=new Dv(e.color,e.intensity,e.distance,e.decay);break;case"RectAreaLight":o=new Uv(e.color,e.intensity,e.width,e.height);break;case"SpotLight":o=new n6(e.color,e.intensity,e.distance,e.angle,e.penumbra,e.decay),o.target=e.target||"";break;case"HemisphereLight":o=new Iv(e.color,e.groundColor,e.intensity);break;case"LightProbe":o=new Ov().fromJSON(e);break;case"SkinnedMesh":c=a(e.geometry),A=l(e.material),o=new CE(c,A),e.bindMode!==void 0&&(o.bindMode=e.bindMode),e.bindMatrix!==void 0&&o.bindMatrix.fromArray(e.bindMatrix),e.skeleton!==void 0&&(o.skeleton=e.skeleton);break;case"Mesh":c=a(e.geometry),A=l(e.material),o=new ei(c,A);break;case"InstancedMesh":c=a(e.geometry),A=l(e.material);const m=e.count,_=e.instanceMatrix,b=e.instanceColor;o=new PE(c,A,m),o.instanceMatrix=new Xo(new Float32Array(_.array),16),b!==void 0&&(o.instanceColor=new Xo(new Float32Array(b.array),b.itemSize));break;case"BatchedMesh":c=a(e.geometry),A=l(e.material),o=new NE(e.maxInstanceCount,e.maxVertexCount,e.maxIndexCount,A),o.geometry=c,o.perObjectFrustumCulled=e.perObjectFrustumCulled,o.sortObjects=e.sortObjects,o._drawRanges=e.drawRanges,o._reservedRanges=e.reservedRanges,o._geometryInfo=e.geometryInfo.map(M=>{let w=null,T=null;return M.boundingBox!==void 0&&(w=new ls().fromJSON(M.boundingBox)),M.boundingSphere!==void 0&&(T=new Kr().fromJSON(M.boundingSphere)),{...M,boundingBox:w,boundingSphere:T}}),o._instanceInfo=e.instanceInfo,o._availableInstanceIds=e._availableInstanceIds,o._availableGeometryIds=e._availableGeometryIds,o._nextIndexStart=e.nextIndexStart,o._nextVertexStart=e.nextVertexStart,o._geometryCount=e.geometryCount,o._maxInstanceCount=e.maxInstanceCount,o._maxVertexCount=e.maxVertexCount,o._maxIndexCount=e.maxIndexCount,o._geometryInitialized=e.geometryInitialized,o._matricesTexture=u(e.matricesTexture.uuid),o._indirectTexture=u(e.indirectTexture.uuid),e.colorsTexture!==void 0&&(o._colorsTexture=u(e.colorsTexture.uuid)),e.boundingSphere!==void 0&&(o.boundingSphere=new Kr().fromJSON(e.boundingSphere)),e.boundingBox!==void 0&&(o.boundingBox=new ls().fromJSON(e.boundingBox));break;case"LOD":o=new RE;break;case"Line":o=new D0(a(e.geometry),l(e.material));break;case"LineLoop":o=new IE(a(e.geometry),l(e.material));break;case"LineSegments":o=new t0(a(e.geometry),l(e.material));break;case"PointCloud":case"Points":o=new uv(a(e.geometry),l(e.material));break;case"Sprite":o=new EE(l(e.material));break;case"Group":o=new Zs;break;case"Bone":o=new lv;break;default:o=new Ai}if(o.uuid=e.uuid,e.name!==void 0&&(o.name=e.name),e.matrix!==void 0?(o.matrix.fromArray(e.matrix),e.matrixAutoUpdate!==void 0&&(o.matrixAutoUpdate=e.matrixAutoUpdate),o.matrixAutoUpdate&&o.matrix.decompose(o.position,o.quaternion,o.scale)):(e.position!==void 0&&o.position.fromArray(e.position),e.rotation!==void 0&&o.rotation.fromArray(e.rotation),e.quaternion!==void 0&&o.quaternion.fromArray(e.quaternion),e.scale!==void 0&&o.scale.fromArray(e.scale)),e.up!==void 0&&o.up.fromArray(e.up),e.castShadow!==void 0&&(o.castShadow=e.castShadow),e.receiveShadow!==void 0&&(o.receiveShadow=e.receiveShadow),e.shadow&&(e.shadow.intensity!==void 0&&(o.shadow.intensity=e.shadow.intensity),e.shadow.bias!==void 0&&(o.shadow.bias=e.shadow.bias),e.shadow.normalBias!==void 0&&(o.shadow.normalBias=e.shadow.normalBias),e.shadow.radius!==void 0&&(o.shadow.radius=e.shadow.radius),e.shadow.mapSize!==void 0&&o.shadow.mapSize.fromArray(e.shadow.mapSize),e.shadow.camera!==void 0&&(o.shadow.camera=this.parseObject(e.shadow.camera))),e.visible!==void 0&&(o.visible=e.visible),e.frustumCulled!==void 0&&(o.frustumCulled=e.frustumCulled),e.renderOrder!==void 0&&(o.renderOrder=e.renderOrder),e.userData!==void 0&&(o.userData=e.userData),e.layers!==void 0&&(o.layers.mask=e.layers),e.children!==void 0){const m=e.children;for(let _=0;_<m.length;_++)o.add(this.parseObject(m[_],t,n,r,s))}if(e.animations!==void 0){const m=e.animations;for(let _=0;_<m.length;_++){const b=m[_];o.animations.push(s[b])}}if(e.type==="LOD"){e.autoUpdate!==void 0&&(o.autoUpdate=e.autoUpdate);const m=e.levels;for(let _=0;_<m.length;_++){const b=m[_],M=o.getObjectByProperty("uuid",b.object);M!==void 0&&o.addLevel(M,b.distance,b.hysteresis)}}return o}bindSkeletons(e,t){Object.keys(t).length!==0&&e.traverse(function(n){if(n.isSkinnedMesh===!0&&n.skeleton!==void 0){const r=t[n.skeleton];r===void 0?console.warn("THREE.ObjectLoader: No skeleton found with UUID:",n.skeleton):n.bind(r,n.bindMatrix)}})}bindLightTargets(e){e.traverse(function(t){if(t.isDirectionalLight||t.isSpotLight){const n=t.target,r=e.getObjectByProperty("uuid",n);r!==void 0?t.target=r:t.target=new Ai}})}}const ZU={UVMapping:k8,CubeReflectionMapping:_a,CubeRefractionMapping:Xa,EquirectangularReflectionMapping:fu,EquirectangularRefractionMapping:du,CubeUVReflectionMapping:t1},Gb={RepeatWrapping:n1,ClampToEdgeWrapping:xo,MirroredRepeatWrapping:i1},qb={NearestFilter:qi,NearestMipmapNearestFilter:V8,NearestMipmapLinearFilter:R0,LinearFilter:Wi,LinearMipmapNearestFilter:su,LinearMipmapLinearFilter:Fs},qp=new WeakMap;class JU extends Jo{constructor(e){super(e),this.isImageBitmapLoader=!0,typeof createImageBitmap>"u"&&console.warn("THREE.ImageBitmapLoader: createImageBitmap() not supported."),typeof fetch>"u"&&console.warn("THREE.ImageBitmapLoader: fetch() not supported."),this.options={premultiplyAlpha:"none"},this._abortController=new AbortController}setOptions(e){return this.options=e,this}load(e,t,n,r){e===void 0&&(e=""),this.path!==void 0&&(e=this.path+e),e=this.manager.resolveURL(e);const s=this,o=il.get(`image-bitmap:${e}`);if(o!==void 0){if(s.manager.itemStart(e),o.then){o.then(u=>{if(qp.has(o)===!0)r&&r(qp.get(o)),s.manager.itemError(e),s.manager.itemEnd(e);else return t&&t(u),s.manager.itemEnd(e),u});return}return setTimeout(function(){t&&t(o),s.manager.itemEnd(e)},0),o}const a={};a.credentials=this.crossOrigin==="anonymous"?"same-origin":"include",a.headers=this.requestHeader,a.signal=typeof AbortSignal.any=="function"?AbortSignal.any([this._abortController.signal,this.manager.abortController.signal]):this._abortController.signal;const l=fetch(e,a).then(function(u){return u.blob()}).then(function(u){return createImageBitmap(u,Object.assign(s.options,{colorSpaceConversion:"none"}))}).then(function(u){return il.add(`image-bitmap:${e}`,u),t&&t(u),s.manager.itemEnd(e),u}).catch(function(u){r&&r(u),qp.set(l,u),il.remove(`image-bitmap:${e}`),s.manager.itemError(e),s.manager.itemEnd(e)});il.add(`image-bitmap:${e}`,l),s.manager.itemStart(e)}abort(){return this._abortController.abort(),this._abortController=new AbortController,this}}let U7;class Vv{static getContext(){return U7===void 0&&(U7=new(window.AudioContext||window.webkitAudioContext)),U7}static setContext(e){U7=e}}class eO extends Jo{constructor(e){super(e)}load(e,t,n,r){const s=this,o=new s1(this.manager);o.setResponseType("arraybuffer"),o.setPath(this.path),o.setRequestHeader(this.requestHeader),o.setWithCredentials(this.withCredentials),o.load(e,function(l){try{const u=l.slice(0);Vv.getContext().decodeAudioData(u,function(A){t(A)}).catch(a)}catch(u){a(u)}},n,r);function a(l){r?r(l):console.error(l),s.manager.itemError(e)}}}const Hb=new Wt,Wb=new Wt,s2=new Wt;class tO{constructor(){this.type="StereoCamera",this.aspect=1,this.eyeSep=.064,this.cameraL=new tr,this.cameraL.layers.enable(1),this.cameraL.matrixAutoUpdate=!1,this.cameraR=new tr,this.cameraR.layers.enable(2),this.cameraR.matrixAutoUpdate=!1,this._cache={focus:null,fov:null,aspect:null,near:null,far:null,zoom:null,eyeSep:null}}update(e){const t=this._cache;if(t.focus!==e.focus||t.fov!==e.fov||t.aspect!==e.aspect*this.aspect||t.near!==e.near||t.far!==e.far||t.zoom!==e.zoom||t.eyeSep!==this.eyeSep){t.focus=e.focus,t.fov=e.fov,t.aspect=e.aspect*this.aspect,t.near=e.near,t.far=e.far,t.zoom=e.zoom,t.eyeSep=this.eyeSep,s2.copy(e.projectionMatrix);const r=t.eyeSep/2,s=r*t.near/t.focus,o=t.near*Math.tan(G2*t.fov*.5)/t.zoom;let a,l;Wb.elements[12]=-r,Hb.elements[12]=r,a=-o*t.aspect+s,l=o*t.aspect+s,s2.elements[0]=2*t.near/(l-a),s2.elements[8]=(l+a)/(l-a),this.cameraL.projectionMatrix.copy(s2),a=-o*t.aspect-s,l=o*t.aspect-s,s2.elements[0]=2*t.near/(l-a),s2.elements[8]=(l+a)/(l-a),this.cameraR.projectionMatrix.copy(s2)}this.cameraL.matrixWorld.copy(e.matrixWorld).multiply(Wb),this.cameraR.matrixWorld.copy(e.matrixWorld).multiply(Hb)}}class zv extends tr{constructor(e=[]){super(),this.isArrayCamera=!0,this.isMultiViewCamera=!1,this.cameras=e}}class Gv{constructor(e=!0){this.autoStart=e,this.startTime=0,this.oldTime=0,this.elapsedTime=0,this.running=!1}start(){this.startTime=performance.now(),this.oldTime=this.startTime,this.elapsedTime=0,this.running=!0}stop(){this.getElapsedTime(),this.running=!1,this.autoStart=!1}getElapsedTime(){return this.getDelta(),this.elapsedTime}getDelta(){let e=0;if(this.autoStart&&!this.running)return this.start(),0;if(this.running){const t=performance.now();e=(t-this.oldTime)/1e3,this.oldTime=t,this.elapsedTime+=e}return e}}const o2=new J,Hp=new Os,nO=new J,a2=new J,l2=new J;class iO extends Ai{constructor(){super(),this.type="AudioListener",this.context=Vv.getContext(),this.gain=this.context.createGain(),this.gain.connect(this.context.destination),this.filter=null,this.timeDelta=0,this._clock=new Gv}getInput(){return this.gain}removeFilter(){return this.filter!==null&&(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination),this.gain.connect(this.context.destination),this.filter=null),this}getFilter(){return this.filter}setFilter(e){return this.filter!==null?(this.gain.disconnect(this.filter),this.filter.disconnect(this.context.destination)):this.gain.disconnect(this.context.destination),this.filter=e,this.gain.connect(this.filter),this.filter.connect(this.context.destination),this}getMasterVolume(){return this.gain.gain.value}setMasterVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}updateMatrixWorld(e){super.updateMatrixWorld(e);const t=this.context.listener;if(this.timeDelta=this._clock.getDelta(),this.matrixWorld.decompose(o2,Hp,nO),a2.set(0,0,-1).applyQuaternion(Hp),l2.set(0,1,0).applyQuaternion(Hp),t.positionX){const n=this.context.currentTime+this.timeDelta;t.positionX.linearRampToValueAtTime(o2.x,n),t.positionY.linearRampToValueAtTime(o2.y,n),t.positionZ.linearRampToValueAtTime(o2.z,n),t.forwardX.linearRampToValueAtTime(a2.x,n),t.forwardY.linearRampToValueAtTime(a2.y,n),t.forwardZ.linearRampToValueAtTime(a2.z,n),t.upX.linearRampToValueAtTime(l2.x,n),t.upY.linearRampToValueAtTime(l2.y,n),t.upZ.linearRampToValueAtTime(l2.z,n)}else t.setPosition(o2.x,o2.y,o2.z),t.setOrientation(a2.x,a2.y,a2.z,l2.x,l2.y,l2.z)}}class ZE extends Ai{constructor(e){super(),this.type="Audio",this.listener=e,this.context=e.context,this.gain=this.context.createGain(),this.gain.connect(e.getInput()),this.autoplay=!1,this.buffer=null,this.detune=0,this.loop=!1,this.loopStart=0,this.loopEnd=0,this.offset=0,this.duration=void 0,this.playbackRate=1,this.isPlaying=!1,this.hasPlaybackControl=!0,this.source=null,this.sourceType="empty",this._startedAt=0,this._progress=0,this._connected=!1,this.filters=[]}getOutput(){return this.gain}setNodeSource(e){return this.hasPlaybackControl=!1,this.sourceType="audioNode",this.source=e,this.connect(),this}setMediaElementSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaNode",this.source=this.context.createMediaElementSource(e),this.connect(),this}setMediaStreamSource(e){return this.hasPlaybackControl=!1,this.sourceType="mediaStreamNode",this.source=this.context.createMediaStreamSource(e),this.connect(),this}setBuffer(e){return this.buffer=e,this.sourceType="buffer",this.autoplay&&this.play(),this}play(e=0){if(this.isPlaying===!0){console.warn("THREE.Audio: Audio is already playing.");return}if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}this._startedAt=this.context.currentTime+e;const t=this.context.createBufferSource();return t.buffer=this.buffer,t.loop=this.loop,t.loopStart=this.loopStart,t.loopEnd=this.loopEnd,t.onended=this.onEnded.bind(this),t.start(this._startedAt,this._progress+this.offset,this.duration),this.isPlaying=!0,this.source=t,this.setDetune(this.detune),this.setPlaybackRate(this.playbackRate),this.connect()}pause(){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.isPlaying===!0&&(this._progress+=Math.max(this.context.currentTime-this._startedAt,0)*this.playbackRate,this.loop===!0&&(this._progress=this._progress%(this.duration||this.buffer.duration)),this.source.stop(),this.source.onended=null,this.isPlaying=!1),this}stop(e=0){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this._progress=0,this.source!==null&&(this.source.stop(this.context.currentTime+e),this.source.onended=null),this.isPlaying=!1,this}connect(){if(this.filters.length>0){this.source.connect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].connect(this.filters[e]);this.filters[this.filters.length-1].connect(this.getOutput())}else this.source.connect(this.getOutput());return this._connected=!0,this}disconnect(){if(this._connected!==!1){if(this.filters.length>0){this.source.disconnect(this.filters[0]);for(let e=1,t=this.filters.length;e<t;e++)this.filters[e-1].disconnect(this.filters[e]);this.filters[this.filters.length-1].disconnect(this.getOutput())}else this.source.disconnect(this.getOutput());return this._connected=!1,this}}getFilters(){return this.filters}setFilters(e){return e||(e=[]),this._connected===!0?(this.disconnect(),this.filters=e.slice(),this.connect()):this.filters=e.slice(),this}setDetune(e){return this.detune=e,this.isPlaying===!0&&this.source.detune!==void 0&&this.source.detune.setTargetAtTime(this.detune,this.context.currentTime,.01),this}getDetune(){return this.detune}getFilter(){return this.getFilters()[0]}setFilter(e){return this.setFilters(e?[e]:[])}setPlaybackRate(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.playbackRate=e,this.isPlaying===!0&&this.source.playbackRate.setTargetAtTime(this.playbackRate,this.context.currentTime,.01),this}getPlaybackRate(){return this.playbackRate}onEnded(){this.isPlaying=!1,this._progress=0}getLoop(){return this.hasPlaybackControl===!1?(console.warn("THREE.Audio: this Audio has no playback control."),!1):this.loop}setLoop(e){if(this.hasPlaybackControl===!1){console.warn("THREE.Audio: this Audio has no playback control.");return}return this.loop=e,this.isPlaying===!0&&(this.source.loop=this.loop),this}setLoopStart(e){return this.loopStart=e,this}setLoopEnd(e){return this.loopEnd=e,this}getVolume(){return this.gain.gain.value}setVolume(e){return this.gain.gain.setTargetAtTime(e,this.context.currentTime,.01),this}copy(e,t){return super.copy(e,t),e.sourceType!=="buffer"?(console.warn("THREE.Audio: Audio source type cannot be copied."),this):(this.autoplay=e.autoplay,this.buffer=e.buffer,this.detune=e.detune,this.loop=e.loop,this.loopStart=e.loopStart,this.loopEnd=e.loopEnd,this.offset=e.offset,this.duration=e.duration,this.playbackRate=e.playbackRate,this.hasPlaybackControl=e.hasPlaybackControl,this.sourceType=e.sourceType,this.filters=e.filters.slice(),this)}clone(e){return new this.constructor(this.listener).copy(this,e)}}const u2=new J,jb=new Os,rO=new J,c2=new J;class sO extends ZE{constructor(e){super(e),this.panner=this.context.createPanner(),this.panner.panningModel="HRTF",this.panner.connect(this.gain)}connect(){return super.connect(),this.panner.connect(this.gain),this}disconnect(){return super.disconnect(),this.panner.disconnect(this.gain),this}getOutput(){return this.panner}getRefDistance(){return this.panner.refDistance}setRefDistance(e){return this.panner.refDistance=e,this}getRolloffFactor(){return this.panner.rolloffFactor}setRolloffFactor(e){return this.panner.rolloffFactor=e,this}getDistanceModel(){return this.panner.distanceModel}setDistanceModel(e){return this.panner.distanceModel=e,this}getMaxDistance(){return this.panner.maxDistance}setMaxDistance(e){return this.panner.maxDistance=e,this}setDirectionalCone(e,t,n){return this.panner.coneInnerAngle=e,this.panner.coneOuterAngle=t,this.panner.coneOuterGain=n,this}updateMatrixWorld(e){if(super.updateMatrixWorld(e),this.hasPlaybackControl===!0&&this.isPlaying===!1)return;this.matrixWorld.decompose(u2,jb,rO),c2.set(0,0,1).applyQuaternion(jb);const t=this.panner;if(t.positionX){const n=this.context.currentTime+this.listener.timeDelta;t.positionX.linearRampToValueAtTime(u2.x,n),t.positionY.linearRampToValueAtTime(u2.y,n),t.positionZ.linearRampToValueAtTime(u2.z,n),t.orientationX.linearRampToValueAtTime(c2.x,n),t.orientationY.linearRampToValueAtTime(c2.y,n),t.orientationZ.linearRampToValueAtTime(c2.z,n)}else t.setPosition(u2.x,u2.y,u2.z),t.setOrientation(c2.x,c2.y,c2.z)}}class oO{constructor(e,t=2048){this.analyser=e.context.createAnalyser(),this.analyser.fftSize=t,this.data=new Uint8Array(this.analyser.frequencyBinCount),e.getOutput().connect(this.analyser)}getFrequencyData(){return this.analyser.getByteFrequencyData(this.data),this.data}getAverageFrequency(){let e=0;const t=this.getFrequencyData();for(let n=0;n<t.length;n++)e+=t[n];return e/t.length}}class JE{constructor(e,t,n){this.binding=e,this.valueSize=n;let r,s,o;switch(t){case"quaternion":r=this._slerp,s=this._slerpAdditive,o=this._setAdditiveIdentityQuaternion,this.buffer=new Float64Array(n*6),this._workIndex=5;break;case"string":case"bool":r=this._select,s=this._select,o=this._setAdditiveIdentityOther,this.buffer=new Array(n*5);break;default:r=this._lerp,s=this._lerpAdditive,o=this._setAdditiveIdentityNumeric,this.buffer=new Float64Array(n*5)}this._mixBufferRegion=r,this._mixBufferRegionAdditive=s,this._setIdentity=o,this._origIndex=3,this._addIndex=4,this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,this.useCount=0,this.referenceCount=0}accumulate(e,t){const n=this.buffer,r=this.valueSize,s=e*r+r;let o=this.cumulativeWeight;if(o===0){for(let a=0;a!==r;++a)n[s+a]=n[a];o=t}else{o+=t;const a=t/o;this._mixBufferRegion(n,s,0,a,r)}this.cumulativeWeight=o}accumulateAdditive(e){const t=this.buffer,n=this.valueSize,r=n*this._addIndex;this.cumulativeWeightAdditive===0&&this._setIdentity(),this._mixBufferRegionAdditive(t,r,0,e,n),this.cumulativeWeightAdditive+=e}apply(e){const t=this.valueSize,n=this.buffer,r=e*t+t,s=this.cumulativeWeight,o=this.cumulativeWeightAdditive,a=this.binding;if(this.cumulativeWeight=0,this.cumulativeWeightAdditive=0,s<1){const l=t*this._origIndex;this._mixBufferRegion(n,r,l,1-s,t)}o>0&&this._mixBufferRegionAdditive(n,r,this._addIndex*t,1,t);for(let l=t,u=t+t;l!==u;++l)if(n[l]!==n[l+t]){a.setValue(n,r);break}}saveOriginalState(){const e=this.binding,t=this.buffer,n=this.valueSize,r=n*this._origIndex;e.getValue(t,r);for(let s=n,o=r;s!==o;++s)t[s]=t[r+s%n];this._setIdentity(),this.cumulativeWeight=0,this.cumulativeWeightAdditive=0}restoreOriginalState(){const e=this.valueSize*3;this.binding.setValue(this.buffer,e)}_setAdditiveIdentityNumeric(){const e=this._addIndex*this.valueSize,t=e+this.valueSize;for(let n=e;n<t;n++)this.buffer[n]=0}_setAdditiveIdentityQuaternion(){this._setAdditiveIdentityNumeric(),this.buffer[this._addIndex*this.valueSize+3]=1}_setAdditiveIdentityOther(){const e=this._origIndex*this.valueSize,t=this._addIndex*this.valueSize;for(let n=0;n<this.valueSize;n++)this.buffer[t+n]=this.buffer[e+n]}_select(e,t,n,r,s){if(r>=.5)for(let o=0;o!==s;++o)e[t+o]=e[n+o]}_slerp(e,t,n,r){Os.slerpFlat(e,t,e,t,e,n,r)}_slerpAdditive(e,t,n,r,s){const o=this._workIndex*s;Os.multiplyQuaternionsFlat(e,o,e,t,e,n),Os.slerpFlat(e,t,e,t,e,o,r)}_lerp(e,t,n,r,s){const o=1-r;for(let a=0;a!==s;++a){const l=t+a;e[l]=e[l]*o+e[n+a]*r}}_lerpAdditive(e,t,n,r,s){for(let o=0;o!==s;++o){const a=t+o;e[a]=e[a]+e[n+o]*r}}}const qv="\\[\\]\\.:\\/",aO=new RegExp("["+qv+"]","g"),Hv="[^"+qv+"]",lO="[^"+qv.replace("\\.","")+"]",uO=/((?:WC+[\/:])*)/.source.replace("WC",Hv),cO=/(WCOD+)?/.source.replace("WCOD",lO),hO=/(?:\.(WC+)(?:\[(.+)\])?)?/.source.replace("WC",Hv),fO=/\.(WC+)(?:\[(.+)\])?/.source.replace("WC",Hv),dO=new RegExp("^"+uO+cO+hO+fO+"$"),AO=["material","materials","bones","map"];class pO{constructor(e,t,n){const r=n||Si.parseTrackName(t);this._targetGroup=e,this._bindings=e.subscribe_(t,r)}getValue(e,t){this.bind();const n=this._targetGroup.nCachedObjects_,r=this._bindings[n];r!==void 0&&r.getValue(e,t)}setValue(e,t){const n=this._bindings;for(let r=this._targetGroup.nCachedObjects_,s=n.length;r!==s;++r)n[r].setValue(e,t)}bind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].bind()}unbind(){const e=this._bindings;for(let t=this._targetGroup.nCachedObjects_,n=e.length;t!==n;++t)e[t].unbind()}}class Si{constructor(e,t,n){this.path=t,this.parsedPath=n||Si.parseTrackName(t),this.node=Si.findNode(e,this.parsedPath.nodeName),this.rootNode=e,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}static create(e,t,n){return e&&e.isAnimationObjectGroup?new Si.Composite(e,t,n):new Si(e,t,n)}static sanitizeNodeName(e){return e.replace(/\s/g,"_").replace(aO,"")}static parseTrackName(e){const t=dO.exec(e);if(t===null)throw new Error("PropertyBinding: Cannot parse trackName: "+e);const n={nodeName:t[2],objectName:t[3],objectIndex:t[4],propertyName:t[5],propertyIndex:t[6]},r=n.nodeName&&n.nodeName.lastIndexOf(".");if(r!==void 0&&r!==-1){const s=n.nodeName.substring(r+1);AO.indexOf(s)!==-1&&(n.nodeName=n.nodeName.substring(0,r),n.objectName=s)}if(n.propertyName===null||n.propertyName.length===0)throw new Error("PropertyBinding: can not parse propertyName from trackName: "+e);return n}static findNode(e,t){if(t===void 0||t===""||t==="."||t===-1||t===e.name||t===e.uuid)return e;if(e.skeleton){const n=e.skeleton.getBoneByName(t);if(n!==void 0)return n}if(e.children){const n=function(s){for(let o=0;o<s.length;o++){const a=s[o];if(a.name===t||a.uuid===t)return a;const l=n(a.children);if(l)return l}return null},r=n(e.children);if(r)return r}return null}_getValue_unavailable(){}_setValue_unavailable(){}_getValue_direct(e,t){e[t]=this.targetObject[this.propertyName]}_getValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)e[t++]=n[r]}_getValue_arrayElement(e,t){e[t]=this.resolvedProperty[this.propertyIndex]}_getValue_toArray(e,t){this.resolvedProperty.toArray(e,t)}_setValue_direct(e,t){this.targetObject[this.propertyName]=e[t]}_setValue_direct_setNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.needsUpdate=!0}_setValue_direct_setMatrixWorldNeedsUpdate(e,t){this.targetObject[this.propertyName]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_array(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++]}_setValue_array_setNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.needsUpdate=!0}_setValue_array_setMatrixWorldNeedsUpdate(e,t){const n=this.resolvedProperty;for(let r=0,s=n.length;r!==s;++r)n[r]=e[t++];this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_arrayElement(e,t){this.resolvedProperty[this.propertyIndex]=e[t]}_setValue_arrayElement_setNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.needsUpdate=!0}_setValue_arrayElement_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty[this.propertyIndex]=e[t],this.targetObject.matrixWorldNeedsUpdate=!0}_setValue_fromArray(e,t){this.resolvedProperty.fromArray(e,t)}_setValue_fromArray_setNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.needsUpdate=!0}_setValue_fromArray_setMatrixWorldNeedsUpdate(e,t){this.resolvedProperty.fromArray(e,t),this.targetObject.matrixWorldNeedsUpdate=!0}_getValue_unbound(e,t){this.bind(),this.getValue(e,t)}_setValue_unbound(e,t){this.bind(),this.setValue(e,t)}bind(){let e=this.node;const t=this.parsedPath,n=t.objectName,r=t.propertyName;let s=t.propertyIndex;if(e||(e=Si.findNode(this.rootNode,t.nodeName),this.node=e),this.getValue=this._getValue_unavailable,this.setValue=this._setValue_unavailable,!e){console.warn("THREE.PropertyBinding: No target node found for track: "+this.path+".");return}if(n){let u=t.objectIndex;switch(n){case"materials":if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.materials){console.error("THREE.PropertyBinding: Can not bind to material.materials as node.material does not have a materials array.",this);return}e=e.material.materials;break;case"bones":if(!e.skeleton){console.error("THREE.PropertyBinding: Can not bind to bones as node does not have a skeleton.",this);return}e=e.skeleton.bones;for(let c=0;c<e.length;c++)if(e[c].name===u){u=c;break}break;case"map":if("map"in e){e=e.map;break}if(!e.material){console.error("THREE.PropertyBinding: Can not bind to material as node does not have a material.",this);return}if(!e.material.map){console.error("THREE.PropertyBinding: Can not bind to material.map as node.material does not have a map.",this);return}e=e.material.map;break;default:if(e[n]===void 0){console.error("THREE.PropertyBinding: Can not bind to objectName of node undefined.",this);return}e=e[n]}if(u!==void 0){if(e[u]===void 0){console.error("THREE.PropertyBinding: Trying to bind to objectIndex of objectName, but is undefined.",this,e);return}e=e[u]}}const o=e[r];if(o===void 0){const u=t.nodeName;console.error("THREE.PropertyBinding: Trying to update property for track: "+u+"."+r+" but it wasn't found.",e);return}let a=this.Versioning.None;this.targetObject=e,e.isMaterial===!0?a=this.Versioning.NeedsUpdate:e.isObject3D===!0&&(a=this.Versioning.MatrixWorldNeedsUpdate);let l=this.BindingType.Direct;if(s!==void 0){if(r==="morphTargetInfluences"){if(!e.geometry){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.",this);return}if(!e.geometry.morphAttributes){console.error("THREE.PropertyBinding: Can not bind to morphTargetInfluences because node does not have a geometry.morphAttributes.",this);return}e.morphTargetDictionary[s]!==void 0&&(s=e.morphTargetDictionary[s])}l=this.BindingType.ArrayElement,this.resolvedProperty=o,this.propertyIndex=s}else o.fromArray!==void 0&&o.toArray!==void 0?(l=this.BindingType.HasFromToArray,this.resolvedProperty=o):Array.isArray(o)?(l=this.BindingType.EntireArray,this.resolvedProperty=o):this.propertyName=r;this.getValue=this.GetterByBindingType[l],this.setValue=this.SetterByBindingTypeAndVersioning[l][a]}unbind(){this.node=null,this.getValue=this._getValue_unbound,this.setValue=this._setValue_unbound}}Si.Composite=pO;Si.prototype.BindingType={Direct:0,EntireArray:1,ArrayElement:2,HasFromToArray:3};Si.prototype.Versioning={None:0,NeedsUpdate:1,MatrixWorldNeedsUpdate:2};Si.prototype.GetterByBindingType=[Si.prototype._getValue_direct,Si.prototype._getValue_array,Si.prototype._getValue_arrayElement,Si.prototype._getValue_toArray];Si.prototype.SetterByBindingTypeAndVersioning=[[Si.prototype._setValue_direct,Si.prototype._setValue_direct_setNeedsUpdate,Si.prototype._setValue_direct_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_array,Si.prototype._setValue_array_setNeedsUpdate,Si.prototype._setValue_array_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_arrayElement,Si.prototype._setValue_arrayElement_setNeedsUpdate,Si.prototype._setValue_arrayElement_setMatrixWorldNeedsUpdate],[Si.prototype._setValue_fromArray,Si.prototype._setValue_fromArray_setNeedsUpdate,Si.prototype._setValue_fromArray_setMatrixWorldNeedsUpdate]];class mO{constructor(){this.isAnimationObjectGroup=!0,this.uuid=va(),this._objects=Array.prototype.slice.call(arguments),this.nCachedObjects_=0;const e={};this._indicesByUUID=e;for(let n=0,r=arguments.length;n!==r;++n)e[arguments[n].uuid]=n;this._paths=[],this._parsedPaths=[],this._bindings=[],this._bindingsIndicesByPath={};const t=this;this.stats={objects:{get total(){return t._objects.length},get inUse(){return this.total-t.nCachedObjects_}},get bindingsPerObject(){return t._bindings.length}}}add(){const e=this._objects,t=this._indicesByUUID,n=this._paths,r=this._parsedPaths,s=this._bindings,o=s.length;let a,l=e.length,u=this.nCachedObjects_;for(let c=0,A=arguments.length;c!==A;++c){const m=arguments[c],_=m.uuid;let b=t[_];if(b===void 0){b=l++,t[_]=b,e.push(m);for(let M=0,w=o;M!==w;++M)s[M].push(new Si(m,n[M],r[M]))}else if(b<u){a=e[b];const M=--u,w=e[M];t[w.uuid]=b,e[b]=w,t[_]=M,e[M]=m;for(let T=0,N=o;T!==N;++T){const P=s[T],I=P[M];let B=P[b];P[b]=I,B===void 0&&(B=new Si(m,n[T],r[T])),P[M]=B}}else e[b]!==a&&console.error("THREE.AnimationObjectGroup: Different objects with the same UUID detected. Clean the caches or recreate your infrastructure when reloading scenes.")}this.nCachedObjects_=u}remove(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_;for(let o=0,a=arguments.length;o!==a;++o){const l=arguments[o],u=l.uuid,c=t[u];if(c!==void 0&&c>=s){const A=s++,m=e[A];t[m.uuid]=c,e[c]=m,t[u]=A,e[A]=l;for(let _=0,b=r;_!==b;++_){const M=n[_],w=M[A],T=M[c];M[c]=w,M[A]=T}}}this.nCachedObjects_=s}uncache(){const e=this._objects,t=this._indicesByUUID,n=this._bindings,r=n.length;let s=this.nCachedObjects_,o=e.length;for(let a=0,l=arguments.length;a!==l;++a){const u=arguments[a],c=u.uuid,A=t[c];if(A!==void 0)if(delete t[c],A<s){const m=--s,_=e[m],b=--o,M=e[b];t[_.uuid]=A,e[A]=_,t[M.uuid]=m,e[m]=M,e.pop();for(let w=0,T=r;w!==T;++w){const N=n[w],P=N[m],I=N[b];N[A]=P,N[m]=I,N.pop()}}else{const m=--o,_=e[m];m>0&&(t[_.uuid]=A),e[A]=_,e.pop();for(let b=0,M=r;b!==M;++b){const w=n[b];w[A]=w[m],w.pop()}}}this.nCachedObjects_=s}subscribe_(e,t){const n=this._bindingsIndicesByPath;let r=n[e];const s=this._bindings;if(r!==void 0)return s[r];const o=this._paths,a=this._parsedPaths,l=this._objects,u=l.length,c=this.nCachedObjects_,A=new Array(u);r=s.length,n[e]=r,o.push(e),a.push(t),s.push(A);for(let m=c,_=l.length;m!==_;++m){const b=l[m];A[m]=new Si(b,e,t)}return A}unsubscribe_(e){const t=this._bindingsIndicesByPath,n=t[e];if(n!==void 0){const r=this._paths,s=this._parsedPaths,o=this._bindings,a=o.length-1,l=o[a],u=e[a];t[u]=n,o[n]=l,o.pop(),s[n]=s[a],s.pop(),r[n]=r[a],r.pop()}}}class eR{constructor(e,t,n=null,r=t.blendMode){this._mixer=e,this._clip=t,this._localRoot=n,this.blendMode=r;const s=t.tracks,o=s.length,a=new Array(o),l={endingStart:I2,endingEnd:I2};for(let u=0;u!==o;++u){const c=s[u].createInterpolant(null);a[u]=c,c.settings=l}this._interpolantSettings=l,this._interpolants=a,this._propertyBindings=new Array(o),this._cacheIndex=null,this._byClipCacheIndex=null,this._timeScaleInterpolant=null,this._weightInterpolant=null,this.loop=iE,this._loopCount=-1,this._startTime=null,this.time=0,this.timeScale=1,this._effectiveTimeScale=1,this.weight=1,this._effectiveWeight=1,this.repetitions=1/0,this.paused=!1,this.enabled=!0,this.clampWhenFinished=!1,this.zeroSlopeAtStart=!0,this.zeroSlopeAtEnd=!0}play(){return this._mixer._activateAction(this),this}stop(){return this._mixer._deactivateAction(this),this.reset()}reset(){return this.paused=!1,this.enabled=!0,this.time=0,this._loopCount=-1,this._startTime=null,this.stopFading().stopWarping()}isRunning(){return this.enabled&&!this.paused&&this.timeScale!==0&&this._startTime===null&&this._mixer._isActiveAction(this)}isScheduled(){return this._mixer._isActiveAction(this)}startAt(e){return this._startTime=e,this}setLoop(e,t){return this.loop=e,this.repetitions=t,this}setEffectiveWeight(e){return this.weight=e,this._effectiveWeight=this.enabled?e:0,this.stopFading()}getEffectiveWeight(){return this._effectiveWeight}fadeIn(e){return this._scheduleFading(e,0,1)}fadeOut(e){return this._scheduleFading(e,1,0)}crossFadeFrom(e,t,n=!1){if(e.fadeOut(t),this.fadeIn(t),n===!0){const r=this._clip.duration,s=e._clip.duration,o=s/r,a=r/s;e.warp(1,o,t),this.warp(a,1,t)}return this}crossFadeTo(e,t,n=!1){return e.crossFadeFrom(this,t,n)}stopFading(){const e=this._weightInterpolant;return e!==null&&(this._weightInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}setEffectiveTimeScale(e){return this.timeScale=e,this._effectiveTimeScale=this.paused?0:e,this.stopWarping()}getEffectiveTimeScale(){return this._effectiveTimeScale}setDuration(e){return this.timeScale=this._clip.duration/e,this.stopWarping()}syncWith(e){return this.time=e.time,this.timeScale=e.timeScale,this.stopWarping()}halt(e){return this.warp(this._effectiveTimeScale,0,e)}warp(e,t,n){const r=this._mixer,s=r.time,o=this.timeScale;let a=this._timeScaleInterpolant;a===null&&(a=r._lendControlInterpolant(),this._timeScaleInterpolant=a);const l=a.parameterPositions,u=a.sampleValues;return l[0]=s,l[1]=s+n,u[0]=e/o,u[1]=t/o,this}stopWarping(){const e=this._timeScaleInterpolant;return e!==null&&(this._timeScaleInterpolant=null,this._mixer._takeBackControlInterpolant(e)),this}getMixer(){return this._mixer}getClip(){return this._clip}getRoot(){return this._localRoot||this._mixer._root}_update(e,t,n,r){if(!this.enabled){this._updateWeight(e);return}const s=this._startTime;if(s!==null){const l=(e-s)*n;l<0||n===0?t=0:(this._startTime=null,t=n*l)}t*=this._updateTimeScale(e);const o=this._updateTime(t),a=this._updateWeight(e);if(a>0){const l=this._interpolants,u=this._propertyBindings;switch(this.blendMode){case ev:for(let c=0,A=l.length;c!==A;++c)l[c].evaluate(o),u[c].accumulateAdditive(a);break;case x9:default:for(let c=0,A=l.length;c!==A;++c)l[c].evaluate(o),u[c].accumulate(r,a)}}}_updateWeight(e){let t=0;if(this.enabled){t=this.weight;const n=this._weightInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopFading(),r===0&&(this.enabled=!1))}}return this._effectiveWeight=t,t}_updateTimeScale(e){let t=0;if(!this.paused){t=this.timeScale;const n=this._timeScaleInterpolant;if(n!==null){const r=n.evaluate(e)[0];t*=r,e>n.parameterPositions[1]&&(this.stopWarping(),t===0?this.paused=!0:this.timeScale=t)}}return this._effectiveTimeScale=t,t}_updateTime(e){const t=this._clip.duration,n=this.loop;let r=this.time+e,s=this._loopCount;const o=n===rE;if(e===0)return s===-1?r:o&&(s&1)===1?t-r:r;if(n===nE){s===-1&&(this._loopCount=0,this._setEndings(!0,!0,!1));e:{if(r>=t)r=t;else if(r<0)r=0;else{this.time=r;break e}this.clampWhenFinished?this.paused=!0:this.enabled=!1,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e<0?-1:1})}}else{if(s===-1&&(e>=0?(s=0,this._setEndings(!0,this.repetitions===0,o)):this._setEndings(this.repetitions===0,!0,o)),r>=t||r<0){const a=Math.floor(r/t);r-=t*a,s+=Math.abs(a);const l=this.repetitions-s;if(l<=0)this.clampWhenFinished?this.paused=!0:this.enabled=!1,r=e>0?t:0,this.time=r,this._mixer.dispatchEvent({type:"finished",action:this,direction:e>0?1:-1});else{if(l===1){const u=e<0;this._setEndings(u,!u,o)}else this._setEndings(!1,!1,o);this._loopCount=s,this.time=r,this._mixer.dispatchEvent({type:"loop",action:this,loopDelta:a})}}else this.time=r;if(o&&(s&1)===1)return t-r}return r}_setEndings(e,t,n){const r=this._interpolantSettings;n?(r.endingStart=L2,r.endingEnd=L2):(e?r.endingStart=this.zeroSlopeAtStart?L2:I2:r.endingStart=o8,t?r.endingEnd=this.zeroSlopeAtEnd?L2:I2:r.endingEnd=o8)}_scheduleFading(e,t,n){const r=this._mixer,s=r.time;let o=this._weightInterpolant;o===null&&(o=r._lendControlInterpolant(),this._weightInterpolant=o);const a=o.parameterPositions,l=o.sampleValues;return a[0]=s,l[0]=t,a[1]=s+e,l[1]=n,this}}const gO=new Float32Array(1);class yO extends Ta{constructor(e){super(),this._root=e,this._initMemoryManager(),this._accuIndex=0,this.time=0,this.timeScale=1}_bindAction(e,t){const n=e._localRoot||this._root,r=e._clip.tracks,s=r.length,o=e._propertyBindings,a=e._interpolants,l=n.uuid,u=this._bindingsByRootAndName;let c=u[l];c===void 0&&(c={},u[l]=c);for(let A=0;A!==s;++A){const m=r[A],_=m.name;let b=c[_];if(b!==void 0)++b.referenceCount,o[A]=b;else{if(b=o[A],b!==void 0){b._cacheIndex===null&&(++b.referenceCount,this._addInactiveBinding(b,l,_));continue}const M=t&&t._propertyBindings[A].binding.parsedPath;b=new JE(Si.create(n,_,M),m.ValueTypeName,m.getValueSize()),++b.referenceCount,this._addInactiveBinding(b,l,_),o[A]=b}a[A].resultBuffer=b.buffer}}_activateAction(e){if(!this._isActiveAction(e)){if(e._cacheIndex===null){const n=(e._localRoot||this._root).uuid,r=e._clip.uuid,s=this._actionsByClip[r];this._bindAction(e,s&&s.knownActions[0]),this._addInactiveAction(e,r,n)}const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];s.useCount++===0&&(this._lendBinding(s),s.saveOriginalState())}this._lendAction(e)}}_deactivateAction(e){if(this._isActiveAction(e)){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.useCount===0&&(s.restoreOriginalState(),this._takeBackBinding(s))}this._takeBackAction(e)}}_initMemoryManager(){this._actions=[],this._nActiveActions=0,this._actionsByClip={},this._bindings=[],this._nActiveBindings=0,this._bindingsByRootAndName={},this._controlInterpolants=[],this._nActiveControlInterpolants=0;const e=this;this.stats={actions:{get total(){return e._actions.length},get inUse(){return e._nActiveActions}},bindings:{get total(){return e._bindings.length},get inUse(){return e._nActiveBindings}},controlInterpolants:{get total(){return e._controlInterpolants.length},get inUse(){return e._nActiveControlInterpolants}}}}_isActiveAction(e){const t=e._cacheIndex;return t!==null&&t<this._nActiveActions}_addInactiveAction(e,t,n){const r=this._actions,s=this._actionsByClip;let o=s[t];if(o===void 0)o={knownActions:[e],actionByRoot:{}},e._byClipCacheIndex=0,s[t]=o;else{const a=o.knownActions;e._byClipCacheIndex=a.length,a.push(e)}e._cacheIndex=r.length,r.push(e),o.actionByRoot[n]=e}_removeInactiveAction(e){const t=this._actions,n=t[t.length-1],r=e._cacheIndex;n._cacheIndex=r,t[r]=n,t.pop(),e._cacheIndex=null;const s=e._clip.uuid,o=this._actionsByClip,a=o[s],l=a.knownActions,u=l[l.length-1],c=e._byClipCacheIndex;u._byClipCacheIndex=c,l[c]=u,l.pop(),e._byClipCacheIndex=null;const A=a.actionByRoot,m=(e._localRoot||this._root).uuid;delete A[m],l.length===0&&delete o[s],this._removeInactiveBindingsForAction(e)}_removeInactiveBindingsForAction(e){const t=e._propertyBindings;for(let n=0,r=t.length;n!==r;++n){const s=t[n];--s.referenceCount===0&&this._removeInactiveBinding(s)}}_lendAction(e){const t=this._actions,n=e._cacheIndex,r=this._nActiveActions++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackAction(e){const t=this._actions,n=e._cacheIndex,r=--this._nActiveActions,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_addInactiveBinding(e,t,n){const r=this._bindingsByRootAndName,s=this._bindings;let o=r[t];o===void 0&&(o={},r[t]=o),o[n]=e,e._cacheIndex=s.length,s.push(e)}_removeInactiveBinding(e){const t=this._bindings,n=e.binding,r=n.rootNode.uuid,s=n.path,o=this._bindingsByRootAndName,a=o[r],l=t[t.length-1],u=e._cacheIndex;l._cacheIndex=u,t[u]=l,t.pop(),delete a[s],Object.keys(a).length===0&&delete o[r]}_lendBinding(e){const t=this._bindings,n=e._cacheIndex,r=this._nActiveBindings++,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_takeBackBinding(e){const t=this._bindings,n=e._cacheIndex,r=--this._nActiveBindings,s=t[r];e._cacheIndex=r,t[r]=e,s._cacheIndex=n,t[n]=s}_lendControlInterpolant(){const e=this._controlInterpolants,t=this._nActiveControlInterpolants++;let n=e[t];return n===void 0&&(n=new Rv(new Float32Array(2),new Float32Array(2),1,gO),n.__cacheIndex=t,e[t]=n),n}_takeBackControlInterpolant(e){const t=this._controlInterpolants,n=e.__cacheIndex,r=--this._nActiveControlInterpolants,s=t[r];e.__cacheIndex=r,t[r]=e,s.__cacheIndex=n,t[n]=s}clipAction(e,t,n){const r=t||this._root,s=r.uuid;let o=typeof e=="string"?d8.findByName(r,e):e;const a=o!==null?o.uuid:e,l=this._actionsByClip[a];let u=null;if(n===void 0&&(o!==null?n=o.blendMode:n=x9),l!==void 0){const A=l.actionByRoot[s];if(A!==void 0&&A.blendMode===n)return A;u=l.knownActions[0],o===null&&(o=u._clip)}if(o===null)return null;const c=new eR(this,o,t,n);return this._bindAction(c,u),this._addInactiveAction(c,a,s),c}existingAction(e,t){const n=t||this._root,r=n.uuid,s=typeof e=="string"?d8.findByName(n,e):e,o=s?s.uuid:e,a=this._actionsByClip[o];return a!==void 0&&a.actionByRoot[r]||null}stopAllAction(){const e=this._actions,t=this._nActiveActions;for(let n=t-1;n>=0;--n)e[n].stop();return this}update(e){e*=this.timeScale;const t=this._actions,n=this._nActiveActions,r=this.time+=e,s=Math.sign(e),o=this._accuIndex^=1;for(let u=0;u!==n;++u)t[u]._update(r,e,s,o);const a=this._bindings,l=this._nActiveBindings;for(let u=0;u!==l;++u)a[u].apply(o);return this}setTime(e){this.time=0;for(let t=0;t<this._actions.length;t++)this._actions[t].time=0;return this.update(e)}getRoot(){return this._root}uncacheClip(e){const t=this._actions,n=e.uuid,r=this._actionsByClip,s=r[n];if(s!==void 0){const o=s.knownActions;for(let a=0,l=o.length;a!==l;++a){const u=o[a];this._deactivateAction(u);const c=u._cacheIndex,A=t[t.length-1];u._cacheIndex=null,u._byClipCacheIndex=null,A._cacheIndex=c,t[c]=A,t.pop(),this._removeInactiveBindingsForAction(u)}delete r[n]}}uncacheRoot(e){const t=e.uuid,n=this._actionsByClip;for(const o in n){const a=n[o].actionByRoot,l=a[t];l!==void 0&&(this._deactivateAction(l),this._removeInactiveAction(l))}const r=this._bindingsByRootAndName,s=r[t];if(s!==void 0)for(const o in s){const a=s[o];a.restoreOriginalState(),this._removeInactiveBinding(a)}}uncacheAction(e,t){const n=this.existingAction(e,t);n!==null&&(this._deactivateAction(n),this._removeInactiveAction(n))}}class vO extends F0{constructor(e=1,t=1,n=1,r={}){super(e,t,r),this.isRenderTarget3D=!0,this.depth=n,this.texture=new C9(null,e,t,n),this._setTextureOptions(r),this.texture.isRenderTargetTexture=!0}}let _O=class tR{constructor(e){this.value=e}clone(){return new tR(this.value.clone===void 0?this.value:this.value.clone())}},xO=0,bO=class extends Ta{constructor(){super(),this.isUniformsGroup=!0,Object.defineProperty(this,"id",{value:xO++}),this.name="",this.usage=q4,this.uniforms=[]}add(e){return this.uniforms.push(e),this}remove(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}setName(e){return this.name=e,this}setUsage(e){return this.usage=e,this}dispose(){this.dispatchEvent({type:"dispose"})}copy(e){this.name=e.name,this.usage=e.usage;const t=e.uniforms;this.uniforms.length=0;for(let n=0,r=t.length;n<r;n++){const s=Array.isArray(t[n])?t[n]:[t[n]];for(let o=0;o<s.length;o++)this.uniforms.push(s[o].clone())}return this}clone(){return new this.constructor().copy(this)}};class p8 extends u5{constructor(e,t,n=1){super(e,t),this.isInstancedInterleavedBuffer=!0,this.meshPerAttribute=n}copy(e){return super.copy(e),this.meshPerAttribute=e.meshPerAttribute,this}clone(e){const t=super.clone(e);return t.meshPerAttribute=this.meshPerAttribute,t}toJSON(e){const t=super.toJSON(e);return t.isInstancedInterleavedBuffer=!0,t.meshPerAttribute=this.meshPerAttribute,t}}class SO{constructor(e,t,n,r,s,o=!1){this.isGLBufferAttribute=!0,this.name="",this.buffer=e,this.type=t,this.itemSize=n,this.elementSize=r,this.count=s,this.normalized=o,this.version=0}set needsUpdate(e){e===!0&&this.version++}setBuffer(e){return this.buffer=e,this}setType(e,t){return this.type=e,this.elementSize=t,this}setItemSize(e){return this.itemSize=e,this}setCount(e){return this.count=e,this}}const $b=new Wt;class nR{constructor(e,t,n=0,r=1/0){this.ray=new Ec(e,t),this.near=n,this.far=r,this.camera=null,this.layers=new q2,this.params={Mesh:{},Line:{threshold:1},LOD:{},Points:{threshold:1},Sprite:{}}}set(e,t){this.ray.set(e,t)}setFromCamera(e,t){t.isPerspectiveCamera?(this.ray.origin.setFromMatrixPosition(t.matrixWorld),this.ray.direction.set(e.x,e.y,.5).unproject(t).sub(this.ray.origin).normalize(),this.camera=t):t.isOrthographicCamera?(this.ray.origin.set(e.x,e.y,(t.near+t.far)/(t.near-t.far)).unproject(t),this.ray.direction.set(0,0,-1).transformDirection(t.matrixWorld),this.camera=t):console.error("THREE.Raycaster: Unsupported camera type: "+t.type)}setFromXRController(e){return $b.identity().extractRotation(e.matrixWorld),this.ray.origin.setFromMatrixPosition(e.matrixWorld),this.ray.direction.set(0,0,-1).applyMatrix4($b),this}intersectObject(e,t=!0,n=[]){return _g(e,this,n,t),n.sort(Xb),n}intersectObjects(e,t=!0,n=[]){for(let r=0,s=e.length;r<s;r++)_g(e[r],this,n,t);return n.sort(Xb),n}}function Xb(i,e){return i.distance-e.distance}function _g(i,e,t,n){let r=!0;if(i.layers.test(e.layers)&&i.raycast(e,t)===!1&&(r=!1),r===!0&&n===!0){const s=i.children;for(let o=0,a=s.length;o<a;o++)_g(s[o],e,t,!0)}}class TO{constructor(){this._previousTime=0,this._currentTime=0,this._startTime=performance.now(),this._delta=0,this._elapsed=0,this._timescale=1,this._document=null,this._pageVisibilityHandler=null}connect(e){this._document=e,e.hidden!==void 0&&(this._pageVisibilityHandler=wO.bind(this),e.addEventListener("visibilitychange",this._pageVisibilityHandler,!1))}disconnect(){this._pageVisibilityHandler!==null&&(this._document.removeEventListener("visibilitychange",this._pageVisibilityHandler),this._pageVisibilityHandler=null),this._document=null}getDelta(){return this._delta/1e3}getElapsed(){return this._elapsed/1e3}getTimescale(){return this._timescale}setTimescale(e){return this._timescale=e,this}reset(){return this._currentTime=performance.now()-this._startTime,this}dispose(){this.disconnect()}update(e){return this._pageVisibilityHandler!==null&&this._document.hidden===!0?this._delta=0:(this._previousTime=this._currentTime,this._currentTime=(e!==void 0?e:performance.now())-this._startTime,this._delta=(this._currentTime-this._previousTime)*this._timescale,this._elapsed+=this._delta),this}}function wO(){this._document.hidden===!1&&this.reset()}class xg{constructor(e=1,t=0,n=0){this.radius=e,this.phi=t,this.theta=n}set(e,t,n){return this.radius=e,this.phi=t,this.theta=n,this}copy(e){return this.radius=e.radius,this.phi=e.phi,this.theta=e.theta,this}makeSafe(){return this.phi=Dn(this.phi,1e-6,Math.PI-1e-6),this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+t*t+n*n),this.radius===0?(this.theta=0,this.phi=0):(this.theta=Math.atan2(e,n),this.phi=Math.acos(Dn(t/this.radius,-1,1))),this}clone(){return new this.constructor().copy(this)}}class MO{constructor(e=1,t=0,n=0){this.radius=e,this.theta=t,this.y=n}set(e,t,n){return this.radius=e,this.theta=t,this.y=n,this}copy(e){return this.radius=e.radius,this.theta=e.theta,this.y=e.y,this}setFromVector3(e){return this.setFromCartesianCoords(e.x,e.y,e.z)}setFromCartesianCoords(e,t,n){return this.radius=Math.sqrt(e*e+n*n),this.theta=Math.atan2(e,n),this.y=t,this}clone(){return new this.constructor().copy(this)}}class i6{constructor(e,t,n,r){i6.prototype.isMatrix2=!0,this.elements=[1,0,0,1],e!==void 0&&this.set(e,t,n,r)}identity(){return this.set(1,0,0,1),this}fromArray(e,t=0){for(let n=0;n<4;n++)this.elements[n]=e[n+t];return this}set(e,t,n,r){const s=this.elements;return s[0]=e,s[2]=t,s[1]=n,s[3]=r,this}}const Qb=new Ge;class EO{constructor(e=new Ge(1/0,1/0),t=new Ge(-1/0,-1/0)){this.isBox2=!0,this.min=e,this.max=t}set(e,t){return this.min.copy(e),this.max.copy(t),this}setFromPoints(e){this.makeEmpty();for(let t=0,n=e.length;t<n;t++)this.expandByPoint(e[t]);return this}setFromCenterAndSize(e,t){const n=Qb.copy(t).multiplyScalar(.5);return this.min.copy(e).sub(n),this.max.copy(e).add(n),this}clone(){return new this.constructor().copy(this)}copy(e){return this.min.copy(e.min),this.max.copy(e.max),this}makeEmpty(){return this.min.x=this.min.y=1/0,this.max.x=this.max.y=-1/0,this}isEmpty(){return this.max.x<this.min.x||this.max.y<this.min.y}getCenter(e){return this.isEmpty()?e.set(0,0):e.addVectors(this.min,this.max).multiplyScalar(.5)}getSize(e){return this.isEmpty()?e.set(0,0):e.subVectors(this.max,this.min)}expandByPoint(e){return this.min.min(e),this.max.max(e),this}expandByVector(e){return this.min.sub(e),this.max.add(e),this}expandByScalar(e){return this.min.addScalar(-e),this.max.addScalar(e),this}containsPoint(e){return e.x>=this.min.x&&e.x<=this.max.x&&e.y>=this.min.y&&e.y<=this.max.y}containsBox(e){return this.min.x<=e.min.x&&e.max.x<=this.max.x&&this.min.y<=e.min.y&&e.max.y<=this.max.y}getParameter(e,t){return t.set((e.x-this.min.x)/(this.max.x-this.min.x),(e.y-this.min.y)/(this.max.y-this.min.y))}intersectsBox(e){return e.max.x>=this.min.x&&e.min.x<=this.max.x&&e.max.y>=this.min.y&&e.min.y<=this.max.y}clampPoint(e,t){return t.copy(e).clamp(this.min,this.max)}distanceToPoint(e){return this.clampPoint(e,Qb).distanceTo(e)}intersect(e){return this.min.max(e.min),this.max.min(e.max),this.isEmpty()&&this.makeEmpty(),this}union(e){return this.min.min(e.min),this.max.max(e.max),this}translate(e){return this.min.add(e),this.max.add(e),this}equals(e){return e.min.equals(this.min)&&e.max.equals(this.max)}}const Yb=new J,O7=new J,B3=new J,F3=new J,Wp=new J,RO=new J,CO=new J;class iR{constructor(e=new J,t=new J){this.start=e,this.end=t}set(e,t){return this.start.copy(e),this.end.copy(t),this}copy(e){return this.start.copy(e.start),this.end.copy(e.end),this}getCenter(e){return e.addVectors(this.start,this.end).multiplyScalar(.5)}delta(e){return e.subVectors(this.end,this.start)}distanceSq(){return this.start.distanceToSquared(this.end)}distance(){return this.start.distanceTo(this.end)}at(e,t){return this.delta(t).multiplyScalar(e).add(this.start)}closestPointToPointParameter(e,t){Yb.subVectors(e,this.start),O7.subVectors(this.end,this.start);const n=O7.dot(O7);let s=O7.dot(Yb)/n;return t&&(s=Dn(s,0,1)),s}closestPointToPoint(e,t,n){const r=this.closestPointToPointParameter(e,t);return this.delta(n).multiplyScalar(r).add(this.start)}distanceSqToLine3(e,t=RO,n=CO){const r=10000000000000001e-32;let s,o;const a=this.start,l=e.start,u=this.end,c=e.end;B3.subVectors(u,a),F3.subVectors(c,l),Wp.subVectors(a,l);const A=B3.dot(B3),m=F3.dot(F3),_=F3.dot(Wp);if(A<=r&&m<=r)return t.copy(a),n.copy(l),t.sub(n),t.dot(t);if(A<=r)s=0,o=_/m,o=Dn(o,0,1);else{const b=B3.dot(Wp);if(m<=r)o=0,s=Dn(-b/A,0,1);else{const M=B3.dot(F3),w=A*m-M*M;w!==0?s=Dn((M*_-b*m)/w,0,1):s=0,o=(M*s+_)/m,o<0?(o=0,s=Dn(-b/A,0,1)):o>1&&(o=1,s=Dn((M-b)/A,0,1))}}return t.copy(a).add(B3.multiplyScalar(s)),n.copy(l).add(F3.multiplyScalar(o)),t.sub(n),t.dot(t)}applyMatrix4(e){return this.start.applyMatrix4(e),this.end.applyMatrix4(e),this}equals(e){return e.start.equals(this.start)&&e.end.equals(this.end)}clone(){return new this.constructor().copy(this)}}const Kb=new J;class PO extends Ai{constructor(e,t){super(),this.light=e,this.matrixAutoUpdate=!1,this.color=t,this.type="SpotLightHelper";const n=new Tn,r=[0,0,0,0,0,1,0,0,0,1,0,1,0,0,0,-1,0,1,0,0,0,0,1,1,0,0,0,0,-1,1];for(let o=0,a=1,l=32;o<l;o++,a++){const u=o/l*Math.PI*2,c=a/l*Math.PI*2;r.push(Math.cos(u),Math.sin(u),1,Math.cos(c),Math.sin(c),1)}n.setAttribute("position",new Ht(r,3));const s=new hs({fog:!1,toneMapped:!1});this.cone=new t0(n,s),this.add(this.cone),this.update()}dispose(){this.cone.geometry.dispose(),this.cone.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),this.parent?(this.parent.updateWorldMatrix(!0),this.matrix.copy(this.parent.matrixWorld).invert().multiply(this.light.matrixWorld)):this.matrix.copy(this.light.matrixWorld),this.matrixWorld.copy(this.light.matrixWorld);const e=this.light.distance?this.light.distance:1e3,t=e*Math.tan(this.light.angle);this.cone.scale.set(t,t,e),Kb.setFromMatrixPosition(this.light.target.matrixWorld),this.cone.lookAt(Kb),this.color!==void 0?this.cone.material.color.set(this.color):this.cone.material.color.copy(this.light.color)}}const q1=new J,k7=new Wt,jp=new Wt;class NO extends t0{constructor(e){const t=rR(e),n=new Tn,r=[],s=[];for(let u=0;u<t.length;u++){const c=t[u];c.parent&&c.parent.isBone&&(r.push(0,0,0),r.push(0,0,0),s.push(0,0,0),s.push(0,0,0))}n.setAttribute("position",new Ht(r,3)),n.setAttribute("color",new Ht(s,3));const o=new hs({vertexColors:!0,depthTest:!1,depthWrite:!1,toneMapped:!1,transparent:!0});super(n,o),this.isSkeletonHelper=!0,this.type="SkeletonHelper",this.root=e,this.bones=t,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1;const a=new Et(255),l=new Et(65280);this.setColors(a,l)}updateMatrixWorld(e){const t=this.bones,n=this.geometry,r=n.getAttribute("position");jp.copy(this.root.matrixWorld).invert();for(let s=0,o=0;s<t.length;s++){const a=t[s];a.parent&&a.parent.isBone&&(k7.multiplyMatrices(jp,a.matrixWorld),q1.setFromMatrixPosition(k7),r.setXYZ(o,q1.x,q1.y,q1.z),k7.multiplyMatrices(jp,a.parent.matrixWorld),q1.setFromMatrixPosition(k7),r.setXYZ(o+1,q1.x,q1.y,q1.z),o+=2)}n.getAttribute("position").needsUpdate=!0,super.updateMatrixWorld(e)}setColors(e,t){const r=this.geometry.getAttribute("color");for(let s=0;s<r.count;s+=2)r.setXYZ(s,e.r,e.g,e.b),r.setXYZ(s+1,t.r,t.g,t.b);return r.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}function rR(i){const e=[];i.isBone===!0&&e.push(i);for(let t=0;t<i.children.length;t++)e.push(...rR(i.children[t]));return e}class IO extends ei{constructor(e,t,n){const r=new i0(t,4,2),s=new Bs({wireframe:!0,fog:!1,toneMapped:!1});super(r,s),this.light=e,this.color=n,this.type="PointLightHelper",this.matrix=this.light.matrixWorld,this.matrixAutoUpdate=!1,this.update()}dispose(){this.geometry.dispose(),this.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.color!==void 0?this.material.color.set(this.color):this.material.color.copy(this.light.color)}}const LO=new J,Zb=new Et,Jb=new Et;class DO extends Ai{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="HemisphereLightHelper";const r=new Z8(t);r.rotateY(Math.PI*.5),this.material=new Bs({wireframe:!0,fog:!1,toneMapped:!1}),this.color===void 0&&(this.material.vertexColors=!0);const s=r.getAttribute("position"),o=new Float32Array(s.count*3);r.setAttribute("color",new oi(o,3)),this.add(new ei(r,this.material)),this.update()}dispose(){this.children[0].geometry.dispose(),this.children[0].material.dispose()}update(){const e=this.children[0];if(this.color!==void 0)this.material.color.set(this.color);else{const t=e.geometry.getAttribute("color");Zb.copy(this.light.color),Jb.copy(this.light.groundColor);for(let n=0,r=t.count;n<r;n++){const s=n<r/2?Zb:Jb;t.setXYZ(n,s.r,s.g,s.b)}t.needsUpdate=!0}this.light.updateWorldMatrix(!0,!1),e.lookAt(LO.setFromMatrixPosition(this.light.matrixWorld).negate())}}class BO extends t0{constructor(e=10,t=10,n=4473924,r=8947848){n=new Et(n),r=new Et(r);const s=t/2,o=e/t,a=e/2,l=[],u=[];for(let m=0,_=0,b=-a;m<=t;m++,b+=o){l.push(-a,0,b,a,0,b),l.push(b,0,-a,b,0,a);const M=m===s?n:r;M.toArray(u,_),_+=3,M.toArray(u,_),_+=3,M.toArray(u,_),_+=3,M.toArray(u,_),_+=3}const c=new Tn;c.setAttribute("position",new Ht(l,3)),c.setAttribute("color",new Ht(u,3));const A=new hs({vertexColors:!0,toneMapped:!1});super(c,A),this.type="GridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}class FO extends t0{constructor(e=10,t=16,n=8,r=64,s=4473924,o=8947848){s=new Et(s),o=new Et(o);const a=[],l=[];if(t>1)for(let A=0;A<t;A++){const m=A/t*(Math.PI*2),_=Math.sin(m)*e,b=Math.cos(m)*e;a.push(0,0,0),a.push(_,0,b);const M=A&1?s:o;l.push(M.r,M.g,M.b),l.push(M.r,M.g,M.b)}for(let A=0;A<n;A++){const m=A&1?s:o,_=e-e/n*A;for(let b=0;b<r;b++){let M=b/r*(Math.PI*2),w=Math.sin(M)*_,T=Math.cos(M)*_;a.push(w,0,T),l.push(m.r,m.g,m.b),M=(b+1)/r*(Math.PI*2),w=Math.sin(M)*_,T=Math.cos(M)*_,a.push(w,0,T),l.push(m.r,m.g,m.b)}}const u=new Tn;u.setAttribute("position",new Ht(a,3)),u.setAttribute("color",new Ht(l,3));const c=new hs({vertexColors:!0,toneMapped:!1});super(u,c),this.type="PolarGridHelper"}dispose(){this.geometry.dispose(),this.material.dispose()}}const eS=new J,V7=new J,tS=new J;class UO extends Ai{constructor(e,t,n){super(),this.light=e,this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.color=n,this.type="DirectionalLightHelper",t===void 0&&(t=1);let r=new Tn;r.setAttribute("position",new Ht([-t,t,0,t,t,0,t,-t,0,-t,-t,0,-t,t,0],3));const s=new hs({fog:!1,toneMapped:!1});this.lightPlane=new D0(r,s),this.add(this.lightPlane),r=new Tn,r.setAttribute("position",new Ht([0,0,0,0,0,1],3)),this.targetLine=new D0(r,s),this.add(this.targetLine),this.update()}dispose(){this.lightPlane.geometry.dispose(),this.lightPlane.material.dispose(),this.targetLine.geometry.dispose(),this.targetLine.material.dispose()}update(){this.light.updateWorldMatrix(!0,!1),this.light.target.updateWorldMatrix(!0,!1),eS.setFromMatrixPosition(this.light.matrixWorld),V7.setFromMatrixPosition(this.light.target.matrixWorld),tS.subVectors(V7,eS),this.lightPlane.lookAt(V7),this.color!==void 0?(this.lightPlane.material.color.set(this.color),this.targetLine.material.color.set(this.color)):(this.lightPlane.material.color.copy(this.light.color),this.targetLine.material.color.copy(this.light.color)),this.targetLine.lookAt(V7),this.targetLine.scale.z=tS.length()}}const z7=new J,br=new yu;class OO extends t0{constructor(e){const t=new Tn,n=new hs({color:16777215,vertexColors:!0,toneMapped:!1}),r=[],s=[],o={};a("n1","n2"),a("n2","n4"),a("n4","n3"),a("n3","n1"),a("f1","f2"),a("f2","f4"),a("f4","f3"),a("f3","f1"),a("n1","f1"),a("n2","f2"),a("n3","f3"),a("n4","f4"),a("p","n1"),a("p","n2"),a("p","n3"),a("p","n4"),a("u1","u2"),a("u2","u3"),a("u3","u1"),a("c","t"),a("p","c"),a("cn1","cn2"),a("cn3","cn4"),a("cf1","cf2"),a("cf3","cf4");function a(b,M){l(b),l(M)}function l(b){r.push(0,0,0),s.push(0,0,0),o[b]===void 0&&(o[b]=[]),o[b].push(r.length/3-1)}t.setAttribute("position",new Ht(r,3)),t.setAttribute("color",new Ht(s,3)),super(t,n),this.type="CameraHelper",this.camera=e,this.camera.updateProjectionMatrix&&this.camera.updateProjectionMatrix(),this.matrix=e.matrixWorld,this.matrixAutoUpdate=!1,this.pointMap=o,this.update();const u=new Et(16755200),c=new Et(16711680),A=new Et(43775),m=new Et(16777215),_=new Et(3355443);this.setColors(u,c,A,m,_)}setColors(e,t,n,r,s){const a=this.geometry.getAttribute("color");return a.setXYZ(0,e.r,e.g,e.b),a.setXYZ(1,e.r,e.g,e.b),a.setXYZ(2,e.r,e.g,e.b),a.setXYZ(3,e.r,e.g,e.b),a.setXYZ(4,e.r,e.g,e.b),a.setXYZ(5,e.r,e.g,e.b),a.setXYZ(6,e.r,e.g,e.b),a.setXYZ(7,e.r,e.g,e.b),a.setXYZ(8,e.r,e.g,e.b),a.setXYZ(9,e.r,e.g,e.b),a.setXYZ(10,e.r,e.g,e.b),a.setXYZ(11,e.r,e.g,e.b),a.setXYZ(12,e.r,e.g,e.b),a.setXYZ(13,e.r,e.g,e.b),a.setXYZ(14,e.r,e.g,e.b),a.setXYZ(15,e.r,e.g,e.b),a.setXYZ(16,e.r,e.g,e.b),a.setXYZ(17,e.r,e.g,e.b),a.setXYZ(18,e.r,e.g,e.b),a.setXYZ(19,e.r,e.g,e.b),a.setXYZ(20,e.r,e.g,e.b),a.setXYZ(21,e.r,e.g,e.b),a.setXYZ(22,e.r,e.g,e.b),a.setXYZ(23,e.r,e.g,e.b),a.setXYZ(24,t.r,t.g,t.b),a.setXYZ(25,t.r,t.g,t.b),a.setXYZ(26,t.r,t.g,t.b),a.setXYZ(27,t.r,t.g,t.b),a.setXYZ(28,t.r,t.g,t.b),a.setXYZ(29,t.r,t.g,t.b),a.setXYZ(30,t.r,t.g,t.b),a.setXYZ(31,t.r,t.g,t.b),a.setXYZ(32,n.r,n.g,n.b),a.setXYZ(33,n.r,n.g,n.b),a.setXYZ(34,n.r,n.g,n.b),a.setXYZ(35,n.r,n.g,n.b),a.setXYZ(36,n.r,n.g,n.b),a.setXYZ(37,n.r,n.g,n.b),a.setXYZ(38,r.r,r.g,r.b),a.setXYZ(39,r.r,r.g,r.b),a.setXYZ(40,s.r,s.g,s.b),a.setXYZ(41,s.r,s.g,s.b),a.setXYZ(42,s.r,s.g,s.b),a.setXYZ(43,s.r,s.g,s.b),a.setXYZ(44,s.r,s.g,s.b),a.setXYZ(45,s.r,s.g,s.b),a.setXYZ(46,s.r,s.g,s.b),a.setXYZ(47,s.r,s.g,s.b),a.setXYZ(48,s.r,s.g,s.b),a.setXYZ(49,s.r,s.g,s.b),a.needsUpdate=!0,this}update(){const e=this.geometry,t=this.pointMap,n=1,r=1;let s,o;if(br.projectionMatrixInverse.copy(this.camera.projectionMatrixInverse),this.camera.reversedDepth===!0)s=1,o=0;else if(this.camera.coordinateSystem===bs)s=-1,o=1;else if(this.camera.coordinateSystem===Qa)s=0,o=1;else throw new Error("THREE.CameraHelper.update(): Invalid coordinate system: "+this.camera.coordinateSystem);Lr("c",t,e,br,0,0,s),Lr("t",t,e,br,0,0,o),Lr("n1",t,e,br,-n,-r,s),Lr("n2",t,e,br,n,-r,s),Lr("n3",t,e,br,-n,r,s),Lr("n4",t,e,br,n,r,s),Lr("f1",t,e,br,-n,-r,o),Lr("f2",t,e,br,n,-r,o),Lr("f3",t,e,br,-n,r,o),Lr("f4",t,e,br,n,r,o),Lr("u1",t,e,br,n*.7,r*1.1,s),Lr("u2",t,e,br,-n*.7,r*1.1,s),Lr("u3",t,e,br,0,r*2,s),Lr("cf1",t,e,br,-n,0,o),Lr("cf2",t,e,br,n,0,o),Lr("cf3",t,e,br,0,-r,o),Lr("cf4",t,e,br,0,r,o),Lr("cn1",t,e,br,-n,0,s),Lr("cn2",t,e,br,n,0,s),Lr("cn3",t,e,br,0,-r,s),Lr("cn4",t,e,br,0,r,s),e.getAttribute("position").needsUpdate=!0}dispose(){this.geometry.dispose(),this.material.dispose()}}function Lr(i,e,t,n,r,s,o){z7.set(r,s,o).unproject(n);const a=e[i];if(a!==void 0){const l=t.getAttribute("position");for(let u=0,c=a.length;u<c;u++)l.setXYZ(a[u],z7.x,z7.y,z7.z)}}const G7=new ls;class kO extends t0{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=new Float32Array(8*3),s=new Tn;s.setIndex(new oi(n,1)),s.setAttribute("position",new oi(r,3)),super(s,new hs({color:t,toneMapped:!1})),this.object=e,this.type="BoxHelper",this.matrixAutoUpdate=!1,this.update()}update(){if(this.object!==void 0&&G7.setFromObject(this.object),G7.isEmpty())return;const e=G7.min,t=G7.max,n=this.geometry.attributes.position,r=n.array;r[0]=t.x,r[1]=t.y,r[2]=t.z,r[3]=e.x,r[4]=t.y,r[5]=t.z,r[6]=e.x,r[7]=e.y,r[8]=t.z,r[9]=t.x,r[10]=e.y,r[11]=t.z,r[12]=t.x,r[13]=t.y,r[14]=e.z,r[15]=e.x,r[16]=t.y,r[17]=e.z,r[18]=e.x,r[19]=e.y,r[20]=e.z,r[21]=t.x,r[22]=e.y,r[23]=e.z,n.needsUpdate=!0,this.geometry.computeBoundingSphere()}setFromObject(e){return this.object=e,this.update(),this}copy(e,t){return super.copy(e,t),this.object=e.object,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class VO extends t0{constructor(e,t=16776960){const n=new Uint16Array([0,1,1,2,2,3,3,0,4,5,5,6,6,7,7,4,0,4,1,5,2,6,3,7]),r=[1,1,1,-1,1,1,-1,-1,1,1,-1,1,1,1,-1,-1,1,-1,-1,-1,-1,1,-1,-1],s=new Tn;s.setIndex(new oi(n,1)),s.setAttribute("position",new Ht(r,3)),super(s,new hs({color:t,toneMapped:!1})),this.box=e,this.type="Box3Helper",this.geometry.computeBoundingSphere()}updateMatrixWorld(e){const t=this.box;t.isEmpty()||(t.getCenter(this.position),t.getSize(this.scale),this.scale.multiplyScalar(.5),super.updateMatrixWorld(e))}dispose(){this.geometry.dispose(),this.material.dispose()}}class zO extends D0{constructor(e,t=1,n=16776960){const r=n,s=[1,-1,0,-1,1,0,-1,-1,0,1,1,0,-1,1,0,-1,-1,0,1,-1,0,1,1,0],o=new Tn;o.setAttribute("position",new Ht(s,3)),o.computeBoundingSphere(),super(o,new hs({color:r,toneMapped:!1})),this.type="PlaneHelper",this.plane=e,this.size=t;const a=[1,1,0,-1,1,0,-1,-1,0,1,1,0,-1,-1,0,1,-1,0],l=new Tn;l.setAttribute("position",new Ht(a,3)),l.computeBoundingSphere(),this.add(new ei(l,new Bs({color:r,opacity:.2,transparent:!0,depthWrite:!1,toneMapped:!1})))}updateMatrixWorld(e){this.position.set(0,0,0),this.scale.set(.5*this.size,.5*this.size,1),this.lookAt(this.plane.normal),this.translateZ(-this.plane.constant),super.updateMatrixWorld(e)}dispose(){this.geometry.dispose(),this.material.dispose(),this.children[0].geometry.dispose(),this.children[0].material.dispose()}}const nS=new J;let q7,$p;class GO extends Ai{constructor(e=new J(0,0,1),t=new J(0,0,0),n=1,r=16776960,s=n*.2,o=s*.2){super(),this.type="ArrowHelper",q7===void 0&&(q7=new Tn,q7.setAttribute("position",new Ht([0,0,0,0,1,0],3)),$p=new Y8(.5,1,5,1),$p.translate(0,-.5,0)),this.position.copy(t),this.line=new D0(q7,new hs({color:r,toneMapped:!1})),this.line.matrixAutoUpdate=!1,this.add(this.line),this.cone=new ei($p,new Bs({color:r,toneMapped:!1})),this.cone.matrixAutoUpdate=!1,this.add(this.cone),this.setDirection(e),this.setLength(n,s,o)}setDirection(e){if(e.y>.99999)this.quaternion.set(0,0,0,1);else if(e.y<-.99999)this.quaternion.set(1,0,0,0);else{nS.set(e.z,0,-e.x).normalize();const t=Math.acos(e.y);this.quaternion.setFromAxisAngle(nS,t)}}setLength(e,t=e*.2,n=t*.2){this.line.scale.set(1,Math.max(1e-4,e-t),1),this.line.updateMatrix(),this.cone.scale.set(n,t,n),this.cone.position.y=e,this.cone.updateMatrix()}setColor(e){this.line.material.color.set(e),this.cone.material.color.set(e)}copy(e){return super.copy(e,!1),this.line.copy(e.line),this.cone.copy(e.cone),this}dispose(){this.line.geometry.dispose(),this.line.material.dispose(),this.cone.geometry.dispose(),this.cone.material.dispose()}}class qO extends t0{constructor(e=1){const t=[0,0,0,e,0,0,0,0,0,0,e,0,0,0,0,0,0,e],n=[1,0,0,1,.6,0,0,1,0,.6,1,0,0,0,1,0,.6,1],r=new Tn;r.setAttribute("position",new Ht(t,3)),r.setAttribute("color",new Ht(n,3));const s=new hs({vertexColors:!0,toneMapped:!1});super(r,s),this.type="AxesHelper"}setColors(e,t,n){const r=new Et,s=this.geometry.attributes.color.array;return r.set(e),r.toArray(s,0),r.toArray(s,3),r.set(t),r.toArray(s,6),r.toArray(s,9),r.set(n),r.toArray(s,12),r.toArray(s,15),this.geometry.attributes.color.needsUpdate=!0,this}dispose(){this.geometry.dispose(),this.material.dispose()}}class sR{constructor(){this.type="ShapePath",this.color=new Et,this.subPaths=[],this.currentPath=null}moveTo(e,t){return this.currentPath=new hd,this.subPaths.push(this.currentPath),this.currentPath.moveTo(e,t),this}lineTo(e,t){return this.currentPath.lineTo(e,t),this}quadraticCurveTo(e,t,n,r){return this.currentPath.quadraticCurveTo(e,t,n,r),this}bezierCurveTo(e,t,n,r,s,o){return this.currentPath.bezierCurveTo(e,t,n,r,s,o),this}splineThru(e){return this.currentPath.splineThru(e),this}toShapes(e){function t(T){const N=[];for(let P=0,I=T.length;P<I;P++){const B=T[P],F=new H2;F.curves=B.curves,N.push(F)}return N}function n(T,N){const P=N.length;let I=!1;for(let B=P-1,F=0;F<P;B=F++){let O=N[B],V=N[F],U=V.x-O.x,z=V.y-O.y;if(Math.abs(z)>Number.EPSILON){if(z<0&&(O=N[F],U=-U,V=N[B],z=-z),T.y<O.y||T.y>V.y)continue;if(T.y===O.y){if(T.x===O.x)return!0}else{const H=z*(T.x-O.x)-U*(T.y-O.y);if(H===0)return!0;if(H<0)continue;I=!I}}else{if(T.y!==O.y)continue;if(V.x<=T.x&&T.x<=O.x||O.x<=T.x&&T.x<=V.x)return!0}}return I}const r=C0.isClockWise,s=this.subPaths;if(s.length===0)return[];let o,a,l;const u=[];if(s.length===1)return a=s[0],l=new H2,l.curves=a.curves,u.push(l),u;let c=!r(s[0].getPoints());c=e?!c:c;const A=[],m=[];let _=[],b=0,M;m[b]=void 0,_[b]=[];for(let T=0,N=s.length;T<N;T++)a=s[T],M=a.getPoints(),o=r(M),o=e?!o:o,o?(!c&&m[b]&&b++,m[b]={s:new H2,p:M},m[b].s.curves=a.curves,c&&b++,_[b]=[]):_[b].push({h:a,p:M[0]});if(!m[0])return t(s);if(m.length>1){let T=!1,N=0;for(let P=0,I=m.length;P<I;P++)A[P]=[];for(let P=0,I=m.length;P<I;P++){const B=_[P];for(let F=0;F<B.length;F++){const O=B[F];let V=!0;for(let U=0;U<m.length;U++)n(O.p,m[U].p)&&(P!==U&&N++,V?(V=!1,A[U].push(O)):T=!0);V&&A[P].push(O)}}N>0&&T===!1&&(_=A)}let w;for(let T=0,N=m.length;T<N;T++){l=m[T].s,u.push(l),w=_[T];for(let P=0,I=w.length;P<I;P++)l.holes.push(w[P].h)}return u}}class HO extends Ta{constructor(e,t=null){super(),this.object=e,this.domElement=t,this.enabled=!0,this.state=-1,this.keys={},this.mouseButtons={LEFT:null,MIDDLE:null,RIGHT:null},this.touches={ONE:null,TWO:null}}connect(e){if(e===void 0){console.warn("THREE.Controls: connect() now requires an element.");return}this.domElement!==null&&this.disconnect(),this.domElement=e}disconnect(){}dispose(){}update(){}}function WO(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2):(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0),i}function jO(i,e){const t=i.image&&i.image.width?i.image.width/i.image.height:1;return t>e?(i.repeat.x=e/t,i.repeat.y=1,i.offset.x=(1-i.repeat.x)/2,i.offset.y=0):(i.repeat.x=1,i.repeat.y=t/e,i.offset.x=0,i.offset.y=(1-i.repeat.y)/2),i}function $O(i){return i.repeat.x=1,i.repeat.y=1,i.offset.x=0,i.offset.y=0,i}function bg(i,e,t,n){const r=XO(n);switch(t){case v9:return i*e;case Tc:return i*e/r.components*r.byteLength;case gu:return i*e/r.components*r.byteLength;case nl:return i*e*2/r.components*r.byteLength;case wc:return i*e*2/r.components*r.byteLength;case l5:return i*e*3/r.components*r.byteLength;case Zi:return i*e*4/r.components*r.byteLength;case Mc:return i*e*4/r.components*r.byteLength;case lu:case jl:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case $l:case Xl:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case F4:case O4:return Math.max(i,16)*Math.max(e,8)/4;case B4:case U4:return Math.max(i,8)*Math.max(e,8)/2;case k4:case ec:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*8;case tc:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case nc:return Math.floor((i+3)/4)*Math.floor((e+3)/4)*16;case ic:return Math.floor((i+4)/5)*Math.floor((e+3)/4)*16;case rc:return Math.floor((i+4)/5)*Math.floor((e+4)/5)*16;case sc:return Math.floor((i+5)/6)*Math.floor((e+4)/5)*16;case oc:return Math.floor((i+5)/6)*Math.floor((e+5)/6)*16;case ac:return Math.floor((i+7)/8)*Math.floor((e+4)/5)*16;case lc:return Math.floor((i+7)/8)*Math.floor((e+5)/6)*16;case uc:return Math.floor((i+7)/8)*Math.floor((e+7)/8)*16;case cc:return Math.floor((i+9)/10)*Math.floor((e+4)/5)*16;case hc:return Math.floor((i+9)/10)*Math.floor((e+5)/6)*16;case fc:return Math.floor((i+9)/10)*Math.floor((e+7)/8)*16;case dc:return Math.floor((i+9)/10)*Math.floor((e+9)/10)*16;case Ac:return Math.floor((i+11)/12)*Math.floor((e+9)/10)*16;case pc:return Math.floor((i+11)/12)*Math.floor((e+11)/12)*16;case uu:case rd:case sd:return Math.ceil(i/4)*Math.ceil(e/4)*16;case _9:case V4:return Math.ceil(i/4)*Math.ceil(e/4)*8;case z4:case G4:return Math.ceil(i/4)*Math.ceil(e/4)*16}throw new Error(`Unable to determine texture byte length for ${t} format.`)}function XO(i){switch(i){case ar:case ou:return{byteLength:1,components:1};case qa:case au:case Yr:return{byteLength:2,components:1};case z8:case G8:return{byteLength:2,components:4};case Oi:case as:case nr:return{byteLength:4,components:1};case q8:return{byteLength:4,components:3}}throw new Error(`Unknown texture type ${i}.`)}class QO{static contain(e,t){return WO(e,t)}static cover(e,t){return jO(e,t)}static fill(e){return $O(e)}static getByteLength(e,t,n,r){return bg(e,t,n,r)}}typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("register",{detail:{revision:o5}}));typeof window<"u"&&(window.__THREE__?console.warn("WARNING: Multiple instances of Three.js being imported."):window.__THREE__=o5);/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */function oR(){let i=null,e=!1,t=null,n=null;function r(s,o){t(s,o),n=i.requestAnimationFrame(r)}return{start:function(){e!==!0&&t!==null&&(n=i.requestAnimationFrame(r),e=!0)},stop:function(){i.cancelAnimationFrame(n),e=!1},setAnimationLoop:function(s){t=s},setContext:function(s){i=s}}}function YO(i){const e=new WeakMap;function t(a,l){const u=a.array,c=a.usage,A=u.byteLength,m=i.createBuffer();i.bindBuffer(l,m),i.bufferData(l,u,c),a.onUploadCallback();let _;if(u instanceof Float32Array)_=i.FLOAT;else if(typeof Float16Array<"u"&&u instanceof Float16Array)_=i.HALF_FLOAT;else if(u instanceof Uint16Array)a.isFloat16BufferAttribute?_=i.HALF_FLOAT:_=i.UNSIGNED_SHORT;else if(u instanceof Int16Array)_=i.SHORT;else if(u instanceof Uint32Array)_=i.UNSIGNED_INT;else if(u instanceof Int32Array)_=i.INT;else if(u instanceof Int8Array)_=i.BYTE;else if(u instanceof Uint8Array)_=i.UNSIGNED_BYTE;else if(u instanceof Uint8ClampedArray)_=i.UNSIGNED_BYTE;else throw new Error("THREE.WebGLAttributes: Unsupported buffer data format: "+u);return{buffer:m,type:_,bytesPerElement:u.BYTES_PER_ELEMENT,version:a.version,size:A}}function n(a,l,u){const c=l.array,A=l.updateRanges;if(i.bindBuffer(u,a),A.length===0)i.bufferSubData(u,0,c);else{A.sort((_,b)=>_.start-b.start);let m=0;for(let _=1;_<A.length;_++){const b=A[m],M=A[_];M.start<=b.start+b.count+1?b.count=Math.max(b.count,M.start+M.count-b.start):(++m,A[m]=M)}A.length=m+1;for(let _=0,b=A.length;_<b;_++){const M=A[_];i.bufferSubData(u,M.start*c.BYTES_PER_ELEMENT,c,M.start,M.count)}l.clearUpdateRanges()}l.onUploadCallback()}function r(a){return a.isInterleavedBufferAttribute&&(a=a.data),e.get(a)}function s(a){a.isInterleavedBufferAttribute&&(a=a.data);const l=e.get(a);l&&(i.deleteBuffer(l.buffer),e.delete(a))}function o(a,l){if(a.isInterleavedBufferAttribute&&(a=a.data),a.isGLBufferAttribute){const c=e.get(a);(!c||c.version<a.version)&&e.set(a,{buffer:a.buffer,type:a.type,bytesPerElement:a.elementSize,version:a.version});return}const u=e.get(a);if(u===void 0)e.set(a,t(a,l));else if(u.version<a.version){if(u.size!==a.array.byteLength)throw new Error("THREE.WebGLAttributes: The size of the buffer attribute's array buffer does not match the original size. Resizing buffer attributes is not supported.");n(u.buffer,a,l),u.version=a.version}}return{get:r,remove:s,update:o}}var KO=`#ifdef USE_ALPHAHASH
	if ( diffuseColor.a < getAlphaHashThreshold( vPosition ) ) discard;
#endif`,ZO=`#ifdef USE_ALPHAHASH
	const float ALPHA_HASH_SCALE = 0.05;
	float hash2D( vec2 value ) {
		return fract( 1.0e4 * sin( 17.0 * value.x + 0.1 * value.y ) * ( 0.1 + abs( sin( 13.0 * value.y + value.x ) ) ) );
	}
	float hash3D( vec3 value ) {
		return hash2D( vec2( hash2D( value.xy ), value.z ) );
	}
	float getAlphaHashThreshold( vec3 position ) {
		float maxDeriv = max(
			length( dFdx( position.xyz ) ),
			length( dFdy( position.xyz ) )
		);
		float pixScale = 1.0 / ( ALPHA_HASH_SCALE * maxDeriv );
		vec2 pixScales = vec2(
			exp2( floor( log2( pixScale ) ) ),
			exp2( ceil( log2( pixScale ) ) )
		);
		vec2 alpha = vec2(
			hash3D( floor( pixScales.x * position.xyz ) ),
			hash3D( floor( pixScales.y * position.xyz ) )
		);
		float lerpFactor = fract( log2( pixScale ) );
		float x = ( 1.0 - lerpFactor ) * alpha.x + lerpFactor * alpha.y;
		float a = min( lerpFactor, 1.0 - lerpFactor );
		vec3 cases = vec3(
			x * x / ( 2.0 * a * ( 1.0 - a ) ),
			( x - 0.5 * a ) / ( 1.0 - a ),
			1.0 - ( ( 1.0 - x ) * ( 1.0 - x ) / ( 2.0 * a * ( 1.0 - a ) ) )
		);
		float threshold = ( x < ( 1.0 - a ) )
			? ( ( x < a ) ? cases.x : cases.y )
			: cases.z;
		return clamp( threshold , 1.0e-6, 1.0 );
	}
#endif`,JO=`#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, vAlphaMapUv ).g;
#endif`,ek=`#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,tk=`#ifdef USE_ALPHATEST
	#ifdef ALPHA_TO_COVERAGE
	diffuseColor.a = smoothstep( alphaTest, alphaTest + fwidth( diffuseColor.a ), diffuseColor.a );
	if ( diffuseColor.a == 0.0 ) discard;
	#else
	if ( diffuseColor.a < alphaTest ) discard;
	#endif
#endif`,nk=`#ifdef USE_ALPHATEST
	uniform float alphaTest;
#endif`,ik=`#ifdef USE_AOMAP
	float ambientOcclusion = ( texture2D( aoMap, vAoMapUv ).r - 1.0 ) * aoMapIntensity + 1.0;
	reflectedLight.indirectDiffuse *= ambientOcclusion;
	#if defined( USE_CLEARCOAT ) 
		clearcoatSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_SHEEN ) 
		sheenSpecularIndirect *= ambientOcclusion;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD )
		float dotNV = saturate( dot( geometryNormal, geometryViewDir ) );
		reflectedLight.indirectSpecular *= computeSpecularOcclusion( dotNV, ambientOcclusion, material.roughness );
	#endif
#endif`,rk=`#ifdef USE_AOMAP
	uniform sampler2D aoMap;
	uniform float aoMapIntensity;
#endif`,sk=`#ifdef USE_BATCHING
	#if ! defined( GL_ANGLE_multi_draw )
	#define gl_DrawID _gl_DrawID
	uniform int _gl_DrawID;
	#endif
	uniform highp sampler2D batchingTexture;
	uniform highp usampler2D batchingIdTexture;
	mat4 getBatchingMatrix( const in float i ) {
		int size = textureSize( batchingTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( batchingTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( batchingTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( batchingTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( batchingTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
	float getIndirectIndex( const in int i ) {
		int size = textureSize( batchingIdTexture, 0 ).x;
		int x = i % size;
		int y = i / size;
		return float( texelFetch( batchingIdTexture, ivec2( x, y ), 0 ).r );
	}
#endif
#ifdef USE_BATCHING_COLOR
	uniform sampler2D batchingColorTexture;
	vec3 getBatchingColor( const in float i ) {
		int size = textureSize( batchingColorTexture, 0 ).x;
		int j = int( i );
		int x = j % size;
		int y = j / size;
		return texelFetch( batchingColorTexture, ivec2( x, y ), 0 ).rgb;
	}
#endif`,ok=`#ifdef USE_BATCHING
	mat4 batchingMatrix = getBatchingMatrix( getIndirectIndex( gl_DrawID ) );
#endif`,ak=`vec3 transformed = vec3( position );
#ifdef USE_ALPHAHASH
	vPosition = vec3( position );
#endif`,lk=`vec3 objectNormal = vec3( normal );
#ifdef USE_TANGENT
	vec3 objectTangent = vec3( tangent.xyz );
#endif`,uk=`float G_BlinnPhong_Implicit( ) {
	return 0.25;
}
float D_BlinnPhong( const in float shininess, const in float dotNH ) {
	return RECIPROCAL_PI * ( shininess * 0.5 + 1.0 ) * pow( dotNH, shininess );
}
vec3 BRDF_BlinnPhong( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in vec3 specularColor, const in float shininess ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( specularColor, 1.0, dotVH );
	float G = G_BlinnPhong_Implicit( );
	float D = D_BlinnPhong( shininess, dotNH );
	return F * ( G * D );
} // validated`,ck=`#ifdef USE_IRIDESCENCE
	const mat3 XYZ_TO_REC709 = mat3(
		 3.2404542, -0.9692660,  0.0556434,
		-1.5371385,  1.8760108, -0.2040259,
		-0.4985314,  0.0415560,  1.0572252
	);
	vec3 Fresnel0ToIor( vec3 fresnel0 ) {
		vec3 sqrtF0 = sqrt( fresnel0 );
		return ( vec3( 1.0 ) + sqrtF0 ) / ( vec3( 1.0 ) - sqrtF0 );
	}
	vec3 IorToFresnel0( vec3 transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - vec3( incidentIor ) ) / ( transmittedIor + vec3( incidentIor ) ) );
	}
	float IorToFresnel0( float transmittedIor, float incidentIor ) {
		return pow2( ( transmittedIor - incidentIor ) / ( transmittedIor + incidentIor ));
	}
	vec3 evalSensitivity( float OPD, vec3 shift ) {
		float phase = 2.0 * PI * OPD * 1.0e-9;
		vec3 val = vec3( 5.4856e-13, 4.4201e-13, 5.2481e-13 );
		vec3 pos = vec3( 1.6810e+06, 1.7953e+06, 2.2084e+06 );
		vec3 var = vec3( 4.3278e+09, 9.3046e+09, 6.6121e+09 );
		vec3 xyz = val * sqrt( 2.0 * PI * var ) * cos( pos * phase + shift ) * exp( - pow2( phase ) * var );
		xyz.x += 9.7470e-14 * sqrt( 2.0 * PI * 4.5282e+09 ) * cos( 2.2399e+06 * phase + shift[ 0 ] ) * exp( - 4.5282e+09 * pow2( phase ) );
		xyz /= 1.0685e-7;
		vec3 rgb = XYZ_TO_REC709 * xyz;
		return rgb;
	}
	vec3 evalIridescence( float outsideIOR, float eta2, float cosTheta1, float thinFilmThickness, vec3 baseF0 ) {
		vec3 I;
		float iridescenceIOR = mix( outsideIOR, eta2, smoothstep( 0.0, 0.03, thinFilmThickness ) );
		float sinTheta2Sq = pow2( outsideIOR / iridescenceIOR ) * ( 1.0 - pow2( cosTheta1 ) );
		float cosTheta2Sq = 1.0 - sinTheta2Sq;
		if ( cosTheta2Sq < 0.0 ) {
			return vec3( 1.0 );
		}
		float cosTheta2 = sqrt( cosTheta2Sq );
		float R0 = IorToFresnel0( iridescenceIOR, outsideIOR );
		float R12 = F_Schlick( R0, 1.0, cosTheta1 );
		float T121 = 1.0 - R12;
		float phi12 = 0.0;
		if ( iridescenceIOR < outsideIOR ) phi12 = PI;
		float phi21 = PI - phi12;
		vec3 baseIOR = Fresnel0ToIor( clamp( baseF0, 0.0, 0.9999 ) );		vec3 R1 = IorToFresnel0( baseIOR, iridescenceIOR );
		vec3 R23 = F_Schlick( R1, 1.0, cosTheta2 );
		vec3 phi23 = vec3( 0.0 );
		if ( baseIOR[ 0 ] < iridescenceIOR ) phi23[ 0 ] = PI;
		if ( baseIOR[ 1 ] < iridescenceIOR ) phi23[ 1 ] = PI;
		if ( baseIOR[ 2 ] < iridescenceIOR ) phi23[ 2 ] = PI;
		float OPD = 2.0 * iridescenceIOR * thinFilmThickness * cosTheta2;
		vec3 phi = vec3( phi21 ) + phi23;
		vec3 R123 = clamp( R12 * R23, 1e-5, 0.9999 );
		vec3 r123 = sqrt( R123 );
		vec3 Rs = pow2( T121 ) * R23 / ( vec3( 1.0 ) - R123 );
		vec3 C0 = R12 + Rs;
		I = C0;
		vec3 Cm = Rs - T121;
		for ( int m = 1; m <= 2; ++ m ) {
			Cm *= r123;
			vec3 Sm = 2.0 * evalSensitivity( float( m ) * OPD, float( m ) * phi );
			I += Cm * Sm;
		}
		return max( I, vec3( 0.0 ) );
	}
#endif`,hk=`#ifdef USE_BUMPMAP
	uniform sampler2D bumpMap;
	uniform float bumpScale;
	vec2 dHdxy_fwd() {
		vec2 dSTdx = dFdx( vBumpMapUv );
		vec2 dSTdy = dFdy( vBumpMapUv );
		float Hll = bumpScale * texture2D( bumpMap, vBumpMapUv ).x;
		float dBx = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdx ).x - Hll;
		float dBy = bumpScale * texture2D( bumpMap, vBumpMapUv + dSTdy ).x - Hll;
		return vec2( dBx, dBy );
	}
	vec3 perturbNormalArb( vec3 surf_pos, vec3 surf_norm, vec2 dHdxy, float faceDirection ) {
		vec3 vSigmaX = normalize( dFdx( surf_pos.xyz ) );
		vec3 vSigmaY = normalize( dFdy( surf_pos.xyz ) );
		vec3 vN = surf_norm;
		vec3 R1 = cross( vSigmaY, vN );
		vec3 R2 = cross( vN, vSigmaX );
		float fDet = dot( vSigmaX, R1 ) * faceDirection;
		vec3 vGrad = sign( fDet ) * ( dHdxy.x * R1 + dHdxy.y * R2 );
		return normalize( abs( fDet ) * surf_norm - vGrad );
	}
#endif`,fk=`#if NUM_CLIPPING_PLANES > 0
	vec4 plane;
	#ifdef ALPHA_TO_COVERAGE
		float distanceToPlane, distanceGradient;
		float clipOpacity = 1.0;
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
			distanceGradient = fwidth( distanceToPlane ) / 2.0;
			clipOpacity *= smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			if ( clipOpacity == 0.0 ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			float unionClipOpacity = 1.0;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				distanceToPlane = - dot( vClipPosition, plane.xyz ) + plane.w;
				distanceGradient = fwidth( distanceToPlane ) / 2.0;
				unionClipOpacity *= 1.0 - smoothstep( - distanceGradient, distanceGradient, distanceToPlane );
			}
			#pragma unroll_loop_end
			clipOpacity *= 1.0 - unionClipOpacity;
		#endif
		diffuseColor.a *= clipOpacity;
		if ( diffuseColor.a == 0.0 ) discard;
	#else
		#pragma unroll_loop_start
		for ( int i = 0; i < UNION_CLIPPING_PLANES; i ++ ) {
			plane = clippingPlanes[ i ];
			if ( dot( vClipPosition, plane.xyz ) > plane.w ) discard;
		}
		#pragma unroll_loop_end
		#if UNION_CLIPPING_PLANES < NUM_CLIPPING_PLANES
			bool clipped = true;
			#pragma unroll_loop_start
			for ( int i = UNION_CLIPPING_PLANES; i < NUM_CLIPPING_PLANES; i ++ ) {
				plane = clippingPlanes[ i ];
				clipped = ( dot( vClipPosition, plane.xyz ) > plane.w ) && clipped;
			}
			#pragma unroll_loop_end
			if ( clipped ) discard;
		#endif
	#endif
#endif`,dk=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
	uniform vec4 clippingPlanes[ NUM_CLIPPING_PLANES ];
#endif`,Ak=`#if NUM_CLIPPING_PLANES > 0
	varying vec3 vClipPosition;
#endif`,pk=`#if NUM_CLIPPING_PLANES > 0
	vClipPosition = - mvPosition.xyz;
#endif`,mk=`#if defined( USE_COLOR_ALPHA )
	diffuseColor *= vColor;
#elif defined( USE_COLOR )
	diffuseColor.rgb *= vColor;
#endif`,gk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR )
	varying vec3 vColor;
#endif`,yk=`#if defined( USE_COLOR_ALPHA )
	varying vec4 vColor;
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	varying vec3 vColor;
#endif`,vk=`#if defined( USE_COLOR_ALPHA )
	vColor = vec4( 1.0 );
#elif defined( USE_COLOR ) || defined( USE_INSTANCING_COLOR ) || defined( USE_BATCHING_COLOR )
	vColor = vec3( 1.0 );
#endif
#ifdef USE_COLOR
	vColor *= color;
#endif
#ifdef USE_INSTANCING_COLOR
	vColor.xyz *= instanceColor.xyz;
#endif
#ifdef USE_BATCHING_COLOR
	vec3 batchingColor = getBatchingColor( getIndirectIndex( gl_DrawID ) );
	vColor.xyz *= batchingColor.xyz;
#endif`,_k=`#define PI 3.141592653589793
#define PI2 6.283185307179586
#define PI_HALF 1.5707963267948966
#define RECIPROCAL_PI 0.3183098861837907
#define RECIPROCAL_PI2 0.15915494309189535
#define EPSILON 1e-6
#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
#define whiteComplement( a ) ( 1.0 - saturate( a ) )
float pow2( const in float x ) { return x*x; }
vec3 pow2( const in vec3 x ) { return x*x; }
float pow3( const in float x ) { return x*x*x; }
float pow4( const in float x ) { float x2 = x*x; return x2*x2; }
float max3( const in vec3 v ) { return max( max( v.x, v.y ), v.z ); }
float average( const in vec3 v ) { return dot( v, vec3( 0.3333333 ) ); }
highp float rand( const in vec2 uv ) {
	const highp float a = 12.9898, b = 78.233, c = 43758.5453;
	highp float dt = dot( uv.xy, vec2( a,b ) ), sn = mod( dt, PI );
	return fract( sin( sn ) * c );
}
#ifdef HIGH_PRECISION
	float precisionSafeLength( vec3 v ) { return length( v ); }
#else
	float precisionSafeLength( vec3 v ) {
		float maxComponent = max3( abs( v ) );
		return length( v / maxComponent ) * maxComponent;
	}
#endif
struct IncidentLight {
	vec3 color;
	vec3 direction;
	bool visible;
};
struct ReflectedLight {
	vec3 directDiffuse;
	vec3 directSpecular;
	vec3 indirectDiffuse;
	vec3 indirectSpecular;
};
#ifdef USE_ALPHAHASH
	varying vec3 vPosition;
#endif
vec3 transformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( matrix * vec4( dir, 0.0 ) ).xyz );
}
vec3 inverseTransformDirection( in vec3 dir, in mat4 matrix ) {
	return normalize( ( vec4( dir, 0.0 ) * matrix ).xyz );
}
mat3 transposeMat3( const in mat3 m ) {
	mat3 tmp;
	tmp[ 0 ] = vec3( m[ 0 ].x, m[ 1 ].x, m[ 2 ].x );
	tmp[ 1 ] = vec3( m[ 0 ].y, m[ 1 ].y, m[ 2 ].y );
	tmp[ 2 ] = vec3( m[ 0 ].z, m[ 1 ].z, m[ 2 ].z );
	return tmp;
}
bool isPerspectiveMatrix( mat4 m ) {
	return m[ 2 ][ 3 ] == - 1.0;
}
vec2 equirectUv( in vec3 dir ) {
	float u = atan( dir.z, dir.x ) * RECIPROCAL_PI2 + 0.5;
	float v = asin( clamp( dir.y, - 1.0, 1.0 ) ) * RECIPROCAL_PI + 0.5;
	return vec2( u, v );
}
vec3 BRDF_Lambert( const in vec3 diffuseColor ) {
	return RECIPROCAL_PI * diffuseColor;
}
vec3 F_Schlick( const in vec3 f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
}
float F_Schlick( const in float f0, const in float f90, const in float dotVH ) {
	float fresnel = exp2( ( - 5.55473 * dotVH - 6.98316 ) * dotVH );
	return f0 * ( 1.0 - fresnel ) + ( f90 * fresnel );
} // validated`,xk=`#ifdef ENVMAP_TYPE_CUBE_UV
	#define cubeUV_minMipLevel 4.0
	#define cubeUV_minTileSize 16.0
	float getFace( vec3 direction ) {
		vec3 absDirection = abs( direction );
		float face = - 1.0;
		if ( absDirection.x > absDirection.z ) {
			if ( absDirection.x > absDirection.y )
				face = direction.x > 0.0 ? 0.0 : 3.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		} else {
			if ( absDirection.z > absDirection.y )
				face = direction.z > 0.0 ? 2.0 : 5.0;
			else
				face = direction.y > 0.0 ? 1.0 : 4.0;
		}
		return face;
	}
	vec2 getUV( vec3 direction, float face ) {
		vec2 uv;
		if ( face == 0.0 ) {
			uv = vec2( direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 1.0 ) {
			uv = vec2( - direction.x, - direction.z ) / abs( direction.y );
		} else if ( face == 2.0 ) {
			uv = vec2( - direction.x, direction.y ) / abs( direction.z );
		} else if ( face == 3.0 ) {
			uv = vec2( - direction.z, direction.y ) / abs( direction.x );
		} else if ( face == 4.0 ) {
			uv = vec2( - direction.x, direction.z ) / abs( direction.y );
		} else {
			uv = vec2( direction.x, direction.y ) / abs( direction.z );
		}
		return 0.5 * ( uv + 1.0 );
	}
	vec3 bilinearCubeUV( sampler2D envMap, vec3 direction, float mipInt ) {
		float face = getFace( direction );
		float filterInt = max( cubeUV_minMipLevel - mipInt, 0.0 );
		mipInt = max( mipInt, cubeUV_minMipLevel );
		float faceSize = exp2( mipInt );
		highp vec2 uv = getUV( direction, face ) * ( faceSize - 2.0 ) + 1.0;
		if ( face > 2.0 ) {
			uv.y += faceSize;
			face -= 3.0;
		}
		uv.x += face * faceSize;
		uv.x += filterInt * 3.0 * cubeUV_minTileSize;
		uv.y += 4.0 * ( exp2( CUBEUV_MAX_MIP ) - faceSize );
		uv.x *= CUBEUV_TEXEL_WIDTH;
		uv.y *= CUBEUV_TEXEL_HEIGHT;
		#ifdef texture2DGradEXT
			return texture2DGradEXT( envMap, uv, vec2( 0.0 ), vec2( 0.0 ) ).rgb;
		#else
			return texture2D( envMap, uv ).rgb;
		#endif
	}
	#define cubeUV_r0 1.0
	#define cubeUV_m0 - 2.0
	#define cubeUV_r1 0.8
	#define cubeUV_m1 - 1.0
	#define cubeUV_r4 0.4
	#define cubeUV_m4 2.0
	#define cubeUV_r5 0.305
	#define cubeUV_m5 3.0
	#define cubeUV_r6 0.21
	#define cubeUV_m6 4.0
	float roughnessToMip( float roughness ) {
		float mip = 0.0;
		if ( roughness >= cubeUV_r1 ) {
			mip = ( cubeUV_r0 - roughness ) * ( cubeUV_m1 - cubeUV_m0 ) / ( cubeUV_r0 - cubeUV_r1 ) + cubeUV_m0;
		} else if ( roughness >= cubeUV_r4 ) {
			mip = ( cubeUV_r1 - roughness ) * ( cubeUV_m4 - cubeUV_m1 ) / ( cubeUV_r1 - cubeUV_r4 ) + cubeUV_m1;
		} else if ( roughness >= cubeUV_r5 ) {
			mip = ( cubeUV_r4 - roughness ) * ( cubeUV_m5 - cubeUV_m4 ) / ( cubeUV_r4 - cubeUV_r5 ) + cubeUV_m4;
		} else if ( roughness >= cubeUV_r6 ) {
			mip = ( cubeUV_r5 - roughness ) * ( cubeUV_m6 - cubeUV_m5 ) / ( cubeUV_r5 - cubeUV_r6 ) + cubeUV_m5;
		} else {
			mip = - 2.0 * log2( 1.16 * roughness );		}
		return mip;
	}
	vec4 textureCubeUV( sampler2D envMap, vec3 sampleDir, float roughness ) {
		float mip = clamp( roughnessToMip( roughness ), cubeUV_m0, CUBEUV_MAX_MIP );
		float mipF = fract( mip );
		float mipInt = floor( mip );
		vec3 color0 = bilinearCubeUV( envMap, sampleDir, mipInt );
		if ( mipF == 0.0 ) {
			return vec4( color0, 1.0 );
		} else {
			vec3 color1 = bilinearCubeUV( envMap, sampleDir, mipInt + 1.0 );
			return vec4( mix( color0, color1, mipF ), 1.0 );
		}
	}
#endif`,bk=`vec3 transformedNormal = objectNormal;
#ifdef USE_TANGENT
	vec3 transformedTangent = objectTangent;
#endif
#ifdef USE_BATCHING
	mat3 bm = mat3( batchingMatrix );
	transformedNormal /= vec3( dot( bm[ 0 ], bm[ 0 ] ), dot( bm[ 1 ], bm[ 1 ] ), dot( bm[ 2 ], bm[ 2 ] ) );
	transformedNormal = bm * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = bm * transformedTangent;
	#endif
#endif
#ifdef USE_INSTANCING
	mat3 im = mat3( instanceMatrix );
	transformedNormal /= vec3( dot( im[ 0 ], im[ 0 ] ), dot( im[ 1 ], im[ 1 ] ), dot( im[ 2 ], im[ 2 ] ) );
	transformedNormal = im * transformedNormal;
	#ifdef USE_TANGENT
		transformedTangent = im * transformedTangent;
	#endif
#endif
transformedNormal = normalMatrix * transformedNormal;
#ifdef FLIP_SIDED
	transformedNormal = - transformedNormal;
#endif
#ifdef USE_TANGENT
	transformedTangent = ( modelViewMatrix * vec4( transformedTangent, 0.0 ) ).xyz;
	#ifdef FLIP_SIDED
		transformedTangent = - transformedTangent;
	#endif
#endif`,Sk=`#ifdef USE_DISPLACEMENTMAP
	uniform sampler2D displacementMap;
	uniform float displacementScale;
	uniform float displacementBias;
#endif`,Tk=`#ifdef USE_DISPLACEMENTMAP
	transformed += normalize( objectNormal ) * ( texture2D( displacementMap, vDisplacementMapUv ).x * displacementScale + displacementBias );
#endif`,wk=`#ifdef USE_EMISSIVEMAP
	vec4 emissiveColor = texture2D( emissiveMap, vEmissiveMapUv );
	#ifdef DECODE_VIDEO_TEXTURE_EMISSIVE
		emissiveColor = sRGBTransferEOTF( emissiveColor );
	#endif
	totalEmissiveRadiance *= emissiveColor.rgb;
#endif`,Mk=`#ifdef USE_EMISSIVEMAP
	uniform sampler2D emissiveMap;
#endif`,Ek="gl_FragColor = linearToOutputTexel( gl_FragColor );",Rk=`vec4 LinearTransferOETF( in vec4 value ) {
	return value;
}
vec4 sRGBTransferEOTF( in vec4 value ) {
	return vec4( mix( pow( value.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), value.rgb * 0.0773993808, vec3( lessThanEqual( value.rgb, vec3( 0.04045 ) ) ) ), value.a );
}
vec4 sRGBTransferOETF( in vec4 value ) {
	return vec4( mix( pow( value.rgb, vec3( 0.41666 ) ) * 1.055 - vec3( 0.055 ), value.rgb * 12.92, vec3( lessThanEqual( value.rgb, vec3( 0.0031308 ) ) ) ), value.a );
}`,Ck=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vec3 cameraToFrag;
		if ( isOrthographic ) {
			cameraToFrag = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToFrag = normalize( vWorldPosition - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vec3 reflectVec = reflect( cameraToFrag, worldNormal );
		#else
			vec3 reflectVec = refract( cameraToFrag, worldNormal, refractionRatio );
		#endif
	#else
		vec3 reflectVec = vReflect;
	#endif
	#ifdef ENVMAP_TYPE_CUBE
		vec4 envColor = textureCube( envMap, envMapRotation * vec3( flipEnvMap * reflectVec.x, reflectVec.yz ) );
	#else
		vec4 envColor = vec4( 0.0 );
	#endif
	#ifdef ENVMAP_BLENDING_MULTIPLY
		outgoingLight = mix( outgoingLight, outgoingLight * envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_MIX )
		outgoingLight = mix( outgoingLight, envColor.xyz, specularStrength * reflectivity );
	#elif defined( ENVMAP_BLENDING_ADD )
		outgoingLight += envColor.xyz * specularStrength * reflectivity;
	#endif
#endif`,Pk=`#ifdef USE_ENVMAP
	uniform float envMapIntensity;
	uniform float flipEnvMap;
	uniform mat3 envMapRotation;
	#ifdef ENVMAP_TYPE_CUBE
		uniform samplerCube envMap;
	#else
		uniform sampler2D envMap;
	#endif
	
#endif`,Nk=`#ifdef USE_ENVMAP
	uniform float reflectivity;
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		varying vec3 vWorldPosition;
		uniform float refractionRatio;
	#else
		varying vec3 vReflect;
	#endif
#endif`,Ik=`#ifdef USE_ENVMAP
	#if defined( USE_BUMPMAP ) || defined( USE_NORMALMAP ) || defined( PHONG ) || defined( LAMBERT )
		#define ENV_WORLDPOS
	#endif
	#ifdef ENV_WORLDPOS
		
		varying vec3 vWorldPosition;
	#else
		varying vec3 vReflect;
		uniform float refractionRatio;
	#endif
#endif`,Lk=`#ifdef USE_ENVMAP
	#ifdef ENV_WORLDPOS
		vWorldPosition = worldPosition.xyz;
	#else
		vec3 cameraToVertex;
		if ( isOrthographic ) {
			cameraToVertex = normalize( vec3( - viewMatrix[ 0 ][ 2 ], - viewMatrix[ 1 ][ 2 ], - viewMatrix[ 2 ][ 2 ] ) );
		} else {
			cameraToVertex = normalize( worldPosition.xyz - cameraPosition );
		}
		vec3 worldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
		#ifdef ENVMAP_MODE_REFLECTION
			vReflect = reflect( cameraToVertex, worldNormal );
		#else
			vReflect = refract( cameraToVertex, worldNormal, refractionRatio );
		#endif
	#endif
#endif`,Dk=`#ifdef USE_FOG
	vFogDepth = - mvPosition.z;
#endif`,Bk=`#ifdef USE_FOG
	varying float vFogDepth;
#endif`,Fk=`#ifdef USE_FOG
	#ifdef FOG_EXP2
		float fogFactor = 1.0 - exp( - fogDensity * fogDensity * vFogDepth * vFogDepth );
	#else
		float fogFactor = smoothstep( fogNear, fogFar, vFogDepth );
	#endif
	gl_FragColor.rgb = mix( gl_FragColor.rgb, fogColor, fogFactor );
#endif`,Uk=`#ifdef USE_FOG
	uniform vec3 fogColor;
	varying float vFogDepth;
	#ifdef FOG_EXP2
		uniform float fogDensity;
	#else
		uniform float fogNear;
		uniform float fogFar;
	#endif
#endif`,Ok=`#ifdef USE_GRADIENTMAP
	uniform sampler2D gradientMap;
#endif
vec3 getGradientIrradiance( vec3 normal, vec3 lightDirection ) {
	float dotNL = dot( normal, lightDirection );
	vec2 coord = vec2( dotNL * 0.5 + 0.5, 0.0 );
	#ifdef USE_GRADIENTMAP
		return vec3( texture2D( gradientMap, coord ).r );
	#else
		vec2 fw = fwidth( coord ) * 0.5;
		return mix( vec3( 0.7 ), vec3( 1.0 ), smoothstep( 0.7 - fw.x, 0.7 + fw.x, coord.x ) );
	#endif
}`,kk=`#ifdef USE_LIGHTMAP
	uniform sampler2D lightMap;
	uniform float lightMapIntensity;
#endif`,Vk=`LambertMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularStrength = specularStrength;`,zk=`varying vec3 vViewPosition;
struct LambertMaterial {
	vec3 diffuseColor;
	float specularStrength;
};
void RE_Direct_Lambert( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Lambert( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in LambertMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Lambert
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Lambert`,Gk=`uniform bool receiveShadow;
uniform vec3 ambientLightColor;
#if defined( USE_LIGHT_PROBES )
	uniform vec3 lightProbe[ 9 ];
#endif
vec3 shGetIrradianceAt( in vec3 normal, in vec3 shCoefficients[ 9 ] ) {
	float x = normal.x, y = normal.y, z = normal.z;
	vec3 result = shCoefficients[ 0 ] * 0.886227;
	result += shCoefficients[ 1 ] * 2.0 * 0.511664 * y;
	result += shCoefficients[ 2 ] * 2.0 * 0.511664 * z;
	result += shCoefficients[ 3 ] * 2.0 * 0.511664 * x;
	result += shCoefficients[ 4 ] * 2.0 * 0.429043 * x * y;
	result += shCoefficients[ 5 ] * 2.0 * 0.429043 * y * z;
	result += shCoefficients[ 6 ] * ( 0.743125 * z * z - 0.247708 );
	result += shCoefficients[ 7 ] * 2.0 * 0.429043 * x * z;
	result += shCoefficients[ 8 ] * 0.429043 * ( x * x - y * y );
	return result;
}
vec3 getLightProbeIrradiance( const in vec3 lightProbe[ 9 ], const in vec3 normal ) {
	vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
	vec3 irradiance = shGetIrradianceAt( worldNormal, lightProbe );
	return irradiance;
}
vec3 getAmbientLightIrradiance( const in vec3 ambientLightColor ) {
	vec3 irradiance = ambientLightColor;
	return irradiance;
}
float getDistanceAttenuation( const in float lightDistance, const in float cutoffDistance, const in float decayExponent ) {
	float distanceFalloff = 1.0 / max( pow( lightDistance, decayExponent ), 0.01 );
	if ( cutoffDistance > 0.0 ) {
		distanceFalloff *= pow2( saturate( 1.0 - pow4( lightDistance / cutoffDistance ) ) );
	}
	return distanceFalloff;
}
float getSpotAttenuation( const in float coneCosine, const in float penumbraCosine, const in float angleCosine ) {
	return smoothstep( coneCosine, penumbraCosine, angleCosine );
}
#if NUM_DIR_LIGHTS > 0
	struct DirectionalLight {
		vec3 direction;
		vec3 color;
	};
	uniform DirectionalLight directionalLights[ NUM_DIR_LIGHTS ];
	void getDirectionalLightInfo( const in DirectionalLight directionalLight, out IncidentLight light ) {
		light.color = directionalLight.color;
		light.direction = directionalLight.direction;
		light.visible = true;
	}
#endif
#if NUM_POINT_LIGHTS > 0
	struct PointLight {
		vec3 position;
		vec3 color;
		float distance;
		float decay;
	};
	uniform PointLight pointLights[ NUM_POINT_LIGHTS ];
	void getPointLightInfo( const in PointLight pointLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = pointLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float lightDistance = length( lVector );
		light.color = pointLight.color;
		light.color *= getDistanceAttenuation( lightDistance, pointLight.distance, pointLight.decay );
		light.visible = ( light.color != vec3( 0.0 ) );
	}
#endif
#if NUM_SPOT_LIGHTS > 0
	struct SpotLight {
		vec3 position;
		vec3 direction;
		vec3 color;
		float distance;
		float decay;
		float coneCos;
		float penumbraCos;
	};
	uniform SpotLight spotLights[ NUM_SPOT_LIGHTS ];
	void getSpotLightInfo( const in SpotLight spotLight, const in vec3 geometryPosition, out IncidentLight light ) {
		vec3 lVector = spotLight.position - geometryPosition;
		light.direction = normalize( lVector );
		float angleCos = dot( light.direction, spotLight.direction );
		float spotAttenuation = getSpotAttenuation( spotLight.coneCos, spotLight.penumbraCos, angleCos );
		if ( spotAttenuation > 0.0 ) {
			float lightDistance = length( lVector );
			light.color = spotLight.color * spotAttenuation;
			light.color *= getDistanceAttenuation( lightDistance, spotLight.distance, spotLight.decay );
			light.visible = ( light.color != vec3( 0.0 ) );
		} else {
			light.color = vec3( 0.0 );
			light.visible = false;
		}
	}
#endif
#if NUM_RECT_AREA_LIGHTS > 0
	struct RectAreaLight {
		vec3 color;
		vec3 position;
		vec3 halfWidth;
		vec3 halfHeight;
	};
	uniform sampler2D ltc_1;	uniform sampler2D ltc_2;
	uniform RectAreaLight rectAreaLights[ NUM_RECT_AREA_LIGHTS ];
#endif
#if NUM_HEMI_LIGHTS > 0
	struct HemisphereLight {
		vec3 direction;
		vec3 skyColor;
		vec3 groundColor;
	};
	uniform HemisphereLight hemisphereLights[ NUM_HEMI_LIGHTS ];
	vec3 getHemisphereLightIrradiance( const in HemisphereLight hemiLight, const in vec3 normal ) {
		float dotNL = dot( normal, hemiLight.direction );
		float hemiDiffuseWeight = 0.5 * dotNL + 0.5;
		vec3 irradiance = mix( hemiLight.groundColor, hemiLight.skyColor, hemiDiffuseWeight );
		return irradiance;
	}
#endif`,qk=`#ifdef USE_ENVMAP
	vec3 getIBLIrradiance( const in vec3 normal ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 worldNormal = inverseTransformDirection( normal, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * worldNormal, 1.0 );
			return PI * envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	vec3 getIBLRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness ) {
		#ifdef ENVMAP_TYPE_CUBE_UV
			vec3 reflectVec = reflect( - viewDir, normal );
			reflectVec = normalize( mix( reflectVec, normal, roughness * roughness) );
			reflectVec = inverseTransformDirection( reflectVec, viewMatrix );
			vec4 envMapColor = textureCubeUV( envMap, envMapRotation * reflectVec, roughness );
			return envMapColor.rgb * envMapIntensity;
		#else
			return vec3( 0.0 );
		#endif
	}
	#ifdef USE_ANISOTROPY
		vec3 getIBLAnisotropyRadiance( const in vec3 viewDir, const in vec3 normal, const in float roughness, const in vec3 bitangent, const in float anisotropy ) {
			#ifdef ENVMAP_TYPE_CUBE_UV
				vec3 bentNormal = cross( bitangent, viewDir );
				bentNormal = normalize( cross( bentNormal, bitangent ) );
				bentNormal = normalize( mix( bentNormal, normal, pow2( pow2( 1.0 - anisotropy * ( 1.0 - roughness ) ) ) ) );
				return getIBLRadiance( viewDir, bentNormal, roughness );
			#else
				return vec3( 0.0 );
			#endif
		}
	#endif
#endif`,Hk=`ToonMaterial material;
material.diffuseColor = diffuseColor.rgb;`,Wk=`varying vec3 vViewPosition;
struct ToonMaterial {
	vec3 diffuseColor;
};
void RE_Direct_Toon( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	vec3 irradiance = getGradientIrradiance( geometryNormal, directLight.direction ) * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Toon( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in ToonMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_Toon
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Toon`,jk=`BlinnPhongMaterial material;
material.diffuseColor = diffuseColor.rgb;
material.specularColor = specular;
material.specularShininess = shininess;
material.specularStrength = specularStrength;`,$k=`varying vec3 vViewPosition;
struct BlinnPhongMaterial {
	vec3 diffuseColor;
	vec3 specularColor;
	float specularShininess;
	float specularStrength;
};
void RE_Direct_BlinnPhong( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
	reflectedLight.directSpecular += irradiance * BRDF_BlinnPhong( directLight.direction, geometryViewDir, geometryNormal, material.specularColor, material.specularShininess ) * material.specularStrength;
}
void RE_IndirectDiffuse_BlinnPhong( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in BlinnPhongMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
#define RE_Direct				RE_Direct_BlinnPhong
#define RE_IndirectDiffuse		RE_IndirectDiffuse_BlinnPhong`,Xk=`PhysicalMaterial material;
material.diffuseColor = diffuseColor.rgb * ( 1.0 - metalnessFactor );
vec3 dxy = max( abs( dFdx( nonPerturbedNormal ) ), abs( dFdy( nonPerturbedNormal ) ) );
float geometryRoughness = max( max( dxy.x, dxy.y ), dxy.z );
material.roughness = max( roughnessFactor, 0.0525 );material.roughness += geometryRoughness;
material.roughness = min( material.roughness, 1.0 );
#ifdef IOR
	material.ior = ior;
	#ifdef USE_SPECULAR
		float specularIntensityFactor = specularIntensity;
		vec3 specularColorFactor = specularColor;
		#ifdef USE_SPECULAR_COLORMAP
			specularColorFactor *= texture2D( specularColorMap, vSpecularColorMapUv ).rgb;
		#endif
		#ifdef USE_SPECULAR_INTENSITYMAP
			specularIntensityFactor *= texture2D( specularIntensityMap, vSpecularIntensityMapUv ).a;
		#endif
		material.specularF90 = mix( specularIntensityFactor, 1.0, metalnessFactor );
	#else
		float specularIntensityFactor = 1.0;
		vec3 specularColorFactor = vec3( 1.0 );
		material.specularF90 = 1.0;
	#endif
	material.specularColor = mix( min( pow2( ( material.ior - 1.0 ) / ( material.ior + 1.0 ) ) * specularColorFactor, vec3( 1.0 ) ) * specularIntensityFactor, diffuseColor.rgb, metalnessFactor );
#else
	material.specularColor = mix( vec3( 0.04 ), diffuseColor.rgb, metalnessFactor );
	material.specularF90 = 1.0;
#endif
#ifdef USE_CLEARCOAT
	material.clearcoat = clearcoat;
	material.clearcoatRoughness = clearcoatRoughness;
	material.clearcoatF0 = vec3( 0.04 );
	material.clearcoatF90 = 1.0;
	#ifdef USE_CLEARCOATMAP
		material.clearcoat *= texture2D( clearcoatMap, vClearcoatMapUv ).x;
	#endif
	#ifdef USE_CLEARCOAT_ROUGHNESSMAP
		material.clearcoatRoughness *= texture2D( clearcoatRoughnessMap, vClearcoatRoughnessMapUv ).y;
	#endif
	material.clearcoat = saturate( material.clearcoat );	material.clearcoatRoughness = max( material.clearcoatRoughness, 0.0525 );
	material.clearcoatRoughness += geometryRoughness;
	material.clearcoatRoughness = min( material.clearcoatRoughness, 1.0 );
#endif
#ifdef USE_DISPERSION
	material.dispersion = dispersion;
#endif
#ifdef USE_IRIDESCENCE
	material.iridescence = iridescence;
	material.iridescenceIOR = iridescenceIOR;
	#ifdef USE_IRIDESCENCEMAP
		material.iridescence *= texture2D( iridescenceMap, vIridescenceMapUv ).r;
	#endif
	#ifdef USE_IRIDESCENCE_THICKNESSMAP
		material.iridescenceThickness = (iridescenceThicknessMaximum - iridescenceThicknessMinimum) * texture2D( iridescenceThicknessMap, vIridescenceThicknessMapUv ).g + iridescenceThicknessMinimum;
	#else
		material.iridescenceThickness = iridescenceThicknessMaximum;
	#endif
#endif
#ifdef USE_SHEEN
	material.sheenColor = sheenColor;
	#ifdef USE_SHEEN_COLORMAP
		material.sheenColor *= texture2D( sheenColorMap, vSheenColorMapUv ).rgb;
	#endif
	material.sheenRoughness = clamp( sheenRoughness, 0.07, 1.0 );
	#ifdef USE_SHEEN_ROUGHNESSMAP
		material.sheenRoughness *= texture2D( sheenRoughnessMap, vSheenRoughnessMapUv ).a;
	#endif
#endif
#ifdef USE_ANISOTROPY
	#ifdef USE_ANISOTROPYMAP
		mat2 anisotropyMat = mat2( anisotropyVector.x, anisotropyVector.y, - anisotropyVector.y, anisotropyVector.x );
		vec3 anisotropyPolar = texture2D( anisotropyMap, vAnisotropyMapUv ).rgb;
		vec2 anisotropyV = anisotropyMat * normalize( 2.0 * anisotropyPolar.rg - vec2( 1.0 ) ) * anisotropyPolar.b;
	#else
		vec2 anisotropyV = anisotropyVector;
	#endif
	material.anisotropy = length( anisotropyV );
	if( material.anisotropy == 0.0 ) {
		anisotropyV = vec2( 1.0, 0.0 );
	} else {
		anisotropyV /= material.anisotropy;
		material.anisotropy = saturate( material.anisotropy );
	}
	material.alphaT = mix( pow2( material.roughness ), 1.0, pow2( material.anisotropy ) );
	material.anisotropyT = tbn[ 0 ] * anisotropyV.x + tbn[ 1 ] * anisotropyV.y;
	material.anisotropyB = tbn[ 1 ] * anisotropyV.x - tbn[ 0 ] * anisotropyV.y;
#endif`,Qk=`struct PhysicalMaterial {
	vec3 diffuseColor;
	float roughness;
	vec3 specularColor;
	float specularF90;
	float dispersion;
	#ifdef USE_CLEARCOAT
		float clearcoat;
		float clearcoatRoughness;
		vec3 clearcoatF0;
		float clearcoatF90;
	#endif
	#ifdef USE_IRIDESCENCE
		float iridescence;
		float iridescenceIOR;
		float iridescenceThickness;
		vec3 iridescenceFresnel;
		vec3 iridescenceF0;
	#endif
	#ifdef USE_SHEEN
		vec3 sheenColor;
		float sheenRoughness;
	#endif
	#ifdef IOR
		float ior;
	#endif
	#ifdef USE_TRANSMISSION
		float transmission;
		float transmissionAlpha;
		float thickness;
		float attenuationDistance;
		vec3 attenuationColor;
	#endif
	#ifdef USE_ANISOTROPY
		float anisotropy;
		float alphaT;
		vec3 anisotropyT;
		vec3 anisotropyB;
	#endif
};
vec3 clearcoatSpecularDirect = vec3( 0.0 );
vec3 clearcoatSpecularIndirect = vec3( 0.0 );
vec3 sheenSpecularDirect = vec3( 0.0 );
vec3 sheenSpecularIndirect = vec3(0.0 );
vec3 Schlick_to_F0( const in vec3 f, const in float f90, const in float dotVH ) {
    float x = clamp( 1.0 - dotVH, 0.0, 1.0 );
    float x2 = x * x;
    float x5 = clamp( x * x2 * x2, 0.0, 0.9999 );
    return ( f - vec3( f90 ) * x5 ) / ( 1.0 - x5 );
}
float V_GGX_SmithCorrelated( const in float alpha, const in float dotNL, const in float dotNV ) {
	float a2 = pow2( alpha );
	float gv = dotNL * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNV ) );
	float gl = dotNV * sqrt( a2 + ( 1.0 - a2 ) * pow2( dotNL ) );
	return 0.5 / max( gv + gl, EPSILON );
}
float D_GGX( const in float alpha, const in float dotNH ) {
	float a2 = pow2( alpha );
	float denom = pow2( dotNH ) * ( a2 - 1.0 ) + 1.0;
	return RECIPROCAL_PI * a2 / pow2( denom );
}
#ifdef USE_ANISOTROPY
	float V_GGX_SmithCorrelated_Anisotropic( const in float alphaT, const in float alphaB, const in float dotTV, const in float dotBV, const in float dotTL, const in float dotBL, const in float dotNV, const in float dotNL ) {
		float gv = dotNL * length( vec3( alphaT * dotTV, alphaB * dotBV, dotNV ) );
		float gl = dotNV * length( vec3( alphaT * dotTL, alphaB * dotBL, dotNL ) );
		float v = 0.5 / ( gv + gl );
		return saturate(v);
	}
	float D_GGX_Anisotropic( const in float alphaT, const in float alphaB, const in float dotNH, const in float dotTH, const in float dotBH ) {
		float a2 = alphaT * alphaB;
		highp vec3 v = vec3( alphaB * dotTH, alphaT * dotBH, a2 * dotNH );
		highp float v2 = dot( v, v );
		float w2 = a2 / v2;
		return RECIPROCAL_PI * a2 * pow2 ( w2 );
	}
#endif
#ifdef USE_CLEARCOAT
	vec3 BRDF_GGX_Clearcoat( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material) {
		vec3 f0 = material.clearcoatF0;
		float f90 = material.clearcoatF90;
		float roughness = material.clearcoatRoughness;
		float alpha = pow2( roughness );
		vec3 halfDir = normalize( lightDir + viewDir );
		float dotNL = saturate( dot( normal, lightDir ) );
		float dotNV = saturate( dot( normal, viewDir ) );
		float dotNH = saturate( dot( normal, halfDir ) );
		float dotVH = saturate( dot( viewDir, halfDir ) );
		vec3 F = F_Schlick( f0, f90, dotVH );
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
		return F * ( V * D );
	}
#endif
vec3 BRDF_GGX( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, const in PhysicalMaterial material ) {
	vec3 f0 = material.specularColor;
	float f90 = material.specularF90;
	float roughness = material.roughness;
	float alpha = pow2( roughness );
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float dotVH = saturate( dot( viewDir, halfDir ) );
	vec3 F = F_Schlick( f0, f90, dotVH );
	#ifdef USE_IRIDESCENCE
		F = mix( F, material.iridescenceFresnel, material.iridescence );
	#endif
	#ifdef USE_ANISOTROPY
		float dotTL = dot( material.anisotropyT, lightDir );
		float dotTV = dot( material.anisotropyT, viewDir );
		float dotTH = dot( material.anisotropyT, halfDir );
		float dotBL = dot( material.anisotropyB, lightDir );
		float dotBV = dot( material.anisotropyB, viewDir );
		float dotBH = dot( material.anisotropyB, halfDir );
		float V = V_GGX_SmithCorrelated_Anisotropic( material.alphaT, alpha, dotTV, dotBV, dotTL, dotBL, dotNV, dotNL );
		float D = D_GGX_Anisotropic( material.alphaT, alpha, dotNH, dotTH, dotBH );
	#else
		float V = V_GGX_SmithCorrelated( alpha, dotNL, dotNV );
		float D = D_GGX( alpha, dotNH );
	#endif
	return F * ( V * D );
}
vec2 LTC_Uv( const in vec3 N, const in vec3 V, const in float roughness ) {
	const float LUT_SIZE = 64.0;
	const float LUT_SCALE = ( LUT_SIZE - 1.0 ) / LUT_SIZE;
	const float LUT_BIAS = 0.5 / LUT_SIZE;
	float dotNV = saturate( dot( N, V ) );
	vec2 uv = vec2( roughness, sqrt( 1.0 - dotNV ) );
	uv = uv * LUT_SCALE + LUT_BIAS;
	return uv;
}
float LTC_ClippedSphereFormFactor( const in vec3 f ) {
	float l = length( f );
	return max( ( l * l + f.z ) / ( l + 1.0 ), 0.0 );
}
vec3 LTC_EdgeVectorFormFactor( const in vec3 v1, const in vec3 v2 ) {
	float x = dot( v1, v2 );
	float y = abs( x );
	float a = 0.8543985 + ( 0.4965155 + 0.0145206 * y ) * y;
	float b = 3.4175940 + ( 4.1616724 + y ) * y;
	float v = a / b;
	float theta_sintheta = ( x > 0.0 ) ? v : 0.5 * inversesqrt( max( 1.0 - x * x, 1e-7 ) ) - v;
	return cross( v1, v2 ) * theta_sintheta;
}
vec3 LTC_Evaluate( const in vec3 N, const in vec3 V, const in vec3 P, const in mat3 mInv, const in vec3 rectCoords[ 4 ] ) {
	vec3 v1 = rectCoords[ 1 ] - rectCoords[ 0 ];
	vec3 v2 = rectCoords[ 3 ] - rectCoords[ 0 ];
	vec3 lightNormal = cross( v1, v2 );
	if( dot( lightNormal, P - rectCoords[ 0 ] ) < 0.0 ) return vec3( 0.0 );
	vec3 T1, T2;
	T1 = normalize( V - N * dot( V, N ) );
	T2 = - cross( N, T1 );
	mat3 mat = mInv * transposeMat3( mat3( T1, T2, N ) );
	vec3 coords[ 4 ];
	coords[ 0 ] = mat * ( rectCoords[ 0 ] - P );
	coords[ 1 ] = mat * ( rectCoords[ 1 ] - P );
	coords[ 2 ] = mat * ( rectCoords[ 2 ] - P );
	coords[ 3 ] = mat * ( rectCoords[ 3 ] - P );
	coords[ 0 ] = normalize( coords[ 0 ] );
	coords[ 1 ] = normalize( coords[ 1 ] );
	coords[ 2 ] = normalize( coords[ 2 ] );
	coords[ 3 ] = normalize( coords[ 3 ] );
	vec3 vectorFormFactor = vec3( 0.0 );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 0 ], coords[ 1 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 1 ], coords[ 2 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 2 ], coords[ 3 ] );
	vectorFormFactor += LTC_EdgeVectorFormFactor( coords[ 3 ], coords[ 0 ] );
	float result = LTC_ClippedSphereFormFactor( vectorFormFactor );
	return vec3( result );
}
#if defined( USE_SHEEN )
float D_Charlie( float roughness, float dotNH ) {
	float alpha = pow2( roughness );
	float invAlpha = 1.0 / alpha;
	float cos2h = dotNH * dotNH;
	float sin2h = max( 1.0 - cos2h, 0.0078125 );
	return ( 2.0 + invAlpha ) * pow( sin2h, invAlpha * 0.5 ) / ( 2.0 * PI );
}
float V_Neubelt( float dotNV, float dotNL ) {
	return saturate( 1.0 / ( 4.0 * ( dotNL + dotNV - dotNL * dotNV ) ) );
}
vec3 BRDF_Sheen( const in vec3 lightDir, const in vec3 viewDir, const in vec3 normal, vec3 sheenColor, const in float sheenRoughness ) {
	vec3 halfDir = normalize( lightDir + viewDir );
	float dotNL = saturate( dot( normal, lightDir ) );
	float dotNV = saturate( dot( normal, viewDir ) );
	float dotNH = saturate( dot( normal, halfDir ) );
	float D = D_Charlie( sheenRoughness, dotNH );
	float V = V_Neubelt( dotNV, dotNL );
	return sheenColor * ( D * V );
}
#endif
float IBLSheenBRDF( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	float r2 = roughness * roughness;
	float a = roughness < 0.25 ? -339.2 * r2 + 161.4 * roughness - 25.9 : -8.48 * r2 + 14.3 * roughness - 9.95;
	float b = roughness < 0.25 ? 44.0 * r2 - 23.7 * roughness + 3.26 : 1.97 * r2 - 3.27 * roughness + 0.72;
	float DG = exp( a * dotNV + b ) + ( roughness < 0.25 ? 0.0 : 0.1 * ( roughness - 0.25 ) );
	return saturate( DG * RECIPROCAL_PI );
}
vec2 DFGApprox( const in vec3 normal, const in vec3 viewDir, const in float roughness ) {
	float dotNV = saturate( dot( normal, viewDir ) );
	const vec4 c0 = vec4( - 1, - 0.0275, - 0.572, 0.022 );
	const vec4 c1 = vec4( 1, 0.0425, 1.04, - 0.04 );
	vec4 r = roughness * c0 + c1;
	float a004 = min( r.x * r.x, exp2( - 9.28 * dotNV ) ) * r.x + r.y;
	vec2 fab = vec2( - 1.04, 1.04 ) * a004 + r.zw;
	return fab;
}
vec3 EnvironmentBRDF( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness ) {
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	return specularColor * fab.x + specularF90 * fab.y;
}
#ifdef USE_IRIDESCENCE
void computeMultiscatteringIridescence( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float iridescence, const in vec3 iridescenceF0, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#else
void computeMultiscattering( const in vec3 normal, const in vec3 viewDir, const in vec3 specularColor, const in float specularF90, const in float roughness, inout vec3 singleScatter, inout vec3 multiScatter ) {
#endif
	vec2 fab = DFGApprox( normal, viewDir, roughness );
	#ifdef USE_IRIDESCENCE
		vec3 Fr = mix( specularColor, iridescenceF0, iridescence );
	#else
		vec3 Fr = specularColor;
	#endif
	vec3 FssEss = Fr * fab.x + specularF90 * fab.y;
	float Ess = fab.x + fab.y;
	float Ems = 1.0 - Ess;
	vec3 Favg = Fr + ( 1.0 - Fr ) * 0.047619;	vec3 Fms = FssEss * Favg / ( 1.0 - Ems * Favg );
	singleScatter += FssEss;
	multiScatter += Fms * Ems;
}
#if NUM_RECT_AREA_LIGHTS > 0
	void RE_Direct_RectArea_Physical( const in RectAreaLight rectAreaLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
		vec3 normal = geometryNormal;
		vec3 viewDir = geometryViewDir;
		vec3 position = geometryPosition;
		vec3 lightPos = rectAreaLight.position;
		vec3 halfWidth = rectAreaLight.halfWidth;
		vec3 halfHeight = rectAreaLight.halfHeight;
		vec3 lightColor = rectAreaLight.color;
		float roughness = material.roughness;
		vec3 rectCoords[ 4 ];
		rectCoords[ 0 ] = lightPos + halfWidth - halfHeight;		rectCoords[ 1 ] = lightPos - halfWidth - halfHeight;
		rectCoords[ 2 ] = lightPos - halfWidth + halfHeight;
		rectCoords[ 3 ] = lightPos + halfWidth + halfHeight;
		vec2 uv = LTC_Uv( normal, viewDir, roughness );
		vec4 t1 = texture2D( ltc_1, uv );
		vec4 t2 = texture2D( ltc_2, uv );
		mat3 mInv = mat3(
			vec3( t1.x, 0, t1.y ),
			vec3(    0, 1,    0 ),
			vec3( t1.z, 0, t1.w )
		);
		vec3 fresnel = ( material.specularColor * t2.x + ( vec3( 1.0 ) - material.specularColor ) * t2.y );
		reflectedLight.directSpecular += lightColor * fresnel * LTC_Evaluate( normal, viewDir, position, mInv, rectCoords );
		reflectedLight.directDiffuse += lightColor * material.diffuseColor * LTC_Evaluate( normal, viewDir, position, mat3( 1.0 ), rectCoords );
	}
#endif
void RE_Direct_Physical( const in IncidentLight directLight, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	float dotNL = saturate( dot( geometryNormal, directLight.direction ) );
	vec3 irradiance = dotNL * directLight.color;
	#ifdef USE_CLEARCOAT
		float dotNLcc = saturate( dot( geometryClearcoatNormal, directLight.direction ) );
		vec3 ccIrradiance = dotNLcc * directLight.color;
		clearcoatSpecularDirect += ccIrradiance * BRDF_GGX_Clearcoat( directLight.direction, geometryViewDir, geometryClearcoatNormal, material );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularDirect += irradiance * BRDF_Sheen( directLight.direction, geometryViewDir, geometryNormal, material.sheenColor, material.sheenRoughness );
	#endif
	reflectedLight.directSpecular += irradiance * BRDF_GGX( directLight.direction, geometryViewDir, geometryNormal, material );
	reflectedLight.directDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectDiffuse_Physical( const in vec3 irradiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight ) {
	reflectedLight.indirectDiffuse += irradiance * BRDF_Lambert( material.diffuseColor );
}
void RE_IndirectSpecular_Physical( const in vec3 radiance, const in vec3 irradiance, const in vec3 clearcoatRadiance, const in vec3 geometryPosition, const in vec3 geometryNormal, const in vec3 geometryViewDir, const in vec3 geometryClearcoatNormal, const in PhysicalMaterial material, inout ReflectedLight reflectedLight) {
	#ifdef USE_CLEARCOAT
		clearcoatSpecularIndirect += clearcoatRadiance * EnvironmentBRDF( geometryClearcoatNormal, geometryViewDir, material.clearcoatF0, material.clearcoatF90, material.clearcoatRoughness );
	#endif
	#ifdef USE_SHEEN
		sheenSpecularIndirect += irradiance * material.sheenColor * IBLSheenBRDF( geometryNormal, geometryViewDir, material.sheenRoughness );
	#endif
	vec3 singleScattering = vec3( 0.0 );
	vec3 multiScattering = vec3( 0.0 );
	vec3 cosineWeightedIrradiance = irradiance * RECIPROCAL_PI;
	#ifdef USE_IRIDESCENCE
		computeMultiscatteringIridescence( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.iridescence, material.iridescenceFresnel, material.roughness, singleScattering, multiScattering );
	#else
		computeMultiscattering( geometryNormal, geometryViewDir, material.specularColor, material.specularF90, material.roughness, singleScattering, multiScattering );
	#endif
	vec3 totalScattering = singleScattering + multiScattering;
	vec3 diffuse = material.diffuseColor * ( 1.0 - max( max( totalScattering.r, totalScattering.g ), totalScattering.b ) );
	reflectedLight.indirectSpecular += radiance * singleScattering;
	reflectedLight.indirectSpecular += multiScattering * cosineWeightedIrradiance;
	reflectedLight.indirectDiffuse += diffuse * cosineWeightedIrradiance;
}
#define RE_Direct				RE_Direct_Physical
#define RE_Direct_RectArea		RE_Direct_RectArea_Physical
#define RE_IndirectDiffuse		RE_IndirectDiffuse_Physical
#define RE_IndirectSpecular		RE_IndirectSpecular_Physical
float computeSpecularOcclusion( const in float dotNV, const in float ambientOcclusion, const in float roughness ) {
	return saturate( pow( dotNV + ambientOcclusion, exp2( - 16.0 * roughness - 1.0 ) ) - 1.0 + ambientOcclusion );
}`,Yk=`
vec3 geometryPosition = - vViewPosition;
vec3 geometryNormal = normal;
vec3 geometryViewDir = ( isOrthographic ) ? vec3( 0, 0, 1 ) : normalize( vViewPosition );
vec3 geometryClearcoatNormal = vec3( 0.0 );
#ifdef USE_CLEARCOAT
	geometryClearcoatNormal = clearcoatNormal;
#endif
#ifdef USE_IRIDESCENCE
	float dotNVi = saturate( dot( normal, geometryViewDir ) );
	if ( material.iridescenceThickness == 0.0 ) {
		material.iridescence = 0.0;
	} else {
		material.iridescence = saturate( material.iridescence );
	}
	if ( material.iridescence > 0.0 ) {
		material.iridescenceFresnel = evalIridescence( 1.0, material.iridescenceIOR, dotNVi, material.iridescenceThickness, material.specularColor );
		material.iridescenceF0 = Schlick_to_F0( material.iridescenceFresnel, 1.0, dotNVi );
	}
#endif
IncidentLight directLight;
#if ( NUM_POINT_LIGHTS > 0 ) && defined( RE_Direct )
	PointLight pointLight;
	#if defined( USE_SHADOWMAP ) && NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHTS; i ++ ) {
		pointLight = pointLights[ i ];
		getPointLightInfo( pointLight, geometryPosition, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_POINT_LIGHT_SHADOWS )
		pointLightShadow = pointLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getPointShadow( pointShadowMap[ i ], pointLightShadow.shadowMapSize, pointLightShadow.shadowIntensity, pointLightShadow.shadowBias, pointLightShadow.shadowRadius, vPointShadowCoord[ i ], pointLightShadow.shadowCameraNear, pointLightShadow.shadowCameraFar ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_SPOT_LIGHTS > 0 ) && defined( RE_Direct )
	SpotLight spotLight;
	vec4 spotColor;
	vec3 spotLightCoord;
	bool inSpotLightMap;
	#if defined( USE_SHADOWMAP ) && NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHTS; i ++ ) {
		spotLight = spotLights[ i ];
		getSpotLightInfo( spotLight, geometryPosition, directLight );
		#if ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#define SPOT_LIGHT_MAP_INDEX UNROLLED_LOOP_INDEX
		#elif ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		#define SPOT_LIGHT_MAP_INDEX NUM_SPOT_LIGHT_MAPS
		#else
		#define SPOT_LIGHT_MAP_INDEX ( UNROLLED_LOOP_INDEX - NUM_SPOT_LIGHT_SHADOWS + NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS )
		#endif
		#if ( SPOT_LIGHT_MAP_INDEX < NUM_SPOT_LIGHT_MAPS )
			spotLightCoord = vSpotLightCoord[ i ].xyz / vSpotLightCoord[ i ].w;
			inSpotLightMap = all( lessThan( abs( spotLightCoord * 2. - 1. ), vec3( 1.0 ) ) );
			spotColor = texture2D( spotLightMap[ SPOT_LIGHT_MAP_INDEX ], spotLightCoord.xy );
			directLight.color = inSpotLightMap ? directLight.color * spotColor.rgb : directLight.color;
		#endif
		#undef SPOT_LIGHT_MAP_INDEX
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
		spotLightShadow = spotLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( spotShadowMap[ i ], spotLightShadow.shadowMapSize, spotLightShadow.shadowIntensity, spotLightShadow.shadowBias, spotLightShadow.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_DIR_LIGHTS > 0 ) && defined( RE_Direct )
	DirectionalLight directionalLight;
	#if defined( USE_SHADOWMAP ) && NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLightShadow;
	#endif
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHTS; i ++ ) {
		directionalLight = directionalLights[ i ];
		getDirectionalLightInfo( directionalLight, directLight );
		#if defined( USE_SHADOWMAP ) && ( UNROLLED_LOOP_INDEX < NUM_DIR_LIGHT_SHADOWS )
		directionalLightShadow = directionalLightShadows[ i ];
		directLight.color *= ( directLight.visible && receiveShadow ) ? getShadow( directionalShadowMap[ i ], directionalLightShadow.shadowMapSize, directionalLightShadow.shadowIntensity, directionalLightShadow.shadowBias, directionalLightShadow.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
		#endif
		RE_Direct( directLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if ( NUM_RECT_AREA_LIGHTS > 0 ) && defined( RE_Direct_RectArea )
	RectAreaLight rectAreaLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_RECT_AREA_LIGHTS; i ++ ) {
		rectAreaLight = rectAreaLights[ i ];
		RE_Direct_RectArea( rectAreaLight, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
	}
	#pragma unroll_loop_end
#endif
#if defined( RE_IndirectDiffuse )
	vec3 iblIrradiance = vec3( 0.0 );
	vec3 irradiance = getAmbientLightIrradiance( ambientLightColor );
	#if defined( USE_LIGHT_PROBES )
		irradiance += getLightProbeIrradiance( lightProbe, geometryNormal );
	#endif
	#if ( NUM_HEMI_LIGHTS > 0 )
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_HEMI_LIGHTS; i ++ ) {
			irradiance += getHemisphereLightIrradiance( hemisphereLights[ i ], geometryNormal );
		}
		#pragma unroll_loop_end
	#endif
#endif
#if defined( RE_IndirectSpecular )
	vec3 radiance = vec3( 0.0 );
	vec3 clearcoatRadiance = vec3( 0.0 );
#endif`,Kk=`#if defined( RE_IndirectDiffuse )
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		vec3 lightMapIrradiance = lightMapTexel.rgb * lightMapIntensity;
		irradiance += lightMapIrradiance;
	#endif
	#if defined( USE_ENVMAP ) && defined( STANDARD ) && defined( ENVMAP_TYPE_CUBE_UV )
		iblIrradiance += getIBLIrradiance( geometryNormal );
	#endif
#endif
#if defined( USE_ENVMAP ) && defined( RE_IndirectSpecular )
	#ifdef USE_ANISOTROPY
		radiance += getIBLAnisotropyRadiance( geometryViewDir, geometryNormal, material.roughness, material.anisotropyB, material.anisotropy );
	#else
		radiance += getIBLRadiance( geometryViewDir, geometryNormal, material.roughness );
	#endif
	#ifdef USE_CLEARCOAT
		clearcoatRadiance += getIBLRadiance( geometryViewDir, geometryClearcoatNormal, material.clearcoatRoughness );
	#endif
#endif`,Zk=`#if defined( RE_IndirectDiffuse )
	RE_IndirectDiffuse( irradiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif
#if defined( RE_IndirectSpecular )
	RE_IndirectSpecular( radiance, iblIrradiance, clearcoatRadiance, geometryPosition, geometryNormal, geometryViewDir, geometryClearcoatNormal, material, reflectedLight );
#endif`,Jk=`#if defined( USE_LOGDEPTHBUF )
	gl_FragDepth = vIsPerspective == 0.0 ? gl_FragCoord.z : log2( vFragDepth ) * logDepthBufFC * 0.5;
#endif`,eV=`#if defined( USE_LOGDEPTHBUF )
	uniform float logDepthBufFC;
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,tV=`#ifdef USE_LOGDEPTHBUF
	varying float vFragDepth;
	varying float vIsPerspective;
#endif`,nV=`#ifdef USE_LOGDEPTHBUF
	vFragDepth = 1.0 + gl_Position.w;
	vIsPerspective = float( isPerspectiveMatrix( projectionMatrix ) );
#endif`,iV=`#ifdef USE_MAP
	vec4 sampledDiffuseColor = texture2D( map, vMapUv );
	#ifdef DECODE_VIDEO_TEXTURE
		sampledDiffuseColor = sRGBTransferEOTF( sampledDiffuseColor );
	#endif
	diffuseColor *= sampledDiffuseColor;
#endif`,rV=`#ifdef USE_MAP
	uniform sampler2D map;
#endif`,sV=`#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
	#if defined( USE_POINTS_UV )
		vec2 uv = vUv;
	#else
		vec2 uv = ( uvTransform * vec3( gl_PointCoord.x, 1.0 - gl_PointCoord.y, 1 ) ).xy;
	#endif
#endif
#ifdef USE_MAP
	diffuseColor *= texture2D( map, uv );
#endif
#ifdef USE_ALPHAMAP
	diffuseColor.a *= texture2D( alphaMap, uv ).g;
#endif`,oV=`#if defined( USE_POINTS_UV )
	varying vec2 vUv;
#else
	#if defined( USE_MAP ) || defined( USE_ALPHAMAP )
		uniform mat3 uvTransform;
	#endif
#endif
#ifdef USE_MAP
	uniform sampler2D map;
#endif
#ifdef USE_ALPHAMAP
	uniform sampler2D alphaMap;
#endif`,aV=`float metalnessFactor = metalness;
#ifdef USE_METALNESSMAP
	vec4 texelMetalness = texture2D( metalnessMap, vMetalnessMapUv );
	metalnessFactor *= texelMetalness.b;
#endif`,lV=`#ifdef USE_METALNESSMAP
	uniform sampler2D metalnessMap;
#endif`,uV=`#ifdef USE_INSTANCING_MORPH
	float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	float morphTargetBaseInfluence = texelFetch( morphTexture, ivec2( 0, gl_InstanceID ), 0 ).r;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		morphTargetInfluences[i] =  texelFetch( morphTexture, ivec2( i + 1, gl_InstanceID ), 0 ).r;
	}
#endif`,cV=`#if defined( USE_MORPHCOLORS )
	vColor *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		#if defined( USE_COLOR_ALPHA )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ) * morphTargetInfluences[ i ];
		#elif defined( USE_COLOR )
			if ( morphTargetInfluences[ i ] != 0.0 ) vColor += getMorph( gl_VertexID, i, 2 ).rgb * morphTargetInfluences[ i ];
		#endif
	}
#endif`,hV=`#ifdef USE_MORPHNORMALS
	objectNormal *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) objectNormal += getMorph( gl_VertexID, i, 1 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,fV=`#ifdef USE_MORPHTARGETS
	#ifndef USE_INSTANCING_MORPH
		uniform float morphTargetBaseInfluence;
		uniform float morphTargetInfluences[ MORPHTARGETS_COUNT ];
	#endif
	uniform sampler2DArray morphTargetsTexture;
	uniform ivec2 morphTargetsTextureSize;
	vec4 getMorph( const in int vertexIndex, const in int morphTargetIndex, const in int offset ) {
		int texelIndex = vertexIndex * MORPHTARGETS_TEXTURE_STRIDE + offset;
		int y = texelIndex / morphTargetsTextureSize.x;
		int x = texelIndex - y * morphTargetsTextureSize.x;
		ivec3 morphUV = ivec3( x, y, morphTargetIndex );
		return texelFetch( morphTargetsTexture, morphUV, 0 );
	}
#endif`,dV=`#ifdef USE_MORPHTARGETS
	transformed *= morphTargetBaseInfluence;
	for ( int i = 0; i < MORPHTARGETS_COUNT; i ++ ) {
		if ( morphTargetInfluences[ i ] != 0.0 ) transformed += getMorph( gl_VertexID, i, 0 ).xyz * morphTargetInfluences[ i ];
	}
#endif`,AV=`float faceDirection = gl_FrontFacing ? 1.0 : - 1.0;
#ifdef FLAT_SHADED
	vec3 fdx = dFdx( vViewPosition );
	vec3 fdy = dFdy( vViewPosition );
	vec3 normal = normalize( cross( fdx, fdy ) );
#else
	vec3 normal = normalize( vNormal );
	#ifdef DOUBLE_SIDED
		normal *= faceDirection;
	#endif
#endif
#if defined( USE_NORMALMAP_TANGENTSPACE ) || defined( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY )
	#ifdef USE_TANGENT
		mat3 tbn = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn = getTangentFrame( - vViewPosition, normal,
		#if defined( USE_NORMALMAP )
			vNormalMapUv
		#elif defined( USE_CLEARCOAT_NORMALMAP )
			vClearcoatNormalMapUv
		#else
			vUv
		#endif
		);
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn[0] *= faceDirection;
		tbn[1] *= faceDirection;
	#endif
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	#ifdef USE_TANGENT
		mat3 tbn2 = mat3( normalize( vTangent ), normalize( vBitangent ), normal );
	#else
		mat3 tbn2 = getTangentFrame( - vViewPosition, normal, vClearcoatNormalMapUv );
	#endif
	#if defined( DOUBLE_SIDED ) && ! defined( FLAT_SHADED )
		tbn2[0] *= faceDirection;
		tbn2[1] *= faceDirection;
	#endif
#endif
vec3 nonPerturbedNormal = normal;`,pV=`#ifdef USE_NORMALMAP_OBJECTSPACE
	normal = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	#ifdef FLIP_SIDED
		normal = - normal;
	#endif
	#ifdef DOUBLE_SIDED
		normal = normal * faceDirection;
	#endif
	normal = normalize( normalMatrix * normal );
#elif defined( USE_NORMALMAP_TANGENTSPACE )
	vec3 mapN = texture2D( normalMap, vNormalMapUv ).xyz * 2.0 - 1.0;
	mapN.xy *= normalScale;
	normal = normalize( tbn * mapN );
#elif defined( USE_BUMPMAP )
	normal = perturbNormalArb( - vViewPosition, normal, dHdxy_fwd(), faceDirection );
#endif`,mV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,gV=`#ifndef FLAT_SHADED
	varying vec3 vNormal;
	#ifdef USE_TANGENT
		varying vec3 vTangent;
		varying vec3 vBitangent;
	#endif
#endif`,yV=`#ifndef FLAT_SHADED
	vNormal = normalize( transformedNormal );
	#ifdef USE_TANGENT
		vTangent = normalize( transformedTangent );
		vBitangent = normalize( cross( vNormal, vTangent ) * tangent.w );
	#endif
#endif`,vV=`#ifdef USE_NORMALMAP
	uniform sampler2D normalMap;
	uniform vec2 normalScale;
#endif
#ifdef USE_NORMALMAP_OBJECTSPACE
	uniform mat3 normalMatrix;
#endif
#if ! defined ( USE_TANGENT ) && ( defined ( USE_NORMALMAP_TANGENTSPACE ) || defined ( USE_CLEARCOAT_NORMALMAP ) || defined( USE_ANISOTROPY ) )
	mat3 getTangentFrame( vec3 eye_pos, vec3 surf_norm, vec2 uv ) {
		vec3 q0 = dFdx( eye_pos.xyz );
		vec3 q1 = dFdy( eye_pos.xyz );
		vec2 st0 = dFdx( uv.st );
		vec2 st1 = dFdy( uv.st );
		vec3 N = surf_norm;
		vec3 q1perp = cross( q1, N );
		vec3 q0perp = cross( N, q0 );
		vec3 T = q1perp * st0.x + q0perp * st1.x;
		vec3 B = q1perp * st0.y + q0perp * st1.y;
		float det = max( dot( T, T ), dot( B, B ) );
		float scale = ( det == 0.0 ) ? 0.0 : inversesqrt( det );
		return mat3( T * scale, B * scale, N );
	}
#endif`,_V=`#ifdef USE_CLEARCOAT
	vec3 clearcoatNormal = nonPerturbedNormal;
#endif`,xV=`#ifdef USE_CLEARCOAT_NORMALMAP
	vec3 clearcoatMapN = texture2D( clearcoatNormalMap, vClearcoatNormalMapUv ).xyz * 2.0 - 1.0;
	clearcoatMapN.xy *= clearcoatNormalScale;
	clearcoatNormal = normalize( tbn2 * clearcoatMapN );
#endif`,bV=`#ifdef USE_CLEARCOATMAP
	uniform sampler2D clearcoatMap;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform sampler2D clearcoatNormalMap;
	uniform vec2 clearcoatNormalScale;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform sampler2D clearcoatRoughnessMap;
#endif`,SV=`#ifdef USE_IRIDESCENCEMAP
	uniform sampler2D iridescenceMap;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform sampler2D iridescenceThicknessMap;
#endif`,TV=`#ifdef OPAQUE
diffuseColor.a = 1.0;
#endif
#ifdef USE_TRANSMISSION
diffuseColor.a *= material.transmissionAlpha;
#endif
gl_FragColor = vec4( outgoingLight, diffuseColor.a );`,wV=`vec3 packNormalToRGB( const in vec3 normal ) {
	return normalize( normal ) * 0.5 + 0.5;
}
vec3 unpackRGBToNormal( const in vec3 rgb ) {
	return 2.0 * rgb.xyz - 1.0;
}
const float PackUpscale = 256. / 255.;const float UnpackDownscale = 255. / 256.;const float ShiftRight8 = 1. / 256.;
const float Inv255 = 1. / 255.;
const vec4 PackFactors = vec4( 1.0, 256.0, 256.0 * 256.0, 256.0 * 256.0 * 256.0 );
const vec2 UnpackFactors2 = vec2( UnpackDownscale, 1.0 / PackFactors.g );
const vec3 UnpackFactors3 = vec3( UnpackDownscale / PackFactors.rg, 1.0 / PackFactors.b );
const vec4 UnpackFactors4 = vec4( UnpackDownscale / PackFactors.rgb, 1.0 / PackFactors.a );
vec4 packDepthToRGBA( const in float v ) {
	if( v <= 0.0 )
		return vec4( 0., 0., 0., 0. );
	if( v >= 1.0 )
		return vec4( 1., 1., 1., 1. );
	float vuf;
	float af = modf( v * PackFactors.a, vuf );
	float bf = modf( vuf * ShiftRight8, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec4( vuf * Inv255, gf * PackUpscale, bf * PackUpscale, af );
}
vec3 packDepthToRGB( const in float v ) {
	if( v <= 0.0 )
		return vec3( 0., 0., 0. );
	if( v >= 1.0 )
		return vec3( 1., 1., 1. );
	float vuf;
	float bf = modf( v * PackFactors.b, vuf );
	float gf = modf( vuf * ShiftRight8, vuf );
	return vec3( vuf * Inv255, gf * PackUpscale, bf );
}
vec2 packDepthToRG( const in float v ) {
	if( v <= 0.0 )
		return vec2( 0., 0. );
	if( v >= 1.0 )
		return vec2( 1., 1. );
	float vuf;
	float gf = modf( v * 256., vuf );
	return vec2( vuf * Inv255, gf );
}
float unpackRGBAToDepth( const in vec4 v ) {
	return dot( v, UnpackFactors4 );
}
float unpackRGBToDepth( const in vec3 v ) {
	return dot( v, UnpackFactors3 );
}
float unpackRGToDepth( const in vec2 v ) {
	return v.r * UnpackFactors2.r + v.g * UnpackFactors2.g;
}
vec4 pack2HalfToRGBA( const in vec2 v ) {
	vec4 r = vec4( v.x, fract( v.x * 255.0 ), v.y, fract( v.y * 255.0 ) );
	return vec4( r.x - r.y / 255.0, r.y, r.z - r.w / 255.0, r.w );
}
vec2 unpackRGBATo2Half( const in vec4 v ) {
	return vec2( v.x + ( v.y / 255.0 ), v.z + ( v.w / 255.0 ) );
}
float viewZToOrthographicDepth( const in float viewZ, const in float near, const in float far ) {
	return ( viewZ + near ) / ( near - far );
}
float orthographicDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return depth * ( near - far ) - near;
}
float viewZToPerspectiveDepth( const in float viewZ, const in float near, const in float far ) {
	return ( ( near + viewZ ) * far ) / ( ( far - near ) * viewZ );
}
float perspectiveDepthToViewZ( const in float depth, const in float near, const in float far ) {
	return ( near * far ) / ( ( far - near ) * depth - far );
}`,MV=`#ifdef PREMULTIPLIED_ALPHA
	gl_FragColor.rgb *= gl_FragColor.a;
#endif`,EV=`vec4 mvPosition = vec4( transformed, 1.0 );
#ifdef USE_BATCHING
	mvPosition = batchingMatrix * mvPosition;
#endif
#ifdef USE_INSTANCING
	mvPosition = instanceMatrix * mvPosition;
#endif
mvPosition = modelViewMatrix * mvPosition;
gl_Position = projectionMatrix * mvPosition;`,RV=`#ifdef DITHERING
	gl_FragColor.rgb = dithering( gl_FragColor.rgb );
#endif`,CV=`#ifdef DITHERING
	vec3 dithering( vec3 color ) {
		float grid_position = rand( gl_FragCoord.xy );
		vec3 dither_shift_RGB = vec3( 0.25 / 255.0, -0.25 / 255.0, 0.25 / 255.0 );
		dither_shift_RGB = mix( 2.0 * dither_shift_RGB, -2.0 * dither_shift_RGB, grid_position );
		return color + dither_shift_RGB;
	}
#endif`,PV=`float roughnessFactor = roughness;
#ifdef USE_ROUGHNESSMAP
	vec4 texelRoughness = texture2D( roughnessMap, vRoughnessMapUv );
	roughnessFactor *= texelRoughness.g;
#endif`,NV=`#ifdef USE_ROUGHNESSMAP
	uniform sampler2D roughnessMap;
#endif`,IV=`#if NUM_SPOT_LIGHT_COORDS > 0
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#if NUM_SPOT_LIGHT_MAPS > 0
	uniform sampler2D spotLightMap[ NUM_SPOT_LIGHT_MAPS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform sampler2D directionalShadowMap[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		uniform sampler2D spotShadowMap[ NUM_SPOT_LIGHT_SHADOWS ];
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform sampler2D pointShadowMap[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
	float texture2DCompare( sampler2D depths, vec2 uv, float compare ) {
		float depth = unpackRGBAToDepth( texture2D( depths, uv ) );
		#ifdef USE_REVERSEDEPTHBUF
			return step( depth, compare );
		#else
			return step( compare, depth );
		#endif
	}
	vec2 texture2DDistribution( sampler2D shadow, vec2 uv ) {
		return unpackRGBATo2Half( texture2D( shadow, uv ) );
	}
	float VSMShadow (sampler2D shadow, vec2 uv, float compare ){
		float occlusion = 1.0;
		vec2 distribution = texture2DDistribution( shadow, uv );
		#ifdef USE_REVERSEDEPTHBUF
			float hard_shadow = step( distribution.x, compare );
		#else
			float hard_shadow = step( compare , distribution.x );
		#endif
		if (hard_shadow != 1.0 ) {
			float distance = compare - distribution.x ;
			float variance = max( 0.00000, distribution.y * distribution.y );
			float softness_probability = variance / (variance + distance * distance );			softness_probability = clamp( ( softness_probability - 0.3 ) / ( 0.95 - 0.3 ), 0.0, 1.0 );			occlusion = clamp( max( hard_shadow, softness_probability ), 0.0, 1.0 );
		}
		return occlusion;
	}
	float getShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord ) {
		float shadow = 1.0;
		shadowCoord.xyz /= shadowCoord.w;
		shadowCoord.z += shadowBias;
		bool inFrustum = shadowCoord.x >= 0.0 && shadowCoord.x <= 1.0 && shadowCoord.y >= 0.0 && shadowCoord.y <= 1.0;
		bool frustumTest = inFrustum && shadowCoord.z <= 1.0;
		if ( frustumTest ) {
		#if defined( SHADOWMAP_TYPE_PCF )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx0 = - texelSize.x * shadowRadius;
			float dy0 = - texelSize.y * shadowRadius;
			float dx1 = + texelSize.x * shadowRadius;
			float dy1 = + texelSize.y * shadowRadius;
			float dx2 = dx0 / 2.0;
			float dy2 = dy0 / 2.0;
			float dx3 = dx1 / 2.0;
			float dy3 = dy1 / 2.0;
			shadow = (
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy2 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx2, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx3, dy3 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( 0.0, dy1 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, shadowCoord.xy + vec2( dx1, dy1 ), shadowCoord.z )
			) * ( 1.0 / 17.0 );
		#elif defined( SHADOWMAP_TYPE_PCF_SOFT )
			vec2 texelSize = vec2( 1.0 ) / shadowMapSize;
			float dx = texelSize.x;
			float dy = texelSize.y;
			vec2 uv = shadowCoord.xy;
			vec2 f = fract( uv * shadowMapSize + 0.5 );
			uv -= f * texelSize;
			shadow = (
				texture2DCompare( shadowMap, uv, shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( dx, 0.0 ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + vec2( 0.0, dy ), shadowCoord.z ) +
				texture2DCompare( shadowMap, uv + texelSize, shadowCoord.z ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, 0.0 ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 0.0 ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( -dx, dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, dy ), shadowCoord.z ),
					 f.x ) +
				mix( texture2DCompare( shadowMap, uv + vec2( 0.0, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( 0.0, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( texture2DCompare( shadowMap, uv + vec2( dx, -dy ), shadowCoord.z ),
					 texture2DCompare( shadowMap, uv + vec2( dx, 2.0 * dy ), shadowCoord.z ),
					 f.y ) +
				mix( mix( texture2DCompare( shadowMap, uv + vec2( -dx, -dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, -dy ), shadowCoord.z ),
						  f.x ),
					 mix( texture2DCompare( shadowMap, uv + vec2( -dx, 2.0 * dy ), shadowCoord.z ),
						  texture2DCompare( shadowMap, uv + vec2( 2.0 * dx, 2.0 * dy ), shadowCoord.z ),
						  f.x ),
					 f.y )
			) * ( 1.0 / 9.0 );
		#elif defined( SHADOWMAP_TYPE_VSM )
			shadow = VSMShadow( shadowMap, shadowCoord.xy, shadowCoord.z );
		#else
			shadow = texture2DCompare( shadowMap, shadowCoord.xy, shadowCoord.z );
		#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
	vec2 cubeToUV( vec3 v, float texelSizeY ) {
		vec3 absV = abs( v );
		float scaleToCube = 1.0 / max( absV.x, max( absV.y, absV.z ) );
		absV *= scaleToCube;
		v *= scaleToCube * ( 1.0 - 2.0 * texelSizeY );
		vec2 planar = v.xy;
		float almostATexel = 1.5 * texelSizeY;
		float almostOne = 1.0 - almostATexel;
		if ( absV.z >= almostOne ) {
			if ( v.z > 0.0 )
				planar.x = 4.0 - v.x;
		} else if ( absV.x >= almostOne ) {
			float signX = sign( v.x );
			planar.x = v.z * signX + 2.0 * signX;
		} else if ( absV.y >= almostOne ) {
			float signY = sign( v.y );
			planar.x = v.x + 2.0 * signY + 2.0;
			planar.y = v.z * signY - 2.0;
		}
		return vec2( 0.125, 0.25 ) * planar + vec2( 0.375, 0.75 );
	}
	float getPointShadow( sampler2D shadowMap, vec2 shadowMapSize, float shadowIntensity, float shadowBias, float shadowRadius, vec4 shadowCoord, float shadowCameraNear, float shadowCameraFar ) {
		float shadow = 1.0;
		vec3 lightToPosition = shadowCoord.xyz;
		
		float lightToPositionLength = length( lightToPosition );
		if ( lightToPositionLength - shadowCameraFar <= 0.0 && lightToPositionLength - shadowCameraNear >= 0.0 ) {
			float dp = ( lightToPositionLength - shadowCameraNear ) / ( shadowCameraFar - shadowCameraNear );			dp += shadowBias;
			vec3 bd3D = normalize( lightToPosition );
			vec2 texelSize = vec2( 1.0 ) / ( shadowMapSize * vec2( 4.0, 2.0 ) );
			#if defined( SHADOWMAP_TYPE_PCF ) || defined( SHADOWMAP_TYPE_PCF_SOFT ) || defined( SHADOWMAP_TYPE_VSM )
				vec2 offset = vec2( - 1, 1 ) * shadowRadius * texelSize.y;
				shadow = (
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yyx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxy, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.xxx, texelSize.y ), dp ) +
					texture2DCompare( shadowMap, cubeToUV( bd3D + offset.yxx, texelSize.y ), dp )
				) * ( 1.0 / 9.0 );
			#else
				shadow = texture2DCompare( shadowMap, cubeToUV( bd3D, texelSize.y ), dp );
			#endif
		}
		return mix( 1.0, shadow, shadowIntensity );
	}
#endif`,LV=`#if NUM_SPOT_LIGHT_COORDS > 0
	uniform mat4 spotLightMatrix[ NUM_SPOT_LIGHT_COORDS ];
	varying vec4 vSpotLightCoord[ NUM_SPOT_LIGHT_COORDS ];
#endif
#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
		uniform mat4 directionalShadowMatrix[ NUM_DIR_LIGHT_SHADOWS ];
		varying vec4 vDirectionalShadowCoord[ NUM_DIR_LIGHT_SHADOWS ];
		struct DirectionalLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform DirectionalLightShadow directionalLightShadows[ NUM_DIR_LIGHT_SHADOWS ];
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
		struct SpotLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
		};
		uniform SpotLightShadow spotLightShadows[ NUM_SPOT_LIGHT_SHADOWS ];
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		uniform mat4 pointShadowMatrix[ NUM_POINT_LIGHT_SHADOWS ];
		varying vec4 vPointShadowCoord[ NUM_POINT_LIGHT_SHADOWS ];
		struct PointLightShadow {
			float shadowIntensity;
			float shadowBias;
			float shadowNormalBias;
			float shadowRadius;
			vec2 shadowMapSize;
			float shadowCameraNear;
			float shadowCameraFar;
		};
		uniform PointLightShadow pointLightShadows[ NUM_POINT_LIGHT_SHADOWS ];
	#endif
#endif`,DV=`#if ( defined( USE_SHADOWMAP ) && ( NUM_DIR_LIGHT_SHADOWS > 0 || NUM_POINT_LIGHT_SHADOWS > 0 ) ) || ( NUM_SPOT_LIGHT_COORDS > 0 )
	vec3 shadowWorldNormal = inverseTransformDirection( transformedNormal, viewMatrix );
	vec4 shadowWorldPosition;
#endif
#if defined( USE_SHADOWMAP )
	#if NUM_DIR_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * directionalLightShadows[ i ].shadowNormalBias, 0 );
			vDirectionalShadowCoord[ i ] = directionalShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
		#pragma unroll_loop_start
		for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
			shadowWorldPosition = worldPosition + vec4( shadowWorldNormal * pointLightShadows[ i ].shadowNormalBias, 0 );
			vPointShadowCoord[ i ] = pointShadowMatrix[ i ] * shadowWorldPosition;
		}
		#pragma unroll_loop_end
	#endif
#endif
#if NUM_SPOT_LIGHT_COORDS > 0
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_COORDS; i ++ ) {
		shadowWorldPosition = worldPosition;
		#if ( defined( USE_SHADOWMAP ) && UNROLLED_LOOP_INDEX < NUM_SPOT_LIGHT_SHADOWS )
			shadowWorldPosition.xyz += shadowWorldNormal * spotLightShadows[ i ].shadowNormalBias;
		#endif
		vSpotLightCoord[ i ] = spotLightMatrix[ i ] * shadowWorldPosition;
	}
	#pragma unroll_loop_end
#endif`,BV=`float getShadowMask() {
	float shadow = 1.0;
	#ifdef USE_SHADOWMAP
	#if NUM_DIR_LIGHT_SHADOWS > 0
	DirectionalLightShadow directionalLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_DIR_LIGHT_SHADOWS; i ++ ) {
		directionalLight = directionalLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( directionalShadowMap[ i ], directionalLight.shadowMapSize, directionalLight.shadowIntensity, directionalLight.shadowBias, directionalLight.shadowRadius, vDirectionalShadowCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_SPOT_LIGHT_SHADOWS > 0
	SpotLightShadow spotLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_SPOT_LIGHT_SHADOWS; i ++ ) {
		spotLight = spotLightShadows[ i ];
		shadow *= receiveShadow ? getShadow( spotShadowMap[ i ], spotLight.shadowMapSize, spotLight.shadowIntensity, spotLight.shadowBias, spotLight.shadowRadius, vSpotLightCoord[ i ] ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#if NUM_POINT_LIGHT_SHADOWS > 0
	PointLightShadow pointLight;
	#pragma unroll_loop_start
	for ( int i = 0; i < NUM_POINT_LIGHT_SHADOWS; i ++ ) {
		pointLight = pointLightShadows[ i ];
		shadow *= receiveShadow ? getPointShadow( pointShadowMap[ i ], pointLight.shadowMapSize, pointLight.shadowIntensity, pointLight.shadowBias, pointLight.shadowRadius, vPointShadowCoord[ i ], pointLight.shadowCameraNear, pointLight.shadowCameraFar ) : 1.0;
	}
	#pragma unroll_loop_end
	#endif
	#endif
	return shadow;
}`,FV=`#ifdef USE_SKINNING
	mat4 boneMatX = getBoneMatrix( skinIndex.x );
	mat4 boneMatY = getBoneMatrix( skinIndex.y );
	mat4 boneMatZ = getBoneMatrix( skinIndex.z );
	mat4 boneMatW = getBoneMatrix( skinIndex.w );
#endif`,UV=`#ifdef USE_SKINNING
	uniform mat4 bindMatrix;
	uniform mat4 bindMatrixInverse;
	uniform highp sampler2D boneTexture;
	mat4 getBoneMatrix( const in float i ) {
		int size = textureSize( boneTexture, 0 ).x;
		int j = int( i ) * 4;
		int x = j % size;
		int y = j / size;
		vec4 v1 = texelFetch( boneTexture, ivec2( x, y ), 0 );
		vec4 v2 = texelFetch( boneTexture, ivec2( x + 1, y ), 0 );
		vec4 v3 = texelFetch( boneTexture, ivec2( x + 2, y ), 0 );
		vec4 v4 = texelFetch( boneTexture, ivec2( x + 3, y ), 0 );
		return mat4( v1, v2, v3, v4 );
	}
#endif`,OV=`#ifdef USE_SKINNING
	vec4 skinVertex = bindMatrix * vec4( transformed, 1.0 );
	vec4 skinned = vec4( 0.0 );
	skinned += boneMatX * skinVertex * skinWeight.x;
	skinned += boneMatY * skinVertex * skinWeight.y;
	skinned += boneMatZ * skinVertex * skinWeight.z;
	skinned += boneMatW * skinVertex * skinWeight.w;
	transformed = ( bindMatrixInverse * skinned ).xyz;
#endif`,kV=`#ifdef USE_SKINNING
	mat4 skinMatrix = mat4( 0.0 );
	skinMatrix += skinWeight.x * boneMatX;
	skinMatrix += skinWeight.y * boneMatY;
	skinMatrix += skinWeight.z * boneMatZ;
	skinMatrix += skinWeight.w * boneMatW;
	skinMatrix = bindMatrixInverse * skinMatrix * bindMatrix;
	objectNormal = vec4( skinMatrix * vec4( objectNormal, 0.0 ) ).xyz;
	#ifdef USE_TANGENT
		objectTangent = vec4( skinMatrix * vec4( objectTangent, 0.0 ) ).xyz;
	#endif
#endif`,VV=`float specularStrength;
#ifdef USE_SPECULARMAP
	vec4 texelSpecular = texture2D( specularMap, vSpecularMapUv );
	specularStrength = texelSpecular.r;
#else
	specularStrength = 1.0;
#endif`,zV=`#ifdef USE_SPECULARMAP
	uniform sampler2D specularMap;
#endif`,GV=`#if defined( TONE_MAPPING )
	gl_FragColor.rgb = toneMapping( gl_FragColor.rgb );
#endif`,qV=`#ifndef saturate
#define saturate( a ) clamp( a, 0.0, 1.0 )
#endif
uniform float toneMappingExposure;
vec3 LinearToneMapping( vec3 color ) {
	return saturate( toneMappingExposure * color );
}
vec3 ReinhardToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	return saturate( color / ( vec3( 1.0 ) + color ) );
}
vec3 CineonToneMapping( vec3 color ) {
	color *= toneMappingExposure;
	color = max( vec3( 0.0 ), color - 0.004 );
	return pow( ( color * ( 6.2 * color + 0.5 ) ) / ( color * ( 6.2 * color + 1.7 ) + 0.06 ), vec3( 2.2 ) );
}
vec3 RRTAndODTFit( vec3 v ) {
	vec3 a = v * ( v + 0.0245786 ) - 0.000090537;
	vec3 b = v * ( 0.983729 * v + 0.4329510 ) + 0.238081;
	return a / b;
}
vec3 ACESFilmicToneMapping( vec3 color ) {
	const mat3 ACESInputMat = mat3(
		vec3( 0.59719, 0.07600, 0.02840 ),		vec3( 0.35458, 0.90834, 0.13383 ),
		vec3( 0.04823, 0.01566, 0.83777 )
	);
	const mat3 ACESOutputMat = mat3(
		vec3(  1.60475, -0.10208, -0.00327 ),		vec3( -0.53108,  1.10813, -0.07276 ),
		vec3( -0.07367, -0.00605,  1.07602 )
	);
	color *= toneMappingExposure / 0.6;
	color = ACESInputMat * color;
	color = RRTAndODTFit( color );
	color = ACESOutputMat * color;
	return saturate( color );
}
const mat3 LINEAR_REC2020_TO_LINEAR_SRGB = mat3(
	vec3( 1.6605, - 0.1246, - 0.0182 ),
	vec3( - 0.5876, 1.1329, - 0.1006 ),
	vec3( - 0.0728, - 0.0083, 1.1187 )
);
const mat3 LINEAR_SRGB_TO_LINEAR_REC2020 = mat3(
	vec3( 0.6274, 0.0691, 0.0164 ),
	vec3( 0.3293, 0.9195, 0.0880 ),
	vec3( 0.0433, 0.0113, 0.8956 )
);
vec3 agxDefaultContrastApprox( vec3 x ) {
	vec3 x2 = x * x;
	vec3 x4 = x2 * x2;
	return + 15.5 * x4 * x2
		- 40.14 * x4 * x
		+ 31.96 * x4
		- 6.868 * x2 * x
		+ 0.4298 * x2
		+ 0.1191 * x
		- 0.00232;
}
vec3 AgXToneMapping( vec3 color ) {
	const mat3 AgXInsetMatrix = mat3(
		vec3( 0.856627153315983, 0.137318972929847, 0.11189821299995 ),
		vec3( 0.0951212405381588, 0.761241990602591, 0.0767994186031903 ),
		vec3( 0.0482516061458583, 0.101439036467562, 0.811302368396859 )
	);
	const mat3 AgXOutsetMatrix = mat3(
		vec3( 1.1271005818144368, - 0.1413297634984383, - 0.14132976349843826 ),
		vec3( - 0.11060664309660323, 1.157823702216272, - 0.11060664309660294 ),
		vec3( - 0.016493938717834573, - 0.016493938717834257, 1.2519364065950405 )
	);
	const float AgxMinEv = - 12.47393;	const float AgxMaxEv = 4.026069;
	color *= toneMappingExposure;
	color = LINEAR_SRGB_TO_LINEAR_REC2020 * color;
	color = AgXInsetMatrix * color;
	color = max( color, 1e-10 );	color = log2( color );
	color = ( color - AgxMinEv ) / ( AgxMaxEv - AgxMinEv );
	color = clamp( color, 0.0, 1.0 );
	color = agxDefaultContrastApprox( color );
	color = AgXOutsetMatrix * color;
	color = pow( max( vec3( 0.0 ), color ), vec3( 2.2 ) );
	color = LINEAR_REC2020_TO_LINEAR_SRGB * color;
	color = clamp( color, 0.0, 1.0 );
	return color;
}
vec3 NeutralToneMapping( vec3 color ) {
	const float StartCompression = 0.8 - 0.04;
	const float Desaturation = 0.15;
	color *= toneMappingExposure;
	float x = min( color.r, min( color.g, color.b ) );
	float offset = x < 0.08 ? x - 6.25 * x * x : 0.04;
	color -= offset;
	float peak = max( color.r, max( color.g, color.b ) );
	if ( peak < StartCompression ) return color;
	float d = 1. - StartCompression;
	float newPeak = 1. - d * d / ( peak + d - StartCompression );
	color *= newPeak / peak;
	float g = 1. - 1. / ( Desaturation * ( peak - newPeak ) + 1. );
	return mix( color, vec3( newPeak ), g );
}
vec3 CustomToneMapping( vec3 color ) { return color; }`,HV=`#ifdef USE_TRANSMISSION
	material.transmission = transmission;
	material.transmissionAlpha = 1.0;
	material.thickness = thickness;
	material.attenuationDistance = attenuationDistance;
	material.attenuationColor = attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		material.transmission *= texture2D( transmissionMap, vTransmissionMapUv ).r;
	#endif
	#ifdef USE_THICKNESSMAP
		material.thickness *= texture2D( thicknessMap, vThicknessMapUv ).g;
	#endif
	vec3 pos = vWorldPosition;
	vec3 v = normalize( cameraPosition - pos );
	vec3 n = inverseTransformDirection( normal, viewMatrix );
	vec4 transmitted = getIBLVolumeRefraction(
		n, v, material.roughness, material.diffuseColor, material.specularColor, material.specularF90,
		pos, modelMatrix, viewMatrix, projectionMatrix, material.dispersion, material.ior, material.thickness,
		material.attenuationColor, material.attenuationDistance );
	material.transmissionAlpha = mix( material.transmissionAlpha, transmitted.a, material.transmission );
	totalDiffuse = mix( totalDiffuse, transmitted.rgb, material.transmission );
#endif`,WV=`#ifdef USE_TRANSMISSION
	uniform float transmission;
	uniform float thickness;
	uniform float attenuationDistance;
	uniform vec3 attenuationColor;
	#ifdef USE_TRANSMISSIONMAP
		uniform sampler2D transmissionMap;
	#endif
	#ifdef USE_THICKNESSMAP
		uniform sampler2D thicknessMap;
	#endif
	uniform vec2 transmissionSamplerSize;
	uniform sampler2D transmissionSamplerMap;
	uniform mat4 modelMatrix;
	uniform mat4 projectionMatrix;
	varying vec3 vWorldPosition;
	float w0( float a ) {
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - a + 3.0 ) - 3.0 ) + 1.0 );
	}
	float w1( float a ) {
		return ( 1.0 / 6.0 ) * ( a *  a * ( 3.0 * a - 6.0 ) + 4.0 );
	}
	float w2( float a ){
		return ( 1.0 / 6.0 ) * ( a * ( a * ( - 3.0 * a + 3.0 ) + 3.0 ) + 1.0 );
	}
	float w3( float a ) {
		return ( 1.0 / 6.0 ) * ( a * a * a );
	}
	float g0( float a ) {
		return w0( a ) + w1( a );
	}
	float g1( float a ) {
		return w2( a ) + w3( a );
	}
	float h0( float a ) {
		return - 1.0 + w1( a ) / ( w0( a ) + w1( a ) );
	}
	float h1( float a ) {
		return 1.0 + w3( a ) / ( w2( a ) + w3( a ) );
	}
	vec4 bicubic( sampler2D tex, vec2 uv, vec4 texelSize, float lod ) {
		uv = uv * texelSize.zw + 0.5;
		vec2 iuv = floor( uv );
		vec2 fuv = fract( uv );
		float g0x = g0( fuv.x );
		float g1x = g1( fuv.x );
		float h0x = h0( fuv.x );
		float h1x = h1( fuv.x );
		float h0y = h0( fuv.y );
		float h1y = h1( fuv.y );
		vec2 p0 = ( vec2( iuv.x + h0x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p1 = ( vec2( iuv.x + h1x, iuv.y + h0y ) - 0.5 ) * texelSize.xy;
		vec2 p2 = ( vec2( iuv.x + h0x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		vec2 p3 = ( vec2( iuv.x + h1x, iuv.y + h1y ) - 0.5 ) * texelSize.xy;
		return g0( fuv.y ) * ( g0x * textureLod( tex, p0, lod ) + g1x * textureLod( tex, p1, lod ) ) +
			g1( fuv.y ) * ( g0x * textureLod( tex, p2, lod ) + g1x * textureLod( tex, p3, lod ) );
	}
	vec4 textureBicubic( sampler2D sampler, vec2 uv, float lod ) {
		vec2 fLodSize = vec2( textureSize( sampler, int( lod ) ) );
		vec2 cLodSize = vec2( textureSize( sampler, int( lod + 1.0 ) ) );
		vec2 fLodSizeInv = 1.0 / fLodSize;
		vec2 cLodSizeInv = 1.0 / cLodSize;
		vec4 fSample = bicubic( sampler, uv, vec4( fLodSizeInv, fLodSize ), floor( lod ) );
		vec4 cSample = bicubic( sampler, uv, vec4( cLodSizeInv, cLodSize ), ceil( lod ) );
		return mix( fSample, cSample, fract( lod ) );
	}
	vec3 getVolumeTransmissionRay( const in vec3 n, const in vec3 v, const in float thickness, const in float ior, const in mat4 modelMatrix ) {
		vec3 refractionVector = refract( - v, normalize( n ), 1.0 / ior );
		vec3 modelScale;
		modelScale.x = length( vec3( modelMatrix[ 0 ].xyz ) );
		modelScale.y = length( vec3( modelMatrix[ 1 ].xyz ) );
		modelScale.z = length( vec3( modelMatrix[ 2 ].xyz ) );
		return normalize( refractionVector ) * thickness * modelScale;
	}
	float applyIorToRoughness( const in float roughness, const in float ior ) {
		return roughness * clamp( ior * 2.0 - 2.0, 0.0, 1.0 );
	}
	vec4 getTransmissionSample( const in vec2 fragCoord, const in float roughness, const in float ior ) {
		float lod = log2( transmissionSamplerSize.x ) * applyIorToRoughness( roughness, ior );
		return textureBicubic( transmissionSamplerMap, fragCoord.xy, lod );
	}
	vec3 volumeAttenuation( const in float transmissionDistance, const in vec3 attenuationColor, const in float attenuationDistance ) {
		if ( isinf( attenuationDistance ) ) {
			return vec3( 1.0 );
		} else {
			vec3 attenuationCoefficient = -log( attenuationColor ) / attenuationDistance;
			vec3 transmittance = exp( - attenuationCoefficient * transmissionDistance );			return transmittance;
		}
	}
	vec4 getIBLVolumeRefraction( const in vec3 n, const in vec3 v, const in float roughness, const in vec3 diffuseColor,
		const in vec3 specularColor, const in float specularF90, const in vec3 position, const in mat4 modelMatrix,
		const in mat4 viewMatrix, const in mat4 projMatrix, const in float dispersion, const in float ior, const in float thickness,
		const in vec3 attenuationColor, const in float attenuationDistance ) {
		vec4 transmittedLight;
		vec3 transmittance;
		#ifdef USE_DISPERSION
			float halfSpread = ( ior - 1.0 ) * 0.025 * dispersion;
			vec3 iors = vec3( ior - halfSpread, ior, ior + halfSpread );
			for ( int i = 0; i < 3; i ++ ) {
				vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, iors[ i ], modelMatrix );
				vec3 refractedRayExit = position + transmissionRay;
				vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
				vec2 refractionCoords = ndcPos.xy / ndcPos.w;
				refractionCoords += 1.0;
				refractionCoords /= 2.0;
				vec4 transmissionSample = getTransmissionSample( refractionCoords, roughness, iors[ i ] );
				transmittedLight[ i ] = transmissionSample[ i ];
				transmittedLight.a += transmissionSample.a;
				transmittance[ i ] = diffuseColor[ i ] * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance )[ i ];
			}
			transmittedLight.a /= 3.0;
		#else
			vec3 transmissionRay = getVolumeTransmissionRay( n, v, thickness, ior, modelMatrix );
			vec3 refractedRayExit = position + transmissionRay;
			vec4 ndcPos = projMatrix * viewMatrix * vec4( refractedRayExit, 1.0 );
			vec2 refractionCoords = ndcPos.xy / ndcPos.w;
			refractionCoords += 1.0;
			refractionCoords /= 2.0;
			transmittedLight = getTransmissionSample( refractionCoords, roughness, ior );
			transmittance = diffuseColor * volumeAttenuation( length( transmissionRay ), attenuationColor, attenuationDistance );
		#endif
		vec3 attenuatedColor = transmittance * transmittedLight.rgb;
		vec3 F = EnvironmentBRDF( n, v, specularColor, specularF90, roughness );
		float transmittanceFactor = ( transmittance.r + transmittance.g + transmittance.b ) / 3.0;
		return vec4( ( 1.0 - F ) * attenuatedColor, 1.0 - ( 1.0 - transmittedLight.a ) * transmittanceFactor );
	}
#endif`,jV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_SPECULARMAP
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,$V=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	varying vec2 vUv;
#endif
#ifdef USE_MAP
	uniform mat3 mapTransform;
	varying vec2 vMapUv;
#endif
#ifdef USE_ALPHAMAP
	uniform mat3 alphaMapTransform;
	varying vec2 vAlphaMapUv;
#endif
#ifdef USE_LIGHTMAP
	uniform mat3 lightMapTransform;
	varying vec2 vLightMapUv;
#endif
#ifdef USE_AOMAP
	uniform mat3 aoMapTransform;
	varying vec2 vAoMapUv;
#endif
#ifdef USE_BUMPMAP
	uniform mat3 bumpMapTransform;
	varying vec2 vBumpMapUv;
#endif
#ifdef USE_NORMALMAP
	uniform mat3 normalMapTransform;
	varying vec2 vNormalMapUv;
#endif
#ifdef USE_DISPLACEMENTMAP
	uniform mat3 displacementMapTransform;
	varying vec2 vDisplacementMapUv;
#endif
#ifdef USE_EMISSIVEMAP
	uniform mat3 emissiveMapTransform;
	varying vec2 vEmissiveMapUv;
#endif
#ifdef USE_METALNESSMAP
	uniform mat3 metalnessMapTransform;
	varying vec2 vMetalnessMapUv;
#endif
#ifdef USE_ROUGHNESSMAP
	uniform mat3 roughnessMapTransform;
	varying vec2 vRoughnessMapUv;
#endif
#ifdef USE_ANISOTROPYMAP
	uniform mat3 anisotropyMapTransform;
	varying vec2 vAnisotropyMapUv;
#endif
#ifdef USE_CLEARCOATMAP
	uniform mat3 clearcoatMapTransform;
	varying vec2 vClearcoatMapUv;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	uniform mat3 clearcoatNormalMapTransform;
	varying vec2 vClearcoatNormalMapUv;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	uniform mat3 clearcoatRoughnessMapTransform;
	varying vec2 vClearcoatRoughnessMapUv;
#endif
#ifdef USE_SHEEN_COLORMAP
	uniform mat3 sheenColorMapTransform;
	varying vec2 vSheenColorMapUv;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	uniform mat3 sheenRoughnessMapTransform;
	varying vec2 vSheenRoughnessMapUv;
#endif
#ifdef USE_IRIDESCENCEMAP
	uniform mat3 iridescenceMapTransform;
	varying vec2 vIridescenceMapUv;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	uniform mat3 iridescenceThicknessMapTransform;
	varying vec2 vIridescenceThicknessMapUv;
#endif
#ifdef USE_SPECULARMAP
	uniform mat3 specularMapTransform;
	varying vec2 vSpecularMapUv;
#endif
#ifdef USE_SPECULAR_COLORMAP
	uniform mat3 specularColorMapTransform;
	varying vec2 vSpecularColorMapUv;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	uniform mat3 specularIntensityMapTransform;
	varying vec2 vSpecularIntensityMapUv;
#endif
#ifdef USE_TRANSMISSIONMAP
	uniform mat3 transmissionMapTransform;
	varying vec2 vTransmissionMapUv;
#endif
#ifdef USE_THICKNESSMAP
	uniform mat3 thicknessMapTransform;
	varying vec2 vThicknessMapUv;
#endif`,XV=`#if defined( USE_UV ) || defined( USE_ANISOTROPY )
	vUv = vec3( uv, 1 ).xy;
#endif
#ifdef USE_MAP
	vMapUv = ( mapTransform * vec3( MAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ALPHAMAP
	vAlphaMapUv = ( alphaMapTransform * vec3( ALPHAMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_LIGHTMAP
	vLightMapUv = ( lightMapTransform * vec3( LIGHTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_AOMAP
	vAoMapUv = ( aoMapTransform * vec3( AOMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_BUMPMAP
	vBumpMapUv = ( bumpMapTransform * vec3( BUMPMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_NORMALMAP
	vNormalMapUv = ( normalMapTransform * vec3( NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_DISPLACEMENTMAP
	vDisplacementMapUv = ( displacementMapTransform * vec3( DISPLACEMENTMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_EMISSIVEMAP
	vEmissiveMapUv = ( emissiveMapTransform * vec3( EMISSIVEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_METALNESSMAP
	vMetalnessMapUv = ( metalnessMapTransform * vec3( METALNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ROUGHNESSMAP
	vRoughnessMapUv = ( roughnessMapTransform * vec3( ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_ANISOTROPYMAP
	vAnisotropyMapUv = ( anisotropyMapTransform * vec3( ANISOTROPYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOATMAP
	vClearcoatMapUv = ( clearcoatMapTransform * vec3( CLEARCOATMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_NORMALMAP
	vClearcoatNormalMapUv = ( clearcoatNormalMapTransform * vec3( CLEARCOAT_NORMALMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_CLEARCOAT_ROUGHNESSMAP
	vClearcoatRoughnessMapUv = ( clearcoatRoughnessMapTransform * vec3( CLEARCOAT_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCEMAP
	vIridescenceMapUv = ( iridescenceMapTransform * vec3( IRIDESCENCEMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_IRIDESCENCE_THICKNESSMAP
	vIridescenceThicknessMapUv = ( iridescenceThicknessMapTransform * vec3( IRIDESCENCE_THICKNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_COLORMAP
	vSheenColorMapUv = ( sheenColorMapTransform * vec3( SHEEN_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SHEEN_ROUGHNESSMAP
	vSheenRoughnessMapUv = ( sheenRoughnessMapTransform * vec3( SHEEN_ROUGHNESSMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULARMAP
	vSpecularMapUv = ( specularMapTransform * vec3( SPECULARMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_COLORMAP
	vSpecularColorMapUv = ( specularColorMapTransform * vec3( SPECULAR_COLORMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_SPECULAR_INTENSITYMAP
	vSpecularIntensityMapUv = ( specularIntensityMapTransform * vec3( SPECULAR_INTENSITYMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_TRANSMISSIONMAP
	vTransmissionMapUv = ( transmissionMapTransform * vec3( TRANSMISSIONMAP_UV, 1 ) ).xy;
#endif
#ifdef USE_THICKNESSMAP
	vThicknessMapUv = ( thicknessMapTransform * vec3( THICKNESSMAP_UV, 1 ) ).xy;
#endif`,QV=`#if defined( USE_ENVMAP ) || defined( DISTANCE ) || defined ( USE_SHADOWMAP ) || defined ( USE_TRANSMISSION ) || NUM_SPOT_LIGHT_COORDS > 0
	vec4 worldPosition = vec4( transformed, 1.0 );
	#ifdef USE_BATCHING
		worldPosition = batchingMatrix * worldPosition;
	#endif
	#ifdef USE_INSTANCING
		worldPosition = instanceMatrix * worldPosition;
	#endif
	worldPosition = modelMatrix * worldPosition;
#endif`;const YV=`varying vec2 vUv;
uniform mat3 uvTransform;
void main() {
	vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	gl_Position = vec4( position.xy, 1.0, 1.0 );
}`,KV=`uniform sampler2D t2D;
uniform float backgroundIntensity;
varying vec2 vUv;
void main() {
	vec4 texColor = texture2D( t2D, vUv );
	#ifdef DECODE_VIDEO_TEXTURE
		texColor = vec4( mix( pow( texColor.rgb * 0.9478672986 + vec3( 0.0521327014 ), vec3( 2.4 ) ), texColor.rgb * 0.0773993808, vec3( lessThanEqual( texColor.rgb, vec3( 0.04045 ) ) ) ), texColor.w );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ZV=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,JV=`#ifdef ENVMAP_TYPE_CUBE
	uniform samplerCube envMap;
#elif defined( ENVMAP_TYPE_CUBE_UV )
	uniform sampler2D envMap;
#endif
uniform float flipEnvMap;
uniform float backgroundBlurriness;
uniform float backgroundIntensity;
uniform mat3 backgroundRotation;
varying vec3 vWorldDirection;
#include <cube_uv_reflection_fragment>
void main() {
	#ifdef ENVMAP_TYPE_CUBE
		vec4 texColor = textureCube( envMap, backgroundRotation * vec3( flipEnvMap * vWorldDirection.x, vWorldDirection.yz ) );
	#elif defined( ENVMAP_TYPE_CUBE_UV )
		vec4 texColor = textureCubeUV( envMap, backgroundRotation * vWorldDirection, backgroundBlurriness );
	#else
		vec4 texColor = vec4( 0.0, 0.0, 0.0, 1.0 );
	#endif
	texColor.rgb *= backgroundIntensity;
	gl_FragColor = texColor;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,ez=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
	gl_Position.z = gl_Position.w;
}`,tz=`uniform samplerCube tCube;
uniform float tFlip;
uniform float opacity;
varying vec3 vWorldDirection;
void main() {
	vec4 texColor = textureCube( tCube, vec3( tFlip * vWorldDirection.x, vWorldDirection.yz ) );
	gl_FragColor = texColor;
	gl_FragColor.a *= opacity;
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,nz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
varying vec2 vHighPrecisionZW;
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vHighPrecisionZW = gl_Position.zw;
}`,iz=`#if DEPTH_PACKING == 3200
	uniform float opacity;
#endif
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
varying vec2 vHighPrecisionZW;
void main() {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#if DEPTH_PACKING == 3200
		diffuseColor.a = opacity;
	#endif
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <logdepthbuf_fragment>
	#ifdef USE_REVERSEDEPTHBUF
		float fragCoordZ = vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ];
	#else
		float fragCoordZ = 0.5 * vHighPrecisionZW[ 0 ] / vHighPrecisionZW[ 1 ] + 0.5;
	#endif
	#if DEPTH_PACKING == 3200
		gl_FragColor = vec4( vec3( 1.0 - fragCoordZ ), opacity );
	#elif DEPTH_PACKING == 3201
		gl_FragColor = packDepthToRGBA( fragCoordZ );
	#elif DEPTH_PACKING == 3202
		gl_FragColor = vec4( packDepthToRGB( fragCoordZ ), 1.0 );
	#elif DEPTH_PACKING == 3203
		gl_FragColor = vec4( packDepthToRG( fragCoordZ ), 0.0, 1.0 );
	#endif
}`,rz=`#define DISTANCE
varying vec3 vWorldPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <skinbase_vertex>
	#include <morphinstance_vertex>
	#ifdef USE_DISPLACEMENTMAP
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <worldpos_vertex>
	#include <clipping_planes_vertex>
	vWorldPosition = worldPosition.xyz;
}`,sz=`#define DISTANCE
uniform vec3 referencePosition;
uniform float nearDistance;
uniform float farDistance;
varying vec3 vWorldPosition;
#include <common>
#include <packing>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <clipping_planes_pars_fragment>
void main () {
	vec4 diffuseColor = vec4( 1.0 );
	#include <clipping_planes_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	float dist = length( vWorldPosition - referencePosition );
	dist = ( dist - nearDistance ) / ( farDistance - nearDistance );
	dist = saturate( dist );
	gl_FragColor = packDepthToRGBA( dist );
}`,oz=`varying vec3 vWorldDirection;
#include <common>
void main() {
	vWorldDirection = transformDirection( position, modelMatrix );
	#include <begin_vertex>
	#include <project_vertex>
}`,az=`uniform sampler2D tEquirect;
varying vec3 vWorldDirection;
#include <common>
void main() {
	vec3 direction = normalize( vWorldDirection );
	vec2 sampleUV = equirectUv( direction );
	gl_FragColor = texture2D( tEquirect, sampleUV );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
}`,lz=`uniform float scale;
attribute float lineDistance;
varying float vLineDistance;
#include <common>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	vLineDistance = scale * lineDistance;
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,uz=`uniform vec3 diffuse;
uniform float opacity;
uniform float dashSize;
uniform float totalSize;
varying float vLineDistance;
#include <common>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	if ( mod( vLineDistance, totalSize ) > dashSize ) {
		discard;
	}
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,cz=`#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#if defined ( USE_ENVMAP ) || defined ( USE_SKINNING )
		#include <beginnormal_vertex>
		#include <morphnormal_vertex>
		#include <skinbase_vertex>
		#include <skinnormal_vertex>
		#include <defaultnormal_vertex>
	#endif
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <fog_vertex>
}`,hz=`uniform vec3 diffuse;
uniform float opacity;
#ifndef FLAT_SHADED
	varying vec3 vNormal;
#endif
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	#ifdef USE_LIGHTMAP
		vec4 lightMapTexel = texture2D( lightMap, vLightMapUv );
		reflectedLight.indirectDiffuse += lightMapTexel.rgb * lightMapIntensity * RECIPROCAL_PI;
	#else
		reflectedLight.indirectDiffuse += vec3( 1.0 );
	#endif
	#include <aomap_fragment>
	reflectedLight.indirectDiffuse *= diffuseColor.rgb;
	vec3 outgoingLight = reflectedLight.indirectDiffuse;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,fz=`#define LAMBERT
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,dz=`#define LAMBERT
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_lambert_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_lambert_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Az=`#define MATCAP
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <color_pars_vertex>
#include <displacementmap_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
	vViewPosition = - mvPosition.xyz;
}`,pz=`#define MATCAP
uniform vec3 diffuse;
uniform float opacity;
uniform sampler2D matcap;
varying vec3 vViewPosition;
#include <common>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	vec3 viewDir = normalize( vViewPosition );
	vec3 x = normalize( vec3( viewDir.z, 0.0, - viewDir.x ) );
	vec3 y = cross( viewDir, x );
	vec2 uv = vec2( dot( x, normal ), dot( y, normal ) ) * 0.495 + 0.5;
	#ifdef USE_MATCAP
		vec4 matcapColor = texture2D( matcap, uv );
	#else
		vec4 matcapColor = vec4( vec3( mix( 0.2, 0.8, uv.y ) ), 1.0 );
	#endif
	vec3 outgoingLight = diffuseColor.rgb * matcapColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,mz=`#define NORMAL
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	vViewPosition = - mvPosition.xyz;
#endif
}`,gz=`#define NORMAL
uniform float opacity;
#if defined( FLAT_SHADED ) || defined( USE_BUMPMAP ) || defined( USE_NORMALMAP_TANGENTSPACE )
	varying vec3 vViewPosition;
#endif
#include <packing>
#include <uv_pars_fragment>
#include <normal_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( 0.0, 0.0, 0.0, opacity );
	#include <clipping_planes_fragment>
	#include <logdepthbuf_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	gl_FragColor = vec4( packNormalToRGB( normal ), diffuseColor.a );
	#ifdef OPAQUE
		gl_FragColor.a = 1.0;
	#endif
}`,yz=`#define PHONG
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <envmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <envmap_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,vz=`#define PHONG
uniform vec3 diffuse;
uniform vec3 emissive;
uniform vec3 specular;
uniform float shininess;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_phong_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <specularmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <specularmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_phong_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;
	#include <envmap_fragment>
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,_z=`#define STANDARD
varying vec3 vViewPosition;
#ifdef USE_TRANSMISSION
	varying vec3 vWorldPosition;
#endif
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
#ifdef USE_TRANSMISSION
	vWorldPosition = worldPosition.xyz;
#endif
}`,xz=`#define STANDARD
#ifdef PHYSICAL
	#define IOR
	#define USE_SPECULAR
#endif
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float roughness;
uniform float metalness;
uniform float opacity;
#ifdef IOR
	uniform float ior;
#endif
#ifdef USE_SPECULAR
	uniform float specularIntensity;
	uniform vec3 specularColor;
	#ifdef USE_SPECULAR_COLORMAP
		uniform sampler2D specularColorMap;
	#endif
	#ifdef USE_SPECULAR_INTENSITYMAP
		uniform sampler2D specularIntensityMap;
	#endif
#endif
#ifdef USE_CLEARCOAT
	uniform float clearcoat;
	uniform float clearcoatRoughness;
#endif
#ifdef USE_DISPERSION
	uniform float dispersion;
#endif
#ifdef USE_IRIDESCENCE
	uniform float iridescence;
	uniform float iridescenceIOR;
	uniform float iridescenceThicknessMinimum;
	uniform float iridescenceThicknessMaximum;
#endif
#ifdef USE_SHEEN
	uniform vec3 sheenColor;
	uniform float sheenRoughness;
	#ifdef USE_SHEEN_COLORMAP
		uniform sampler2D sheenColorMap;
	#endif
	#ifdef USE_SHEEN_ROUGHNESSMAP
		uniform sampler2D sheenRoughnessMap;
	#endif
#endif
#ifdef USE_ANISOTROPY
	uniform vec2 anisotropyVector;
	#ifdef USE_ANISOTROPYMAP
		uniform sampler2D anisotropyMap;
	#endif
#endif
varying vec3 vViewPosition;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <iridescence_fragment>
#include <cube_uv_reflection_fragment>
#include <envmap_common_pars_fragment>
#include <envmap_physical_pars_fragment>
#include <fog_pars_fragment>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_physical_pars_fragment>
#include <transmission_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <clearcoat_pars_fragment>
#include <iridescence_pars_fragment>
#include <roughnessmap_pars_fragment>
#include <metalnessmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <roughnessmap_fragment>
	#include <metalnessmap_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <clearcoat_normal_fragment_begin>
	#include <clearcoat_normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_physical_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 totalDiffuse = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse;
	vec3 totalSpecular = reflectedLight.directSpecular + reflectedLight.indirectSpecular;
	#include <transmission_fragment>
	vec3 outgoingLight = totalDiffuse + totalSpecular + totalEmissiveRadiance;
	#ifdef USE_SHEEN
		float sheenEnergyComp = 1.0 - 0.157 * max3( material.sheenColor );
		outgoingLight = outgoingLight * sheenEnergyComp + sheenSpecularDirect + sheenSpecularIndirect;
	#endif
	#ifdef USE_CLEARCOAT
		float dotNVcc = saturate( dot( geometryClearcoatNormal, geometryViewDir ) );
		vec3 Fcc = F_Schlick( material.clearcoatF0, material.clearcoatF90, dotNVcc );
		outgoingLight = outgoingLight * ( 1.0 - material.clearcoat * Fcc ) + ( clearcoatSpecularDirect + clearcoatSpecularIndirect ) * material.clearcoat;
	#endif
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,bz=`#define TOON
varying vec3 vViewPosition;
#include <common>
#include <batching_pars_vertex>
#include <uv_pars_vertex>
#include <displacementmap_pars_vertex>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <normal_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <shadowmap_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <normal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <displacementmap_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	vViewPosition = - mvPosition.xyz;
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Sz=`#define TOON
uniform vec3 diffuse;
uniform vec3 emissive;
uniform float opacity;
#include <common>
#include <packing>
#include <dithering_pars_fragment>
#include <color_pars_fragment>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <aomap_pars_fragment>
#include <lightmap_pars_fragment>
#include <emissivemap_pars_fragment>
#include <gradientmap_pars_fragment>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <normal_pars_fragment>
#include <lights_toon_pars_fragment>
#include <shadowmap_pars_fragment>
#include <bumpmap_pars_fragment>
#include <normalmap_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	ReflectedLight reflectedLight = ReflectedLight( vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ), vec3( 0.0 ) );
	vec3 totalEmissiveRadiance = emissive;
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <color_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	#include <normal_fragment_begin>
	#include <normal_fragment_maps>
	#include <emissivemap_fragment>
	#include <lights_toon_fragment>
	#include <lights_fragment_begin>
	#include <lights_fragment_maps>
	#include <lights_fragment_end>
	#include <aomap_fragment>
	vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + totalEmissiveRadiance;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
	#include <dithering_fragment>
}`,Tz=`uniform float size;
uniform float scale;
#include <common>
#include <color_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
#ifdef USE_POINTS_UV
	varying vec2 vUv;
	uniform mat3 uvTransform;
#endif
void main() {
	#ifdef USE_POINTS_UV
		vUv = ( uvTransform * vec3( uv, 1 ) ).xy;
	#endif
	#include <color_vertex>
	#include <morphinstance_vertex>
	#include <morphcolor_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <project_vertex>
	gl_PointSize = size;
	#ifdef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) gl_PointSize *= ( scale / - mvPosition.z );
	#endif
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <worldpos_vertex>
	#include <fog_vertex>
}`,wz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <color_pars_fragment>
#include <map_particle_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_particle_fragment>
	#include <color_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
	#include <premultiplied_alpha_fragment>
}`,Mz=`#include <common>
#include <batching_pars_vertex>
#include <fog_pars_vertex>
#include <morphtarget_pars_vertex>
#include <skinning_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <shadowmap_pars_vertex>
void main() {
	#include <batching_vertex>
	#include <beginnormal_vertex>
	#include <morphinstance_vertex>
	#include <morphnormal_vertex>
	#include <skinbase_vertex>
	#include <skinnormal_vertex>
	#include <defaultnormal_vertex>
	#include <begin_vertex>
	#include <morphtarget_vertex>
	#include <skinning_vertex>
	#include <project_vertex>
	#include <logdepthbuf_vertex>
	#include <worldpos_vertex>
	#include <shadowmap_vertex>
	#include <fog_vertex>
}`,Ez=`uniform vec3 color;
uniform float opacity;
#include <common>
#include <packing>
#include <fog_pars_fragment>
#include <bsdfs>
#include <lights_pars_begin>
#include <logdepthbuf_pars_fragment>
#include <shadowmap_pars_fragment>
#include <shadowmask_pars_fragment>
void main() {
	#include <logdepthbuf_fragment>
	gl_FragColor = vec4( color, opacity * ( 1.0 - getShadowMask() ) );
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Rz=`uniform float rotation;
uniform vec2 center;
#include <common>
#include <uv_pars_vertex>
#include <fog_pars_vertex>
#include <logdepthbuf_pars_vertex>
#include <clipping_planes_pars_vertex>
void main() {
	#include <uv_vertex>
	vec4 mvPosition = modelViewMatrix[ 3 ];
	vec2 scale = vec2( length( modelMatrix[ 0 ].xyz ), length( modelMatrix[ 1 ].xyz ) );
	#ifndef USE_SIZEATTENUATION
		bool isPerspective = isPerspectiveMatrix( projectionMatrix );
		if ( isPerspective ) scale *= - mvPosition.z;
	#endif
	vec2 alignedPosition = ( position.xy - ( center - vec2( 0.5 ) ) ) * scale;
	vec2 rotatedPosition;
	rotatedPosition.x = cos( rotation ) * alignedPosition.x - sin( rotation ) * alignedPosition.y;
	rotatedPosition.y = sin( rotation ) * alignedPosition.x + cos( rotation ) * alignedPosition.y;
	mvPosition.xy += rotatedPosition;
	gl_Position = projectionMatrix * mvPosition;
	#include <logdepthbuf_vertex>
	#include <clipping_planes_vertex>
	#include <fog_vertex>
}`,Cz=`uniform vec3 diffuse;
uniform float opacity;
#include <common>
#include <uv_pars_fragment>
#include <map_pars_fragment>
#include <alphamap_pars_fragment>
#include <alphatest_pars_fragment>
#include <alphahash_pars_fragment>
#include <fog_pars_fragment>
#include <logdepthbuf_pars_fragment>
#include <clipping_planes_pars_fragment>
void main() {
	vec4 diffuseColor = vec4( diffuse, opacity );
	#include <clipping_planes_fragment>
	vec3 outgoingLight = vec3( 0.0 );
	#include <logdepthbuf_fragment>
	#include <map_fragment>
	#include <alphamap_fragment>
	#include <alphatest_fragment>
	#include <alphahash_fragment>
	outgoingLight = diffuseColor.rgb;
	#include <opaque_fragment>
	#include <tonemapping_fragment>
	#include <colorspace_fragment>
	#include <fog_fragment>
}`,Wn={alphahash_fragment:KO,alphahash_pars_fragment:ZO,alphamap_fragment:JO,alphamap_pars_fragment:ek,alphatest_fragment:tk,alphatest_pars_fragment:nk,aomap_fragment:ik,aomap_pars_fragment:rk,batching_pars_vertex:sk,batching_vertex:ok,begin_vertex:ak,beginnormal_vertex:lk,bsdfs:uk,iridescence_fragment:ck,bumpmap_pars_fragment:hk,clipping_planes_fragment:fk,clipping_planes_pars_fragment:dk,clipping_planes_pars_vertex:Ak,clipping_planes_vertex:pk,color_fragment:mk,color_pars_fragment:gk,color_pars_vertex:yk,color_vertex:vk,common:_k,cube_uv_reflection_fragment:xk,defaultnormal_vertex:bk,displacementmap_pars_vertex:Sk,displacementmap_vertex:Tk,emissivemap_fragment:wk,emissivemap_pars_fragment:Mk,colorspace_fragment:Ek,colorspace_pars_fragment:Rk,envmap_fragment:Ck,envmap_common_pars_fragment:Pk,envmap_pars_fragment:Nk,envmap_pars_vertex:Ik,envmap_physical_pars_fragment:qk,envmap_vertex:Lk,fog_vertex:Dk,fog_pars_vertex:Bk,fog_fragment:Fk,fog_pars_fragment:Uk,gradientmap_pars_fragment:Ok,lightmap_pars_fragment:kk,lights_lambert_fragment:Vk,lights_lambert_pars_fragment:zk,lights_pars_begin:Gk,lights_toon_fragment:Hk,lights_toon_pars_fragment:Wk,lights_phong_fragment:jk,lights_phong_pars_fragment:$k,lights_physical_fragment:Xk,lights_physical_pars_fragment:Qk,lights_fragment_begin:Yk,lights_fragment_maps:Kk,lights_fragment_end:Zk,logdepthbuf_fragment:Jk,logdepthbuf_pars_fragment:eV,logdepthbuf_pars_vertex:tV,logdepthbuf_vertex:nV,map_fragment:iV,map_pars_fragment:rV,map_particle_fragment:sV,map_particle_pars_fragment:oV,metalnessmap_fragment:aV,metalnessmap_pars_fragment:lV,morphinstance_vertex:uV,morphcolor_vertex:cV,morphnormal_vertex:hV,morphtarget_pars_vertex:fV,morphtarget_vertex:dV,normal_fragment_begin:AV,normal_fragment_maps:pV,normal_pars_fragment:mV,normal_pars_vertex:gV,normal_vertex:yV,normalmap_pars_fragment:vV,clearcoat_normal_fragment_begin:_V,clearcoat_normal_fragment_maps:xV,clearcoat_pars_fragment:bV,iridescence_pars_fragment:SV,opaque_fragment:TV,packing:wV,premultiplied_alpha_fragment:MV,project_vertex:EV,dithering_fragment:RV,dithering_pars_fragment:CV,roughnessmap_fragment:PV,roughnessmap_pars_fragment:NV,shadowmap_pars_fragment:IV,shadowmap_pars_vertex:LV,shadowmap_vertex:DV,shadowmask_pars_fragment:BV,skinbase_vertex:FV,skinning_pars_vertex:UV,skinning_vertex:OV,skinnormal_vertex:kV,specularmap_fragment:VV,specularmap_pars_fragment:zV,tonemapping_fragment:GV,tonemapping_pars_fragment:qV,transmission_fragment:HV,transmission_pars_fragment:WV,uv_pars_fragment:jV,uv_pars_vertex:$V,uv_vertex:XV,worldpos_vertex:QV,background_vert:YV,background_frag:KV,backgroundCube_vert:ZV,backgroundCube_frag:JV,cube_vert:ez,cube_frag:tz,depth_vert:nz,depth_frag:iz,distanceRGBA_vert:rz,distanceRGBA_frag:sz,equirect_vert:oz,equirect_frag:az,linedashed_vert:lz,linedashed_frag:uz,meshbasic_vert:cz,meshbasic_frag:hz,meshlambert_vert:fz,meshlambert_frag:dz,meshmatcap_vert:Az,meshmatcap_frag:pz,meshnormal_vert:mz,meshnormal_frag:gz,meshphong_vert:yz,meshphong_frag:vz,meshphysical_vert:_z,meshphysical_frag:xz,meshtoon_vert:bz,meshtoon_frag:Sz,points_vert:Tz,points_frag:wz,shadow_vert:Mz,shadow_frag:Ez,sprite_vert:Rz,sprite_frag:Cz},Nt={common:{diffuse:{value:new Et(16777215)},opacity:{value:1},map:{value:null},mapTransform:{value:new Fn},alphaMap:{value:null},alphaMapTransform:{value:new Fn},alphaTest:{value:0}},specularmap:{specularMap:{value:null},specularMapTransform:{value:new Fn}},envmap:{envMap:{value:null},envMapRotation:{value:new Fn},flipEnvMap:{value:-1},reflectivity:{value:1},ior:{value:1.5},refractionRatio:{value:.98}},aomap:{aoMap:{value:null},aoMapIntensity:{value:1},aoMapTransform:{value:new Fn}},lightmap:{lightMap:{value:null},lightMapIntensity:{value:1},lightMapTransform:{value:new Fn}},bumpmap:{bumpMap:{value:null},bumpMapTransform:{value:new Fn},bumpScale:{value:1}},normalmap:{normalMap:{value:null},normalMapTransform:{value:new Fn},normalScale:{value:new Ge(1,1)}},displacementmap:{displacementMap:{value:null},displacementMapTransform:{value:new Fn},displacementScale:{value:1},displacementBias:{value:0}},emissivemap:{emissiveMap:{value:null},emissiveMapTransform:{value:new Fn}},metalnessmap:{metalnessMap:{value:null},metalnessMapTransform:{value:new Fn}},roughnessmap:{roughnessMap:{value:null},roughnessMapTransform:{value:new Fn}},gradientmap:{gradientMap:{value:null}},fog:{fogDensity:{value:25e-5},fogNear:{value:1},fogFar:{value:2e3},fogColor:{value:new Et(16777215)}},lights:{ambientLightColor:{value:[]},lightProbe:{value:[]},directionalLights:{value:[],properties:{direction:{},color:{}}},directionalLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},directionalShadowMap:{value:[]},directionalShadowMatrix:{value:[]},spotLights:{value:[],properties:{color:{},position:{},direction:{},distance:{},coneCos:{},penumbraCos:{},decay:{}}},spotLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{}}},spotLightMap:{value:[]},spotShadowMap:{value:[]},spotLightMatrix:{value:[]},pointLights:{value:[],properties:{color:{},position:{},decay:{},distance:{}}},pointLightShadows:{value:[],properties:{shadowIntensity:1,shadowBias:{},shadowNormalBias:{},shadowRadius:{},shadowMapSize:{},shadowCameraNear:{},shadowCameraFar:{}}},pointShadowMap:{value:[]},pointShadowMatrix:{value:[]},hemisphereLights:{value:[],properties:{direction:{},skyColor:{},groundColor:{}}},rectAreaLights:{value:[],properties:{color:{},position:{},width:{},height:{}}},ltc_1:{value:null},ltc_2:{value:null}},points:{diffuse:{value:new Et(16777215)},opacity:{value:1},size:{value:1},scale:{value:1},map:{value:null},alphaMap:{value:null},alphaMapTransform:{value:new Fn},alphaTest:{value:0},uvTransform:{value:new Fn}},sprite:{diffuse:{value:new Et(16777215)},opacity:{value:1},center:{value:new Ge(.5,.5)},rotation:{value:0},map:{value:null},mapTransform:{value:new Fn},alphaMap:{value:null},alphaMapTransform:{value:new Fn},alphaTest:{value:0}}},po={basic:{uniforms:ho([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.fog]),vertexShader:Wn.meshbasic_vert,fragmentShader:Wn.meshbasic_frag},lambert:{uniforms:ho([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Et(0)}}]),vertexShader:Wn.meshlambert_vert,fragmentShader:Wn.meshlambert_frag},phong:{uniforms:ho([Nt.common,Nt.specularmap,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,Nt.lights,{emissive:{value:new Et(0)},specular:{value:new Et(1118481)},shininess:{value:30}}]),vertexShader:Wn.meshphong_vert,fragmentShader:Wn.meshphong_frag},standard:{uniforms:ho([Nt.common,Nt.envmap,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.roughnessmap,Nt.metalnessmap,Nt.fog,Nt.lights,{emissive:{value:new Et(0)},roughness:{value:1},metalness:{value:0},envMapIntensity:{value:1}}]),vertexShader:Wn.meshphysical_vert,fragmentShader:Wn.meshphysical_frag},toon:{uniforms:ho([Nt.common,Nt.aomap,Nt.lightmap,Nt.emissivemap,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.gradientmap,Nt.fog,Nt.lights,{emissive:{value:new Et(0)}}]),vertexShader:Wn.meshtoon_vert,fragmentShader:Wn.meshtoon_frag},matcap:{uniforms:ho([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,Nt.fog,{matcap:{value:null}}]),vertexShader:Wn.meshmatcap_vert,fragmentShader:Wn.meshmatcap_frag},points:{uniforms:ho([Nt.points,Nt.fog]),vertexShader:Wn.points_vert,fragmentShader:Wn.points_frag},dashed:{uniforms:ho([Nt.common,Nt.fog,{scale:{value:1},dashSize:{value:1},totalSize:{value:2}}]),vertexShader:Wn.linedashed_vert,fragmentShader:Wn.linedashed_frag},depth:{uniforms:ho([Nt.common,Nt.displacementmap]),vertexShader:Wn.depth_vert,fragmentShader:Wn.depth_frag},normal:{uniforms:ho([Nt.common,Nt.bumpmap,Nt.normalmap,Nt.displacementmap,{opacity:{value:1}}]),vertexShader:Wn.meshnormal_vert,fragmentShader:Wn.meshnormal_frag},sprite:{uniforms:ho([Nt.sprite,Nt.fog]),vertexShader:Wn.sprite_vert,fragmentShader:Wn.sprite_frag},background:{uniforms:{uvTransform:{value:new Fn},t2D:{value:null},backgroundIntensity:{value:1}},vertexShader:Wn.background_vert,fragmentShader:Wn.background_frag},backgroundCube:{uniforms:{envMap:{value:null},flipEnvMap:{value:-1},backgroundBlurriness:{value:0},backgroundIntensity:{value:1},backgroundRotation:{value:new Fn}},vertexShader:Wn.backgroundCube_vert,fragmentShader:Wn.backgroundCube_frag},cube:{uniforms:{tCube:{value:null},tFlip:{value:-1},opacity:{value:1}},vertexShader:Wn.cube_vert,fragmentShader:Wn.cube_frag},equirect:{uniforms:{tEquirect:{value:null}},vertexShader:Wn.equirect_vert,fragmentShader:Wn.equirect_frag},distanceRGBA:{uniforms:ho([Nt.common,Nt.displacementmap,{referencePosition:{value:new J},nearDistance:{value:1},farDistance:{value:1e3}}]),vertexShader:Wn.distanceRGBA_vert,fragmentShader:Wn.distanceRGBA_frag},shadow:{uniforms:ho([Nt.lights,Nt.fog,{color:{value:new Et(0)},opacity:{value:1}}]),vertexShader:Wn.shadow_vert,fragmentShader:Wn.shadow_frag}};po.physical={uniforms:ho([po.standard.uniforms,{clearcoat:{value:0},clearcoatMap:{value:null},clearcoatMapTransform:{value:new Fn},clearcoatNormalMap:{value:null},clearcoatNormalMapTransform:{value:new Fn},clearcoatNormalScale:{value:new Ge(1,1)},clearcoatRoughness:{value:0},clearcoatRoughnessMap:{value:null},clearcoatRoughnessMapTransform:{value:new Fn},dispersion:{value:0},iridescence:{value:0},iridescenceMap:{value:null},iridescenceMapTransform:{value:new Fn},iridescenceIOR:{value:1.3},iridescenceThicknessMinimum:{value:100},iridescenceThicknessMaximum:{value:400},iridescenceThicknessMap:{value:null},iridescenceThicknessMapTransform:{value:new Fn},sheen:{value:0},sheenColor:{value:new Et(0)},sheenColorMap:{value:null},sheenColorMapTransform:{value:new Fn},sheenRoughness:{value:1},sheenRoughnessMap:{value:null},sheenRoughnessMapTransform:{value:new Fn},transmission:{value:0},transmissionMap:{value:null},transmissionMapTransform:{value:new Fn},transmissionSamplerSize:{value:new Ge},transmissionSamplerMap:{value:null},thickness:{value:0},thicknessMap:{value:null},thicknessMapTransform:{value:new Fn},attenuationDistance:{value:0},attenuationColor:{value:new Et(0)},specularColor:{value:new Et(1,1,1)},specularColorMap:{value:null},specularColorMapTransform:{value:new Fn},specularIntensity:{value:1},specularIntensityMap:{value:null},specularIntensityMapTransform:{value:new Fn},anisotropyVector:{value:new Ge},anisotropyMap:{value:null},anisotropyMapTransform:{value:new Fn}}]),vertexShader:Wn.meshphysical_vert,fragmentShader:Wn.meshphysical_frag};const H7={r:0,b:0,g:0},h2=new Ts,Pz=new Wt;function Nz(i,e,t,n,r,s,o){const a=new Et(0);let l=s===!0?0:1,u,c,A=null,m=0,_=null;function b(P){let I=P.isScene===!0?P.background:null;return I&&I.isTexture&&(I=(P.backgroundBlurriness>0?t:e).get(I)),I}function M(P){let I=!1;const B=b(P);B===null?T(a,l):B&&B.isColor&&(T(B,1),I=!0);const F=i.xr.getEnvironmentBlendMode();F==="additive"?n.buffers.color.setClear(0,0,0,1,o):F==="alpha-blend"&&n.buffers.color.setClear(0,0,0,0,o),(i.autoClear||I)&&(n.buffers.depth.setTest(!0),n.buffers.depth.setMask(!0),n.buffers.color.setMask(!0),i.clear(i.autoClearColor,i.autoClearDepth,i.autoClearStencil))}function w(P,I){const B=b(I);B&&(B.isCubeTexture||B.mapping===t1)?(c===void 0&&(c=new ei(new _l(1,1,1),new To({name:"BackgroundCubeMaterial",uniforms:H4(po.backgroundCube.uniforms),vertexShader:po.backgroundCube.vertexShader,fragmentShader:po.backgroundCube.fragmentShader,side:Bi,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),c.geometry.deleteAttribute("normal"),c.geometry.deleteAttribute("uv"),c.onBeforeRender=function(F,O,V){this.matrixWorld.copyPosition(V.matrixWorld)},Object.defineProperty(c.material,"envMap",{get:function(){return this.uniforms.envMap.value}}),r.update(c)),h2.copy(I.backgroundRotation),h2.x*=-1,h2.y*=-1,h2.z*=-1,B.isCubeTexture&&B.isRenderTargetTexture===!1&&(h2.y*=-1,h2.z*=-1),c.material.uniforms.envMap.value=B,c.material.uniforms.flipEnvMap.value=B.isCubeTexture&&B.isRenderTargetTexture===!1?-1:1,c.material.uniforms.backgroundBlurriness.value=I.backgroundBlurriness,c.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,c.material.uniforms.backgroundRotation.value.setFromMatrix4(Pz.makeRotationFromEuler(h2)),c.material.toneMapped=Sn.getTransfer(B.colorSpace)!==qt,(A!==B||m!==B.version||_!==i.toneMapping)&&(c.material.needsUpdate=!0,A=B,m=B.version,_=i.toneMapping),c.layers.enableAll(),P.unshift(c,c.geometry,c.material,0,0,null)):B&&B.isTexture&&(u===void 0&&(u=new ei(new Pc(2,2),new To({name:"BackgroundMaterial",uniforms:H4(po.background.uniforms),vertexShader:po.background.vertexShader,fragmentShader:po.background.fragmentShader,side:So,depthTest:!1,depthWrite:!1,fog:!1,allowOverride:!1})),u.geometry.deleteAttribute("normal"),Object.defineProperty(u.material,"map",{get:function(){return this.uniforms.t2D.value}}),r.update(u)),u.material.uniforms.t2D.value=B,u.material.uniforms.backgroundIntensity.value=I.backgroundIntensity,u.material.toneMapped=Sn.getTransfer(B.colorSpace)!==qt,B.matrixAutoUpdate===!0&&B.updateMatrix(),u.material.uniforms.uvTransform.value.copy(B.matrix),(A!==B||m!==B.version||_!==i.toneMapping)&&(u.material.needsUpdate=!0,A=B,m=B.version,_=i.toneMapping),u.layers.enableAll(),P.unshift(u,u.geometry,u.material,0,0,null))}function T(P,I){P.getRGB(H7,wE(i)),n.buffers.color.setClear(H7.r,H7.g,H7.b,I,o)}function N(){c!==void 0&&(c.geometry.dispose(),c.material.dispose(),c=void 0),u!==void 0&&(u.geometry.dispose(),u.material.dispose(),u=void 0)}return{getClearColor:function(){return a},setClearColor:function(P,I=1){a.set(P),l=I,T(a,l)},getClearAlpha:function(){return l},setClearAlpha:function(P){l=P,T(a,l)},render:M,addToRenderList:w,dispose:N}}function Iz(i,e){const t=i.getParameter(i.MAX_VERTEX_ATTRIBS),n={},r=m(null);let s=r,o=!1;function a(z,H,Q,Y,ne){let ee=!1;const se=A(Y,Q,H);s!==se&&(s=se,u(s.object)),ee=_(z,Y,Q,ne),ee&&b(z,Y,Q,ne),ne!==null&&e.update(ne,i.ELEMENT_ARRAY_BUFFER),(ee||o)&&(o=!1,I(z,H,Q,Y),ne!==null&&i.bindBuffer(i.ELEMENT_ARRAY_BUFFER,e.get(ne).buffer))}function l(){return i.createVertexArray()}function u(z){return i.bindVertexArray(z)}function c(z){return i.deleteVertexArray(z)}function A(z,H,Q){const Y=Q.wireframe===!0;let ne=n[z.id];ne===void 0&&(ne={},n[z.id]=ne);let ee=ne[H.id];ee===void 0&&(ee={},ne[H.id]=ee);let se=ee[Y];return se===void 0&&(se=m(l()),ee[Y]=se),se}function m(z){const H=[],Q=[],Y=[];for(let ne=0;ne<t;ne++)H[ne]=0,Q[ne]=0,Y[ne]=0;return{geometry:null,program:null,wireframe:!1,newAttributes:H,enabledAttributes:Q,attributeDivisors:Y,object:z,attributes:{},index:null}}function _(z,H,Q,Y){const ne=s.attributes,ee=H.attributes;let se=0;const pe=Q.getAttributes();for(const re in pe)if(pe[re].location>=0){const ye=ne[re];let Pe=ee[re];if(Pe===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(Pe=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(Pe=z.instanceColor)),ye===void 0||ye.attribute!==Pe||Pe&&ye.data!==Pe.data)return!0;se++}return s.attributesNum!==se||s.index!==Y}function b(z,H,Q,Y){const ne={},ee=H.attributes;let se=0;const pe=Q.getAttributes();for(const re in pe)if(pe[re].location>=0){let ye=ee[re];ye===void 0&&(re==="instanceMatrix"&&z.instanceMatrix&&(ye=z.instanceMatrix),re==="instanceColor"&&z.instanceColor&&(ye=z.instanceColor));const Pe={};Pe.attribute=ye,ye&&ye.data&&(Pe.data=ye.data),ne[re]=Pe,se++}s.attributes=ne,s.attributesNum=se,s.index=Y}function M(){const z=s.newAttributes;for(let H=0,Q=z.length;H<Q;H++)z[H]=0}function w(z){T(z,0)}function T(z,H){const Q=s.newAttributes,Y=s.enabledAttributes,ne=s.attributeDivisors;Q[z]=1,Y[z]===0&&(i.enableVertexAttribArray(z),Y[z]=1),ne[z]!==H&&(i.vertexAttribDivisor(z,H),ne[z]=H)}function N(){const z=s.newAttributes,H=s.enabledAttributes;for(let Q=0,Y=H.length;Q<Y;Q++)H[Q]!==z[Q]&&(i.disableVertexAttribArray(Q),H[Q]=0)}function P(z,H,Q,Y,ne,ee,se){se===!0?i.vertexAttribIPointer(z,H,Q,ne,ee):i.vertexAttribPointer(z,H,Q,Y,ne,ee)}function I(z,H,Q,Y){M();const ne=Y.attributes,ee=Q.getAttributes(),se=H.defaultAttributeValues;for(const pe in ee){const re=ee[pe];if(re.location>=0){let de=ne[pe];if(de===void 0&&(pe==="instanceMatrix"&&z.instanceMatrix&&(de=z.instanceMatrix),pe==="instanceColor"&&z.instanceColor&&(de=z.instanceColor)),de!==void 0){const ye=de.normalized,Pe=de.itemSize,Qe=e.get(de);if(Qe===void 0)continue;const et=Qe.buffer,Pt=Qe.type,Ne=Qe.bytesPerElement,nt=Pt===i.INT||Pt===i.UNSIGNED_INT||de.gpuType===as;if(de.isInterleavedBufferAttribute){const tt=de.data,Dt=tt.stride,Rt=de.offset;if(tt.isInstancedInterleavedBuffer){for(let It=0;It<re.locationSize;It++)T(re.location+It,tt.meshPerAttribute);z.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=tt.meshPerAttribute*tt.count)}else for(let It=0;It<re.locationSize;It++)w(re.location+It);i.bindBuffer(i.ARRAY_BUFFER,et);for(let It=0;It<re.locationSize;It++)P(re.location+It,Pe/re.locationSize,Pt,ye,Dt*Ne,(Rt+Pe/re.locationSize*It)*Ne,nt)}else{if(de.isInstancedBufferAttribute){for(let tt=0;tt<re.locationSize;tt++)T(re.location+tt,de.meshPerAttribute);z.isInstancedMesh!==!0&&Y._maxInstanceCount===void 0&&(Y._maxInstanceCount=de.meshPerAttribute*de.count)}else for(let tt=0;tt<re.locationSize;tt++)w(re.location+tt);i.bindBuffer(i.ARRAY_BUFFER,et);for(let tt=0;tt<re.locationSize;tt++)P(re.location+tt,Pe/re.locationSize,Pt,ye,Pe*Ne,Pe/re.locationSize*tt*Ne,nt)}}else if(se!==void 0){const ye=se[pe];if(ye!==void 0)switch(ye.length){case 2:i.vertexAttrib2fv(re.location,ye);break;case 3:i.vertexAttrib3fv(re.location,ye);break;case 4:i.vertexAttrib4fv(re.location,ye);break;default:i.vertexAttrib1fv(re.location,ye)}}}}N()}function B(){V();for(const z in n){const H=n[z];for(const Q in H){const Y=H[Q];for(const ne in Y)c(Y[ne].object),delete Y[ne];delete H[Q]}delete n[z]}}function F(z){if(n[z.id]===void 0)return;const H=n[z.id];for(const Q in H){const Y=H[Q];for(const ne in Y)c(Y[ne].object),delete Y[ne];delete H[Q]}delete n[z.id]}function O(z){for(const H in n){const Q=n[H];if(Q[z.id]===void 0)continue;const Y=Q[z.id];for(const ne in Y)c(Y[ne].object),delete Y[ne];delete Q[z.id]}}function V(){U(),o=!0,s!==r&&(s=r,u(s.object))}function U(){r.geometry=null,r.program=null,r.wireframe=!1}return{setup:a,reset:V,resetDefaultState:U,dispose:B,releaseStatesOfGeometry:F,releaseStatesOfProgram:O,initAttributes:M,enableAttribute:w,disableUnusedAttributes:N}}function Lz(i,e,t){let n;function r(u){n=u}function s(u,c){i.drawArrays(n,u,c),t.update(c,n,1)}function o(u,c,A){A!==0&&(i.drawArraysInstanced(n,u,c,A),t.update(c,n,A))}function a(u,c,A){if(A===0)return;e.get("WEBGL_multi_draw").multiDrawArraysWEBGL(n,u,0,c,0,A);let _=0;for(let b=0;b<A;b++)_+=c[b];t.update(_,n,1)}function l(u,c,A,m){if(A===0)return;const _=e.get("WEBGL_multi_draw");if(_===null)for(let b=0;b<u.length;b++)o(u[b],c[b],m[b]);else{_.multiDrawArraysInstancedWEBGL(n,u,0,c,0,m,0,A);let b=0;for(let M=0;M<A;M++)b+=c[M]*m[M];t.update(b,n,1)}}this.setMode=r,this.render=s,this.renderInstances=o,this.renderMultiDraw=a,this.renderMultiDrawInstances=l}function Dz(i,e,t,n){let r;function s(){if(r!==void 0)return r;if(e.has("EXT_texture_filter_anisotropic")===!0){const O=e.get("EXT_texture_filter_anisotropic");r=i.getParameter(O.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else r=0;return r}function o(O){return!(O!==Zi&&n.convert(O)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_FORMAT))}function a(O){const V=O===Yr&&(e.has("EXT_color_buffer_half_float")||e.has("EXT_color_buffer_float"));return!(O!==ar&&n.convert(O)!==i.getParameter(i.IMPLEMENTATION_COLOR_READ_TYPE)&&O!==nr&&!V)}function l(O){if(O==="highp"){if(i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.HIGH_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.HIGH_FLOAT).precision>0)return"highp";O="mediump"}return O==="mediump"&&i.getShaderPrecisionFormat(i.VERTEX_SHADER,i.MEDIUM_FLOAT).precision>0&&i.getShaderPrecisionFormat(i.FRAGMENT_SHADER,i.MEDIUM_FLOAT).precision>0?"mediump":"lowp"}let u=t.precision!==void 0?t.precision:"highp";const c=l(u);c!==u&&(console.warn("THREE.WebGLRenderer:",u,"not supported, using",c,"instead."),u=c);const A=t.logarithmicDepthBuffer===!0,m=t.reversedDepthBuffer===!0&&e.has("EXT_clip_control"),_=i.getParameter(i.MAX_TEXTURE_IMAGE_UNITS),b=i.getParameter(i.MAX_VERTEX_TEXTURE_IMAGE_UNITS),M=i.getParameter(i.MAX_TEXTURE_SIZE),w=i.getParameter(i.MAX_CUBE_MAP_TEXTURE_SIZE),T=i.getParameter(i.MAX_VERTEX_ATTRIBS),N=i.getParameter(i.MAX_VERTEX_UNIFORM_VECTORS),P=i.getParameter(i.MAX_VARYING_VECTORS),I=i.getParameter(i.MAX_FRAGMENT_UNIFORM_VECTORS),B=b>0,F=i.getParameter(i.MAX_SAMPLES);return{isWebGL2:!0,getMaxAnisotropy:s,getMaxPrecision:l,textureFormatReadable:o,textureTypeReadable:a,precision:u,logarithmicDepthBuffer:A,reversedDepthBuffer:m,maxTextures:_,maxVertexTextures:b,maxTextureSize:M,maxCubemapSize:w,maxAttributes:T,maxVertexUniforms:N,maxVaryings:P,maxFragmentUniforms:I,vertexTextures:B,maxSamples:F}}function Bz(i){const e=this;let t=null,n=0,r=!1,s=!1;const o=new M0,a=new Fn,l={value:null,needsUpdate:!1};this.uniform=l,this.numPlanes=0,this.numIntersection=0,this.init=function(A,m){const _=A.length!==0||m||n!==0||r;return r=m,n=A.length,_},this.beginShadows=function(){s=!0,c(null)},this.endShadows=function(){s=!1},this.setGlobalState=function(A,m){t=c(A,m,0)},this.setState=function(A,m,_){const b=A.clippingPlanes,M=A.clipIntersection,w=A.clipShadows,T=i.get(A);if(!r||b===null||b.length===0||s&&!w)s?c(null):u();else{const N=s?0:n,P=N*4;let I=T.clippingState||null;l.value=I,I=c(b,m,P,_);for(let B=0;B!==P;++B)I[B]=t[B];T.clippingState=I,this.numIntersection=M?this.numPlanes:0,this.numPlanes+=N}};function u(){l.value!==t&&(l.value=t,l.needsUpdate=n>0),e.numPlanes=n,e.numIntersection=0}function c(A,m,_,b){const M=A!==null?A.length:0;let w=null;if(M!==0){if(w=l.value,b!==!0||w===null){const T=_+M*4,N=m.matrixWorldInverse;a.getNormalMatrix(N),(w===null||w.length<T)&&(w=new Float32Array(T));for(let P=0,I=_;P!==M;++P,I+=4)o.copy(A[P]).applyMatrix4(N,a),o.normal.toArray(w,I),w[I+3]=o.constant}l.value=w,l.needsUpdate=!0}return e.numPlanes=M,e.numIntersection=0,w}}function Fz(i){let e=new WeakMap;function t(o,a){return a===fu?o.mapping=_a:a===du&&(o.mapping=Xa),o}function n(o){if(o&&o.isTexture){const a=o.mapping;if(a===fu||a===du)if(e.has(o)){const l=e.get(o).texture;return t(l,o.mapping)}else{const l=o.image;if(l&&l.height>0){const u=new av(l.height);return u.fromEquirectangularTexture(i,o),e.set(o,u),o.addEventListener("dispose",r),t(u.texture,o.mapping)}else return null}}return o}function r(o){const a=o.target;a.removeEventListener("dispose",r);const l=e.get(a);l!==void 0&&(e.delete(a),l.dispose())}function s(){e=new WeakMap}return{get:n,dispose:s}}const l4=4,iS=[.125,.215,.35,.446,.526,.582],R2=20,Xp=new rl,rS=new Et;let Qp=null,Yp=0,Kp=0,Zp=!1;const w2=(1+Math.sqrt(5))/2,U3=1/w2,sS=[new J(-w2,U3,0),new J(w2,U3,0),new J(-U3,0,w2),new J(U3,0,w2),new J(0,w2,-U3),new J(0,w2,U3),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)],Uz=new J;let Sg=class{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._compileMaterial(this._blurMaterial)}fromScene(e,t=0,n=.1,r=100,s={}){const{size:o=256,position:a=Uz}=s;Qp=this._renderer.getRenderTarget(),Yp=this._renderer.getActiveCubeFace(),Kp=this._renderer.getActiveMipmapLevel(),Zp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1,this._setSize(o);const l=this._allocateTargets();return l.depthBuffer=!0,this._sceneToCubeUV(e,n,r,l,a),t>0&&this._blur(l,0,0,t),this._applyPMREM(l),this._cleanup(l),l}fromEquirectangular(e,t=null){return this._fromTexture(e,t)}fromCubemap(e,t=null){return this._fromTexture(e,t)}compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=lS(),this._compileMaterial(this._cubemapMaterial))}compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=aS(),this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose()}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Qp,Yp,Kp),this._renderer.xr.enabled=Zp,e.scissorTest=!1,W7(e,0,0,e.width,e.height)}_fromTexture(e,t){e.mapping===_a||e.mapping===Xa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4),Qp=this._renderer.getRenderTarget(),Yp=this._renderer.getActiveCubeFace(),Kp=this._renderer.getActiveMipmapLevel(),Zp=this._renderer.xr.enabled,this._renderer.xr.enabled=!1;const n=t||this._allocateTargets();return this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTargets(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize,n={magFilter:Wi,minFilter:Wi,generateMipmaps:!1,type:Yr,format:Zi,colorSpace:r1,depthBuffer:!1},r=oS(e,t,n);if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e||this._pingPongRenderTarget.height!==t){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=oS(e,t,n);const{_lodMax:s}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas}=Oz(s)),this._blurMaterial=kz(s,e,t)}return r}_compileMaterial(e){const t=new ei(this._lodPlanes[0],e);this._renderer.compile(t,Xp)}_sceneToCubeUV(e,t,n,r,s){const l=new tr(90,1,t,n),u=[1,-1,1,1,1,1],c=[1,1,1,-1,-1,-1],A=this._renderer,m=A.autoClear,_=A.toneMapping;A.getClearColor(rS),A.toneMapping=eo,A.autoClear=!1,A.state.buffers.depth.getReversed()&&(A.setRenderTarget(r),A.clearDepth(),A.setRenderTarget(null));const M=new Bs({name:"PMREM.Background",side:Bi,depthWrite:!1,depthTest:!1}),w=new ei(new _l,M);let T=!1;const N=e.background;N?N.isColor&&(M.color.copy(N),e.background=null,T=!0):(M.color.copy(rS),T=!0);for(let P=0;P<6;P++){const I=P%3;I===0?(l.up.set(0,u[P],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x+c[P],s.y,s.z)):I===1?(l.up.set(0,0,u[P]),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y+c[P],s.z)):(l.up.set(0,u[P],0),l.position.set(s.x,s.y,s.z),l.lookAt(s.x,s.y,s.z+c[P]));const B=this._cubeSize;W7(r,I*B,P>2?B:0,B,B),A.setRenderTarget(r),T&&A.render(w,l),A.render(e,l)}w.geometry.dispose(),w.material.dispose(),A.toneMapping=_,A.autoClear=m,e.background=N}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===_a||e.mapping===Xa;r?(this._cubemapMaterial===null&&(this._cubemapMaterial=lS()),this._cubemapMaterial.uniforms.flipEnvMap.value=e.isRenderTargetTexture===!1?-1:1):this._equirectMaterial===null&&(this._equirectMaterial=aS());const s=r?this._cubemapMaterial:this._equirectMaterial,o=new ei(this._lodPlanes[0],s),a=s.uniforms;a.envMap.value=e;const l=this._cubeSize;W7(t,0,0,3*l,2*l),n.setRenderTarget(t),n.render(o,Xp)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=sS[(r-s-1)%sS.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,A=new ei(this._lodPlanes[r],u),m=u.uniforms,_=this._sizeLods[n]-1,b=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*R2-1),M=s/b,w=isFinite(s)?1+Math.floor(c*M):R2;w>R2&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${R2}`);const T=[];let N=0;for(let O=0;O<R2;++O){const V=O/M,U=Math.exp(-V*V/2);T.push(U),O===0?N+=U:O<w&&(N+=2*U)}for(let O=0;O<T.length;O++)T[O]=T[O]/N;m.envMap.value=e.texture,m.samples.value=w,m.weights.value=T,m.latitudinal.value=o==="latitudinal",a&&(m.poleAxis.value=a);const{_lodMax:P}=this;m.dTheta.value=b,m.mipInt.value=P-n;const I=this._sizeLods[r],B=3*I*(r>P-l4?r-P+l4:0),F=4*(this._cubeSize-I);W7(t,B,F,3*I,2*I),l.setRenderTarget(t),l.render(A,Xp)}};function Oz(i){const e=[],t=[],n=[];let r=i;const s=i-l4+1+iS.length;for(let o=0;o<s;o++){const a=Math.pow(2,r);t.push(a);let l=1/a;o>i-l4?l=iS[o-i+l4-1]:o===0&&(l=0),n.push(l);const u=1/(a-2),c=-u,A=1+u,m=[c,c,A,c,A,A,c,c,A,A,c,A],_=6,b=6,M=3,w=2,T=1,N=new Float32Array(M*b*_),P=new Float32Array(w*b*_),I=new Float32Array(T*b*_);for(let F=0;F<_;F++){const O=F%3*2/3-1,V=F>2?0:-1,U=[O,V,0,O+2/3,V,0,O+2/3,V+1,0,O,V,0,O+2/3,V+1,0,O,V+1,0];N.set(U,M*b*F),P.set(m,w*b*F);const z=[F,F,F,F,F,F];I.set(z,T*b*F)}const B=new Tn;B.setAttribute("position",new oi(N,M)),B.setAttribute("uv",new oi(P,w)),B.setAttribute("faceIndex",new oi(I,T)),e.push(B),r>l4&&r--}return{lodPlanes:e,sizeLods:t,sigmas:n}}function oS(i,e,t){const n=new dl(i,e,t);return n.texture.mapping=t1,n.texture.name="PMREM.cubeUv",n.scissorTest=!0,n}function W7(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function kz(i,e,t){const n=new Float32Array(R2),r=new J(0,1,0);return new To({name:"SphericalGaussianBlur",defines:{n:R2,CUBEUV_TEXEL_WIDTH:1/e,CUBEUV_TEXEL_HEIGHT:1/t,CUBEUV_MAX_MIP:`${i}.0`},uniforms:{envMap:{value:null},samples:{value:1},weights:{value:n},latitudinal:{value:!1},dTheta:{value:0},mipInt:{value:0},poleAxis:{value:r}},vertexShader:Wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;
			uniform int samples;
			uniform float weights[ n ];
			uniform bool latitudinal;
			uniform float dTheta;
			uniform float mipInt;
			uniform vec3 poleAxis;

			#define ENVMAP_TYPE_CUBE_UV
			#include <cube_uv_reflection_fragment>

			vec3 getSample( float theta, vec3 axis ) {

				float cosTheta = cos( theta );
				// Rodrigues' axis-angle rotation
				vec3 sampleDirection = vOutputDirection * cosTheta
					+ cross( axis, vOutputDirection ) * sin( theta )
					+ axis * dot( axis, vOutputDirection ) * ( 1.0 - cosTheta );

				return bilinearCubeUV( envMap, sampleDirection, mipInt );

			}

			void main() {

				vec3 axis = latitudinal ? poleAxis : cross( poleAxis, vOutputDirection );

				if ( all( equal( axis, vec3( 0.0 ) ) ) ) {

					axis = vec3( vOutputDirection.z, 0.0, - vOutputDirection.x );

				}

				axis = normalize( axis );

				gl_FragColor = vec4( 0.0, 0.0, 0.0, 1.0 );
				gl_FragColor.rgb += weights[ 0 ] * getSample( 0.0, axis );

				for ( int i = 1; i < n; i++ ) {

					if ( i >= samples ) {

						break;

					}

					float theta = dTheta * float( i );
					gl_FragColor.rgb += weights[ i ] * getSample( -1.0 * theta, axis );
					gl_FragColor.rgb += weights[ i ] * getSample( theta, axis );

				}

			}
		`,blending:qo,depthTest:!1,depthWrite:!1})}function aS(){return new To({name:"EquirectangularToCubeUV",uniforms:{envMap:{value:null}},vertexShader:Wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			varying vec3 vOutputDirection;

			uniform sampler2D envMap;

			#include <common>

			void main() {

				vec3 outputDirection = normalize( vOutputDirection );
				vec2 uv = equirectUv( outputDirection );

				gl_FragColor = vec4( texture2D ( envMap, uv ).rgb, 1.0 );

			}
		`,blending:qo,depthTest:!1,depthWrite:!1})}function lS(){return new To({name:"CubemapToCubeUV",uniforms:{envMap:{value:null},flipEnvMap:{value:-1}},vertexShader:Wv(),fragmentShader:`

			precision mediump float;
			precision mediump int;

			uniform float flipEnvMap;

			varying vec3 vOutputDirection;

			uniform samplerCube envMap;

			void main() {

				gl_FragColor = textureCube( envMap, vec3( flipEnvMap * vOutputDirection.x, vOutputDirection.yz ) );

			}
		`,blending:qo,depthTest:!1,depthWrite:!1})}function Wv(){return`

		precision mediump float;
		precision mediump int;

		attribute float faceIndex;

		varying vec3 vOutputDirection;

		// RH coordinate system; PMREM face-indexing convention
		vec3 getDirection( vec2 uv, float face ) {

			uv = 2.0 * uv - 1.0;

			vec3 direction = vec3( uv, 1.0 );

			if ( face == 0.0 ) {

				direction = direction.zyx; // ( 1, v, u ) pos x

			} else if ( face == 1.0 ) {

				direction = direction.xzy;
				direction.xz *= -1.0; // ( -u, 1, -v ) pos y

			} else if ( face == 2.0 ) {

				direction.x *= -1.0; // ( -u, v, 1 ) pos z

			} else if ( face == 3.0 ) {

				direction = direction.zyx;
				direction.xz *= -1.0; // ( -1, v, -u ) neg x

			} else if ( face == 4.0 ) {

				direction = direction.xzy;
				direction.xy *= -1.0; // ( -u, -1, v ) neg y

			} else if ( face == 5.0 ) {

				direction.z *= -1.0; // ( u, v, -1 ) neg z

			}

			return direction;

		}

		void main() {

			vOutputDirection = getDirection( uv, faceIndex );
			gl_Position = vec4( position, 1.0 );

		}
	`}function Vz(i){let e=new WeakMap,t=null;function n(a){if(a&&a.isTexture){const l=a.mapping,u=l===fu||l===du,c=l===_a||l===Xa;if(u||c){let A=e.get(a);const m=A!==void 0?A.texture.pmremVersion:0;if(a.isRenderTargetTexture&&a.pmremVersion!==m)return t===null&&(t=new Sg(i)),A=u?t.fromEquirectangular(a,A):t.fromCubemap(a,A),A.texture.pmremVersion=a.pmremVersion,e.set(a,A),A.texture;if(A!==void 0)return A.texture;{const _=a.image;return u&&_&&_.height>0||c&&_&&r(_)?(t===null&&(t=new Sg(i)),A=u?t.fromEquirectangular(a):t.fromCubemap(a),A.texture.pmremVersion=a.pmremVersion,e.set(a,A),a.addEventListener("dispose",s),A.texture):null}}}return a}function r(a){let l=0;const u=6;for(let c=0;c<u;c++)a[c]!==void 0&&l++;return l===u}function s(a){const l=a.target;l.removeEventListener("dispose",s);const u=e.get(l);u!==void 0&&(e.delete(l),u.dispose())}function o(){e=new WeakMap,t!==null&&(t.dispose(),t=null)}return{get:n,dispose:o}}function zz(i){const e={};function t(n){if(e[n]!==void 0)return e[n];let r;switch(n){case"WEBGL_depth_texture":r=i.getExtension("WEBGL_depth_texture")||i.getExtension("MOZ_WEBGL_depth_texture")||i.getExtension("WEBKIT_WEBGL_depth_texture");break;case"EXT_texture_filter_anisotropic":r=i.getExtension("EXT_texture_filter_anisotropic")||i.getExtension("MOZ_EXT_texture_filter_anisotropic")||i.getExtension("WEBKIT_EXT_texture_filter_anisotropic");break;case"WEBGL_compressed_texture_s3tc":r=i.getExtension("WEBGL_compressed_texture_s3tc")||i.getExtension("MOZ_WEBGL_compressed_texture_s3tc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_s3tc");break;case"WEBGL_compressed_texture_pvrtc":r=i.getExtension("WEBGL_compressed_texture_pvrtc")||i.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc");break;default:r=i.getExtension(n)}return e[n]=r,r}return{has:function(n){return t(n)!==null},init:function(){t("EXT_color_buffer_float"),t("WEBGL_clip_cull_distance"),t("OES_texture_float_linear"),t("EXT_color_buffer_half_float"),t("WEBGL_multisampled_render_to_texture"),t("WEBGL_render_shared_exponent")},get:function(n){const r=t(n);return r===null&&$o("THREE.WebGLRenderer: "+n+" extension not supported."),r}}}function Gz(i,e,t,n){const r={},s=new WeakMap;function o(A){const m=A.target;m.index!==null&&e.remove(m.index);for(const b in m.attributes)e.remove(m.attributes[b]);m.removeEventListener("dispose",o),delete r[m.id];const _=s.get(m);_&&(e.remove(_),s.delete(m)),n.releaseStatesOfGeometry(m),m.isInstancedBufferGeometry===!0&&delete m._maxInstanceCount,t.memory.geometries--}function a(A,m){return r[m.id]===!0||(m.addEventListener("dispose",o),r[m.id]=!0,t.memory.geometries++),m}function l(A){const m=A.attributes;for(const _ in m)e.update(m[_],i.ARRAY_BUFFER)}function u(A){const m=[],_=A.index,b=A.attributes.position;let M=0;if(_!==null){const N=_.array;M=_.version;for(let P=0,I=N.length;P<I;P+=3){const B=N[P+0],F=N[P+1],O=N[P+2];m.push(B,F,F,O,O,B)}}else if(b!==void 0){const N=b.array;M=b.version;for(let P=0,I=N.length/3-1;P<I;P+=3){const B=P+0,F=P+1,O=P+2;m.push(B,F,F,O,O,B)}}else return;const w=new(iv(m)?N9:P9)(m,1);w.version=M;const T=s.get(A);T&&e.remove(T),s.set(A,w)}function c(A){const m=s.get(A);if(m){const _=A.index;_!==null&&m.version<_.version&&u(A)}else u(A);return s.get(A)}return{get:a,update:l,getWireframeAttribute:c}}function qz(i,e,t){let n;function r(m){n=m}let s,o;function a(m){s=m.type,o=m.bytesPerElement}function l(m,_){i.drawElements(n,_,s,m*o),t.update(_,n,1)}function u(m,_,b){b!==0&&(i.drawElementsInstanced(n,_,s,m*o,b),t.update(_,n,b))}function c(m,_,b){if(b===0)return;e.get("WEBGL_multi_draw").multiDrawElementsWEBGL(n,_,0,s,m,0,b);let w=0;for(let T=0;T<b;T++)w+=_[T];t.update(w,n,1)}function A(m,_,b,M){if(b===0)return;const w=e.get("WEBGL_multi_draw");if(w===null)for(let T=0;T<m.length;T++)u(m[T]/o,_[T],M[T]);else{w.multiDrawElementsInstancedWEBGL(n,_,0,s,m,0,M,0,b);let T=0;for(let N=0;N<b;N++)T+=_[N]*M[N];t.update(T,n,1)}}this.setMode=r,this.setIndex=a,this.render=l,this.renderInstances=u,this.renderMultiDraw=c,this.renderMultiDrawInstances=A}function Hz(i){const e={geometries:0,textures:0},t={frame:0,calls:0,triangles:0,points:0,lines:0};function n(s,o,a){switch(t.calls++,o){case i.TRIANGLES:t.triangles+=a*(s/3);break;case i.LINES:t.lines+=a*(s/2);break;case i.LINE_STRIP:t.lines+=a*(s-1);break;case i.LINE_LOOP:t.lines+=a*s;break;case i.POINTS:t.points+=a*s;break;default:console.error("THREE.WebGLInfo: Unknown draw mode:",o);break}}function r(){t.calls=0,t.triangles=0,t.points=0,t.lines=0}return{memory:e,render:t,programs:null,autoReset:!0,reset:r,update:n}}function Wz(i,e,t){const n=new WeakMap,r=new rn;function s(o,a,l){const u=o.morphTargetInfluences,c=a.morphAttributes.position||a.morphAttributes.normal||a.morphAttributes.color,A=c!==void 0?c.length:0;let m=n.get(a);if(m===void 0||m.count!==A){let U=function(){O.dispose(),n.delete(a),a.removeEventListener("dispose",U)};m!==void 0&&m.texture.dispose();const _=a.morphAttributes.position!==void 0,b=a.morphAttributes.normal!==void 0,M=a.morphAttributes.color!==void 0,w=a.morphAttributes.position||[],T=a.morphAttributes.normal||[],N=a.morphAttributes.color||[];let P=0;_===!0&&(P=1),b===!0&&(P=2),M===!0&&(P=3);let I=a.attributes.position.count*P,B=1;I>e.maxTextureSize&&(B=Math.ceil(I/e.maxTextureSize),I=e.maxTextureSize);const F=new Float32Array(I*B*4*A),O=new j8(F,I,B,A);O.type=nr,O.needsUpdate=!0;const V=P*4;for(let z=0;z<A;z++){const H=w[z],Q=T[z],Y=N[z],ne=I*B*4*z;for(let ee=0;ee<H.count;ee++){const se=ee*V;_===!0&&(r.fromBufferAttribute(H,ee),F[ne+se+0]=r.x,F[ne+se+1]=r.y,F[ne+se+2]=r.z,F[ne+se+3]=0),b===!0&&(r.fromBufferAttribute(Q,ee),F[ne+se+4]=r.x,F[ne+se+5]=r.y,F[ne+se+6]=r.z,F[ne+se+7]=0),M===!0&&(r.fromBufferAttribute(Y,ee),F[ne+se+8]=r.x,F[ne+se+9]=r.y,F[ne+se+10]=r.z,F[ne+se+11]=Y.itemSize===4?r.w:1)}}m={count:A,texture:O,size:new Ge(I,B)},n.set(a,m),a.addEventListener("dispose",U)}if(o.isInstancedMesh===!0&&o.morphTexture!==null)l.getUniforms().setValue(i,"morphTexture",o.morphTexture,t);else{let _=0;for(let M=0;M<u.length;M++)_+=u[M];const b=a.morphTargetsRelative?1:1-_;l.getUniforms().setValue(i,"morphTargetBaseInfluence",b),l.getUniforms().setValue(i,"morphTargetInfluences",u)}l.getUniforms().setValue(i,"morphTargetsTexture",m.texture,t),l.getUniforms().setValue(i,"morphTargetsTextureSize",m.size)}return{update:s}}function jz(i,e,t,n){let r=new WeakMap;function s(l){const u=n.render.frame,c=l.geometry,A=e.get(l,c);if(r.get(A)!==u&&(e.update(A),r.set(A,u)),l.isInstancedMesh&&(l.hasEventListener("dispose",a)===!1&&l.addEventListener("dispose",a),r.get(l)!==u&&(t.update(l.instanceMatrix,i.ARRAY_BUFFER),l.instanceColor!==null&&t.update(l.instanceColor,i.ARRAY_BUFFER),r.set(l,u))),l.isSkinnedMesh){const m=l.skeleton;r.get(m)!==u&&(m.update(),r.set(m,u))}return A}function o(){r=new WeakMap}function a(l){const u=l.target;u.removeEventListener("dispose",a),t.remove(u.instanceMatrix),u.instanceColor!==null&&t.remove(u.instanceColor)}return{update:s,dispose:o}}const aR=new ur,uS=new Qo(1,1),lR=new j8,uR=new C9,cR=new vu,cS=[],hS=[],fS=new Float32Array(16),dS=new Float32Array(9),AS=new Float32Array(4);function h5(i,e,t){const n=i[0];if(n<=0||n>0)return i;const r=e*t;let s=cS[r];if(s===void 0&&(s=new Float32Array(r),cS[r]=s),e!==0){n.toArray(s,0);for(let o=1,a=0;o!==e;++o)a+=t,i[o].toArray(s,a)}return s}function us(i,e){if(i.length!==e.length)return!1;for(let t=0,n=i.length;t<n;t++)if(i[t]!==e[t])return!1;return!0}function cs(i,e){for(let t=0,n=e.length;t<n;t++)i[t]=e[t]}function Y9(i,e){let t=hS[e];t===void 0&&(t=new Int32Array(e),hS[e]=t);for(let n=0;n!==e;++n)t[n]=i.allocateTextureUnit();return t}function $z(i,e){const t=this.cache;t[0]!==e&&(i.uniform1f(this.addr,e),t[0]=e)}function Xz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2f(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(us(t,e))return;i.uniform2fv(this.addr,e),cs(t,e)}}function Qz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3f(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else if(e.r!==void 0)(t[0]!==e.r||t[1]!==e.g||t[2]!==e.b)&&(i.uniform3f(this.addr,e.r,e.g,e.b),t[0]=e.r,t[1]=e.g,t[2]=e.b);else{if(us(t,e))return;i.uniform3fv(this.addr,e),cs(t,e)}}function Yz(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4f(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(us(t,e))return;i.uniform4fv(this.addr,e),cs(t,e)}}function Kz(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(us(t,e))return;i.uniformMatrix2fv(this.addr,!1,e),cs(t,e)}else{if(us(t,n))return;AS.set(n),i.uniformMatrix2fv(this.addr,!1,AS),cs(t,n)}}function Zz(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(us(t,e))return;i.uniformMatrix3fv(this.addr,!1,e),cs(t,e)}else{if(us(t,n))return;dS.set(n),i.uniformMatrix3fv(this.addr,!1,dS),cs(t,n)}}function Jz(i,e){const t=this.cache,n=e.elements;if(n===void 0){if(us(t,e))return;i.uniformMatrix4fv(this.addr,!1,e),cs(t,e)}else{if(us(t,n))return;fS.set(n),i.uniformMatrix4fv(this.addr,!1,fS),cs(t,n)}}function eG(i,e){const t=this.cache;t[0]!==e&&(i.uniform1i(this.addr,e),t[0]=e)}function tG(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2i(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(us(t,e))return;i.uniform2iv(this.addr,e),cs(t,e)}}function nG(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3i(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(us(t,e))return;i.uniform3iv(this.addr,e),cs(t,e)}}function iG(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4i(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(us(t,e))return;i.uniform4iv(this.addr,e),cs(t,e)}}function rG(i,e){const t=this.cache;t[0]!==e&&(i.uniform1ui(this.addr,e),t[0]=e)}function sG(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y)&&(i.uniform2ui(this.addr,e.x,e.y),t[0]=e.x,t[1]=e.y);else{if(us(t,e))return;i.uniform2uiv(this.addr,e),cs(t,e)}}function oG(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z)&&(i.uniform3ui(this.addr,e.x,e.y,e.z),t[0]=e.x,t[1]=e.y,t[2]=e.z);else{if(us(t,e))return;i.uniform3uiv(this.addr,e),cs(t,e)}}function aG(i,e){const t=this.cache;if(e.x!==void 0)(t[0]!==e.x||t[1]!==e.y||t[2]!==e.z||t[3]!==e.w)&&(i.uniform4ui(this.addr,e.x,e.y,e.z,e.w),t[0]=e.x,t[1]=e.y,t[2]=e.z,t[3]=e.w);else{if(us(t,e))return;i.uniform4uiv(this.addr,e),cs(t,e)}}function lG(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r);let s;this.type===i.SAMPLER_2D_SHADOW?(uS.compareFunction=W8,s=uS):s=aR,t.setTexture2D(e||s,r)}function uG(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture3D(e||uR,r)}function cG(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTextureCube(e||cR,r)}function hG(i,e,t){const n=this.cache,r=t.allocateTextureUnit();n[0]!==r&&(i.uniform1i(this.addr,r),n[0]=r),t.setTexture2DArray(e||lR,r)}function fG(i){switch(i){case 5126:return $z;case 35664:return Xz;case 35665:return Qz;case 35666:return Yz;case 35674:return Kz;case 35675:return Zz;case 35676:return Jz;case 5124:case 35670:return eG;case 35667:case 35671:return tG;case 35668:case 35672:return nG;case 35669:case 35673:return iG;case 5125:return rG;case 36294:return sG;case 36295:return oG;case 36296:return aG;case 35678:case 36198:case 36298:case 36306:case 35682:return lG;case 35679:case 36299:case 36307:return uG;case 35680:case 36300:case 36308:case 36293:return cG;case 36289:case 36303:case 36311:case 36292:return hG}}function dG(i,e){i.uniform1fv(this.addr,e)}function AG(i,e){const t=h5(e,this.size,2);i.uniform2fv(this.addr,t)}function pG(i,e){const t=h5(e,this.size,3);i.uniform3fv(this.addr,t)}function mG(i,e){const t=h5(e,this.size,4);i.uniform4fv(this.addr,t)}function gG(i,e){const t=h5(e,this.size,4);i.uniformMatrix2fv(this.addr,!1,t)}function yG(i,e){const t=h5(e,this.size,9);i.uniformMatrix3fv(this.addr,!1,t)}function vG(i,e){const t=h5(e,this.size,16);i.uniformMatrix4fv(this.addr,!1,t)}function _G(i,e){i.uniform1iv(this.addr,e)}function xG(i,e){i.uniform2iv(this.addr,e)}function bG(i,e){i.uniform3iv(this.addr,e)}function SG(i,e){i.uniform4iv(this.addr,e)}function TG(i,e){i.uniform1uiv(this.addr,e)}function wG(i,e){i.uniform2uiv(this.addr,e)}function MG(i,e){i.uniform3uiv(this.addr,e)}function EG(i,e){i.uniform4uiv(this.addr,e)}function RG(i,e,t){const n=this.cache,r=e.length,s=Y9(t,r);us(n,s)||(i.uniform1iv(this.addr,s),cs(n,s));for(let o=0;o!==r;++o)t.setTexture2D(e[o]||aR,s[o])}function CG(i,e,t){const n=this.cache,r=e.length,s=Y9(t,r);us(n,s)||(i.uniform1iv(this.addr,s),cs(n,s));for(let o=0;o!==r;++o)t.setTexture3D(e[o]||uR,s[o])}function PG(i,e,t){const n=this.cache,r=e.length,s=Y9(t,r);us(n,s)||(i.uniform1iv(this.addr,s),cs(n,s));for(let o=0;o!==r;++o)t.setTextureCube(e[o]||cR,s[o])}function NG(i,e,t){const n=this.cache,r=e.length,s=Y9(t,r);us(n,s)||(i.uniform1iv(this.addr,s),cs(n,s));for(let o=0;o!==r;++o)t.setTexture2DArray(e[o]||lR,s[o])}function IG(i){switch(i){case 5126:return dG;case 35664:return AG;case 35665:return pG;case 35666:return mG;case 35674:return gG;case 35675:return yG;case 35676:return vG;case 5124:case 35670:return _G;case 35667:case 35671:return xG;case 35668:case 35672:return bG;case 35669:case 35673:return SG;case 5125:return TG;case 36294:return wG;case 36295:return MG;case 36296:return EG;case 35678:case 36198:case 36298:case 36306:case 35682:return RG;case 35679:case 36299:case 36307:return CG;case 35680:case 36300:case 36308:case 36293:return PG;case 36289:case 36303:case 36311:case 36292:return NG}}class LG{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.setValue=fG(t.type)}}class DG{constructor(e,t,n){this.id=e,this.addr=n,this.cache=[],this.type=t.type,this.size=t.size,this.setValue=IG(t.type)}}class BG{constructor(e){this.id=e,this.seq=[],this.map={}}setValue(e,t,n){const r=this.seq;for(let s=0,o=r.length;s!==o;++s){const a=r[s];a.setValue(e,t[a.id],n)}}}const Jp=/(\w+)(\])?(\[|\.)?/g;function pS(i,e){i.seq.push(e),i.map[e.id]=e}function FG(i,e,t){const n=i.name,r=n.length;for(Jp.lastIndex=0;;){const s=Jp.exec(n),o=Jp.lastIndex;let a=s[1];const l=s[2]==="]",u=s[3];if(l&&(a=a|0),u===void 0||u==="["&&o+2===r){pS(t,u===void 0?new LG(a,i,e):new DG(a,i,e));break}else{let A=t.map[a];A===void 0&&(A=new BG(a),pS(t,A)),t=A}}}class Vf{constructor(e,t){this.seq=[],this.map={};const n=e.getProgramParameter(t,e.ACTIVE_UNIFORMS);for(let r=0;r<n;++r){const s=e.getActiveUniform(t,r),o=e.getUniformLocation(t,s.name);FG(s,o,this)}}setValue(e,t,n,r){const s=this.map[t];s!==void 0&&s.setValue(e,n,r)}setOptional(e,t,n){const r=t[n];r!==void 0&&this.setValue(e,n,r)}static upload(e,t,n,r){for(let s=0,o=t.length;s!==o;++s){const a=t[s],l=n[a.id];l.needsUpdate!==!1&&a.setValue(e,l.value,r)}}static seqWithValue(e,t){const n=[];for(let r=0,s=e.length;r!==s;++r){const o=e[r];o.id in t&&n.push(o)}return n}}function mS(i,e,t){const n=i.createShader(e);return i.shaderSource(n,t),i.compileShader(n),n}const UG=37297;let OG=0;function kG(i,e){const t=i.split(`
`),n=[],r=Math.max(e-6,0),s=Math.min(e+6,t.length);for(let o=r;o<s;o++){const a=o+1;n.push(`${a===e?">":" "} ${a}: ${t[o]}`)}return n.join(`
`)}const gS=new Fn;function VG(i){Sn._getMatrix(gS,Sn.workingColorSpace,i);const e=`mat3( ${gS.elements.map(t=>t.toFixed(4))} )`;switch(Sn.getTransfer(i)){case mc:return[e,"LinearTransferOETF"];case qt:return[e,"sRGBTransferOETF"];default:return console.warn("THREE.WebGLProgram: Unsupported color space: ",i),[e,"LinearTransferOETF"]}}function yS(i,e,t){const n=i.getShaderParameter(e,i.COMPILE_STATUS),s=(i.getShaderInfoLog(e)||"").trim();if(n&&s==="")return"";const o=/ERROR: 0:(\d+)/.exec(s);if(o){const a=parseInt(o[1]);return t.toUpperCase()+`

`+s+`

`+kG(i.getShaderSource(e),a)}else return s}function zG(i,e){const t=VG(e);return[`vec4 ${i}( vec4 value ) {`,`	return ${t[1]}( vec4( value.rgb * ${t[0]}, value.a ) );`,"}"].join(`
`)}function GG(i,e){let t;switch(e){case Qy:t="Linear";break;case Yy:t="Reinhard";break;case Ky:t="Cineon";break;case y9:t="ACESFilmic";break;case Zy:t="AgX";break;case Jy:t="Neutral";break;case ZM:t="Custom";break;default:console.warn("THREE.WebGLProgram: Unsupported toneMapping:",e),t="Linear"}return"vec3 "+i+"( vec3 color ) { return "+t+"ToneMapping( color ); }"}const j7=new J;function qG(){Sn.getLuminanceCoefficients(j7);const i=j7.x.toFixed(4),e=j7.y.toFixed(4),t=j7.z.toFixed(4);return["float luminance( const in vec3 rgb ) {",`	const vec3 weights = vec3( ${i}, ${e}, ${t} );`,"	return dot( weights, rgb );","}"].join(`
`)}function HG(i){return[i.extensionClipCullDistance?"#extension GL_ANGLE_clip_cull_distance : require":"",i.extensionMultiDraw?"#extension GL_ANGLE_multi_draw : require":""].filter(Dh).join(`
`)}function WG(i){const e=[];for(const t in i){const n=i[t];n!==!1&&e.push("#define "+t+" "+n)}return e.join(`
`)}function jG(i,e){const t={},n=i.getProgramParameter(e,i.ACTIVE_ATTRIBUTES);for(let r=0;r<n;r++){const s=i.getActiveAttrib(e,r),o=s.name;let a=1;s.type===i.FLOAT_MAT2&&(a=2),s.type===i.FLOAT_MAT3&&(a=3),s.type===i.FLOAT_MAT4&&(a=4),t[o]={type:s.type,location:i.getAttribLocation(e,o),locationSize:a}}return t}function Dh(i){return i!==""}function vS(i,e){const t=e.numSpotLightShadows+e.numSpotLightMaps-e.numSpotLightShadowsWithMaps;return i.replace(/NUM_DIR_LIGHTS/g,e.numDirLights).replace(/NUM_SPOT_LIGHTS/g,e.numSpotLights).replace(/NUM_SPOT_LIGHT_MAPS/g,e.numSpotLightMaps).replace(/NUM_SPOT_LIGHT_COORDS/g,t).replace(/NUM_RECT_AREA_LIGHTS/g,e.numRectAreaLights).replace(/NUM_POINT_LIGHTS/g,e.numPointLights).replace(/NUM_HEMI_LIGHTS/g,e.numHemiLights).replace(/NUM_DIR_LIGHT_SHADOWS/g,e.numDirLightShadows).replace(/NUM_SPOT_LIGHT_SHADOWS_WITH_MAPS/g,e.numSpotLightShadowsWithMaps).replace(/NUM_SPOT_LIGHT_SHADOWS/g,e.numSpotLightShadows).replace(/NUM_POINT_LIGHT_SHADOWS/g,e.numPointLightShadows)}function _S(i,e){return i.replace(/NUM_CLIPPING_PLANES/g,e.numClippingPlanes).replace(/UNION_CLIPPING_PLANES/g,e.numClippingPlanes-e.numClipIntersection)}const $G=/^[ \t]*#include +<([\w\d./]+)>/gm;function Tg(i){return i.replace($G,QG)}const XG=new Map;function QG(i,e){let t=Wn[e];if(t===void 0){const n=XG.get(e);if(n!==void 0)t=Wn[n],console.warn('THREE.WebGLRenderer: Shader chunk "%s" has been deprecated. Use "%s" instead.',e,n);else throw new Error("Can not resolve #include <"+e+">")}return Tg(t)}const YG=/#pragma unroll_loop_start\s+for\s*\(\s*int\s+i\s*=\s*(\d+)\s*;\s*i\s*<\s*(\d+)\s*;\s*i\s*\+\+\s*\)\s*{([\s\S]+?)}\s+#pragma unroll_loop_end/g;function xS(i){return i.replace(YG,KG)}function KG(i,e,t,n){let r="";for(let s=parseInt(e);s<parseInt(t);s++)r+=n.replace(/\[\s*i\s*\]/g,"[ "+s+" ]").replace(/UNROLLED_LOOP_INDEX/g,s);return r}function bS(i){let e=`precision ${i.precision} float;
	precision ${i.precision} int;
	precision ${i.precision} sampler2D;
	precision ${i.precision} samplerCube;
	precision ${i.precision} sampler3D;
	precision ${i.precision} sampler2DArray;
	precision ${i.precision} sampler2DShadow;
	precision ${i.precision} samplerCubeShadow;
	precision ${i.precision} sampler2DArrayShadow;
	precision ${i.precision} isampler2D;
	precision ${i.precision} isampler3D;
	precision ${i.precision} isamplerCube;
	precision ${i.precision} isampler2DArray;
	precision ${i.precision} usampler2D;
	precision ${i.precision} usampler3D;
	precision ${i.precision} usamplerCube;
	precision ${i.precision} usampler2DArray;
	`;return i.precision==="highp"?e+=`
#define HIGH_PRECISION`:i.precision==="mediump"?e+=`
#define MEDIUM_PRECISION`:i.precision==="lowp"&&(e+=`
#define LOW_PRECISION`),e}function ZG(i){let e="SHADOWMAP_TYPE_BASIC";return i.shadowMapType===O8?e="SHADOWMAP_TYPE_PCF":i.shadowMapType===Wh?e="SHADOWMAP_TYPE_PCF_SOFT":i.shadowMapType===Ao&&(e="SHADOWMAP_TYPE_VSM"),e}function JG(i){let e="ENVMAP_TYPE_CUBE";if(i.envMap)switch(i.envMapMode){case _a:case Xa:e="ENVMAP_TYPE_CUBE";break;case t1:e="ENVMAP_TYPE_CUBE_UV";break}return e}function eq(i){let e="ENVMAP_MODE_REFLECTION";if(i.envMap)switch(i.envMapMode){case Xa:e="ENVMAP_MODE_REFRACTION";break}return e}function tq(i){let e="ENVMAP_BLENDING_NONE";if(i.envMap)switch(i.combine){case a5:e="ENVMAP_BLENDING_MULTIPLY";break;case $y:e="ENVMAP_BLENDING_MIX";break;case Xy:e="ENVMAP_BLENDING_ADD";break}return e}function nq(i){const e=i.envMapCubeUVHeight;if(e===null)return null;const t=Math.log2(e)-2,n=1/e;return{texelWidth:1/(3*Math.max(Math.pow(2,t),7*16)),texelHeight:n,maxMip:t}}function iq(i,e,t,n){const r=i.getContext(),s=t.defines;let o=t.vertexShader,a=t.fragmentShader;const l=ZG(t),u=JG(t),c=eq(t),A=tq(t),m=nq(t),_=HG(t),b=WG(s),M=r.createProgram();let w,T,N=t.glslVersion?"#version "+t.glslVersion+`
`:"";t.isRawShaderMaterial?(w=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Dh).join(`
`),w.length>0&&(w+=`
`),T=["#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b].filter(Dh).join(`
`),T.length>0&&(T+=`
`)):(w=[bS(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.extensionClipCullDistance?"#define USE_CLIP_DISTANCE":"",t.batching?"#define USE_BATCHING":"",t.batchingColor?"#define USE_BATCHING_COLOR":"",t.instancing?"#define USE_INSTANCING":"",t.instancingColor?"#define USE_INSTANCING_COLOR":"",t.instancingMorph?"#define USE_INSTANCING_MORPH":"",t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.map?"#define USE_MAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+c:"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.displacementMap?"#define USE_DISPLACEMENTMAP":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.mapUv?"#define MAP_UV "+t.mapUv:"",t.alphaMapUv?"#define ALPHAMAP_UV "+t.alphaMapUv:"",t.lightMapUv?"#define LIGHTMAP_UV "+t.lightMapUv:"",t.aoMapUv?"#define AOMAP_UV "+t.aoMapUv:"",t.emissiveMapUv?"#define EMISSIVEMAP_UV "+t.emissiveMapUv:"",t.bumpMapUv?"#define BUMPMAP_UV "+t.bumpMapUv:"",t.normalMapUv?"#define NORMALMAP_UV "+t.normalMapUv:"",t.displacementMapUv?"#define DISPLACEMENTMAP_UV "+t.displacementMapUv:"",t.metalnessMapUv?"#define METALNESSMAP_UV "+t.metalnessMapUv:"",t.roughnessMapUv?"#define ROUGHNESSMAP_UV "+t.roughnessMapUv:"",t.anisotropyMapUv?"#define ANISOTROPYMAP_UV "+t.anisotropyMapUv:"",t.clearcoatMapUv?"#define CLEARCOATMAP_UV "+t.clearcoatMapUv:"",t.clearcoatNormalMapUv?"#define CLEARCOAT_NORMALMAP_UV "+t.clearcoatNormalMapUv:"",t.clearcoatRoughnessMapUv?"#define CLEARCOAT_ROUGHNESSMAP_UV "+t.clearcoatRoughnessMapUv:"",t.iridescenceMapUv?"#define IRIDESCENCEMAP_UV "+t.iridescenceMapUv:"",t.iridescenceThicknessMapUv?"#define IRIDESCENCE_THICKNESSMAP_UV "+t.iridescenceThicknessMapUv:"",t.sheenColorMapUv?"#define SHEEN_COLORMAP_UV "+t.sheenColorMapUv:"",t.sheenRoughnessMapUv?"#define SHEEN_ROUGHNESSMAP_UV "+t.sheenRoughnessMapUv:"",t.specularMapUv?"#define SPECULARMAP_UV "+t.specularMapUv:"",t.specularColorMapUv?"#define SPECULAR_COLORMAP_UV "+t.specularColorMapUv:"",t.specularIntensityMapUv?"#define SPECULAR_INTENSITYMAP_UV "+t.specularIntensityMapUv:"",t.transmissionMapUv?"#define TRANSMISSIONMAP_UV "+t.transmissionMapUv:"",t.thicknessMapUv?"#define THICKNESSMAP_UV "+t.thicknessMapUv:"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.flatShading?"#define FLAT_SHADED":"",t.skinning?"#define USE_SKINNING":"",t.morphTargets?"#define USE_MORPHTARGETS":"",t.morphNormals&&t.flatShading===!1?"#define USE_MORPHNORMALS":"",t.morphColors?"#define USE_MORPHCOLORS":"",t.morphTargetsCount>0?"#define MORPHTARGETS_TEXTURE_STRIDE "+t.morphTextureStride:"",t.morphTargetsCount>0?"#define MORPHTARGETS_COUNT "+t.morphTargetsCount:"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.sizeAttenuation?"#define USE_SIZEATTENUATION":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 modelMatrix;","uniform mat4 modelViewMatrix;","uniform mat4 projectionMatrix;","uniform mat4 viewMatrix;","uniform mat3 normalMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;","#ifdef USE_INSTANCING","	attribute mat4 instanceMatrix;","#endif","#ifdef USE_INSTANCING_COLOR","	attribute vec3 instanceColor;","#endif","#ifdef USE_INSTANCING_MORPH","	uniform sampler2D morphTexture;","#endif","attribute vec3 position;","attribute vec3 normal;","attribute vec2 uv;","#ifdef USE_UV1","	attribute vec2 uv1;","#endif","#ifdef USE_UV2","	attribute vec2 uv2;","#endif","#ifdef USE_UV3","	attribute vec2 uv3;","#endif","#ifdef USE_TANGENT","	attribute vec4 tangent;","#endif","#if defined( USE_COLOR_ALPHA )","	attribute vec4 color;","#elif defined( USE_COLOR )","	attribute vec3 color;","#endif","#ifdef USE_SKINNING","	attribute vec4 skinIndex;","	attribute vec4 skinWeight;","#endif",`
`].filter(Dh).join(`
`),T=[bS(t),"#define SHADER_TYPE "+t.shaderType,"#define SHADER_NAME "+t.shaderName,b,t.useFog&&t.fog?"#define USE_FOG":"",t.useFog&&t.fogExp2?"#define FOG_EXP2":"",t.alphaToCoverage?"#define ALPHA_TO_COVERAGE":"",t.map?"#define USE_MAP":"",t.matcap?"#define USE_MATCAP":"",t.envMap?"#define USE_ENVMAP":"",t.envMap?"#define "+u:"",t.envMap?"#define "+c:"",t.envMap?"#define "+A:"",m?"#define CUBEUV_TEXEL_WIDTH "+m.texelWidth:"",m?"#define CUBEUV_TEXEL_HEIGHT "+m.texelHeight:"",m?"#define CUBEUV_MAX_MIP "+m.maxMip+".0":"",t.lightMap?"#define USE_LIGHTMAP":"",t.aoMap?"#define USE_AOMAP":"",t.bumpMap?"#define USE_BUMPMAP":"",t.normalMap?"#define USE_NORMALMAP":"",t.normalMapObjectSpace?"#define USE_NORMALMAP_OBJECTSPACE":"",t.normalMapTangentSpace?"#define USE_NORMALMAP_TANGENTSPACE":"",t.emissiveMap?"#define USE_EMISSIVEMAP":"",t.anisotropy?"#define USE_ANISOTROPY":"",t.anisotropyMap?"#define USE_ANISOTROPYMAP":"",t.clearcoat?"#define USE_CLEARCOAT":"",t.clearcoatMap?"#define USE_CLEARCOATMAP":"",t.clearcoatRoughnessMap?"#define USE_CLEARCOAT_ROUGHNESSMAP":"",t.clearcoatNormalMap?"#define USE_CLEARCOAT_NORMALMAP":"",t.dispersion?"#define USE_DISPERSION":"",t.iridescence?"#define USE_IRIDESCENCE":"",t.iridescenceMap?"#define USE_IRIDESCENCEMAP":"",t.iridescenceThicknessMap?"#define USE_IRIDESCENCE_THICKNESSMAP":"",t.specularMap?"#define USE_SPECULARMAP":"",t.specularColorMap?"#define USE_SPECULAR_COLORMAP":"",t.specularIntensityMap?"#define USE_SPECULAR_INTENSITYMAP":"",t.roughnessMap?"#define USE_ROUGHNESSMAP":"",t.metalnessMap?"#define USE_METALNESSMAP":"",t.alphaMap?"#define USE_ALPHAMAP":"",t.alphaTest?"#define USE_ALPHATEST":"",t.alphaHash?"#define USE_ALPHAHASH":"",t.sheen?"#define USE_SHEEN":"",t.sheenColorMap?"#define USE_SHEEN_COLORMAP":"",t.sheenRoughnessMap?"#define USE_SHEEN_ROUGHNESSMAP":"",t.transmission?"#define USE_TRANSMISSION":"",t.transmissionMap?"#define USE_TRANSMISSIONMAP":"",t.thicknessMap?"#define USE_THICKNESSMAP":"",t.vertexTangents&&t.flatShading===!1?"#define USE_TANGENT":"",t.vertexColors||t.instancingColor||t.batchingColor?"#define USE_COLOR":"",t.vertexAlphas?"#define USE_COLOR_ALPHA":"",t.vertexUv1s?"#define USE_UV1":"",t.vertexUv2s?"#define USE_UV2":"",t.vertexUv3s?"#define USE_UV3":"",t.pointsUvs?"#define USE_POINTS_UV":"",t.gradientMap?"#define USE_GRADIENTMAP":"",t.flatShading?"#define FLAT_SHADED":"",t.doubleSided?"#define DOUBLE_SIDED":"",t.flipSided?"#define FLIP_SIDED":"",t.shadowMapEnabled?"#define USE_SHADOWMAP":"",t.shadowMapEnabled?"#define "+l:"",t.premultipliedAlpha?"#define PREMULTIPLIED_ALPHA":"",t.numLightProbes>0?"#define USE_LIGHT_PROBES":"",t.decodeVideoTexture?"#define DECODE_VIDEO_TEXTURE":"",t.decodeVideoTextureEmissive?"#define DECODE_VIDEO_TEXTURE_EMISSIVE":"",t.logarithmicDepthBuffer?"#define USE_LOGDEPTHBUF":"",t.reversedDepthBuffer?"#define USE_REVERSEDEPTHBUF":"","uniform mat4 viewMatrix;","uniform vec3 cameraPosition;","uniform bool isOrthographic;",t.toneMapping!==eo?"#define TONE_MAPPING":"",t.toneMapping!==eo?Wn.tonemapping_pars_fragment:"",t.toneMapping!==eo?GG("toneMapping",t.toneMapping):"",t.dithering?"#define DITHERING":"",t.opaque?"#define OPAQUE":"",Wn.colorspace_pars_fragment,zG("linearToOutputTexel",t.outputColorSpace),qG(),t.useDepthPacking?"#define DEPTH_PACKING "+t.depthPacking:"",`
`].filter(Dh).join(`
`)),o=Tg(o),o=vS(o,t),o=_S(o,t),a=Tg(a),a=vS(a,t),a=_S(a,t),o=xS(o),a=xS(a),t.isRawShaderMaterial!==!0&&(N=`#version 300 es
`,w=[_,"#define attribute in","#define varying out","#define texture2D texture"].join(`
`)+`
`+w,T=["#define varying in",t.glslVersion===Ag?"":"layout(location = 0) out highp vec4 pc_fragColor;",t.glslVersion===Ag?"":"#define gl_FragColor pc_fragColor","#define gl_FragDepthEXT gl_FragDepth","#define texture2D texture","#define textureCube texture","#define texture2DProj textureProj","#define texture2DLodEXT textureLod","#define texture2DProjLodEXT textureProjLod","#define textureCubeLodEXT textureLod","#define texture2DGradEXT textureGrad","#define texture2DProjGradEXT textureProjGrad","#define textureCubeGradEXT textureGrad"].join(`
`)+`
`+T);const P=N+w+o,I=N+T+a,B=mS(r,r.VERTEX_SHADER,P),F=mS(r,r.FRAGMENT_SHADER,I);r.attachShader(M,B),r.attachShader(M,F),t.index0AttributeName!==void 0?r.bindAttribLocation(M,0,t.index0AttributeName):t.morphTargets===!0&&r.bindAttribLocation(M,0,"position"),r.linkProgram(M);function O(H){if(i.debug.checkShaderErrors){const Q=r.getProgramInfoLog(M)||"",Y=r.getShaderInfoLog(B)||"",ne=r.getShaderInfoLog(F)||"",ee=Q.trim(),se=Y.trim(),pe=ne.trim();let re=!0,de=!0;if(r.getProgramParameter(M,r.LINK_STATUS)===!1)if(re=!1,typeof i.debug.onShaderError=="function")i.debug.onShaderError(r,M,B,F);else{const ye=yS(r,B,"vertex"),Pe=yS(r,F,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(M,r.VALIDATE_STATUS)+`

Material Name: `+H.name+`
Material Type: `+H.type+`

Program Info Log: `+ee+`
`+ye+`
`+Pe)}else ee!==""?console.warn("THREE.WebGLProgram: Program Info Log:",ee):(se===""||pe==="")&&(de=!1);de&&(H.diagnostics={runnable:re,programLog:ee,vertexShader:{log:se,prefix:w},fragmentShader:{log:pe,prefix:T}})}r.deleteShader(B),r.deleteShader(F),V=new Vf(r,M),U=jG(r,M)}let V;this.getUniforms=function(){return V===void 0&&O(this),V};let U;this.getAttributes=function(){return U===void 0&&O(this),U};let z=t.rendererExtensionParallelShaderCompile===!1;return this.isReady=function(){return z===!1&&(z=r.getProgramParameter(M,UG)),z},this.destroy=function(){n.releaseStatesOfProgram(this),r.deleteProgram(M),this.program=void 0},this.type=t.shaderType,this.name=t.shaderName,this.id=OG++,this.cacheKey=e,this.usedTimes=1,this.program=M,this.vertexShader=B,this.fragmentShader=F,this}let rq=0;class sq{constructor(){this.shaderCache=new Map,this.materialCache=new Map}update(e){const t=e.vertexShader,n=e.fragmentShader,r=this._getShaderStage(t),s=this._getShaderStage(n),o=this._getShaderCacheForMaterial(e);return o.has(r)===!1&&(o.add(r),r.usedTimes++),o.has(s)===!1&&(o.add(s),s.usedTimes++),this}remove(e){const t=this.materialCache.get(e);for(const n of t)n.usedTimes--,n.usedTimes===0&&this.shaderCache.delete(n.code);return this.materialCache.delete(e),this}getVertexShaderID(e){return this._getShaderStage(e.vertexShader).id}getFragmentShaderID(e){return this._getShaderStage(e.fragmentShader).id}dispose(){this.shaderCache.clear(),this.materialCache.clear()}_getShaderCacheForMaterial(e){const t=this.materialCache;let n=t.get(e);return n===void 0&&(n=new Set,t.set(e,n)),n}_getShaderStage(e){const t=this.shaderCache;let n=t.get(e);return n===void 0&&(n=new oq(e),t.set(e,n)),n}}class oq{constructor(e){this.id=rq++,this.code=e,this.usedTimes=0}}function aq(i,e,t,n,r,s,o){const a=new q2,l=new sq,u=new Set,c=[],A=r.logarithmicDepthBuffer,m=r.vertexTextures;let _=r.precision;const b={MeshDepthMaterial:"depth",MeshDistanceMaterial:"distanceRGBA",MeshNormalMaterial:"normal",MeshBasicMaterial:"basic",MeshLambertMaterial:"lambert",MeshPhongMaterial:"phong",MeshToonMaterial:"toon",MeshStandardMaterial:"physical",MeshPhysicalMaterial:"physical",MeshMatcapMaterial:"matcap",LineBasicMaterial:"basic",LineDashedMaterial:"dashed",PointsMaterial:"points",ShadowMaterial:"shadow",SpriteMaterial:"sprite"};function M(U){return u.add(U),U===0?"uv":`uv${U}`}function w(U,z,H,Q,Y){const ne=Q.fog,ee=Y.geometry,se=U.isMeshStandardMaterial?Q.environment:null,pe=(U.isMeshStandardMaterial?t:e).get(U.envMap||se),re=pe&&pe.mapping===t1?pe.image.height:null,de=b[U.type];U.precision!==null&&(_=r.getMaxPrecision(U.precision),_!==U.precision&&console.warn("THREE.WebGLProgram.getParameters:",U.precision,"not supported, using",_,"instead."));const ye=ee.morphAttributes.position||ee.morphAttributes.normal||ee.morphAttributes.color,Pe=ye!==void 0?ye.length:0;let Qe=0;ee.morphAttributes.position!==void 0&&(Qe=1),ee.morphAttributes.normal!==void 0&&(Qe=2),ee.morphAttributes.color!==void 0&&(Qe=3);let et,Pt,Ne,nt;if(de){const Xn=po[de];et=Xn.vertexShader,Pt=Xn.fragmentShader}else et=U.vertexShader,Pt=U.fragmentShader,l.update(U),Ne=l.getVertexShaderID(U),nt=l.getFragmentShaderID(U);const tt=i.getRenderTarget(),Dt=i.state.buffers.depth.getReversed(),Rt=Y.isInstancedMesh===!0,It=Y.isBatchedMesh===!0,yn=!!U.map,Kt=!!U.matcap,Ae=!!pe,Je=!!U.aoMap,Xe=!!U.lightMap,ht=!!U.bumpMap,Ze=!!U.normalMap,vt=!!U.displacementMap,ut=!!U.emissiveMap,Tt=!!U.metalnessMap,fn=!!U.roughnessMap,bn=U.anisotropy>0,he=U.clearcoat>0,Z=U.dispersion>0,De=U.iridescence>0,ze=U.sheen>0,ft=U.transmission>0,We=bn&&!!U.anisotropyMap,Zt=he&&!!U.clearcoatMap,St=he&&!!U.clearcoatNormalMap,$t=he&&!!U.clearcoatRoughnessMap,Yt=De&&!!U.iridescenceMap,yt=De&&!!U.iridescenceThicknessMap,Bt=ze&&!!U.sheenColorMap,vn=ze&&!!U.sheenRoughnessMap,ge=!!U.specularMap,Be=!!U.specularColorMap,bt=!!U.specularIntensityMap,oe=ft&&!!U.transmissionMap,at=ft&&!!U.thicknessMap,xt=!!U.gradientMap,Ut=!!U.alphaMap,_t=U.alphaTest>0,rt=!!U.alphaHash,Ot=!!U.extensions;let cn=eo;U.toneMapped&&(tt===null||tt.isXRRenderTarget===!0)&&(cn=i.toneMapping);const ai={shaderID:de,shaderType:U.type,shaderName:U.name,vertexShader:et,fragmentShader:Pt,defines:U.defines,customVertexShaderID:Ne,customFragmentShaderID:nt,isRawShaderMaterial:U.isRawShaderMaterial===!0,glslVersion:U.glslVersion,precision:_,batching:It,batchingColor:It&&Y._colorsTexture!==null,instancing:Rt,instancingColor:Rt&&Y.instanceColor!==null,instancingMorph:Rt&&Y.morphTexture!==null,supportsVertexTextures:m,outputColorSpace:tt===null?i.outputColorSpace:tt.isXRRenderTarget===!0?tt.texture.colorSpace:r1,alphaToCoverage:!!U.alphaToCoverage,map:yn,matcap:Kt,envMap:Ae,envMapMode:Ae&&pe.mapping,envMapCubeUVHeight:re,aoMap:Je,lightMap:Xe,bumpMap:ht,normalMap:Ze,displacementMap:m&&vt,emissiveMap:ut,normalMapObjectSpace:Ze&&U.normalMapType===tv,normalMapTangentSpace:Ze&&U.normalMapType===fl,metalnessMap:Tt,roughnessMap:fn,anisotropy:bn,anisotropyMap:We,clearcoat:he,clearcoatMap:Zt,clearcoatNormalMap:St,clearcoatRoughnessMap:$t,dispersion:Z,iridescence:De,iridescenceMap:Yt,iridescenceThicknessMap:yt,sheen:ze,sheenColorMap:Bt,sheenRoughnessMap:vn,specularMap:ge,specularColorMap:Be,specularIntensityMap:bt,transmission:ft,transmissionMap:oe,thicknessMap:at,gradientMap:xt,opaque:U.transparent===!1&&U.blending===Js&&U.alphaToCoverage===!1,alphaMap:Ut,alphaTest:_t,alphaHash:rt,combine:U.combine,mapUv:yn&&M(U.map.channel),aoMapUv:Je&&M(U.aoMap.channel),lightMapUv:Xe&&M(U.lightMap.channel),bumpMapUv:ht&&M(U.bumpMap.channel),normalMapUv:Ze&&M(U.normalMap.channel),displacementMapUv:vt&&M(U.displacementMap.channel),emissiveMapUv:ut&&M(U.emissiveMap.channel),metalnessMapUv:Tt&&M(U.metalnessMap.channel),roughnessMapUv:fn&&M(U.roughnessMap.channel),anisotropyMapUv:We&&M(U.anisotropyMap.channel),clearcoatMapUv:Zt&&M(U.clearcoatMap.channel),clearcoatNormalMapUv:St&&M(U.clearcoatNormalMap.channel),clearcoatRoughnessMapUv:$t&&M(U.clearcoatRoughnessMap.channel),iridescenceMapUv:Yt&&M(U.iridescenceMap.channel),iridescenceThicknessMapUv:yt&&M(U.iridescenceThicknessMap.channel),sheenColorMapUv:Bt&&M(U.sheenColorMap.channel),sheenRoughnessMapUv:vn&&M(U.sheenRoughnessMap.channel),specularMapUv:ge&&M(U.specularMap.channel),specularColorMapUv:Be&&M(U.specularColorMap.channel),specularIntensityMapUv:bt&&M(U.specularIntensityMap.channel),transmissionMapUv:oe&&M(U.transmissionMap.channel),thicknessMapUv:at&&M(U.thicknessMap.channel),alphaMapUv:Ut&&M(U.alphaMap.channel),vertexTangents:!!ee.attributes.tangent&&(Ze||bn),vertexColors:U.vertexColors,vertexAlphas:U.vertexColors===!0&&!!ee.attributes.color&&ee.attributes.color.itemSize===4,pointsUvs:Y.isPoints===!0&&!!ee.attributes.uv&&(yn||Ut),fog:!!ne,useFog:U.fog===!0,fogExp2:!!ne&&ne.isFogExp2,flatShading:U.flatShading===!0&&U.wireframe===!1,sizeAttenuation:U.sizeAttenuation===!0,logarithmicDepthBuffer:A,reversedDepthBuffer:Dt,skinning:Y.isSkinnedMesh===!0,morphTargets:ee.morphAttributes.position!==void 0,morphNormals:ee.morphAttributes.normal!==void 0,morphColors:ee.morphAttributes.color!==void 0,morphTargetsCount:Pe,morphTextureStride:Qe,numDirLights:z.directional.length,numPointLights:z.point.length,numSpotLights:z.spot.length,numSpotLightMaps:z.spotLightMap.length,numRectAreaLights:z.rectArea.length,numHemiLights:z.hemi.length,numDirLightShadows:z.directionalShadowMap.length,numPointLightShadows:z.pointShadowMap.length,numSpotLightShadows:z.spotShadowMap.length,numSpotLightShadowsWithMaps:z.numSpotLightShadowsWithMaps,numLightProbes:z.numLightProbes,numClippingPlanes:o.numPlanes,numClipIntersection:o.numIntersection,dithering:U.dithering,shadowMapEnabled:i.shadowMap.enabled&&H.length>0,shadowMapType:i.shadowMap.type,toneMapping:cn,decodeVideoTexture:yn&&U.map.isVideoTexture===!0&&Sn.getTransfer(U.map.colorSpace)===qt,decodeVideoTextureEmissive:ut&&U.emissiveMap.isVideoTexture===!0&&Sn.getTransfer(U.emissiveMap.colorSpace)===qt,premultipliedAlpha:U.premultipliedAlpha,doubleSided:U.side===Mr,flipSided:U.side===Bi,useDepthPacking:U.depthPacking>=0,depthPacking:U.depthPacking||0,index0AttributeName:U.index0AttributeName,extensionClipCullDistance:Ot&&U.extensions.clipCullDistance===!0&&n.has("WEBGL_clip_cull_distance"),extensionMultiDraw:(Ot&&U.extensions.multiDraw===!0||It)&&n.has("WEBGL_multi_draw"),rendererExtensionParallelShaderCompile:n.has("KHR_parallel_shader_compile"),customProgramCacheKey:U.customProgramCacheKey()};return ai.vertexUv1s=u.has(1),ai.vertexUv2s=u.has(2),ai.vertexUv3s=u.has(3),u.clear(),ai}function T(U){const z=[];if(U.shaderID?z.push(U.shaderID):(z.push(U.customVertexShaderID),z.push(U.customFragmentShaderID)),U.defines!==void 0)for(const H in U.defines)z.push(H),z.push(U.defines[H]);return U.isRawShaderMaterial===!1&&(N(z,U),P(z,U),z.push(i.outputColorSpace)),z.push(U.customProgramCacheKey),z.join()}function N(U,z){U.push(z.precision),U.push(z.outputColorSpace),U.push(z.envMapMode),U.push(z.envMapCubeUVHeight),U.push(z.mapUv),U.push(z.alphaMapUv),U.push(z.lightMapUv),U.push(z.aoMapUv),U.push(z.bumpMapUv),U.push(z.normalMapUv),U.push(z.displacementMapUv),U.push(z.emissiveMapUv),U.push(z.metalnessMapUv),U.push(z.roughnessMapUv),U.push(z.anisotropyMapUv),U.push(z.clearcoatMapUv),U.push(z.clearcoatNormalMapUv),U.push(z.clearcoatRoughnessMapUv),U.push(z.iridescenceMapUv),U.push(z.iridescenceThicknessMapUv),U.push(z.sheenColorMapUv),U.push(z.sheenRoughnessMapUv),U.push(z.specularMapUv),U.push(z.specularColorMapUv),U.push(z.specularIntensityMapUv),U.push(z.transmissionMapUv),U.push(z.thicknessMapUv),U.push(z.combine),U.push(z.fogExp2),U.push(z.sizeAttenuation),U.push(z.morphTargetsCount),U.push(z.morphAttributeCount),U.push(z.numDirLights),U.push(z.numPointLights),U.push(z.numSpotLights),U.push(z.numSpotLightMaps),U.push(z.numHemiLights),U.push(z.numRectAreaLights),U.push(z.numDirLightShadows),U.push(z.numPointLightShadows),U.push(z.numSpotLightShadows),U.push(z.numSpotLightShadowsWithMaps),U.push(z.numLightProbes),U.push(z.shadowMapType),U.push(z.toneMapping),U.push(z.numClippingPlanes),U.push(z.numClipIntersection),U.push(z.depthPacking)}function P(U,z){a.disableAll(),z.supportsVertexTextures&&a.enable(0),z.instancing&&a.enable(1),z.instancingColor&&a.enable(2),z.instancingMorph&&a.enable(3),z.matcap&&a.enable(4),z.envMap&&a.enable(5),z.normalMapObjectSpace&&a.enable(6),z.normalMapTangentSpace&&a.enable(7),z.clearcoat&&a.enable(8),z.iridescence&&a.enable(9),z.alphaTest&&a.enable(10),z.vertexColors&&a.enable(11),z.vertexAlphas&&a.enable(12),z.vertexUv1s&&a.enable(13),z.vertexUv2s&&a.enable(14),z.vertexUv3s&&a.enable(15),z.vertexTangents&&a.enable(16),z.anisotropy&&a.enable(17),z.alphaHash&&a.enable(18),z.batching&&a.enable(19),z.dispersion&&a.enable(20),z.batchingColor&&a.enable(21),z.gradientMap&&a.enable(22),U.push(a.mask),a.disableAll(),z.fog&&a.enable(0),z.useFog&&a.enable(1),z.flatShading&&a.enable(2),z.logarithmicDepthBuffer&&a.enable(3),z.reversedDepthBuffer&&a.enable(4),z.skinning&&a.enable(5),z.morphTargets&&a.enable(6),z.morphNormals&&a.enable(7),z.morphColors&&a.enable(8),z.premultipliedAlpha&&a.enable(9),z.shadowMapEnabled&&a.enable(10),z.doubleSided&&a.enable(11),z.flipSided&&a.enable(12),z.useDepthPacking&&a.enable(13),z.dithering&&a.enable(14),z.transmission&&a.enable(15),z.sheen&&a.enable(16),z.opaque&&a.enable(17),z.pointsUvs&&a.enable(18),z.decodeVideoTexture&&a.enable(19),z.decodeVideoTextureEmissive&&a.enable(20),z.alphaToCoverage&&a.enable(21),U.push(a.mask)}function I(U){const z=b[U.type];let H;if(z){const Q=po[z];H=I9.clone(Q.uniforms)}else H=U.uniforms;return H}function B(U,z){let H;for(let Q=0,Y=c.length;Q<Y;Q++){const ne=c[Q];if(ne.cacheKey===z){H=ne,++H.usedTimes;break}}return H===void 0&&(H=new iq(i,z,U,s),c.push(H)),H}function F(U){if(--U.usedTimes===0){const z=c.indexOf(U);c[z]=c[c.length-1],c.pop(),U.destroy()}}function O(U){l.remove(U)}function V(){l.dispose()}return{getParameters:w,getProgramCacheKey:T,getUniforms:I,acquireProgram:B,releaseProgram:F,releaseShaderCache:O,programs:c,dispose:V}}function lq(){let i=new WeakMap;function e(o){return i.has(o)}function t(o){let a=i.get(o);return a===void 0&&(a={},i.set(o,a)),a}function n(o){i.delete(o)}function r(o,a,l){i.get(o)[a]=l}function s(){i=new WeakMap}return{has:e,get:t,remove:n,update:r,dispose:s}}function uq(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.material.id!==e.material.id?i.material.id-e.material.id:i.z!==e.z?i.z-e.z:i.id-e.id}function SS(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function TS(){const i=[];let e=0;const t=[],n=[],r=[];function s(){e=0,t.length=0,n.length=0,r.length=0}function o(A,m,_,b,M,w){let T=i[e];return T===void 0?(T={id:A.id,object:A,geometry:m,material:_,groupOrder:b,renderOrder:A.renderOrder,z:M,group:w},i[e]=T):(T.id=A.id,T.object=A,T.geometry=m,T.material=_,T.groupOrder=b,T.renderOrder=A.renderOrder,T.z=M,T.group=w),e++,T}function a(A,m,_,b,M,w){const T=o(A,m,_,b,M,w);_.transmission>0?n.push(T):_.transparent===!0?r.push(T):t.push(T)}function l(A,m,_,b,M,w){const T=o(A,m,_,b,M,w);_.transmission>0?n.unshift(T):_.transparent===!0?r.unshift(T):t.unshift(T)}function u(A,m){t.length>1&&t.sort(A||uq),n.length>1&&n.sort(m||SS),r.length>1&&r.sort(m||SS)}function c(){for(let A=e,m=i.length;A<m;A++){const _=i[A];if(_.id===null)break;_.id=null,_.object=null,_.geometry=null,_.material=null,_.group=null}}return{opaque:t,transmissive:n,transparent:r,init:s,push:a,unshift:l,finish:c,sort:u}}function cq(){let i=new WeakMap;function e(n,r){const s=i.get(n);let o;return s===void 0?(o=new TS,i.set(n,[o])):r>=s.length?(o=new TS,s.push(o)):o=s[r],o}function t(){i=new WeakMap}return{get:e,dispose:t}}function hq(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={direction:new J,color:new Et};break;case"SpotLight":t={position:new J,direction:new J,color:new Et,distance:0,coneCos:0,penumbraCos:0,decay:0};break;case"PointLight":t={position:new J,color:new Et,distance:0,decay:0};break;case"HemisphereLight":t={direction:new J,skyColor:new Et,groundColor:new Et};break;case"RectAreaLight":t={color:new Et,position:new J,halfWidth:new J,halfHeight:new J};break}return i[e.id]=t,t}}}function fq(){const i={};return{get:function(e){if(i[e.id]!==void 0)return i[e.id];let t;switch(e.type){case"DirectionalLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"SpotLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge};break;case"PointLight":t={shadowIntensity:1,shadowBias:0,shadowNormalBias:0,shadowRadius:1,shadowMapSize:new Ge,shadowCameraNear:1,shadowCameraFar:1e3};break}return i[e.id]=t,t}}}let dq=0;function Aq(i,e){return(e.castShadow?2:0)-(i.castShadow?2:0)+(e.map?1:0)-(i.map?1:0)}function pq(i){const e=new hq,t=fq(),n={version:0,hash:{directionalLength:-1,pointLength:-1,spotLength:-1,rectAreaLength:-1,hemiLength:-1,numDirectionalShadows:-1,numPointShadows:-1,numSpotShadows:-1,numSpotMaps:-1,numLightProbes:-1},ambient:[0,0,0],probe:[],directional:[],directionalShadow:[],directionalShadowMap:[],directionalShadowMatrix:[],spot:[],spotLightMap:[],spotShadow:[],spotShadowMap:[],spotLightMatrix:[],rectArea:[],rectAreaLTC1:null,rectAreaLTC2:null,point:[],pointShadow:[],pointShadowMap:[],pointShadowMatrix:[],hemi:[],numSpotLightShadowsWithMaps:0,numLightProbes:0};for(let u=0;u<9;u++)n.probe.push(new J);const r=new J,s=new Wt,o=new Wt;function a(u){let c=0,A=0,m=0;for(let U=0;U<9;U++)n.probe[U].set(0,0,0);let _=0,b=0,M=0,w=0,T=0,N=0,P=0,I=0,B=0,F=0,O=0;u.sort(Aq);for(let U=0,z=u.length;U<z;U++){const H=u[U],Q=H.color,Y=H.intensity,ne=H.distance,ee=H.shadow&&H.shadow.map?H.shadow.map.texture:null;if(H.isAmbientLight)c+=Q.r*Y,A+=Q.g*Y,m+=Q.b*Y;else if(H.isLightProbe){for(let se=0;se<9;se++)n.probe[se].addScaledVector(H.sh.coefficients[se],Y);O++}else if(H.isDirectionalLight){const se=e.get(H);if(se.color.copy(H.color).multiplyScalar(H.intensity),H.castShadow){const pe=H.shadow,re=t.get(H);re.shadowIntensity=pe.intensity,re.shadowBias=pe.bias,re.shadowNormalBias=pe.normalBias,re.shadowRadius=pe.radius,re.shadowMapSize=pe.mapSize,n.directionalShadow[_]=re,n.directionalShadowMap[_]=ee,n.directionalShadowMatrix[_]=H.shadow.matrix,N++}n.directional[_]=se,_++}else if(H.isSpotLight){const se=e.get(H);se.position.setFromMatrixPosition(H.matrixWorld),se.color.copy(Q).multiplyScalar(Y),se.distance=ne,se.coneCos=Math.cos(H.angle),se.penumbraCos=Math.cos(H.angle*(1-H.penumbra)),se.decay=H.decay,n.spot[M]=se;const pe=H.shadow;if(H.map&&(n.spotLightMap[B]=H.map,B++,pe.updateMatrices(H),H.castShadow&&F++),n.spotLightMatrix[M]=pe.matrix,H.castShadow){const re=t.get(H);re.shadowIntensity=pe.intensity,re.shadowBias=pe.bias,re.shadowNormalBias=pe.normalBias,re.shadowRadius=pe.radius,re.shadowMapSize=pe.mapSize,n.spotShadow[M]=re,n.spotShadowMap[M]=ee,I++}M++}else if(H.isRectAreaLight){const se=e.get(H);se.color.copy(Q).multiplyScalar(Y),se.halfWidth.set(H.width*.5,0,0),se.halfHeight.set(0,H.height*.5,0),n.rectArea[w]=se,w++}else if(H.isPointLight){const se=e.get(H);if(se.color.copy(H.color).multiplyScalar(H.intensity),se.distance=H.distance,se.decay=H.decay,H.castShadow){const pe=H.shadow,re=t.get(H);re.shadowIntensity=pe.intensity,re.shadowBias=pe.bias,re.shadowNormalBias=pe.normalBias,re.shadowRadius=pe.radius,re.shadowMapSize=pe.mapSize,re.shadowCameraNear=pe.camera.near,re.shadowCameraFar=pe.camera.far,n.pointShadow[b]=re,n.pointShadowMap[b]=ee,n.pointShadowMatrix[b]=H.shadow.matrix,P++}n.point[b]=se,b++}else if(H.isHemisphereLight){const se=e.get(H);se.skyColor.copy(H.color).multiplyScalar(Y),se.groundColor.copy(H.groundColor).multiplyScalar(Y),n.hemi[T]=se,T++}}w>0&&(i.has("OES_texture_float_linear")===!0?(n.rectAreaLTC1=Nt.LTC_FLOAT_1,n.rectAreaLTC2=Nt.LTC_FLOAT_2):(n.rectAreaLTC1=Nt.LTC_HALF_1,n.rectAreaLTC2=Nt.LTC_HALF_2)),n.ambient[0]=c,n.ambient[1]=A,n.ambient[2]=m;const V=n.hash;(V.directionalLength!==_||V.pointLength!==b||V.spotLength!==M||V.rectAreaLength!==w||V.hemiLength!==T||V.numDirectionalShadows!==N||V.numPointShadows!==P||V.numSpotShadows!==I||V.numSpotMaps!==B||V.numLightProbes!==O)&&(n.directional.length=_,n.spot.length=M,n.rectArea.length=w,n.point.length=b,n.hemi.length=T,n.directionalShadow.length=N,n.directionalShadowMap.length=N,n.pointShadow.length=P,n.pointShadowMap.length=P,n.spotShadow.length=I,n.spotShadowMap.length=I,n.directionalShadowMatrix.length=N,n.pointShadowMatrix.length=P,n.spotLightMatrix.length=I+B-F,n.spotLightMap.length=B,n.numSpotLightShadowsWithMaps=F,n.numLightProbes=O,V.directionalLength=_,V.pointLength=b,V.spotLength=M,V.rectAreaLength=w,V.hemiLength=T,V.numDirectionalShadows=N,V.numPointShadows=P,V.numSpotShadows=I,V.numSpotMaps=B,V.numLightProbes=O,n.version=dq++)}function l(u,c){let A=0,m=0,_=0,b=0,M=0;const w=c.matrixWorldInverse;for(let T=0,N=u.length;T<N;T++){const P=u[T];if(P.isDirectionalLight){const I=n.directional[A];I.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(w),A++}else if(P.isSpotLight){const I=n.spot[_];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(w),I.direction.setFromMatrixPosition(P.matrixWorld),r.setFromMatrixPosition(P.target.matrixWorld),I.direction.sub(r),I.direction.transformDirection(w),_++}else if(P.isRectAreaLight){const I=n.rectArea[b];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(w),o.identity(),s.copy(P.matrixWorld),s.premultiply(w),o.extractRotation(s),I.halfWidth.set(P.width*.5,0,0),I.halfHeight.set(0,P.height*.5,0),I.halfWidth.applyMatrix4(o),I.halfHeight.applyMatrix4(o),b++}else if(P.isPointLight){const I=n.point[m];I.position.setFromMatrixPosition(P.matrixWorld),I.position.applyMatrix4(w),m++}else if(P.isHemisphereLight){const I=n.hemi[M];I.direction.setFromMatrixPosition(P.matrixWorld),I.direction.transformDirection(w),M++}}}return{setup:a,setupView:l,state:n}}function wS(i){const e=new pq(i),t=[],n=[];function r(c){u.camera=c,t.length=0,n.length=0}function s(c){t.push(c)}function o(c){n.push(c)}function a(){e.setup(t)}function l(c){e.setupView(t,c)}const u={lightsArray:t,shadowsArray:n,camera:null,lights:e,transmissionRenderTarget:{}};return{init:r,state:u,setupLights:a,setupLightsView:l,pushLight:s,pushShadow:o}}function mq(i){let e=new WeakMap;function t(r,s=0){const o=e.get(r);let a;return o===void 0?(a=new wS(i),e.set(r,[a])):s>=o.length?(a=new wS(i),o.push(a)):a=o[s],a}function n(){e=new WeakMap}return{get:t,dispose:n}}const gq=`void main() {
	gl_Position = vec4( position, 1.0 );
}`,yq=`uniform sampler2D shadow_pass;
uniform vec2 resolution;
uniform float radius;
#include <packing>
void main() {
	const float samples = float( VSM_SAMPLES );
	float mean = 0.0;
	float squared_mean = 0.0;
	float uvStride = samples <= 1.0 ? 0.0 : 2.0 / ( samples - 1.0 );
	float uvStart = samples <= 1.0 ? 0.0 : - 1.0;
	for ( float i = 0.0; i < samples; i ++ ) {
		float uvOffset = uvStart + i * uvStride;
		#ifdef HORIZONTAL_PASS
			vec2 distribution = unpackRGBATo2Half( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( uvOffset, 0.0 ) * radius ) / resolution ) );
			mean += distribution.x;
			squared_mean += distribution.y * distribution.y + distribution.x * distribution.x;
		#else
			float depth = unpackRGBAToDepth( texture2D( shadow_pass, ( gl_FragCoord.xy + vec2( 0.0, uvOffset ) * radius ) / resolution ) );
			mean += depth;
			squared_mean += depth * depth;
		#endif
	}
	mean = mean / samples;
	squared_mean = squared_mean / samples;
	float std_dev = sqrt( squared_mean - mean * mean );
	gl_FragColor = pack2HalfToRGBA( vec2( mean, std_dev ) );
}`;function vq(i,e,t){let n=new _u;const r=new Ge,s=new Ge,o=new rn,a=new Sv({depthPacking:lE}),l=new Tv,u={},c=t.maxTextureSize,A={[So]:Bi,[Bi]:So,[Mr]:Mr},m=new To({defines:{VSM_SAMPLES:8},uniforms:{shadow_pass:{value:null},resolution:{value:new Ge},radius:{value:4}},vertexShader:gq,fragmentShader:yq}),_=m.clone();_.defines.HORIZONTAL_PASS=1;const b=new Tn;b.setAttribute("position",new oi(new Float32Array([-1,-1,.5,3,-1,.5,-1,3,.5]),3));const M=new ei(b,m),w=this;this.enabled=!1,this.autoUpdate=!0,this.needsUpdate=!1,this.type=O8;let T=this.type;this.render=function(F,O,V){if(w.enabled===!1||w.autoUpdate===!1&&w.needsUpdate===!1||F.length===0)return;const U=i.getRenderTarget(),z=i.getActiveCubeFace(),H=i.getActiveMipmapLevel(),Q=i.state;Q.setBlending(qo),Q.buffers.depth.getReversed()?Q.buffers.color.setClear(0,0,0,0):Q.buffers.color.setClear(1,1,1,1),Q.buffers.depth.setTest(!0),Q.setScissorTest(!1);const Y=T!==Ao&&this.type===Ao,ne=T===Ao&&this.type!==Ao;for(let ee=0,se=F.length;ee<se;ee++){const pe=F[ee],re=pe.shadow;if(re===void 0){console.warn("THREE.WebGLShadowMap:",pe,"has no shadow.");continue}if(re.autoUpdate===!1&&re.needsUpdate===!1)continue;r.copy(re.mapSize);const de=re.getFrameExtents();if(r.multiply(de),s.copy(re.mapSize),(r.x>c||r.y>c)&&(r.x>c&&(s.x=Math.floor(c/de.x),r.x=s.x*de.x,re.mapSize.x=s.x),r.y>c&&(s.y=Math.floor(c/de.y),r.y=s.y*de.y,re.mapSize.y=s.y)),re.map===null||Y===!0||ne===!0){const Pe=this.type!==Ao?{minFilter:qi,magFilter:qi}:{};re.map!==null&&re.map.dispose(),re.map=new dl(r.x,r.y,Pe),re.map.texture.name=pe.name+".shadowMap",re.camera.updateProjectionMatrix()}i.setRenderTarget(re.map),i.clear();const ye=re.getViewportCount();for(let Pe=0;Pe<ye;Pe++){const Qe=re.getViewport(Pe);o.set(s.x*Qe.x,s.y*Qe.y,s.x*Qe.z,s.y*Qe.w),Q.viewport(o),re.updateMatrices(pe,Pe),n=re.getFrustum(),I(O,V,re.camera,pe,this.type)}re.isPointLightShadow!==!0&&this.type===Ao&&N(re,V),re.needsUpdate=!1}T=this.type,w.needsUpdate=!1,i.setRenderTarget(U,z,H)};function N(F,O){const V=e.update(M);m.defines.VSM_SAMPLES!==F.blurSamples&&(m.defines.VSM_SAMPLES=F.blurSamples,_.defines.VSM_SAMPLES=F.blurSamples,m.needsUpdate=!0,_.needsUpdate=!0),F.mapPass===null&&(F.mapPass=new dl(r.x,r.y)),m.uniforms.shadow_pass.value=F.map.texture,m.uniforms.resolution.value=F.mapSize,m.uniforms.radius.value=F.radius,i.setRenderTarget(F.mapPass),i.clear(),i.renderBufferDirect(O,null,V,m,M,null),_.uniforms.shadow_pass.value=F.mapPass.texture,_.uniforms.resolution.value=F.mapSize,_.uniforms.radius.value=F.radius,i.setRenderTarget(F.map),i.clear(),i.renderBufferDirect(O,null,V,_,M,null)}function P(F,O,V,U){let z=null;const H=V.isPointLight===!0?F.customDistanceMaterial:F.customDepthMaterial;if(H!==void 0)z=H;else if(z=V.isPointLight===!0?l:a,i.localClippingEnabled&&O.clipShadows===!0&&Array.isArray(O.clippingPlanes)&&O.clippingPlanes.length!==0||O.displacementMap&&O.displacementScale!==0||O.alphaMap&&O.alphaTest>0||O.map&&O.alphaTest>0||O.alphaToCoverage===!0){const Q=z.uuid,Y=O.uuid;let ne=u[Q];ne===void 0&&(ne={},u[Q]=ne);let ee=ne[Y];ee===void 0&&(ee=z.clone(),ne[Y]=ee,O.addEventListener("dispose",B)),z=ee}if(z.visible=O.visible,z.wireframe=O.wireframe,U===Ao?z.side=O.shadowSide!==null?O.shadowSide:O.side:z.side=O.shadowSide!==null?O.shadowSide:A[O.side],z.alphaMap=O.alphaMap,z.alphaTest=O.alphaToCoverage===!0?.5:O.alphaTest,z.map=O.map,z.clipShadows=O.clipShadows,z.clippingPlanes=O.clippingPlanes,z.clipIntersection=O.clipIntersection,z.displacementMap=O.displacementMap,z.displacementScale=O.displacementScale,z.displacementBias=O.displacementBias,z.wireframeLinewidth=O.wireframeLinewidth,z.linewidth=O.linewidth,V.isPointLight===!0&&z.isMeshDistanceMaterial===!0){const Q=i.properties.get(z);Q.light=V}return z}function I(F,O,V,U,z){if(F.visible===!1)return;if(F.layers.test(O.layers)&&(F.isMesh||F.isLine||F.isPoints)&&(F.castShadow||F.receiveShadow&&z===Ao)&&(!F.frustumCulled||n.intersectsObject(F))){F.modelViewMatrix.multiplyMatrices(V.matrixWorldInverse,F.matrixWorld);const Y=e.update(F),ne=F.material;if(Array.isArray(ne)){const ee=Y.groups;for(let se=0,pe=ee.length;se<pe;se++){const re=ee[se],de=ne[re.materialIndex];if(de&&de.visible){const ye=P(F,de,U,z);F.onBeforeShadow(i,F,O,V,Y,ye,re),i.renderBufferDirect(V,null,Y,ye,F,re),F.onAfterShadow(i,F,O,V,Y,ye,re)}}}else if(ne.visible){const ee=P(F,ne,U,z);F.onBeforeShadow(i,F,O,V,Y,ee,null),i.renderBufferDirect(V,null,Y,ee,F,null),F.onAfterShadow(i,F,O,V,Y,ee,null)}}const Q=F.children;for(let Y=0,ne=Q.length;Y<ne;Y++)I(Q[Y],O,V,U,z)}function B(F){F.target.removeEventListener("dispose",B);for(const V in u){const U=u[V],z=F.target.uuid;z in U&&(U[z].dispose(),delete U[z])}}}const _q={[R4]:C4,[P4]:L4,[N4]:D4,[e1]:I4,[C4]:R4,[L4]:P4,[D4]:N4,[I4]:e1};function xq(i,e){function t(){let oe=!1;const at=new rn;let xt=null;const Ut=new rn(0,0,0,0);return{setMask:function(_t){xt!==_t&&!oe&&(i.colorMask(_t,_t,_t,_t),xt=_t)},setLocked:function(_t){oe=_t},setClear:function(_t,rt,Ot,cn,ai){ai===!0&&(_t*=cn,rt*=cn,Ot*=cn),at.set(_t,rt,Ot,cn),Ut.equals(at)===!1&&(i.clearColor(_t,rt,Ot,cn),Ut.copy(at))},reset:function(){oe=!1,xt=null,Ut.set(-1,0,0,0)}}}function n(){let oe=!1,at=!1,xt=null,Ut=null,_t=null;return{setReversed:function(rt){if(at!==rt){const Ot=e.get("EXT_clip_control");rt?Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.ZERO_TO_ONE_EXT):Ot.clipControlEXT(Ot.LOWER_LEFT_EXT,Ot.NEGATIVE_ONE_TO_ONE_EXT),at=rt;const cn=_t;_t=null,this.setClear(cn)}},getReversed:function(){return at},setTest:function(rt){rt?tt(i.DEPTH_TEST):Dt(i.DEPTH_TEST)},setMask:function(rt){xt!==rt&&!oe&&(i.depthMask(rt),xt=rt)},setFunc:function(rt){if(at&&(rt=_q[rt]),Ut!==rt){switch(rt){case R4:i.depthFunc(i.NEVER);break;case C4:i.depthFunc(i.ALWAYS);break;case P4:i.depthFunc(i.LESS);break;case e1:i.depthFunc(i.LEQUAL);break;case N4:i.depthFunc(i.EQUAL);break;case I4:i.depthFunc(i.GEQUAL);break;case L4:i.depthFunc(i.GREATER);break;case D4:i.depthFunc(i.NOTEQUAL);break;default:i.depthFunc(i.LEQUAL)}Ut=rt}},setLocked:function(rt){oe=rt},setClear:function(rt){_t!==rt&&(at&&(rt=1-rt),i.clearDepth(rt),_t=rt)},reset:function(){oe=!1,xt=null,Ut=null,_t=null,at=!1}}}function r(){let oe=!1,at=null,xt=null,Ut=null,_t=null,rt=null,Ot=null,cn=null,ai=null;return{setTest:function(Xn){oe||(Xn?tt(i.STENCIL_TEST):Dt(i.STENCIL_TEST))},setMask:function(Xn){at!==Xn&&!oe&&(i.stencilMask(Xn),at=Xn)},setFunc:function(Xn,xr,hr){(xt!==Xn||Ut!==xr||_t!==hr)&&(i.stencilFunc(Xn,xr,hr),xt=Xn,Ut=xr,_t=hr)},setOp:function(Xn,xr,hr){(rt!==Xn||Ot!==xr||cn!==hr)&&(i.stencilOp(Xn,xr,hr),rt=Xn,Ot=xr,cn=hr)},setLocked:function(Xn){oe=Xn},setClear:function(Xn){ai!==Xn&&(i.clearStencil(Xn),ai=Xn)},reset:function(){oe=!1,at=null,xt=null,Ut=null,_t=null,rt=null,Ot=null,cn=null,ai=null}}}const s=new t,o=new n,a=new r,l=new WeakMap,u=new WeakMap;let c={},A={},m=new WeakMap,_=[],b=null,M=!1,w=null,T=null,N=null,P=null,I=null,B=null,F=null,O=new Et(0,0,0),V=0,U=!1,z=null,H=null,Q=null,Y=null,ne=null;const ee=i.getParameter(i.MAX_COMBINED_TEXTURE_IMAGE_UNITS);let se=!1,pe=0;const re=i.getParameter(i.VERSION);re.indexOf("WebGL")!==-1?(pe=parseFloat(/^WebGL (\d)/.exec(re)[1]),se=pe>=1):re.indexOf("OpenGL ES")!==-1&&(pe=parseFloat(/^OpenGL ES (\d)/.exec(re)[1]),se=pe>=2);let de=null,ye={};const Pe=i.getParameter(i.SCISSOR_BOX),Qe=i.getParameter(i.VIEWPORT),et=new rn().fromArray(Pe),Pt=new rn().fromArray(Qe);function Ne(oe,at,xt,Ut){const _t=new Uint8Array(4),rt=i.createTexture();i.bindTexture(oe,rt),i.texParameteri(oe,i.TEXTURE_MIN_FILTER,i.NEAREST),i.texParameteri(oe,i.TEXTURE_MAG_FILTER,i.NEAREST);for(let Ot=0;Ot<xt;Ot++)oe===i.TEXTURE_3D||oe===i.TEXTURE_2D_ARRAY?i.texImage3D(at,0,i.RGBA,1,1,Ut,0,i.RGBA,i.UNSIGNED_BYTE,_t):i.texImage2D(at+Ot,0,i.RGBA,1,1,0,i.RGBA,i.UNSIGNED_BYTE,_t);return rt}const nt={};nt[i.TEXTURE_2D]=Ne(i.TEXTURE_2D,i.TEXTURE_2D,1),nt[i.TEXTURE_CUBE_MAP]=Ne(i.TEXTURE_CUBE_MAP,i.TEXTURE_CUBE_MAP_POSITIVE_X,6),nt[i.TEXTURE_2D_ARRAY]=Ne(i.TEXTURE_2D_ARRAY,i.TEXTURE_2D_ARRAY,1,1),nt[i.TEXTURE_3D]=Ne(i.TEXTURE_3D,i.TEXTURE_3D,1,1),s.setClear(0,0,0,1),o.setClear(1),a.setClear(0),tt(i.DEPTH_TEST),o.setFunc(e1),ht(!1),Ze(id),tt(i.CULL_FACE),Je(qo);function tt(oe){c[oe]!==!0&&(i.enable(oe),c[oe]=!0)}function Dt(oe){c[oe]!==!1&&(i.disable(oe),c[oe]=!1)}function Rt(oe,at){return A[oe]!==at?(i.bindFramebuffer(oe,at),A[oe]=at,oe===i.DRAW_FRAMEBUFFER&&(A[i.FRAMEBUFFER]=at),oe===i.FRAMEBUFFER&&(A[i.DRAW_FRAMEBUFFER]=at),!0):!1}function It(oe,at){let xt=_,Ut=!1;if(oe){xt=m.get(at),xt===void 0&&(xt=[],m.set(at,xt));const _t=oe.textures;if(xt.length!==_t.length||xt[0]!==i.COLOR_ATTACHMENT0){for(let rt=0,Ot=_t.length;rt<Ot;rt++)xt[rt]=i.COLOR_ATTACHMENT0+rt;xt.length=_t.length,Ut=!0}}else xt[0]!==i.BACK&&(xt[0]=i.BACK,Ut=!0);Ut&&i.drawBuffers(xt)}function yn(oe){return b!==oe?(i.useProgram(oe),b=oe,!0):!1}const Kt={[Ds]:i.FUNC_ADD,[l9]:i.FUNC_SUBTRACT,[u9]:i.FUNC_REVERSE_SUBTRACT};Kt[Wy]=i.MIN,Kt[jy]=i.MAX;const Ae={[K0]:i.ZERO,[c9]:i.ONE,[h9]:i.SRC_COLOR,[M4]:i.SRC_ALPHA,[g9]:i.SRC_ALPHA_SATURATE,[p9]:i.DST_COLOR,[d9]:i.DST_ALPHA,[f9]:i.ONE_MINUS_SRC_COLOR,[E4]:i.ONE_MINUS_SRC_ALPHA,[m9]:i.ONE_MINUS_DST_COLOR,[A9]:i.ONE_MINUS_DST_ALPHA,[XM]:i.CONSTANT_COLOR,[QM]:i.ONE_MINUS_CONSTANT_COLOR,[YM]:i.CONSTANT_ALPHA,[KM]:i.ONE_MINUS_CONSTANT_ALPHA};function Je(oe,at,xt,Ut,_t,rt,Ot,cn,ai,Xn){if(oe===qo){M===!0&&(Dt(i.BLEND),M=!1);return}if(M===!1&&(tt(i.BLEND),M=!0),oe!==z2){if(oe!==w||Xn!==U){if((T!==Ds||I!==Ds)&&(i.blendEquation(i.FUNC_ADD),T=Ds,I=Ds),Xn)switch(oe){case Js:i.blendFuncSeparate(i.ONE,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case K2:i.blendFunc(i.ONE,i.ONE);break;case Z2:i.blendFuncSeparate(i.ZERO,i.ONE_MINUS_SRC_COLOR,i.ZERO,i.ONE);break;case J2:i.blendFuncSeparate(i.DST_COLOR,i.ONE_MINUS_SRC_ALPHA,i.ZERO,i.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}else switch(oe){case Js:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE_MINUS_SRC_ALPHA,i.ONE,i.ONE_MINUS_SRC_ALPHA);break;case K2:i.blendFuncSeparate(i.SRC_ALPHA,i.ONE,i.ONE,i.ONE);break;case Z2:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case J2:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",oe);break}N=null,P=null,B=null,F=null,O.set(0,0,0),V=0,w=oe,U=Xn}return}_t=_t||at,rt=rt||xt,Ot=Ot||Ut,(at!==T||_t!==I)&&(i.blendEquationSeparate(Kt[at],Kt[_t]),T=at,I=_t),(xt!==N||Ut!==P||rt!==B||Ot!==F)&&(i.blendFuncSeparate(Ae[xt],Ae[Ut],Ae[rt],Ae[Ot]),N=xt,P=Ut,B=rt,F=Ot),(cn.equals(O)===!1||ai!==V)&&(i.blendColor(cn.r,cn.g,cn.b,ai),O.copy(cn),V=ai),w=oe,U=!1}function Xe(oe,at){oe.side===Mr?Dt(i.CULL_FACE):tt(i.CULL_FACE);let xt=oe.side===Bi;at&&(xt=!xt),ht(xt),oe.blending===Js&&oe.transparent===!1?Je(qo):Je(oe.blending,oe.blendEquation,oe.blendSrc,oe.blendDst,oe.blendEquationAlpha,oe.blendSrcAlpha,oe.blendDstAlpha,oe.blendColor,oe.blendAlpha,oe.premultipliedAlpha),o.setFunc(oe.depthFunc),o.setTest(oe.depthTest),o.setMask(oe.depthWrite),s.setMask(oe.colorWrite);const Ut=oe.stencilWrite;a.setTest(Ut),Ut&&(a.setMask(oe.stencilWriteMask),a.setFunc(oe.stencilFunc,oe.stencilRef,oe.stencilFuncMask),a.setOp(oe.stencilFail,oe.stencilZFail,oe.stencilZPass)),ut(oe.polygonOffset,oe.polygonOffsetFactor,oe.polygonOffsetUnits),oe.alphaToCoverage===!0?tt(i.SAMPLE_ALPHA_TO_COVERAGE):Dt(i.SAMPLE_ALPHA_TO_COVERAGE)}function ht(oe){z!==oe&&(oe?i.frontFace(i.CW):i.frontFace(i.CCW),z=oe)}function Ze(oe){oe!==Gy?(tt(i.CULL_FACE),oe!==H&&(oe===id?i.cullFace(i.BACK):oe===qy?i.cullFace(i.FRONT):i.cullFace(i.FRONT_AND_BACK))):Dt(i.CULL_FACE),H=oe}function vt(oe){oe!==Q&&(se&&i.lineWidth(oe),Q=oe)}function ut(oe,at,xt){oe?(tt(i.POLYGON_OFFSET_FILL),(Y!==at||ne!==xt)&&(i.polygonOffset(at,xt),Y=at,ne=xt)):Dt(i.POLYGON_OFFSET_FILL)}function Tt(oe){oe?tt(i.SCISSOR_TEST):Dt(i.SCISSOR_TEST)}function fn(oe){oe===void 0&&(oe=i.TEXTURE0+ee-1),de!==oe&&(i.activeTexture(oe),de=oe)}function bn(oe,at,xt){xt===void 0&&(de===null?xt=i.TEXTURE0+ee-1:xt=de);let Ut=ye[xt];Ut===void 0&&(Ut={type:void 0,texture:void 0},ye[xt]=Ut),(Ut.type!==oe||Ut.texture!==at)&&(de!==xt&&(i.activeTexture(xt),de=xt),i.bindTexture(oe,at||nt[oe]),Ut.type=oe,Ut.texture=at)}function he(){const oe=ye[de];oe!==void 0&&oe.type!==void 0&&(i.bindTexture(oe.type,null),oe.type=void 0,oe.texture=void 0)}function Z(){try{i.compressedTexImage2D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function De(){try{i.compressedTexImage3D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function ze(){try{i.texSubImage2D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function ft(){try{i.texSubImage3D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function We(){try{i.compressedTexSubImage2D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Zt(){try{i.compressedTexSubImage3D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function St(){try{i.texStorage2D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function $t(){try{i.texStorage3D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Yt(){try{i.texImage2D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function yt(){try{i.texImage3D(...arguments)}catch(oe){console.error("THREE.WebGLState:",oe)}}function Bt(oe){et.equals(oe)===!1&&(i.scissor(oe.x,oe.y,oe.z,oe.w),et.copy(oe))}function vn(oe){Pt.equals(oe)===!1&&(i.viewport(oe.x,oe.y,oe.z,oe.w),Pt.copy(oe))}function ge(oe,at){let xt=u.get(at);xt===void 0&&(xt=new WeakMap,u.set(at,xt));let Ut=xt.get(oe);Ut===void 0&&(Ut=i.getUniformBlockIndex(at,oe.name),xt.set(oe,Ut))}function Be(oe,at){const Ut=u.get(at).get(oe);l.get(at)!==Ut&&(i.uniformBlockBinding(at,Ut,oe.__bindingPointIndex),l.set(at,Ut))}function bt(){i.disable(i.BLEND),i.disable(i.CULL_FACE),i.disable(i.DEPTH_TEST),i.disable(i.POLYGON_OFFSET_FILL),i.disable(i.SCISSOR_TEST),i.disable(i.STENCIL_TEST),i.disable(i.SAMPLE_ALPHA_TO_COVERAGE),i.blendEquation(i.FUNC_ADD),i.blendFunc(i.ONE,i.ZERO),i.blendFuncSeparate(i.ONE,i.ZERO,i.ONE,i.ZERO),i.blendColor(0,0,0,0),i.colorMask(!0,!0,!0,!0),i.clearColor(0,0,0,0),i.depthMask(!0),i.depthFunc(i.LESS),o.setReversed(!1),i.clearDepth(1),i.stencilMask(4294967295),i.stencilFunc(i.ALWAYS,0,4294967295),i.stencilOp(i.KEEP,i.KEEP,i.KEEP),i.clearStencil(0),i.cullFace(i.BACK),i.frontFace(i.CCW),i.polygonOffset(0,0),i.activeTexture(i.TEXTURE0),i.bindFramebuffer(i.FRAMEBUFFER,null),i.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),i.bindFramebuffer(i.READ_FRAMEBUFFER,null),i.useProgram(null),i.lineWidth(1),i.scissor(0,0,i.canvas.width,i.canvas.height),i.viewport(0,0,i.canvas.width,i.canvas.height),c={},de=null,ye={},A={},m=new WeakMap,_=[],b=null,M=!1,w=null,T=null,N=null,P=null,I=null,B=null,F=null,O=new Et(0,0,0),V=0,U=!1,z=null,H=null,Q=null,Y=null,ne=null,et.set(0,0,i.canvas.width,i.canvas.height),Pt.set(0,0,i.canvas.width,i.canvas.height),s.reset(),o.reset(),a.reset()}return{buffers:{color:s,depth:o,stencil:a},enable:tt,disable:Dt,bindFramebuffer:Rt,drawBuffers:It,useProgram:yn,setBlending:Je,setMaterial:Xe,setFlipSided:ht,setCullFace:Ze,setLineWidth:vt,setPolygonOffset:ut,setScissorTest:Tt,activeTexture:fn,bindTexture:bn,unbindTexture:he,compressedTexImage2D:Z,compressedTexImage3D:De,texImage2D:Yt,texImage3D:yt,updateUBOMapping:ge,uniformBlockBinding:Be,texStorage2D:St,texStorage3D:$t,texSubImage2D:ze,texSubImage3D:ft,compressedTexSubImage2D:We,compressedTexSubImage3D:Zt,scissor:Bt,viewport:vn,reset:bt}}function bq(i,e,t,n,r,s,o){const a=e.has("WEBGL_multisampled_render_to_texture")?e.get("WEBGL_multisampled_render_to_texture"):null,l=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),u=new Ge,c=new WeakMap;let A;const m=new WeakMap;let _=!1;try{_=typeof OffscreenCanvas<"u"&&new OffscreenCanvas(1,1).getContext("2d")!==null}catch{}function b(he,Z){return _?new OffscreenCanvas(he,Z):a8("canvas")}function M(he,Z,De){let ze=1;const ft=bn(he);if((ft.width>De||ft.height>De)&&(ze=De/Math.max(ft.width,ft.height)),ze<1)if(typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&he instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&he instanceof ImageBitmap||typeof VideoFrame<"u"&&he instanceof VideoFrame){const We=Math.floor(ze*ft.width),Zt=Math.floor(ze*ft.height);A===void 0&&(A=b(We,Zt));const St=Z?b(We,Zt):A;return St.width=We,St.height=Zt,St.getContext("2d").drawImage(he,0,0,We,Zt),console.warn("THREE.WebGLRenderer: Texture has been resized from ("+ft.width+"x"+ft.height+") to ("+We+"x"+Zt+")."),St}else return"data"in he&&console.warn("THREE.WebGLRenderer: Image in DataTexture is too big ("+ft.width+"x"+ft.height+")."),he;return he}function w(he){return he.generateMipmaps}function T(he){i.generateMipmap(he)}function N(he){return he.isWebGLCubeRenderTarget?i.TEXTURE_CUBE_MAP:he.isWebGL3DRenderTarget?i.TEXTURE_3D:he.isWebGLArrayRenderTarget||he.isCompressedArrayTexture?i.TEXTURE_2D_ARRAY:i.TEXTURE_2D}function P(he,Z,De,ze,ft=!1){if(he!==null){if(i[he]!==void 0)return i[he];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+he+"'")}let We=Z;if(Z===i.RED&&(De===i.FLOAT&&(We=i.R32F),De===i.HALF_FLOAT&&(We=i.R16F),De===i.UNSIGNED_BYTE&&(We=i.R8)),Z===i.RED_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.R8UI),De===i.UNSIGNED_SHORT&&(We=i.R16UI),De===i.UNSIGNED_INT&&(We=i.R32UI),De===i.BYTE&&(We=i.R8I),De===i.SHORT&&(We=i.R16I),De===i.INT&&(We=i.R32I)),Z===i.RG&&(De===i.FLOAT&&(We=i.RG32F),De===i.HALF_FLOAT&&(We=i.RG16F),De===i.UNSIGNED_BYTE&&(We=i.RG8)),Z===i.RG_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.RG8UI),De===i.UNSIGNED_SHORT&&(We=i.RG16UI),De===i.UNSIGNED_INT&&(We=i.RG32UI),De===i.BYTE&&(We=i.RG8I),De===i.SHORT&&(We=i.RG16I),De===i.INT&&(We=i.RG32I)),Z===i.RGB_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.RGB8UI),De===i.UNSIGNED_SHORT&&(We=i.RGB16UI),De===i.UNSIGNED_INT&&(We=i.RGB32UI),De===i.BYTE&&(We=i.RGB8I),De===i.SHORT&&(We=i.RGB16I),De===i.INT&&(We=i.RGB32I)),Z===i.RGBA_INTEGER&&(De===i.UNSIGNED_BYTE&&(We=i.RGBA8UI),De===i.UNSIGNED_SHORT&&(We=i.RGBA16UI),De===i.UNSIGNED_INT&&(We=i.RGBA32UI),De===i.BYTE&&(We=i.RGBA8I),De===i.SHORT&&(We=i.RGBA16I),De===i.INT&&(We=i.RGBA32I)),Z===i.RGB&&De===i.UNSIGNED_INT_5_9_9_9_REV&&(We=i.RGB9_E5),Z===i.RGBA){const Zt=ft?mc:Sn.getTransfer(ze);De===i.FLOAT&&(We=i.RGBA32F),De===i.HALF_FLOAT&&(We=i.RGBA16F),De===i.UNSIGNED_BYTE&&(We=Zt===qt?i.SRGB8_ALPHA8:i.RGBA8),De===i.UNSIGNED_SHORT_4_4_4_4&&(We=i.RGBA4),De===i.UNSIGNED_SHORT_5_5_5_1&&(We=i.RGB5_A1)}return(We===i.R16F||We===i.R32F||We===i.RG16F||We===i.RG32F||We===i.RGBA16F||We===i.RGBA32F)&&e.get("EXT_color_buffer_float"),We}function I(he,Z){let De;return he?Z===null||Z===Oi||Z===Ho?De=i.DEPTH24_STENCIL8:Z===nr?De=i.DEPTH32F_STENCIL8:Z===qa&&(De=i.DEPTH24_STENCIL8,console.warn("DepthTexture: 16 bit depth attachment is not supported with stencil. Using 24-bit attachment.")):Z===null||Z===Oi||Z===Ho?De=i.DEPTH_COMPONENT24:Z===nr?De=i.DEPTH_COMPONENT32F:Z===qa&&(De=i.DEPTH_COMPONENT16),De}function B(he,Z){return w(he)===!0||he.isFramebufferTexture&&he.minFilter!==qi&&he.minFilter!==Wi?Math.log2(Math.max(Z.width,Z.height))+1:he.mipmaps!==void 0&&he.mipmaps.length>0?he.mipmaps.length:he.isCompressedTexture&&Array.isArray(he.image)?Z.mipmaps.length:1}function F(he){const Z=he.target;Z.removeEventListener("dispose",F),V(Z),Z.isVideoTexture&&c.delete(Z)}function O(he){const Z=he.target;Z.removeEventListener("dispose",O),z(Z)}function V(he){const Z=n.get(he);if(Z.__webglInit===void 0)return;const De=he.source,ze=m.get(De);if(ze){const ft=ze[Z.__cacheKey];ft.usedTimes--,ft.usedTimes===0&&U(he),Object.keys(ze).length===0&&m.delete(De)}n.remove(he)}function U(he){const Z=n.get(he);i.deleteTexture(Z.__webglTexture);const De=he.source,ze=m.get(De);delete ze[Z.__cacheKey],o.memory.textures--}function z(he){const Z=n.get(he);if(he.depthTexture&&(he.depthTexture.dispose(),n.remove(he.depthTexture)),he.isWebGLCubeRenderTarget)for(let ze=0;ze<6;ze++){if(Array.isArray(Z.__webglFramebuffer[ze]))for(let ft=0;ft<Z.__webglFramebuffer[ze].length;ft++)i.deleteFramebuffer(Z.__webglFramebuffer[ze][ft]);else i.deleteFramebuffer(Z.__webglFramebuffer[ze]);Z.__webglDepthbuffer&&i.deleteRenderbuffer(Z.__webglDepthbuffer[ze])}else{if(Array.isArray(Z.__webglFramebuffer))for(let ze=0;ze<Z.__webglFramebuffer.length;ze++)i.deleteFramebuffer(Z.__webglFramebuffer[ze]);else i.deleteFramebuffer(Z.__webglFramebuffer);if(Z.__webglDepthbuffer&&i.deleteRenderbuffer(Z.__webglDepthbuffer),Z.__webglMultisampledFramebuffer&&i.deleteFramebuffer(Z.__webglMultisampledFramebuffer),Z.__webglColorRenderbuffer)for(let ze=0;ze<Z.__webglColorRenderbuffer.length;ze++)Z.__webglColorRenderbuffer[ze]&&i.deleteRenderbuffer(Z.__webglColorRenderbuffer[ze]);Z.__webglDepthRenderbuffer&&i.deleteRenderbuffer(Z.__webglDepthRenderbuffer)}const De=he.textures;for(let ze=0,ft=De.length;ze<ft;ze++){const We=n.get(De[ze]);We.__webglTexture&&(i.deleteTexture(We.__webglTexture),o.memory.textures--),n.remove(De[ze])}n.remove(he)}let H=0;function Q(){H=0}function Y(){const he=H;return he>=r.maxTextures&&console.warn("THREE.WebGLTextures: Trying to use "+he+" texture units while this GPU supports only "+r.maxTextures),H+=1,he}function ne(he){const Z=[];return Z.push(he.wrapS),Z.push(he.wrapT),Z.push(he.wrapR||0),Z.push(he.magFilter),Z.push(he.minFilter),Z.push(he.anisotropy),Z.push(he.internalFormat),Z.push(he.format),Z.push(he.type),Z.push(he.generateMipmaps),Z.push(he.premultiplyAlpha),Z.push(he.flipY),Z.push(he.unpackAlignment),Z.push(he.colorSpace),Z.join()}function ee(he,Z){const De=n.get(he);if(he.isVideoTexture&&Tt(he),he.isRenderTargetTexture===!1&&he.isExternalTexture!==!0&&he.version>0&&De.__version!==he.version){const ze=he.image;if(ze===null)console.warn("THREE.WebGLRenderer: Texture marked for update but no image data found.");else if(ze.complete===!1)console.warn("THREE.WebGLRenderer: Texture marked for update but image is incomplete");else{nt(De,he,Z);return}}else he.isExternalTexture&&(De.__webglTexture=he.sourceTexture?he.sourceTexture:null);t.bindTexture(i.TEXTURE_2D,De.__webglTexture,i.TEXTURE0+Z)}function se(he,Z){const De=n.get(he);if(he.isRenderTargetTexture===!1&&he.version>0&&De.__version!==he.version){nt(De,he,Z);return}t.bindTexture(i.TEXTURE_2D_ARRAY,De.__webglTexture,i.TEXTURE0+Z)}function pe(he,Z){const De=n.get(he);if(he.isRenderTargetTexture===!1&&he.version>0&&De.__version!==he.version){nt(De,he,Z);return}t.bindTexture(i.TEXTURE_3D,De.__webglTexture,i.TEXTURE0+Z)}function re(he,Z){const De=n.get(he);if(he.version>0&&De.__version!==he.version){tt(De,he,Z);return}t.bindTexture(i.TEXTURE_CUBE_MAP,De.__webglTexture,i.TEXTURE0+Z)}const de={[n1]:i.REPEAT,[xo]:i.CLAMP_TO_EDGE,[i1]:i.MIRRORED_REPEAT},ye={[qi]:i.NEAREST,[V8]:i.NEAREST_MIPMAP_NEAREST,[R0]:i.NEAREST_MIPMAP_LINEAR,[Wi]:i.LINEAR,[su]:i.LINEAR_MIPMAP_NEAREST,[Fs]:i.LINEAR_MIPMAP_LINEAR},Pe={[b9]:i.NEVER,[E9]:i.ALWAYS,[H8]:i.LESS,[W8]:i.LEQUAL,[S9]:i.EQUAL,[M9]:i.GEQUAL,[T9]:i.GREATER,[w9]:i.NOTEQUAL};function Qe(he,Z){if(Z.type===nr&&e.has("OES_texture_float_linear")===!1&&(Z.magFilter===Wi||Z.magFilter===su||Z.magFilter===R0||Z.magFilter===Fs||Z.minFilter===Wi||Z.minFilter===su||Z.minFilter===R0||Z.minFilter===Fs)&&console.warn("THREE.WebGLRenderer: Unable to use linear filtering with floating point textures. OES_texture_float_linear not supported on this device."),i.texParameteri(he,i.TEXTURE_WRAP_S,de[Z.wrapS]),i.texParameteri(he,i.TEXTURE_WRAP_T,de[Z.wrapT]),(he===i.TEXTURE_3D||he===i.TEXTURE_2D_ARRAY)&&i.texParameteri(he,i.TEXTURE_WRAP_R,de[Z.wrapR]),i.texParameteri(he,i.TEXTURE_MAG_FILTER,ye[Z.magFilter]),i.texParameteri(he,i.TEXTURE_MIN_FILTER,ye[Z.minFilter]),Z.compareFunction&&(i.texParameteri(he,i.TEXTURE_COMPARE_MODE,i.COMPARE_REF_TO_TEXTURE),i.texParameteri(he,i.TEXTURE_COMPARE_FUNC,Pe[Z.compareFunction])),e.has("EXT_texture_filter_anisotropic")===!0){if(Z.magFilter===qi||Z.minFilter!==R0&&Z.minFilter!==Fs||Z.type===nr&&e.has("OES_texture_float_linear")===!1)return;if(Z.anisotropy>1||n.get(Z).__currentAnisotropy){const De=e.get("EXT_texture_filter_anisotropic");i.texParameterf(he,De.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(Z.anisotropy,r.getMaxAnisotropy())),n.get(Z).__currentAnisotropy=Z.anisotropy}}}function et(he,Z){let De=!1;he.__webglInit===void 0&&(he.__webglInit=!0,Z.addEventListener("dispose",F));const ze=Z.source;let ft=m.get(ze);ft===void 0&&(ft={},m.set(ze,ft));const We=ne(Z);if(We!==he.__cacheKey){ft[We]===void 0&&(ft[We]={texture:i.createTexture(),usedTimes:0},o.memory.textures++,De=!0),ft[We].usedTimes++;const Zt=ft[he.__cacheKey];Zt!==void 0&&(ft[he.__cacheKey].usedTimes--,Zt.usedTimes===0&&U(Z)),he.__cacheKey=We,he.__webglTexture=ft[We].texture}return De}function Pt(he,Z,De){return Math.floor(Math.floor(he/De)/Z)}function Ne(he,Z,De,ze){const We=he.updateRanges;if(We.length===0)t.texSubImage2D(i.TEXTURE_2D,0,0,0,Z.width,Z.height,De,ze,Z.data);else{We.sort((yt,Bt)=>yt.start-Bt.start);let Zt=0;for(let yt=1;yt<We.length;yt++){const Bt=We[Zt],vn=We[yt],ge=Bt.start+Bt.count,Be=Pt(vn.start,Z.width,4),bt=Pt(Bt.start,Z.width,4);vn.start<=ge+1&&Be===bt&&Pt(vn.start+vn.count-1,Z.width,4)===Be?Bt.count=Math.max(Bt.count,vn.start+vn.count-Bt.start):(++Zt,We[Zt]=vn)}We.length=Zt+1;const St=i.getParameter(i.UNPACK_ROW_LENGTH),$t=i.getParameter(i.UNPACK_SKIP_PIXELS),Yt=i.getParameter(i.UNPACK_SKIP_ROWS);i.pixelStorei(i.UNPACK_ROW_LENGTH,Z.width);for(let yt=0,Bt=We.length;yt<Bt;yt++){const vn=We[yt],ge=Math.floor(vn.start/4),Be=Math.ceil(vn.count/4),bt=ge%Z.width,oe=Math.floor(ge/Z.width),at=Be,xt=1;i.pixelStorei(i.UNPACK_SKIP_PIXELS,bt),i.pixelStorei(i.UNPACK_SKIP_ROWS,oe),t.texSubImage2D(i.TEXTURE_2D,0,bt,oe,at,xt,De,ze,Z.data)}he.clearUpdateRanges(),i.pixelStorei(i.UNPACK_ROW_LENGTH,St),i.pixelStorei(i.UNPACK_SKIP_PIXELS,$t),i.pixelStorei(i.UNPACK_SKIP_ROWS,Yt)}}function nt(he,Z,De){let ze=i.TEXTURE_2D;(Z.isDataArrayTexture||Z.isCompressedArrayTexture)&&(ze=i.TEXTURE_2D_ARRAY),Z.isData3DTexture&&(ze=i.TEXTURE_3D);const ft=et(he,Z),We=Z.source;t.bindTexture(ze,he.__webglTexture,i.TEXTURE0+De);const Zt=n.get(We);if(We.version!==Zt.__version||ft===!0){t.activeTexture(i.TEXTURE0+De);const St=Sn.getPrimaries(Sn.workingColorSpace),$t=Z.colorSpace===vo?null:Sn.getPrimaries(Z.colorSpace),Yt=Z.colorSpace===vo||St===$t?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Z.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Z.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,Yt);let yt=M(Z.image,!1,r.maxTextureSize);yt=fn(Z,yt);const Bt=s.convert(Z.format,Z.colorSpace),vn=s.convert(Z.type);let ge=P(Z.internalFormat,Bt,vn,Z.colorSpace,Z.isVideoTexture);Qe(ze,Z);let Be;const bt=Z.mipmaps,oe=Z.isVideoTexture!==!0,at=Zt.__version===void 0||ft===!0,xt=We.dataReady,Ut=B(Z,yt);if(Z.isDepthTexture)ge=I(Z.format===jo,Z.type),at&&(oe?t.texStorage2D(i.TEXTURE_2D,1,ge,yt.width,yt.height):t.texImage2D(i.TEXTURE_2D,0,ge,yt.width,yt.height,0,Bt,vn,null));else if(Z.isDataTexture)if(bt.length>0){oe&&at&&t.texStorage2D(i.TEXTURE_2D,Ut,ge,bt[0].width,bt[0].height);for(let _t=0,rt=bt.length;_t<rt;_t++)Be=bt[_t],oe?xt&&t.texSubImage2D(i.TEXTURE_2D,_t,0,0,Be.width,Be.height,Bt,vn,Be.data):t.texImage2D(i.TEXTURE_2D,_t,ge,Be.width,Be.height,0,Bt,vn,Be.data);Z.generateMipmaps=!1}else oe?(at&&t.texStorage2D(i.TEXTURE_2D,Ut,ge,yt.width,yt.height),xt&&Ne(Z,yt,Bt,vn)):t.texImage2D(i.TEXTURE_2D,0,ge,yt.width,yt.height,0,Bt,vn,yt.data);else if(Z.isCompressedTexture)if(Z.isCompressedArrayTexture){oe&&at&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ut,ge,bt[0].width,bt[0].height,yt.depth);for(let _t=0,rt=bt.length;_t<rt;_t++)if(Be=bt[_t],Z.format!==Zi)if(Bt!==null)if(oe){if(xt)if(Z.layerUpdates.size>0){const Ot=bg(Be.width,Be.height,Z.format,Z.type);for(const cn of Z.layerUpdates){const ai=Be.data.subarray(cn*Ot/Be.data.BYTES_PER_ELEMENT,(cn+1)*Ot/Be.data.BYTES_PER_ELEMENT);t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,_t,0,0,cn,Be.width,Be.height,1,Bt,ai)}Z.clearLayerUpdates()}else t.compressedTexSubImage3D(i.TEXTURE_2D_ARRAY,_t,0,0,0,Be.width,Be.height,yt.depth,Bt,Be.data)}else t.compressedTexImage3D(i.TEXTURE_2D_ARRAY,_t,ge,Be.width,Be.height,yt.depth,0,Be.data,0,0);else console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()");else oe?xt&&t.texSubImage3D(i.TEXTURE_2D_ARRAY,_t,0,0,0,Be.width,Be.height,yt.depth,Bt,vn,Be.data):t.texImage3D(i.TEXTURE_2D_ARRAY,_t,ge,Be.width,Be.height,yt.depth,0,Bt,vn,Be.data)}else{oe&&at&&t.texStorage2D(i.TEXTURE_2D,Ut,ge,bt[0].width,bt[0].height);for(let _t=0,rt=bt.length;_t<rt;_t++)Be=bt[_t],Z.format!==Zi?Bt!==null?oe?xt&&t.compressedTexSubImage2D(i.TEXTURE_2D,_t,0,0,Be.width,Be.height,Bt,Be.data):t.compressedTexImage2D(i.TEXTURE_2D,_t,ge,Be.width,Be.height,0,Be.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):oe?xt&&t.texSubImage2D(i.TEXTURE_2D,_t,0,0,Be.width,Be.height,Bt,vn,Be.data):t.texImage2D(i.TEXTURE_2D,_t,ge,Be.width,Be.height,0,Bt,vn,Be.data)}else if(Z.isDataArrayTexture)if(oe){if(at&&t.texStorage3D(i.TEXTURE_2D_ARRAY,Ut,ge,yt.width,yt.height,yt.depth),xt)if(Z.layerUpdates.size>0){const _t=bg(yt.width,yt.height,Z.format,Z.type);for(const rt of Z.layerUpdates){const Ot=yt.data.subarray(rt*_t/yt.data.BYTES_PER_ELEMENT,(rt+1)*_t/yt.data.BYTES_PER_ELEMENT);t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,rt,yt.width,yt.height,1,Bt,vn,Ot)}Z.clearLayerUpdates()}else t.texSubImage3D(i.TEXTURE_2D_ARRAY,0,0,0,0,yt.width,yt.height,yt.depth,Bt,vn,yt.data)}else t.texImage3D(i.TEXTURE_2D_ARRAY,0,ge,yt.width,yt.height,yt.depth,0,Bt,vn,yt.data);else if(Z.isData3DTexture)oe?(at&&t.texStorage3D(i.TEXTURE_3D,Ut,ge,yt.width,yt.height,yt.depth),xt&&t.texSubImage3D(i.TEXTURE_3D,0,0,0,0,yt.width,yt.height,yt.depth,Bt,vn,yt.data)):t.texImage3D(i.TEXTURE_3D,0,ge,yt.width,yt.height,yt.depth,0,Bt,vn,yt.data);else if(Z.isFramebufferTexture){if(at)if(oe)t.texStorage2D(i.TEXTURE_2D,Ut,ge,yt.width,yt.height);else{let _t=yt.width,rt=yt.height;for(let Ot=0;Ot<Ut;Ot++)t.texImage2D(i.TEXTURE_2D,Ot,ge,_t,rt,0,Bt,vn,null),_t>>=1,rt>>=1}}else if(bt.length>0){if(oe&&at){const _t=bn(bt[0]);t.texStorage2D(i.TEXTURE_2D,Ut,ge,_t.width,_t.height)}for(let _t=0,rt=bt.length;_t<rt;_t++)Be=bt[_t],oe?xt&&t.texSubImage2D(i.TEXTURE_2D,_t,0,0,Bt,vn,Be):t.texImage2D(i.TEXTURE_2D,_t,ge,Bt,vn,Be);Z.generateMipmaps=!1}else if(oe){if(at){const _t=bn(yt);t.texStorage2D(i.TEXTURE_2D,Ut,ge,_t.width,_t.height)}xt&&t.texSubImage2D(i.TEXTURE_2D,0,0,0,Bt,vn,yt)}else t.texImage2D(i.TEXTURE_2D,0,ge,Bt,vn,yt);w(Z)&&T(ze),Zt.__version=We.version,Z.onUpdate&&Z.onUpdate(Z)}he.__version=Z.version}function tt(he,Z,De){if(Z.image.length!==6)return;const ze=et(he,Z),ft=Z.source;t.bindTexture(i.TEXTURE_CUBE_MAP,he.__webglTexture,i.TEXTURE0+De);const We=n.get(ft);if(ft.version!==We.__version||ze===!0){t.activeTexture(i.TEXTURE0+De);const Zt=Sn.getPrimaries(Sn.workingColorSpace),St=Z.colorSpace===vo?null:Sn.getPrimaries(Z.colorSpace),$t=Z.colorSpace===vo||Zt===St?i.NONE:i.BROWSER_DEFAULT_WEBGL;i.pixelStorei(i.UNPACK_FLIP_Y_WEBGL,Z.flipY),i.pixelStorei(i.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Z.premultiplyAlpha),i.pixelStorei(i.UNPACK_ALIGNMENT,Z.unpackAlignment),i.pixelStorei(i.UNPACK_COLORSPACE_CONVERSION_WEBGL,$t);const Yt=Z.isCompressedTexture||Z.image[0].isCompressedTexture,yt=Z.image[0]&&Z.image[0].isDataTexture,Bt=[];for(let rt=0;rt<6;rt++)!Yt&&!yt?Bt[rt]=M(Z.image[rt],!0,r.maxCubemapSize):Bt[rt]=yt?Z.image[rt].image:Z.image[rt],Bt[rt]=fn(Z,Bt[rt]);const vn=Bt[0],ge=s.convert(Z.format,Z.colorSpace),Be=s.convert(Z.type),bt=P(Z.internalFormat,ge,Be,Z.colorSpace),oe=Z.isVideoTexture!==!0,at=We.__version===void 0||ze===!0,xt=ft.dataReady;let Ut=B(Z,vn);Qe(i.TEXTURE_CUBE_MAP,Z);let _t;if(Yt){oe&&at&&t.texStorage2D(i.TEXTURE_CUBE_MAP,Ut,bt,vn.width,vn.height);for(let rt=0;rt<6;rt++){_t=Bt[rt].mipmaps;for(let Ot=0;Ot<_t.length;Ot++){const cn=_t[Ot];Z.format!==Zi?ge!==null?oe?xt&&t.compressedTexSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot,0,0,cn.width,cn.height,ge,cn.data):t.compressedTexImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot,bt,cn.width,cn.height,0,cn.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .setTextureCube()"):oe?xt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot,0,0,cn.width,cn.height,ge,Be,cn.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot,bt,cn.width,cn.height,0,ge,Be,cn.data)}}}else{if(_t=Z.mipmaps,oe&&at){_t.length>0&&Ut++;const rt=bn(Bt[0]);t.texStorage2D(i.TEXTURE_CUBE_MAP,Ut,bt,rt.width,rt.height)}for(let rt=0;rt<6;rt++)if(yt){oe?xt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,0,0,Bt[rt].width,Bt[rt].height,ge,Be,Bt[rt].data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,bt,Bt[rt].width,Bt[rt].height,0,ge,Be,Bt[rt].data);for(let Ot=0;Ot<_t.length;Ot++){const ai=_t[Ot].image[rt].image;oe?xt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot+1,0,0,ai.width,ai.height,ge,Be,ai.data):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot+1,bt,ai.width,ai.height,0,ge,Be,ai.data)}}else{oe?xt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,0,0,ge,Be,Bt[rt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,bt,ge,Be,Bt[rt]);for(let Ot=0;Ot<_t.length;Ot++){const cn=_t[Ot];oe?xt&&t.texSubImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot+1,0,0,ge,Be,cn.image[rt]):t.texImage2D(i.TEXTURE_CUBE_MAP_POSITIVE_X+rt,Ot+1,bt,ge,Be,cn.image[rt])}}}w(Z)&&T(i.TEXTURE_CUBE_MAP),We.__version=ft.version,Z.onUpdate&&Z.onUpdate(Z)}he.__version=Z.version}function Dt(he,Z,De,ze,ft,We){const Zt=s.convert(De.format,De.colorSpace),St=s.convert(De.type),$t=P(De.internalFormat,Zt,St,De.colorSpace),Yt=n.get(Z),yt=n.get(De);if(yt.__renderTarget=Z,!Yt.__hasExternalTextures){const Bt=Math.max(1,Z.width>>We),vn=Math.max(1,Z.height>>We);ft===i.TEXTURE_3D||ft===i.TEXTURE_2D_ARRAY?t.texImage3D(ft,We,$t,Bt,vn,Z.depth,0,Zt,St,null):t.texImage2D(ft,We,$t,Bt,vn,0,Zt,St,null)}t.bindFramebuffer(i.FRAMEBUFFER,he),ut(Z)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,ze,ft,yt.__webglTexture,0,vt(Z)):(ft===i.TEXTURE_2D||ft>=i.TEXTURE_CUBE_MAP_POSITIVE_X&&ft<=i.TEXTURE_CUBE_MAP_NEGATIVE_Z)&&i.framebufferTexture2D(i.FRAMEBUFFER,ze,ft,yt.__webglTexture,We),t.bindFramebuffer(i.FRAMEBUFFER,null)}function Rt(he,Z,De){if(i.bindRenderbuffer(i.RENDERBUFFER,he),Z.depthBuffer){const ze=Z.depthTexture,ft=ze&&ze.isDepthTexture?ze.type:null,We=I(Z.stencilBuffer,ft),Zt=Z.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,St=vt(Z);ut(Z)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,St,We,Z.width,Z.height):De?i.renderbufferStorageMultisample(i.RENDERBUFFER,St,We,Z.width,Z.height):i.renderbufferStorage(i.RENDERBUFFER,We,Z.width,Z.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,Zt,i.RENDERBUFFER,he)}else{const ze=Z.textures;for(let ft=0;ft<ze.length;ft++){const We=ze[ft],Zt=s.convert(We.format,We.colorSpace),St=s.convert(We.type),$t=P(We.internalFormat,Zt,St,We.colorSpace),Yt=vt(Z);De&&ut(Z)===!1?i.renderbufferStorageMultisample(i.RENDERBUFFER,Yt,$t,Z.width,Z.height):ut(Z)?a.renderbufferStorageMultisampleEXT(i.RENDERBUFFER,Yt,$t,Z.width,Z.height):i.renderbufferStorage(i.RENDERBUFFER,$t,Z.width,Z.height)}}i.bindRenderbuffer(i.RENDERBUFFER,null)}function It(he,Z){if(Z&&Z.isWebGLCubeRenderTarget)throw new Error("Depth Texture with cube render targets is not supported");if(t.bindFramebuffer(i.FRAMEBUFFER,he),!(Z.depthTexture&&Z.depthTexture.isDepthTexture))throw new Error("renderTarget.depthTexture must be an instance of THREE.DepthTexture");const ze=n.get(Z.depthTexture);ze.__renderTarget=Z,(!ze.__webglTexture||Z.depthTexture.image.width!==Z.width||Z.depthTexture.image.height!==Z.height)&&(Z.depthTexture.image.width=Z.width,Z.depthTexture.image.height=Z.height,Z.depthTexture.needsUpdate=!0),ee(Z.depthTexture,0);const ft=ze.__webglTexture,We=vt(Z);if(Z.depthTexture.format===Wo)ut(Z)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ft,0,We):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_ATTACHMENT,i.TEXTURE_2D,ft,0);else if(Z.depthTexture.format===jo)ut(Z)?a.framebufferTexture2DMultisampleEXT(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ft,0,We):i.framebufferTexture2D(i.FRAMEBUFFER,i.DEPTH_STENCIL_ATTACHMENT,i.TEXTURE_2D,ft,0);else throw new Error("Unknown depthTexture format")}function yn(he){const Z=n.get(he),De=he.isWebGLCubeRenderTarget===!0;if(Z.__boundDepthTexture!==he.depthTexture){const ze=he.depthTexture;if(Z.__depthDisposeCallback&&Z.__depthDisposeCallback(),ze){const ft=()=>{delete Z.__boundDepthTexture,delete Z.__depthDisposeCallback,ze.removeEventListener("dispose",ft)};ze.addEventListener("dispose",ft),Z.__depthDisposeCallback=ft}Z.__boundDepthTexture=ze}if(he.depthTexture&&!Z.__autoAllocateDepthBuffer){if(De)throw new Error("target.depthTexture not supported in Cube render targets");const ze=he.texture.mipmaps;ze&&ze.length>0?It(Z.__webglFramebuffer[0],he):It(Z.__webglFramebuffer,he)}else if(De){Z.__webglDepthbuffer=[];for(let ze=0;ze<6;ze++)if(t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglFramebuffer[ze]),Z.__webglDepthbuffer[ze]===void 0)Z.__webglDepthbuffer[ze]=i.createRenderbuffer(),Rt(Z.__webglDepthbuffer[ze],he,!1);else{const ft=he.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,We=Z.__webglDepthbuffer[ze];i.bindRenderbuffer(i.RENDERBUFFER,We),i.framebufferRenderbuffer(i.FRAMEBUFFER,ft,i.RENDERBUFFER,We)}}else{const ze=he.texture.mipmaps;if(ze&&ze.length>0?t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglFramebuffer[0]):t.bindFramebuffer(i.FRAMEBUFFER,Z.__webglFramebuffer),Z.__webglDepthbuffer===void 0)Z.__webglDepthbuffer=i.createRenderbuffer(),Rt(Z.__webglDepthbuffer,he,!1);else{const ft=he.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,We=Z.__webglDepthbuffer;i.bindRenderbuffer(i.RENDERBUFFER,We),i.framebufferRenderbuffer(i.FRAMEBUFFER,ft,i.RENDERBUFFER,We)}}t.bindFramebuffer(i.FRAMEBUFFER,null)}function Kt(he,Z,De){const ze=n.get(he);Z!==void 0&&Dt(ze.__webglFramebuffer,he,he.texture,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,0),De!==void 0&&yn(he)}function Ae(he){const Z=he.texture,De=n.get(he),ze=n.get(Z);he.addEventListener("dispose",O);const ft=he.textures,We=he.isWebGLCubeRenderTarget===!0,Zt=ft.length>1;if(Zt||(ze.__webglTexture===void 0&&(ze.__webglTexture=i.createTexture()),ze.__version=Z.version,o.memory.textures++),We){De.__webglFramebuffer=[];for(let St=0;St<6;St++)if(Z.mipmaps&&Z.mipmaps.length>0){De.__webglFramebuffer[St]=[];for(let $t=0;$t<Z.mipmaps.length;$t++)De.__webglFramebuffer[St][$t]=i.createFramebuffer()}else De.__webglFramebuffer[St]=i.createFramebuffer()}else{if(Z.mipmaps&&Z.mipmaps.length>0){De.__webglFramebuffer=[];for(let St=0;St<Z.mipmaps.length;St++)De.__webglFramebuffer[St]=i.createFramebuffer()}else De.__webglFramebuffer=i.createFramebuffer();if(Zt)for(let St=0,$t=ft.length;St<$t;St++){const Yt=n.get(ft[St]);Yt.__webglTexture===void 0&&(Yt.__webglTexture=i.createTexture(),o.memory.textures++)}if(he.samples>0&&ut(he)===!1){De.__webglMultisampledFramebuffer=i.createFramebuffer(),De.__webglColorRenderbuffer=[],t.bindFramebuffer(i.FRAMEBUFFER,De.__webglMultisampledFramebuffer);for(let St=0;St<ft.length;St++){const $t=ft[St];De.__webglColorRenderbuffer[St]=i.createRenderbuffer(),i.bindRenderbuffer(i.RENDERBUFFER,De.__webglColorRenderbuffer[St]);const Yt=s.convert($t.format,$t.colorSpace),yt=s.convert($t.type),Bt=P($t.internalFormat,Yt,yt,$t.colorSpace,he.isXRRenderTarget===!0),vn=vt(he);i.renderbufferStorageMultisample(i.RENDERBUFFER,vn,Bt,he.width,he.height),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+St,i.RENDERBUFFER,De.__webglColorRenderbuffer[St])}i.bindRenderbuffer(i.RENDERBUFFER,null),he.depthBuffer&&(De.__webglDepthRenderbuffer=i.createRenderbuffer(),Rt(De.__webglDepthRenderbuffer,he,!0)),t.bindFramebuffer(i.FRAMEBUFFER,null)}}if(We){t.bindTexture(i.TEXTURE_CUBE_MAP,ze.__webglTexture),Qe(i.TEXTURE_CUBE_MAP,Z);for(let St=0;St<6;St++)if(Z.mipmaps&&Z.mipmaps.length>0)for(let $t=0;$t<Z.mipmaps.length;$t++)Dt(De.__webglFramebuffer[St][$t],he,Z,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+St,$t);else Dt(De.__webglFramebuffer[St],he,Z,i.COLOR_ATTACHMENT0,i.TEXTURE_CUBE_MAP_POSITIVE_X+St,0);w(Z)&&T(i.TEXTURE_CUBE_MAP),t.unbindTexture()}else if(Zt){for(let St=0,$t=ft.length;St<$t;St++){const Yt=ft[St],yt=n.get(Yt);let Bt=i.TEXTURE_2D;(he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(Bt=he.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(Bt,yt.__webglTexture),Qe(Bt,Yt),Dt(De.__webglFramebuffer,he,Yt,i.COLOR_ATTACHMENT0+St,Bt,0),w(Yt)&&T(Bt)}t.unbindTexture()}else{let St=i.TEXTURE_2D;if((he.isWebGL3DRenderTarget||he.isWebGLArrayRenderTarget)&&(St=he.isWebGL3DRenderTarget?i.TEXTURE_3D:i.TEXTURE_2D_ARRAY),t.bindTexture(St,ze.__webglTexture),Qe(St,Z),Z.mipmaps&&Z.mipmaps.length>0)for(let $t=0;$t<Z.mipmaps.length;$t++)Dt(De.__webglFramebuffer[$t],he,Z,i.COLOR_ATTACHMENT0,St,$t);else Dt(De.__webglFramebuffer,he,Z,i.COLOR_ATTACHMENT0,St,0);w(Z)&&T(St),t.unbindTexture()}he.depthBuffer&&yn(he)}function Je(he){const Z=he.textures;for(let De=0,ze=Z.length;De<ze;De++){const ft=Z[De];if(w(ft)){const We=N(he),Zt=n.get(ft).__webglTexture;t.bindTexture(We,Zt),T(We),t.unbindTexture()}}}const Xe=[],ht=[];function Ze(he){if(he.samples>0){if(ut(he)===!1){const Z=he.textures,De=he.width,ze=he.height;let ft=i.COLOR_BUFFER_BIT;const We=he.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT,Zt=n.get(he),St=Z.length>1;if(St)for(let Yt=0;Yt<Z.length;Yt++)t.bindFramebuffer(i.FRAMEBUFFER,Zt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Yt,i.RENDERBUFFER,null),t.bindFramebuffer(i.FRAMEBUFFER,Zt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Yt,i.TEXTURE_2D,null,0);t.bindFramebuffer(i.READ_FRAMEBUFFER,Zt.__webglMultisampledFramebuffer);const $t=he.texture.mipmaps;$t&&$t.length>0?t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Zt.__webglFramebuffer[0]):t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Zt.__webglFramebuffer);for(let Yt=0;Yt<Z.length;Yt++){if(he.resolveDepthBuffer&&(he.depthBuffer&&(ft|=i.DEPTH_BUFFER_BIT),he.stencilBuffer&&he.resolveStencilBuffer&&(ft|=i.STENCIL_BUFFER_BIT)),St){i.framebufferRenderbuffer(i.READ_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.RENDERBUFFER,Zt.__webglColorRenderbuffer[Yt]);const yt=n.get(Z[Yt]).__webglTexture;i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0,i.TEXTURE_2D,yt,0)}i.blitFramebuffer(0,0,De,ze,0,0,De,ze,ft,i.NEAREST),l===!0&&(Xe.length=0,ht.length=0,Xe.push(i.COLOR_ATTACHMENT0+Yt),he.depthBuffer&&he.resolveDepthBuffer===!1&&(Xe.push(We),ht.push(We),i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,ht)),i.invalidateFramebuffer(i.READ_FRAMEBUFFER,Xe))}if(t.bindFramebuffer(i.READ_FRAMEBUFFER,null),t.bindFramebuffer(i.DRAW_FRAMEBUFFER,null),St)for(let Yt=0;Yt<Z.length;Yt++){t.bindFramebuffer(i.FRAMEBUFFER,Zt.__webglMultisampledFramebuffer),i.framebufferRenderbuffer(i.FRAMEBUFFER,i.COLOR_ATTACHMENT0+Yt,i.RENDERBUFFER,Zt.__webglColorRenderbuffer[Yt]);const yt=n.get(Z[Yt]).__webglTexture;t.bindFramebuffer(i.FRAMEBUFFER,Zt.__webglFramebuffer),i.framebufferTexture2D(i.DRAW_FRAMEBUFFER,i.COLOR_ATTACHMENT0+Yt,i.TEXTURE_2D,yt,0)}t.bindFramebuffer(i.DRAW_FRAMEBUFFER,Zt.__webglMultisampledFramebuffer)}else if(he.depthBuffer&&he.resolveDepthBuffer===!1&&l){const Z=he.stencilBuffer?i.DEPTH_STENCIL_ATTACHMENT:i.DEPTH_ATTACHMENT;i.invalidateFramebuffer(i.DRAW_FRAMEBUFFER,[Z])}}}function vt(he){return Math.min(r.maxSamples,he.samples)}function ut(he){const Z=n.get(he);return he.samples>0&&e.has("WEBGL_multisampled_render_to_texture")===!0&&Z.__useRenderToTexture!==!1}function Tt(he){const Z=o.render.frame;c.get(he)!==Z&&(c.set(he,Z),he.update())}function fn(he,Z){const De=he.colorSpace,ze=he.format,ft=he.type;return he.isCompressedTexture===!0||he.isVideoTexture===!0||De!==r1&&De!==vo&&(Sn.getTransfer(De)===qt?(ze!==Zi||ft!==ar)&&console.warn("THREE.WebGLTextures: sRGB encoded textures have to use RGBAFormat and UnsignedByteType."):console.error("THREE.WebGLTextures: Unsupported texture color space:",De)),Z}function bn(he){return typeof HTMLImageElement<"u"&&he instanceof HTMLImageElement?(u.width=he.naturalWidth||he.width,u.height=he.naturalHeight||he.height):typeof VideoFrame<"u"&&he instanceof VideoFrame?(u.width=he.displayWidth,u.height=he.displayHeight):(u.width=he.width,u.height=he.height),u}this.allocateTextureUnit=Y,this.resetTextureUnits=Q,this.setTexture2D=ee,this.setTexture2DArray=se,this.setTexture3D=pe,this.setTextureCube=re,this.rebindTextures=Kt,this.setupRenderTarget=Ae,this.updateRenderTargetMipmap=Je,this.updateMultisampleRenderTarget=Ze,this.setupDepthRenderbuffer=yn,this.setupFrameBufferTexture=Dt,this.useMultisampledRTT=ut}function hR(i,e){function t(n,r=vo){let s;const o=Sn.getTransfer(r);if(n===ar)return i.UNSIGNED_BYTE;if(n===z8)return i.UNSIGNED_SHORT_4_4_4_4;if(n===G8)return i.UNSIGNED_SHORT_5_5_5_1;if(n===q8)return i.UNSIGNED_INT_5_9_9_9_REV;if(n===ou)return i.BYTE;if(n===au)return i.SHORT;if(n===qa)return i.UNSIGNED_SHORT;if(n===as)return i.INT;if(n===Oi)return i.UNSIGNED_INT;if(n===nr)return i.FLOAT;if(n===Yr)return i.HALF_FLOAT;if(n===v9)return i.ALPHA;if(n===l5)return i.RGB;if(n===Zi)return i.RGBA;if(n===Wo)return i.DEPTH_COMPONENT;if(n===jo)return i.DEPTH_STENCIL;if(n===Tc)return i.RED;if(n===gu)return i.RED_INTEGER;if(n===nl)return i.RG;if(n===wc)return i.RG_INTEGER;if(n===Mc)return i.RGBA_INTEGER;if(n===lu||n===jl||n===$l||n===Xl)if(o===qt)if(s=e.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(n===lu)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(n===jl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(n===$l)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(n===Xl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=e.get("WEBGL_compressed_texture_s3tc"),s!==null){if(n===lu)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(n===jl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(n===$l)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(n===Xl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(n===B4||n===F4||n===U4||n===O4)if(s=e.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(n===B4)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(n===F4)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(n===U4)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(n===O4)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(n===k4||n===ec||n===tc)if(s=e.get("WEBGL_compressed_texture_etc"),s!==null){if(n===k4||n===ec)return o===qt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(n===tc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(n===nc||n===ic||n===rc||n===sc||n===oc||n===ac||n===lc||n===uc||n===cc||n===hc||n===fc||n===dc||n===Ac||n===pc)if(s=e.get("WEBGL_compressed_texture_astc"),s!==null){if(n===nc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(n===ic)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(n===rc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(n===sc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(n===oc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(n===ac)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(n===lc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(n===uc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(n===cc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(n===hc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(n===fc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(n===dc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(n===Ac)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(n===pc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(n===uu||n===rd||n===sd)if(s=e.get("EXT_texture_compression_bptc"),s!==null){if(n===uu)return o===qt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT;if(n===rd)return s.COMPRESSED_RGB_BPTC_SIGNED_FLOAT_EXT;if(n===sd)return s.COMPRESSED_RGB_BPTC_UNSIGNED_FLOAT_EXT}else return null;if(n===_9||n===V4||n===z4||n===G4)if(s=e.get("EXT_texture_compression_rgtc"),s!==null){if(n===uu)return s.COMPRESSED_RED_RGTC1_EXT;if(n===V4)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(n===z4)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(n===G4)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return n===Ho?i.UNSIGNED_INT_24_8:i[n]!==void 0?i[n]:null}return{convert:t}}class fR extends ur{constructor(e=null){super(),this.sourceTexture=e,this.isExternalTexture=!0}}const Sq=`
void main() {

	gl_Position = vec4( position, 1.0 );

}`,Tq=`
uniform sampler2DArray depthColor;
uniform float depthWidth;
uniform float depthHeight;

void main() {

	vec2 coord = vec2( gl_FragCoord.x / depthWidth, gl_FragCoord.y / depthHeight );

	if ( coord.x >= 1.0 ) {

		gl_FragDepth = texture( depthColor, vec3( coord.x - 1.0, coord.y, 1 ) ).r;

	} else {

		gl_FragDepth = texture( depthColor, vec3( coord.x, coord.y, 0 ) ).r;

	}

}`;class wq{constructor(){this.texture=null,this.mesh=null,this.depthNear=0,this.depthFar=0}init(e,t){if(this.texture===null){const n=new fR(e.texture);(e.depthNear!==t.depthNear||e.depthFar!==t.depthFar)&&(this.depthNear=e.depthNear,this.depthFar=e.depthFar),this.texture=n}}getMesh(e){if(this.texture!==null&&this.mesh===null){const t=e.cameras[0].viewport,n=new To({vertexShader:Sq,fragmentShader:Tq,uniforms:{depthColor:{value:this.texture},depthWidth:{value:t.z},depthHeight:{value:t.w}}});this.mesh=new ei(new Pc(20,20),n)}return this.mesh}reset(){this.texture=null,this.mesh=null}getDepthTexture(){return this.texture}}class Mq extends Ta{constructor(e,t){super();const n=this;let r=null,s=1,o=null,a="local-floor",l=1,u=null,c=null,A=null,m=null,_=null,b=null;const M=new wq,w={},T=t.getContextAttributes();let N=null,P=null;const I=[],B=[],F=new Ge;let O=null;const V=new tr;V.viewport=new rn;const U=new tr;U.viewport=new rn;const z=[V,U],H=new zv;let Q=null,Y=null;this.cameraAutoUpdate=!0,this.enabled=!1,this.isPresenting=!1,this.getController=function(Ne){let nt=I[Ne];return nt===void 0&&(nt=new $h,I[Ne]=nt),nt.getTargetRaySpace()},this.getControllerGrip=function(Ne){let nt=I[Ne];return nt===void 0&&(nt=new $h,I[Ne]=nt),nt.getGripSpace()},this.getHand=function(Ne){let nt=I[Ne];return nt===void 0&&(nt=new $h,I[Ne]=nt),nt.getHandSpace()};function ne(Ne){const nt=B.indexOf(Ne.inputSource);if(nt===-1)return;const tt=I[nt];tt!==void 0&&(tt.update(Ne.inputSource,Ne.frame,u||o),tt.dispatchEvent({type:Ne.type,data:Ne.inputSource}))}function ee(){r.removeEventListener("select",ne),r.removeEventListener("selectstart",ne),r.removeEventListener("selectend",ne),r.removeEventListener("squeeze",ne),r.removeEventListener("squeezestart",ne),r.removeEventListener("squeezeend",ne),r.removeEventListener("end",ee),r.removeEventListener("inputsourceschange",se);for(let Ne=0;Ne<I.length;Ne++){const nt=B[Ne];nt!==null&&(B[Ne]=null,I[Ne].disconnect(nt))}Q=null,Y=null,M.reset();for(const Ne in w)delete w[Ne];e.setRenderTarget(N),_=null,m=null,A=null,r=null,P=null,Pt.stop(),n.isPresenting=!1,e.setPixelRatio(O),e.setSize(F.width,F.height,!1),n.dispatchEvent({type:"sessionend"})}this.setFramebufferScaleFactor=function(Ne){s=Ne,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change framebuffer scale while presenting.")},this.setReferenceSpaceType=function(Ne){a=Ne,n.isPresenting===!0&&console.warn("THREE.WebXRManager: Cannot change reference space type while presenting.")},this.getReferenceSpace=function(){return u||o},this.setReferenceSpace=function(Ne){u=Ne},this.getBaseLayer=function(){return m!==null?m:_},this.getBinding=function(){return A},this.getFrame=function(){return b},this.getSession=function(){return r},this.setSession=async function(Ne){if(r=Ne,r!==null){if(N=e.getRenderTarget(),r.addEventListener("select",ne),r.addEventListener("selectstart",ne),r.addEventListener("selectend",ne),r.addEventListener("squeeze",ne),r.addEventListener("squeezestart",ne),r.addEventListener("squeezeend",ne),r.addEventListener("end",ee),r.addEventListener("inputsourceschange",se),T.xrCompatible!==!0&&await t.makeXRCompatible(),O=e.getPixelRatio(),e.getSize(F),typeof XRWebGLBinding<"u"&&(A=new XRWebGLBinding(r,t)),A!==null&&"createProjectionLayer"in XRWebGLBinding.prototype){let tt=null,Dt=null,Rt=null;T.depth&&(Rt=T.stencil?t.DEPTH24_STENCIL8:t.DEPTH_COMPONENT24,tt=T.stencil?jo:Wo,Dt=T.stencil?Ho:Oi);const It={colorFormat:t.RGBA8,depthFormat:Rt,scaleFactor:s};m=A.createProjectionLayer(It),r.updateRenderState({layers:[m]}),e.setPixelRatio(1),e.setSize(m.textureWidth,m.textureHeight,!1),P=new dl(m.textureWidth,m.textureHeight,{format:Zi,type:ar,depthTexture:new Qo(m.textureWidth,m.textureHeight,Dt,void 0,void 0,void 0,void 0,void 0,void 0,tt),stencilBuffer:T.stencil,colorSpace:e.outputColorSpace,samples:T.antialias?4:0,resolveDepthBuffer:m.ignoreDepthValues===!1,resolveStencilBuffer:m.ignoreDepthValues===!1})}else{const tt={antialias:T.antialias,alpha:!0,depth:T.depth,stencil:T.stencil,framebufferScaleFactor:s};_=new XRWebGLLayer(r,t,tt),r.updateRenderState({baseLayer:_}),e.setPixelRatio(1),e.setSize(_.framebufferWidth,_.framebufferHeight,!1),P=new dl(_.framebufferWidth,_.framebufferHeight,{format:Zi,type:ar,colorSpace:e.outputColorSpace,stencilBuffer:T.stencil,resolveDepthBuffer:_.ignoreDepthValues===!1,resolveStencilBuffer:_.ignoreDepthValues===!1})}P.isXRRenderTarget=!0,this.setFoveation(l),u=null,o=await r.requestReferenceSpace(a),Pt.setContext(r),Pt.start(),n.isPresenting=!0,n.dispatchEvent({type:"sessionstart"})}},this.getEnvironmentBlendMode=function(){if(r!==null)return r.environmentBlendMode},this.getDepthTexture=function(){return M.getDepthTexture()};function se(Ne){for(let nt=0;nt<Ne.removed.length;nt++){const tt=Ne.removed[nt],Dt=B.indexOf(tt);Dt>=0&&(B[Dt]=null,I[Dt].disconnect(tt))}for(let nt=0;nt<Ne.added.length;nt++){const tt=Ne.added[nt];let Dt=B.indexOf(tt);if(Dt===-1){for(let It=0;It<I.length;It++)if(It>=B.length){B.push(tt),Dt=It;break}else if(B[It]===null){B[It]=tt,Dt=It;break}if(Dt===-1)break}const Rt=I[Dt];Rt&&Rt.connect(tt)}}const pe=new J,re=new J;function de(Ne,nt,tt){pe.setFromMatrixPosition(nt.matrixWorld),re.setFromMatrixPosition(tt.matrixWorld);const Dt=pe.distanceTo(re),Rt=nt.projectionMatrix.elements,It=tt.projectionMatrix.elements,yn=Rt[14]/(Rt[10]-1),Kt=Rt[14]/(Rt[10]+1),Ae=(Rt[9]+1)/Rt[5],Je=(Rt[9]-1)/Rt[5],Xe=(Rt[8]-1)/Rt[0],ht=(It[8]+1)/It[0],Ze=yn*Xe,vt=yn*ht,ut=Dt/(-Xe+ht),Tt=ut*-Xe;if(nt.matrixWorld.decompose(Ne.position,Ne.quaternion,Ne.scale),Ne.translateX(Tt),Ne.translateZ(ut),Ne.matrixWorld.compose(Ne.position,Ne.quaternion,Ne.scale),Ne.matrixWorldInverse.copy(Ne.matrixWorld).invert(),Rt[10]===-1)Ne.projectionMatrix.copy(nt.projectionMatrix),Ne.projectionMatrixInverse.copy(nt.projectionMatrixInverse);else{const fn=yn+ut,bn=Kt+ut,he=Ze-Tt,Z=vt+(Dt-Tt),De=Ae*Kt/bn*fn,ze=Je*Kt/bn*fn;Ne.projectionMatrix.makePerspective(he,Z,De,ze,fn,bn),Ne.projectionMatrixInverse.copy(Ne.projectionMatrix).invert()}}function ye(Ne,nt){nt===null?Ne.matrixWorld.copy(Ne.matrix):Ne.matrixWorld.multiplyMatrices(nt.matrixWorld,Ne.matrix),Ne.matrixWorldInverse.copy(Ne.matrixWorld).invert()}this.updateCamera=function(Ne){if(r===null)return;let nt=Ne.near,tt=Ne.far;M.texture!==null&&(M.depthNear>0&&(nt=M.depthNear),M.depthFar>0&&(tt=M.depthFar)),H.near=U.near=V.near=nt,H.far=U.far=V.far=tt,(Q!==H.near||Y!==H.far)&&(r.updateRenderState({depthNear:H.near,depthFar:H.far}),Q=H.near,Y=H.far),H.layers.mask=Ne.layers.mask|6,V.layers.mask=H.layers.mask&3,U.layers.mask=H.layers.mask&5;const Dt=Ne.parent,Rt=H.cameras;ye(H,Dt);for(let It=0;It<Rt.length;It++)ye(Rt[It],Dt);Rt.length===2?de(H,V,U):H.projectionMatrix.copy(V.projectionMatrix),Pe(Ne,H,Dt)};function Pe(Ne,nt,tt){tt===null?Ne.matrix.copy(nt.matrixWorld):(Ne.matrix.copy(tt.matrixWorld),Ne.matrix.invert(),Ne.matrix.multiply(nt.matrixWorld)),Ne.matrix.decompose(Ne.position,Ne.quaternion,Ne.scale),Ne.updateMatrixWorld(!0),Ne.projectionMatrix.copy(nt.projectionMatrix),Ne.projectionMatrixInverse.copy(nt.projectionMatrixInverse),Ne.isPerspectiveCamera&&(Ne.fov=gc*2*Math.atan(1/Ne.projectionMatrix.elements[5]),Ne.zoom=1)}this.getCamera=function(){return H},this.getFoveation=function(){if(!(m===null&&_===null))return l},this.setFoveation=function(Ne){l=Ne,m!==null&&(m.fixedFoveation=Ne),_!==null&&_.fixedFoveation!==void 0&&(_.fixedFoveation=Ne)},this.hasDepthSensing=function(){return M.texture!==null},this.getDepthSensingMesh=function(){return M.getMesh(H)},this.getCameraTexture=function(Ne){return w[Ne]};let Qe=null;function et(Ne,nt){if(c=nt.getViewerPose(u||o),b=nt,c!==null){const tt=c.views;_!==null&&(e.setRenderTargetFramebuffer(P,_.framebuffer),e.setRenderTarget(P));let Dt=!1;tt.length!==H.cameras.length&&(H.cameras.length=0,Dt=!0);for(let Kt=0;Kt<tt.length;Kt++){const Ae=tt[Kt];let Je=null;if(_!==null)Je=_.getViewport(Ae);else{const ht=A.getViewSubImage(m,Ae);Je=ht.viewport,Kt===0&&(e.setRenderTargetTextures(P,ht.colorTexture,ht.depthStencilTexture),e.setRenderTarget(P))}let Xe=z[Kt];Xe===void 0&&(Xe=new tr,Xe.layers.enable(Kt),Xe.viewport=new rn,z[Kt]=Xe),Xe.matrix.fromArray(Ae.transform.matrix),Xe.matrix.decompose(Xe.position,Xe.quaternion,Xe.scale),Xe.projectionMatrix.fromArray(Ae.projectionMatrix),Xe.projectionMatrixInverse.copy(Xe.projectionMatrix).invert(),Xe.viewport.set(Je.x,Je.y,Je.width,Je.height),Kt===0&&(H.matrix.copy(Xe.matrix),H.matrix.decompose(H.position,H.quaternion,H.scale)),Dt===!0&&H.cameras.push(Xe)}const Rt=r.enabledFeatures;if(Rt&&Rt.includes("depth-sensing")&&r.depthUsage=="gpu-optimized"&&A){const Kt=A.getDepthInformation(tt[0]);Kt&&Kt.isValid&&Kt.texture&&M.init(Kt,r.renderState)}if(Rt&&Rt.includes("camera-access")&&(e.state.unbindTexture(),A))for(let Kt=0;Kt<tt.length;Kt++){const Ae=tt[Kt].camera;if(Ae){let Je=w[Ae];Je||(Je=new fR,w[Ae]=Je);const Xe=A.getCameraImage(Ae);Je.sourceTexture=Xe}}}for(let tt=0;tt<I.length;tt++){const Dt=B[tt],Rt=I[tt];Dt!==null&&Rt!==void 0&&Rt.update(Dt,nt,u||o)}Qe&&Qe(Ne,nt),nt.detectedPlanes&&n.dispatchEvent({type:"planesdetected",data:nt}),b=null}const Pt=new oR;Pt.setAnimationLoop(et),this.setAnimationLoop=function(Ne){Qe=Ne},this.dispose=function(){}}}const f2=new Ts,Eq=new Wt;function Rq(i,e){function t(w,T){w.matrixAutoUpdate===!0&&w.updateMatrix(),T.value.copy(w.matrix)}function n(w,T){T.color.getRGB(w.fogColor.value,wE(i)),T.isFog?(w.fogNear.value=T.near,w.fogFar.value=T.far):T.isFogExp2&&(w.fogDensity.value=T.density)}function r(w,T,N,P,I){T.isMeshBasicMaterial||T.isMeshLambertMaterial?s(w,T):T.isMeshToonMaterial?(s(w,T),A(w,T)):T.isMeshPhongMaterial?(s(w,T),c(w,T)):T.isMeshStandardMaterial?(s(w,T),m(w,T),T.isMeshPhysicalMaterial&&_(w,T,I)):T.isMeshMatcapMaterial?(s(w,T),b(w,T)):T.isMeshDepthMaterial?s(w,T):T.isMeshDistanceMaterial?(s(w,T),M(w,T)):T.isMeshNormalMaterial?s(w,T):T.isLineBasicMaterial?(o(w,T),T.isLineDashedMaterial&&a(w,T)):T.isPointsMaterial?l(w,T,N,P):T.isSpriteMaterial?u(w,T):T.isShadowMaterial?(w.color.value.copy(T.color),w.opacity.value=T.opacity):T.isShaderMaterial&&(T.uniformsNeedUpdate=!1)}function s(w,T){w.opacity.value=T.opacity,T.color&&w.diffuse.value.copy(T.color),T.emissive&&w.emissive.value.copy(T.emissive).multiplyScalar(T.emissiveIntensity),T.map&&(w.map.value=T.map,t(T.map,w.mapTransform)),T.alphaMap&&(w.alphaMap.value=T.alphaMap,t(T.alphaMap,w.alphaMapTransform)),T.bumpMap&&(w.bumpMap.value=T.bumpMap,t(T.bumpMap,w.bumpMapTransform),w.bumpScale.value=T.bumpScale,T.side===Bi&&(w.bumpScale.value*=-1)),T.normalMap&&(w.normalMap.value=T.normalMap,t(T.normalMap,w.normalMapTransform),w.normalScale.value.copy(T.normalScale),T.side===Bi&&w.normalScale.value.negate()),T.displacementMap&&(w.displacementMap.value=T.displacementMap,t(T.displacementMap,w.displacementMapTransform),w.displacementScale.value=T.displacementScale,w.displacementBias.value=T.displacementBias),T.emissiveMap&&(w.emissiveMap.value=T.emissiveMap,t(T.emissiveMap,w.emissiveMapTransform)),T.specularMap&&(w.specularMap.value=T.specularMap,t(T.specularMap,w.specularMapTransform)),T.alphaTest>0&&(w.alphaTest.value=T.alphaTest);const N=e.get(T),P=N.envMap,I=N.envMapRotation;P&&(w.envMap.value=P,f2.copy(I),f2.x*=-1,f2.y*=-1,f2.z*=-1,P.isCubeTexture&&P.isRenderTargetTexture===!1&&(f2.y*=-1,f2.z*=-1),w.envMapRotation.value.setFromMatrix4(Eq.makeRotationFromEuler(f2)),w.flipEnvMap.value=P.isCubeTexture&&P.isRenderTargetTexture===!1?-1:1,w.reflectivity.value=T.reflectivity,w.ior.value=T.ior,w.refractionRatio.value=T.refractionRatio),T.lightMap&&(w.lightMap.value=T.lightMap,w.lightMapIntensity.value=T.lightMapIntensity,t(T.lightMap,w.lightMapTransform)),T.aoMap&&(w.aoMap.value=T.aoMap,w.aoMapIntensity.value=T.aoMapIntensity,t(T.aoMap,w.aoMapTransform))}function o(w,T){w.diffuse.value.copy(T.color),w.opacity.value=T.opacity,T.map&&(w.map.value=T.map,t(T.map,w.mapTransform))}function a(w,T){w.dashSize.value=T.dashSize,w.totalSize.value=T.dashSize+T.gapSize,w.scale.value=T.scale}function l(w,T,N,P){w.diffuse.value.copy(T.color),w.opacity.value=T.opacity,w.size.value=T.size*N,w.scale.value=P*.5,T.map&&(w.map.value=T.map,t(T.map,w.uvTransform)),T.alphaMap&&(w.alphaMap.value=T.alphaMap,t(T.alphaMap,w.alphaMapTransform)),T.alphaTest>0&&(w.alphaTest.value=T.alphaTest)}function u(w,T){w.diffuse.value.copy(T.color),w.opacity.value=T.opacity,w.rotation.value=T.rotation,T.map&&(w.map.value=T.map,t(T.map,w.mapTransform)),T.alphaMap&&(w.alphaMap.value=T.alphaMap,t(T.alphaMap,w.alphaMapTransform)),T.alphaTest>0&&(w.alphaTest.value=T.alphaTest)}function c(w,T){w.specular.value.copy(T.specular),w.shininess.value=Math.max(T.shininess,1e-4)}function A(w,T){T.gradientMap&&(w.gradientMap.value=T.gradientMap)}function m(w,T){w.metalness.value=T.metalness,T.metalnessMap&&(w.metalnessMap.value=T.metalnessMap,t(T.metalnessMap,w.metalnessMapTransform)),w.roughness.value=T.roughness,T.roughnessMap&&(w.roughnessMap.value=T.roughnessMap,t(T.roughnessMap,w.roughnessMapTransform)),T.envMap&&(w.envMapIntensity.value=T.envMapIntensity)}function _(w,T,N){w.ior.value=T.ior,T.sheen>0&&(w.sheenColor.value.copy(T.sheenColor).multiplyScalar(T.sheen),w.sheenRoughness.value=T.sheenRoughness,T.sheenColorMap&&(w.sheenColorMap.value=T.sheenColorMap,t(T.sheenColorMap,w.sheenColorMapTransform)),T.sheenRoughnessMap&&(w.sheenRoughnessMap.value=T.sheenRoughnessMap,t(T.sheenRoughnessMap,w.sheenRoughnessMapTransform))),T.clearcoat>0&&(w.clearcoat.value=T.clearcoat,w.clearcoatRoughness.value=T.clearcoatRoughness,T.clearcoatMap&&(w.clearcoatMap.value=T.clearcoatMap,t(T.clearcoatMap,w.clearcoatMapTransform)),T.clearcoatRoughnessMap&&(w.clearcoatRoughnessMap.value=T.clearcoatRoughnessMap,t(T.clearcoatRoughnessMap,w.clearcoatRoughnessMapTransform)),T.clearcoatNormalMap&&(w.clearcoatNormalMap.value=T.clearcoatNormalMap,t(T.clearcoatNormalMap,w.clearcoatNormalMapTransform),w.clearcoatNormalScale.value.copy(T.clearcoatNormalScale),T.side===Bi&&w.clearcoatNormalScale.value.negate())),T.dispersion>0&&(w.dispersion.value=T.dispersion),T.iridescence>0&&(w.iridescence.value=T.iridescence,w.iridescenceIOR.value=T.iridescenceIOR,w.iridescenceThicknessMinimum.value=T.iridescenceThicknessRange[0],w.iridescenceThicknessMaximum.value=T.iridescenceThicknessRange[1],T.iridescenceMap&&(w.iridescenceMap.value=T.iridescenceMap,t(T.iridescenceMap,w.iridescenceMapTransform)),T.iridescenceThicknessMap&&(w.iridescenceThicknessMap.value=T.iridescenceThicknessMap,t(T.iridescenceThicknessMap,w.iridescenceThicknessMapTransform))),T.transmission>0&&(w.transmission.value=T.transmission,w.transmissionSamplerMap.value=N.texture,w.transmissionSamplerSize.value.set(N.width,N.height),T.transmissionMap&&(w.transmissionMap.value=T.transmissionMap,t(T.transmissionMap,w.transmissionMapTransform)),w.thickness.value=T.thickness,T.thicknessMap&&(w.thicknessMap.value=T.thicknessMap,t(T.thicknessMap,w.thicknessMapTransform)),w.attenuationDistance.value=T.attenuationDistance,w.attenuationColor.value.copy(T.attenuationColor)),T.anisotropy>0&&(w.anisotropyVector.value.set(T.anisotropy*Math.cos(T.anisotropyRotation),T.anisotropy*Math.sin(T.anisotropyRotation)),T.anisotropyMap&&(w.anisotropyMap.value=T.anisotropyMap,t(T.anisotropyMap,w.anisotropyMapTransform))),w.specularIntensity.value=T.specularIntensity,w.specularColor.value.copy(T.specularColor),T.specularColorMap&&(w.specularColorMap.value=T.specularColorMap,t(T.specularColorMap,w.specularColorMapTransform)),T.specularIntensityMap&&(w.specularIntensityMap.value=T.specularIntensityMap,t(T.specularIntensityMap,w.specularIntensityMapTransform))}function b(w,T){T.matcap&&(w.matcap.value=T.matcap)}function M(w,T){const N=e.get(T).light;w.referencePosition.value.setFromMatrixPosition(N.matrixWorld),w.nearDistance.value=N.shadow.camera.near,w.farDistance.value=N.shadow.camera.far}return{refreshFogUniforms:n,refreshMaterialUniforms:r}}function Cq(i,e,t,n){let r={},s={},o=[];const a=i.getParameter(i.MAX_UNIFORM_BUFFER_BINDINGS);function l(N,P){const I=P.program;n.uniformBlockBinding(N,I)}function u(N,P){let I=r[N.id];I===void 0&&(b(N),I=c(N),r[N.id]=I,N.addEventListener("dispose",w));const B=P.program;n.updateUBOMapping(N,B);const F=e.render.frame;s[N.id]!==F&&(m(N),s[N.id]=F)}function c(N){const P=A();N.__bindingPointIndex=P;const I=i.createBuffer(),B=N.__size,F=N.usage;return i.bindBuffer(i.UNIFORM_BUFFER,I),i.bufferData(i.UNIFORM_BUFFER,B,F),i.bindBuffer(i.UNIFORM_BUFFER,null),i.bindBufferBase(i.UNIFORM_BUFFER,P,I),I}function A(){for(let N=0;N<a;N++)if(o.indexOf(N)===-1)return o.push(N),N;return console.error("THREE.WebGLRenderer: Maximum number of simultaneously usable uniforms groups reached."),0}function m(N){const P=r[N.id],I=N.uniforms,B=N.__cache;i.bindBuffer(i.UNIFORM_BUFFER,P);for(let F=0,O=I.length;F<O;F++){const V=Array.isArray(I[F])?I[F]:[I[F]];for(let U=0,z=V.length;U<z;U++){const H=V[U];if(_(H,F,U,B)===!0){const Q=H.__offset,Y=Array.isArray(H.value)?H.value:[H.value];let ne=0;for(let ee=0;ee<Y.length;ee++){const se=Y[ee],pe=M(se);typeof se=="number"||typeof se=="boolean"?(H.__data[0]=se,i.bufferSubData(i.UNIFORM_BUFFER,Q+ne,H.__data)):se.isMatrix3?(H.__data[0]=se.elements[0],H.__data[1]=se.elements[1],H.__data[2]=se.elements[2],H.__data[3]=0,H.__data[4]=se.elements[3],H.__data[5]=se.elements[4],H.__data[6]=se.elements[5],H.__data[7]=0,H.__data[8]=se.elements[6],H.__data[9]=se.elements[7],H.__data[10]=se.elements[8],H.__data[11]=0):(se.toArray(H.__data,ne),ne+=pe.storage/Float32Array.BYTES_PER_ELEMENT)}i.bufferSubData(i.UNIFORM_BUFFER,Q,H.__data)}}}i.bindBuffer(i.UNIFORM_BUFFER,null)}function _(N,P,I,B){const F=N.value,O=P+"_"+I;if(B[O]===void 0)return typeof F=="number"||typeof F=="boolean"?B[O]=F:B[O]=F.clone(),!0;{const V=B[O];if(typeof F=="number"||typeof F=="boolean"){if(V!==F)return B[O]=F,!0}else if(V.equals(F)===!1)return V.copy(F),!0}return!1}function b(N){const P=N.uniforms;let I=0;const B=16;for(let O=0,V=P.length;O<V;O++){const U=Array.isArray(P[O])?P[O]:[P[O]];for(let z=0,H=U.length;z<H;z++){const Q=U[z],Y=Array.isArray(Q.value)?Q.value:[Q.value];for(let ne=0,ee=Y.length;ne<ee;ne++){const se=Y[ne],pe=M(se),re=I%B,de=re%pe.boundary,ye=re+de;I+=de,ye!==0&&B-ye<pe.storage&&(I+=B-ye),Q.__data=new Float32Array(pe.storage/Float32Array.BYTES_PER_ELEMENT),Q.__offset=I,I+=pe.storage}}}const F=I%B;return F>0&&(I+=B-F),N.__size=I,N.__cache={},this}function M(N){const P={boundary:0,storage:0};return typeof N=="number"||typeof N=="boolean"?(P.boundary=4,P.storage=4):N.isVector2?(P.boundary=8,P.storage=8):N.isVector3||N.isColor?(P.boundary=16,P.storage=12):N.isVector4?(P.boundary=16,P.storage=16):N.isMatrix3?(P.boundary=48,P.storage=48):N.isMatrix4?(P.boundary=64,P.storage=64):N.isTexture?console.warn("THREE.WebGLRenderer: Texture samplers can not be part of an uniforms group."):console.warn("THREE.WebGLRenderer: Unsupported uniform value type.",N),P}function w(N){const P=N.target;P.removeEventListener("dispose",w);const I=o.indexOf(P.__bindingPointIndex);o.splice(I,1),i.deleteBuffer(r[P.id]),delete r[P.id],delete s[P.id]}function T(){for(const N in r)i.deleteBuffer(r[N]);o=[],r={},s={}}return{bind:l,update:u,dispose:T}}class dR{constructor(e={}){const{canvas:t=rv(),context:n=null,depth:r=!0,stencil:s=!1,alpha:o=!1,antialias:a=!1,premultipliedAlpha:l=!0,preserveDrawingBuffer:u=!1,powerPreference:c="default",failIfMajorPerformanceCaveat:A=!1,reversedDepthBuffer:m=!1}=e;this.isWebGLRenderer=!0;let _;if(n!==null){if(typeof WebGLRenderingContext<"u"&&n instanceof WebGLRenderingContext)throw new Error("THREE.WebGLRenderer: WebGL 1 is not supported since r163.");_=n.getContextAttributes().alpha}else _=o;const b=new Uint32Array(4),M=new Int32Array(4);let w=null,T=null;const N=[],P=[];this.domElement=t,this.debug={checkShaderErrors:!0,onShaderError:null},this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.sortObjects=!0,this.clippingPlanes=[],this.localClippingEnabled=!1,this.toneMapping=eo,this.toneMappingExposure=1,this.transmissionResolutionScale=1;const I=this;let B=!1;this._outputColorSpace=xs;let F=0,O=0,V=null,U=-1,z=null;const H=new rn,Q=new rn;let Y=null;const ne=new Et(0);let ee=0,se=t.width,pe=t.height,re=1,de=null,ye=null;const Pe=new rn(0,0,se,pe),Qe=new rn(0,0,se,pe);let et=!1;const Pt=new _u;let Ne=!1,nt=!1;const tt=new Wt,Dt=new J,Rt=new rn,It={background:null,fog:null,environment:null,overrideMaterial:null,isScene:!0};let yn=!1;function Kt(){return V===null?re:1}let Ae=n;function Je(ie,Ce){return t.getContext(ie,Ce)}try{const ie={alpha:!0,depth:r,stencil:s,antialias:a,premultipliedAlpha:l,preserveDrawingBuffer:u,powerPreference:c,failIfMajorPerformanceCaveat:A};if("setAttribute"in t&&t.setAttribute("data-engine",`three.js r${o5}`),t.addEventListener("webglcontextlost",xt,!1),t.addEventListener("webglcontextrestored",Ut,!1),t.addEventListener("webglcontextcreationerror",_t,!1),Ae===null){const Ce="webgl2";if(Ae=Je(Ce,ie),Ae===null)throw Je(Ce)?new Error("Error creating WebGL context with your selected attributes."):new Error("Error creating WebGL context.")}}catch(ie){throw console.error("THREE.WebGLRenderer: "+ie.message),ie}let Xe,ht,Ze,vt,ut,Tt,fn,bn,he,Z,De,ze,ft,We,Zt,St,$t,Yt,yt,Bt,vn,ge,Be,bt;function oe(){Xe=new zz(Ae),Xe.init(),ge=new hR(Ae,Xe),ht=new Dz(Ae,Xe,e,ge),Ze=new xq(Ae,Xe),ht.reversedDepthBuffer&&m&&Ze.buffers.depth.setReversed(!0),vt=new Hz(Ae),ut=new lq,Tt=new bq(Ae,Xe,Ze,ut,ht,ge,vt),fn=new Fz(I),bn=new Vz(I),he=new YO(Ae),Be=new Iz(Ae,he),Z=new Gz(Ae,he,vt,Be),De=new jz(Ae,Z,he,vt),yt=new Wz(Ae,ht,Tt),St=new Bz(ut),ze=new aq(I,fn,bn,Xe,ht,Be,St),ft=new Rq(I,ut),We=new cq,Zt=new mq(Xe),Yt=new Nz(I,fn,bn,Ze,De,_,l),$t=new vq(I,De,ht),bt=new Cq(Ae,vt,ht,Ze),Bt=new Lz(Ae,Xe,vt),vn=new qz(Ae,Xe,vt),vt.programs=ze.programs,I.capabilities=ht,I.extensions=Xe,I.properties=ut,I.renderLists=We,I.shadowMap=$t,I.state=Ze,I.info=vt}oe();const at=new Mq(I,Ae);this.xr=at,this.getContext=function(){return Ae},this.getContextAttributes=function(){return Ae.getContextAttributes()},this.forceContextLoss=function(){const ie=Xe.get("WEBGL_lose_context");ie&&ie.loseContext()},this.forceContextRestore=function(){const ie=Xe.get("WEBGL_lose_context");ie&&ie.restoreContext()},this.getPixelRatio=function(){return re},this.setPixelRatio=function(ie){ie!==void 0&&(re=ie,this.setSize(se,pe,!1))},this.getSize=function(ie){return ie.set(se,pe)},this.setSize=function(ie,Ce,Fe=!0){if(at.isPresenting){console.warn("THREE.WebGLRenderer: Can't change size while VR device is presenting.");return}se=ie,pe=Ce,t.width=Math.floor(ie*re),t.height=Math.floor(Ce*re),Fe===!0&&(t.style.width=ie+"px",t.style.height=Ce+"px"),this.setViewport(0,0,ie,Ce)},this.getDrawingBufferSize=function(ie){return ie.set(se*re,pe*re).floor()},this.setDrawingBufferSize=function(ie,Ce,Fe){se=ie,pe=Ce,re=Fe,t.width=Math.floor(ie*Fe),t.height=Math.floor(Ce*Fe),this.setViewport(0,0,ie,Ce)},this.getCurrentViewport=function(ie){return ie.copy(H)},this.getViewport=function(ie){return ie.copy(Pe)},this.setViewport=function(ie,Ce,Fe,Ve){ie.isVector4?Pe.set(ie.x,ie.y,ie.z,ie.w):Pe.set(ie,Ce,Fe,Ve),Ze.viewport(H.copy(Pe).multiplyScalar(re).round())},this.getScissor=function(ie){return ie.copy(Qe)},this.setScissor=function(ie,Ce,Fe,Ve){ie.isVector4?Qe.set(ie.x,ie.y,ie.z,ie.w):Qe.set(ie,Ce,Fe,Ve),Ze.scissor(Q.copy(Qe).multiplyScalar(re).round())},this.getScissorTest=function(){return et},this.setScissorTest=function(ie){Ze.setScissorTest(et=ie)},this.setOpaqueSort=function(ie){de=ie},this.setTransparentSort=function(ie){ye=ie},this.getClearColor=function(ie){return ie.copy(Yt.getClearColor())},this.setClearColor=function(){Yt.setClearColor(...arguments)},this.getClearAlpha=function(){return Yt.getClearAlpha()},this.setClearAlpha=function(){Yt.setClearAlpha(...arguments)},this.clear=function(ie=!0,Ce=!0,Fe=!0){let Ve=0;if(ie){let Me=!1;if(V!==null){const pt=V.texture.format;Me=pt===Mc||pt===wc||pt===gu}if(Me){const pt=V.texture.type,Ft=pt===ar||pt===Oi||pt===qa||pt===Ho||pt===z8||pt===G8,kt=Yt.getClearColor(),ot=Yt.getClearAlpha(),K=kt.r,dt=kt.g,Jt=kt.b;Ft?(b[0]=K,b[1]=dt,b[2]=Jt,b[3]=ot,Ae.clearBufferuiv(Ae.COLOR,0,b)):(M[0]=K,M[1]=dt,M[2]=Jt,M[3]=ot,Ae.clearBufferiv(Ae.COLOR,0,M))}else Ve|=Ae.COLOR_BUFFER_BIT}Ce&&(Ve|=Ae.DEPTH_BUFFER_BIT),Fe&&(Ve|=Ae.STENCIL_BUFFER_BIT,this.state.buffers.stencil.setMask(4294967295)),Ae.clear(Ve)},this.clearColor=function(){this.clear(!0,!1,!1)},this.clearDepth=function(){this.clear(!1,!0,!1)},this.clearStencil=function(){this.clear(!1,!1,!0)},this.dispose=function(){t.removeEventListener("webglcontextlost",xt,!1),t.removeEventListener("webglcontextrestored",Ut,!1),t.removeEventListener("webglcontextcreationerror",_t,!1),Yt.dispose(),We.dispose(),Zt.dispose(),ut.dispose(),fn.dispose(),bn.dispose(),De.dispose(),Be.dispose(),bt.dispose(),ze.dispose(),at.dispose(),at.removeEventListener("sessionstart",hr),at.removeEventListener("sessionend",Oe),it.stop()};function xt(ie){ie.preventDefault(),console.log("THREE.WebGLRenderer: Context Lost."),B=!0}function Ut(){console.log("THREE.WebGLRenderer: Context Restored."),B=!1;const ie=vt.autoReset,Ce=$t.enabled,Fe=$t.autoUpdate,Ve=$t.needsUpdate,Me=$t.type;oe(),vt.autoReset=ie,$t.enabled=Ce,$t.autoUpdate=Fe,$t.needsUpdate=Ve,$t.type=Me}function _t(ie){console.error("THREE.WebGLRenderer: A WebGL context could not be created. Reason: ",ie.statusMessage)}function rt(ie){const Ce=ie.target;Ce.removeEventListener("dispose",rt),Ot(Ce)}function Ot(ie){cn(ie),ut.remove(ie)}function cn(ie){const Ce=ut.get(ie).programs;Ce!==void 0&&(Ce.forEach(function(Fe){ze.releaseProgram(Fe)}),ie.isShaderMaterial&&ze.releaseShaderCache(ie))}this.renderBufferDirect=function(ie,Ce,Fe,Ve,Me,pt){Ce===null&&(Ce=It);const Ft=Me.isMesh&&Me.matrixWorld.determinant()<0,kt=li(ie,Ce,Fe,Ve,Me);Ze.setMaterial(Ve,Ft);let ot=Fe.index,K=1;if(Ve.wireframe===!0){if(ot=Z.getWireframeAttribute(Fe),ot===void 0)return;K=2}const dt=Fe.drawRange,Jt=Fe.attributes.position;let nn=dt.start*K,dn=(dt.start+dt.count)*K;pt!==null&&(nn=Math.max(nn,pt.start*K),dn=Math.min(dn,(pt.start+pt.count)*K)),ot!==null?(nn=Math.max(nn,0),dn=Math.min(dn,ot.count)):Jt!=null&&(nn=Math.max(nn,0),dn=Math.min(dn,Jt.count));const xi=dn-nn;if(xi<0||xi===1/0)return;Be.setup(Me,Ve,kt,Fe,ot);let Qn,$=Bt;if(ot!==null&&(Qn=he.get(ot),$=vn,$.setIndex(Qn)),Me.isMesh)Ve.wireframe===!0?(Ze.setLineWidth(Ve.wireframeLinewidth*Kt()),$.setMode(Ae.LINES)):$.setMode(Ae.TRIANGLES);else if(Me.isLine){let an=Ve.linewidth;an===void 0&&(an=1),Ze.setLineWidth(an*Kt()),Me.isLineSegments?$.setMode(Ae.LINES):Me.isLineLoop?$.setMode(Ae.LINE_LOOP):$.setMode(Ae.LINE_STRIP)}else Me.isPoints?$.setMode(Ae.POINTS):Me.isSprite&&$.setMode(Ae.TRIANGLES);if(Me.isBatchedMesh)if(Me._multiDrawInstances!==null)$o("THREE.WebGLRenderer: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),$.renderMultiDrawInstances(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount,Me._multiDrawInstances);else if(Xe.get("WEBGL_multi_draw"))$.renderMultiDraw(Me._multiDrawStarts,Me._multiDrawCounts,Me._multiDrawCount);else{const an=Me._multiDrawStarts,Mi=Me._multiDrawCounts,Nn=Me._multiDrawCount,Fr=ot?he.get(ot).bytesPerElement:1,o0=ut.get(Ve).currentProgram.getUniforms();for(let ds=0;ds<Nn;ds++)o0.setValue(Ae,"_gl_DrawID",ds),$.render(an[ds]/Fr,Mi[ds])}else if(Me.isInstancedMesh)$.renderInstances(nn,xi,Me.count);else if(Fe.isInstancedBufferGeometry){const an=Fe._maxInstanceCount!==void 0?Fe._maxInstanceCount:1/0,Mi=Math.min(Fe.instanceCount,an);$.renderInstances(nn,xi,Mi)}else $.render(nn,xi)};function ai(ie,Ce,Fe){ie.transparent===!0&&ie.side===Mr&&ie.forceSinglePass===!1?(ie.side=Bi,ie.needsUpdate=!0,fi(ie,Ce,Fe),ie.side=So,ie.needsUpdate=!0,fi(ie,Ce,Fe),ie.side=Mr):fi(ie,Ce,Fe)}this.compile=function(ie,Ce,Fe=null){Fe===null&&(Fe=ie),T=Zt.get(Fe),T.init(Ce),P.push(T),Fe.traverseVisible(function(Me){Me.isLight&&Me.layers.test(Ce.layers)&&(T.pushLight(Me),Me.castShadow&&T.pushShadow(Me))}),ie!==Fe&&ie.traverseVisible(function(Me){Me.isLight&&Me.layers.test(Ce.layers)&&(T.pushLight(Me),Me.castShadow&&T.pushShadow(Me))}),T.setupLights();const Ve=new Set;return ie.traverse(function(Me){if(!(Me.isMesh||Me.isPoints||Me.isLine||Me.isSprite))return;const pt=Me.material;if(pt)if(Array.isArray(pt))for(let Ft=0;Ft<pt.length;Ft++){const kt=pt[Ft];ai(kt,Fe,Me),Ve.add(kt)}else ai(pt,Fe,Me),Ve.add(pt)}),T=P.pop(),Ve},this.compileAsync=function(ie,Ce,Fe=null){const Ve=this.compile(ie,Ce,Fe);return new Promise(Me=>{function pt(){if(Ve.forEach(function(Ft){ut.get(Ft).currentProgram.isReady()&&Ve.delete(Ft)}),Ve.size===0){Me(ie);return}setTimeout(pt,10)}Xe.get("KHR_parallel_shader_compile")!==null?pt():setTimeout(pt,10)})};let Xn=null;function xr(ie){Xn&&Xn(ie)}function hr(){it.stop()}function Oe(){it.start()}const it=new oR;it.setAnimationLoop(xr),typeof self<"u"&&it.setContext(self),this.setAnimationLoop=function(ie){Xn=ie,at.setAnimationLoop(ie),ie===null?it.stop():it.start()},at.addEventListener("sessionstart",hr),at.addEventListener("sessionend",Oe),this.render=function(ie,Ce){if(Ce!==void 0&&Ce.isCamera!==!0){console.error("THREE.WebGLRenderer.render: camera is not an instance of THREE.Camera.");return}if(B===!0)return;if(ie.matrixWorldAutoUpdate===!0&&ie.updateMatrixWorld(),Ce.parent===null&&Ce.matrixWorldAutoUpdate===!0&&Ce.updateMatrixWorld(),at.enabled===!0&&at.isPresenting===!0&&(at.cameraAutoUpdate===!0&&at.updateCamera(Ce),Ce=at.getCamera()),ie.isScene===!0&&ie.onBeforeRender(I,ie,Ce,V),T=Zt.get(ie,P.length),T.init(Ce),P.push(T),tt.multiplyMatrices(Ce.projectionMatrix,Ce.matrixWorldInverse),Pt.setFromProjectionMatrix(tt,bs,Ce.reversedDepth),nt=this.localClippingEnabled,Ne=St.init(this.clippingPlanes,nt),w=We.get(ie,N.length),w.init(),N.push(w),at.enabled===!0&&at.isPresenting===!0){const pt=I.xr.getDepthSensingMesh();pt!==null&&Ct(pt,Ce,-1/0,I.sortObjects)}Ct(ie,Ce,0,I.sortObjects),w.finish(),I.sortObjects===!0&&w.sort(de,ye),yn=at.enabled===!1||at.isPresenting===!1||at.hasDepthSensing()===!1,yn&&Yt.addToRenderList(w,ie),this.info.render.frame++,Ne===!0&&St.beginShadows();const Fe=T.state.shadowsArray;$t.render(Fe,ie,Ce),Ne===!0&&St.endShadows(),this.info.autoReset===!0&&this.info.reset();const Ve=w.opaque,Me=w.transmissive;if(T.setupLights(),Ce.isArrayCamera){const pt=Ce.cameras;if(Me.length>0)for(let Ft=0,kt=pt.length;Ft<kt;Ft++){const ot=pt[Ft];d(Ve,Me,ie,ot)}yn&&Yt.render(ie);for(let Ft=0,kt=pt.length;Ft<kt;Ft++){const ot=pt[Ft];st(w,ie,ot,ot.viewport)}}else Me.length>0&&d(Ve,Me,ie,Ce),yn&&Yt.render(ie),st(w,ie,Ce);V!==null&&O===0&&(Tt.updateMultisampleRenderTarget(V),Tt.updateRenderTargetMipmap(V)),ie.isScene===!0&&ie.onAfterRender(I,ie,Ce),Be.resetDefaultState(),U=-1,z=null,P.pop(),P.length>0?(T=P[P.length-1],Ne===!0&&St.setGlobalState(I.clippingPlanes,T.state.camera)):T=null,N.pop(),N.length>0?w=N[N.length-1]:w=null};function Ct(ie,Ce,Fe,Ve){if(ie.visible===!1)return;if(ie.layers.test(Ce.layers)){if(ie.isGroup)Fe=ie.renderOrder;else if(ie.isLOD)ie.autoUpdate===!0&&ie.update(Ce);else if(ie.isLight)T.pushLight(ie),ie.castShadow&&T.pushShadow(ie);else if(ie.isSprite){if(!ie.frustumCulled||Pt.intersectsSprite(ie)){Ve&&Rt.setFromMatrixPosition(ie.matrixWorld).applyMatrix4(tt);const Ft=De.update(ie),kt=ie.material;kt.visible&&w.push(ie,Ft,kt,Fe,Rt.z,null)}}else if((ie.isMesh||ie.isLine||ie.isPoints)&&(!ie.frustumCulled||Pt.intersectsObject(ie))){const Ft=De.update(ie),kt=ie.material;if(Ve&&(ie.boundingSphere!==void 0?(ie.boundingSphere===null&&ie.computeBoundingSphere(),Rt.copy(ie.boundingSphere.center)):(Ft.boundingSphere===null&&Ft.computeBoundingSphere(),Rt.copy(Ft.boundingSphere.center)),Rt.applyMatrix4(ie.matrixWorld).applyMatrix4(tt)),Array.isArray(kt)){const ot=Ft.groups;for(let K=0,dt=ot.length;K<dt;K++){const Jt=ot[K],nn=kt[Jt.materialIndex];nn&&nn.visible&&w.push(ie,Ft,nn,Fe,Rt.z,Jt)}}else kt.visible&&w.push(ie,Ft,kt,Fe,Rt.z,null)}}const pt=ie.children;for(let Ft=0,kt=pt.length;Ft<kt;Ft++)Ct(pt[Ft],Ce,Fe,Ve)}function st(ie,Ce,Fe,Ve){const Me=ie.opaque,pt=ie.transmissive,Ft=ie.transparent;T.setupLightsView(Fe),Ne===!0&&St.setGlobalState(I.clippingPlanes,Fe),Ve&&Ze.viewport(H.copy(Ve)),Me.length>0&&X(Me,Ce,Fe),pt.length>0&&X(pt,Ce,Fe),Ft.length>0&&X(Ft,Ce,Fe),Ze.buffers.depth.setTest(!0),Ze.buffers.depth.setMask(!0),Ze.buffers.color.setMask(!0),Ze.setPolygonOffset(!1)}function d(ie,Ce,Fe,Ve){if((Fe.isScene===!0?Fe.overrideMaterial:null)!==null)return;T.state.transmissionRenderTarget[Ve.id]===void 0&&(T.state.transmissionRenderTarget[Ve.id]=new dl(1,1,{generateMipmaps:!0,type:Xe.has("EXT_color_buffer_half_float")||Xe.has("EXT_color_buffer_float")?Yr:ar,minFilter:Fs,samples:4,stencilBuffer:s,resolveDepthBuffer:!1,resolveStencilBuffer:!1,colorSpace:Sn.workingColorSpace}));const pt=T.state.transmissionRenderTarget[Ve.id],Ft=Ve.viewport||H;pt.setSize(Ft.z*I.transmissionResolutionScale,Ft.w*I.transmissionResolutionScale);const kt=I.getRenderTarget(),ot=I.getActiveCubeFace(),K=I.getActiveMipmapLevel();I.setRenderTarget(pt),I.getClearColor(ne),ee=I.getClearAlpha(),ee<1&&I.setClearColor(16777215,.5),I.clear(),yn&&Yt.render(Fe);const dt=I.toneMapping;I.toneMapping=eo;const Jt=Ve.viewport;if(Ve.viewport!==void 0&&(Ve.viewport=void 0),T.setupLightsView(Ve),Ne===!0&&St.setGlobalState(I.clippingPlanes,Ve),X(ie,Fe,Ve),Tt.updateMultisampleRenderTarget(pt),Tt.updateRenderTargetMipmap(pt),Xe.has("WEBGL_multisampled_render_to_texture")===!1){let nn=!1;for(let dn=0,xi=Ce.length;dn<xi;dn++){const Qn=Ce[dn],$=Qn.object,an=Qn.geometry,Mi=Qn.material,Nn=Qn.group;if(Mi.side===Mr&&$.layers.test(Ve.layers)){const Fr=Mi.side;Mi.side=Bi,Mi.needsUpdate=!0,ii($,Fe,Ve,an,Mi,Nn),Mi.side=Fr,Mi.needsUpdate=!0,nn=!0}}nn===!0&&(Tt.updateMultisampleRenderTarget(pt),Tt.updateRenderTargetMipmap(pt))}I.setRenderTarget(kt,ot,K),I.setClearColor(ne,ee),Jt!==void 0&&(Ve.viewport=Jt),I.toneMapping=dt}function X(ie,Ce,Fe){const Ve=Ce.isScene===!0?Ce.overrideMaterial:null;for(let Me=0,pt=ie.length;Me<pt;Me++){const Ft=ie[Me],kt=Ft.object,ot=Ft.geometry,K=Ft.group;let dt=Ft.material;dt.allowOverride===!0&&Ve!==null&&(dt=Ve),kt.layers.test(Fe.layers)&&ii(kt,Ce,Fe,ot,dt,K)}}function ii(ie,Ce,Fe,Ve,Me,pt){ie.onBeforeRender(I,Ce,Fe,Ve,Me,pt),ie.modelViewMatrix.multiplyMatrices(Fe.matrixWorldInverse,ie.matrixWorld),ie.normalMatrix.getNormalMatrix(ie.modelViewMatrix),Me.onBeforeRender(I,Ce,Fe,Ve,ie,pt),Me.transparent===!0&&Me.side===Mr&&Me.forceSinglePass===!1?(Me.side=Bi,Me.needsUpdate=!0,I.renderBufferDirect(Fe,Ce,Ve,Me,ie,pt),Me.side=So,Me.needsUpdate=!0,I.renderBufferDirect(Fe,Ce,Ve,Me,ie,pt),Me.side=Mr):I.renderBufferDirect(Fe,Ce,Ve,Me,ie,pt),ie.onAfterRender(I,Ce,Fe,Ve,Me,pt)}function fi(ie,Ce,Fe){Ce.isScene!==!0&&(Ce=It);const Ve=ut.get(ie),Me=T.state.lights,pt=T.state.shadowsArray,Ft=Me.state.version,kt=ze.getParameters(ie,Me.state,pt,Ce,Fe),ot=ze.getProgramCacheKey(kt);let K=Ve.programs;Ve.environment=ie.isMeshStandardMaterial?Ce.environment:null,Ve.fog=Ce.fog,Ve.envMap=(ie.isMeshStandardMaterial?bn:fn).get(ie.envMap||Ve.environment),Ve.envMapRotation=Ve.environment!==null&&ie.envMap===null?Ce.environmentRotation:ie.envMapRotation,K===void 0&&(ie.addEventListener("dispose",rt),K=new Map,Ve.programs=K);let dt=K.get(ot);if(dt!==void 0){if(Ve.currentProgram===dt&&Ve.lightsStateVersion===Ft)return On(ie,kt),dt}else kt.uniforms=ze.getUniforms(ie),ie.onBeforeCompile(kt,I),dt=ze.acquireProgram(kt,ot),K.set(ot,dt),Ve.uniforms=kt.uniforms;const Jt=Ve.uniforms;return(!ie.isShaderMaterial&&!ie.isRawShaderMaterial||ie.clipping===!0)&&(Jt.clippingPlanes=St.uniform),On(ie,kt),Ve.needsLights=pi(ie),Ve.lightsStateVersion=Ft,Ve.needsLights&&(Jt.ambientLightColor.value=Me.state.ambient,Jt.lightProbe.value=Me.state.probe,Jt.directionalLights.value=Me.state.directional,Jt.directionalLightShadows.value=Me.state.directionalShadow,Jt.spotLights.value=Me.state.spot,Jt.spotLightShadows.value=Me.state.spotShadow,Jt.rectAreaLights.value=Me.state.rectArea,Jt.ltc_1.value=Me.state.rectAreaLTC1,Jt.ltc_2.value=Me.state.rectAreaLTC2,Jt.pointLights.value=Me.state.point,Jt.pointLightShadows.value=Me.state.pointShadow,Jt.hemisphereLights.value=Me.state.hemi,Jt.directionalShadowMap.value=Me.state.directionalShadowMap,Jt.directionalShadowMatrix.value=Me.state.directionalShadowMatrix,Jt.spotShadowMap.value=Me.state.spotShadowMap,Jt.spotLightMatrix.value=Me.state.spotLightMatrix,Jt.spotLightMap.value=Me.state.spotLightMap,Jt.pointShadowMap.value=Me.state.pointShadowMap,Jt.pointShadowMatrix.value=Me.state.pointShadowMatrix),Ve.currentProgram=dt,Ve.uniformsList=null,dt}function pr(ie){if(ie.uniformsList===null){const Ce=ie.currentProgram.getUniforms();ie.uniformsList=Vf.seqWithValue(Ce.seq,ie.uniforms)}return ie.uniformsList}function On(ie,Ce){const Fe=ut.get(ie);Fe.outputColorSpace=Ce.outputColorSpace,Fe.batching=Ce.batching,Fe.batchingColor=Ce.batchingColor,Fe.instancing=Ce.instancing,Fe.instancingColor=Ce.instancingColor,Fe.instancingMorph=Ce.instancingMorph,Fe.skinning=Ce.skinning,Fe.morphTargets=Ce.morphTargets,Fe.morphNormals=Ce.morphNormals,Fe.morphColors=Ce.morphColors,Fe.morphTargetsCount=Ce.morphTargetsCount,Fe.numClippingPlanes=Ce.numClippingPlanes,Fe.numIntersection=Ce.numClipIntersection,Fe.vertexAlphas=Ce.vertexAlphas,Fe.vertexTangents=Ce.vertexTangents,Fe.toneMapping=Ce.toneMapping}function li(ie,Ce,Fe,Ve,Me){Ce.isScene!==!0&&(Ce=It),Tt.resetTextureUnits();const pt=Ce.fog,Ft=Ve.isMeshStandardMaterial?Ce.environment:null,kt=V===null?I.outputColorSpace:V.isXRRenderTarget===!0?V.texture.colorSpace:r1,ot=(Ve.isMeshStandardMaterial?bn:fn).get(Ve.envMap||Ft),K=Ve.vertexColors===!0&&!!Fe.attributes.color&&Fe.attributes.color.itemSize===4,dt=!!Fe.attributes.tangent&&(!!Ve.normalMap||Ve.anisotropy>0),Jt=!!Fe.morphAttributes.position,nn=!!Fe.morphAttributes.normal,dn=!!Fe.morphAttributes.color;let xi=eo;Ve.toneMapped&&(V===null||V.isXRRenderTarget===!0)&&(xi=I.toneMapping);const Qn=Fe.morphAttributes.position||Fe.morphAttributes.normal||Fe.morphAttributes.color,$=Qn!==void 0?Qn.length:0,an=ut.get(Ve),Mi=T.state.lights;if(Ne===!0&&(nt===!0||ie!==z)){const mi=ie===z&&Ve.id===U;St.setState(Ve,ie,mi)}let Nn=!1;Ve.version===an.__version?(an.needsLights&&an.lightsStateVersion!==Mi.state.version||an.outputColorSpace!==kt||Me.isBatchedMesh&&an.batching===!1||!Me.isBatchedMesh&&an.batching===!0||Me.isBatchedMesh&&an.batchingColor===!0&&Me.colorTexture===null||Me.isBatchedMesh&&an.batchingColor===!1&&Me.colorTexture!==null||Me.isInstancedMesh&&an.instancing===!1||!Me.isInstancedMesh&&an.instancing===!0||Me.isSkinnedMesh&&an.skinning===!1||!Me.isSkinnedMesh&&an.skinning===!0||Me.isInstancedMesh&&an.instancingColor===!0&&Me.instanceColor===null||Me.isInstancedMesh&&an.instancingColor===!1&&Me.instanceColor!==null||Me.isInstancedMesh&&an.instancingMorph===!0&&Me.morphTexture===null||Me.isInstancedMesh&&an.instancingMorph===!1&&Me.morphTexture!==null||an.envMap!==ot||Ve.fog===!0&&an.fog!==pt||an.numClippingPlanes!==void 0&&(an.numClippingPlanes!==St.numPlanes||an.numIntersection!==St.numIntersection)||an.vertexAlphas!==K||an.vertexTangents!==dt||an.morphTargets!==Jt||an.morphNormals!==nn||an.morphColors!==dn||an.toneMapping!==xi||an.morphTargetsCount!==$)&&(Nn=!0):(Nn=!0,an.__version=Ve.version);let Fr=an.currentProgram;Nn===!0&&(Fr=fi(Ve,Ce,Me));let o0=!1,ds=!1,ta=!1;const Fi=Fr.getUniforms(),$i=an.uniforms;if(Ze.useProgram(Fr.program)&&(o0=!0,ds=!0,ta=!0),Ve.id!==U&&(U=Ve.id,ds=!0),o0||z!==ie){Ze.buffers.depth.getReversed()&&ie.reversedDepth!==!0&&(ie._reversedDepth=!0,ie.updateProjectionMatrix()),Fi.setValue(Ae,"projectionMatrix",ie.projectionMatrix),Fi.setValue(Ae,"viewMatrix",ie.matrixWorldInverse);const Ur=Fi.map.cameraPosition;Ur!==void 0&&Ur.setValue(Ae,Dt.setFromMatrixPosition(ie.matrixWorld)),ht.logarithmicDepthBuffer&&Fi.setValue(Ae,"logDepthBufFC",2/(Math.log(ie.far+1)/Math.LN2)),(Ve.isMeshPhongMaterial||Ve.isMeshToonMaterial||Ve.isMeshLambertMaterial||Ve.isMeshBasicMaterial||Ve.isMeshStandardMaterial||Ve.isShaderMaterial)&&Fi.setValue(Ae,"isOrthographic",ie.isOrthographicCamera===!0),z!==ie&&(z=ie,ds=!0,ta=!0)}if(Me.isSkinnedMesh){Fi.setOptional(Ae,Me,"bindMatrix"),Fi.setOptional(Ae,Me,"bindMatrixInverse");const mi=Me.skeleton;mi&&(mi.boneTexture===null&&mi.computeBoneTexture(),Fi.setValue(Ae,"boneTexture",mi.boneTexture,Tt))}Me.isBatchedMesh&&(Fi.setOptional(Ae,Me,"batchingTexture"),Fi.setValue(Ae,"batchingTexture",Me._matricesTexture,Tt),Fi.setOptional(Ae,Me,"batchingIdTexture"),Fi.setValue(Ae,"batchingIdTexture",Me._indirectTexture,Tt),Fi.setOptional(Ae,Me,"batchingColorTexture"),Me._colorsTexture!==null&&Fi.setValue(Ae,"batchingColorTexture",Me._colorsTexture,Tt));const fr=Fe.morphAttributes;if((fr.position!==void 0||fr.normal!==void 0||fr.color!==void 0)&&yt.update(Me,Fe,Fr),(ds||an.receiveShadow!==Me.receiveShadow)&&(an.receiveShadow=Me.receiveShadow,Fi.setValue(Ae,"receiveShadow",Me.receiveShadow)),Ve.isMeshGouraudMaterial&&Ve.envMap!==null&&($i.envMap.value=ot,$i.flipEnvMap.value=ot.isCubeTexture&&ot.isRenderTargetTexture===!1?-1:1),Ve.isMeshStandardMaterial&&Ve.envMap===null&&Ce.environment!==null&&($i.envMapIntensity.value=Ce.environmentIntensity),ds&&(Fi.setValue(Ae,"toneMappingExposure",I.toneMappingExposure),an.needsLights&&wa($i,ta),pt&&Ve.fog===!0&&ft.refreshFogUniforms($i,pt),ft.refreshMaterialUniforms($i,Ve,re,pe,T.state.transmissionRenderTarget[ie.id]),Vf.upload(Ae,pr(an),$i,Tt)),Ve.isShaderMaterial&&Ve.uniformsNeedUpdate===!0&&(Vf.upload(Ae,pr(an),$i,Tt),Ve.uniformsNeedUpdate=!1),Ve.isSpriteMaterial&&Fi.setValue(Ae,"center",Me.center),Fi.setValue(Ae,"modelViewMatrix",Me.modelViewMatrix),Fi.setValue(Ae,"normalMatrix",Me.normalMatrix),Fi.setValue(Ae,"modelMatrix",Me.matrixWorld),Ve.isShaderMaterial||Ve.isRawShaderMaterial){const mi=Ve.uniformsGroups;for(let Ur=0,k0=mi.length;Ur<k0;Ur++){const Mo=mi[Ur];bt.update(Mo,Fr),bt.bind(Mo,Fr)}}return Fr}function wa(ie,Ce){ie.ambientLightColor.needsUpdate=Ce,ie.lightProbe.needsUpdate=Ce,ie.directionalLights.needsUpdate=Ce,ie.directionalLightShadows.needsUpdate=Ce,ie.pointLights.needsUpdate=Ce,ie.pointLightShadows.needsUpdate=Ce,ie.spotLights.needsUpdate=Ce,ie.spotLightShadows.needsUpdate=Ce,ie.rectAreaLights.needsUpdate=Ce,ie.hemisphereLights.needsUpdate=Ce}function pi(ie){return ie.isMeshLambertMaterial||ie.isMeshToonMaterial||ie.isMeshPhongMaterial||ie.isMeshStandardMaterial||ie.isShadowMaterial||ie.isShaderMaterial&&ie.lights===!0}this.getActiveCubeFace=function(){return F},this.getActiveMipmapLevel=function(){return O},this.getRenderTarget=function(){return V},this.setRenderTargetTextures=function(ie,Ce,Fe){const Ve=ut.get(ie);Ve.__autoAllocateDepthBuffer=ie.resolveDepthBuffer===!1,Ve.__autoAllocateDepthBuffer===!1&&(Ve.__useRenderToTexture=!1),ut.get(ie.texture).__webglTexture=Ce,ut.get(ie.depthTexture).__webglTexture=Ve.__autoAllocateDepthBuffer?void 0:Fe,Ve.__hasExternalTextures=!0},this.setRenderTargetFramebuffer=function(ie,Ce){const Fe=ut.get(ie);Fe.__webglFramebuffer=Ce,Fe.__useDefaultFramebuffer=Ce===void 0};const kn=Ae.createFramebuffer();this.setRenderTarget=function(ie,Ce=0,Fe=0){V=ie,F=Ce,O=Fe;let Ve=!0,Me=null,pt=!1,Ft=!1;if(ie){const ot=ut.get(ie);if(ot.__useDefaultFramebuffer!==void 0)Ze.bindFramebuffer(Ae.FRAMEBUFFER,null),Ve=!1;else if(ot.__webglFramebuffer===void 0)Tt.setupRenderTarget(ie);else if(ot.__hasExternalTextures)Tt.rebindTextures(ie,ut.get(ie.texture).__webglTexture,ut.get(ie.depthTexture).__webglTexture);else if(ie.depthBuffer){const Jt=ie.depthTexture;if(ot.__boundDepthTexture!==Jt){if(Jt!==null&&ut.has(Jt)&&(ie.width!==Jt.image.width||ie.height!==Jt.image.height))throw new Error("WebGLRenderTarget: Attached DepthTexture is initialized to the incorrect size.");Tt.setupDepthRenderbuffer(ie)}}const K=ie.texture;(K.isData3DTexture||K.isDataArrayTexture||K.isCompressedArrayTexture)&&(Ft=!0);const dt=ut.get(ie).__webglFramebuffer;ie.isWebGLCubeRenderTarget?(Array.isArray(dt[Ce])?Me=dt[Ce][Fe]:Me=dt[Ce],pt=!0):ie.samples>0&&Tt.useMultisampledRTT(ie)===!1?Me=ut.get(ie).__webglMultisampledFramebuffer:Array.isArray(dt)?Me=dt[Fe]:Me=dt,H.copy(ie.viewport),Q.copy(ie.scissor),Y=ie.scissorTest}else H.copy(Pe).multiplyScalar(re).floor(),Q.copy(Qe).multiplyScalar(re).floor(),Y=et;if(Fe!==0&&(Me=kn),Ze.bindFramebuffer(Ae.FRAMEBUFFER,Me)&&Ve&&Ze.drawBuffers(ie,Me),Ze.viewport(H),Ze.scissor(Q),Ze.setScissorTest(Y),pt){const ot=ut.get(ie.texture);Ae.framebufferTexture2D(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_CUBE_MAP_POSITIVE_X+Ce,ot.__webglTexture,Fe)}else if(Ft){const ot=Ce;for(let K=0;K<ie.textures.length;K++){const dt=ut.get(ie.textures[K]);Ae.framebufferTextureLayer(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0+K,dt.__webglTexture,Fe,ot)}}else if(ie!==null&&Fe!==0){const ot=ut.get(ie.texture);Ae.framebufferTexture2D(Ae.FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_2D,ot.__webglTexture,Fe)}U=-1},this.readRenderTargetPixels=function(ie,Ce,Fe,Ve,Me,pt,Ft,kt=0){if(!(ie&&ie.isWebGLRenderTarget)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");return}let ot=ut.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&Ft!==void 0&&(ot=ot[Ft]),ot){Ze.bindFramebuffer(Ae.FRAMEBUFFER,ot);try{const K=ie.textures[kt],dt=K.format,Jt=K.type;if(!ht.textureFormatReadable(dt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in RGBA or implementation defined format.");return}if(!ht.textureTypeReadable(Jt)){console.error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not in UnsignedByteType or implementation defined type.");return}Ce>=0&&Ce<=ie.width-Ve&&Fe>=0&&Fe<=ie.height-Me&&(ie.textures.length>1&&Ae.readBuffer(Ae.COLOR_ATTACHMENT0+kt),Ae.readPixels(Ce,Fe,Ve,Me,ge.convert(dt),ge.convert(Jt),pt))}finally{const K=V!==null?ut.get(V).__webglFramebuffer:null;Ze.bindFramebuffer(Ae.FRAMEBUFFER,K)}}},this.readRenderTargetPixelsAsync=async function(ie,Ce,Fe,Ve,Me,pt,Ft,kt=0){if(!(ie&&ie.isWebGLRenderTarget))throw new Error("THREE.WebGLRenderer.readRenderTargetPixels: renderTarget is not THREE.WebGLRenderTarget.");let ot=ut.get(ie).__webglFramebuffer;if(ie.isWebGLCubeRenderTarget&&Ft!==void 0&&(ot=ot[Ft]),ot)if(Ce>=0&&Ce<=ie.width-Ve&&Fe>=0&&Fe<=ie.height-Me){Ze.bindFramebuffer(Ae.FRAMEBUFFER,ot);const K=ie.textures[kt],dt=K.format,Jt=K.type;if(!ht.textureFormatReadable(dt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in RGBA or implementation defined format.");if(!ht.textureTypeReadable(Jt))throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: renderTarget is not in UnsignedByteType or implementation defined type.");const nn=Ae.createBuffer();Ae.bindBuffer(Ae.PIXEL_PACK_BUFFER,nn),Ae.bufferData(Ae.PIXEL_PACK_BUFFER,pt.byteLength,Ae.STREAM_READ),ie.textures.length>1&&Ae.readBuffer(Ae.COLOR_ATTACHMENT0+kt),Ae.readPixels(Ce,Fe,Ve,Me,ge.convert(dt),ge.convert(Jt),0);const dn=V!==null?ut.get(V).__webglFramebuffer:null;Ze.bindFramebuffer(Ae.FRAMEBUFFER,dn);const xi=Ae.fenceSync(Ae.SYNC_GPU_COMMANDS_COMPLETE,0);return Ae.flush(),await vF(Ae,xi,4),Ae.bindBuffer(Ae.PIXEL_PACK_BUFFER,nn),Ae.getBufferSubData(Ae.PIXEL_PACK_BUFFER,0,pt),Ae.deleteBuffer(nn),Ae.deleteSync(xi),pt}else throw new Error("THREE.WebGLRenderer.readRenderTargetPixelsAsync: requested read bounds are out of range.")},this.copyFramebufferToTexture=function(ie,Ce=null,Fe=0){const Ve=Math.pow(2,-Fe),Me=Math.floor(ie.image.width*Ve),pt=Math.floor(ie.image.height*Ve),Ft=Ce!==null?Ce.x:0,kt=Ce!==null?Ce.y:0;Tt.setTexture2D(ie,0),Ae.copyTexSubImage2D(Ae.TEXTURE_2D,Fe,0,0,Ft,kt,Me,pt),Ze.unbindTexture()};const qs=Ae.createFramebuffer(),p1=Ae.createFramebuffer();this.copyTextureToTexture=function(ie,Ce,Fe=null,Ve=null,Me=0,pt=null){pt===null&&(Me!==0?($o("WebGLRenderer: copyTextureToTexture function signature has changed to support src and dst mipmap levels."),pt=Me,Me=0):pt=0);let Ft,kt,ot,K,dt,Jt,nn,dn,xi;const Qn=ie.isCompressedTexture?ie.mipmaps[pt]:ie.image;if(Fe!==null)Ft=Fe.max.x-Fe.min.x,kt=Fe.max.y-Fe.min.y,ot=Fe.isBox3?Fe.max.z-Fe.min.z:1,K=Fe.min.x,dt=Fe.min.y,Jt=Fe.isBox3?Fe.min.z:0;else{const fr=Math.pow(2,-Me);Ft=Math.floor(Qn.width*fr),kt=Math.floor(Qn.height*fr),ie.isDataArrayTexture?ot=Qn.depth:ie.isData3DTexture?ot=Math.floor(Qn.depth*fr):ot=1,K=0,dt=0,Jt=0}Ve!==null?(nn=Ve.x,dn=Ve.y,xi=Ve.z):(nn=0,dn=0,xi=0);const $=ge.convert(Ce.format),an=ge.convert(Ce.type);let Mi;Ce.isData3DTexture?(Tt.setTexture3D(Ce,0),Mi=Ae.TEXTURE_3D):Ce.isDataArrayTexture||Ce.isCompressedArrayTexture?(Tt.setTexture2DArray(Ce,0),Mi=Ae.TEXTURE_2D_ARRAY):(Tt.setTexture2D(Ce,0),Mi=Ae.TEXTURE_2D),Ae.pixelStorei(Ae.UNPACK_FLIP_Y_WEBGL,Ce.flipY),Ae.pixelStorei(Ae.UNPACK_PREMULTIPLY_ALPHA_WEBGL,Ce.premultiplyAlpha),Ae.pixelStorei(Ae.UNPACK_ALIGNMENT,Ce.unpackAlignment);const Nn=Ae.getParameter(Ae.UNPACK_ROW_LENGTH),Fr=Ae.getParameter(Ae.UNPACK_IMAGE_HEIGHT),o0=Ae.getParameter(Ae.UNPACK_SKIP_PIXELS),ds=Ae.getParameter(Ae.UNPACK_SKIP_ROWS),ta=Ae.getParameter(Ae.UNPACK_SKIP_IMAGES);Ae.pixelStorei(Ae.UNPACK_ROW_LENGTH,Qn.width),Ae.pixelStorei(Ae.UNPACK_IMAGE_HEIGHT,Qn.height),Ae.pixelStorei(Ae.UNPACK_SKIP_PIXELS,K),Ae.pixelStorei(Ae.UNPACK_SKIP_ROWS,dt),Ae.pixelStorei(Ae.UNPACK_SKIP_IMAGES,Jt);const Fi=ie.isDataArrayTexture||ie.isData3DTexture,$i=Ce.isDataArrayTexture||Ce.isData3DTexture;if(ie.isDepthTexture){const fr=ut.get(ie),mi=ut.get(Ce),Ur=ut.get(fr.__renderTarget),k0=ut.get(mi.__renderTarget);Ze.bindFramebuffer(Ae.READ_FRAMEBUFFER,Ur.__webglFramebuffer),Ze.bindFramebuffer(Ae.DRAW_FRAMEBUFFER,k0.__webglFramebuffer);for(let Mo=0;Mo<ot;Mo++)Fi&&(Ae.framebufferTextureLayer(Ae.READ_FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,ut.get(ie).__webglTexture,Me,Jt+Mo),Ae.framebufferTextureLayer(Ae.DRAW_FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,ut.get(Ce).__webglTexture,pt,xi+Mo)),Ae.blitFramebuffer(K,dt,Ft,kt,nn,dn,Ft,kt,Ae.DEPTH_BUFFER_BIT,Ae.NEAREST);Ze.bindFramebuffer(Ae.READ_FRAMEBUFFER,null),Ze.bindFramebuffer(Ae.DRAW_FRAMEBUFFER,null)}else if(Me!==0||ie.isRenderTargetTexture||ut.has(ie)){const fr=ut.get(ie),mi=ut.get(Ce);Ze.bindFramebuffer(Ae.READ_FRAMEBUFFER,qs),Ze.bindFramebuffer(Ae.DRAW_FRAMEBUFFER,p1);for(let Ur=0;Ur<ot;Ur++)Fi?Ae.framebufferTextureLayer(Ae.READ_FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,fr.__webglTexture,Me,Jt+Ur):Ae.framebufferTexture2D(Ae.READ_FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_2D,fr.__webglTexture,Me),$i?Ae.framebufferTextureLayer(Ae.DRAW_FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,mi.__webglTexture,pt,xi+Ur):Ae.framebufferTexture2D(Ae.DRAW_FRAMEBUFFER,Ae.COLOR_ATTACHMENT0,Ae.TEXTURE_2D,mi.__webglTexture,pt),Me!==0?Ae.blitFramebuffer(K,dt,Ft,kt,nn,dn,Ft,kt,Ae.COLOR_BUFFER_BIT,Ae.NEAREST):$i?Ae.copyTexSubImage3D(Mi,pt,nn,dn,xi+Ur,K,dt,Ft,kt):Ae.copyTexSubImage2D(Mi,pt,nn,dn,K,dt,Ft,kt);Ze.bindFramebuffer(Ae.READ_FRAMEBUFFER,null),Ze.bindFramebuffer(Ae.DRAW_FRAMEBUFFER,null)}else $i?ie.isDataTexture||ie.isData3DTexture?Ae.texSubImage3D(Mi,pt,nn,dn,xi,Ft,kt,ot,$,an,Qn.data):Ce.isCompressedArrayTexture?Ae.compressedTexSubImage3D(Mi,pt,nn,dn,xi,Ft,kt,ot,$,Qn.data):Ae.texSubImage3D(Mi,pt,nn,dn,xi,Ft,kt,ot,$,an,Qn):ie.isDataTexture?Ae.texSubImage2D(Ae.TEXTURE_2D,pt,nn,dn,Ft,kt,$,an,Qn.data):ie.isCompressedTexture?Ae.compressedTexSubImage2D(Ae.TEXTURE_2D,pt,nn,dn,Qn.width,Qn.height,$,Qn.data):Ae.texSubImage2D(Ae.TEXTURE_2D,pt,nn,dn,Ft,kt,$,an,Qn);Ae.pixelStorei(Ae.UNPACK_ROW_LENGTH,Nn),Ae.pixelStorei(Ae.UNPACK_IMAGE_HEIGHT,Fr),Ae.pixelStorei(Ae.UNPACK_SKIP_PIXELS,o0),Ae.pixelStorei(Ae.UNPACK_SKIP_ROWS,ds),Ae.pixelStorei(Ae.UNPACK_SKIP_IMAGES,ta),pt===0&&Ce.generateMipmaps&&Ae.generateMipmap(Mi),Ze.unbindTexture()},this.copyTextureToTexture3D=function(ie,Ce,Fe=null,Ve=null,Me=0){return $o('WebGLRenderer: copyTextureToTexture3D function has been deprecated. Use "copyTextureToTexture" instead.'),this.copyTextureToTexture(ie,Ce,Fe,Ve,Me)},this.initRenderTarget=function(ie){ut.get(ie).__webglFramebuffer===void 0&&Tt.setupRenderTarget(ie)},this.initTexture=function(ie){ie.isCubeTexture?Tt.setTextureCube(ie,0):ie.isData3DTexture?Tt.setTexture3D(ie,0):ie.isDataArrayTexture||ie.isCompressedArrayTexture?Tt.setTexture2DArray(ie,0):Tt.setTexture2D(ie,0),Ze.unbindTexture()},this.resetState=function(){F=0,O=0,V=null,Ze.reset(),Be.reset()},typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}get coordinateSystem(){return bs}get outputColorSpace(){return this._outputColorSpace}set outputColorSpace(e){this._outputColorSpace=e;const t=this.getContext();t.drawingBufferColorSpace=Sn._getDrawingBufferColorSpace(e),t.unpackColorSpace=Sn._getUnpackColorSpace()}}const Pq=Object.freeze(Object.defineProperty({__proto__:null,ACESFilmicToneMapping:y9,AddEquation:Ds,AddOperation:Xy,AdditiveAnimationBlendMode:ev,AdditiveBlending:K2,AgXToneMapping:Zy,AlphaFormat:v9,AlwaysCompare:E9,AlwaysDepth:C4,AlwaysStencilFunc:ad,AmbientLight:Fv,AnimationAction:eR,AnimationClip:d8,AnimationLoader:HU,AnimationMixer:yO,AnimationObjectGroup:mO,AnimationUtils:VU,ArcCurve:BE,ArrayCamera:zv,ArrowHelper:GO,AttachedBindMode:fg,Audio:ZE,AudioAnalyser:oO,AudioContext:Vv,AudioListener:iO,AudioLoader:eO,AxesHelper:qO,BackSide:Bi,BasicDepthPacking:aE,BasicShadowMap:Hy,BatchedMesh:NE,Bone:lv,BooleanKeyframeTrack:Nc,Box2:EO,Box3:ls,Box3Helper:VO,BoxGeometry:_l,BoxHelper:kO,BufferAttribute:oi,BufferGeometry:Tn,BufferGeometryLoader:KE,ByteType:ou,Cache:il,Camera:yu,CameraHelper:OO,CanvasTexture:uU,CapsuleGeometry:U9,CatmullRomCurve3:FE,CineonToneMapping:Ky,CircleGeometry:c5,ClampToEdgeWrapping:xo,Clock:Gv,Color:Et,ColorKeyframeTrack:Cv,ColorManagement:Sn,CompressedArrayTexture:aU,CompressedCubeTexture:lU,CompressedTexture:F9,CompressedTextureLoader:WU,ConeGeometry:Y8,ConstantAlphaFactor:YM,ConstantColorFactor:XM,Controls:HO,CubeCamera:ov,CubeReflectionMapping:_a,CubeRefractionMapping:Xa,CubeTexture:vu,CubeTextureLoader:jU,CubeUVReflectionMapping:t1,CubicBezierCurve:fv,CubicBezierCurve3:dv,CubicInterpolant:jE,CullFaceBack:id,CullFaceFront:qy,CullFaceFrontBack:kB,CullFaceNone:Gy,Curve:n0,CurvePath:OE,CustomBlending:z2,CustomToneMapping:ZM,CylinderGeometry:Cc,Cylindrical:MO,Data3DTexture:C9,DataArrayTexture:j8,DataTexture:I0,DataTextureLoader:$U,DataUtils:DF,DecrementStencilOp:fE,DecrementWrapStencilOp:AE,DefaultLoadingManager:QE,DepthFormat:Wo,DepthStencilFormat:jo,DepthTexture:Qo,DetachedBindMode:JM,DirectionalLight:Bv,DirectionalLightHelper:UO,DiscreteInterpolant:$E,DodecahedronGeometry:O9,DoubleSide:Mr,DstAlphaFactor:d9,DstColorFactor:p9,DynamicCopyUsage:YB,DynamicDrawUsage:D2,DynamicReadUsage:$B,EdgesGeometry:DE,EllipseCurve:k9,EqualCompare:S9,EqualDepth:N4,EqualStencilFunc:yE,EquirectangularReflectionMapping:fu,EquirectangularRefractionMapping:du,Euler:Ts,EventDispatcher:Ta,ExtrudeGeometry:K8,FileLoader:s1,Float16BufferAttribute:sv,Float32BufferAttribute:Ht,FloatType:nr,Fog:$8,FogExp2:L9,FramebufferTexture:cv,FrontSide:So,Frustum:_u,FrustumArray:X8,GLBufferAttribute:SO,GLSL1:ZB,GLSL3:Ag,GreaterCompare:T9,GreaterDepth:L4,GreaterEqualCompare:M9,GreaterEqualDepth:I4,GreaterEqualStencilFunc:bE,GreaterStencilFunc:_E,GridHelper:BO,Group:Zs,HalfFloatType:Yr,HemisphereLight:Iv,HemisphereLightHelper:DO,IcosahedronGeometry:V9,ImageBitmapLoader:JU,ImageLoader:A8,ImageUtils:SE,IncrementStencilOp:hE,IncrementWrapStencilOp:dE,InstancedBufferAttribute:Xo,InstancedBufferGeometry:kv,InstancedInterleavedBuffer:p8,InstancedMesh:PE,Int16BufferAttribute:kF,Int32BufferAttribute:VF,Int8BufferAttribute:FF,IntType:as,InterleavedBuffer:u5,InterleavedBufferAttribute:bo,Interpolant:e6,InterpolateDiscrete:s8,InterpolateLinear:od,InterpolateSmooth:kf,InterpolationSamplingMode:tF,InterpolationSamplingType:eF,InvertStencilOp:pE,KeepStencilOp:Y1,KeyframeTrack:r0,LOD:RE,LatheGeometry:z9,Layers:q2,LessCompare:H8,LessDepth:P4,LessEqualCompare:W8,LessEqualDepth:e1,LessEqualStencilFunc:vE,LessStencilFunc:gE,Light:bu,LightProbe:Ov,Line:D0,Line3:iR,LineBasicMaterial:hs,LineCurve:Av,LineCurve3:UE,LineDashedMaterial:Mv,LineLoop:IE,LineSegments:t0,LinearFilter:Wi,LinearInterpolant:Rv,LinearMipMapLinearFilter:eE,LinearMipMapNearestFilter:GB,LinearMipmapLinearFilter:Fs,LinearMipmapNearestFilter:su,LinearSRGBColorSpace:r1,LinearToneMapping:Qy,LinearTransfer:mc,Loader:Jo,LoaderUtils:vg,LoadingManager:Pv,LoopOnce:nE,LoopPingPong:rE,LoopRepeat:iE,MOUSE:S2,Material:ws,MaterialLoader:Q9,MathUtils:R9,Matrix2:i6,Matrix3:Fn,Matrix4:Wt,MaxEquation:jy,Mesh:ei,MeshBasicMaterial:Bs,MeshDepthMaterial:Sv,MeshDistanceMaterial:Tv,MeshLambertMaterial:U0,MeshMatcapMaterial:wv,MeshNormalMaterial:bv,MeshPhongMaterial:X9,MeshPhysicalMaterial:_v,MeshStandardMaterial:$9,MeshToonMaterial:xv,MinEquation:Wy,MirroredRepeatWrapping:i1,MixOperation:$y,MultiplyBlending:J2,MultiplyOperation:a5,NearestFilter:qi,NearestMipMapLinearFilter:zB,NearestMipMapNearestFilter:VB,NearestMipmapLinearFilter:R0,NearestMipmapNearestFilter:V8,NeutralToneMapping:Jy,NeverCompare:b9,NeverDepth:R4,NeverStencilFunc:mE,NoBlending:qo,NoColorSpace:vo,NoToneMapping:eo,NormalAnimationBlendMode:x9,NormalBlending:Js,NotEqualCompare:w9,NotEqualDepth:D4,NotEqualStencilFunc:xE,NumberKeyframeTrack:h8,Object3D:Ai,ObjectLoader:KU,ObjectSpaceNormalMap:tv,OctahedronGeometry:Z8,OneFactor:c9,OneMinusConstantAlphaFactor:KM,OneMinusConstantColorFactor:QM,OneMinusDstAlphaFactor:A9,OneMinusDstColorFactor:m9,OneMinusSrcAlphaFactor:E4,OneMinusSrcColorFactor:f9,OrthographicCamera:rl,PCFShadowMap:O8,PCFSoftShadowMap:Wh,PMREMGenerator:Sg,Path:hd,PerspectiveCamera:tr,Plane:M0,PlaneGeometry:Pc,PlaneHelper:zO,PointLight:Dv,PointLightHelper:IO,Points:uv,PointsMaterial:Q8,PolarGridHelper:FO,PolyhedronGeometry:xu,PositionalAudio:sO,PropertyBinding:Si,PropertyMixer:JE,QuadraticBezierCurve:pv,QuadraticBezierCurve3:mv,Quaternion:Os,QuaternionKeyframeTrack:t6,QuaternionLinearInterpolant:XE,RED_GREEN_RGTC2_Format:z4,RED_RGTC1_Format:_9,REVISION:o5,RGBADepthPacking:lE,RGBAFormat:Zi,RGBAIntegerFormat:Mc,RGBA_ASTC_10x10_Format:dc,RGBA_ASTC_10x5_Format:cc,RGBA_ASTC_10x6_Format:hc,RGBA_ASTC_10x8_Format:fc,RGBA_ASTC_12x10_Format:Ac,RGBA_ASTC_12x12_Format:pc,RGBA_ASTC_4x4_Format:nc,RGBA_ASTC_5x4_Format:ic,RGBA_ASTC_5x5_Format:rc,RGBA_ASTC_6x5_Format:sc,RGBA_ASTC_6x6_Format:oc,RGBA_ASTC_8x5_Format:ac,RGBA_ASTC_8x6_Format:lc,RGBA_ASTC_8x8_Format:uc,RGBA_BPTC_Format:uu,RGBA_ETC2_EAC_Format:tc,RGBA_PVRTC_2BPPV1_Format:O4,RGBA_PVRTC_4BPPV1_Format:U4,RGBA_S3TC_DXT1_Format:jl,RGBA_S3TC_DXT3_Format:$l,RGBA_S3TC_DXT5_Format:Xl,RGBDepthPacking:qB,RGBFormat:l5,RGBIntegerFormat:tE,RGB_BPTC_SIGNED_Format:rd,RGB_BPTC_UNSIGNED_Format:sd,RGB_ETC1_Format:k4,RGB_ETC2_Format:ec,RGB_PVRTC_2BPPV1_Format:F4,RGB_PVRTC_4BPPV1_Format:B4,RGB_S3TC_DXT1_Format:lu,RGDepthPacking:HB,RGFormat:nl,RGIntegerFormat:wc,RawShaderMaterial:qE,Ray:Ec,Raycaster:nR,RectAreaLight:Uv,RedFormat:Tc,RedIntegerFormat:gu,ReinhardToneMapping:Yy,RenderTarget:F0,RenderTarget3D:vO,RepeatWrapping:n1,ReplaceStencilOp:cE,ReverseSubtractEquation:u9,RingGeometry:G9,SIGNED_RED_GREEN_RGTC2_Format:G4,SIGNED_RED_RGTC1_Format:V4,SRGBColorSpace:xs,SRGBTransfer:qt,Scene:Rc,ShaderChunk:Wn,ShaderLib:po,ShaderMaterial:To,ShadowMaterial:vv,Shape:H2,ShapeGeometry:q9,ShapePath:sR,ShapeUtils:C0,ShortType:au,Skeleton:B9,SkeletonHelper:NO,SkinnedMesh:CE,Source:iu,Sphere:Kr,SphereGeometry:i0,Spherical:xg,SphericalHarmonics3:YE,SplineCurve:gv,SpotLight:n6,SpotLightHelper:PO,Sprite:EE,SpriteMaterial:D9,SrcAlphaFactor:M4,SrcAlphaSaturateFactor:g9,SrcColorFactor:h9,StaticCopyUsage:QB,StaticDrawUsage:q4,StaticReadUsage:jB,StereoCamera:tO,StreamCopyUsage:KB,StreamDrawUsage:WB,StreamReadUsage:XB,StringKeyframeTrack:Ic,SubtractEquation:l9,SubtractiveBlending:Z2,TOUCH:T2,TangentSpaceNormalMap:fl,TetrahedronGeometry:H9,Texture:ur,TextureLoader:Nv,TextureUtils:QO,Timer:TO,TimestampQuery:JB,TorusGeometry:W9,TorusKnotGeometry:j9,Triangle:Oo,TriangleFanDrawMode:dg,TriangleStripDrawMode:oE,TrianglesDrawMode:sE,TubeGeometry:J8,UVMapping:k8,Uint16BufferAttribute:P9,Uint32BufferAttribute:N9,Uint8BufferAttribute:UF,Uint8ClampedBufferAttribute:OF,Uniform:_O,UniformsGroup:bO,UniformsLib:Nt,UniformsUtils:I9,UnsignedByteType:ar,UnsignedInt248Type:Ho,UnsignedInt5999Type:q8,UnsignedIntType:Oi,UnsignedShort4444Type:z8,UnsignedShort5551Type:G8,UnsignedShortType:qa,VSMShadowMap:Ao,Vector2:Ge,Vector3:J,Vector4:rn,VectorKeyframeTrack:f8,VideoFrameTexture:oU,VideoTexture:LE,WebGL3DRenderTarget:TF,WebGLArrayRenderTarget:SF,WebGLCoordinateSystem:bs,WebGLCubeRenderTarget:av,WebGLRenderTarget:dl,WebGLRenderer:dR,WebGLUtils:hR,WebGPUCoordinateSystem:Qa,WebXRController:$h,WireframeGeometry:yv,WrapAroundEnding:o8,ZeroCurvatureEnding:I2,ZeroFactor:K0,ZeroSlopeEnding:L2,ZeroStencilOp:uE,createCanvasElement:rv},Symbol.toStringTag,{value:"Module"}));function wg(i){var e=typeof i;return i!=null&&(e=="object"||e=="function")}var Nq=typeof global=="object"&&global&&global.Object===Object&&global,Iq=typeof self=="object"&&self&&self.Object===Object&&self,AR=Nq||Iq||Function("return this")(),em=function(){return AR.Date.now()},Lq=/\s/;function Dq(i){for(var e=i.length;e--&&Lq.test(i.charAt(e)););return e}var Bq=/^\s+/;function Fq(i){return i&&i.slice(0,Dq(i)+1).replace(Bq,"")}var fd=AR.Symbol,pR=Object.prototype,Uq=pR.hasOwnProperty,Oq=pR.toString,lh=fd?fd.toStringTag:void 0;function kq(i){var e=Uq.call(i,lh),t=i[lh];try{i[lh]=void 0;var n=!0}catch{}var r=Oq.call(i);return n&&(e?i[lh]=t:delete i[lh]),r}var Vq=Object.prototype,zq=Vq.toString;function Gq(i){return zq.call(i)}var qq="[object Null]",Hq="[object Undefined]",MS=fd?fd.toStringTag:void 0;function Wq(i){return i==null?i===void 0?Hq:qq:MS&&MS in Object(i)?kq(i):Gq(i)}function jq(i){return i!=null&&typeof i=="object"}var $q="[object Symbol]";function Xq(i){return typeof i=="symbol"||jq(i)&&Wq(i)==$q}var ES=NaN,Qq=/^[-+]0x[0-9a-f]+$/i,Yq=/^0b[01]+$/i,Kq=/^0o[0-7]+$/i,Zq=parseInt;function RS(i){if(typeof i=="number")return i;if(Xq(i))return ES;if(wg(i)){var e=typeof i.valueOf=="function"?i.valueOf():i;i=wg(e)?e+"":e}if(typeof i!="string")return i===0?i:+i;i=Fq(i);var t=Yq.test(i);return t||Kq.test(i)?Zq(i.slice(2),t?2:8):Qq.test(i)?ES:+i}var Jq="Expected a function",eH=Math.max,tH=Math.min;function nH(i,e,t){var n,r,s,o,a,l,u=0,c=!1,A=!1,m=!0;if(typeof i!="function")throw new TypeError(Jq);e=RS(e)||0,wg(t)&&(c=!!t.leading,A="maxWait"in t,s=A?eH(RS(t.maxWait)||0,e):s,m="trailing"in t?!!t.trailing:m);function _(F){var O=n,V=r;return n=r=void 0,u=F,o=i.apply(V,O),o}function b(F){return u=F,a=setTimeout(T,e),c?_(F):o}function M(F){var O=F-l,V=F-u,U=e-O;return A?tH(U,s-V):U}function w(F){var O=F-l,V=F-u;return l===void 0||O>=e||O<0||A&&V>=s}function T(){var F=em();if(w(F))return N(F);a=setTimeout(T,M(F))}function N(F){return a=void 0,m&&n?_(F):(n=r=void 0,o)}function P(){a!==void 0&&clearTimeout(a),u=0,n=l=r=a=void 0}function I(){return a===void 0?o:N(em())}function B(){var F=em(),O=w(F);if(n=arguments,r=this,l=F,O){if(a===void 0)return b(l);if(A)return clearTimeout(a),a=setTimeout(T,e),_(l)}return a===void 0&&(a=setTimeout(T,e)),o}return B.cancel=P,B.flush=I,B}function CS(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function iH(i){if(Array.isArray(i))return i}function rH(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function sH(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function oH(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function aH(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lH(i,e){return iH(i)||oH(i,e)||uH(i,e)||aH()}function uH(i,e){if(i){if(typeof i=="string")return CS(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?CS(i,e):void 0}}var cH=sH(function i(e,t){var n=t.default,r=n===void 0?null:n,s=t.triggerUpdate,o=s===void 0?!0:s,a=t.onChange,l=a===void 0?function(u,c){}:a;rH(this,i),this.name=e,this.defaultVal=r,this.triggerUpdate=o,this.onChange=l});function io(i){var e=i.stateInit,t=e===void 0?function(){return{}}:e,n=i.props,r=n===void 0?{}:n,s=i.methods,o=s===void 0?{}:s,a=i.aliases,l=a===void 0?{}:a,u=i.init,c=u===void 0?function(){}:u,A=i.update,m=A===void 0?function(){}:A,_=Object.keys(r).map(function(b){return new cH(b,r[b])});return function b(){for(var M=arguments.length,w=new Array(M),T=0;T<M;T++)w[T]=arguments[T];var N=!!(this instanceof b&&this.constructor),P=N?w.shift():void 0,I=w[0],B=I===void 0?{}:I,F=Object.assign({},t instanceof Function?t(B):t,{initialised:!1}),O={};function V(H){return U(H,B),z(),V}var U=function(Q,Y){c.call(V,Q,F,Y),F.initialised=!0},z=nH(function(){F.initialised&&(m.call(V,F,O),O={})},1);return _.forEach(function(H){V[H.name]=Q(H);function Q(Y){var ne=Y.name,ee=Y.triggerUpdate,se=ee===void 0?!1:ee,pe=Y.onChange,re=pe===void 0?function(Pe,Qe){}:pe,de=Y.defaultVal,ye=de===void 0?null:de;return function(Pe){var Qe=F[ne];if(!arguments.length)return Qe;var et=Pe===void 0?ye:Pe;return F[ne]=et,re.call(V,et,F,Qe),!O.hasOwnProperty(ne)&&(O[ne]=Qe),se&&z(),V}}}),Object.keys(o).forEach(function(H){V[H]=function(){for(var Q,Y=arguments.length,ne=new Array(Y),ee=0;ee<Y;ee++)ne[ee]=arguments[ee];return(Q=o[H]).call.apply(Q,[V,F].concat(ne))}}),Object.entries(l).forEach(function(H){var Q=lH(H,2),Y=Q[0],ne=Q[1];return V[Y]=V[ne]}),V.resetProps=function(){return _.forEach(function(H){V[H.name](H.defaultVal)}),V},V.resetProps(),F._rerender=z,N&&P&&V(P),V}}var ks=Object.freeze({Linear:Object.freeze({None:function(i){return i},In:function(i){return i},Out:function(i){return i},InOut:function(i){return i}}),Quadratic:Object.freeze({In:function(i){return i*i},Out:function(i){return i*(2-i)},InOut:function(i){return(i*=2)<1?.5*i*i:-.5*(--i*(i-2)-1)}}),Cubic:Object.freeze({In:function(i){return i*i*i},Out:function(i){return--i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i:.5*((i-=2)*i*i+2)}}),Quartic:Object.freeze({In:function(i){return i*i*i*i},Out:function(i){return 1- --i*i*i*i},InOut:function(i){return(i*=2)<1?.5*i*i*i*i:-.5*((i-=2)*i*i*i-2)}}),Quintic:Object.freeze({In:function(i){return i*i*i*i*i},Out:function(i){return--i*i*i*i*i+1},InOut:function(i){return(i*=2)<1?.5*i*i*i*i*i:.5*((i-=2)*i*i*i*i+2)}}),Sinusoidal:Object.freeze({In:function(i){return 1-Math.sin((1-i)*Math.PI/2)},Out:function(i){return Math.sin(i*Math.PI/2)},InOut:function(i){return .5*(1-Math.sin(Math.PI*(.5-i)))}}),Exponential:Object.freeze({In:function(i){return i===0?0:Math.pow(1024,i-1)},Out:function(i){return i===1?1:1-Math.pow(2,-10*i)},InOut:function(i){return i===0?0:i===1?1:(i*=2)<1?.5*Math.pow(1024,i-1):.5*(-Math.pow(2,-10*(i-1))+2)}}),Circular:Object.freeze({In:function(i){return 1-Math.sqrt(1-i*i)},Out:function(i){return Math.sqrt(1- --i*i)},InOut:function(i){return(i*=2)<1?-.5*(Math.sqrt(1-i*i)-1):.5*(Math.sqrt(1-(i-=2)*i)+1)}}),Elastic:Object.freeze({In:function(i){return i===0?0:i===1?1:-Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI)},Out:function(i){return i===0?0:i===1?1:Math.pow(2,-10*i)*Math.sin((i-.1)*5*Math.PI)+1},InOut:function(i){return i===0?0:i===1?1:(i*=2,i<1?-.5*Math.pow(2,10*(i-1))*Math.sin((i-1.1)*5*Math.PI):.5*Math.pow(2,-10*(i-1))*Math.sin((i-1.1)*5*Math.PI)+1)}}),Back:Object.freeze({In:function(i){var e=1.70158;return i===1?1:i*i*((e+1)*i-e)},Out:function(i){var e=1.70158;return i===0?0:--i*i*((e+1)*i+e)+1},InOut:function(i){var e=2.5949095;return(i*=2)<1?.5*(i*i*((e+1)*i-e)):.5*((i-=2)*i*((e+1)*i+e)+2)}}),Bounce:Object.freeze({In:function(i){return 1-ks.Bounce.Out(1-i)},Out:function(i){return i<1/2.75?7.5625*i*i:i<2/2.75?7.5625*(i-=1.5/2.75)*i+.75:i<2.5/2.75?7.5625*(i-=2.25/2.75)*i+.9375:7.5625*(i-=2.625/2.75)*i+.984375},InOut:function(i){return i<.5?ks.Bounce.In(i*2)*.5:ks.Bounce.Out(i*2-1)*.5+.5}}),generatePow:function(i){return i===void 0&&(i=4),i=i<Number.EPSILON?Number.EPSILON:i,i=i>1e4?1e4:i,{In:function(e){return Math.pow(e,i)},Out:function(e){return 1-Math.pow(1-e,i)},InOut:function(e){return e<.5?Math.pow(e*2,i)/2:(1-Math.pow(2-e*2,i))/2+.5}}}}),Bh=function(){return performance.now()},mR=function(){function i(){this._tweens={},this._tweensAddedDuringUpdate={}}return i.prototype.getAll=function(){var e=this;return Object.keys(this._tweens).map(function(t){return e._tweens[t]})},i.prototype.removeAll=function(){this._tweens={}},i.prototype.add=function(e){this._tweens[e.getId()]=e,this._tweensAddedDuringUpdate[e.getId()]=e},i.prototype.remove=function(e){delete this._tweens[e.getId()],delete this._tweensAddedDuringUpdate[e.getId()]},i.prototype.update=function(e,t){e===void 0&&(e=Bh()),t===void 0&&(t=!1);var n=Object.keys(this._tweens);if(n.length===0)return!1;for(;n.length>0;){this._tweensAddedDuringUpdate={};for(var r=0;r<n.length;r++){var s=this._tweens[n[r]],o=!t;s&&s.update(e,o)===!1&&!t&&delete this._tweens[n[r]]}n=Object.keys(this._tweensAddedDuringUpdate)}return!0},i}(),Mg={Linear:function(i,e){var t=i.length-1,n=t*e,r=Math.floor(n),s=Mg.Utils.Linear;return e<0?s(i[0],i[1],n):e>1?s(i[t],i[t-1],t-n):s(i[r],i[r+1>t?t:r+1],n-r)},Utils:{Linear:function(i,e,t){return(e-i)*t+i}}},gR=function(){function i(){}return i.nextId=function(){return i._nextId++},i._nextId=0,i}(),Eg=new mR,xa=function(){function i(e,t){t===void 0&&(t=Eg),this._object=e,this._group=t,this._isPaused=!1,this._pauseStart=0,this._valuesStart={},this._valuesEnd={},this._valuesStartRepeat={},this._duration=1e3,this._isDynamic=!1,this._initialRepeat=0,this._repeat=0,this._yoyo=!1,this._isPlaying=!1,this._reversed=!1,this._delayTime=0,this._startTime=0,this._easingFunction=ks.Linear.None,this._interpolationFunction=Mg.Linear,this._chainedTweens=[],this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._id=gR.nextId(),this._isChainStopped=!1,this._propertiesAreSetUp=!1,this._goToEnd=!1}return i.prototype.getId=function(){return this._id},i.prototype.isPlaying=function(){return this._isPlaying},i.prototype.isPaused=function(){return this._isPaused},i.prototype.getDuration=function(){return this._duration},i.prototype.to=function(e,t){if(t===void 0&&(t=1e3),this._isPlaying)throw new Error("Can not call Tween.to() while Tween is already started or paused. Stop the Tween first.");return this._valuesEnd=e,this._propertiesAreSetUp=!1,this._duration=t<0?0:t,this},i.prototype.duration=function(e){return e===void 0&&(e=1e3),this._duration=e<0?0:e,this},i.prototype.dynamic=function(e){return e===void 0&&(e=!1),this._isDynamic=e,this},i.prototype.start=function(e,t){if(e===void 0&&(e=Bh()),t===void 0&&(t=!1),this._isPlaying)return this;if(this._group&&this._group.add(this),this._repeat=this._initialRepeat,this._reversed){this._reversed=!1;for(var n in this._valuesStartRepeat)this._swapEndStartRepeatValues(n),this._valuesStart[n]=this._valuesStartRepeat[n]}if(this._isPlaying=!0,this._isPaused=!1,this._onStartCallbackFired=!1,this._onEveryStartCallbackFired=!1,this._isChainStopped=!1,this._startTime=e,this._startTime+=this._delayTime,!this._propertiesAreSetUp||t){if(this._propertiesAreSetUp=!0,!this._isDynamic){var r={};for(var s in this._valuesEnd)r[s]=this._valuesEnd[s];this._valuesEnd=r}this._setupProperties(this._object,this._valuesStart,this._valuesEnd,this._valuesStartRepeat,t)}return this},i.prototype.startFromCurrentValues=function(e){return this.start(e,!0)},i.prototype._setupProperties=function(e,t,n,r,s){for(var o in n){var a=e[o],l=Array.isArray(a),u=l?"array":typeof a,c=!l&&Array.isArray(n[o]);if(!(u==="undefined"||u==="function")){if(c){var A=n[o];if(A.length===0)continue;for(var m=[a],_=0,b=A.length;_<b;_+=1){var M=this._handleRelativeValue(a,A[_]);if(isNaN(M)){c=!1,console.warn("Found invalid interpolation list. Skipping.");break}m.push(M)}c&&(n[o]=m)}if((u==="object"||l)&&a&&!c){t[o]=l?[]:{};var w=a;for(var T in w)t[o][T]=w[T];r[o]=l?[]:{};var A=n[o];if(!this._isDynamic){var N={};for(var T in A)N[T]=A[T];n[o]=A=N}this._setupProperties(w,t[o],A,r[o],s)}else(typeof t[o]>"u"||s)&&(t[o]=a),l||(t[o]*=1),c?r[o]=n[o].slice().reverse():r[o]=t[o]||0}}},i.prototype.stop=function(){return this._isChainStopped||(this._isChainStopped=!0,this.stopChainedTweens()),this._isPlaying?(this._group&&this._group.remove(this),this._isPlaying=!1,this._isPaused=!1,this._onStopCallback&&this._onStopCallback(this._object),this):this},i.prototype.end=function(){return this._goToEnd=!0,this.update(1/0),this},i.prototype.pause=function(e){return e===void 0&&(e=Bh()),this._isPaused||!this._isPlaying?this:(this._isPaused=!0,this._pauseStart=e,this._group&&this._group.remove(this),this)},i.prototype.resume=function(e){return e===void 0&&(e=Bh()),!this._isPaused||!this._isPlaying?this:(this._isPaused=!1,this._startTime+=e-this._pauseStart,this._pauseStart=0,this._group&&this._group.add(this),this)},i.prototype.stopChainedTweens=function(){for(var e=0,t=this._chainedTweens.length;e<t;e++)this._chainedTweens[e].stop();return this},i.prototype.group=function(e){return e===void 0&&(e=Eg),this._group=e,this},i.prototype.delay=function(e){return e===void 0&&(e=0),this._delayTime=e,this},i.prototype.repeat=function(e){return e===void 0&&(e=0),this._initialRepeat=e,this._repeat=e,this},i.prototype.repeatDelay=function(e){return this._repeatDelayTime=e,this},i.prototype.yoyo=function(e){return e===void 0&&(e=!1),this._yoyo=e,this},i.prototype.easing=function(e){return e===void 0&&(e=ks.Linear.None),this._easingFunction=e,this},i.prototype.interpolation=function(e){return e===void 0&&(e=Mg.Linear),this._interpolationFunction=e,this},i.prototype.chain=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return this._chainedTweens=e,this},i.prototype.onStart=function(e){return this._onStartCallback=e,this},i.prototype.onEveryStart=function(e){return this._onEveryStartCallback=e,this},i.prototype.onUpdate=function(e){return this._onUpdateCallback=e,this},i.prototype.onRepeat=function(e){return this._onRepeatCallback=e,this},i.prototype.onComplete=function(e){return this._onCompleteCallback=e,this},i.prototype.onStop=function(e){return this._onStopCallback=e,this},i.prototype.update=function(e,t){var n=this,r;if(e===void 0&&(e=Bh()),t===void 0&&(t=!0),this._isPaused)return!0;var s,o=this._startTime+this._duration;if(!this._goToEnd&&!this._isPlaying){if(e>o)return!1;t&&this.start(e,!0)}if(this._goToEnd=!1,e<this._startTime)return!0;this._onStartCallbackFired===!1&&(this._onStartCallback&&this._onStartCallback(this._object),this._onStartCallbackFired=!0),this._onEveryStartCallbackFired===!1&&(this._onEveryStartCallback&&this._onEveryStartCallback(this._object),this._onEveryStartCallbackFired=!0);var a=e-this._startTime,l=this._duration+((r=this._repeatDelayTime)!==null&&r!==void 0?r:this._delayTime),u=this._duration+this._repeat*l,c=function(){if(n._duration===0||a>u)return 1;var w=Math.trunc(a/l),T=a-w*l,N=Math.min(T/n._duration,1);return N===0&&a===n._duration?1:N},A=c(),m=this._easingFunction(A);if(this._updateProperties(this._object,this._valuesStart,this._valuesEnd,m),this._onUpdateCallback&&this._onUpdateCallback(this._object,A),this._duration===0||a>=this._duration)if(this._repeat>0){var _=Math.min(Math.trunc((a-this._duration)/l)+1,this._repeat);isFinite(this._repeat)&&(this._repeat-=_);for(s in this._valuesStartRepeat)!this._yoyo&&typeof this._valuesEnd[s]=="string"&&(this._valuesStartRepeat[s]=this._valuesStartRepeat[s]+parseFloat(this._valuesEnd[s])),this._yoyo&&this._swapEndStartRepeatValues(s),this._valuesStart[s]=this._valuesStartRepeat[s];return this._yoyo&&(this._reversed=!this._reversed),this._startTime+=l*_,this._onRepeatCallback&&this._onRepeatCallback(this._object),this._onEveryStartCallbackFired=!1,!0}else{this._onCompleteCallback&&this._onCompleteCallback(this._object);for(var b=0,M=this._chainedTweens.length;b<M;b++)this._chainedTweens[b].start(this._startTime+this._duration,!1);return this._isPlaying=!1,!1}return!0},i.prototype._updateProperties=function(e,t,n,r){for(var s in n)if(t[s]!==void 0){var o=t[s]||0,a=n[s],l=Array.isArray(e[s]),u=Array.isArray(a),c=!l&&u;c?e[s]=this._interpolationFunction(a,r):typeof a=="object"&&a?this._updateProperties(e[s],o,a,r):(a=this._handleRelativeValue(o,a),typeof a=="number"&&(e[s]=o+(a-o)*r))}},i.prototype._handleRelativeValue=function(e,t){return typeof t!="string"?t:t.charAt(0)==="+"||t.charAt(0)==="-"?e+parseFloat(t):parseFloat(t)},i.prototype._swapEndStartRepeatValues=function(e){var t=this._valuesStartRepeat[e],n=this._valuesEnd[e];typeof n=="string"?this._valuesStartRepeat[e]=this._valuesStartRepeat[e]+parseFloat(n):this._valuesStartRepeat[e]=this._valuesEnd[e],this._valuesEnd[e]=t},i}();gR.nextId;var Al=Eg;Al.getAll.bind(Al);Al.removeAll.bind(Al);Al.add.bind(Al);Al.remove.bind(Al);Al.update.bind(Al);function hH(i){const e=+this._x.call(null,i),t=+this._y.call(null,i),n=+this._z.call(null,i);return yR(this.cover(e,t,n),e,t,n,i)}function yR(i,e,t,n,r){if(isNaN(e)||isNaN(t)||isNaN(n))return i;var s,o=i._root,a={data:r},l=i._x0,u=i._y0,c=i._z0,A=i._x1,m=i._y1,_=i._z1,b,M,w,T,N,P,I,B,F,O,V;if(!o)return i._root=a,i;for(;o.length;)if((I=e>=(b=(l+A)/2))?l=b:A=b,(B=t>=(M=(u+m)/2))?u=M:m=M,(F=n>=(w=(c+_)/2))?c=w:_=w,s=o,!(o=o[O=F<<2|B<<1|I]))return s[O]=a,i;if(T=+i._x.call(null,o.data),N=+i._y.call(null,o.data),P=+i._z.call(null,o.data),e===T&&t===N&&n===P)return a.next=o,s?s[O]=a:i._root=a,i;do s=s?s[O]=new Array(8):i._root=new Array(8),(I=e>=(b=(l+A)/2))?l=b:A=b,(B=t>=(M=(u+m)/2))?u=M:m=M,(F=n>=(w=(c+_)/2))?c=w:_=w;while((O=F<<2|B<<1|I)===(V=(P>=w)<<2|(N>=M)<<1|T>=b));return s[V]=o,s[O]=a,i}function fH(i){Array.isArray(i)||(i=Array.from(i));const e=i.length,t=new Float64Array(e),n=new Float64Array(e),r=new Float64Array(e);let s=1/0,o=1/0,a=1/0,l=-1/0,u=-1/0,c=-1/0;for(let A=0,m,_,b,M;A<e;++A)isNaN(_=+this._x.call(null,m=i[A]))||isNaN(b=+this._y.call(null,m))||isNaN(M=+this._z.call(null,m))||(t[A]=_,n[A]=b,r[A]=M,_<s&&(s=_),_>l&&(l=_),b<o&&(o=b),b>u&&(u=b),M<a&&(a=M),M>c&&(c=M));if(s>l||o>u||a>c)return this;this.cover(s,o,a).cover(l,u,c);for(let A=0;A<e;++A)yR(this,t[A],n[A],r[A],i[A]);return this}function dH(i,e,t){if(isNaN(i=+i)||isNaN(e=+e)||isNaN(t=+t))return this;var n=this._x0,r=this._y0,s=this._z0,o=this._x1,a=this._y1,l=this._z1;if(isNaN(n))o=(n=Math.floor(i))+1,a=(r=Math.floor(e))+1,l=(s=Math.floor(t))+1;else{for(var u=o-n||1,c=this._root,A,m;n>i||i>=o||r>e||e>=a||s>t||t>=l;)switch(m=(t<s)<<2|(e<r)<<1|i<n,A=new Array(8),A[m]=c,c=A,u*=2,m){case 0:o=n+u,a=r+u,l=s+u;break;case 1:n=o-u,a=r+u,l=s+u;break;case 2:o=n+u,r=a-u,l=s+u;break;case 3:n=o-u,r=a-u,l=s+u;break;case 4:o=n+u,a=r+u,s=l-u;break;case 5:n=o-u,a=r+u,s=l-u;break;case 6:o=n+u,r=a-u,s=l-u;break;case 7:n=o-u,r=a-u,s=l-u;break}this._root&&this._root.length&&(this._root=c)}return this._x0=n,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this}function AH(){var i=[];return this.visit(function(e){if(!e.length)do i.push(e.data);while(e=e.next)}),i}function pH(i){return arguments.length?this.cover(+i[0][0],+i[0][1],+i[0][2]).cover(+i[1][0],+i[1][1],+i[1][2]):isNaN(this._x0)?void 0:[[this._x0,this._y0,this._z0],[this._x1,this._y1,this._z1]]}function Yi(i,e,t,n,r,s,o){this.node=i,this.x0=e,this.y0=t,this.z0=n,this.x1=r,this.y1=s,this.z1=o}function mH(i,e,t,n){var r,s=this._x0,o=this._y0,a=this._z0,l,u,c,A,m,_,b=this._x1,M=this._y1,w=this._z1,T=[],N=this._root,P,I;for(N&&T.push(new Yi(N,s,o,a,b,M,w)),n==null?n=1/0:(s=i-n,o=e-n,a=t-n,b=i+n,M=e+n,w=t+n,n*=n);P=T.pop();)if(!(!(N=P.node)||(l=P.x0)>b||(u=P.y0)>M||(c=P.z0)>w||(A=P.x1)<s||(m=P.y1)<o||(_=P.z1)<a))if(N.length){var B=(l+A)/2,F=(u+m)/2,O=(c+_)/2;T.push(new Yi(N[7],B,F,O,A,m,_),new Yi(N[6],l,F,O,B,m,_),new Yi(N[5],B,u,O,A,F,_),new Yi(N[4],l,u,O,B,F,_),new Yi(N[3],B,F,c,A,m,O),new Yi(N[2],l,F,c,B,m,O),new Yi(N[1],B,u,c,A,F,O),new Yi(N[0],l,u,c,B,F,O)),(I=(t>=O)<<2|(e>=F)<<1|i>=B)&&(P=T[T.length-1],T[T.length-1]=T[T.length-1-I],T[T.length-1-I]=P)}else{var V=i-+this._x.call(null,N.data),U=e-+this._y.call(null,N.data),z=t-+this._z.call(null,N.data),H=V*V+U*U+z*z;if(H<n){var Q=Math.sqrt(n=H);s=i-Q,o=e-Q,a=t-Q,b=i+Q,M=e+Q,w=t+Q,r=N.data}}return r}const gH=(i,e,t,n,r,s)=>Math.sqrt((i-n)**2+(e-r)**2+(t-s)**2);function yH(i,e,t,n){const r=[],s=i-n,o=e-n,a=t-n,l=i+n,u=e+n,c=t+n;return this.visit((A,m,_,b,M,w,T)=>{if(!A.length)do{const N=A.data;gH(i,e,t,this._x(N),this._y(N),this._z(N))<=n&&r.push(N)}while(A=A.next);return m>l||_>u||b>c||M<s||w<o||T<a}),r}function vH(i){if(isNaN(m=+this._x.call(null,i))||isNaN(_=+this._y.call(null,i))||isNaN(b=+this._z.call(null,i)))return this;var e,t=this._root,n,r,s,o=this._x0,a=this._y0,l=this._z0,u=this._x1,c=this._y1,A=this._z1,m,_,b,M,w,T,N,P,I,B,F;if(!t)return this;if(t.length)for(;;){if((N=m>=(M=(o+u)/2))?o=M:u=M,(P=_>=(w=(a+c)/2))?a=w:c=w,(I=b>=(T=(l+A)/2))?l=T:A=T,e=t,!(t=t[B=I<<2|P<<1|N]))return this;if(!t.length)break;(e[B+1&7]||e[B+2&7]||e[B+3&7]||e[B+4&7]||e[B+5&7]||e[B+6&7]||e[B+7&7])&&(n=e,F=B)}for(;t.data!==i;)if(r=t,!(t=t.next))return this;return(s=t.next)&&delete t.next,r?(s?r.next=s:delete r.next,this):e?(s?e[B]=s:delete e[B],(t=e[0]||e[1]||e[2]||e[3]||e[4]||e[5]||e[6]||e[7])&&t===(e[7]||e[6]||e[5]||e[4]||e[3]||e[2]||e[1]||e[0])&&!t.length&&(n?n[F]=t:this._root=t),this):(this._root=s,this)}function _H(i){for(var e=0,t=i.length;e<t;++e)this.remove(i[e]);return this}function xH(){return this._root}function bH(){var i=0;return this.visit(function(e){if(!e.length)do++i;while(e=e.next)}),i}function SH(i){var e=[],t,n=this._root,r,s,o,a,l,u,c;for(n&&e.push(new Yi(n,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));t=e.pop();)if(!i(n=t.node,s=t.x0,o=t.y0,a=t.z0,l=t.x1,u=t.y1,c=t.z1)&&n.length){var A=(s+l)/2,m=(o+u)/2,_=(a+c)/2;(r=n[7])&&e.push(new Yi(r,A,m,_,l,u,c)),(r=n[6])&&e.push(new Yi(r,s,m,_,A,u,c)),(r=n[5])&&e.push(new Yi(r,A,o,_,l,m,c)),(r=n[4])&&e.push(new Yi(r,s,o,_,A,m,c)),(r=n[3])&&e.push(new Yi(r,A,m,a,l,u,_)),(r=n[2])&&e.push(new Yi(r,s,m,a,A,u,_)),(r=n[1])&&e.push(new Yi(r,A,o,a,l,m,_)),(r=n[0])&&e.push(new Yi(r,s,o,a,A,m,_))}return this}function TH(i){var e=[],t=[],n;for(this._root&&e.push(new Yi(this._root,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1));n=e.pop();){var r=n.node;if(r.length){var s,o=n.x0,a=n.y0,l=n.z0,u=n.x1,c=n.y1,A=n.z1,m=(o+u)/2,_=(a+c)/2,b=(l+A)/2;(s=r[0])&&e.push(new Yi(s,o,a,l,m,_,b)),(s=r[1])&&e.push(new Yi(s,m,a,l,u,_,b)),(s=r[2])&&e.push(new Yi(s,o,_,l,m,c,b)),(s=r[3])&&e.push(new Yi(s,m,_,l,u,c,b)),(s=r[4])&&e.push(new Yi(s,o,a,b,m,_,A)),(s=r[5])&&e.push(new Yi(s,m,a,b,u,_,A)),(s=r[6])&&e.push(new Yi(s,o,_,b,m,c,A)),(s=r[7])&&e.push(new Yi(s,m,_,b,u,c,A))}t.push(n)}for(;n=t.pop();)i(n.node,n.x0,n.y0,n.z0,n.x1,n.y1,n.z1);return this}function wH(i){return i[0]}function MH(i){return arguments.length?(this._x=i,this):this._x}function EH(i){return i[1]}function RH(i){return arguments.length?(this._y=i,this):this._y}function CH(i){return i[2]}function PH(i){return arguments.length?(this._z=i,this):this._z}function vR(i,e,t,n){var r=new jv(e??wH,t??EH,n??CH,NaN,NaN,NaN,NaN,NaN,NaN);return i==null?r:r.addAll(i)}function jv(i,e,t,n,r,s,o,a,l){this._x=i,this._y=e,this._z=t,this._x0=n,this._y0=r,this._z0=s,this._x1=o,this._y1=a,this._z1=l,this._root=void 0}function PS(i){for(var e={data:i.data},t=e;i=i.next;)t=t.next={data:i.data};return e}var Vs=vR.prototype=jv.prototype;Vs.copy=function(){var i=new jv(this._x,this._y,this._z,this._x0,this._y0,this._z0,this._x1,this._y1,this._z1),e=this._root,t,n;if(!e)return i;if(!e.length)return i._root=PS(e),i;for(t=[{source:e,target:i._root=new Array(8)}];e=t.pop();)for(var r=0;r<8;++r)(n=e.source[r])&&(n.length?t.push({source:n,target:e.target[r]=new Array(8)}):e.target[r]=PS(n));return i};Vs.add=hH;Vs.addAll=fH;Vs.cover=dH;Vs.data=AH;Vs.extent=pH;Vs.find=mH;Vs.findAllWithinRadius=yH;Vs.remove=vH;Vs.removeAll=_H;Vs.root=xH;Vs.size=bH;Vs.visit=SH;Vs.visitAfter=TH;Vs.x=MH;Vs.y=RH;Vs.z=PH;function zf(i,e){return i==null||e==null?NaN:i<e?-1:i>e?1:i>=e?0:NaN}function NH(i,e){return i==null||e==null?NaN:e<i?-1:e>i?1:e>=i?0:NaN}function _R(i){let e,t,n;i.length!==2?(e=zf,t=(a,l)=>zf(i(a),l),n=(a,l)=>i(a)-l):(e=i===zf||i===NH?i:IH,t=i,n=i);function r(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const A=u+c>>>1;t(a[A],l)<0?u=A+1:c=A}while(u<c)}return u}function s(a,l,u=0,c=a.length){if(u<c){if(e(l,l)!==0)return c;do{const A=u+c>>>1;t(a[A],l)<=0?u=A+1:c=A}while(u<c)}return u}function o(a,l,u=0,c=a.length){const A=r(a,l,u,c-1);return A>u&&n(a[A-1],l)>-n(a[A],l)?A-1:A}return{left:r,center:o,right:s}}function IH(){return 0}function LH(i){return i===null?NaN:+i}const DH=_R(zf),xR=DH.right;_R(LH).center;function dd(i,e){let t,n;if(e===void 0)for(const r of i)r!=null&&(t===void 0?r>=r&&(t=n=r):(t>r&&(t=r),n<r&&(n=r)));else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(t===void 0?s>=s&&(t=n=s):(t>s&&(t=s),n<s&&(n=s)))}return[t,n]}class Yl{constructor(){this._partials=new Float64Array(32),this._n=0}add(e){const t=this._partials;let n=0;for(let r=0;r<this._n&&r<32;r++){const s=t[r],o=e+s,a=Math.abs(e)<Math.abs(s)?e-(o-s):s-(o-e);a&&(t[n++]=a),e=o}return t[n]=e,this._n=n+1,this}valueOf(){const e=this._partials;let t=this._n,n,r,s,o=0;if(t>0){for(o=e[--t];t>0&&(n=o,r=e[--t],o=n+r,s=r-(o-n),!s););t>0&&(s<0&&e[t-1]<0||s>0&&e[t-1]>0)&&(r=s*2,n=o+r,r==n-o&&(o=n))}return o}}const BH=Math.sqrt(50),FH=Math.sqrt(10),UH=Math.sqrt(2);function Ad(i,e,t){const n=(e-i)/Math.max(0,t),r=Math.floor(Math.log10(n)),s=n/Math.pow(10,r),o=s>=BH?10:s>=FH?5:s>=UH?2:1;let a,l,u;return r<0?(u=Math.pow(10,-r)/o,a=Math.round(i*u),l=Math.round(e*u),a/u<i&&++a,l/u>e&&--l,u=-u):(u=Math.pow(10,r)*o,a=Math.round(i/u),l=Math.round(e/u),a*u<i&&++a,l*u>e&&--l),l<a&&.5<=t&&t<2?Ad(i,e,t*2):[a,l,u]}function OH(i,e,t){if(e=+e,i=+i,t=+t,!(t>0))return[];if(i===e)return[i];const n=e<i,[r,s,o]=n?Ad(e,i,t):Ad(i,e,t);if(!(s>=r))return[];const a=s-r+1,l=new Array(a);if(n)if(o<0)for(let u=0;u<a;++u)l[u]=(s-u)/-o;else for(let u=0;u<a;++u)l[u]=(s-u)*o;else if(o<0)for(let u=0;u<a;++u)l[u]=(r+u)/-o;else for(let u=0;u<a;++u)l[u]=(r+u)*o;return l}function Rg(i,e,t){return e=+e,i=+i,t=+t,Ad(i,e,t)[2]}function kH(i,e,t){e=+e,i=+i,t=+t;const n=e<i,r=n?Rg(e,i,t):Rg(i,e,t);return(n?-1:1)*(r<0?1/-r:r)}function VH(i,e){let t;for(const n of i)n!=null&&(t<n||t===void 0&&n>=n)&&(t=n);return t}function zH(i,e){let t=0,n=0;if(e===void 0)for(let r of i)r!=null&&(r=+r)>=r&&(++t,n+=r);else{let r=-1;for(let s of i)(s=e(s,++r,i))!=null&&(s=+s)>=s&&(++t,n+=s)}if(t)return n/t}function*GH(i){for(const e of i)yield*e}function m8(i){return Array.from(GH(i))}function u4(i,e,t){i=+i,e=+e,t=(r=arguments.length)<2?(e=i,i=0,1):r<3?1:+t;for(var n=-1,r=Math.max(0,Math.ceil((e-i)/t))|0,s=new Array(r);++n<r;)s[n]=i+n*t;return s}function qH(i,e){let t=0;for(let n of i)(n=+n)&&(t+=n);return t}function bR(i,e){switch(arguments.length){case 0:break;case 1:this.range(i);break;default:this.range(e).domain(i);break}return this}function $v(i,e,t){i.prototype=e.prototype=t,t.constructor=i}function SR(i,e){var t=Object.create(i.prototype);for(var n in e)t[n]=e[n];return t}function r6(){}var g8=.7,pd=1/g8,v4="\\s*([+-]?\\d+)\\s*",y8="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",sl="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",HH=/^#([0-9a-f]{3,8})$/,WH=new RegExp(`^rgb\\(${v4},${v4},${v4}\\)$`),jH=new RegExp(`^rgb\\(${sl},${sl},${sl}\\)$`),$H=new RegExp(`^rgba\\(${v4},${v4},${v4},${y8}\\)$`),XH=new RegExp(`^rgba\\(${sl},${sl},${sl},${y8}\\)$`),QH=new RegExp(`^hsl\\(${y8},${sl},${sl}\\)$`),YH=new RegExp(`^hsla\\(${y8},${sl},${sl},${y8}\\)$`),NS={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};$v(r6,vc,{copy(i){return Object.assign(new this.constructor,this,i)},displayable(){return this.rgb().displayable()},hex:IS,formatHex:IS,formatHex8:KH,formatHsl:ZH,formatRgb:LS,toString:LS});function IS(){return this.rgb().formatHex()}function KH(){return this.rgb().formatHex8()}function ZH(){return TR(this).formatHsl()}function LS(){return this.rgb().formatRgb()}function vc(i){var e,t;return i=(i+"").trim().toLowerCase(),(e=HH.exec(i))?(t=e[1].length,e=parseInt(e[1],16),t===6?DS(e):t===3?new ko(e>>8&15|e>>4&240,e>>4&15|e&240,(e&15)<<4|e&15,1):t===8?$7(e>>24&255,e>>16&255,e>>8&255,(e&255)/255):t===4?$7(e>>12&15|e>>8&240,e>>8&15|e>>4&240,e>>4&15|e&240,((e&15)<<4|e&15)/255):null):(e=WH.exec(i))?new ko(e[1],e[2],e[3],1):(e=jH.exec(i))?new ko(e[1]*255/100,e[2]*255/100,e[3]*255/100,1):(e=$H.exec(i))?$7(e[1],e[2],e[3],e[4]):(e=XH.exec(i))?$7(e[1]*255/100,e[2]*255/100,e[3]*255/100,e[4]):(e=QH.exec(i))?US(e[1],e[2]/100,e[3]/100,1):(e=YH.exec(i))?US(e[1],e[2]/100,e[3]/100,e[4]):NS.hasOwnProperty(i)?DS(NS[i]):i==="transparent"?new ko(NaN,NaN,NaN,0):null}function DS(i){return new ko(i>>16&255,i>>8&255,i&255,1)}function $7(i,e,t,n){return n<=0&&(i=e=t=NaN),new ko(i,e,t,n)}function JH(i){return i instanceof r6||(i=vc(i)),i?(i=i.rgb(),new ko(i.r,i.g,i.b,i.opacity)):new ko}function Cg(i,e,t,n){return arguments.length===1?JH(i):new ko(i,e,t,n??1)}function ko(i,e,t,n){this.r=+i,this.g=+e,this.b=+t,this.opacity=+n}$v(ko,Cg,SR(r6,{brighter(i){return i=i==null?pd:Math.pow(pd,i),new ko(this.r*i,this.g*i,this.b*i,this.opacity)},darker(i){return i=i==null?g8:Math.pow(g8,i),new ko(this.r*i,this.g*i,this.b*i,this.opacity)},rgb(){return this},clamp(){return new ko(W2(this.r),W2(this.g),W2(this.b),md(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:BS,formatHex:BS,formatHex8:eW,formatRgb:FS,toString:FS}));function BS(){return`#${F2(this.r)}${F2(this.g)}${F2(this.b)}`}function eW(){return`#${F2(this.r)}${F2(this.g)}${F2(this.b)}${F2((isNaN(this.opacity)?1:this.opacity)*255)}`}function FS(){const i=md(this.opacity);return`${i===1?"rgb(":"rgba("}${W2(this.r)}, ${W2(this.g)}, ${W2(this.b)}${i===1?")":`, ${i})`}`}function md(i){return isNaN(i)?1:Math.max(0,Math.min(1,i))}function W2(i){return Math.max(0,Math.min(255,Math.round(i)||0))}function F2(i){return i=W2(i),(i<16?"0":"")+i.toString(16)}function US(i,e,t,n){return n<=0?i=e=t=NaN:t<=0||t>=1?i=e=NaN:e<=0&&(i=NaN),new E0(i,e,t,n)}function TR(i){if(i instanceof E0)return new E0(i.h,i.s,i.l,i.opacity);if(i instanceof r6||(i=vc(i)),!i)return new E0;if(i instanceof E0)return i;i=i.rgb();var e=i.r/255,t=i.g/255,n=i.b/255,r=Math.min(e,t,n),s=Math.max(e,t,n),o=NaN,a=s-r,l=(s+r)/2;return a?(e===s?o=(t-n)/a+(t<n)*6:t===s?o=(n-e)/a+2:o=(e-t)/a+4,a/=l<.5?s+r:2-s-r,o*=60):a=l>0&&l<1?0:o,new E0(o,a,l,i.opacity)}function tW(i,e,t,n){return arguments.length===1?TR(i):new E0(i,e,t,n??1)}function E0(i,e,t,n){this.h=+i,this.s=+e,this.l=+t,this.opacity=+n}$v(E0,tW,SR(r6,{brighter(i){return i=i==null?pd:Math.pow(pd,i),new E0(this.h,this.s,this.l*i,this.opacity)},darker(i){return i=i==null?g8:Math.pow(g8,i),new E0(this.h,this.s,this.l*i,this.opacity)},rgb(){var i=this.h%360+(this.h<0)*360,e=isNaN(i)||isNaN(this.s)?0:this.s,t=this.l,n=t+(t<.5?t:1-t)*e,r=2*t-n;return new ko(tm(i>=240?i-240:i+120,r,n),tm(i,r,n),tm(i<120?i+240:i-120,r,n),this.opacity)},clamp(){return new E0(OS(this.h),X7(this.s),X7(this.l),md(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const i=md(this.opacity);return`${i===1?"hsl(":"hsla("}${OS(this.h)}, ${X7(this.s)*100}%, ${X7(this.l)*100}%${i===1?")":`, ${i})`}`}}));function OS(i){return i=(i||0)%360,i<0?i+360:i}function X7(i){return Math.max(0,Math.min(1,i||0))}function tm(i,e,t){return(i<60?e+(t-e)*i/60:i<180?t:i<240?e+(t-e)*(240-i)/60:e)*255}const Xv=i=>()=>i;function nW(i,e){return function(t){return i+t*e}}function iW(i,e,t){return i=Math.pow(i,t),e=Math.pow(e,t)-i,t=1/t,function(n){return Math.pow(i+n*e,t)}}function rW(i){return(i=+i)==1?wR:function(e,t){return t-e?iW(e,t,i):Xv(isNaN(e)?t:e)}}function wR(i,e){var t=e-i;return t?nW(i,t):Xv(isNaN(i)?e:i)}const kS=function i(e){var t=rW(e);function n(r,s){var o=t((r=Cg(r)).r,(s=Cg(s)).r),a=t(r.g,s.g),l=t(r.b,s.b),u=wR(r.opacity,s.opacity);return function(c){return r.r=o(c),r.g=a(c),r.b=l(c),r.opacity=u(c),r+""}}return n.gamma=i,n}(1);function MR(i,e){e||(e=[]);var t=i?Math.min(e.length,i.length):0,n=e.slice(),r;return function(s){for(r=0;r<t;++r)n[r]=i[r]*(1-s)+e[r]*s;return n}}function ER(i){return ArrayBuffer.isView(i)&&!(i instanceof DataView)}function sW(i,e){return(ER(e)?MR:RR)(i,e)}function RR(i,e){var t=e?e.length:0,n=i?Math.min(t,i.length):0,r=new Array(n),s=new Array(t),o;for(o=0;o<n;++o)r[o]=Qv(i[o],e[o]);for(;o<t;++o)s[o]=e[o];return function(a){for(o=0;o<n;++o)s[o]=r[o](a);return s}}function oW(i,e){var t=new Date;return i=+i,e=+e,function(n){return t.setTime(i*(1-n)+e*n),t}}function v8(i,e){return i=+i,e=+e,function(t){return i*(1-t)+e*t}}function aW(i,e){var t={},n={},r;(i===null||typeof i!="object")&&(i={}),(e===null||typeof e!="object")&&(e={});for(r in e)r in i?t[r]=Qv(i[r],e[r]):n[r]=e[r];return function(s){for(r in t)n[r]=t[r](s);return n}}var Pg=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,nm=new RegExp(Pg.source,"g");function lW(i){return function(){return i}}function uW(i){return function(e){return i(e)+""}}function cW(i,e){var t=Pg.lastIndex=nm.lastIndex=0,n,r,s,o=-1,a=[],l=[];for(i=i+"",e=e+"";(n=Pg.exec(i))&&(r=nm.exec(e));)(s=r.index)>t&&(s=e.slice(t,s),a[o]?a[o]+=s:a[++o]=s),(n=n[0])===(r=r[0])?a[o]?a[o]+=r:a[++o]=r:(a[++o]=null,l.push({i:o,x:v8(n,r)})),t=nm.lastIndex;return t<e.length&&(s=e.slice(t),a[o]?a[o]+=s:a[++o]=s),a.length<2?l[0]?uW(l[0].x):lW(e):(e=l.length,function(u){for(var c=0,A;c<e;++c)a[(A=l[c]).i]=A.x(u);return a.join("")})}function Qv(i,e){var t=typeof e,n;return e==null||t==="boolean"?Xv(e):(t==="number"?v8:t==="string"?(n=vc(e))?(e=n,kS):cW:e instanceof vc?kS:e instanceof Date?oW:ER(e)?MR:Array.isArray(e)?RR:typeof e.valueOf!="function"&&typeof e.toString!="function"||isNaN(e)?aW:v8)(i,e)}function hW(i,e){return i=+i,e=+e,function(t){return Math.round(i*(1-t)+e*t)}}function fW(i){return function(){return i}}function dW(i){return+i}var VS=[0,1];function c4(i){return i}function Ng(i,e){return(e-=i=+i)?function(t){return(t-i)/e}:fW(isNaN(e)?NaN:.5)}function AW(i,e){var t;return i>e&&(t=i,i=e,e=t),function(n){return Math.max(i,Math.min(e,n))}}function pW(i,e,t){var n=i[0],r=i[1],s=e[0],o=e[1];return r<n?(n=Ng(r,n),s=t(o,s)):(n=Ng(n,r),s=t(s,o)),function(a){return s(n(a))}}function mW(i,e,t){var n=Math.min(i.length,e.length)-1,r=new Array(n),s=new Array(n),o=-1;for(i[n]<i[0]&&(i=i.slice().reverse(),e=e.slice().reverse());++o<n;)r[o]=Ng(i[o],i[o+1]),s[o]=t(e[o],e[o+1]);return function(a){var l=xR(i,a,1,n)-1;return s[l](r[l](a))}}function gW(i,e){return e.domain(i.domain()).range(i.range()).interpolate(i.interpolate()).clamp(i.clamp()).unknown(i.unknown())}function yW(){var i=VS,e=VS,t=Qv,n,r,s,o=c4,a,l,u;function c(){var m=Math.min(i.length,e.length);return o!==c4&&(o=AW(i[0],i[m-1])),a=m>2?mW:pW,l=u=null,A}function A(m){return m==null||isNaN(m=+m)?s:(l||(l=a(i.map(n),e,t)))(n(o(m)))}return A.invert=function(m){return o(r((u||(u=a(e,i.map(n),v8)))(m)))},A.domain=function(m){return arguments.length?(i=Array.from(m,dW),c()):i.slice()},A.range=function(m){return arguments.length?(e=Array.from(m),c()):e.slice()},A.rangeRound=function(m){return e=Array.from(m),t=hW,c()},A.clamp=function(m){return arguments.length?(o=m?!0:c4,c()):o!==c4},A.interpolate=function(m){return arguments.length?(t=m,c()):t},A.unknown=function(m){return arguments.length?(s=m,A):s},function(m,_){return n=m,r=_,c()}}function vW(){return yW()(c4,c4)}function _W(i){return Math.abs(i=Math.round(i))>=1e21?i.toLocaleString("en").replace(/,/g,""):i.toString(10)}function gd(i,e){if((t=(i=e?i.toExponential(e-1):i.toExponential()).indexOf("e"))<0)return null;var t,n=i.slice(0,t);return[n.length>1?n[0]+n.slice(2):n,+i.slice(t+1)]}function j4(i){return i=gd(Math.abs(i)),i?i[1]:NaN}function xW(i,e){return function(t,n){for(var r=t.length,s=[],o=0,a=i[0],l=0;r>0&&a>0&&(l+a+1>n&&(a=Math.max(1,n-l)),s.push(t.substring(r-=a,r+a)),!((l+=a+1)>n));)a=i[o=(o+1)%i.length];return s.reverse().join(e)}}function bW(i){return function(e){return e.replace(/[0-9]/g,function(t){return i[+t]})}}var SW=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function yd(i){if(!(e=SW.exec(i)))throw new Error("invalid format: "+i);var e;return new Yv({fill:e[1],align:e[2],sign:e[3],symbol:e[4],zero:e[5],width:e[6],comma:e[7],precision:e[8]&&e[8].slice(1),trim:e[9],type:e[10]})}yd.prototype=Yv.prototype;function Yv(i){this.fill=i.fill===void 0?" ":i.fill+"",this.align=i.align===void 0?">":i.align+"",this.sign=i.sign===void 0?"-":i.sign+"",this.symbol=i.symbol===void 0?"":i.symbol+"",this.zero=!!i.zero,this.width=i.width===void 0?void 0:+i.width,this.comma=!!i.comma,this.precision=i.precision===void 0?void 0:+i.precision,this.trim=!!i.trim,this.type=i.type===void 0?"":i.type+""}Yv.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function TW(i){e:for(var e=i.length,t=1,n=-1,r;t<e;++t)switch(i[t]){case".":n=r=t;break;case"0":n===0&&(n=t),r=t;break;default:if(!+i[t])break e;n>0&&(n=0);break}return n>0?i.slice(0,n)+i.slice(r+1):i}var CR;function wW(i,e){var t=gd(i,e);if(!t)return i+"";var n=t[0],r=t[1],s=r-(CR=Math.max(-8,Math.min(8,Math.floor(r/3)))*3)+1,o=n.length;return s===o?n:s>o?n+new Array(s-o+1).join("0"):s>0?n.slice(0,s)+"."+n.slice(s):"0."+new Array(1-s).join("0")+gd(i,Math.max(0,e+s-1))[0]}function zS(i,e){var t=gd(i,e);if(!t)return i+"";var n=t[0],r=t[1];return r<0?"0."+new Array(-r).join("0")+n:n.length>r+1?n.slice(0,r+1)+"."+n.slice(r+1):n+new Array(r-n.length+2).join("0")}const GS={"%":(i,e)=>(i*100).toFixed(e),b:i=>Math.round(i).toString(2),c:i=>i+"",d:_W,e:(i,e)=>i.toExponential(e),f:(i,e)=>i.toFixed(e),g:(i,e)=>i.toPrecision(e),o:i=>Math.round(i).toString(8),p:(i,e)=>zS(i*100,e),r:zS,s:wW,X:i=>Math.round(i).toString(16).toUpperCase(),x:i=>Math.round(i).toString(16)};function qS(i){return i}var HS=Array.prototype.map,WS=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function MW(i){var e=i.grouping===void 0||i.thousands===void 0?qS:xW(HS.call(i.grouping,Number),i.thousands+""),t=i.currency===void 0?"":i.currency[0]+"",n=i.currency===void 0?"":i.currency[1]+"",r=i.decimal===void 0?".":i.decimal+"",s=i.numerals===void 0?qS:bW(HS.call(i.numerals,String)),o=i.percent===void 0?"%":i.percent+"",a=i.minus===void 0?"":i.minus+"",l=i.nan===void 0?"NaN":i.nan+"";function u(A){A=yd(A);var m=A.fill,_=A.align,b=A.sign,M=A.symbol,w=A.zero,T=A.width,N=A.comma,P=A.precision,I=A.trim,B=A.type;B==="n"?(N=!0,B="g"):GS[B]||(P===void 0&&(P=12),I=!0,B="g"),(w||m==="0"&&_==="=")&&(w=!0,m="0",_="=");var F=M==="$"?t:M==="#"&&/[boxX]/.test(B)?"0"+B.toLowerCase():"",O=M==="$"?n:/[%p]/.test(B)?o:"",V=GS[B],U=/[defgprs%]/.test(B);P=P===void 0?6:/[gprs]/.test(B)?Math.max(1,Math.min(21,P)):Math.max(0,Math.min(20,P));function z(H){var Q=F,Y=O,ne,ee,se;if(B==="c")Y=V(H)+Y,H="";else{H=+H;var pe=H<0||1/H<0;if(H=isNaN(H)?l:V(Math.abs(H),P),I&&(H=TW(H)),pe&&+H==0&&b!=="+"&&(pe=!1),Q=(pe?b==="("?b:a:b==="-"||b==="("?"":b)+Q,Y=(B==="s"?WS[8+CR/3]:"")+Y+(pe&&b==="("?")":""),U){for(ne=-1,ee=H.length;++ne<ee;)if(se=H.charCodeAt(ne),48>se||se>57){Y=(se===46?r+H.slice(ne+1):H.slice(ne))+Y,H=H.slice(0,ne);break}}}N&&!w&&(H=e(H,1/0));var re=Q.length+H.length+Y.length,de=re<T?new Array(T-re+1).join(m):"";switch(N&&w&&(H=e(de+H,de.length?T-Y.length:1/0),de=""),_){case"<":H=Q+H+Y+de;break;case"=":H=Q+de+H+Y;break;case"^":H=de.slice(0,re=de.length>>1)+Q+H+Y+de.slice(re);break;default:H=de+Q+H+Y;break}return s(H)}return z.toString=function(){return A+""},z}function c(A,m){var _=u((A=yd(A),A.type="f",A)),b=Math.max(-8,Math.min(8,Math.floor(j4(m)/3)))*3,M=Math.pow(10,-b),w=WS[8+b/3];return function(T){return _(M*T)+w}}return{format:u,formatPrefix:c}}var Q7,PR,NR;EW({thousands:",",grouping:[3],currency:["$",""]});function EW(i){return Q7=MW(i),PR=Q7.format,NR=Q7.formatPrefix,Q7}function RW(i){return Math.max(0,-j4(Math.abs(i)))}function CW(i,e){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(j4(e)/3)))*3-j4(Math.abs(i)))}function PW(i,e){return i=Math.abs(i),e=Math.abs(e)-i,Math.max(0,j4(e)-j4(i))+1}function NW(i,e,t,n){var r=kH(i,e,t),s;switch(n=yd(n??",f"),n.type){case"s":{var o=Math.max(Math.abs(i),Math.abs(e));return n.precision==null&&!isNaN(s=CW(r,o))&&(n.precision=s),NR(n,o)}case"":case"e":case"g":case"p":case"r":{n.precision==null&&!isNaN(s=PW(r,Math.max(Math.abs(i),Math.abs(e))))&&(n.precision=s-(n.type==="e"));break}case"f":case"%":{n.precision==null&&!isNaN(s=RW(r))&&(n.precision=s-(n.type==="%")*2);break}}return PR(n)}function IR(i){var e=i.domain;return i.ticks=function(t){var n=e();return OH(n[0],n[n.length-1],t??10)},i.tickFormat=function(t,n){var r=e();return NW(r[0],r[r.length-1],t??10,n)},i.nice=function(t){t==null&&(t=10);var n=e(),r=0,s=n.length-1,o=n[r],a=n[s],l,u,c=10;for(a<o&&(u=o,o=a,a=u,u=r,r=s,s=u);c-- >0;){if(u=Rg(o,a,t),u===l)return n[r]=o,n[s]=a,e(n);if(u>0)o=Math.floor(o/u)*u,a=Math.ceil(a/u)*u;else if(u<0)o=Math.ceil(o*u)/u,a=Math.floor(a*u)/u;else break;l=u}return i},i}function o1(){var i=vW();return i.copy=function(){return gW(i,o1())},bR.apply(i,arguments),IR(i)}function LR(){var i=0,e=1,t=1,n=[.5],r=[0,1],s;function o(l){return l!=null&&l<=l?r[xR(n,l,0,t)]:s}function a(){var l=-1;for(n=new Array(t);++l<t;)n[l]=((l+1)*e-(l-t)*i)/(t+1);return o}return o.domain=function(l){return arguments.length?([i,e]=l,i=+i,e=+e,a()):[i,e]},o.range=function(l){return arguments.length?(t=(r=Array.from(l)).length-1,a()):r.slice()},o.invertExtent=function(l){var u=r.indexOf(l);return u<0?[NaN,NaN]:u<1?[i,n[0]]:u>=t?[n[t-1],e]:[n[u-1],n[u]]},o.unknown=function(l){return arguments.length&&(s=l),o},o.thresholds=function(){return n.slice()},o.copy=function(){return LR().domain([i,e]).range(r).unknown(s)},bR.apply(IR(o),arguments)}var hi=1e-6,vd=1e-12,Ti=Math.PI,Vo=Ti/2,_d=Ti/4,ba=Ti*2,wr=180/Ti,jn=Ti/180,ji=Math.abs,Kv=Math.atan,Ya=Math.atan2,Yn=Math.cos,Y7=Math.ceil,IW=Math.exp,Ig=Math.hypot,LW=Math.log,Un=Math.sin,DW=Math.sign||function(i){return i>0?1:i<0?-1:0},a1=Math.sqrt,BW=Math.tan;function FW(i){return i>1?0:i<-1?Ti:Math.acos(i)}function l1(i){return i>1?Vo:i<-1?-Vo:Math.asin(i)}function jS(i){return(i=Un(i/2))*i}function Ks(){}function xd(i,e){i&&XS.hasOwnProperty(i.type)&&XS[i.type](i,e)}var $S={Feature:function(i,e){xd(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)xd(t[n].geometry,e)}},XS={Sphere:function(i,e){e.sphere()},Point:function(i,e){i=i.coordinates,e.point(i[0],i[1],i[2])},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)i=t[n],e.point(i[0],i[1],i[2])},LineString:function(i,e){Lg(i.coordinates,e,0)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)Lg(t[n],e,0)},Polygon:function(i,e){QS(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)QS(t[n],e)},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)xd(t[n],e)}};function Lg(i,e,t){var n=-1,r=i.length-t,s;for(e.lineStart();++n<r;)s=i[n],e.point(s[0],s[1],s[2]);e.lineEnd()}function QS(i,e){var t=-1,n=i.length;for(e.polygonStart();++t<n;)Lg(i[t],e,1);e.polygonEnd()}function K9(i,e){i&&$S.hasOwnProperty(i.type)?$S[i.type](i,e):xd(i,e)}var bd=new Yl,YS=new Yl,DR,BR,Dg,Bg,Fg,u1={point:Ks,lineStart:Ks,lineEnd:Ks,polygonStart:function(){bd=new Yl,u1.lineStart=UW,u1.lineEnd=OW},polygonEnd:function(){var i=+bd;YS.add(i<0?ba+i:i),this.lineStart=this.lineEnd=this.point=Ks},sphere:function(){YS.add(ba)}};function UW(){u1.point=kW}function OW(){FR(DR,BR)}function kW(i,e){u1.point=FR,DR=i,BR=e,i*=jn,e*=jn,Dg=i,Bg=Yn(e=e/2+_d),Fg=Un(e)}function FR(i,e){i*=jn,e*=jn,e=e/2+_d;var t=i-Dg,n=t>=0?1:-1,r=n*t,s=Yn(e),o=Un(e),a=Fg*o,l=Bg*s+a*Yn(r),u=a*n*Un(r);bd.add(Ya(u,l)),Dg=i,Bg=s,Fg=o}function Sd(i){return[Ya(i[1],i[0]),l1(i[2])]}function _c(i){var e=i[0],t=i[1],n=Yn(t);return[n*Yn(e),n*Un(e),Un(t)]}function K7(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function $4(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function im(i,e){i[0]+=e[0],i[1]+=e[1],i[2]+=e[2]}function Z7(i,e){return[i[0]*e,i[1]*e,i[2]*e]}function Td(i){var e=a1(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);i[0]/=e,i[1]/=e,i[2]/=e}var gr,Uo,Sr,ga,M2,UR,OR,_4,Yh,K1,c1,Vl={point:Ug,lineStart:KS,lineEnd:ZS,polygonStart:function(){Vl.point=VR,Vl.lineStart=VW,Vl.lineEnd=zW,Yh=new Yl,u1.polygonStart()},polygonEnd:function(){u1.polygonEnd(),Vl.point=Ug,Vl.lineStart=KS,Vl.lineEnd=ZS,bd<0?(gr=-(Sr=180),Uo=-(ga=90)):Yh>hi?ga=90:Yh<-hi&&(Uo=-90),c1[0]=gr,c1[1]=Sr},sphere:function(){gr=-(Sr=180),Uo=-(ga=90)}};function Ug(i,e){K1.push(c1=[gr=i,Sr=i]),e<Uo&&(Uo=e),e>ga&&(ga=e)}function kR(i,e){var t=_c([i*jn,e*jn]);if(_4){var n=$4(_4,t),r=[n[1],-n[0],0],s=$4(r,n);Td(s),s=Sd(s);var o=i-M2,a=o>0?1:-1,l=s[0]*wr*a,u,c=ji(o)>180;c^(a*M2<l&&l<a*i)?(u=s[1]*wr,u>ga&&(ga=u)):(l=(l+360)%360-180,c^(a*M2<l&&l<a*i)?(u=-s[1]*wr,u<Uo&&(Uo=u)):(e<Uo&&(Uo=e),e>ga&&(ga=e))),c?i<M2?Aa(gr,i)>Aa(gr,Sr)&&(Sr=i):Aa(i,Sr)>Aa(gr,Sr)&&(gr=i):Sr>=gr?(i<gr&&(gr=i),i>Sr&&(Sr=i)):i>M2?Aa(gr,i)>Aa(gr,Sr)&&(Sr=i):Aa(i,Sr)>Aa(gr,Sr)&&(gr=i)}else K1.push(c1=[gr=i,Sr=i]);e<Uo&&(Uo=e),e>ga&&(ga=e),_4=t,M2=i}function KS(){Vl.point=kR}function ZS(){c1[0]=gr,c1[1]=Sr,Vl.point=Ug,_4=null}function VR(i,e){if(_4){var t=i-M2;Yh.add(ji(t)>180?t+(t>0?360:-360):t)}else UR=i,OR=e;u1.point(i,e),kR(i,e)}function VW(){u1.lineStart()}function zW(){VR(UR,OR),u1.lineEnd(),ji(Yh)>hi&&(gr=-(Sr=180)),c1[0]=gr,c1[1]=Sr,_4=null}function Aa(i,e){return(e-=i)<0?e+360:e}function GW(i,e){return i[0]-e[0]}function JS(i,e){return i[0]<=i[1]?i[0]<=e&&e<=i[1]:e<i[0]||i[1]<e}function zR(i){var e,t,n,r,s,o,a;if(ga=Sr=-(gr=Uo=1/0),K1=[],K9(i,Vl),t=K1.length){for(K1.sort(GW),e=1,n=K1[0],s=[n];e<t;++e)r=K1[e],JS(n,r[0])||JS(n,r[1])?(Aa(n[0],r[1])>Aa(n[0],n[1])&&(n[1]=r[1]),Aa(r[0],n[1])>Aa(n[0],n[1])&&(n[0]=r[0])):s.push(n=r);for(o=-1/0,t=s.length-1,e=0,n=s[t];e<=t;n=r,++e)r=s[e],(a=Aa(n[1],r[0]))>o&&(o=a,gr=r[0],Sr=n[1])}return K1=c1=null,gr===1/0||Uo===1/0?[[NaN,NaN],[NaN,NaN]]:[[gr,Uo],[Sr,ga]]}var Fh,wd,Md,Ed,Rd,Cd,Pd,Nd,Og,kg,Vg,GR,qR,mo,go,yo,P0={sphere:Ks,point:Zv,lineStart:eT,lineEnd:tT,polygonStart:function(){P0.lineStart=WW,P0.lineEnd=jW},polygonEnd:function(){P0.lineStart=eT,P0.lineEnd=tT}};function Zv(i,e){i*=jn,e*=jn;var t=Yn(e);s6(t*Yn(i),t*Un(i),Un(e))}function s6(i,e,t){++Fh,Md+=(i-Md)/Fh,Ed+=(e-Ed)/Fh,Rd+=(t-Rd)/Fh}function eT(){P0.point=qW}function qW(i,e){i*=jn,e*=jn;var t=Yn(e);mo=t*Yn(i),go=t*Un(i),yo=Un(e),P0.point=HW,s6(mo,go,yo)}function HW(i,e){i*=jn,e*=jn;var t=Yn(e),n=t*Yn(i),r=t*Un(i),s=Un(e),o=Ya(a1((o=go*s-yo*r)*o+(o=yo*n-mo*s)*o+(o=mo*r-go*n)*o),mo*n+go*r+yo*s);wd+=o,Cd+=o*(mo+(mo=n)),Pd+=o*(go+(go=r)),Nd+=o*(yo+(yo=s)),s6(mo,go,yo)}function tT(){P0.point=Zv}function WW(){P0.point=$W}function jW(){HR(GR,qR),P0.point=Zv}function $W(i,e){GR=i,qR=e,i*=jn,e*=jn,P0.point=HR;var t=Yn(e);mo=t*Yn(i),go=t*Un(i),yo=Un(e),s6(mo,go,yo)}function HR(i,e){i*=jn,e*=jn;var t=Yn(e),n=t*Yn(i),r=t*Un(i),s=Un(e),o=go*s-yo*r,a=yo*n-mo*s,l=mo*r-go*n,u=Ig(o,a,l),c=l1(u),A=u&&-c/u;Og.add(A*o),kg.add(A*a),Vg.add(A*l),wd+=c,Cd+=c*(mo+(mo=n)),Pd+=c*(go+(go=r)),Nd+=c*(yo+(yo=s)),s6(mo,go,yo)}function nT(i){Fh=wd=Md=Ed=Rd=Cd=Pd=Nd=0,Og=new Yl,kg=new Yl,Vg=new Yl,K9(i,P0);var e=+Og,t=+kg,n=+Vg,r=Ig(e,t,n);return r<vd&&(e=Cd,t=Pd,n=Nd,wd<hi&&(e=Md,t=Ed,n=Rd),r=Ig(e,t,n),r<vd)?[NaN,NaN]:[Ya(t,e)*wr,l1(n/r)*wr]}function zg(i,e){function t(n,r){return n=i(n,r),e(n[0],n[1])}return i.invert&&e.invert&&(t.invert=function(n,r){return n=e.invert(n,r),n&&i.invert(n[0],n[1])}),t}function Gg(i,e){return ji(i)>Ti&&(i-=Math.round(i/ba)*ba),[i,e]}Gg.invert=Gg;function WR(i,e,t){return(i%=ba)?e||t?zg(rT(i),sT(e,t)):rT(i):e||t?sT(e,t):Gg}function iT(i){return function(e,t){return e+=i,ji(e)>Ti&&(e-=Math.round(e/ba)*ba),[e,t]}}function rT(i){var e=iT(i);return e.invert=iT(-i),e}function sT(i,e){var t=Yn(i),n=Un(i),r=Yn(e),s=Un(e);function o(a,l){var u=Yn(l),c=Yn(a)*u,A=Un(a)*u,m=Un(l),_=m*t+c*n;return[Ya(A*r-_*s,c*t-m*n),l1(_*r+A*s)]}return o.invert=function(a,l){var u=Yn(l),c=Yn(a)*u,A=Un(a)*u,m=Un(l),_=m*r-A*s;return[Ya(A*r+m*s,c*t+_*n),l1(_*t-c*n)]},o}function XW(i){i=WR(i[0]*jn,i[1]*jn,i.length>2?i[2]*jn:0);function e(t){return t=i(t[0]*jn,t[1]*jn),t[0]*=wr,t[1]*=wr,t}return e.invert=function(t){return t=i.invert(t[0]*jn,t[1]*jn),t[0]*=wr,t[1]*=wr,t},e}function QW(i,e,t,n,r,s){if(t){var o=Yn(e),a=Un(e),l=n*t;r==null?(r=e+n*ba,s=e-l/2):(r=oT(o,r),s=oT(o,s),(n>0?r<s:r>s)&&(r+=n*ba));for(var u,c=r;n>0?c>s:c<s;c-=l)u=Sd([o,-a*Yn(c),-a*Un(c)]),i.point(u[0],u[1])}}function oT(i,e){e=_c(e),e[0]-=i,Td(e);var t=FW(-e[1]);return((-e[2]<0?-t:t)+ba-hi)%ba}function jR(){var i=[],e;return{point:function(t,n,r){e.push([t,n,r])},lineStart:function(){i.push(e=[])},lineEnd:Ks,rejoin:function(){i.length>1&&i.push(i.pop().concat(i.shift()))},result:function(){var t=i;return i=[],e=null,t}}}function Gf(i,e){return ji(i[0]-e[0])<hi&&ji(i[1]-e[1])<hi}function J7(i,e,t,n){this.x=i,this.z=e,this.o=t,this.e=n,this.v=!1,this.n=this.p=null}function $R(i,e,t,n,r){var s=[],o=[],a,l;if(i.forEach(function(b){if(!((M=b.length-1)<=0)){var M,w=b[0],T=b[M],N;if(Gf(w,T)){if(!w[2]&&!T[2]){for(r.lineStart(),a=0;a<M;++a)r.point((w=b[a])[0],w[1]);r.lineEnd();return}T[0]+=2*hi}s.push(N=new J7(w,b,null,!0)),o.push(N.o=new J7(w,null,N,!1)),s.push(N=new J7(T,b,null,!1)),o.push(N.o=new J7(T,null,N,!0))}}),!!s.length){for(o.sort(e),aT(s),aT(o),a=0,l=o.length;a<l;++a)o[a].e=t=!t;for(var u=s[0],c,A;;){for(var m=u,_=!0;m.v;)if((m=m.n)===u)return;c=m.z,r.lineStart();do{if(m.v=m.o.v=!0,m.e){if(_)for(a=0,l=c.length;a<l;++a)r.point((A=c[a])[0],A[1]);else n(m.x,m.n.x,1,r);m=m.n}else{if(_)for(c=m.p.z,a=c.length-1;a>=0;--a)r.point((A=c[a])[0],A[1]);else n(m.x,m.p.x,-1,r);m=m.p}m=m.o,c=m.z,_=!_}while(!m.v);r.lineEnd()}}}function aT(i){if(e=i.length){for(var e,t=0,n=i[0],r;++t<e;)n.n=r=i[t],r.p=n,n=r;n.n=r=i[0],r.p=n}}function rm(i){return ji(i[0])<=Ti?i[0]:DW(i[0])*((ji(i[0])+Ti)%ba-Ti)}function XR(i,e){var t=rm(e),n=e[1],r=Un(n),s=[Un(t),-Yn(t),0],o=0,a=0,l=new Yl;r===1?n=Vo+hi:r===-1&&(n=-Vo-hi);for(var u=0,c=i.length;u<c;++u)if(m=(A=i[u]).length)for(var A,m,_=A[m-1],b=rm(_),M=_[1]/2+_d,w=Un(M),T=Yn(M),N=0;N<m;++N,b=I,w=F,T=O,_=P){var P=A[N],I=rm(P),B=P[1]/2+_d,F=Un(B),O=Yn(B),V=I-b,U=V>=0?1:-1,z=U*V,H=z>Ti,Q=w*F;if(l.add(Ya(Q*U*Un(z),T*O+Q*Yn(z))),o+=H?V+U*ba:V,H^b>=t^I>=t){var Y=$4(_c(_),_c(P));Td(Y);var ne=$4(s,Y);Td(ne);var ee=(H^V>=0?-1:1)*l1(ne[2]);(n>ee||n===ee&&(Y[0]||Y[1]))&&(a+=H^V>=0?1:-1)}}return(o<-hi||o<hi&&l<-vd)^a&1}function QR(i,e,t,n){return function(r){var s=e(r),o=jR(),a=e(o),l=!1,u,c,A,m={point:_,lineStart:M,lineEnd:w,polygonStart:function(){m.point=T,m.lineStart=N,m.lineEnd=P,c=[],u=[]},polygonEnd:function(){m.point=_,m.lineStart=M,m.lineEnd=w,c=m8(c);var I=XR(u,n);c.length?(l||(r.polygonStart(),l=!0),$R(c,KW,I,t,r)):I&&(l||(r.polygonStart(),l=!0),r.lineStart(),t(null,null,1,r),r.lineEnd()),l&&(r.polygonEnd(),l=!1),c=u=null},sphere:function(){r.polygonStart(),r.lineStart(),t(null,null,1,r),r.lineEnd(),r.polygonEnd()}};function _(I,B){i(I,B)&&r.point(I,B)}function b(I,B){s.point(I,B)}function M(){m.point=b,s.lineStart()}function w(){m.point=_,s.lineEnd()}function T(I,B){A.push([I,B]),a.point(I,B)}function N(){a.lineStart(),A=[]}function P(){T(A[0][0],A[0][1]),a.lineEnd();var I=a.clean(),B=o.result(),F,O=B.length,V,U,z;if(A.pop(),u.push(A),A=null,!!O){if(I&1){if(U=B[0],(V=U.length-1)>0){for(l||(r.polygonStart(),l=!0),r.lineStart(),F=0;F<V;++F)r.point((z=U[F])[0],z[1]);r.lineEnd()}return}O>1&&I&2&&B.push(B.pop().concat(B.shift())),c.push(B.filter(YW))}}return m}}function YW(i){return i.length>1}function KW(i,e){return((i=i.x)[0]<0?i[1]-Vo-hi:Vo-i[1])-((e=e.x)[0]<0?e[1]-Vo-hi:Vo-e[1])}const lT=QR(function(){return!0},ZW,ej,[-Ti,-Vo]);function ZW(i){var e=NaN,t=NaN,n=NaN,r;return{lineStart:function(){i.lineStart(),r=1},point:function(s,o){var a=s>0?Ti:-Ti,l=ji(s-e);ji(l-Ti)<hi?(i.point(e,t=(t+o)/2>0?Vo:-Vo),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),i.point(s,t),r=0):n!==a&&l>=Ti&&(ji(e-n)<hi&&(e-=n*hi),ji(s-a)<hi&&(s-=a*hi),t=JW(e,t,s,o),i.point(n,t),i.lineEnd(),i.lineStart(),i.point(a,t),r=0),i.point(e=s,t=o),n=a},lineEnd:function(){i.lineEnd(),e=t=NaN},clean:function(){return 2-r}}}function JW(i,e,t,n){var r,s,o=Un(i-t);return ji(o)>hi?Kv((Un(e)*(s=Yn(n))*Un(t)-Un(n)*(r=Yn(e))*Un(i))/(r*s*o)):(e+n)/2}function ej(i,e,t,n){var r;if(i==null)r=t*Vo,n.point(-Ti,r),n.point(0,r),n.point(Ti,r),n.point(Ti,0),n.point(Ti,-r),n.point(0,-r),n.point(-Ti,-r),n.point(-Ti,0),n.point(-Ti,r);else if(ji(i[0]-e[0])>hi){var s=i[0]<e[0]?Ti:-Ti;r=t*s/2,n.point(-s,r),n.point(0,r),n.point(s,r)}else n.point(e[0],e[1])}function tj(i){var e=Yn(i),t=2*jn,n=e>0,r=ji(e)>hi;function s(c,A,m,_){QW(_,i,t,m,c,A)}function o(c,A){return Yn(c)*Yn(A)>e}function a(c){var A,m,_,b,M;return{lineStart:function(){b=_=!1,M=1},point:function(w,T){var N=[w,T],P,I=o(w,T),B=n?I?0:u(w,T):I?u(w+(w<0?Ti:-Ti),T):0;if(!A&&(b=_=I)&&c.lineStart(),I!==_&&(P=l(A,N),(!P||Gf(A,P)||Gf(N,P))&&(N[2]=1)),I!==_)M=0,I?(c.lineStart(),P=l(N,A),c.point(P[0],P[1])):(P=l(A,N),c.point(P[0],P[1],2),c.lineEnd()),A=P;else if(r&&A&&n^I){var F;!(B&m)&&(F=l(N,A,!0))&&(M=0,n?(c.lineStart(),c.point(F[0][0],F[0][1]),c.point(F[1][0],F[1][1]),c.lineEnd()):(c.point(F[1][0],F[1][1]),c.lineEnd(),c.lineStart(),c.point(F[0][0],F[0][1],3)))}I&&(!A||!Gf(A,N))&&c.point(N[0],N[1]),A=N,_=I,m=B},lineEnd:function(){_&&c.lineEnd(),A=null},clean:function(){return M|(b&&_)<<1}}}function l(c,A,m){var _=_c(c),b=_c(A),M=[1,0,0],w=$4(_,b),T=K7(w,w),N=w[0],P=T-N*N;if(!P)return!m&&c;var I=e*T/P,B=-e*N/P,F=$4(M,w),O=Z7(M,I),V=Z7(w,B);im(O,V);var U=F,z=K7(O,U),H=K7(U,U),Q=z*z-H*(K7(O,O)-1);if(!(Q<0)){var Y=a1(Q),ne=Z7(U,(-z-Y)/H);if(im(ne,O),ne=Sd(ne),!m)return ne;var ee=c[0],se=A[0],pe=c[1],re=A[1],de;se<ee&&(de=ee,ee=se,se=de);var ye=se-ee,Pe=ji(ye-Ti)<hi,Qe=Pe||ye<hi;if(!Pe&&re<pe&&(de=pe,pe=re,re=de),Qe?Pe?pe+re>0^ne[1]<(ji(ne[0]-ee)<hi?pe:re):pe<=ne[1]&&ne[1]<=re:ye>Ti^(ee<=ne[0]&&ne[0]<=se)){var et=Z7(U,(-z+Y)/H);return im(et,O),[ne,Sd(et)]}}}function u(c,A){var m=n?i:Ti-i,_=0;return c<-m?_|=1:c>m&&(_|=2),A<-m?_|=4:A>m&&(_|=8),_}return QR(o,a,s,n?[0,-i]:[-Ti,i-Ti])}function nj(i,e,t,n,r,s){var o=i[0],a=i[1],l=e[0],u=e[1],c=0,A=1,m=l-o,_=u-a,b;if(b=t-o,!(!m&&b>0)){if(b/=m,m<0){if(b<c)return;b<A&&(A=b)}else if(m>0){if(b>A)return;b>c&&(c=b)}if(b=r-o,!(!m&&b<0)){if(b/=m,m<0){if(b>A)return;b>c&&(c=b)}else if(m>0){if(b<c)return;b<A&&(A=b)}if(b=n-a,!(!_&&b>0)){if(b/=_,_<0){if(b<c)return;b<A&&(A=b)}else if(_>0){if(b>A)return;b>c&&(c=b)}if(b=s-a,!(!_&&b<0)){if(b/=_,_<0){if(b>A)return;b>c&&(c=b)}else if(_>0){if(b<c)return;b<A&&(A=b)}return c>0&&(i[0]=o+c*m,i[1]=a+c*_),A<1&&(e[0]=o+A*m,e[1]=a+A*_),!0}}}}}var Uh=1e9,ef=-Uh;function ij(i,e,t,n){function r(u,c){return i<=u&&u<=t&&e<=c&&c<=n}function s(u,c,A,m){var _=0,b=0;if(u==null||(_=o(u,A))!==(b=o(c,A))||l(u,c)<0^A>0)do m.point(_===0||_===3?i:t,_>1?n:e);while((_=(_+A+4)%4)!==b);else m.point(c[0],c[1])}function o(u,c){return ji(u[0]-i)<hi?c>0?0:3:ji(u[0]-t)<hi?c>0?2:1:ji(u[1]-e)<hi?c>0?1:0:c>0?3:2}function a(u,c){return l(u.x,c.x)}function l(u,c){var A=o(u,1),m=o(c,1);return A!==m?A-m:A===0?c[1]-u[1]:A===1?u[0]-c[0]:A===2?u[1]-c[1]:c[0]-u[0]}return function(u){var c=u,A=jR(),m,_,b,M,w,T,N,P,I,B,F,O={point:V,lineStart:Q,lineEnd:Y,polygonStart:z,polygonEnd:H};function V(ee,se){r(ee,se)&&c.point(ee,se)}function U(){for(var ee=0,se=0,pe=_.length;se<pe;++se)for(var re=_[se],de=1,ye=re.length,Pe=re[0],Qe,et,Pt=Pe[0],Ne=Pe[1];de<ye;++de)Qe=Pt,et=Ne,Pe=re[de],Pt=Pe[0],Ne=Pe[1],et<=n?Ne>n&&(Pt-Qe)*(n-et)>(Ne-et)*(i-Qe)&&++ee:Ne<=n&&(Pt-Qe)*(n-et)<(Ne-et)*(i-Qe)&&--ee;return ee}function z(){c=A,m=[],_=[],F=!0}function H(){var ee=U(),se=F&&ee,pe=(m=m8(m)).length;(se||pe)&&(u.polygonStart(),se&&(u.lineStart(),s(null,null,1,u),u.lineEnd()),pe&&$R(m,a,ee,s,u),u.polygonEnd()),c=u,m=_=b=null}function Q(){O.point=ne,_&&_.push(b=[]),B=!0,I=!1,N=P=NaN}function Y(){m&&(ne(M,w),T&&I&&A.rejoin(),m.push(A.result())),O.point=V,I&&c.lineEnd()}function ne(ee,se){var pe=r(ee,se);if(_&&b.push([ee,se]),B)M=ee,w=se,T=pe,B=!1,pe&&(c.lineStart(),c.point(ee,se));else if(pe&&I)c.point(ee,se);else{var re=[N=Math.max(ef,Math.min(Uh,N)),P=Math.max(ef,Math.min(Uh,P))],de=[ee=Math.max(ef,Math.min(Uh,ee)),se=Math.max(ef,Math.min(Uh,se))];nj(re,de,i,e,t,n)?(I||(c.lineStart(),c.point(re[0],re[1])),c.point(de[0],de[1]),pe||c.lineEnd(),F=!1):pe&&(c.lineStart(),c.point(ee,se),F=!1)}N=ee,P=se,I=pe}return O}}var qg,Hg,qf,Hf,X4={sphere:Ks,point:Ks,lineStart:rj,lineEnd:Ks,polygonStart:Ks,polygonEnd:Ks};function rj(){X4.point=oj,X4.lineEnd=sj}function sj(){X4.point=X4.lineEnd=Ks}function oj(i,e){i*=jn,e*=jn,Hg=i,qf=Un(e),Hf=Yn(e),X4.point=aj}function aj(i,e){i*=jn,e*=jn;var t=Un(e),n=Yn(e),r=ji(i-Hg),s=Yn(r),o=Un(r),a=n*o,l=Hf*t-qf*n*s,u=qf*t+Hf*n*s;qg.add(Ya(a1(a*a+l*l),u)),Hg=i,qf=t,Hf=n}function lj(i){return qg=new Yl,K9(i,X4),+qg}var Wg=[null,null],uj={type:"LineString",coordinates:Wg};function Au(i,e){return Wg[0]=i,Wg[1]=e,lj(uj)}var uT={Feature:function(i,e){return Id(i.geometry,e)},FeatureCollection:function(i,e){for(var t=i.features,n=-1,r=t.length;++n<r;)if(Id(t[n].geometry,e))return!0;return!1}},cT={Sphere:function(){return!0},Point:function(i,e){return hT(i.coordinates,e)},MultiPoint:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(hT(t[n],e))return!0;return!1},LineString:function(i,e){return fT(i.coordinates,e)},MultiLineString:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(fT(t[n],e))return!0;return!1},Polygon:function(i,e){return dT(i.coordinates,e)},MultiPolygon:function(i,e){for(var t=i.coordinates,n=-1,r=t.length;++n<r;)if(dT(t[n],e))return!0;return!1},GeometryCollection:function(i,e){for(var t=i.geometries,n=-1,r=t.length;++n<r;)if(Id(t[n],e))return!0;return!1}};function Id(i,e){return i&&cT.hasOwnProperty(i.type)?cT[i.type](i,e):!1}function hT(i,e){return Au(i,e)===0}function fT(i,e){for(var t,n,r,s=0,o=i.length;s<o;s++){if(n=Au(i[s],e),n===0||s>0&&(r=Au(i[s],i[s-1]),r>0&&t<=r&&n<=r&&(t+n-r)*(1-Math.pow((t-n)/r,2))<vd*r))return!0;t=n}return!1}function dT(i,e){return!!XR(i.map(cj),YR(e))}function cj(i){return i=i.map(YR),i.pop(),i}function YR(i){return[i[0]*jn,i[1]*jn]}function hj(i,e){return(i&&uT.hasOwnProperty(i.type)?uT[i.type]:Id)(i,e)}function AT(i,e,t){var n=u4(i,e-hi,t).concat(e);return function(r){return n.map(function(s){return[r,s]})}}function pT(i,e,t){var n=u4(i,e-hi,t).concat(e);return function(r){return n.map(function(s){return[s,r]})}}function fj(){var i,e,t,n,r,s,o,a,l=10,u=l,c=90,A=360,m,_,b,M,w=2.5;function T(){return{type:"MultiLineString",coordinates:N()}}function N(){return u4(Y7(n/c)*c,t,c).map(b).concat(u4(Y7(a/A)*A,o,A).map(M)).concat(u4(Y7(e/l)*l,i,l).filter(function(P){return ji(P%c)>hi}).map(m)).concat(u4(Y7(s/u)*u,r,u).filter(function(P){return ji(P%A)>hi}).map(_))}return T.lines=function(){return N().map(function(P){return{type:"LineString",coordinates:P}})},T.outline=function(){return{type:"Polygon",coordinates:[b(n).concat(M(o).slice(1),b(t).reverse().slice(1),M(a).reverse().slice(1))]}},T.extent=function(P){return arguments.length?T.extentMajor(P).extentMinor(P):T.extentMinor()},T.extentMajor=function(P){return arguments.length?(n=+P[0][0],t=+P[1][0],a=+P[0][1],o=+P[1][1],n>t&&(P=n,n=t,t=P),a>o&&(P=a,a=o,o=P),T.precision(w)):[[n,a],[t,o]]},T.extentMinor=function(P){return arguments.length?(e=+P[0][0],i=+P[1][0],s=+P[0][1],r=+P[1][1],e>i&&(P=e,e=i,i=P),s>r&&(P=s,s=r,r=P),T.precision(w)):[[e,s],[i,r]]},T.step=function(P){return arguments.length?T.stepMajor(P).stepMinor(P):T.stepMinor()},T.stepMajor=function(P){return arguments.length?(c=+P[0],A=+P[1],T):[c,A]},T.stepMinor=function(P){return arguments.length?(l=+P[0],u=+P[1],T):[l,u]},T.precision=function(P){return arguments.length?(w=+P,m=AT(s,r,90),_=pT(e,i,w),b=AT(a,o,90),M=pT(n,t,w),T):w},T.extentMajor([[-180,-90+hi],[180,90-hi]]).extentMinor([[-180,-80-hi],[180,80+hi]])}function dj(){return fj()()}function Jv(i,e){var t=i[0]*jn,n=i[1]*jn,r=e[0]*jn,s=e[1]*jn,o=Yn(n),a=Un(n),l=Yn(s),u=Un(s),c=o*Yn(t),A=o*Un(t),m=l*Yn(r),_=l*Un(r),b=2*l1(a1(jS(s-n)+o*l*jS(r-t))),M=Un(b),w=b?function(T){var N=Un(T*=b)/M,P=Un(b-T)/M,I=P*c+N*m,B=P*A+N*_,F=P*a+N*u;return[Ya(B,I)*wr,Ya(F,a1(I*I+B*B))*wr]}:function(){return[t*wr,n*wr]};return w.distance=b,w}const mT=i=>i;var Q4=1/0,Ld=Q4,_8=-Q4,Dd=_8,gT={point:Aj,lineStart:Ks,lineEnd:Ks,polygonStart:Ks,polygonEnd:Ks,result:function(){var i=[[Q4,Ld],[_8,Dd]];return _8=Dd=-(Ld=Q4=1/0),i}};function Aj(i,e){i<Q4&&(Q4=i),i>_8&&(_8=i),e<Ld&&(Ld=e),e>Dd&&(Dd=e)}function e_(i){return function(e){var t=new jg;for(var n in i)t[n]=i[n];return t.stream=e,t}}function jg(){}jg.prototype={constructor:jg,point:function(i,e){this.stream.point(i,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};function t_(i,e,t){var n=i.clipExtent&&i.clipExtent();return i.scale(150).translate([0,0]),n!=null&&i.clipExtent(null),K9(t,i.stream(gT)),e(gT.result()),n!=null&&i.clipExtent(n),i}function KR(i,e,t){return t_(i,function(n){var r=e[1][0]-e[0][0],s=e[1][1]-e[0][1],o=Math.min(r/(n[1][0]-n[0][0]),s/(n[1][1]-n[0][1])),a=+e[0][0]+(r-o*(n[1][0]+n[0][0]))/2,l=+e[0][1]+(s-o*(n[1][1]+n[0][1]))/2;i.scale(150*o).translate([a,l])},t)}function pj(i,e,t){return KR(i,[[0,0],e],t)}function mj(i,e,t){return t_(i,function(n){var r=+e,s=r/(n[1][0]-n[0][0]),o=(r-s*(n[1][0]+n[0][0]))/2,a=-s*n[0][1];i.scale(150*s).translate([o,a])},t)}function gj(i,e,t){return t_(i,function(n){var r=+e,s=r/(n[1][1]-n[0][1]),o=-s*n[0][0],a=(r-s*(n[1][1]+n[0][1]))/2;i.scale(150*s).translate([o,a])},t)}var yT=16,yj=Yn(30*jn);function vT(i,e){return+e?_j(i,e):vj(i)}function vj(i){return e_({point:function(e,t){e=i(e,t),this.stream.point(e[0],e[1])}})}function _j(i,e){function t(n,r,s,o,a,l,u,c,A,m,_,b,M,w){var T=u-n,N=c-r,P=T*T+N*N;if(P>4*e&&M--){var I=o+m,B=a+_,F=l+b,O=a1(I*I+B*B+F*F),V=l1(F/=O),U=ji(ji(F)-1)<hi||ji(s-A)<hi?(s+A)/2:Ya(B,I),z=i(U,V),H=z[0],Q=z[1],Y=H-n,ne=Q-r,ee=N*Y-T*ne;(ee*ee/P>e||ji((T*Y+N*ne)/P-.5)>.3||o*m+a*_+l*b<yj)&&(t(n,r,s,o,a,l,H,Q,U,I/=O,B/=O,F,M,w),w.point(H,Q),t(H,Q,U,I,B,F,u,c,A,m,_,b,M,w))}}return function(n){var r,s,o,a,l,u,c,A,m,_,b,M,w={point:T,lineStart:N,lineEnd:I,polygonStart:function(){n.polygonStart(),w.lineStart=B},polygonEnd:function(){n.polygonEnd(),w.lineStart=N}};function T(V,U){V=i(V,U),n.point(V[0],V[1])}function N(){A=NaN,w.point=P,n.lineStart()}function P(V,U){var z=_c([V,U]),H=i(V,U);t(A,m,c,_,b,M,A=H[0],m=H[1],c=V,_=z[0],b=z[1],M=z[2],yT,n),n.point(A,m)}function I(){w.point=T,n.lineEnd()}function B(){N(),w.point=F,w.lineEnd=O}function F(V,U){P(r=V,U),s=A,o=m,a=_,l=b,u=M,w.point=P}function O(){t(A,m,c,_,b,M,s,o,r,a,l,u,yT,n),w.lineEnd=I,I()}return w}}var xj=e_({point:function(i,e){this.stream.point(i*jn,e*jn)}});function bj(i){return e_({point:function(e,t){var n=i(e,t);return this.stream.point(n[0],n[1])}})}function Sj(i,e,t,n,r){function s(o,a){return o*=n,a*=r,[e+i*o,t-i*a]}return s.invert=function(o,a){return[(o-e)/i*n,(t-a)/i*r]},s}function _T(i,e,t,n,r,s){if(!s)return Sj(i,e,t,n,r);var o=Yn(s),a=Un(s),l=o*i,u=a*i,c=o/i,A=a/i,m=(a*t-o*e)/i,_=(a*e+o*t)/i;function b(M,w){return M*=n,w*=r,[l*M-u*w+e,t-u*M-l*w]}return b.invert=function(M,w){return[n*(c*M-A*w+m),r*(_-A*M-c*w)]},b}function Tj(i){return wj(function(){return i})()}function wj(i){var e,t=150,n=480,r=250,s=0,o=0,a=0,l=0,u=0,c,A=0,m=1,_=1,b=null,M=lT,w=null,T,N,P,I=mT,B=.5,F,O,V,U,z;function H(ee){return V(ee[0]*jn,ee[1]*jn)}function Q(ee){return ee=V.invert(ee[0],ee[1]),ee&&[ee[0]*wr,ee[1]*wr]}H.stream=function(ee){return U&&z===ee?U:U=xj(bj(c)(M(F(I(z=ee)))))},H.preclip=function(ee){return arguments.length?(M=ee,b=void 0,ne()):M},H.postclip=function(ee){return arguments.length?(I=ee,w=T=N=P=null,ne()):I},H.clipAngle=function(ee){return arguments.length?(M=+ee?tj(b=ee*jn):(b=null,lT),ne()):b*wr},H.clipExtent=function(ee){return arguments.length?(I=ee==null?(w=T=N=P=null,mT):ij(w=+ee[0][0],T=+ee[0][1],N=+ee[1][0],P=+ee[1][1]),ne()):w==null?null:[[w,T],[N,P]]},H.scale=function(ee){return arguments.length?(t=+ee,Y()):t},H.translate=function(ee){return arguments.length?(n=+ee[0],r=+ee[1],Y()):[n,r]},H.center=function(ee){return arguments.length?(s=ee[0]%360*jn,o=ee[1]%360*jn,Y()):[s*wr,o*wr]},H.rotate=function(ee){return arguments.length?(a=ee[0]%360*jn,l=ee[1]%360*jn,u=ee.length>2?ee[2]%360*jn:0,Y()):[a*wr,l*wr,u*wr]},H.angle=function(ee){return arguments.length?(A=ee%360*jn,Y()):A*wr},H.reflectX=function(ee){return arguments.length?(m=ee?-1:1,Y()):m<0},H.reflectY=function(ee){return arguments.length?(_=ee?-1:1,Y()):_<0},H.precision=function(ee){return arguments.length?(F=vT(O,B=ee*ee),ne()):a1(B)},H.fitExtent=function(ee,se){return KR(H,ee,se)},H.fitSize=function(ee,se){return pj(H,ee,se)},H.fitWidth=function(ee,se){return mj(H,ee,se)},H.fitHeight=function(ee,se){return gj(H,ee,se)};function Y(){var ee=_T(t,0,0,m,_,A).apply(null,e(s,o)),se=_T(t,n-ee[0],r-ee[1],m,_,A);return c=WR(a,l,u),O=zg(e,se),V=zg(c,O),F=vT(O,B),ne()}function ne(){return U=z=null,H}return function(){return e=i.apply(this,arguments),H.invert=e.invert&&Q,Y()}}function Mj(i){return function(e,t){var n=a1(e*e+t*t),r=i(n),s=Un(r),o=Yn(r);return[Ya(e*s,n*o),l1(n&&t*s/n)]}}function n_(i,e){return[i,LW(BW((Vo+e)/2))]}n_.invert=function(i,e){return[i,2*Kv(IW(e))-Vo]};function ZR(i,e){var t=Yn(e),n=1+Yn(i)*t;return[t*Un(i)/n,Un(e)/n]}ZR.invert=Mj(function(i){return 2*Kv(i)});function Ej(){return Tj(ZR).scale(250).clipAngle(142)}function $g(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function Rj(i){if(Array.isArray(i))return i}function Cj(i){if(Array.isArray(i))return $g(i)}function Kh(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function Pj(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function Nj(i,e,t){return e=Bd(e),zj(i,eC()?Reflect.construct(e,[],Bd(i).constructor):e.apply(i,t))}function JR(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function Ij(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function ui(i,e){return i.get(Kh(i,e))}function H1(i,e,t){JR(i,e),e.set(i,t)}function W1(i,e,t){return i.set(Kh(i,e),t),t}function Lj(i,e){JR(i,e),e.add(i)}function Dj(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,nC(n.key),n)}}function Bj(i,e,t){return Dj(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function O3(i,e,t){return(e=nC(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function Bd(i){return Bd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Bd(i)}function Fj(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Xg(i,e)}function eC(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(eC=function(){return!!i})()}function Uj(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function Oj(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function kj(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vj(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zj(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Pj(i)}function Xg(i,e){return Xg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Xg(i,e)}function Wf(i,e){return Rj(i)||Oj(i,e)||iC(i,e)||kj()}function tC(i){return Cj(i)||Uj(i)||iC(i)||Vj()}function Gj(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function nC(i){var e=Gj(i,"string");return typeof e=="symbol"?e:e+""}function iC(i,e){if(i){if(typeof i=="string")return $g(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?$g(i,e):void 0}}var rC=function(e){e instanceof Array?e.forEach(rC):(e.map&&e.map.dispose(),e.dispose())},sC=function(e){e.geometry&&e.geometry.dispose(),e.material&&rC(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(sC)},xT=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),sC(t)}};function oC(i,e,t){var n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return{x:t*Math.sin(n)*Math.cos(r),y:t*Math.cos(n),z:t*Math.sin(n)*Math.sin(r)}}function qj(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),o=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-o*180/Math.PI-(o<-Math.PI/2?360:0),r}}function d2(i){return i*Math.PI/180}var aC=function(e){return 1-(n_(0,(.5-e)*Math.PI)[1]/Math.PI+1)/2},sm=function(e){return Math.max(0,Math.min(1,aC(e)))},bT=function(e){return .5-n_.invert(0,(2*(1-e)-1)*Math.PI)[1]/Math.PI},Hj=function(e){for(var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,r=o1().domain([1,0]).range([t,n]).clamp(!0),s=o1().domain([sm(t),sm(n)]).range([1,0]).clamp(!0),o=function(A){return s(sm(r(A)))},a=e.array,l=0,u=a.length;l<u;l+=2)a[l+1]=o(a[l+1]);e.needsUpdate=!0},ST=function(e,t,n,r){var s=Math.pow(2,e),o=Math.max(0,Math.min(s-1,Math.floor((n+180)*s/360))),a=(90-r)/180;t&&(a=Math.max(0,Math.min(1,aC(a))));var l=Math.floor(a*s);return[o,l]},Qg=function(e,t){for(var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,r=arguments.length>3&&arguments[3]!==void 0?arguments[3]:0,s=arguments.length>4?arguments[4]:void 0,o=arguments.length>5?arguments[5]:void 0,a=[],l=Math.pow(2,e),u=360/l,c=180/l,A=s===void 0?l-1:s,m=o===void 0?l-1:o,_=n,b=Math.min(l-1,A);_<=b;_++)for(var M=r,w=Math.min(l-1,m);M<=w;M++){var T=M,N=c;if(t){T=M===0?M:bT(M/l)*l;var P=M+1===l?M+1:bT((M+1)/l)*l;N=(P-T)*180/l}var I=-180+(_+.5)*u,B=90-(T*180/l+N/2),F=N;a.push({x:_,y:M,lng:I,lat:B,latLen:F})}return a},Wj=6,jj=7,$j=3,Xj=90,Z0=new WeakMap,J1=new WeakMap,om=new WeakMap,tf=new WeakMap,Oa=new WeakMap,Fd=new WeakMap,x4=new WeakMap,A2=new WeakMap,nf=new WeakSet,Qj=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.tileUrl,o=r.minLevel,a=o===void 0?0:o,l=r.maxLevel,u=l===void 0?17:l,c=r.mercatorProjection,A=c===void 0?!0:c;return Ij(this,e),n=Nj(this,e),Lj(n,nf),H1(n,Z0,void 0),H1(n,J1,void 0),H1(n,om,void 0),H1(n,tf,void 0),H1(n,Oa,{}),H1(n,Fd,void 0),H1(n,x4,void 0),H1(n,A2,void 0),O3(n,"minLevel",void 0),O3(n,"maxLevel",void 0),O3(n,"thresholds",tC(new Array(30)).map(function(m,_){return 8/Math.pow(2,_)})),O3(n,"curvatureResolution",5),O3(n,"tileMargin",0),O3(n,"clearTiles",function(){Object.values(ui(Oa,n)).forEach(function(m){m.forEach(function(_){_.obj&&(n.remove(_.obj),xT(_.obj),delete _.obj)})}),W1(Oa,n,{})}),W1(Z0,n,t),n.tileUrl=s,W1(J1,n,A),n.minLevel=a,n.maxLevel=u,n.level=0,n.add(W1(A2,n,new ei(new i0(ui(Z0,n)*.99,180,90),new Bs({color:0})))),ui(A2,n).visible=!1,ui(A2,n).material.polygonOffset=!0,ui(A2,n).material.polygonOffsetUnits=3,ui(A2,n).material.polygonOffsetFactor=1,n}return Fj(e,i),Bj(e,[{key:"tileUrl",get:function(){return ui(om,this)},set:function(n){W1(om,this,n),this.updatePov(ui(x4,this))}},{key:"level",get:function(){return ui(tf,this)},set:function(n){var r=this;ui(Oa,this)[n]||Kh(nf,this,Yj).call(this,n);var s=ui(tf,this);if(W1(tf,this,n),!(n===s||s===void 0)){if(ui(A2,this).visible=n>0,ui(Oa,this)[n].forEach(function(a){return a.obj&&(a.obj.material.depthWrite=!0)}),s<n&&ui(Oa,this)[s].forEach(function(a){return a.obj&&(a.obj.material.depthWrite=!1)}),s>n)for(var o=n+1;o<=s;o++)ui(Oa,this)[o]&&ui(Oa,this)[o].forEach(function(a){a.obj&&(r.remove(a.obj),xT(a.obj),delete a.obj)});Kh(nf,this,TT).call(this)}}},{key:"updatePov",value:function(n){var r=this;if(!(!n||!(n instanceof yu))){W1(x4,this,n);var s;if(W1(Fd,this,function(c){if(!c.hullPnts){var A=360/Math.pow(2,r.level),m=c.lng,_=c.lat,b=c.latLen,M=m-A/2,w=m+A/2,T=_-b/2,N=_+b/2;c.hullPnts=[[_,m],[T,M],[N,M],[T,w],[N,w]].map(function(P){var I=Wf(P,2),B=I[0],F=I[1];return oC(B,F,ui(Z0,r))}).map(function(P){var I=P.x,B=P.y,F=P.z;return new J(I,B,F)})}return s||(s=new _u,n.updateMatrix(),n.updateMatrixWorld(),s.setFromProjectionMatrix(new Wt().multiplyMatrices(n.projectionMatrix,n.matrixWorldInverse))),c.hullPnts.some(function(P){return s.containsPoint(P.clone().applyMatrix4(r.matrixWorld))})}),this.tileUrl){var o=n.position.clone(),a=o.distanceTo(this.getWorldPosition(new J)),l=(a-ui(Z0,this))/ui(Z0,this),u=this.thresholds.findIndex(function(c){return c&&c<=l});this.level=Math.min(this.maxLevel,Math.max(this.minLevel,u<0?this.thresholds.length:u)),Kh(nf,this,TT).call(this)}}}}])}(Zs);function Yj(i){var e=this;if(i>jj){ui(Oa,this)[i]=[];return}var t=ui(Oa,this)[i]=Qg(i,ui(J1,this));t.forEach(function(n){return n.centroid=oC(n.lat,n.lng,ui(Z0,e))}),t.octree=vR().x(function(n){return n.centroid.x}).y(function(n){return n.centroid.y}).z(function(n){return n.centroid.z}).addAll(t)}function TT(){var i=this;if(!(!this.tileUrl||this.level===void 0||!ui(Oa,this).hasOwnProperty(this.level))&&!(!ui(Fd,this)&&this.level>Wj)){var e=ui(Oa,this)[this.level];if(ui(x4,this)){var t=this.worldToLocal(ui(x4,this).position.clone());if(e.octree){var n,r=this.worldToLocal(ui(x4,this).position.clone()),s=(r.length()-ui(Z0,this))*$j;e=(n=e.octree).findAllWithinRadius.apply(n,tC(r).concat([s]))}else{var o=qj(t),a=(o.r/ui(Z0,this)-1)*Xj,l=a/Math.cos(d2(o.lat)),u=[o.lng-l,o.lng+l],c=[o.lat+a,o.lat-a],A=ST(this.level,ui(J1,this),u[0],c[0]),m=Wf(A,2),_=m[0],b=m[1],M=ST(this.level,ui(J1,this),u[1],c[1]),w=Wf(M,2),T=w[0],N=w[1];!e.record&&(e.record={});var P=e.record;if(!P.hasOwnProperty("".concat(Math.round((_+T)/2),"_").concat(Math.round((b+N)/2))))e=Qg(this.level,ui(J1,this),_,b,T,N).map(function(V){var U="".concat(V.x,"_").concat(V.y);return P.hasOwnProperty(U)?P[U]:(P[U]=V,e.push(V),V)});else{for(var I=[],B=_;B<=T;B++)for(var F=b;F<=N;F++){var O="".concat(B,"_").concat(F);P.hasOwnProperty(O)||(P[O]=Qg(this.level,ui(J1,this),B,F,B,F)[0],e.push(P[O])),I.push(P[O])}e=I}}}e.filter(function(V){return!V.obj}).filter(ui(Fd,this)||function(){return!0}).forEach(function(V){var U=V.x,z=V.y,H=V.lng,Q=V.lat,Y=V.latLen,ne=360/Math.pow(2,i.level);if(!V.obj){var ee=ne*(1-i.tileMargin),se=Y*(1-i.tileMargin),pe=d2(H),re=d2(-Q),de=new ei(new i0(ui(Z0,i),Math.ceil(ee/i.curvatureResolution),Math.ceil(se/i.curvatureResolution),d2(90-ee/2)+pe,d2(ee),d2(90-se/2)+re,d2(se)),new U0);if(ui(J1,i)){var ye=[Q+Y/2,Q-Y/2].map(function(Pt){return .5-Pt/180}),Pe=Wf(ye,2),Qe=Pe[0],et=Pe[1];Hj(de.geometry.attributes.uv,Qe,et)}V.obj=de}V.loading||(V.loading=!0,new Nv().load(i.tileUrl(U,z,i.level),function(Pt){var Ne=V.obj;Ne&&(Pt.colorSpace=xs,Ne.material.map=Pt,Ne.material.color=null,Ne.material.needsUpdate=!0,i.add(Ne)),V.loading=!1}))})}}function Kj(i,e,t=2){const n=e&&e.length,r=n?e[0]*t:i.length;let s=lC(i,0,r,t,!0);const o=[];if(!s||s.next===s.prev)return o;let a,l,u;if(n&&(s=n$(i,e,s,t)),i.length>80*t){a=i[0],l=i[1];let c=a,A=l;for(let m=t;m<r;m+=t){const _=i[m],b=i[m+1];_<a&&(a=_),b<l&&(l=b),_>c&&(c=_),b>A&&(A=b)}u=Math.max(c-a,A-l),u=u!==0?32767/u:0}return x8(s,o,t,a,l,u,0),o}function lC(i,e,t,n,r){let s;if(r===d$(i,e,t,n)>0)for(let o=e;o<t;o+=n)s=wT(o/n|0,i[o],i[o+1],s);else for(let o=t-n;o>=e;o-=n)s=wT(o/n|0,i[o],i[o+1],s);return s&&Y4(s,s.next)&&(S8(s),s=s.next),s}function xc(i,e){if(!i)return i;e||(e=i);let t=i,n;do if(n=!1,!t.steiner&&(Y4(t,t.next)||vr(t.prev,t,t.next)===0)){if(S8(t),t=e=t.prev,t===t.next)break;n=!0}else t=t.next;while(n||t!==e);return e}function x8(i,e,t,n,r,s,o){if(!i)return;!o&&s&&a$(i,n,r,s);let a=i;for(;i.prev!==i.next;){const l=i.prev,u=i.next;if(s?Jj(i,n,r,s):Zj(i)){e.push(l.i,i.i,u.i),S8(i),i=u.next,a=u.next;continue}if(i=u,i===a){o?o===1?(i=e$(xc(i),e),x8(i,e,t,n,r,s,2)):o===2&&t$(i,e,t,n,r,s):x8(xc(i),e,t,n,r,s,1);break}}}function Zj(i){const e=i.prev,t=i,n=i.next;if(vr(e,t,n)>=0)return!1;const r=e.x,s=t.x,o=n.x,a=e.y,l=t.y,u=n.y,c=Math.min(r,s,o),A=Math.min(a,l,u),m=Math.max(r,s,o),_=Math.max(a,l,u);let b=n.next;for(;b!==e;){if(b.x>=c&&b.x<=m&&b.y>=A&&b.y<=_&&Oh(r,a,s,l,o,u,b.x,b.y)&&vr(b.prev,b,b.next)>=0)return!1;b=b.next}return!0}function Jj(i,e,t,n){const r=i.prev,s=i,o=i.next;if(vr(r,s,o)>=0)return!1;const a=r.x,l=s.x,u=o.x,c=r.y,A=s.y,m=o.y,_=Math.min(a,l,u),b=Math.min(c,A,m),M=Math.max(a,l,u),w=Math.max(c,A,m),T=Yg(_,b,e,t,n),N=Yg(M,w,e,t,n);let P=i.prevZ,I=i.nextZ;for(;P&&P.z>=T&&I&&I.z<=N;){if(P.x>=_&&P.x<=M&&P.y>=b&&P.y<=w&&P!==r&&P!==o&&Oh(a,c,l,A,u,m,P.x,P.y)&&vr(P.prev,P,P.next)>=0||(P=P.prevZ,I.x>=_&&I.x<=M&&I.y>=b&&I.y<=w&&I!==r&&I!==o&&Oh(a,c,l,A,u,m,I.x,I.y)&&vr(I.prev,I,I.next)>=0))return!1;I=I.nextZ}for(;P&&P.z>=T;){if(P.x>=_&&P.x<=M&&P.y>=b&&P.y<=w&&P!==r&&P!==o&&Oh(a,c,l,A,u,m,P.x,P.y)&&vr(P.prev,P,P.next)>=0)return!1;P=P.prevZ}for(;I&&I.z<=N;){if(I.x>=_&&I.x<=M&&I.y>=b&&I.y<=w&&I!==r&&I!==o&&Oh(a,c,l,A,u,m,I.x,I.y)&&vr(I.prev,I,I.next)>=0)return!1;I=I.nextZ}return!0}function e$(i,e){let t=i;do{const n=t.prev,r=t.next.next;!Y4(n,r)&&cC(n,t,t.next,r)&&b8(n,r)&&b8(r,n)&&(e.push(n.i,t.i,r.i),S8(t),S8(t.next),t=i=r),t=t.next}while(t!==i);return xc(t)}function t$(i,e,t,n,r,s){let o=i;do{let a=o.next.next;for(;a!==o.prev;){if(o.i!==a.i&&c$(o,a)){let l=hC(o,a);o=xc(o,o.next),l=xc(l,l.next),x8(o,e,t,n,r,s,0),x8(l,e,t,n,r,s,0);return}a=a.next}o=o.next}while(o!==i)}function n$(i,e,t,n){const r=[];for(let s=0,o=e.length;s<o;s++){const a=e[s]*n,l=s<o-1?e[s+1]*n:i.length,u=lC(i,a,l,n,!1);u===u.next&&(u.steiner=!0),r.push(u$(u))}r.sort(i$);for(let s=0;s<r.length;s++)t=r$(r[s],t);return t}function i$(i,e){let t=i.x-e.x;if(t===0&&(t=i.y-e.y,t===0)){const n=(i.next.y-i.y)/(i.next.x-i.x),r=(e.next.y-e.y)/(e.next.x-e.x);t=n-r}return t}function r$(i,e){const t=s$(i,e);if(!t)return e;const n=hC(t,i);return xc(n,n.next),xc(t,t.next)}function s$(i,e){let t=e;const n=i.x,r=i.y;let s=-1/0,o;if(Y4(i,t))return t;do{if(Y4(i,t.next))return t.next;if(r<=t.y&&r>=t.next.y&&t.next.y!==t.y){const A=t.x+(r-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(A<=n&&A>s&&(s=A,o=t.x<t.next.x?t:t.next,A===n))return o}t=t.next}while(t!==e);if(!o)return null;const a=o,l=o.x,u=o.y;let c=1/0;t=o;do{if(n>=t.x&&t.x>=l&&n!==t.x&&uC(r<u?n:s,r,l,u,r<u?s:n,r,t.x,t.y)){const A=Math.abs(r-t.y)/(n-t.x);b8(t,i)&&(A<c||A===c&&(t.x>o.x||t.x===o.x&&o$(o,t)))&&(o=t,c=A)}t=t.next}while(t!==a);return o}function o$(i,e){return vr(i.prev,i,e.prev)<0&&vr(e.next,i,i.next)<0}function a$(i,e,t,n){let r=i;do r.z===0&&(r.z=Yg(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==i);r.prevZ.nextZ=null,r.prevZ=null,l$(r)}function l$(i){let e,t=1;do{let n=i,r;i=null;let s=null;for(e=0;n;){e++;let o=n,a=0;for(let u=0;u<t&&(a++,o=o.nextZ,!!o);u++);let l=t;for(;a>0||l>0&&o;)a!==0&&(l===0||!o||n.z<=o.z)?(r=n,n=n.nextZ,a--):(r=o,o=o.nextZ,l--),s?s.nextZ=r:i=r,r.prevZ=s,s=r;n=o}s.nextZ=null,t*=2}while(e>1);return i}function Yg(i,e,t,n,r){return i=(i-t)*r|0,e=(e-n)*r|0,i=(i|i<<8)&16711935,i=(i|i<<4)&252645135,i=(i|i<<2)&858993459,i=(i|i<<1)&1431655765,e=(e|e<<8)&16711935,e=(e|e<<4)&252645135,e=(e|e<<2)&858993459,e=(e|e<<1)&1431655765,i|e<<1}function u$(i){let e=i,t=i;do(e.x<t.x||e.x===t.x&&e.y<t.y)&&(t=e),e=e.next;while(e!==i);return t}function uC(i,e,t,n,r,s,o,a){return(r-o)*(e-a)>=(i-o)*(s-a)&&(i-o)*(n-a)>=(t-o)*(e-a)&&(t-o)*(s-a)>=(r-o)*(n-a)}function Oh(i,e,t,n,r,s,o,a){return!(i===o&&e===a)&&uC(i,e,t,n,r,s,o,a)}function c$(i,e){return i.next.i!==e.i&&i.prev.i!==e.i&&!h$(i,e)&&(b8(i,e)&&b8(e,i)&&f$(i,e)&&(vr(i.prev,i,e.prev)||vr(i,e.prev,e))||Y4(i,e)&&vr(i.prev,i,i.next)>0&&vr(e.prev,e,e.next)>0)}function vr(i,e,t){return(e.y-i.y)*(t.x-e.x)-(e.x-i.x)*(t.y-e.y)}function Y4(i,e){return i.x===e.x&&i.y===e.y}function cC(i,e,t,n){const r=sf(vr(i,e,t)),s=sf(vr(i,e,n)),o=sf(vr(t,n,i)),a=sf(vr(t,n,e));return!!(r!==s&&o!==a||r===0&&rf(i,t,e)||s===0&&rf(i,n,e)||o===0&&rf(t,i,n)||a===0&&rf(t,e,n))}function rf(i,e,t){return e.x<=Math.max(i.x,t.x)&&e.x>=Math.min(i.x,t.x)&&e.y<=Math.max(i.y,t.y)&&e.y>=Math.min(i.y,t.y)}function sf(i){return i>0?1:i<0?-1:0}function h$(i,e){let t=i;do{if(t.i!==i.i&&t.next.i!==i.i&&t.i!==e.i&&t.next.i!==e.i&&cC(t,t.next,i,e))return!0;t=t.next}while(t!==i);return!1}function b8(i,e){return vr(i.prev,i,i.next)<0?vr(i,e,i.next)>=0&&vr(i,i.prev,e)>=0:vr(i,e,i.prev)<0||vr(i,i.next,e)<0}function f$(i,e){let t=i,n=!1;const r=(i.x+e.x)/2,s=(i.y+e.y)/2;do t.y>s!=t.next.y>s&&t.next.y!==t.y&&r<(t.next.x-t.x)*(s-t.y)/(t.next.y-t.y)+t.x&&(n=!n),t=t.next;while(t!==i);return n}function hC(i,e){const t=Kg(i.i,i.x,i.y),n=Kg(e.i,e.x,e.y),r=i.next,s=e.prev;return i.next=e,e.prev=i,t.next=r,r.prev=t,n.next=t,t.prev=n,s.next=n,n.prev=s,n}function wT(i,e,t,n){const r=Kg(i,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function S8(i){i.next.prev=i.prev,i.prev.next=i.next,i.prevZ&&(i.prevZ.nextZ=i.nextZ),i.nextZ&&(i.nextZ.prevZ=i.prevZ)}function Kg(i,e,t){return{i,x:e,y:t,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function d$(i,e,t,n){let r=0;for(let s=e,o=t-n;s<t;s+=n)r+=(i[o]-i[s])*(i[s+1]+i[o+1]),o=s;return r}function Ud(i){const e=[],t=[],n=i[0][0].length;let r=0,s=0;for(const o of i){for(const a of o)for(let l=0;l<n;l++)e.push(a[l]);s&&(r+=s,t.push(r)),s=o.length}return{vertices:e,holes:t,dimensions:n}}function Zg(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function A$(i){if(Array.isArray(i))return i}function p$(i){if(Array.isArray(i))return Zg(i)}function m$(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function g$(i,e,t){return e=Od(e),M$(i,fC()?Reflect.construct(e,[],Od(i).constructor):e.apply(i,t))}function y$(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function v$(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function _$(i,e){var t=typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(!t){if(Array.isArray(i)||(t=i_(i))||e){t&&(i=t);var n=0,r=function(){};return{s:r,n:function(){return n>=i.length?{done:!0}:{done:!1,value:i[n++]}},e:function(l){throw l},f:r}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var s,o=!0,a=!1;return{s:function(){t=t.call(i)},n:function(){var l=t.next();return o=l.done,l},e:function(l){a=!0,s=l},f:function(){try{o||t.return==null||t.return()}finally{if(a)throw s}}}}function Od(i){return Od=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},Od(i)}function x$(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Jg(i,e)}function fC(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(fC=function(){return!!i})()}function b$(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function S$(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function T$(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function w$(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function M$(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return m$(i)}function Jg(i,e){return Jg=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Jg(i,e)}function uh(i,e){return A$(i)||S$(i,e)||i_(i,e)||T$()}function E$(i){return p$(i)||b$(i)||i_(i)||w$()}function i_(i,e){if(i){if(typeof i=="string")return Zg(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Zg(i,e):void 0}}var MT=function(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,n=[],r=null;return e.forEach(function(s){if(r){var o=Au(s,r)*180/Math.PI;if(o>t)for(var a=Jv(r,s),l=r.length>2||s.length>2?v8(r[2]||0,s[2]||0):null,u=l?function(m){return[].concat(E$(a(m)),[l(m)])}:a,c=1/Math.ceil(o/t),A=c;A<1;)n.push(u(A)),A+=c}n.push(r=s)}),n},ey=typeof window<"u"&&window.THREE?window.THREE:{BufferGeometry:Tn,Float32BufferAttribute:Ht},R$=new ey.BufferGeometry().setAttribute?"setAttribute":"addAttribute",dC=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:5;y$(this,e),n=g$(this,e),n.type="GeoJsonGeometry",n.parameters={geoJson:t,radius:r,resolution:s};var o=({Point:c,MultiPoint:A,LineString:m,MultiLineString:_,Polygon:b,MultiPolygon:M}[t.type]||function(){return[]})(t.coordinates,r),a=[],l=[],u=0;o.forEach(function(w){var T=a.length;ch({indices:a,vertices:l},w),n.addGroup(T,a.length-T,u++)}),a.length&&n.setIndex(a),l.length&&n[R$]("position",new ey.Float32BufferAttribute(l,3));function c(w,T){var N=am(w[1],w[0],T+(w[2]||0)),P=[];return[{vertices:N,indices:P}]}function A(w,T){var N={vertices:[],indices:[]};return w.map(function(P){return c(P,T)}).forEach(function(P){var I=uh(P,1),B=I[0];ch(N,B)}),[N]}function m(w,T){for(var N=MT(w,s).map(function(V){var U=uh(V,3),z=U[0],H=U[1],Q=U[2],Y=Q===void 0?0:Q;return am(H,z,T+Y)}),P=Ud([N]),I=P.vertices,B=Math.round(I.length/3),F=[],O=1;O<B;O++)F.push(O-1,O);return[{vertices:I,indices:F}]}function _(w,T){var N={vertices:[],indices:[]};return w.map(function(P){return m(P,T)}).forEach(function(P){var I=uh(P,1),B=I[0];ch(N,B)}),[N]}function b(w,T){for(var N=w.map(function(ee){return MT(ee,s).map(function(se){var pe=uh(se,3),re=pe[0],de=pe[1],ye=pe[2],Pe=ye===void 0?0:ye;return am(de,re,T+Pe)})}),P=Ud(N),I=P.vertices,B=P.holes,F=B[0]||1/0,O=I.slice(0,F*3),V=I.slice(F*3),U=new Set(B),z=Math.round(I.length/3),H=[],Q=[],Y=1;Y<z;Y++)U.has(Y)||(Y<F?H.push(Y-1,Y):Q.push(Y-1-F,Y-F));var ne=[{indices:H,vertices:O}];return B.length&&ne.push({indices:Q,vertices:V}),ne}function M(w,T){var N={vertices:[],indices:[]},P={vertices:[],indices:[]};w.map(function(B){return b(B,T)}).forEach(function(B){var F=uh(B,2),O=F[0],V=F[1];ch(N,O),V&&ch(P,V)});var I=[N];return P.vertices.length&&I.push(P),I}return n}return x$(e,i),v$(e)}(ey.BufferGeometry);function ch(i,e){var t=Math.round(i.vertices.length/3);ET(i.vertices,e.vertices),ET(i.indices,e.indices.map(function(n){return n+t}))}function ET(i,e){var t=_$(e),n;try{for(t.s();!(n=t.n()).done;){var r=n.value;i.push(r)}}catch(s){t.e(s)}finally{t.f()}}function am(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function C$(i,e,t=!0){if(!e||!e.isReady)throw new Error("BufferGeometryUtils: Initialized MikkTSpace library required.");if(!i.hasAttribute("position")||!i.hasAttribute("normal")||!i.hasAttribute("uv"))throw new Error('BufferGeometryUtils: Tangents require "position", "normal", and "uv" attributes.');function n(o){if(o.normalized||o.isInterleavedBufferAttribute){const a=new Float32Array(o.count*o.itemSize);for(let l=0,u=0;l<o.count;l++)a[u++]=o.getX(l),a[u++]=o.getY(l),o.itemSize>2&&(a[u++]=o.getZ(l));return a}return o.array instanceof Float32Array?o.array:new Float32Array(o.array)}const r=i.index?i.toNonIndexed():i,s=e.generateTangents(n(r.attributes.position),n(r.attributes.normal),n(r.attributes.uv));if(t)for(let o=3;o<s.length;o+=4)s[o]*=-1;return r.setAttribute("tangent",new oi(s,4)),i!==r&&i.copy(r),i}function P$(i,e=!1){const t=i[0].index!==null,n=new Set(Object.keys(i[0].attributes)),r=new Set(Object.keys(i[0].morphAttributes)),s={},o={},a=i[0].morphTargetsRelative,l=new Tn;let u=0;for(let c=0;c<i.length;++c){const A=i[c];let m=0;if(t!==(A.index!==null))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". All geometries must have compatible attributes; make sure index attribute exists among all geometries, or in none of them."),null;for(const _ in A.attributes){if(!n.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+'. All geometries must have compatible attributes; make sure "'+_+'" attribute exists among all geometries, or in none of them.'),null;s[_]===void 0&&(s[_]=[]),s[_].push(A.attributes[_]),m++}if(m!==n.size)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". Make sure all geometries have the same number of attributes."),null;if(a!==A.morphTargetsRelative)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". .morphTargetsRelative must be consistent throughout all geometries."),null;for(const _ in A.morphAttributes){if(!r.has(_))return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+".  .morphAttributes must be consistent throughout all geometries."),null;o[_]===void 0&&(o[_]=[]),o[_].push(A.morphAttributes[_])}if(e){let _;if(t)_=A.index.count;else if(A.attributes.position!==void 0)_=A.attributes.position.count;else return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed with geometry at index "+c+". The geometry must have either an index or a position attribute"),null;l.addGroup(u,_,c),u+=_}}if(t){let c=0;const A=[];for(let m=0;m<i.length;++m){const _=i[m].index;for(let b=0;b<_.count;++b)A.push(_.getX(b)+c);c+=i[m].attributes.position.count}l.setIndex(A)}for(const c in s){const A=ty(s[c]);if(!A)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" attribute."),null;l.setAttribute(c,A)}for(const c in o){const A=o[c][0].length;if(A===0)break;l.morphAttributes=l.morphAttributes||{},l.morphAttributes[c]=[];for(let m=0;m<A;++m){const _=[];for(let M=0;M<o[c].length;++M)_.push(o[c][M][m]);const b=ty(_);if(!b)return console.error("THREE.BufferGeometryUtils: .mergeGeometries() failed while trying to merge the "+c+" morphAttribute."),null;l.morphAttributes[c].push(b)}}return l}function ty(i){let e,t,n,r=-1,s=0;for(let u=0;u<i.length;++u){const c=i[u];if(e===void 0&&(e=c.array.constructor),e!==c.array.constructor)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.array must be of consistent array types across matching attributes."),null;if(t===void 0&&(t=c.itemSize),t!==c.itemSize)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.itemSize must be consistent across matching attributes."),null;if(n===void 0&&(n=c.normalized),n!==c.normalized)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.normalized must be consistent across matching attributes."),null;if(r===-1&&(r=c.gpuType),r!==c.gpuType)return console.error("THREE.BufferGeometryUtils: .mergeAttributes() failed. BufferAttribute.gpuType must be consistent across matching attributes."),null;s+=c.count*t}const o=new e(s),a=new oi(o,t,n);let l=0;for(let u=0;u<i.length;++u){const c=i[u];if(c.isInterleavedBufferAttribute){const A=l/t;for(let m=0,_=c.count;m<_;m++)for(let b=0;b<t;b++){const M=c.getComponent(m,b);a.setComponent(m+A,b,M)}}else o.set(c.array,l);l+=c.count*t}return r!==void 0&&(a.gpuType=r),a}function N$(i){return i.isInstancedInterleavedBufferAttribute||i.isInterleavedBufferAttribute?kd(i):i.isInstancedBufferAttribute?new Xo().copy(i):new oi().copy(i)}function I$(i){let e,t=0,n=0;for(let u=0,c=i.length;u<c;++u){const A=i[u];if(e===void 0&&(e=A.array.constructor),e!==A.array.constructor)return console.error("AttributeBuffers of different types cannot be interleaved"),null;t+=A.array.length,n+=A.itemSize}const r=new u5(new e(t),n);let s=0;const o=[],a=["getX","getY","getZ","getW"],l=["setX","setY","setZ","setW"];for(let u=0,c=i.length;u<c;u++){const A=i[u],m=A.itemSize,_=A.count,b=new bo(r,m,s,A.normalized);o.push(b),s+=m;for(let M=0;M<_;M++)for(let w=0;w<m;w++)b[l[w]](M,A[a[w]](M))}return o}function kd(i){const e=i.data.array.constructor,t=i.count,n=i.itemSize,r=i.normalized,s=new e(t*n);let o;i.isInstancedInterleavedBufferAttribute?o=new Xo(s,n,r,i.meshPerAttribute):o=new oi(s,n,r);for(let a=0;a<t;a++)o.setX(a,i.getX(a)),n>=2&&o.setY(a,i.getY(a)),n>=3&&o.setZ(a,i.getZ(a)),n>=4&&o.setW(a,i.getW(a));return o}function L$(i){const e=i.attributes,t=i.morphTargets,n=new Map;for(const r in e){const s=e[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,kd(s)),e[r]=n.get(s))}for(const r in t){const s=t[r];s.isInterleavedBufferAttribute&&(n.has(s)||n.set(s,kd(s)),t[r]=n.get(s))}}function D$(i){let e=0;for(const n in i.attributes){const r=i.getAttribute(n);e+=r.count*r.itemSize*r.array.BYTES_PER_ELEMENT}const t=i.getIndex();return e+=t?t.count*t.itemSize*t.array.BYTES_PER_ELEMENT:0,e}function B$(i,e=1e-4){e=Math.max(e,Number.EPSILON);const t={},n=i.getIndex(),r=i.getAttribute("position"),s=n?n.count:r.count;let o=0;const a=Object.keys(i.attributes),l={},u={},c=[],A=["getX","getY","getZ","getW"],m=["setX","setY","setZ","setW"];for(let N=0,P=a.length;N<P;N++){const I=a[N],B=i.attributes[I];l[I]=new B.constructor(new B.array.constructor(B.count*B.itemSize),B.itemSize,B.normalized);const F=i.morphAttributes[I];F&&(u[I]||(u[I]=[]),F.forEach((O,V)=>{const U=new O.array.constructor(O.count*O.itemSize);u[I][V]=new O.constructor(U,O.itemSize,O.normalized)}))}const _=e*.5,b=Math.log10(1/e),M=Math.pow(10,b),w=_*M;for(let N=0;N<s;N++){const P=n?n.getX(N):N;let I="";for(let B=0,F=a.length;B<F;B++){const O=a[B],V=i.getAttribute(O),U=V.itemSize;for(let z=0;z<U;z++)I+=`${~~(V[A[z]](P)*M+w)},`}if(I in t)c.push(t[I]);else{for(let B=0,F=a.length;B<F;B++){const O=a[B],V=i.getAttribute(O),U=i.morphAttributes[O],z=V.itemSize,H=l[O],Q=u[O];for(let Y=0;Y<z;Y++){const ne=A[Y],ee=m[Y];if(H[ee](o,V[ne](P)),U)for(let se=0,pe=U.length;se<pe;se++)Q[se][ee](o,U[se][ne](P))}}t[I]=o,c.push(o),o++}}const T=i.clone();for(const N in i.attributes){const P=l[N];if(T.setAttribute(N,new P.constructor(P.array.slice(0,o*P.itemSize),P.itemSize,P.normalized)),N in u)for(let I=0;I<u[N].length;I++){const B=u[N][I];T.morphAttributes[N][I]=new B.constructor(B.array.slice(0,o*B.itemSize),B.itemSize,B.normalized)}}return T.setIndex(c),T}function F$(i,e){if(e===sE)return console.warn("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Geometry already defined as triangles."),i;if(e===dg||e===oE){let t=i.getIndex();if(t===null){const o=[],a=i.getAttribute("position");if(a!==void 0){for(let l=0;l<a.count;l++)o.push(l);i.setIndex(o),t=i.getIndex()}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Undefined position attribute. Processing not possible."),i}const n=t.count-2,r=[];if(e===dg)for(let o=1;o<=n;o++)r.push(t.getX(0)),r.push(t.getX(o)),r.push(t.getX(o+1));else for(let o=0;o<n;o++)o%2===0?(r.push(t.getX(o)),r.push(t.getX(o+1)),r.push(t.getX(o+2))):(r.push(t.getX(o+2)),r.push(t.getX(o+1)),r.push(t.getX(o)));r.length/3!==n&&console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unable to generate correct amount of triangles.");const s=i.clone();return s.setIndex(r),s.clearGroups(),s}else return console.error("THREE.BufferGeometryUtils.toTrianglesDrawMode(): Unknown draw mode:",e),i}function U$(i){const e=new J,t=new J,n=new J,r=new J,s=new J,o=new J,a=new J,l=new J,u=new J;function c(de,ye,Pe,Qe,et,Pt,Ne,nt){e.fromBufferAttribute(ye,et),t.fromBufferAttribute(ye,Pt),n.fromBufferAttribute(ye,Ne);const tt=de.morphTargetInfluences;if(Pe&&tt){a.set(0,0,0),l.set(0,0,0),u.set(0,0,0);for(let Dt=0,Rt=Pe.length;Dt<Rt;Dt++){const It=tt[Dt],yn=Pe[Dt];It!==0&&(r.fromBufferAttribute(yn,et),s.fromBufferAttribute(yn,Pt),o.fromBufferAttribute(yn,Ne),Qe?(a.addScaledVector(r,It),l.addScaledVector(s,It),u.addScaledVector(o,It)):(a.addScaledVector(r.sub(e),It),l.addScaledVector(s.sub(t),It),u.addScaledVector(o.sub(n),It)))}e.add(a),t.add(l),n.add(u)}de.isSkinnedMesh&&(de.applyBoneTransform(et,e),de.applyBoneTransform(Pt,t),de.applyBoneTransform(Ne,n)),nt[et*3+0]=e.x,nt[et*3+1]=e.y,nt[et*3+2]=e.z,nt[Pt*3+0]=t.x,nt[Pt*3+1]=t.y,nt[Pt*3+2]=t.z,nt[Ne*3+0]=n.x,nt[Ne*3+1]=n.y,nt[Ne*3+2]=n.z}const A=i.geometry,m=i.material;let _,b,M;const w=A.index,T=A.attributes.position,N=A.morphAttributes.position,P=A.morphTargetsRelative,I=A.attributes.normal,B=A.morphAttributes.position,F=A.groups,O=A.drawRange;let V,U,z,H,Q,Y,ne;const ee=new Float32Array(T.count*T.itemSize),se=new Float32Array(I.count*I.itemSize);if(w!==null)if(Array.isArray(m))for(V=0,z=F.length;V<z;V++)for(Q=F[V],Y=Math.max(Q.start,O.start),ne=Math.min(Q.start+Q.count,O.start+O.count),U=Y,H=ne;U<H;U+=3)_=w.getX(U),b=w.getX(U+1),M=w.getX(U+2),c(i,T,N,P,_,b,M,ee),c(i,I,B,P,_,b,M,se);else for(Y=Math.max(0,O.start),ne=Math.min(w.count,O.start+O.count),V=Y,z=ne;V<z;V+=3)_=w.getX(V),b=w.getX(V+1),M=w.getX(V+2),c(i,T,N,P,_,b,M,ee),c(i,I,B,P,_,b,M,se);else if(Array.isArray(m))for(V=0,z=F.length;V<z;V++)for(Q=F[V],Y=Math.max(Q.start,O.start),ne=Math.min(Q.start+Q.count,O.start+O.count),U=Y,H=ne;U<H;U+=3)_=U,b=U+1,M=U+2,c(i,T,N,P,_,b,M,ee),c(i,I,B,P,_,b,M,se);else for(Y=Math.max(0,O.start),ne=Math.min(T.count,O.start+O.count),V=Y,z=ne;V<z;V+=3)_=V,b=V+1,M=V+2,c(i,T,N,P,_,b,M,ee),c(i,I,B,P,_,b,M,se);const pe=new Ht(ee,3),re=new Ht(se,3);return{positionAttribute:T,normalAttribute:I,morphedPositionAttribute:pe,morphedNormalAttribute:re}}function O$(i){if(i.groups.length===0)return console.warn("THREE.BufferGeometryUtils.mergeGroups(): No groups are defined. Nothing to merge."),i;let e=i.groups;if(e=e.sort((o,a)=>o.materialIndex!==a.materialIndex?o.materialIndex-a.materialIndex:o.start-a.start),i.getIndex()===null){const o=i.getAttribute("position"),a=[];for(let l=0;l<o.count;l+=3)a.push(l,l+1,l+2);i.setIndex(a)}const t=i.getIndex(),n=[];for(let o=0;o<e.length;o++){const a=e[o],l=a.start,u=l+a.count;for(let c=l;c<u;c++)n.push(t.getX(c))}i.dispose(),i.setIndex(n);let r=0;for(let o=0;o<e.length;o++){const a=e[o];a.start=r,r+=a.count}let s=e[0];i.groups=[s];for(let o=1;o<e.length;o++){const a=e[o];s.materialIndex===a.materialIndex?s.count+=a.count:(s=a,i.groups.push(s))}return i}function k$(i,e=Math.PI/3){const t=Math.cos(e),n=(1+1e-10)*100,r=[new J,new J,new J],s=new J,o=new J,a=new J,l=new J;function u(M){const w=~~(M.x*n),T=~~(M.y*n),N=~~(M.z*n);return`${w},${T},${N}`}const c=i.index?i.toNonIndexed():i,A=c.attributes.position,m={};for(let M=0,w=A.count/3;M<w;M++){const T=3*M,N=r[0].fromBufferAttribute(A,T+0),P=r[1].fromBufferAttribute(A,T+1),I=r[2].fromBufferAttribute(A,T+2);s.subVectors(I,P),o.subVectors(N,P);const B=new J().crossVectors(s,o).normalize();for(let F=0;F<3;F++){const O=r[F],V=u(O);V in m||(m[V]=[]),m[V].push(B)}}const _=new Float32Array(A.count*3),b=new oi(_,3,!1);for(let M=0,w=A.count/3;M<w;M++){const T=3*M,N=r[0].fromBufferAttribute(A,T+0),P=r[1].fromBufferAttribute(A,T+1),I=r[2].fromBufferAttribute(A,T+2);s.subVectors(I,P),o.subVectors(N,P),a.crossVectors(s,o).normalize();for(let B=0;B<3;B++){const F=r[B],O=u(F),V=m[O];l.set(0,0,0);for(let U=0,z=V.length;U<z;U++){const H=V[U];a.dot(H)>t&&l.add(H)}l.normalize(),b.setXYZ(T+B,l.x,l.y,l.z)}}return c.setAttribute("normal",b),c}const r_=Object.freeze(Object.defineProperty({__proto__:null,computeMikkTSpaceTangents:C$,computeMorphedAttributes:U$,deepCloneAttribute:N$,deinterleaveAttribute:kd,deinterleaveGeometry:L$,estimateBytesUsed:D$,interleaveAttributes:I$,mergeAttributes:ty,mergeGeometries:P$,mergeGroups:O$,mergeVertices:B$,toCreasedNormals:k$,toTrianglesDrawMode:F$},Symbol.toStringTag,{value:"Module"}));var ct=function(i){return typeof i=="function"?i:typeof i=="string"?function(e){return e[i]}:function(e){return i}};function Vd(i){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Vd(i)}var V$=/^\s+/,z$=/\s+$/;function mn(i,e){if(i=i||"",e=e||{},i instanceof mn)return i;if(!(this instanceof mn))return new mn(i,e);var t=G$(i);this._originalInput=i,this._r=t.r,this._g=t.g,this._b=t.b,this._a=t.a,this._roundA=Math.round(100*this._a)/100,this._format=e.format||t.format,this._gradientType=e.gradientType,this._r<1&&(this._r=Math.round(this._r)),this._g<1&&(this._g=Math.round(this._g)),this._b<1&&(this._b=Math.round(this._b)),this._ok=t.ok}mn.prototype={isDark:function(){return this.getBrightness()<128},isLight:function(){return!this.isDark()},isValid:function(){return this._ok},getOriginalInput:function(){return this._originalInput},getFormat:function(){return this._format},getAlpha:function(){return this._a},getBrightness:function(){var e=this.toRgb();return(e.r*299+e.g*587+e.b*114)/1e3},getLuminance:function(){var e=this.toRgb(),t,n,r,s,o,a;return t=e.r/255,n=e.g/255,r=e.b/255,t<=.03928?s=t/12.92:s=Math.pow((t+.055)/1.055,2.4),n<=.03928?o=n/12.92:o=Math.pow((n+.055)/1.055,2.4),r<=.03928?a=r/12.92:a=Math.pow((r+.055)/1.055,2.4),.2126*s+.7152*o+.0722*a},setAlpha:function(e){return this._a=AC(e),this._roundA=Math.round(100*this._a)/100,this},toHsv:function(){var e=CT(this._r,this._g,this._b);return{h:e.h*360,s:e.s,v:e.v,a:this._a}},toHsvString:function(){var e=CT(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.v*100);return this._a==1?"hsv("+t+", "+n+"%, "+r+"%)":"hsva("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHsl:function(){var e=RT(this._r,this._g,this._b);return{h:e.h*360,s:e.s,l:e.l,a:this._a}},toHslString:function(){var e=RT(this._r,this._g,this._b),t=Math.round(e.h*360),n=Math.round(e.s*100),r=Math.round(e.l*100);return this._a==1?"hsl("+t+", "+n+"%, "+r+"%)":"hsla("+t+", "+n+"%, "+r+"%, "+this._roundA+")"},toHex:function(e){return PT(this._r,this._g,this._b,e)},toHexString:function(e){return"#"+this.toHex(e)},toHex8:function(e){return j$(this._r,this._g,this._b,this._a,e)},toHex8String:function(e){return"#"+this.toHex8(e)},toRgb:function(){return{r:Math.round(this._r),g:Math.round(this._g),b:Math.round(this._b),a:this._a}},toRgbString:function(){return this._a==1?"rgb("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+")":"rgba("+Math.round(this._r)+", "+Math.round(this._g)+", "+Math.round(this._b)+", "+this._roundA+")"},toPercentageRgb:function(){return{r:Math.round(dr(this._r,255)*100)+"%",g:Math.round(dr(this._g,255)*100)+"%",b:Math.round(dr(this._b,255)*100)+"%",a:this._a}},toPercentageRgbString:function(){return this._a==1?"rgb("+Math.round(dr(this._r,255)*100)+"%, "+Math.round(dr(this._g,255)*100)+"%, "+Math.round(dr(this._b,255)*100)+"%)":"rgba("+Math.round(dr(this._r,255)*100)+"%, "+Math.round(dr(this._g,255)*100)+"%, "+Math.round(dr(this._b,255)*100)+"%, "+this._roundA+")"},toName:function(){return this._a===0?"transparent":this._a<1?!1:rX[PT(this._r,this._g,this._b,!0)]||!1},toFilter:function(e){var t="#"+NT(this._r,this._g,this._b,this._a),n=t,r=this._gradientType?"GradientType = 1, ":"";if(e){var s=mn(e);n="#"+NT(s._r,s._g,s._b,s._a)}return"progid:DXImageTransform.Microsoft.gradient("+r+"startColorstr="+t+",endColorstr="+n+")"},toString:function(e){var t=!!e;e=e||this._format;var n=!1,r=this._a<1&&this._a>=0,s=!t&&r&&(e==="hex"||e==="hex6"||e==="hex3"||e==="hex4"||e==="hex8"||e==="name");return s?e==="name"&&this._a===0?this.toName():this.toRgbString():(e==="rgb"&&(n=this.toRgbString()),e==="prgb"&&(n=this.toPercentageRgbString()),(e==="hex"||e==="hex6")&&(n=this.toHexString()),e==="hex3"&&(n=this.toHexString(!0)),e==="hex4"&&(n=this.toHex8String(!0)),e==="hex8"&&(n=this.toHex8String()),e==="name"&&(n=this.toName()),e==="hsl"&&(n=this.toHslString()),e==="hsv"&&(n=this.toHsvString()),n||this.toHexString())},clone:function(){return mn(this.toString())},_applyModification:function(e,t){var n=e.apply(null,[this].concat([].slice.call(t)));return this._r=n._r,this._g=n._g,this._b=n._b,this.setAlpha(n._a),this},lighten:function(){return this._applyModification(Y$,arguments)},brighten:function(){return this._applyModification(K$,arguments)},darken:function(){return this._applyModification(Z$,arguments)},desaturate:function(){return this._applyModification($$,arguments)},saturate:function(){return this._applyModification(X$,arguments)},greyscale:function(){return this._applyModification(Q$,arguments)},spin:function(){return this._applyModification(J$,arguments)},_applyCombination:function(e,t){return e.apply(null,[this].concat([].slice.call(t)))},analogous:function(){return this._applyCombination(nX,arguments)},complement:function(){return this._applyCombination(eX,arguments)},monochromatic:function(){return this._applyCombination(iX,arguments)},splitcomplement:function(){return this._applyCombination(tX,arguments)},triad:function(){return this._applyCombination(IT,[3])},tetrad:function(){return this._applyCombination(IT,[4])}};mn.fromRatio=function(i,e){if(Vd(i)=="object"){var t={};for(var n in i)i.hasOwnProperty(n)&&(n==="a"?t[n]=i[n]:t[n]=kh(i[n]));i=t}return mn(i,e)};function G$(i){var e={r:0,g:0,b:0},t=1,n=null,r=null,s=null,o=!1,a=!1;return typeof i=="string"&&(i=lX(i)),Vd(i)=="object"&&(Ol(i.r)&&Ol(i.g)&&Ol(i.b)?(e=q$(i.r,i.g,i.b),o=!0,a=String(i.r).substr(-1)==="%"?"prgb":"rgb"):Ol(i.h)&&Ol(i.s)&&Ol(i.v)?(n=kh(i.s),r=kh(i.v),e=W$(i.h,n,r),o=!0,a="hsv"):Ol(i.h)&&Ol(i.s)&&Ol(i.l)&&(n=kh(i.s),s=kh(i.l),e=H$(i.h,n,s),o=!0,a="hsl"),i.hasOwnProperty("a")&&(t=i.a)),t=AC(t),{ok:o,format:i.format||a,r:Math.min(255,Math.max(e.r,0)),g:Math.min(255,Math.max(e.g,0)),b:Math.min(255,Math.max(e.b,0)),a:t}}function q$(i,e,t){return{r:dr(i,255)*255,g:dr(e,255)*255,b:dr(t,255)*255}}function RT(i,e,t){i=dr(i,255),e=dr(e,255),t=dr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,o,a=(n+r)/2;if(n==r)s=o=0;else{var l=n-r;switch(o=a>.5?l/(2-n-r):l/(n+r),n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:o,l:a}}function H$(i,e,t){var n,r,s;i=dr(i,360),e=dr(e,100),t=dr(t,100);function o(u,c,A){return A<0&&(A+=1),A>1&&(A-=1),A<1/6?u+(c-u)*6*A:A<1/2?c:A<2/3?u+(c-u)*(2/3-A)*6:u}if(e===0)n=r=s=t;else{var a=t<.5?t*(1+e):t+e-t*e,l=2*t-a;n=o(l,a,i+1/3),r=o(l,a,i),s=o(l,a,i-1/3)}return{r:n*255,g:r*255,b:s*255}}function CT(i,e,t){i=dr(i,255),e=dr(e,255),t=dr(t,255);var n=Math.max(i,e,t),r=Math.min(i,e,t),s,o,a=n,l=n-r;if(o=n===0?0:l/n,n==r)s=0;else{switch(n){case i:s=(e-t)/l+(e<t?6:0);break;case e:s=(t-i)/l+2;break;case t:s=(i-e)/l+4;break}s/=6}return{h:s,s:o,v:a}}function W$(i,e,t){i=dr(i,360)*6,e=dr(e,100),t=dr(t,100);var n=Math.floor(i),r=i-n,s=t*(1-e),o=t*(1-r*e),a=t*(1-(1-r)*e),l=n%6,u=[t,o,s,s,a,t][l],c=[a,t,t,o,s,s][l],A=[s,s,a,t,t,o][l];return{r:u*255,g:c*255,b:A*255}}function PT(i,e,t,n){var r=[N0(Math.round(i).toString(16)),N0(Math.round(e).toString(16)),N0(Math.round(t).toString(16))];return n&&r[0].charAt(0)==r[0].charAt(1)&&r[1].charAt(0)==r[1].charAt(1)&&r[2].charAt(0)==r[2].charAt(1)?r[0].charAt(0)+r[1].charAt(0)+r[2].charAt(0):r.join("")}function j$(i,e,t,n,r){var s=[N0(Math.round(i).toString(16)),N0(Math.round(e).toString(16)),N0(Math.round(t).toString(16)),N0(pC(n))];return r&&s[0].charAt(0)==s[0].charAt(1)&&s[1].charAt(0)==s[1].charAt(1)&&s[2].charAt(0)==s[2].charAt(1)&&s[3].charAt(0)==s[3].charAt(1)?s[0].charAt(0)+s[1].charAt(0)+s[2].charAt(0)+s[3].charAt(0):s.join("")}function NT(i,e,t,n){var r=[N0(pC(n)),N0(Math.round(i).toString(16)),N0(Math.round(e).toString(16)),N0(Math.round(t).toString(16))];return r.join("")}mn.equals=function(i,e){return!i||!e?!1:mn(i).toRgbString()==mn(e).toRgbString()};mn.random=function(){return mn.fromRatio({r:Math.random(),g:Math.random(),b:Math.random()})};function $$(i,e){e=e===0?0:e||10;var t=mn(i).toHsl();return t.s-=e/100,t.s=Z9(t.s),mn(t)}function X$(i,e){e=e===0?0:e||10;var t=mn(i).toHsl();return t.s+=e/100,t.s=Z9(t.s),mn(t)}function Q$(i){return mn(i).desaturate(100)}function Y$(i,e){e=e===0?0:e||10;var t=mn(i).toHsl();return t.l+=e/100,t.l=Z9(t.l),mn(t)}function K$(i,e){e=e===0?0:e||10;var t=mn(i).toRgb();return t.r=Math.max(0,Math.min(255,t.r-Math.round(255*-(e/100)))),t.g=Math.max(0,Math.min(255,t.g-Math.round(255*-(e/100)))),t.b=Math.max(0,Math.min(255,t.b-Math.round(255*-(e/100)))),mn(t)}function Z$(i,e){e=e===0?0:e||10;var t=mn(i).toHsl();return t.l-=e/100,t.l=Z9(t.l),mn(t)}function J$(i,e){var t=mn(i).toHsl(),n=(t.h+e)%360;return t.h=n<0?360+n:n,mn(t)}function eX(i){var e=mn(i).toHsl();return e.h=(e.h+180)%360,mn(e)}function IT(i,e){if(isNaN(e)||e<=0)throw new Error("Argument to polyad must be a positive number");for(var t=mn(i).toHsl(),n=[mn(i)],r=360/e,s=1;s<e;s++)n.push(mn({h:(t.h+s*r)%360,s:t.s,l:t.l}));return n}function tX(i){var e=mn(i).toHsl(),t=e.h;return[mn(i),mn({h:(t+72)%360,s:e.s,l:e.l}),mn({h:(t+216)%360,s:e.s,l:e.l})]}function nX(i,e,t){e=e||6,t=t||30;var n=mn(i).toHsl(),r=360/t,s=[mn(i)];for(n.h=(n.h-(r*e>>1)+720)%360;--e;)n.h=(n.h+r)%360,s.push(mn(n));return s}function iX(i,e){e=e||6;for(var t=mn(i).toHsv(),n=t.h,r=t.s,s=t.v,o=[],a=1/e;e--;)o.push(mn({h:n,s:r,v:s})),s=(s+a)%1;return o}mn.mix=function(i,e,t){t=t===0?0:t||50;var n=mn(i).toRgb(),r=mn(e).toRgb(),s=t/100,o={r:(r.r-n.r)*s+n.r,g:(r.g-n.g)*s+n.g,b:(r.b-n.b)*s+n.b,a:(r.a-n.a)*s+n.a};return mn(o)};mn.readability=function(i,e){var t=mn(i),n=mn(e);return(Math.max(t.getLuminance(),n.getLuminance())+.05)/(Math.min(t.getLuminance(),n.getLuminance())+.05)};mn.isReadable=function(i,e,t){var n=mn.readability(i,e),r,s;switch(s=!1,r=uX(t),r.level+r.size){case"AAsmall":case"AAAlarge":s=n>=4.5;break;case"AAlarge":s=n>=3;break;case"AAAsmall":s=n>=7;break}return s};mn.mostReadable=function(i,e,t){var n=null,r=0,s,o,a,l;t=t||{},o=t.includeFallbackColors,a=t.level,l=t.size;for(var u=0;u<e.length;u++)s=mn.readability(i,e[u]),s>r&&(r=s,n=mn(e[u]));return mn.isReadable(i,n,{level:a,size:l})||!o?n:(t.includeFallbackColors=!1,mn.mostReadable(i,["#fff","#000"],t))};var ny=mn.names={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"0ff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000",blanchedalmond:"ffebcd",blue:"00f",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",burntsienna:"ea7e5d",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"0ff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkgrey:"a9a9a9",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkslategrey:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dimgrey:"696969",dodgerblue:"1e90ff",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"f0f",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",grey:"808080",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgray:"d3d3d3",lightgreen:"90ee90",lightgrey:"d3d3d3",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslategray:"789",lightslategrey:"789",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"0f0",limegreen:"32cd32",linen:"faf0e6",magenta:"f0f",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370db",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"db7093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",rebeccapurple:"663399",red:"f00",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",slategrey:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",wheat:"f5deb3",white:"fff",whitesmoke:"f5f5f5",yellow:"ff0",yellowgreen:"9acd32"},rX=mn.hexNames=sX(ny);function sX(i){var e={};for(var t in i)i.hasOwnProperty(t)&&(e[i[t]]=t);return e}function AC(i){return i=parseFloat(i),(isNaN(i)||i<0||i>1)&&(i=1),i}function dr(i,e){oX(i)&&(i="100%");var t=aX(i);return i=Math.min(e,Math.max(0,parseFloat(i))),t&&(i=parseInt(i*e,10)/100),Math.abs(i-e)<1e-6?1:i%e/parseFloat(e)}function Z9(i){return Math.min(1,Math.max(0,i))}function fa(i){return parseInt(i,16)}function oX(i){return typeof i=="string"&&i.indexOf(".")!=-1&&parseFloat(i)===1}function aX(i){return typeof i=="string"&&i.indexOf("%")!=-1}function N0(i){return i.length==1?"0"+i:""+i}function kh(i){return i<=1&&(i=i*100+"%"),i}function pC(i){return Math.round(parseFloat(i)*255).toString(16)}function LT(i){return fa(i)/255}var T0=function(){var i="[-\\+]?\\d+%?",e="[-\\+]?\\d*\\.\\d+%?",t="(?:"+e+")|(?:"+i+")",n="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?",r="[\\s|\\(]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")[,|\\s]+("+t+")\\s*\\)?";return{CSS_UNIT:new RegExp(t),rgb:new RegExp("rgb"+n),rgba:new RegExp("rgba"+r),hsl:new RegExp("hsl"+n),hsla:new RegExp("hsla"+r),hsv:new RegExp("hsv"+n),hsva:new RegExp("hsva"+r),hex3:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex6:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/,hex4:/^#?([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})([0-9a-fA-F]{1})$/,hex8:/^#?([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})([0-9a-fA-F]{2})$/}}();function Ol(i){return!!T0.CSS_UNIT.exec(i)}function lX(i){i=i.replace(V$,"").replace(z$,"").toLowerCase();var e=!1;if(ny[i])i=ny[i],e=!0;else if(i=="transparent")return{r:0,g:0,b:0,a:0,format:"name"};var t;return(t=T0.rgb.exec(i))?{r:t[1],g:t[2],b:t[3]}:(t=T0.rgba.exec(i))?{r:t[1],g:t[2],b:t[3],a:t[4]}:(t=T0.hsl.exec(i))?{h:t[1],s:t[2],l:t[3]}:(t=T0.hsla.exec(i))?{h:t[1],s:t[2],l:t[3],a:t[4]}:(t=T0.hsv.exec(i))?{h:t[1],s:t[2],v:t[3]}:(t=T0.hsva.exec(i))?{h:t[1],s:t[2],v:t[3],a:t[4]}:(t=T0.hex8.exec(i))?{r:fa(t[1]),g:fa(t[2]),b:fa(t[3]),a:LT(t[4]),format:e?"name":"hex8"}:(t=T0.hex6.exec(i))?{r:fa(t[1]),g:fa(t[2]),b:fa(t[3]),format:e?"name":"hex"}:(t=T0.hex4.exec(i))?{r:fa(t[1]+""+t[1]),g:fa(t[2]+""+t[2]),b:fa(t[3]+""+t[3]),a:LT(t[4]+""+t[4]),format:e?"name":"hex8"}:(t=T0.hex3.exec(i))?{r:fa(t[1]+""+t[1]),g:fa(t[2]+""+t[2]),b:fa(t[3]+""+t[3]),format:e?"name":"hex"}:!1}function uX(i){var e,t;return i=i||{level:"AA",size:"small"},e=(i.level||"AA").toUpperCase(),t=(i.size||"small").toLowerCase(),e!=="AA"&&e!=="AAA"&&(e="AA"),t!=="small"&&t!=="large"&&(t="small"),{level:e,size:t}}function iy(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function cX(i){if(Array.isArray(i))return i}function hX(i){if(Array.isArray(i))return iy(i)}function mC(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function fX(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function dX(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Qs(i,e){return i.get(mC(i,e))}function k3(i,e,t){fX(i,e),e.set(i,t)}function of(i,e,t){return i.set(mC(i,e),t),t}function AX(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,SX(n.key),n)}}function pX(i,e,t){return e&&AX(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function mX(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function gX(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function yX(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vX(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _X(i,e){return cX(i)||gX(i,e)||gC(i,e)||yX()}function xX(i){return hX(i)||mX(i)||gC(i)||vX()}function bX(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function SX(i){var e=bX(i,"string");return typeof e=="symbol"?e:e+""}function gC(i,e){if(i){if(typeof i=="string")return iy(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?iy(i,e):void 0}}var V3=new WeakMap,hh=new WeakMap,z3=new WeakMap,lm=new WeakMap,um=new WeakMap,cm=new WeakMap,TX=function(){function i(){dX(this,i),k3(this,V3,new Map),k3(this,hh,new Map),k3(this,z3,function(e){return e}),k3(this,lm,function(){return{}}),k3(this,um,function(){}),k3(this,cm,function(){})}return pX(i,[{key:"getObj",value:function(t){return Qs(V3,this).get(Qs(z3,this).call(this,t))}},{key:"getData",value:function(t){return Qs(hh,this).get(t)}},{key:"entries",value:function(){return xX(Qs(hh,this).entries()).map(function(t){var n=_X(t,2),r=n[0],s=n[1];return[s,r]})}},{key:"id",value:function(t){return of(z3,this,ct(t)),this}},{key:"onCreateObj",value:function(t){return of(lm,this,t),this}},{key:"onUpdateObj",value:function(t){return of(um,this,t),this}},{key:"onRemoveObj",value:function(t){return of(cm,this,t),this}},{key:"digest",value:function(t){var n=this;t.filter(function(s){return!Qs(V3,n).has(Qs(z3,n).call(n,s))}).forEach(function(s){var o=Qs(lm,n).call(n,s);Qs(V3,n).set(Qs(z3,n).call(n,s),o),Qs(hh,n).set(o,s)});var r=new Map(t.map(function(s){return[Qs(z3,n).call(n,s),s]}));return Qs(V3,this).forEach(function(s,o){r.has(o)?Qs(um,n).call(n,s,r.get(o)):(Qs(cm,n).call(n,s,o),Qs(V3,n).delete(o),Qs(hh,n).delete(s))}),this}},{key:"clear",value:function(){return this.digest([]),this}}])}(),yC={exports:{}};(function(i,e){(function(t,n){i.exports=n()})(UB,function(){return function(t){function n(s){if(r[s])return r[s].exports;var o=r[s]={exports:{},id:s,loaded:!1};return t[s].call(o.exports,o,o.exports,n),o.loaded=!0,o.exports}var r={};return n.m=t,n.c=r,n.p="",n(0)}([function(t,n,r){var s=r(1),o=function(){function a(l,u,c){l===void 0&&(l=NaN),u===void 0&&(u=NaN),c===void 0&&(c=!1),this._minFPS=u,this._maxFPS=l,this._timeScale=1,this._currentTick=0,this._currentTime=0,this._tickDeltaTime=0,this._isRunning=!1,this._maxInterval=isNaN(this._minFPS)?NaN:1e3/this._minFPS,this._minInterval=isNaN(this._maxFPS)?NaN:1e3/this._maxFPS,this._onResume=new s.default,this._onPause=new s.default,this._onTick=new s.default,this._onTickOncePerFrame=new s.default,c||this.resume()}return a.prototype.updateOnce=function(l){l(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},a.prototype.resume=function(){this._isRunning||(this._isRunning=!0,this._lastTimeUpdated=this.getTimer(),this._onResume.dispatch(),this.animateOnce())},a.prototype.pause=function(){this._isRunning&&(this._isRunning=!1,this._onPause.dispatch(),window.cancelAnimationFrame(this._animationFrameHandle))},a.prototype.dispose=function(){this.pause(),this._onResume.removeAll(),this._onPause.removeAll(),this._onTick.removeAll()},Object.defineProperty(a.prototype,"currentTick",{get:function(){return this._currentTick},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"currentTimeSeconds",{get:function(){return this._currentTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"tickDeltaTimeSeconds",{get:function(){return this._tickDeltaTime/1e3},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"timeScale",{get:function(){return this._timeScale},set:function(l){this._timeScale!==l&&(this._timeScale=l)},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onResume",{get:function(){return this._onResume},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onPause",{get:function(){return this._onPause},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onTick",{get:function(){return this._onTick},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"onTickOncePerFrame",{get:function(){return this._onTickOncePerFrame},enumerable:!0,configurable:!0}),Object.defineProperty(a.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!0,configurable:!0}),a.prototype.animateOnce=function(){var l=this;this._animationFrameHandle=window.requestAnimationFrame(function(){return l.onFrame()})},a.prototype.onFrame=function(){if(this._now=this.getTimer(),this._frameDeltaTime=this._now-this._lastTimeUpdated,isNaN(this._minInterval)||this._frameDeltaTime>=this._minInterval)if(isNaN(this._maxInterval))this.update(this._frameDeltaTime*this._timeScale,!0),this._lastTimeUpdated=this._now;else for(this._interval=Math.min(this._frameDeltaTime,this._maxInterval);this._now>=this._lastTimeUpdated+this._interval;)this.update(this._interval*this._timeScale,this._now<=this._lastTimeUpdated+2*this._maxInterval),this._lastTimeUpdated+=this._interval;this._isRunning&&this.animateOnce()},a.prototype.update=function(l,u){u===void 0&&(u=!0),this._currentTick++,this._currentTime+=l,this._tickDeltaTime=l,this._onTick.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick),u&&this._onTickOncePerFrame.dispatch(this.currentTimeSeconds,this.tickDeltaTimeSeconds,this.currentTick)},a.prototype.getTimer=function(){return Date.now()},a}();Object.defineProperty(n,"__esModule",{value:!0}),n.default=o},function(t,n,r){(function(s,o){t.exports=o()})(this,function(){return function(s){function o(l){if(a[l])return a[l].exports;var u=a[l]={exports:{},id:l,loaded:!1};return s[l].call(u.exports,u,u.exports,o),u.loaded=!0,u.exports}var a={};return o.m=s,o.c=a,o.p="",o(0)}([function(s,o){var a=function(){function l(){this.functions=[]}return l.prototype.add=function(u){return this.functions.indexOf(u)===-1&&(this.functions.push(u),!0)},l.prototype.remove=function(u){var c=this.functions.indexOf(u);return c>-1&&(this.functions.splice(c,1),!0)},l.prototype.removeAll=function(){return this.functions.length>0&&(this.functions.length=0,!0)},l.prototype.dispatch=function(){for(var u=[],c=0;c<arguments.length;c++)u[c]=arguments[c];var A=this.functions.concat();A.forEach(function(m){m.apply(void 0,u)})},Object.defineProperty(l.prototype,"numItems",{get:function(){return this.functions.length},enumerable:!0,configurable:!0}),l}();Object.defineProperty(o,"__esModule",{value:!0}),o.default=a}])})}])})})(yC);var wX=yC.exports;const K4=$M(wX),Kl=11102230246251565e-32,Ys=134217729,MX=(3+8*Kl)*Kl;function hm(i,e,t,n,r){let s,o,a,l,u=e[0],c=n[0],A=0,m=0;c>u==c>-u?(s=u,u=e[++A]):(s=c,c=n[++m]);let _=0;if(A<i&&m<t)for(c>u==c>-u?(o=u+s,a=s-(o-u),u=e[++A]):(o=c+s,a=s-(o-c),c=n[++m]),s=o,a!==0&&(r[_++]=a);A<i&&m<t;)c>u==c>-u?(o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++A]):(o=s+c,l=o-s,a=s-(o-l)+(c-l),c=n[++m]),s=o,a!==0&&(r[_++]=a);for(;A<i;)o=s+u,l=o-s,a=s-(o-l)+(u-l),u=e[++A],s=o,a!==0&&(r[_++]=a);for(;m<t;)o=s+c,l=o-s,a=s-(o-l)+(c-l),c=n[++m],s=o,a!==0&&(r[_++]=a);return(s!==0||_===0)&&(r[_++]=s),_}function EX(i,e){let t=e[0];for(let n=1;n<i;n++)t+=e[n];return t}function o6(i){return new Float64Array(i)}const RX=(3+16*Kl)*Kl,CX=(2+12*Kl)*Kl,PX=(9+64*Kl)*Kl*Kl,G3=o6(4),DT=o6(8),BT=o6(12),FT=o6(16),co=o6(4);function NX(i,e,t,n,r,s,o){let a,l,u,c,A,m,_,b,M,w,T,N,P,I,B,F,O,V;const U=i-r,z=t-r,H=e-s,Q=n-s;I=U*Q,m=Ys*U,_=m-(m-U),b=U-_,m=Ys*Q,M=m-(m-Q),w=Q-M,B=b*w-(I-_*M-b*M-_*w),F=H*z,m=Ys*H,_=m-(m-H),b=H-_,m=Ys*z,M=m-(m-z),w=z-M,O=b*w-(F-_*M-b*M-_*w),T=B-O,A=B-T,G3[0]=B-(T+A)+(A-O),N=I+T,A=N-I,P=I-(N-A)+(T-A),T=P-F,A=P-T,G3[1]=P-(T+A)+(A-F),V=N+T,A=V-N,G3[2]=N-(V-A)+(T-A),G3[3]=V;let Y=EX(4,G3),ne=CX*o;if(Y>=ne||-Y>=ne||(A=i-U,a=i-(U+A)+(A-r),A=t-z,u=t-(z+A)+(A-r),A=e-H,l=e-(H+A)+(A-s),A=n-Q,c=n-(Q+A)+(A-s),a===0&&l===0&&u===0&&c===0)||(ne=PX*o+MX*Math.abs(Y),Y+=U*c+Q*a-(H*u+z*l),Y>=ne||-Y>=ne))return Y;I=a*Q,m=Ys*a,_=m-(m-a),b=a-_,m=Ys*Q,M=m-(m-Q),w=Q-M,B=b*w-(I-_*M-b*M-_*w),F=l*z,m=Ys*l,_=m-(m-l),b=l-_,m=Ys*z,M=m-(m-z),w=z-M,O=b*w-(F-_*M-b*M-_*w),T=B-O,A=B-T,co[0]=B-(T+A)+(A-O),N=I+T,A=N-I,P=I-(N-A)+(T-A),T=P-F,A=P-T,co[1]=P-(T+A)+(A-F),V=N+T,A=V-N,co[2]=N-(V-A)+(T-A),co[3]=V;const ee=hm(4,G3,4,co,DT);I=U*c,m=Ys*U,_=m-(m-U),b=U-_,m=Ys*c,M=m-(m-c),w=c-M,B=b*w-(I-_*M-b*M-_*w),F=H*u,m=Ys*H,_=m-(m-H),b=H-_,m=Ys*u,M=m-(m-u),w=u-M,O=b*w-(F-_*M-b*M-_*w),T=B-O,A=B-T,co[0]=B-(T+A)+(A-O),N=I+T,A=N-I,P=I-(N-A)+(T-A),T=P-F,A=P-T,co[1]=P-(T+A)+(A-F),V=N+T,A=V-N,co[2]=N-(V-A)+(T-A),co[3]=V;const se=hm(ee,DT,4,co,BT);I=a*c,m=Ys*a,_=m-(m-a),b=a-_,m=Ys*c,M=m-(m-c),w=c-M,B=b*w-(I-_*M-b*M-_*w),F=l*u,m=Ys*l,_=m-(m-l),b=l-_,m=Ys*u,M=m-(m-u),w=u-M,O=b*w-(F-_*M-b*M-_*w),T=B-O,A=B-T,co[0]=B-(T+A)+(A-O),N=I+T,A=N-I,P=I-(N-A)+(T-A),T=P-F,A=P-T,co[1]=P-(T+A)+(A-F),V=N+T,A=V-N,co[2]=N-(V-A)+(T-A),co[3]=V;const pe=hm(se,BT,4,co,FT);return FT[pe-1]}function Vh(i,e,t,n,r,s){const o=(e-s)*(t-r),a=(i-r)*(n-s),l=o-a,u=Math.abs(o+a);return Math.abs(l)>=RX*u?l:-NX(i,e,t,n,r,s,u)}const UT=Math.pow(2,-52),af=new Uint32Array(512);class T8{static from(e,t=FX,n=UX){const r=e.length,s=new Float64Array(r*2);for(let o=0;o<r;o++){const a=e[o];s[2*o]=t(a),s[2*o+1]=n(a)}return new T8(s)}constructor(e){const t=e.length>>1;if(t>0&&typeof e[0]!="number")throw new Error("Expected coords to contain numbers.");this.coords=e;const n=Math.max(2*t-5,0);this._triangles=new Uint32Array(n*3),this._halfedges=new Int32Array(n*3),this._hashSize=Math.ceil(Math.sqrt(t)),this._hullPrev=new Uint32Array(t),this._hullNext=new Uint32Array(t),this._hullTri=new Uint32Array(t),this._hullHash=new Int32Array(this._hashSize),this._ids=new Uint32Array(t),this._dists=new Float64Array(t),this.update()}update(){const{coords:e,_hullPrev:t,_hullNext:n,_hullTri:r,_hullHash:s}=this,o=e.length>>1;let a=1/0,l=1/0,u=-1/0,c=-1/0;for(let U=0;U<o;U++){const z=e[2*U],H=e[2*U+1];z<a&&(a=z),H<l&&(l=H),z>u&&(u=z),H>c&&(c=H),this._ids[U]=U}const A=(a+u)/2,m=(l+c)/2;let _,b,M;for(let U=0,z=1/0;U<o;U++){const H=fm(A,m,e[2*U],e[2*U+1]);H<z&&(_=U,z=H)}const w=e[2*_],T=e[2*_+1];for(let U=0,z=1/0;U<o;U++){if(U===_)continue;const H=fm(w,T,e[2*U],e[2*U+1]);H<z&&H>0&&(b=U,z=H)}let N=e[2*b],P=e[2*b+1],I=1/0;for(let U=0;U<o;U++){if(U===_||U===b)continue;const z=DX(w,T,N,P,e[2*U],e[2*U+1]);z<I&&(M=U,I=z)}let B=e[2*M],F=e[2*M+1];if(I===1/0){for(let H=0;H<o;H++)this._dists[H]=e[2*H]-e[0]||e[2*H+1]-e[1];h4(this._ids,this._dists,0,o-1);const U=new Uint32Array(o);let z=0;for(let H=0,Q=-1/0;H<o;H++){const Y=this._ids[H],ne=this._dists[Y];ne>Q&&(U[z++]=Y,Q=ne)}this.hull=U.subarray(0,z),this.triangles=new Uint32Array(0),this.halfedges=new Uint32Array(0);return}if(Vh(w,T,N,P,B,F)<0){const U=b,z=N,H=P;b=M,N=B,P=F,M=U,B=z,F=H}const O=BX(w,T,N,P,B,F);this._cx=O.x,this._cy=O.y;for(let U=0;U<o;U++)this._dists[U]=fm(e[2*U],e[2*U+1],O.x,O.y);h4(this._ids,this._dists,0,o-1),this._hullStart=_;let V=3;n[_]=t[M]=b,n[b]=t[_]=M,n[M]=t[b]=_,r[_]=0,r[b]=1,r[M]=2,s.fill(-1),s[this._hashKey(w,T)]=_,s[this._hashKey(N,P)]=b,s[this._hashKey(B,F)]=M,this.trianglesLen=0,this._addTriangle(_,b,M,-1,-1,-1);for(let U=0,z,H;U<this._ids.length;U++){const Q=this._ids[U],Y=e[2*Q],ne=e[2*Q+1];if(U>0&&Math.abs(Y-z)<=UT&&Math.abs(ne-H)<=UT||(z=Y,H=ne,Q===_||Q===b||Q===M))continue;let ee=0;for(let ye=0,Pe=this._hashKey(Y,ne);ye<this._hashSize&&(ee=s[(Pe+ye)%this._hashSize],!(ee!==-1&&ee!==n[ee]));ye++);ee=t[ee];let se=ee,pe;for(;pe=n[se],Vh(Y,ne,e[2*se],e[2*se+1],e[2*pe],e[2*pe+1])>=0;)if(se=pe,se===ee){se=-1;break}if(se===-1)continue;let re=this._addTriangle(se,Q,n[se],-1,-1,r[se]);r[Q]=this._legalize(re+2),r[se]=re,V++;let de=n[se];for(;pe=n[de],Vh(Y,ne,e[2*de],e[2*de+1],e[2*pe],e[2*pe+1])<0;)re=this._addTriangle(de,Q,pe,r[Q],-1,r[de]),r[Q]=this._legalize(re+2),n[de]=de,V--,de=pe;if(se===ee)for(;pe=t[se],Vh(Y,ne,e[2*pe],e[2*pe+1],e[2*se],e[2*se+1])<0;)re=this._addTriangle(pe,Q,se,-1,r[se],r[pe]),this._legalize(re+2),r[pe]=re,n[se]=se,V--,se=pe;this._hullStart=t[Q]=se,n[se]=t[de]=Q,n[Q]=de,s[this._hashKey(Y,ne)]=Q,s[this._hashKey(e[2*se],e[2*se+1])]=se}this.hull=new Uint32Array(V);for(let U=0,z=this._hullStart;U<V;U++)this.hull[U]=z,z=n[z];this.triangles=this._triangles.subarray(0,this.trianglesLen),this.halfedges=this._halfedges.subarray(0,this.trianglesLen)}_hashKey(e,t){return Math.floor(IX(e-this._cx,t-this._cy)*this._hashSize)%this._hashSize}_legalize(e){const{_triangles:t,_halfedges:n,coords:r}=this;let s=0,o=0;for(;;){const a=n[e],l=e-e%3;if(o=l+(e+2)%3,a===-1){if(s===0)break;e=af[--s];continue}const u=a-a%3,c=l+(e+1)%3,A=u+(a+2)%3,m=t[o],_=t[e],b=t[c],M=t[A];if(LX(r[2*m],r[2*m+1],r[2*_],r[2*_+1],r[2*b],r[2*b+1],r[2*M],r[2*M+1])){t[e]=M,t[a]=m;const T=n[A];if(T===-1){let P=this._hullStart;do{if(this._hullTri[P]===A){this._hullTri[P]=e;break}P=this._hullPrev[P]}while(P!==this._hullStart)}this._link(e,T),this._link(a,n[o]),this._link(o,A);const N=u+(a+1)%3;s<af.length&&(af[s++]=N)}else{if(s===0)break;e=af[--s]}}return o}_link(e,t){this._halfedges[e]=t,t!==-1&&(this._halfedges[t]=e)}_addTriangle(e,t,n,r,s,o){const a=this.trianglesLen;return this._triangles[a]=e,this._triangles[a+1]=t,this._triangles[a+2]=n,this._link(a,r),this._link(a+1,s),this._link(a+2,o),this.trianglesLen+=3,a}}function IX(i,e){const t=i/(Math.abs(i)+Math.abs(e));return(e>0?3-t:1+t)/4}function fm(i,e,t,n){const r=i-t,s=e-n;return r*r+s*s}function LX(i,e,t,n,r,s,o,a){const l=i-o,u=e-a,c=t-o,A=n-a,m=r-o,_=s-a,b=l*l+u*u,M=c*c+A*A,w=m*m+_*_;return l*(A*w-M*_)-u*(c*w-M*m)+b*(c*_-A*m)<0}function DX(i,e,t,n,r,s){const o=t-i,a=n-e,l=r-i,u=s-e,c=o*o+a*a,A=l*l+u*u,m=.5/(o*u-a*l),_=(u*c-a*A)*m,b=(o*A-l*c)*m;return _*_+b*b}function BX(i,e,t,n,r,s){const o=t-i,a=n-e,l=r-i,u=s-e,c=o*o+a*a,A=l*l+u*u,m=.5/(o*u-a*l),_=i+(u*c-a*A)*m,b=e+(o*A-l*c)*m;return{x:_,y:b}}function h4(i,e,t,n){if(n-t<=20)for(let r=t+1;r<=n;r++){const s=i[r],o=e[s];let a=r-1;for(;a>=t&&e[i[a]]>o;)i[a+1]=i[a--];i[a+1]=s}else{const r=t+n>>1;let s=t+1,o=n;fh(i,r,s),e[i[t]]>e[i[n]]&&fh(i,t,n),e[i[s]]>e[i[n]]&&fh(i,s,n),e[i[t]]>e[i[s]]&&fh(i,t,s);const a=i[s],l=e[a];for(;;){do s++;while(e[i[s]]<l);do o--;while(e[i[o]]>l);if(o<s)break;fh(i,s,o)}i[t+1]=i[o],i[o]=a,n-s+1>=o-t?(h4(i,e,s,n),h4(i,e,t,o-1)):(h4(i,e,t,o-1),h4(i,e,s,n))}}function fh(i,e,t){const n=i[e];i[e]=i[t],i[t]=n}function FX(i){return i[0]}function UX(i){return i[1]}function OX(i,e){var t,n,r=0,s,o,a,l,u,c,A,m=i[0],_=i[1],b=e.length;for(t=0;t<b;t++){n=0;var M=e[t],w=M.length-1;if(c=M[0],c[0]!==M[w][0]&&c[1]!==M[w][1])throw new Error("First and last coordinates in a ring must be the same");for(o=c[0]-m,a=c[1]-_,n;n<w;n++){if(A=M[n+1],l=A[0]-m,u=A[1]-_,a===0&&u===0){if(l<=0&&o>=0||o<=0&&l>=0)return 0}else if(u>=0&&a<=0||u<=0&&a>=0){if(s=Vh(o,l,a,u,0,0),s===0)return 0;(s>0&&u>0&&a<=0||s<0&&u<=0&&a>0)&&r++}c=A,a=u,o=l}}return r%2!==0}function kX(i){if(!i)throw new Error("coord is required");if(!Array.isArray(i)){if(i.type==="Feature"&&i.geometry!==null&&i.geometry.type==="Point")return[...i.geometry.coordinates];if(i.type==="Point")return[...i.coordinates]}if(Array.isArray(i)&&i.length>=2&&!Array.isArray(i[0])&&!Array.isArray(i[1]))return[...i];throw new Error("coord must be GeoJSON Point or an Array of numbers")}function VX(i){return i.type==="Feature"?i.geometry:i}function zX(i,e,t={}){if(!i)throw new Error("point is required");if(!e)throw new Error("polygon is required");const n=kX(i),r=VX(e),s=r.type,o=e.bbox;let a=r.coordinates;if(o&&GX(n,o)===!1)return!1;s==="Polygon"&&(a=[a]);let l=!1;for(var u=0;u<a.length;++u){const c=OX(n,a[u]);if(c===0)return!t.ignoreBoundary;c&&(l=!0)}return l}function GX(i,e){return e[0]<=i[0]&&e[1]<=i[1]&&e[2]>=i[0]&&e[3]>=i[1]}var qX=zX;const OT=1e-6;class U2{constructor(){this._x0=this._y0=this._x1=this._y1=null,this._=""}moveTo(e,t){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")}lineTo(e,t){this._+=`L${this._x1=+e},${this._y1=+t}`}arc(e,t,n){e=+e,t=+t,n=+n;const r=e+n,s=t;if(n<0)throw new Error("negative radius");this._x1===null?this._+=`M${r},${s}`:(Math.abs(this._x1-r)>OT||Math.abs(this._y1-s)>OT)&&(this._+="L"+r+","+s),n&&(this._+=`A${n},${n},0,1,1,${e-n},${t}A${n},${n},0,1,1,${this._x1=r},${this._y1=s}`)}rect(e,t,n,r){this._+=`M${this._x0=this._x1=+e},${this._y0=this._y1=+t}h${+n}v${+r}h${-n}Z`}value(){return this._||null}}class ry{constructor(){this._=[]}moveTo(e,t){this._.push([e,t])}closePath(){this._.push(this._[0].slice())}lineTo(e,t){this._.push([e,t])}value(){return this._.length?this._:null}}class HX{constructor(e,[t,n,r,s]=[0,0,960,500]){if(!((r=+r)>=(t=+t))||!((s=+s)>=(n=+n)))throw new Error("invalid bounds");this.delaunay=e,this._circumcenters=new Float64Array(e.points.length*2),this.vectors=new Float64Array(e.points.length*2),this.xmax=r,this.xmin=t,this.ymax=s,this.ymin=n,this._init()}update(){return this.delaunay.update(),this._init(),this}_init(){const{delaunay:{points:e,hull:t,triangles:n},vectors:r}=this;let s,o;const a=this.circumcenters=this._circumcenters.subarray(0,n.length/3*2);for(let M=0,w=0,T=n.length,N,P;M<T;M+=3,w+=2){const I=n[M]*2,B=n[M+1]*2,F=n[M+2]*2,O=e[I],V=e[I+1],U=e[B],z=e[B+1],H=e[F],Q=e[F+1],Y=U-O,ne=z-V,ee=H-O,se=Q-V,pe=(Y*se-ne*ee)*2;if(Math.abs(pe)<1e-9){if(s===void 0){s=o=0;for(const de of t)s+=e[de*2],o+=e[de*2+1];s/=t.length,o/=t.length}const re=1e9*Math.sign((s-O)*se-(o-V)*ee);N=(O+H)/2-re*se,P=(V+Q)/2+re*ee}else{const re=1/pe,de=Y*Y+ne*ne,ye=ee*ee+se*se;N=O+(se*de-ne*ye)*re,P=V+(Y*ye-ee*de)*re}a[w]=N,a[w+1]=P}let l=t[t.length-1],u,c=l*4,A,m=e[2*l],_,b=e[2*l+1];r.fill(0);for(let M=0;M<t.length;++M)l=t[M],u=c,A=m,_=b,c=l*4,m=e[2*l],b=e[2*l+1],r[u+2]=r[c]=_-b,r[u+3]=r[c+1]=m-A}render(e){const t=e==null?e=new U2:void 0,{delaunay:{halfedges:n,inedges:r,hull:s},circumcenters:o,vectors:a}=this;if(s.length<=1)return null;for(let c=0,A=n.length;c<A;++c){const m=n[c];if(m<c)continue;const _=Math.floor(c/3)*2,b=Math.floor(m/3)*2,M=o[_],w=o[_+1],T=o[b],N=o[b+1];this._renderSegment(M,w,T,N,e)}let l,u=s[s.length-1];for(let c=0;c<s.length;++c){l=u,u=s[c];const A=Math.floor(r[u]/3)*2,m=o[A],_=o[A+1],b=l*4,M=this._project(m,_,a[b+2],a[b+3]);M&&this._renderSegment(m,_,M[0],M[1],e)}return t&&t.value()}renderBounds(e){const t=e==null?e=new U2:void 0;return e.rect(this.xmin,this.ymin,this.xmax-this.xmin,this.ymax-this.ymin),t&&t.value()}renderCell(e,t){const n=t==null?t=new U2:void 0,r=this._clip(e);if(r===null||!r.length)return;t.moveTo(r[0],r[1]);let s=r.length;for(;r[0]===r[s-2]&&r[1]===r[s-1]&&s>1;)s-=2;for(let o=2;o<s;o+=2)(r[o]!==r[o-2]||r[o+1]!==r[o-1])&&t.lineTo(r[o],r[o+1]);return t.closePath(),n&&n.value()}*cellPolygons(){const{delaunay:{points:e}}=this;for(let t=0,n=e.length/2;t<n;++t){const r=this.cellPolygon(t);r&&(r.index=t,yield r)}}cellPolygon(e){const t=new ry;return this.renderCell(e,t),t.value()}_renderSegment(e,t,n,r,s){let o;const a=this._regioncode(e,t),l=this._regioncode(n,r);a===0&&l===0?(s.moveTo(e,t),s.lineTo(n,r)):(o=this._clipSegment(e,t,n,r,a,l))&&(s.moveTo(o[0],o[1]),s.lineTo(o[2],o[3]))}contains(e,t,n){return t=+t,t!==t||(n=+n,n!==n)?!1:this.delaunay._step(e,t,n)===e}*neighbors(e){const t=this._clip(e);if(t)for(const n of this.delaunay.neighbors(e)){const r=this._clip(n);if(r){e:for(let s=0,o=t.length;s<o;s+=2)for(let a=0,l=r.length;a<l;a+=2)if(t[s]===r[a]&&t[s+1]===r[a+1]&&t[(s+2)%o]===r[(a+l-2)%l]&&t[(s+3)%o]===r[(a+l-1)%l]){yield n;break e}}}}_cell(e){const{circumcenters:t,delaunay:{inedges:n,halfedges:r,triangles:s}}=this,o=n[e];if(o===-1)return null;const a=[];let l=o;do{const u=Math.floor(l/3);if(a.push(t[u*2],t[u*2+1]),l=l%3===2?l-2:l+1,s[l]!==e)break;l=r[l]}while(l!==o&&l!==-1);return a}_clip(e){if(e===0&&this.delaunay.hull.length===1)return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];const t=this._cell(e);if(t===null)return null;const{vectors:n}=this,r=e*4;return this._simplify(n[r]||n[r+1]?this._clipInfinite(e,t,n[r],n[r+1],n[r+2],n[r+3]):this._clipFinite(e,t))}_clipFinite(e,t){const n=t.length;let r=null,s,o,a=t[n-2],l=t[n-1],u,c=this._regioncode(a,l),A,m=0;for(let _=0;_<n;_+=2)if(s=a,o=l,a=t[_],l=t[_+1],u=c,c=this._regioncode(a,l),u===0&&c===0)A=m,m=0,r?r.push(a,l):r=[a,l];else{let b,M,w,T,N;if(u===0){if((b=this._clipSegment(s,o,a,l,u,c))===null)continue;[M,w,T,N]=b}else{if((b=this._clipSegment(a,l,s,o,c,u))===null)continue;[T,N,M,w]=b,A=m,m=this._edgecode(M,w),A&&m&&this._edge(e,A,m,r,r.length),r?r.push(M,w):r=[M,w]}A=m,m=this._edgecode(T,N),A&&m&&this._edge(e,A,m,r,r.length),r?r.push(T,N):r=[T,N]}if(r)A=m,m=this._edgecode(r[0],r[1]),A&&m&&this._edge(e,A,m,r,r.length);else if(this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2))return[this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax,this.xmin,this.ymin];return r}_clipSegment(e,t,n,r,s,o){const a=s<o;for(a&&([e,t,n,r,s,o]=[n,r,e,t,o,s]);;){if(s===0&&o===0)return a?[n,r,e,t]:[e,t,n,r];if(s&o)return null;let l,u,c=s||o;c&8?(l=e+(n-e)*(this.ymax-t)/(r-t),u=this.ymax):c&4?(l=e+(n-e)*(this.ymin-t)/(r-t),u=this.ymin):c&2?(u=t+(r-t)*(this.xmax-e)/(n-e),l=this.xmax):(u=t+(r-t)*(this.xmin-e)/(n-e),l=this.xmin),s?(e=l,t=u,s=this._regioncode(e,t)):(n=l,r=u,o=this._regioncode(n,r))}}_clipInfinite(e,t,n,r,s,o){let a=Array.from(t),l;if((l=this._project(a[0],a[1],n,r))&&a.unshift(l[0],l[1]),(l=this._project(a[a.length-2],a[a.length-1],s,o))&&a.push(l[0],l[1]),a=this._clipFinite(e,a))for(let u=0,c=a.length,A,m=this._edgecode(a[c-2],a[c-1]);u<c;u+=2)A=m,m=this._edgecode(a[u],a[u+1]),A&&m&&(u=this._edge(e,A,m,a,u),c=a.length);else this.contains(e,(this.xmin+this.xmax)/2,(this.ymin+this.ymax)/2)&&(a=[this.xmin,this.ymin,this.xmax,this.ymin,this.xmax,this.ymax,this.xmin,this.ymax]);return a}_edge(e,t,n,r,s){for(;t!==n;){let o,a;switch(t){case 5:t=4;continue;case 4:t=6,o=this.xmax,a=this.ymin;break;case 6:t=2;continue;case 2:t=10,o=this.xmax,a=this.ymax;break;case 10:t=8;continue;case 8:t=9,o=this.xmin,a=this.ymax;break;case 9:t=1;continue;case 1:t=5,o=this.xmin,a=this.ymin;break}(r[s]!==o||r[s+1]!==a)&&this.contains(e,o,a)&&(r.splice(s,0,o,a),s+=2)}return s}_project(e,t,n,r){let s=1/0,o,a,l;if(r<0){if(t<=this.ymin)return null;(o=(this.ymin-t)/r)<s&&(l=this.ymin,a=e+(s=o)*n)}else if(r>0){if(t>=this.ymax)return null;(o=(this.ymax-t)/r)<s&&(l=this.ymax,a=e+(s=o)*n)}if(n>0){if(e>=this.xmax)return null;(o=(this.xmax-e)/n)<s&&(a=this.xmax,l=t+(s=o)*r)}else if(n<0){if(e<=this.xmin)return null;(o=(this.xmin-e)/n)<s&&(a=this.xmin,l=t+(s=o)*r)}return[a,l]}_edgecode(e,t){return(e===this.xmin?1:e===this.xmax?2:0)|(t===this.ymin?4:t===this.ymax?8:0)}_regioncode(e,t){return(e<this.xmin?1:e>this.xmax?2:0)|(t<this.ymin?4:t>this.ymax?8:0)}_simplify(e){if(e&&e.length>4){for(let t=0;t<e.length;t+=2){const n=(t+2)%e.length,r=(t+4)%e.length;(e[t]===e[n]&&e[n]===e[r]||e[t+1]===e[n+1]&&e[n+1]===e[r+1])&&(e.splice(n,2),t-=2)}e.length||(e=null)}return e}}const WX=2*Math.PI,q3=Math.pow;function jX(i){return i[0]}function $X(i){return i[1]}function XX(i){const{triangles:e,coords:t}=i;for(let n=0;n<e.length;n+=3){const r=2*e[n],s=2*e[n+1],o=2*e[n+2];if((t[o]-t[r])*(t[s+1]-t[r+1])-(t[s]-t[r])*(t[o+1]-t[r+1])>1e-10)return!1}return!0}function QX(i,e,t){return[i+Math.sin(i+e)*t,e+Math.cos(i-e)*t]}class s_{static from(e,t=jX,n=$X,r){return new s_("length"in e?YX(e,t,n,r):Float64Array.from(KX(e,t,n,r)))}constructor(e){this._delaunator=new T8(e),this.inedges=new Int32Array(e.length/2),this._hullIndex=new Int32Array(e.length/2),this.points=this._delaunator.coords,this._init()}update(){return this._delaunator.update(),this._init(),this}_init(){const e=this._delaunator,t=this.points;if(e.hull&&e.hull.length>2&&XX(e)){this.collinear=Int32Array.from({length:t.length/2},(m,_)=>_).sort((m,_)=>t[2*m]-t[2*_]||t[2*m+1]-t[2*_+1]);const l=this.collinear[0],u=this.collinear[this.collinear.length-1],c=[t[2*l],t[2*l+1],t[2*u],t[2*u+1]],A=1e-8*Math.hypot(c[3]-c[1],c[2]-c[0]);for(let m=0,_=t.length/2;m<_;++m){const b=QX(t[2*m],t[2*m+1],A);t[2*m]=b[0],t[2*m+1]=b[1]}this._delaunator=new T8(t)}else delete this.collinear;const n=this.halfedges=this._delaunator.halfedges,r=this.hull=this._delaunator.hull,s=this.triangles=this._delaunator.triangles,o=this.inedges.fill(-1),a=this._hullIndex.fill(-1);for(let l=0,u=n.length;l<u;++l){const c=s[l%3===2?l-2:l+1];(n[l]===-1||o[c]===-1)&&(o[c]=l)}for(let l=0,u=r.length;l<u;++l)a[r[l]]=l;r.length<=2&&r.length>0&&(this.triangles=new Int32Array(3).fill(-1),this.halfedges=new Int32Array(3).fill(-1),this.triangles[0]=r[0],o[r[0]]=1,r.length===2&&(o[r[1]]=0,this.triangles[1]=r[1],this.triangles[2]=r[1]))}voronoi(e){return new HX(this,e)}*neighbors(e){const{inedges:t,hull:n,_hullIndex:r,halfedges:s,triangles:o,collinear:a}=this;if(a){const A=a.indexOf(e);A>0&&(yield a[A-1]),A<a.length-1&&(yield a[A+1]);return}const l=t[e];if(l===-1)return;let u=l,c=-1;do{if(yield c=o[u],u=u%3===2?u-2:u+1,o[u]!==e)return;if(u=s[u],u===-1){const A=n[(r[e]+1)%n.length];A!==c&&(yield A);return}}while(u!==l)}find(e,t,n=0){if(e=+e,e!==e||(t=+t,t!==t))return-1;const r=n;let s;for(;(s=this._step(n,e,t))>=0&&s!==n&&s!==r;)n=s;return s}_step(e,t,n){const{inedges:r,hull:s,_hullIndex:o,halfedges:a,triangles:l,points:u}=this;if(r[e]===-1||!u.length)return(e+1)%(u.length>>1);let c=e,A=q3(t-u[e*2],2)+q3(n-u[e*2+1],2);const m=r[e];let _=m;do{let b=l[_];const M=q3(t-u[b*2],2)+q3(n-u[b*2+1],2);if(M<A&&(A=M,c=b),_=_%3===2?_-2:_+1,l[_]!==e)break;if(_=a[_],_===-1){if(_=s[(o[e]+1)%s.length],_!==b&&q3(t-u[_*2],2)+q3(n-u[_*2+1],2)<A)return _;break}}while(_!==m);return c}render(e){const t=e==null?e=new U2:void 0,{points:n,halfedges:r,triangles:s}=this;for(let o=0,a=r.length;o<a;++o){const l=r[o];if(l<o)continue;const u=s[o]*2,c=s[l]*2;e.moveTo(n[u],n[u+1]),e.lineTo(n[c],n[c+1])}return this.renderHull(e),t&&t.value()}renderPoints(e,t){t===void 0&&(!e||typeof e.moveTo!="function")&&(t=e,e=null),t=t==null?2:+t;const n=e==null?e=new U2:void 0,{points:r}=this;for(let s=0,o=r.length;s<o;s+=2){const a=r[s],l=r[s+1];e.moveTo(a+t,l),e.arc(a,l,t,0,WX)}return n&&n.value()}renderHull(e){const t=e==null?e=new U2:void 0,{hull:n,points:r}=this,s=n[0]*2,o=n.length;e.moveTo(r[s],r[s+1]);for(let a=1;a<o;++a){const l=2*n[a];e.lineTo(r[l],r[l+1])}return e.closePath(),t&&t.value()}hullPolygon(){const e=new ry;return this.renderHull(e),e.value()}renderTriangle(e,t){const n=t==null?t=new U2:void 0,{points:r,triangles:s}=this,o=s[e*=3]*2,a=s[e+1]*2,l=s[e+2]*2;return t.moveTo(r[o],r[o+1]),t.lineTo(r[a],r[a+1]),t.lineTo(r[l],r[l+1]),t.closePath(),n&&n.value()}*trianglePolygons(){const{triangles:e}=this;for(let t=0,n=e.length/3;t<n;++t)yield this.trianglePolygon(t)}trianglePolygon(e){const t=new ry;return this.renderTriangle(e,t),t.value()}}function YX(i,e,t,n){const r=i.length,s=new Float64Array(r*2);for(let o=0;o<r;++o){const a=i[o];s[o*2]=e.call(n,a,o,i),s[o*2+1]=t.call(n,a,o,i)}return s}function*KX(i,e,t,n){let r=0;for(const s of i)yield e.call(n,s,r,i),yield t.call(n,s,r,i),++r}const o_=Math.PI,kT=o_/2,VT=180/o_,zT=o_/180,ZX=Math.atan2,GT=Math.cos,JX=Math.max,eQ=Math.min,qT=Math.sin,tQ=Math.sign||function(i){return i>0?1:i<0?-1:0},vC=Math.sqrt;function nQ(i){return i>1?kT:i<-1?-kT:Math.asin(i)}function _C(i,e){return i[0]*e[0]+i[1]*e[1]+i[2]*e[2]}function pa(i,e){return[i[1]*e[2]-i[2]*e[1],i[2]*e[0]-i[0]*e[2],i[0]*e[1]-i[1]*e[0]]}function zd(i,e){return[i[0]+e[0],i[1]+e[1],i[2]+e[2]]}function Gd(i){var e=vC(i[0]*i[0]+i[1]*i[1]+i[2]*i[2]);return[i[0]/e,i[1]/e,i[2]/e]}function a_(i){return[ZX(i[1],i[0])*VT,nQ(JX(-1,eQ(1,i[2])))*VT]}function ol(i){const e=i[0]*zT,t=i[1]*zT,n=GT(t);return[n*GT(e),n*qT(e),qT(t)]}function l_(i){return i=i.map(e=>ol(e)),_C(i[0],pa(i[2],i[1]))}function iQ(i){const e=sQ(i),t=aQ(e),n=oQ(t,i),r=uQ(t,i.length),s=rQ(r,i),o=lQ(t,i),{polygons:a,centers:l}=cQ(o,t,i),u=hQ(a),c=dQ(t,i),A=fQ(n,t);return{delaunay:e,edges:n,triangles:t,centers:l,neighbors:r,polygons:a,mesh:u,hull:c,urquhart:A,find:s}}function rQ(i,e){function t(n,r){let s=n[0]-r[0],o=n[1]-r[1],a=n[2]-r[2];return s*s+o*o+a*a}return function(r,s,o){o===void 0&&(o=0);let a,l,u=o;const c=ol([r,s]);do a=o,o=null,l=t(c,ol(e[a])),i[a].forEach(A=>{let m=t(c,ol(e[A]));if(m<l){l=m,o=A,u=A;return}});while(o!==null);return u}}function sQ(i){if(i.length<2)return{};let e=0;for(;isNaN(i[e][0]+i[e][1])&&e++<i.length;);const t=XW(i[e]),n=Ej().translate([0,0]).scale(1).rotate(t.invert([180,0]));i=i.map(n);const r=[];let s=1;for(let A=0,m=i.length;A<m;A++){let _=i[A][0]**2+i[A][1]**2;!isFinite(_)||_>1e32?r.push(A):_>s&&(s=_)}const o=1e6*vC(s);r.forEach(A=>i[A]=[o,0]),i.push([0,o]),i.push([-o,0]),i.push([0,-o]);const a=s_.from(i);a.projection=n;const{triangles:l,halfedges:u,inedges:c}=a;for(let A=0,m=u.length;A<m;A++)if(u[A]<0){const _=A%3==2?A-2:A+1,b=A%3==0?A+2:A-1,M=u[_],w=u[b];u[M]=w,u[w]=M,u[_]=u[b]=-1,l[A]=l[_]=l[b]=e,c[l[M]]=M%3==0?M+2:M-1,c[l[w]]=w%3==0?w+2:w-1,A+=2-A%3}else l[A]>i.length-3-1&&(l[A]=e);return a}function oQ(i,e){const t=new Set;return e.length===2?[[0,1]]:(i.forEach(n=>{if(n[0]!==n[1]&&!(l_(n.map(r=>e[r]))<0))for(let r=0,s;r<3;r++)s=(r+1)%3,t.add(dd([n[r],n[s]]).join("-"))}),Array.from(t,n=>n.split("-").map(Number)))}function aQ(i){const{triangles:e}=i;if(!e)return[];const t=[];for(let n=0,r=e.length/3;n<r;n++){const s=e[3*n],o=e[3*n+1],a=e[3*n+2];s!==o&&o!==a&&t.push([s,a,o])}return t}function lQ(i,e){return i.map(t=>{const n=t.map(s=>e[s]).map(ol),r=zd(zd(pa(n[1],n[0]),pa(n[2],n[1])),pa(n[0],n[2]));return a_(Gd(r))})}function uQ(i,e){const t=[];return i.forEach(n=>{for(let r=0;r<3;r++){const s=n[r],o=n[(r+1)%3];t[s]=t[s]||[],t[s].push(o)}}),i.length===0&&(e===2?(t[0]=[1],t[1]=[0]):e===1&&(t[0]=[])),t}function cQ(i,e,t){const n=[],r=i.slice();if(e.length===0){if(t.length<2)return{polygons:n,centers:r};if(t.length===2){const a=ol(t[0]),l=ol(t[1]),u=Gd(zd(a,l)),c=Gd(pa(a,l)),A=pa(u,c),m=[u,pa(u,A),pa(pa(u,A),A),pa(pa(pa(u,A),A),A)].map(a_).map(o);return n.push(m),n.push(m.slice().reverse()),{polygons:n,centers:r}}}e.forEach((a,l)=>{for(let u=0;u<3;u++){const c=a[u],A=a[(u+1)%3],m=a[(u+2)%3];n[c]=n[c]||[],n[c].push([A,m,l,[c,A,m]])}});const s=n.map(a=>{const l=[a[0][2]];let u=a[0][1];for(let c=1;c<a.length;c++)for(let A=0;A<a.length;A++)if(a[A][0]==u){u=a[A][1],l.push(a[A][2]);break}if(l.length>2)return l;if(l.length==2){const c=HT(t[a[0][3][0]],t[a[0][3][1]],r[l[0]]),A=HT(t[a[0][3][2]],t[a[0][3][0]],r[l[0]]),m=o(c),_=o(A);return[l[0],_,l[1],m]}});function o(a){let l=-1;return r.slice(e.length,1/0).forEach((u,c)=>{u[0]===a[0]&&u[1]===a[1]&&(l=c+e.length)}),l<0&&(l=r.length,r.push(a)),l}return{polygons:s,centers:r}}function HT(i,e,t){i=ol(i),e=ol(e),t=ol(t);const n=tQ(_C(pa(e,i),t));return a_(Gd(zd(i,e)).map(r=>n*r))}function hQ(i){const e=[];return i.forEach(t=>{if(!t)return;let n=t[t.length-1];for(let r of t)r>n&&e.push([n,r]),n=r}),e}function fQ(i,e){return function(t){const n=new Map,r=new Map;return i.forEach((s,o)=>{const a=s.join("-");n.set(a,t[o]),r.set(a,!0)}),e.forEach(s=>{let o=0,a=-1;for(let l=0;l<3;l++){let u=dd([s[l],s[(l+1)%3]]).join("-");n.get(u)>o&&(o=n.get(u),a=u)}r.set(a,!1)}),i.map(s=>r.get(s.join("-")))}}function dQ(i,e){const t=new Set,n=[];i.map(a=>{if(!(l_(a.map(l=>e[l>e.length?0:l]))>1e-12))for(let l=0;l<3;l++){let u=[a[l],a[(l+1)%3]],c=`${u[0]}-${u[1]}`;t.has(c)?t.delete(c):t.add(`${u[1]}-${u[0]}`)}});const r=new Map;let s;if(t.forEach(a=>{a=a.split("-").map(Number),r.set(a[0],a[1]),s=a[0]}),s===void 0)return n;let o=s;do{n.push(o);let a=r.get(o);r.set(o,-1),o=a}while(o>-1&&o!==s);return n}function AQ(i){const e=function(t){if(e.delaunay=null,e._data=t,typeof e._data=="object"&&e._data.type==="FeatureCollection"&&(e._data=e._data.features),typeof e._data=="object"){const n=e._data.map(r=>[e._vx(r),e._vy(r),r]).filter(r=>isFinite(r[0]+r[1]));e.points=n.map(r=>[r[0],r[1]]),e.valid=n.map(r=>r[2]),e.delaunay=iQ(e.points)}return e};return e._vx=function(t){if(typeof t=="object"&&"type"in t)return nT(t)[0];if(0 in t)return t[0]},e._vy=function(t){if(typeof t=="object"&&"type"in t)return nT(t)[1];if(1 in t)return t[1]},e.x=function(t){return t?(e._vx=t,e):e._vx},e.y=function(t){return t?(e._vy=t,e):e._vy},e.polygons=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n={type:"FeatureCollection",features:[]};return e.valid.length===0||(e.delaunay.polygons.forEach((r,s)=>n.features.push({type:"Feature",geometry:r?{type:"Polygon",coordinates:[[...r,r[0]].map(o=>e.delaunay.centers[o])]}:null,properties:{site:e.valid[s],sitecoordinates:e.points[s],neighbours:e.delaunay.neighbors[s]}})),e.valid.length===1&&n.features.push({type:"Feature",geometry:{type:"Sphere"},properties:{site:e.valid[0],sitecoordinates:e.points[0],neighbours:[]}})),n},e.triangles=function(t){return t!==void 0&&e(t),e.delaunay?{type:"FeatureCollection",features:e.delaunay.triangles.map((n,r)=>(n=n.map(s=>e.points[s]),n.center=e.delaunay.centers[r],n)).filter(n=>l_(n)>0).map(n=>({type:"Feature",properties:{circumcenter:n.center},geometry:{type:"Polygon",coordinates:[[...n,n[0]]]}}))}:!1},e.links=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const n=e.delaunay.edges.map(s=>Au(e.points[s[0]],e.points[s[1]])),r=e.delaunay.urquhart(n);return{type:"FeatureCollection",features:e.delaunay.edges.map((s,o)=>({type:"Feature",properties:{source:e.valid[s[0]],target:e.valid[s[1]],length:n[o],urquhart:!!r[o]},geometry:{type:"LineString",coordinates:[e.points[s[0]],e.points[s[1]]]}}))}},e.mesh=function(t){return t!==void 0&&e(t),e.delaunay?{type:"MultiLineString",coordinates:e.delaunay.edges.map(n=>[e.points[n[0]],e.points[n[1]]])}:!1},e.cellMesh=function(t){if(t!==void 0&&e(t),!e.delaunay)return!1;const{centers:n,polygons:r}=e.delaunay,s=[];for(const o of r)if(o)for(let a=o.length,l=o[a-1],u=o[0],c=0;c<a;l=u,u=o[++c])u>l&&s.push([n[l],n[u]]);return{type:"MultiLineString",coordinates:s}},e._found=void 0,e.find=function(t,n,r){if(e._found=e.delaunay.find(t,n,e._found),!r||Au([t,n],e.points[e._found])<r)return e._found},e.hull=function(t){t!==void 0&&e(t);const n=e.delaunay.hull,r=e.points;return n.length===0?null:{type:"Polygon",coordinates:[[...n.map(s=>r[s]),r[n[0]]]]}},i?e(i):e}function sy(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function pQ(i){if(Array.isArray(i))return i}function mQ(i){if(Array.isArray(i))return sy(i)}function gQ(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function yQ(i,e,t){return e=qd(e),MQ(i,xC()?Reflect.construct(e,[],qd(i).constructor):e.apply(i,t))}function vQ(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function _Q(i,e,t){return Object.defineProperty(i,"prototype",{writable:!1}),i}function qd(i){return qd=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},qd(i)}function xQ(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&oy(i,e)}function xC(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(xC=function(){return!!i})()}function bQ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function SQ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function TQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function wQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function MQ(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gQ(i)}function oy(i,e){return oy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},oy(i,e)}function J0(i,e){return pQ(i)||SQ(i,e)||bC(i,e)||TQ()}function dm(i){return mQ(i)||bQ(i)||bC(i)||wQ()}function bC(i,e){if(i){if(typeof i=="string")return sy(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?sy(i,e):void 0}}function EQ(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.resolution,n=t===void 0?1/0:t,r=RQ(i,n),s=m8(r),o=CQ(i,n),a=[].concat(dm(s),dm(o)),l={type:"Polygon",coordinates:i},u=zR(l),c=J0(u,2),A=J0(c[0],2),m=A[0],_=A[1],b=J0(c[1],2),M=b[0],w=b[1],T=m>M||w>=89||_<=-89,N=[];if(T){var P=AQ(a).triangles(),I=new Map(a.map(function(pe,re){var de=J0(pe,2),ye=de[0],Pe=de[1];return["".concat(ye,"-").concat(Pe),re]}));P.features.forEach(function(pe){var re,de=pe.geometry.coordinates[0].slice(0,3).reverse(),ye=[];if(de.forEach(function(Qe){var et=J0(Qe,2),Pt=et[0],Ne=et[1],nt="".concat(Pt,"-").concat(Ne);I.has(nt)&&ye.push(I.get(nt))}),ye.length===3){if(ye.some(function(Qe){return Qe<s.length})){var Pe=pe.properties.circumcenter;if(!ay(Pe,l,T))return}(re=N).push.apply(re,ye)}})}else if(o.length)for(var U=T8.from(a),z=function(re){var de,ye=[2,1,0].map(function(et){return U.triangles[re+et]}),Pe=ye.map(function(et){return a[et]});if(ye.some(function(et){return et<s.length})){var Qe=[0,1].map(function(et){return zH(Pe,function(Pt){return Pt[et]})});if(!ay(Qe,l,T))return 1}(de=N).push.apply(de,dm(ye))},H=0,Q=U.triangles.length;H<Q;H+=3)z(H);else{var B=Ud(r),F=B.vertices,O=B.holes,V=O===void 0?[]:O;N=Kj(F,V,2)}var Y=o1(dd(a,function(pe){return pe[0]}),[0,1]),ne=o1(dd(a,function(pe){return pe[1]}),[0,1]),ee=a.map(function(pe){var re=J0(pe,2),de=re[0],ye=re[1];return[Y(de),ne(ye)]}),se={points:a,indices:N,uvs:ee};return{contour:r,triangles:se}}function RQ(i,e){return i.map(function(t){var n=[],r;return t.forEach(function(s){if(r){var o=Au(s,r)*180/Math.PI;if(o>e)for(var a=Jv(r,s),l=1/Math.ceil(o/e),u=l;u<1;)n.push(a(u)),u+=l}n.push(r=s)}),n})}function CQ(i,e){var t={type:"Polygon",coordinates:i},n=zR(t),r=J0(n,2),s=J0(r[0],2),o=s[0],a=s[1],l=J0(r[1],2),u=l[0],c=l[1];if(Math.min(Math.abs(u-o),Math.abs(c-a))<e)return[];var A=o>u||c>=89||a<=-89;return PQ(e,{minLng:o,maxLng:u,minLat:a,maxLat:c}).filter(function(m){return ay(m,t,A)})}function PQ(i){for(var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},t=e.minLng,n=e.maxLng,r=e.minLat,s=e.maxLat,o=Math.round(Math.pow(360/i,2)/Math.PI),a=(1+Math.sqrt(5))/2,l=function(T){return T/a*360%360-180},u=function(T){return Math.acos(2*T/o-1)/Math.PI*180-90},c=function(T){return o*(Math.cos((T+90)*Math.PI/180)+1)/2},A=[s!==void 0?Math.ceil(c(s)):0,r!==void 0?Math.floor(c(r)):o-1],m=t===void 0&&n===void 0?function(){return!0}:t===void 0?function(w){return w<=n}:n===void 0?function(w){return w>=t}:n>=t?function(w){return w>=t&&w<=n}:function(w){return w>=t||w<=n},_=[],b=A[0];b<=A[1];b++){var M=l(b);m(M)&&_.push([M,u(b)])}return _}function ay(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1;return t?hj(e,i):qX(i,e)}var jf=window.THREE?window.THREE:{BufferGeometry:Tn,Float32BufferAttribute:Ht},WT=new jf.BufferGeometry().setAttribute?"setAttribute":"addAttribute",u_=function(i){function e(t,n,r,s,o,a,l){var u;vQ(this,e),u=yQ(this,e),u.type="ConicPolygonGeometry",u.parameters={polygonGeoJson:t,bottomHeight:n,topHeight:r,closedBottom:s,closedTop:o,includeSides:a,curvatureResolution:l},n=n||0,r=r||1,s=s!==void 0?s:!0,o=o!==void 0?o:!0,a=a!==void 0?a:!0,l=l||5;var c=EQ(t,{resolution:l}),A=c.contour,m=c.triangles,_=m8(m.uvs),b=[],M=[],w=[],T=0,N=function(O){var V=Math.round(b.length/3),U=w.length;b=b.concat(O.vertices),M=M.concat(O.uvs),w=w.concat(V?O.indices.map(function(z){return z+V}):O.indices),u.addGroup(U,w.length-U,T++)};a&&N(I()),s&&N(B(n,!1)),o&&N(B(r,!0)),u.setIndex(w),u[WT]("position",new jf.Float32BufferAttribute(b,3)),u[WT]("uv",new jf.Float32BufferAttribute(M,2)),u.computeVertexNormals();function P(F,O){var V=typeof O=="function"?O:function(){return O},U=F.map(function(z){return z.map(function(H){var Q=J0(H,2),Y=Q[0],ne=Q[1];return NQ(ne,Y,V(Y,ne))})});return Ud(U)}function I(){for(var F=P(A,n),O=F.vertices,V=F.holes,U=P(A,r),z=U.vertices,H=m8([z,O]),Q=Math.round(z.length/3),Y=new Set(V),ne=0,ee=[],se=0;se<Q;se++){var pe=se+1;if(pe===Q)pe=ne;else if(Y.has(pe)){var re=pe;pe=ne,ne=re}ee.push(se,se+Q,pe+Q),ee.push(pe+Q,pe,se)}for(var de=[],ye=1;ye>=0;ye--)for(var Pe=0;Pe<Q;Pe+=1)de.push(Pe/(Q-1),ye);return{indices:ee,vertices:H,uvs:de}}function B(F){var O=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0;return{indices:O?m.indices:m.indices.slice().reverse(),vertices:P([m.points],F).vertices,uvs:_}}return u}return xQ(e,i),_Q(e)}(jf.BufferGeometry);function NQ(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180;return[t*Math.sin(n)*Math.cos(r),t*Math.cos(n),t*Math.sin(n)*Math.sin(r)]}function ly(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function IQ(i){if(Array.isArray(i))return i}function LQ(i){if(Array.isArray(i))return ly(i)}function DQ(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function BQ(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e!==0)for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function FQ(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function UQ(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function OQ(i,e){if(i==null)return{};var t,n,r=kQ(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.includes(t)||{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function kQ(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.includes(n))continue;t[n]=i[n]}return t}function VQ(i,e){return IQ(i)||BQ(i,e)||SC(i,e)||FQ()}function zQ(i){return LQ(i)||DQ(i)||SC(i)||UQ()}function GQ(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(i)}function qQ(i){var e=GQ(i,"string");return typeof e=="symbol"?e:e+""}function SC(i,e){if(i){if(typeof i=="string")return ly(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?ly(i,e):void 0}}var HQ=function(){var i=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,n=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1,r=(e instanceof Array?e.length?e:[void 0]:[e]).map(function(a){return{keyAccessor:a,isProp:!(a instanceof Function)}}),s=i.reduce(function(a,l){var u=a,c=l;return r.forEach(function(A,m){var _=A.keyAccessor,b=A.isProp,M;if(b){var w=c,T=w[_],N=OQ(w,[_].map(qQ));M=T,c=N}else M=_(c,m);m+1<r.length?(u.hasOwnProperty(M)||(u[M]={}),u=u[M]):t?(u.hasOwnProperty(M)||(u[M]=[]),u[M].push(c)):u[M]=c}),a},{});t instanceof Function&&function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1;u===r.length?Object.keys(l).forEach(function(c){return l[c]=t(l[c])}):Object.values(l).forEach(function(c){return a(c,u+1)})}(s);var o=s;return n&&(o=[],function a(l){var u=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[];u.length===r.length?o.push({keys:u,vals:l}):Object.entries(l).forEach(function(c){var A=VQ(c,2),m=A[0],_=A[1];return a(_,[].concat(zQ(u),[m]))})}(s),e instanceof Array&&e.length===0&&o.length===1&&(o[0].keys=[])),o},gi=function(i){i=i||{};var e=typeof i<"u"?i:{},t={},n;for(n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);var r="";function s(Oe){return e.locateFile?e.locateFile(Oe,r):r+Oe}var o;typeof document<"u"&&document.currentScript&&(r=document.currentScript.src),r.indexOf("blob:")!==0?r=r.substr(0,r.lastIndexOf("/")+1):r="",o=function(it,Ct,st){var d=new XMLHttpRequest;d.open("GET",it,!0),d.responseType="arraybuffer",d.onload=function(){if(d.status==200||d.status==0&&d.response){Ct(d.response);return}var ii=ge(it);if(ii){Ct(ii.buffer);return}st()},d.onerror=st,d.send(null)};var a=e.print||console.log.bind(console),l=e.printErr||console.warn.bind(console);for(n in t)t.hasOwnProperty(n)&&(e[n]=t[n]);t=null,e.arguments&&e.arguments;var u=0,c=function(Oe){u=Oe},A=function(){return u},m=8;function _(Oe,it,Ct,st){switch(Ct=Ct||"i8",Ct.charAt(Ct.length-1)==="*"&&(Ct="i32"),Ct){case"i1":Q[Oe>>0]=it;break;case"i8":Q[Oe>>0]=it;break;case"i16":ne[Oe>>1]=it;break;case"i32":ee[Oe>>2]=it;break;case"i64":De=[it>>>0,(Z=it,+Ae(Z)>=1?Z>0?(ht(+Xe(Z/4294967296),4294967295)|0)>>>0:~~+Je((Z-+(~~Z>>>0))/4294967296)>>>0:0)],ee[Oe>>2]=De[0],ee[Oe+4>>2]=De[1];break;case"float":se[Oe>>2]=it;break;case"double":pe[Oe>>3]=it;break;default:hr("invalid type for setValue: "+Ct)}}function b(Oe,it,Ct){switch(it=it||"i8",it.charAt(it.length-1)==="*"&&(it="i32"),it){case"i1":return Q[Oe>>0];case"i8":return Q[Oe>>0];case"i16":return ne[Oe>>1];case"i32":return ee[Oe>>2];case"i64":return ee[Oe>>2];case"float":return se[Oe>>2];case"double":return pe[Oe>>3];default:hr("invalid type for getValue: "+it)}return null}var M=!1;function w(Oe,it){Oe||hr("Assertion failed: "+it)}function T(Oe){var it=e["_"+Oe];return w(it,"Cannot call unknown function "+Oe+", make sure it is exported"),it}function N(Oe,it,Ct,st,d){var X={string:function(kn){var qs=0;if(kn!=null&&kn!==0){var p1=(kn.length<<2)+1;qs=xt(p1),V(kn,qs,p1)}return qs},array:function(kn){var qs=xt(kn.length);return U(kn,qs),qs}};function ii(kn){return it==="string"?F(kn):it==="boolean"?!!kn:kn}var fi=T(Oe),pr=[],On=0;if(st)for(var li=0;li<st.length;li++){var wa=X[Ct[li]];wa?(On===0&&(On=_t()),pr[li]=wa(st[li])):pr[li]=st[li]}var pi=fi.apply(null,pr);return pi=ii(pi),On!==0&&Ut(On),pi}function P(Oe,it,Ct,st){Ct=Ct||[];var d=Ct.every(function(ii){return ii==="number"}),X=it!=="string";return X&&d&&!st?T(Oe):function(){return N(Oe,it,Ct,arguments)}}var I=typeof TextDecoder<"u"?new TextDecoder("utf8"):void 0;function B(Oe,it,Ct){for(var st=it+Ct,d=it;Oe[d]&&!(d>=st);)++d;if(d-it>16&&Oe.subarray&&I)return I.decode(Oe.subarray(it,d));for(var X="";it<d;){var ii=Oe[it++];if(!(ii&128)){X+=String.fromCharCode(ii);continue}var fi=Oe[it++]&63;if((ii&224)==192){X+=String.fromCharCode((ii&31)<<6|fi);continue}var pr=Oe[it++]&63;if((ii&240)==224?ii=(ii&15)<<12|fi<<6|pr:ii=(ii&7)<<18|fi<<12|pr<<6|Oe[it++]&63,ii<65536)X+=String.fromCharCode(ii);else{var On=ii-65536;X+=String.fromCharCode(55296|On>>10,56320|On&1023)}}return X}function F(Oe,it){return Oe?B(Y,Oe,it):""}function O(Oe,it,Ct,st){if(!(st>0))return 0;for(var d=Ct,X=Ct+st-1,ii=0;ii<Oe.length;++ii){var fi=Oe.charCodeAt(ii);if(fi>=55296&&fi<=57343){var pr=Oe.charCodeAt(++ii);fi=65536+((fi&1023)<<10)|pr&1023}if(fi<=127){if(Ct>=X)break;it[Ct++]=fi}else if(fi<=2047){if(Ct+1>=X)break;it[Ct++]=192|fi>>6,it[Ct++]=128|fi&63}else if(fi<=65535){if(Ct+2>=X)break;it[Ct++]=224|fi>>12,it[Ct++]=128|fi>>6&63,it[Ct++]=128|fi&63}else{if(Ct+3>=X)break;it[Ct++]=240|fi>>18,it[Ct++]=128|fi>>12&63,it[Ct++]=128|fi>>6&63,it[Ct++]=128|fi&63}}return it[Ct]=0,Ct-d}function V(Oe,it,Ct){return O(Oe,Y,it,Ct)}typeof TextDecoder<"u"&&new TextDecoder("utf-16le");function U(Oe,it){Q.set(Oe,it)}function z(Oe,it){return Oe%it>0&&(Oe+=it-Oe%it),Oe}var H,Q,Y,ne,ee,se,pe;function re(Oe){H=Oe,e.HEAP8=Q=new Int8Array(Oe),e.HEAP16=ne=new Int16Array(Oe),e.HEAP32=ee=new Int32Array(Oe),e.HEAPU8=Y=new Uint8Array(Oe),e.HEAPU16=new Uint16Array(Oe),e.HEAPU32=new Uint32Array(Oe),e.HEAPF32=se=new Float32Array(Oe),e.HEAPF64=pe=new Float64Array(Oe)}var de=5271520,ye=28608,Pe=e.TOTAL_MEMORY||33554432;e.buffer?H=e.buffer:H=new ArrayBuffer(Pe),Pe=H.byteLength,re(H),ee[ye>>2]=de;function Qe(Oe){for(;Oe.length>0;){var it=Oe.shift();if(typeof it=="function"){it();continue}var Ct=it.func;typeof Ct=="number"?it.arg===void 0?e.dynCall_v(Ct):e.dynCall_vi(Ct,it.arg):Ct(it.arg===void 0?null:it.arg)}}var et=[],Pt=[],Ne=[],nt=[];function tt(){if(e.preRun)for(typeof e.preRun=="function"&&(e.preRun=[e.preRun]);e.preRun.length;)yn(e.preRun.shift());Qe(et)}function Dt(){Qe(Pt)}function Rt(){Qe(Ne)}function It(){if(e.postRun)for(typeof e.postRun=="function"&&(e.postRun=[e.postRun]);e.postRun.length;)Kt(e.postRun.shift());Qe(nt)}function yn(Oe){et.unshift(Oe)}function Kt(Oe){nt.unshift(Oe)}var Ae=Math.abs,Je=Math.ceil,Xe=Math.floor,ht=Math.min,Ze=0,vt=null;function ut(Oe){Ze++,e.monitorRunDependencies&&e.monitorRunDependencies(Ze)}function Tt(Oe){if(Ze--,e.monitorRunDependencies&&e.monitorRunDependencies(Ze),Ze==0&&vt){var it=vt;vt=null,it()}}e.preloadedImages={},e.preloadedAudios={};var fn=null,bn="data:application/octet-stream;base64,";function he(Oe){return String.prototype.startsWith?Oe.startsWith(bn):Oe.indexOf(bn)===0}var Z,De;fn="data:application/octet-stream;base64,AAAAAAAAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAGAAAAAQAAAAQAAAADAAAABgAAAAUAAAACAAAAAAAAAAIAAAADAAAAAQAAAAQAAAAGAAAAAAAAAAUAAAADAAAABgAAAAQAAAAFAAAAAAAAAAEAAAACAAAABAAAAAUAAAAGAAAAAAAAAAIAAAADAAAAAQAAAAUAAAACAAAAAAAAAAEAAAADAAAABgAAAAQAAAAGAAAAAAAAAAUAAAACAAAAAQAAAAQAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAAAAAAEAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAYAAAAAAAAABQAAAAAAAAAAAAAABAAAAAUAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAYAAAAAAAAABgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAABAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAgAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAMAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAAEAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABQAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAYAAAAAAAAAAQAAAAIAAAADAAAABAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAIAAAAAAAAAAAAAAAYAAAAAAAAAAwAAAAIAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAFAAAABAAAAAAAAAABAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAYAAAAAAAAABAAAAAAAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAgAAAAQAAAADAAAACAAAAAEAAAAHAAAABgAAAAkAAAAAAAAAAwAAAAIAAAACAAAABgAAAAoAAAALAAAAAAAAAAEAAAAFAAAAAwAAAA0AAAABAAAABwAAAAQAAAAMAAAAAAAAAAQAAAB/AAAADwAAAAgAAAADAAAAAAAAAAwAAAAFAAAAAgAAABIAAAAKAAAACAAAAAAAAAAQAAAABgAAAA4AAAALAAAAEQAAAAEAAAAJAAAAAgAAAAcAAAAVAAAACQAAABMAAAADAAAADQAAAAEAAAAIAAAABQAAABYAAAAQAAAABAAAAAAAAAAPAAAACQAAABMAAAAOAAAAFAAAAAEAAAAHAAAABgAAAAoAAAALAAAAGAAAABcAAAAFAAAAAgAAABIAAAALAAAAEQAAABcAAAAZAAAAAgAAAAYAAAAKAAAADAAAABwAAAANAAAAGgAAAAQAAAAPAAAAAwAAAA0AAAAaAAAAFQAAAB0AAAADAAAADAAAAAcAAAAOAAAAfwAAABEAAAAbAAAACQAAABQAAAAGAAAADwAAABYAAAAcAAAAHwAAAAQAAAAIAAAADAAAABAAAAASAAAAIQAAAB4AAAAIAAAABQAAABYAAAARAAAACwAAAA4AAAAGAAAAIwAAABkAAAAbAAAAEgAAABgAAAAeAAAAIAAAAAUAAAAKAAAAEAAAABMAAAAiAAAAFAAAACQAAAAHAAAAFQAAAAkAAAAUAAAADgAAABMAAAAJAAAAKAAAABsAAAAkAAAAFQAAACYAAAATAAAAIgAAAA0AAAAdAAAABwAAABYAAAAQAAAAKQAAACEAAAAPAAAACAAAAB8AAAAXAAAAGAAAAAsAAAAKAAAAJwAAACUAAAAZAAAAGAAAAH8AAAAgAAAAJQAAAAoAAAAXAAAAEgAAABkAAAAXAAAAEQAAAAsAAAAtAAAAJwAAACMAAAAaAAAAKgAAAB0AAAArAAAADAAAABwAAAANAAAAGwAAACgAAAAjAAAALgAAAA4AAAAUAAAAEQAAABwAAAAfAAAAKgAAACwAAAAMAAAADwAAABoAAAAdAAAAKwAAACYAAAAvAAAADQAAABoAAAAVAAAAHgAAACAAAAAwAAAAMgAAABAAAAASAAAAIQAAAB8AAAApAAAALAAAADUAAAAPAAAAFgAAABwAAAAgAAAAHgAAABgAAAASAAAANAAAADIAAAAlAAAAIQAAAB4AAAAxAAAAMAAAABYAAAAQAAAAKQAAACIAAAATAAAAJgAAABUAAAA2AAAAJAAAADMAAAAjAAAALgAAAC0AAAA4AAAAEQAAABsAAAAZAAAAJAAAABQAAAAiAAAAEwAAADcAAAAoAAAANgAAACUAAAAnAAAANAAAADkAAAAYAAAAFwAAACAAAAAmAAAAfwAAACIAAAAzAAAAHQAAAC8AAAAVAAAAJwAAACUAAAAZAAAAFwAAADsAAAA5AAAALQAAACgAAAAbAAAAJAAAABQAAAA8AAAALgAAADcAAAApAAAAMQAAADUAAAA9AAAAFgAAACEAAAAfAAAAKgAAADoAAAArAAAAPgAAABwAAAAsAAAAGgAAACsAAAA+AAAALwAAAEAAAAAaAAAAKgAAAB0AAAAsAAAANQAAADoAAABBAAAAHAAAAB8AAAAqAAAALQAAACcAAAAjAAAAGQAAAD8AAAA7AAAAOAAAAC4AAAA8AAAAOAAAAEQAAAAbAAAAKAAAACMAAAAvAAAAJgAAACsAAAAdAAAARQAAADMAAABAAAAAMAAAADEAAAAeAAAAIQAAAEMAAABCAAAAMgAAADEAAAB/AAAAPQAAAEIAAAAhAAAAMAAAACkAAAAyAAAAMAAAACAAAAAeAAAARgAAAEMAAAA0AAAAMwAAAEUAAAA2AAAARwAAACYAAAAvAAAAIgAAADQAAAA5AAAARgAAAEoAAAAgAAAAJQAAADIAAAA1AAAAPQAAAEEAAABLAAAAHwAAACkAAAAsAAAANgAAAEcAAAA3AAAASQAAACIAAAAzAAAAJAAAADcAAAAoAAAANgAAACQAAABIAAAAPAAAAEkAAAA4AAAARAAAAD8AAABNAAAAIwAAAC4AAAAtAAAAOQAAADsAAABKAAAATgAAACUAAAAnAAAANAAAADoAAAB/AAAAPgAAAEwAAAAsAAAAQQAAACoAAAA7AAAAPwAAAE4AAABPAAAAJwAAAC0AAAA5AAAAPAAAAEgAAABEAAAAUAAAACgAAAA3AAAALgAAAD0AAAA1AAAAMQAAACkAAABRAAAASwAAAEIAAAA+AAAAKwAAADoAAAAqAAAAUgAAAEAAAABMAAAAPwAAAH8AAAA4AAAALQAAAE8AAAA7AAAATQAAAEAAAAAvAAAAPgAAACsAAABUAAAARQAAAFIAAABBAAAAOgAAADUAAAAsAAAAVgAAAEwAAABLAAAAQgAAAEMAAABRAAAAVQAAADEAAAAwAAAAPQAAAEMAAABCAAAAMgAAADAAAABXAAAAVQAAAEYAAABEAAAAOAAAADwAAAAuAAAAWgAAAE0AAABQAAAARQAAADMAAABAAAAALwAAAFkAAABHAAAAVAAAAEYAAABDAAAANAAAADIAAABTAAAAVwAAAEoAAABHAAAAWQAAAEkAAABbAAAAMwAAAEUAAAA2AAAASAAAAH8AAABJAAAANwAAAFAAAAA8AAAAWAAAAEkAAABbAAAASAAAAFgAAAA2AAAARwAAADcAAABKAAAATgAAAFMAAABcAAAANAAAADkAAABGAAAASwAAAEEAAAA9AAAANQAAAF4AAABWAAAAUQAAAEwAAABWAAAAUgAAAGAAAAA6AAAAQQAAAD4AAABNAAAAPwAAAEQAAAA4AAAAXQAAAE8AAABaAAAATgAAAEoAAAA7AAAAOQAAAF8AAABcAAAATwAAAE8AAABOAAAAPwAAADsAAABdAAAAXwAAAE0AAABQAAAARAAAAEgAAAA8AAAAYwAAAFoAAABYAAAAUQAAAFUAAABeAAAAZQAAAD0AAABCAAAASwAAAFIAAABgAAAAVAAAAGIAAAA+AAAATAAAAEAAAABTAAAAfwAAAEoAAABGAAAAZAAAAFcAAABcAAAAVAAAAEUAAABSAAAAQAAAAGEAAABZAAAAYgAAAFUAAABXAAAAZQAAAGYAAABCAAAAQwAAAFEAAABWAAAATAAAAEsAAABBAAAAaAAAAGAAAABeAAAAVwAAAFMAAABmAAAAZAAAAEMAAABGAAAAVQAAAFgAAABIAAAAWwAAAEkAAABjAAAAUAAAAGkAAABZAAAAYQAAAFsAAABnAAAARQAAAFQAAABHAAAAWgAAAE0AAABQAAAARAAAAGoAAABdAAAAYwAAAFsAAABJAAAAWQAAAEcAAABpAAAAWAAAAGcAAABcAAAAUwAAAE4AAABKAAAAbAAAAGQAAABfAAAAXQAAAE8AAABaAAAATQAAAG0AAABfAAAAagAAAF4AAABWAAAAUQAAAEsAAABrAAAAaAAAAGUAAABfAAAAXAAAAE8AAABOAAAAbQAAAGwAAABdAAAAYAAAAGgAAABiAAAAbgAAAEwAAABWAAAAUgAAAGEAAAB/AAAAYgAAAFQAAABnAAAAWQAAAG8AAABiAAAAbgAAAGEAAABvAAAAUgAAAGAAAABUAAAAYwAAAFAAAABpAAAAWAAAAGoAAABaAAAAcQAAAGQAAABmAAAAUwAAAFcAAABsAAAAcgAAAFwAAABlAAAAZgAAAGsAAABwAAAAUQAAAFUAAABeAAAAZgAAAGUAAABXAAAAVQAAAHIAAABwAAAAZAAAAGcAAABbAAAAYQAAAFkAAAB0AAAAaQAAAG8AAABoAAAAawAAAG4AAABzAAAAVgAAAF4AAABgAAAAaQAAAFgAAABnAAAAWwAAAHEAAABjAAAAdAAAAGoAAABdAAAAYwAAAFoAAAB1AAAAbQAAAHEAAABrAAAAfwAAAGUAAABeAAAAcwAAAGgAAABwAAAAbAAAAGQAAABfAAAAXAAAAHYAAAByAAAAbQAAAG0AAABsAAAAXQAAAF8AAAB1AAAAdgAAAGoAAABuAAAAYgAAAGgAAABgAAAAdwAAAG8AAABzAAAAbwAAAGEAAABuAAAAYgAAAHQAAABnAAAAdwAAAHAAAABrAAAAZgAAAGUAAAB4AAAAcwAAAHIAAABxAAAAYwAAAHQAAABpAAAAdQAAAGoAAAB5AAAAcgAAAHAAAABkAAAAZgAAAHYAAAB4AAAAbAAAAHMAAABuAAAAawAAAGgAAAB4AAAAdwAAAHAAAAB0AAAAZwAAAHcAAABvAAAAcQAAAGkAAAB5AAAAdQAAAH8AAABtAAAAdgAAAHEAAAB5AAAAagAAAHYAAAB4AAAAbAAAAHIAAAB1AAAAeQAAAG0AAAB3AAAAbwAAAHMAAABuAAAAeQAAAHQAAAB4AAAAeAAAAHMAAAByAAAAcAAAAHkAAAB3AAAAdgAAAHkAAAB0AAAAeAAAAHcAAAB1AAAAcQAAAHYAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAACAAAABQAAAAEAAAAAAAAA/////wEAAAAAAAAAAwAAAAQAAAACAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAFAAAAAQAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAAAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAABQAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAEAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAQAAAAMAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAFAAAABQAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAADAAAAAAAAAAAAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAAAAAD/////AwAAAAAAAAAFAAAAAgAAAAAAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAADAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAAAAAABAAAAAwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAADAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAADAAAAAwAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAwAAAAAAAAAAAAAA/////wMAAAAAAAAABQAAAAIAAAAAAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAwAAAAAAAAADAAAAAwAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAMAAAADAAAAAwAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAAAAAAAAwAAAAUAAAABAAAAAAAAAP////8DAAAAAAAAAAUAAAACAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAABAAAAAUAAAABAAAAAAAAAAMAAAADAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAIAAAAFAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAADAAAAAQAAAAAAAAABAAAAAAAAAAUAAAAAAAAAAAAAAAUAAAAFAAAAAAAAAAAAAAD/////AQAAAAAAAAADAAAABAAAAAIAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAAAAAAAAAAAFAAAABQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAUAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAAAAAAEAAAD//////////wEAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAAAAAAAAAAABAAAAAgAAAAYAAAAEAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAcAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAACAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAYAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAAAAAAAAAAAAQAAAAEAAAAFAAAABgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAALAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAACAAAAAAAAAAAAAAABAAAAAwAAAAcAAAAGAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAADAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAADgAAAAIAAAAAAAAAAAAAAAEAAAAAAAAACQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACgAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAMAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAABwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAIAAAAAAAAAAAAAAAEAAAAEAAAACAAAAAoAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAALAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAgAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAAAAAAAAAAAAQAAAAsAAAAPAAAACAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAIAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAABQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAgAAAAAAAAAAAAAAAQAAAAwAAAAQAAAADAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAoAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAPAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAADwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAADQAAAAEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAACAAAAAAAAAAAAAAABAAAACgAAABMAAAAIAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAwAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAQAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAQAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAACQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA8AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAAAAAAAAAAAAAEAAAANAAAAEQAAAA0AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAARAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAEAAAABAAAAAAAAAAAAAAAAAAAAEQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAA0AAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAARAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkAAAACAAAAAAAAAAAAAAABAAAADgAAABIAAAAPAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAADwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAASAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEwAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAABEAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEgAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAABIAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAATAAAAAgAAAAAAAAAAAAAAAQAAAP//////////EwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAATAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAEgAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAASAAAAAAAAABgAAAAAAAAAIQAAAAAAAAAeAAAAAAAAACAAAAADAAAAMQAAAAEAAAAwAAAAAwAAADIAAAADAAAACAAAAAAAAAAFAAAABQAAAAoAAAAFAAAAFgAAAAAAAAAQAAAAAAAAABIAAAAAAAAAKQAAAAEAAAAhAAAAAAAAAB4AAAAAAAAABAAAAAAAAAAAAAAABQAAAAIAAAAFAAAADwAAAAEAAAAIAAAAAAAAAAUAAAAFAAAAHwAAAAEAAAAWAAAAAAAAABAAAAAAAAAAAgAAAAAAAAAGAAAAAAAAAA4AAAAAAAAACgAAAAAAAAALAAAAAAAAABEAAAADAAAAGAAAAAEAAAAXAAAAAwAAABkAAAADAAAAAAAAAAAAAAABAAAABQAAAAkAAAAFAAAABQAAAAAAAAACAAAAAAAAAAYAAAAAAAAAEgAAAAEAAAAKAAAAAAAAAAsAAAAAAAAABAAAAAEAAAADAAAABQAAAAcAAAAFAAAACAAAAAEAAAAAAAAAAAAAAAEAAAAFAAAAEAAAAAEAAAAFAAAAAAAAAAIAAAAAAAAABwAAAAAAAAAVAAAAAAAAACYAAAAAAAAACQAAAAAAAAATAAAAAAAAACIAAAADAAAADgAAAAEAAAAUAAAAAwAAACQAAAADAAAAAwAAAAAAAAANAAAABQAAAB0AAAAFAAAAAQAAAAAAAAAHAAAAAAAAABUAAAAAAAAABgAAAAEAAAAJAAAAAAAAABMAAAAAAAAABAAAAAIAAAAMAAAABQAAABoAAAAFAAAAAAAAAAEAAAADAAAAAAAAAA0AAAAFAAAAAgAAAAEAAAABAAAAAAAAAAcAAAAAAAAAGgAAAAAAAAAqAAAAAAAAADoAAAAAAAAAHQAAAAAAAAArAAAAAAAAAD4AAAADAAAAJgAAAAEAAAAvAAAAAwAAAEAAAAADAAAADAAAAAAAAAAcAAAABQAAACwAAAAFAAAADQAAAAAAAAAaAAAAAAAAACoAAAAAAAAAFQAAAAEAAAAdAAAAAAAAACsAAAAAAAAABAAAAAMAAAAPAAAABQAAAB8AAAAFAAAAAwAAAAEAAAAMAAAAAAAAABwAAAAFAAAABwAAAAEAAAANAAAAAAAAABoAAAAAAAAAHwAAAAAAAAApAAAAAAAAADEAAAAAAAAALAAAAAAAAAA1AAAAAAAAAD0AAAADAAAAOgAAAAEAAABBAAAAAwAAAEsAAAADAAAADwAAAAAAAAAWAAAABQAAACEAAAAFAAAAHAAAAAAAAAAfAAAAAAAAACkAAAAAAAAAKgAAAAEAAAAsAAAAAAAAADUAAAAAAAAABAAAAAQAAAAIAAAABQAAABAAAAAFAAAADAAAAAEAAAAPAAAAAAAAABYAAAAFAAAAGgAAAAEAAAAcAAAAAAAAAB8AAAAAAAAAMgAAAAAAAAAwAAAAAAAAADEAAAADAAAAIAAAAAAAAAAeAAAAAwAAACEAAAADAAAAGAAAAAMAAAASAAAAAwAAABAAAAADAAAARgAAAAAAAABDAAAAAAAAAEIAAAADAAAANAAAAAMAAAAyAAAAAAAAADAAAAAAAAAAJQAAAAMAAAAgAAAAAAAAAB4AAAADAAAAUwAAAAAAAABXAAAAAwAAAFUAAAADAAAASgAAAAMAAABGAAAAAAAAAEMAAAAAAAAAOQAAAAEAAAA0AAAAAwAAADIAAAAAAAAAGQAAAAAAAAAXAAAAAAAAABgAAAADAAAAEQAAAAAAAAALAAAAAwAAAAoAAAADAAAADgAAAAMAAAAGAAAAAwAAAAIAAAADAAAALQAAAAAAAAAnAAAAAAAAACUAAAADAAAAIwAAAAMAAAAZAAAAAAAAABcAAAAAAAAAGwAAAAMAAAARAAAAAAAAAAsAAAADAAAAPwAAAAAAAAA7AAAAAwAAADkAAAADAAAAOAAAAAMAAAAtAAAAAAAAACcAAAAAAAAALgAAAAMAAAAjAAAAAwAAABkAAAAAAAAAJAAAAAAAAAAUAAAAAAAAAA4AAAADAAAAIgAAAAAAAAATAAAAAwAAAAkAAAADAAAAJgAAAAMAAAAVAAAAAwAAAAcAAAADAAAANwAAAAAAAAAoAAAAAAAAABsAAAADAAAANgAAAAMAAAAkAAAAAAAAABQAAAAAAAAAMwAAAAMAAAAiAAAAAAAAABMAAAADAAAASAAAAAAAAAA8AAAAAwAAAC4AAAADAAAASQAAAAMAAAA3AAAAAAAAACgAAAAAAAAARwAAAAMAAAA2AAAAAwAAACQAAAAAAAAAQAAAAAAAAAAvAAAAAAAAACYAAAADAAAAPgAAAAAAAAArAAAAAwAAAB0AAAADAAAAOgAAAAMAAAAqAAAAAwAAABoAAAADAAAAVAAAAAAAAABFAAAAAAAAADMAAAADAAAAUgAAAAMAAABAAAAAAAAAAC8AAAAAAAAATAAAAAMAAAA+AAAAAAAAACsAAAADAAAAYQAAAAAAAABZAAAAAwAAAEcAAAADAAAAYgAAAAMAAABUAAAAAAAAAEUAAAAAAAAAYAAAAAMAAABSAAAAAwAAAEAAAAAAAAAASwAAAAAAAABBAAAAAAAAADoAAAADAAAAPQAAAAAAAAA1AAAAAwAAACwAAAADAAAAMQAAAAMAAAApAAAAAwAAAB8AAAADAAAAXgAAAAAAAABWAAAAAAAAAEwAAAADAAAAUQAAAAMAAABLAAAAAAAAAEEAAAAAAAAAQgAAAAMAAAA9AAAAAAAAADUAAAADAAAAawAAAAAAAABoAAAAAwAAAGAAAAADAAAAZQAAAAMAAABeAAAAAAAAAFYAAAAAAAAAVQAAAAMAAABRAAAAAwAAAEsAAAAAAAAAOQAAAAAAAAA7AAAAAAAAAD8AAAADAAAASgAAAAAAAABOAAAAAwAAAE8AAAADAAAAUwAAAAMAAABcAAAAAwAAAF8AAAADAAAAJQAAAAAAAAAnAAAAAwAAAC0AAAADAAAANAAAAAAAAAA5AAAAAAAAADsAAAAAAAAARgAAAAMAAABKAAAAAAAAAE4AAAADAAAAGAAAAAAAAAAXAAAAAwAAABkAAAADAAAAIAAAAAMAAAAlAAAAAAAAACcAAAADAAAAMgAAAAMAAAA0AAAAAAAAADkAAAAAAAAALgAAAAAAAAA8AAAAAAAAAEgAAAADAAAAOAAAAAAAAABEAAAAAwAAAFAAAAADAAAAPwAAAAMAAABNAAAAAwAAAFoAAAADAAAAGwAAAAAAAAAoAAAAAwAAADcAAAADAAAAIwAAAAAAAAAuAAAAAAAAADwAAAAAAAAALQAAAAMAAAA4AAAAAAAAAEQAAAADAAAADgAAAAAAAAAUAAAAAwAAACQAAAADAAAAEQAAAAMAAAAbAAAAAAAAACgAAAADAAAAGQAAAAMAAAAjAAAAAAAAAC4AAAAAAAAARwAAAAAAAABZAAAAAAAAAGEAAAADAAAASQAAAAAAAABbAAAAAwAAAGcAAAADAAAASAAAAAMAAABYAAAAAwAAAGkAAAADAAAAMwAAAAAAAABFAAAAAwAAAFQAAAADAAAANgAAAAAAAABHAAAAAAAAAFkAAAAAAAAANwAAAAMAAABJAAAAAAAAAFsAAAADAAAAJgAAAAAAAAAvAAAAAwAAAEAAAAADAAAAIgAAAAMAAAAzAAAAAAAAAEUAAAADAAAAJAAAAAMAAAA2AAAAAAAAAEcAAAAAAAAAYAAAAAAAAABoAAAAAAAAAGsAAAADAAAAYgAAAAAAAABuAAAAAwAAAHMAAAADAAAAYQAAAAMAAABvAAAAAwAAAHcAAAADAAAATAAAAAAAAABWAAAAAwAAAF4AAAADAAAAUgAAAAAAAABgAAAAAAAAAGgAAAAAAAAAVAAAAAMAAABiAAAAAAAAAG4AAAADAAAAOgAAAAAAAABBAAAAAwAAAEsAAAADAAAAPgAAAAMAAABMAAAAAAAAAFYAAAADAAAAQAAAAAMAAABSAAAAAAAAAGAAAAAAAAAAVQAAAAAAAABXAAAAAAAAAFMAAAADAAAAZQAAAAAAAABmAAAAAwAAAGQAAAADAAAAawAAAAMAAABwAAAAAwAAAHIAAAADAAAAQgAAAAAAAABDAAAAAwAAAEYAAAADAAAAUQAAAAAAAABVAAAAAAAAAFcAAAAAAAAAXgAAAAMAAABlAAAAAAAAAGYAAAADAAAAMQAAAAAAAAAwAAAAAwAAADIAAAADAAAAPQAAAAMAAABCAAAAAAAAAEMAAAADAAAASwAAAAMAAABRAAAAAAAAAFUAAAAAAAAAXwAAAAAAAABcAAAAAAAAAFMAAAAAAAAATwAAAAAAAABOAAAAAAAAAEoAAAADAAAAPwAAAAEAAAA7AAAAAwAAADkAAAADAAAAbQAAAAAAAABsAAAAAAAAAGQAAAAFAAAAXQAAAAEAAABfAAAAAAAAAFwAAAAAAAAATQAAAAEAAABPAAAAAAAAAE4AAAAAAAAAdQAAAAQAAAB2AAAABQAAAHIAAAAFAAAAagAAAAEAAABtAAAAAAAAAGwAAAAAAAAAWgAAAAEAAABdAAAAAQAAAF8AAAAAAAAAWgAAAAAAAABNAAAAAAAAAD8AAAAAAAAAUAAAAAAAAABEAAAAAAAAADgAAAADAAAASAAAAAEAAAA8AAAAAwAAAC4AAAADAAAAagAAAAAAAABdAAAAAAAAAE8AAAAFAAAAYwAAAAEAAABaAAAAAAAAAE0AAAAAAAAAWAAAAAEAAABQAAAAAAAAAEQAAAAAAAAAdQAAAAMAAABtAAAABQAAAF8AAAAFAAAAcQAAAAEAAABqAAAAAAAAAF0AAAAAAAAAaQAAAAEAAABjAAAAAQAAAFoAAAAAAAAAaQAAAAAAAABYAAAAAAAAAEgAAAAAAAAAZwAAAAAAAABbAAAAAAAAAEkAAAADAAAAYQAAAAEAAABZAAAAAwAAAEcAAAADAAAAcQAAAAAAAABjAAAAAAAAAFAAAAAFAAAAdAAAAAEAAABpAAAAAAAAAFgAAAAAAAAAbwAAAAEAAABnAAAAAAAAAFsAAAAAAAAAdQAAAAIAAABqAAAABQAAAFoAAAAFAAAAeQAAAAEAAABxAAAAAAAAAGMAAAAAAAAAdwAAAAEAAAB0AAAAAQAAAGkAAAAAAAAAdwAAAAAAAABvAAAAAAAAAGEAAAAAAAAAcwAAAAAAAABuAAAAAAAAAGIAAAADAAAAawAAAAEAAABoAAAAAwAAAGAAAAADAAAAeQAAAAAAAAB0AAAAAAAAAGcAAAAFAAAAeAAAAAEAAAB3AAAAAAAAAG8AAAAAAAAAcAAAAAEAAABzAAAAAAAAAG4AAAAAAAAAdQAAAAEAAABxAAAABQAAAGkAAAAFAAAAdgAAAAEAAAB5AAAAAAAAAHQAAAAAAAAAcgAAAAEAAAB4AAAAAQAAAHcAAAAAAAAAcgAAAAAAAABwAAAAAAAAAGsAAAAAAAAAZAAAAAAAAABmAAAAAAAAAGUAAAADAAAAUwAAAAEAAABXAAAAAwAAAFUAAAADAAAAdgAAAAAAAAB4AAAAAAAAAHMAAAAFAAAAbAAAAAEAAAByAAAAAAAAAHAAAAAAAAAAXAAAAAEAAABkAAAAAAAAAGYAAAAAAAAAdQAAAAAAAAB5AAAABQAAAHcAAAAFAAAAbQAAAAEAAAB2AAAAAAAAAHgAAAAAAAAAXwAAAAEAAABsAAAAAQAAAHIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAMAAAAGAAAAAgAAAAUAAAABAAAABAAAAAAAAAAAAAAABQAAAAMAAAABAAAABgAAAAQAAAACAAAAAAAAAH6iBfbytuk/Gq6akm/58z/Xrm0Liez0P5doSdOpSwRAWs602ULg8D/dT7Rcbo/1v1N1RQHFNOM/g9Snx7HW3L8HWsP8Q3jfP6VwOLosutk/9rjk1YQcxj+gnmKMsNn6P/HDeuPFY+M/YHwDjqKhB0Ci19/fCVrbP4UxKkDWOP6/pvljWa09tL9wi7wrQXjnv/Z6yLImkM2/3yTlOzY14D+m+WNZrT20PzwKVQnrQwNA9nrIsiaQzT/g40rFrRQFwPa45NWEHMa/kbslHEZq97/xw3rjxWPjv4cLC2SMBci/otff3wla27+rKF5oIAv0P1N1RQHFNOO/iDJPGyWHBUAHWsP8Q3jfvwQf/by16gXAfqIF9vK26b8XrO0Vh0r+v9eubQuJ7PS/BxLrA0ZZ479azrTZQuDwv1MK1EuItPw/yscgV9Z6FkAwHBR2WjQMQJNRzXsQ5vY/GlUHVJYKF0DONuFv2lMNQNCGZ28QJfk/0WUwoIL36D8ggDOMQuATQNqMOeAy/wZAWFYOYM+M2z/LWC4uH3oSQDE+LyTsMgRAkJzhRGWFGEDd4soovCQQQKqk0DJMEP8/rGmNdwOLBUAW2X/9xCbjP4hu3dcqJhNAzuYItRvdB0CgzW3zJW/sPxotm/Y2TxRAQAk9XmdDDEC1Kx9MKgT3P1M+NctcghZAFVqcLlb0C0Bgzd3sB2b2P77mZDPUWhZAFROHJpUGCEDAfma5CxXtPz1DWq/zYxRAmhYY5824F0DOuQKWSbAOQNCMqrvu3fs/L6DR22K2wT9nAAxPBU8RQGiN6mW43AFAZhu25b633D8c1YgmzowSQNM25BRKWARArGS08/lNxD+LFssHwmMRQLC5aNcxBgJABL9HT0WRF0CjCmJmOGEOQHsuaVzMP/s/TWJCaGGwBUCeu1PAPLzjP9nqN9DZOBNAKE4JcydbCkCGtbd1qjPzP8dgm9U8jhVAtPeKTkVwDkCeCLss5l37P401XMPLmBdAFd29VMVQDUBg0yA55h75Pz6odcYLCRdApBM4rBrkAkDyAVWgQxbRP4XDMnK20hFAymLlF7EmzD8GUgo9XBHlP3lbK7T9COc/k+OhPthhy7+YGEpnrOvCPzBFhLs15u4/epbqB6H4uz9IuuLF5svev6lzLKY31es/CaQ0envF5z8ZY0xlUADXv7zaz7HYEuI/CfbK1sn16T8uAQfWwxLWPzKn/YuFN94/5KdbC1AFu793fyCSnlfvPzK2y4doAMY/NRg5t1/X6b/shq4QJaHDP5yNIAKPOeI/vpn7BSE30r/X4YQrO6nrv78Ziv/Thto/DqJ1Y6+y5z9l51NaxFrlv8QlA65HOLS/86dxiEc96z+Hj0+LFjneP6LzBZ8LTc2/DaJ1Y6+y579l51NaxFrlP8QlA65HOLQ/8qdxiEc967+Jj0+LFjnev6LzBZ8LTc0/1qdbC1AFuz93fyCSnlfvvzK2y4doAMa/NRg5t1/X6T/vhq4QJaHDv5yNIAKPOeK/wJn7BSE30j/W4YQrO6nrP78Ziv/Thtq/CaQ0envF578XY0xlUADXP7zaz7HYEuK/CvbK1sn16b8rAQfWwxLWvzKn/YuFN96/zWLlF7EmzL8GUgo9XBHlv3lbK7T9COe/kOOhPthhyz+cGEpnrOvCvzBFhLs15u6/c5bqB6H4u79IuuLF5sveP6lzLKY31eu/AQAAAP////8HAAAA/////zEAAAD/////VwEAAP////9hCQAA/////6dBAAD/////kcsBAP/////3kAwA/////8H2VwAAAAAAAAAAAAAAAAACAAAA/////w4AAAD/////YgAAAP////+uAgAA/////8ISAAD/////ToMAAP////8ilwMA/////+4hGQD/////gu2vAAAAAAAAAAAAAAAAAAAAAAACAAAA//////////8BAAAAAwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////////////////////AQAAAAAAAAACAAAA////////////////AwAAAP//////////////////////////////////////////////////////////AgAAAP//////////AQAAAAAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD/////////////////////AQAAAP///////////////wIAAAD///////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAD///////////////8CAAAAAQAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8BAAAAAgAAAP///////////////wAAAAD/////////////////////AwAAAP///////////////////////////////wIAAAD///////////////8BAAAA/////////////////////wAAAAD/////////////////////AwAAAP////////////////////////////////////////////////////8DAAAA/////////////////////wAAAAABAAAA//////////8CAAAA//////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAA////////////////AgAAAAAAAAABAAAA//////////////////////////////////////////////////////////////////////////8DAAAAAQAAAP//////////AgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAACAAAAAAAAAAIAAAABAAAAAQAAAAIAAAACAAAAAAAAAAUAAAAFAAAAAAAAAAIAAAACAAAAAwAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAAAAAAAAgAAAAEAAAACAAAAAgAAAAIAAAAAAAAABQAAAAYAAAAAAAAAAgAAAAIAAAADAAAAAgAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAgAAAAAAAAACAAAAAQAAAAMAAAACAAAAAgAAAAAAAAAFAAAABwAAAAAAAAACAAAAAgAAAAMAAAADAAAAAAAAAAAAAAAAAAAAAAAAAAIAAAACAAAAAAAAAAIAAAABAAAABAAAAAIAAAACAAAAAAAAAAUAAAAIAAAAAAAAAAIAAAACAAAAAwAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAwAAAAIAAAAAAAAAAgAAAAEAAAAAAAAAAgAAAAIAAAAAAAAABQAAAAkAAAAAAAAAAgAAAAIAAAADAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAKAAAAAgAAAAIAAAAAAAAAAwAAAA4AAAACAAAAAAAAAAIAAAADAAAAAAAAAAAAAAACAAAAAgAAAAMAAAAGAAAAAAAAAAAAAAAAAAAAAAAAAAsAAAACAAAAAgAAAAAAAAADAAAACgAAAAIAAAAAAAAAAgAAAAMAAAABAAAAAAAAAAIAAAACAAAAAwAAAAcAAAAAAAAAAAAAAAAAAAAAAAAADAAAAAIAAAACAAAAAAAAAAMAAAALAAAAAgAAAAAAAAACAAAAAwAAAAIAAAAAAAAAAgAAAAIAAAADAAAACAAAAAAAAAAAAAAAAAAAAAAAAAANAAAAAgAAAAIAAAAAAAAAAwAAAAwAAAACAAAAAAAAAAIAAAADAAAAAwAAAAAAAAACAAAAAgAAAAMAAAAJAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAACAAAAAgAAAAAAAAADAAAADQAAAAIAAAAAAAAAAgAAAAMAAAAEAAAAAAAAAAIAAAACAAAAAwAAAAoAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAIAAAACAAAAAAAAAAMAAAAGAAAAAgAAAAAAAAACAAAAAwAAAA8AAAAAAAAAAgAAAAIAAAADAAAACwAAAAAAAAAAAAAAAAAAAAAAAAAGAAAAAgAAAAIAAAAAAAAAAwAAAAcAAAACAAAAAAAAAAIAAAADAAAAEAAAAAAAAAACAAAAAgAAAAMAAAAMAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAACAAAAAgAAAAAAAAADAAAACAAAAAIAAAAAAAAAAgAAAAMAAAARAAAAAAAAAAIAAAACAAAAAwAAAA0AAAAAAAAAAAAAAAAAAAAAAAAACAAAAAIAAAACAAAAAAAAAAMAAAAJAAAAAgAAAAAAAAACAAAAAwAAABIAAAAAAAAAAgAAAAIAAAADAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAJAAAAAgAAAAIAAAAAAAAAAwAAAAUAAAACAAAAAAAAAAIAAAADAAAAEwAAAAAAAAACAAAAAgAAAAMAAAAPAAAAAAAAAAAAAAAAAAAAAAAAABAAAAACAAAAAAAAAAIAAAABAAAAEwAAAAIAAAACAAAAAAAAAAUAAAAKAAAAAAAAAAIAAAACAAAAAwAAABAAAAAAAAAAAAAAAAAAAAAAAAAAEQAAAAIAAAAAAAAAAgAAAAEAAAAPAAAAAgAAAAIAAAAAAAAABQAAAAsAAAAAAAAAAgAAAAIAAAADAAAAEQAAAAAAAAAAAAAAAAAAAAAAAAASAAAAAgAAAAAAAAACAAAAAQAAABAAAAACAAAAAgAAAAAAAAAFAAAADAAAAAAAAAACAAAAAgAAAAMAAAASAAAAAAAAAAAAAAAAAAAAAAAAABMAAAACAAAAAAAAAAIAAAABAAAAEQAAAAIAAAACAAAAAAAAAAUAAAANAAAAAAAAAAIAAAACAAAAAwAAABMAAAAAAAAAAAAAAAAAAAAAAAAADwAAAAIAAAAAAAAAAgAAAAEAAAASAAAAAgAAAAIAAAAAAAAABQAAAA4AAAAAAAAAAgAAAAIAAAADAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAAAAAAAAAAAAAIAAAABAAAAAAAAAAEAAAACAAAAAQAAAAAAAAACAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAAAAAACAAAAAQAAAAAAAAABAAAAAgAAAAAAAAAAAAAAAgAAAAEAAAAAAAAAAQAAAAIAAAABAAAAAAAAAAIAAAACAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAEAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAFAAAABAAAAAAAAAABAAAABQAAAAQAAAAAAAAABQAAAAUAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAEAAAAAAAAAAAEAAAAAAQAAAAAAAAAAAQAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAABAAAAAAAAAAAAAQAAAAAAAAAAAAA6B6FaUp9QQTPXMuL4myJBraiDfBwx9UBYJseitzTIQOL5if9jqZtAnXX+Z+ycb0C3pucbhRBCQG8wJBYqpRRAlWbDCzCY5z/eFWBUEve6P/+qo4Q50Y4/D9YM3iCcYT8fcA2QJSA0P4ADxu0qAAc/BNcGolVJ2j5d9FACqwquPh9z7MthtI9CSUSYJke/YUJQ/64OyjU0Qpi0+HCmFQdCm3GfIVdh2kHsJ11kAyauQYC3UDFJOoFBSJsFV1OwU0FK5fcxX4AmQWhy/zZIt/lACqaCPsBjzUDbdUNIScugQMYQlVJ4MXNANiuq8GTvRUDxTXnulxEZQFZ8QX5kpuw/qmG/JwYFlEAluh3Q6DB+QKn4vyNq0GZAKOXekas+UUB8xabXXhI6QG63C2pLtSNAdDBtyNfLDUDyOcu67ID2P0rCMvRXAeE/Ki2TSVyzyT9Dk+8Sz2uzP5J+w5ARWp0/NQAoOiMuhj9YnP+RyMJwPxgW7TvQVFk/KgsLYF0kQz9g5dAC6IwzQcgHPVvDex1B1XjppodHBkHJq3OMM9fwQNvcmJ7wddlAInGPpQs/w0BRobq5EBmtQJZ2ai7n+ZVAtv2G5E+bgECG+gIfKBlpQK5f8jdI91JAL39sL/WpPEB8rGxhDqklQK6yUf43XhBAxL9y/tK8+D86XyZpgrHiPwAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAP////8AAAAAAAAAAAAAAAABAAAAAAAAAAAAAAD/////AAAAAAAAAAABAAAAAQAAAAAAAAAAAAAA/////wAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAP////8FAAAABQAAAAAAAAAAAAAAAAAAAAAAAAD/////AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA/////////////////////////////////////wAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAP////////////////////////////////////8AAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAFAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAD/////////////////////////////////////AAAAAAEAAAABAAAAAQAAAAEAAAABAAAAAQAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAQAAAAEAAAABAAAAAAAAAAEAAAAAAAAABQAAAAEAAAABAAAAAAAAAAAAAAABAAAAAQAAAAAAAAABAAAAAQAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAQAAAAAAAQABAAABAQAAAAAAAQAAAAEAAAABAAEAAAAAAAAAAAAAAAAAAAAAquJYWJZl+D9jaeZNtj/zPwwdI9KqaeO/qGefXwdHdz+q4lhYlmX4P+OrlPMN3PI/DB0j0qpp47+7SQLV4VIEQKriWFiWZfg/r2kma3tz8T82eQmLqNIGwMRIWXMqSvo/fcCszPux9j+jara6ozTwP6hnn18HR3c/MSoKLequ8r+SabgA2nj0P7jBLbDOHO8/1Ym/ICfH4T+6lxjvlFXHv73m373LRPU/0vXyDVxo7T+ToKRHJXMAQF/33578aPE/pAyy64tD9T8+U/hCvyruPwxv8Y7YYwLAuXYr8NAiCEB4+LDK0Sn0P1Qeuy4j+eo/OMx50n7K7L+TrGB/nyf8v5ehC2fbYPM/aXMKexiT6z8mFRIMjg/zP7yUVwGGBNw/E6opHERf8z/z0wR2g9DqPw4pBpcOhvu/NbA29uWAA8DMaTExyXzyP02biiQ+Ruk/S8jz2/FKBEB1pzZnpbb9P7pQU4wLfPI//7ZcQXeG6D9CqEQvAYoIwDB2VB6sSgRAVyv8H5We8T+EHWF8XNPmPzB2wT8Nrrg/SEi+cX+w4L8of+GtdSDxP1sjk5AdouU/6ZjOVru13r8K0obqI6bxvwVbdNXyhfA/w5GG024n5z+rwmtMzP8BwLw9pSX49QXABe/2uQxP8D+b6wCzCvXkP7uGT87fK+Q/pz/JWw4coj+qoBf2J0nwP/yE3PUo0+I/vFJeHcaC+D96luSIqvntP/bf8sHUYu8/gZNN41mL4z9bhOqVOF4FwO6lmAh1hQhAbCVxbdhk7z+1C8NdDcfiPwG36x/0OQBAx0WJ76c2+D9nlSHXANfuP2HlfZ3gqOE/EwnVlVPg9r96+oHzEH//v5bXzdT1Auw/DM3GwLsA4D9p/8uoKcr+v+U9x5DQVAPAehjSdghb7D9sc1IetODgP8MVwwB1pu6/azPk6OGe978W8t/TUc3rP+0QMvYfP+A/RsG/QpSE8D+l3uwScxzgPwQaifgujuw/k1Vti1I43z8MAwLnSh0GQH5nYnwwZgJAiGUzWC5s6j8WyyI/BbLgPw4iUapGeQJAB3W+imnp/j9BLWR4ssrpP2t+gG5Pstk/cpBsfm6DCMCOpU9dOZsFQEv8nFypHeo/ehJ6i+6S2D9jqlGEmarLv7STC5TRiOa/bC+x8WZD6D9H3yUkWpDZP8gZvmCMuQLAreY19/eRBsCoPOc8UzzpP6KI/QV+y9g/t/MoboyWzT+Hv5q3Zu3Mvy2xROCT4uY/9gQitMMg1T9abAqhWMDkv1oLTavoUfG/PMUJP9CD5j+fHRX3t6fSPz7W2gk6bvs/WRnuHwqN9D8YFturGCTmP1EZczv0b9I/5t4exabB5D/1ESLh5fTEP9X2z6SYweQ/6lv3I2zT0D9zkRGNUNMAQKoSvc4EIfs/Xggt8wQI5T+mJHHg/w/SP4lhT/9t8vQ/DrZ/DbwH7D+XlhbYZrjkP34LIpFt6c4/lwfp8fLX9L+j96CTTf76v3WdNhEv9uM/d8c3o4lV0D/vFdCHVcsFwAHeDq0F1QhApbYqcZiN5D9KoilqByXLPwX0/diA0vq/0fo0GxnxAMBbaTkvlCzjP/RrFrWXrMs/UYTrky7jA0DB9f4FiZYAQEGAk/3QzeE/r/TeqE8t0D/OqjlsnPbvvz8RKU8JOfW/smSEbK/O4T8MzuyPm3DDP/rFtctq9gZAfb1EVEaSA0Dts5dVInnhP18SFMc79MM/7y34cw6LAMDFrRJsZO0DwC2KLvLSYuA/hx5wcUHewz+49SnK/4ruPyeS0PX9a+E/ZxaaLvvZ3z8WPu5T2QS8Pygo4RIvMqa/BJ0Kqsd0279cKW4ay8jdP3b05bmZ364/10/qtdxk2r+Bcz6CDMvpv54qOw+Amdw/qLV71pW7sT/YKc80nIPUP8OfIaBJ77G/LyTuD1un2z+diYu8efWzP1wU7ACkfwjAZroyPL1yBkAmv3lKJJbbPysKSE4W+p0/dIgqY79TA8ATLTOQ3tsGwJ2zweD/Xdg/XO/jXeFUaL8VW2qLFKfov1cA9Aa6XfK/tIa7YGgI2T+f3hu/sxqPv2nXdPpf3Pc/jkw8Jbda8j+tT/z8tGPVP1yBHpJd35k/KYvYOy1s8j/yz+kCQjPrP9+agH7x59g/PZfJ9aBhpr/rDKzvYBb+PwtkiaGCt/c/vb1mVr+f1T/JIHwHc8Govw7aeF6+9vG/Xv7kD6fp979isYioQYHVP7AIQZuSFrG/3z1AdUTnAUDN3XY9O7f9P0AdQ9ljYNQ/dJANJPTOrb8kLECUiiPlP4yF7UgmStA/9xGmXxCG1T9qZzix4W2zv2SGJRJVrPe/Fh9a2M/B/b8IexzFCoPSP9y1QFD2bLe/Q86cWLJe/b+mOOfYm78BwOTjkPAGE9E/8aPCUKu/ub9pPZyLCiUGwBA7Mev/BQlALOmrlRi+0j+AMJ/dKULBv7iLtL6a6QRAEMDV/yajAUDa62dE3crJP1P70RgBUbq/38hVnR6esT/s1tG10Z/Ov/zLwalHPss/dTS9NKTXx78nMcRzCIEHQAabxDsAmQRA0tyLK3gSyT+Aui7nOhDGv5Gs58z3WgHATN3forJuBMCAui7nOhDGP9Lciyt4Esm/WAJyHQ4c7z8UP5HFIs3iP3U0vTSk18c//MvBqUc+y7+cvv8HLg/Kvy1I/mHsI+K/U/vRGAFRuj/a62dE3crJv8p+WV8KlQjAuQ/nOP43B0CAMJ/dKULBPyzpq5UYvtK/ZoU+VoLh4L9etLlRUfvtv/GjwlCrv7k/5OOQ8AYT0b9DfT9FhufXPwUX8hJp+4u/3LVAUPZstz8IexzFCoPSv9+L609E5fQ/q9Fz7X2J7T9qZzix4W2zP/cRpl8QhtW/vtNilqGX+j8MOy7QJoL0P3SQDST0zq0/QB1D2WNg1L8IIjSvGNkDwGB8Jou2GAfAsAhBm5IWsT9isYioQYHVvyS9D3zb6uy/gnwRa7uM9L/JIHwHc8GoP729Zla/n9W/CsAHJZwmAEDEW6OYT1r6Pz2XyfWgYaY/35qAfvHn2L83Tdy4lS30vxf2/gZ0jPq/XIEekl3fmb+tT/z8tGPVvybPr2zJ1/+/K7mJ0ypVAsCf3hu/sxqPPwCGu2BoCNm/5oITrpZn+r+UDUyDP+n/v1zv413hVGg/nbPB4P9d2L9MlmkxNvgCQMtZlKE85v8/KwpIThb6nb8mv3lKJJbbv8+SZsTvOOc/pQCIIOYw0j+diYu8efWzvy8k7g9bp9u/kxYDa+pKtD9XlYvA8HnVv6i1e9aVu7G/nio7D4CZ3L/WR6rNh5EGwCkgQweBkghAdvTluZnfrr9cKW4ay8jdvxbjhr1f1QVAR5C0MzivAkAWPu5T2QS8v2cWmi772d+/cKj4lzLJCEBx2QJfYrMFQIcecHFB3sO/LYou8tJi4L+jr7lhO38BwIcI0Nb7xgTAXxIUxzv0w7/ts5dVInnhv0T+l8DZLfE/MP3FoFvS5D8MzuyPm3DDv7JkhGyvzuG/tzhzRIRc0b9Ovv3/0z7mv6/03qhPLdC/m4CT/dDN4b9dwjU5VCQBQBBJX1ntCv0/9GsWtZesy79baTkvlCzjv1mjYgEz++S/oW6KnOQW8b9KoilqByXLv6W2KnGYjeS/SmaKz3Vx9z+BZB5yxGHwP3fHN6OJVdC/dZ02ES/2478PuaBjLrXaP4/JU81pPaO/fgsikW3pzr+XlhbYZrjkv4tSn7YDbP0/f2LnFKlF9z+mJHHg/w/Sv14ILfMECOW/mfg4qYhR/b+OP+RQDCACwOpb9yNs09C/1fbPpJjB5L9pN2WOVZ3wv3hHy9nxIve/URlzO/Rv0r8YFturGCTmv1d1/KKR8QPA8gsy9qzSB8CfHRX3t6fSvzzFCT/Qg+a/EYStnrzV9r/2QJqI7Lb9v/YEIrTDINW/LbFE4JPi5r/7kQEs5fEDQHunnf4GeQBAooj9BX7L2L+oPOc8Uzzpv+ydYY2SSAfAL4HK6CRTB0BH3yUkWpDZv2wvsfFmQ+i/Ik0Yzruh6T8fM3LoGoDUP3oSeovukti/S/ycXKkd6r9rEv+7UWcHQCRIQe/GfwNAa36Abk+y2b9BLWR4ssrpv9KT87qa0bM/FTyktw823L8WyyI/BbLgv4hlM1gubOq/DizMp9Ki6r8b5ckdjVrzv5NVbYtSON+/BBqJ+C6O7L/dUBFqgyXYv00Wh18r7+q/7RAy9h8/4L8W8t/TUc3rv4RM5DKx3wDAfvWIj94aBcBsc1IetODgv3oY0nYIW+y/oGcTFF54AUDkJqS/FKX6PwzNxsC7AOC/ltfN1PUC7L+5Wrz/zHnzP6688w2rNOc/YeV9neCo4b9nlSHXANfuvw9RsxKjY/s/1V8GteXE8j+1C8NdDcfiv2wlcW3YZO+/IOywaA7Q8b9bFP+4Tg36v4GTTeNZi+O/9t/ywdRi77+tRc3yFR7eP2bkcHXJkLO//ITc9SjT4r+qoBf2J0nwv2YHKoswwfm/iQcLspCjAcCb6wCzCvXkvwXv9rkMT/C/YkuwYAMXBMApCNUai9kIwMORhtNuJ+e/BVt01fKF8L+ZqWEfvIjsP6h693QZYNk/WyOTkB2i5b8of+GtdSDxvwpaaulDSwVADMQAX+lOAECEHWF8XNPmv1cr/B+VnvG/XyFG6opcCMD/mtR32/UEQP+2XEF3hui/ulBTjAt88r/imfCfRP+yP9zbvtc8XeO/TZuKJD5G6b/MaTExyXzyvxiTQeElXOO/rbJRQVGN9L/z0wR2g9DqvxOqKRxEX/O/FDGCEei99j9x8zV4VYTmP2lzCnsYk+u/l6ELZ9tg878pRXacaDT/v3k6GZRqoQXAVB67LiP56r94+LDK0Sn0vwO6pZ9b7wFAvK0nKVcc9j8+U/hCvyruv6QMsuuLQ/W/FPhKFYv46j8MyxaDTOW/v9L18g1caO2/vebfvctE9b/7GD8ZrF3xv3gx1AR9bQDAuMEtsM4c77+SabgA2nj0v5xKFIwxsATArKNSBaKsB0Cjara6ozTwv33ArMz7sfa/dF2U0FcWCcDxL357DJX/P69pJmt7c/G/quJYWJZl+L/YntVJlnrSP4sRLzXM+fe/46uU8w3c8r+q4lhYlmX4v85lu5+QRwRAsI0H/WU8479jaeZNtj/zv6riWFiWZfi/sI0H/WU847/OZbufkEcEQHAoPUBrnss/9exKzDtFtT88wM8kax+gP9OqeKeAYog/MW0ItiZvcj+ph+smvt5bP2lCaV5dEUU/StaUmQDaLz+kK9y22BMYP0O3whZuMwI/IIbgZGWE6z7UkjYaEM3UPuezxwa9cr8+LybxRMnFpz6E1N8DbPiRPsYjySMvK3s+//////8fAAj//////zMQCP////9/MiAI/////28yMAj/////YzJACP///z9iMlAI////N2IyYAj///8zYjJwCP//vzNiMoAI//+rM2IykAj/f6szYjKgCP8PqzNiMrAI/wOrM2IywAi/A6szYjLQCJ8DqzNiMuAImQOrM2Iy8Aj//////z8PCP//////Kx8I/////38pLwj/////Pyk/CP////85KU8I////PzgpXwj///8POClvCP///w44KX8I//8fDjgpjwj//w8OOCmfCP9/DQ44Ka8I/w8NDjgpvwj/DQ0OOCnPCP8MDQ44Kd8IxwwNDjgp7wjEDA0OOCn/CAcAAAAHAAAAAQAAAAIAAAAEAAAAAwAAAAAAAAAAAAAABwAAAAMAAAABAAAAAgAAAAUAAAAEAAAAAAAAAAAAAAAEAAAABAAAAAAAAAACAAAAAQAAAAMAAAAOAAAABgAAAAsAAAACAAAABwAAAAEAAAAYAAAABQAAAAoAAAABAAAABgAAAAAAAAAmAAAABwAAAAwAAAADAAAACAAAAAIAAAAxAAAACQAAAA4AAAAAAAAABQAAAAQAAAA6AAAACAAAAA0AAAAEAAAACQAAAAMAAAA/AAAACwAAAAYAAAAPAAAACgAAABAAAABIAAAADAAAAAcAAAAQAAAACwAAABEAAABTAAAACgAAAAUAAAATAAAADgAAAA8AAABhAAAADQAAAAgAAAARAAAADAAAABIAAABrAAAADgAAAAkAAAASAAAADQAAABMAAAB1AAAADwAAABMAAAARAAAAEgAAABAAAAAGAAAAAgAAAAMAAAAFAAAABAAAAAAAAAAAAAAAAAAAAAYAAAACAAAAAwAAAAEAAAAFAAAABAAAAAAAAAAAAAAABwAAAAUAAAADAAAABAAAAAEAAAAAAAAAAgAAAAAAAAACAAAAAwAAAAEAAAAFAAAABAAAAAYAAAAAAAAAAAAAABgtRFT7Ifk/GC1EVPsh+b8YLURU+yEJQBgtRFT7IQnAYWxnb3MuYwBoM05laWdoYm9yUm90YXRpb25zAGNvb3JkaWprLmMAX3VwQXA3Q2hlY2tlZABfdXBBcDdyQ2hlY2tlZABkaXJlY3RlZEVkZ2UuYwBkaXJlY3RlZEVkZ2VUb0JvdW5kYXJ5AGFkamFjZW50RmFjZURpclt0bXBGaWprLmZhY2VdW2ZpamsuZmFjZV0gPT0gS0kAZmFjZWlqay5jAF9mYWNlSWprUGVudFRvQ2VsbEJvdW5kYXJ5AGFkamFjZW50RmFjZURpcltjZW50ZXJJSksuZmFjZV1bZmFjZTJdID09IEtJAF9mYWNlSWprVG9DZWxsQm91bmRhcnkAaDNJbmRleC5jAGNvbXBhY3RDZWxscwBsYXRMbmdUb0NlbGwAY2VsbFRvQ2hpbGRQb3MAdmFsaWRhdGVDaGlsZFBvcwBsYXRMbmcuYwBjZWxsQXJlYVJhZHMyAHBvbHlnb24tPm5leHQgPT0gTlVMTABsaW5rZWRHZW8uYwBhZGROZXdMaW5rZWRQb2x5Z29uAG5leHQgIT0gTlVMTABsb29wICE9IE5VTEwAYWRkTmV3TGlua2VkTG9vcABwb2x5Z29uLT5maXJzdCA9PSBOVUxMAGFkZExpbmtlZExvb3AAY29vcmQgIT0gTlVMTABhZGRMaW5rZWRDb29yZABsb29wLT5maXJzdCA9PSBOVUxMAGlubmVyTG9vcHMgIT0gTlVMTABub3JtYWxpemVNdWx0aVBvbHlnb24AYmJveGVzICE9IE5VTEwAY2FuZGlkYXRlcyAhPSBOVUxMAGZpbmRQb2x5Z29uRm9ySG9sZQBjYW5kaWRhdGVCQm94ZXMgIT0gTlVMTAByZXZEaXIgIT0gSU5WQUxJRF9ESUdJVABsb2NhbGlqLmMAY2VsbFRvTG9jYWxJamsAYmFzZUNlbGwgIT0gb3JpZ2luQmFzZUNlbGwAIShvcmlnaW5PblBlbnQgJiYgaW5kZXhPblBlbnQpAGJhc2VDZWxsID09IG9yaWdpbkJhc2VDZWxsAGJhc2VDZWxsICE9IElOVkFMSURfQkFTRV9DRUxMAGxvY2FsSWprVG9DZWxsACFfaXNCYXNlQ2VsbFBlbnRhZ29uKGJhc2VDZWxsKQBiYXNlQ2VsbFJvdGF0aW9ucyA+PSAwAGdyaWRQYXRoQ2VsbHMAcG9seWZpbGwuYwBpdGVyU3RlcFBvbHlnb25Db21wYWN0ADAAdmVydGV4LmMAY2VsbFRvVmVydGV4AGdyYXBoLT5idWNrZXRzICE9IE5VTEwAdmVydGV4R3JhcGguYwBpbml0VmVydGV4R3JhcGgAbm9kZSAhPSBOVUxMAGFkZFZlcnRleE5vZGU=";var ze=28624;function ft(Oe,it,Ct,st){hr("Assertion failed: "+F(Oe)+", at: "+[it?F(it):"unknown filename",Ct,st?F(st):"unknown function"])}function We(){return Q.length}function Zt(Oe,it,Ct){Y.set(Y.subarray(it,it+Ct),Oe)}function St(Oe){return e.___errno_location&&(ee[e.___errno_location()>>2]=Oe),Oe}function $t(Oe){hr("OOM")}function Yt(Oe){try{var it=new ArrayBuffer(Oe);return it.byteLength!=Oe?void 0:(new Int8Array(it).set(Q),at(it),re(it),1)}catch{}}function yt(Oe){var it=We(),Ct=16777216,st=2147483648-Ct;if(Oe>st)return!1;for(var d=16777216,X=Math.max(it,d);X<Oe;)X<=536870912?X=z(2*X,Ct):X=Math.min(z((3*X+2147483648)/4,Ct),st);var ii=Yt(X);return!!ii}var Bt=typeof atob=="function"?atob:function(Oe){var it="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",Ct="",st,d,X,ii,fi,pr,On,li=0;Oe=Oe.replace(/[^A-Za-z0-9\+\/\=]/g,"");do ii=it.indexOf(Oe.charAt(li++)),fi=it.indexOf(Oe.charAt(li++)),pr=it.indexOf(Oe.charAt(li++)),On=it.indexOf(Oe.charAt(li++)),st=ii<<2|fi>>4,d=(fi&15)<<4|pr>>2,X=(pr&3)<<6|On,Ct=Ct+String.fromCharCode(st),pr!==64&&(Ct=Ct+String.fromCharCode(d)),On!==64&&(Ct=Ct+String.fromCharCode(X));while(li<Oe.length);return Ct};function vn(Oe){try{for(var it=Bt(Oe),Ct=new Uint8Array(it.length),st=0;st<it.length;++st)Ct[st]=it.charCodeAt(st);return Ct}catch{throw new Error("Converting base64 string to bytes failed.")}}function ge(Oe){if(he(Oe))return vn(Oe.slice(bn.length))}var Be={Math,Int8Array,Int32Array,Uint8Array,Float32Array,Float64Array},bt={b:c,c:A,d:ft,e:St,f:We,g:Zt,h:yt,i:$t,o:ze,p:ye},oe=function(Oe,it,Ct){"almost asm";var st=new Oe.Int8Array(Ct),d=new Oe.Int32Array(Ct);new Oe.Uint8Array(Ct),new Oe.Float32Array(Ct);var X=new Oe.Float64Array(Ct),ii=it.o|0,fi=it.p|0,pr=Oe.Math.floor,On=Oe.Math.abs,li=Oe.Math.sqrt,wa=Oe.Math.pow,pi=Oe.Math.cos,kn=Oe.Math.sin,qs=Oe.Math.tan,p1=Oe.Math.acos,ie=Oe.Math.asin,Ce=Oe.Math.atan,Fe=Oe.Math.atan2,Ve=Oe.Math.ceil,Me=Oe.Math.imul,pt=Oe.Math.min,Ft=Oe.Math.max,kt=Oe.Math.clz32,ot=it.b,K=it.c,dt=it.d,Jt=it.e,nn=it.f,dn=it.g,xi=it.h,Qn=it.i,$=28640;function an(f){return st=new Int8Array(f),d=new Int32Array(f),X=new Float64Array(f),Ct=f,!0}function Mi(f){f=f|0;var h=0;return h=$,$=$+f|0,$=$+15&-16,h|0}function Nn(){return $|0}function Fr(f){f=f|0,$=f}function o0(f,h){f=f|0,$=f}function ds(f,h){f=f|0,h=h|0;var p=0,y=0,x=0;return(f|0)<0?(h=2,h|0):(f|0)>13780509?(h=zu(15,h)|0,h|0):(p=((f|0)<0)<<31>>31,x=Nr(f|0,p|0,3,0)|0,y=K()|0,p=ln(f|0,p|0,1,0)|0,p=Nr(x|0,y|0,p|0,K()|0)|0,p=ln(p|0,K()|0,1,0)|0,f=K()|0,d[h>>2]=p,d[h+4>>2]=f,h=0,h|0)}function ta(f,h,p,y){return f=f|0,h=h|0,p=p|0,y=y|0,Fi(f,h,p,y,0)|0}function Fi(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0;if(D=$,$=$+16|0,E=D,!($i(f,h,p,y,x)|0))return y=0,$=D,y|0;do if((p|0)>=0){if((p|0)>13780509){if(S=zu(15,E)|0,S|0)break;R=E,E=d[R>>2]|0,R=d[R+4>>2]|0}else S=((p|0)<0)<<31>>31,k=Nr(p|0,S|0,3,0)|0,R=K()|0,S=ln(p|0,S|0,1,0)|0,S=Nr(k|0,R|0,S|0,K()|0)|0,S=ln(S|0,K()|0,1,0)|0,R=K()|0,d[E>>2]=S,d[E+4>>2]=R,E=S;if(Nl(y|0,0,E<<3|0)|0,x|0){Nl(x|0,0,E<<2|0)|0,S=fr(f,h,p,y,x,E,R,0)|0;break}S=ao(E,4)|0,S?(k=fr(f,h,p,y,S,E,R,0)|0,xn(S),S=k):S=13}else S=2;while(!1);return k=S,$=D,k|0}function $i(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0;if(ve=$,$=$+16|0,le=ve,ue=ve+8|0,ce=le,d[ce>>2]=f,d[ce+4>>2]=h,(p|0)<0)return ue=2,$=ve,ue|0;if(S=y,d[S>>2]=f,d[S+4>>2]=h,S=(x|0)!=0,S&&(d[x>>2]=0),wn(f,h)|0)return ue=9,$=ve,ue|0;d[ue>>2]=0;e:do if((p|0)>=1)if(S)for(W=1,k=0,te=0,ce=1,S=f;;){if(!(k|te)){if(S=mi(S,h,4,ue,le)|0,S|0)break e;if(h=le,S=d[h>>2]|0,h=d[h+4>>2]|0,wn(S,h)|0){S=9;break e}}if(S=mi(S,h,d[26800+(te<<2)>>2]|0,ue,le)|0,S|0)break e;if(h=le,S=d[h>>2]|0,h=d[h+4>>2]|0,f=y+(W<<3)|0,d[f>>2]=S,d[f+4>>2]=h,d[x+(W<<2)>>2]=ce,f=k+1|0,E=(f|0)==(ce|0),R=te+1|0,D=(R|0)==6,wn(S,h)|0){S=9;break e}if(ce=ce+(D&E&1)|0,(ce|0)>(p|0)){S=0;break}else W=W+1|0,k=E?0:f,te=E?D?0:R:te}else for(W=1,k=0,te=0,ce=1,S=f;;){if(!(k|te)){if(S=mi(S,h,4,ue,le)|0,S|0)break e;if(h=le,S=d[h>>2]|0,h=d[h+4>>2]|0,wn(S,h)|0){S=9;break e}}if(S=mi(S,h,d[26800+(te<<2)>>2]|0,ue,le)|0,S|0)break e;if(h=le,S=d[h>>2]|0,h=d[h+4>>2]|0,f=y+(W<<3)|0,d[f>>2]=S,d[f+4>>2]=h,f=k+1|0,E=(f|0)==(ce|0),R=te+1|0,D=(R|0)==6,wn(S,h)|0){S=9;break e}if(ce=ce+(D&E&1)|0,(ce|0)>(p|0)){S=0;break}else W=W+1|0,k=E?0:f,te=E?D?0:R:te}else S=0;while(!1);return ue=S,$=ve,ue|0}function fr(f,h,p,y,x,S,E,R){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0,S=S|0,E=E|0,R=R|0;var D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0;if(ve=$,$=$+16|0,le=ve+8|0,ue=ve,D=q0(f|0,h|0,S|0,E|0)|0,W=K()|0,te=y+(D<<3)|0,Te=te,Ue=d[Te>>2]|0,Te=d[Te+4>>2]|0,k=(Ue|0)==(f|0)&(Te|0)==(h|0),!((Ue|0)==0&(Te|0)==0|k))do D=ln(D|0,W|0,1,0)|0,D=Pl(D|0,K()|0,S|0,E|0)|0,W=K()|0,te=y+(D<<3)|0,Ue=te,Te=d[Ue>>2]|0,Ue=d[Ue+4>>2]|0,k=(Te|0)==(f|0)&(Ue|0)==(h|0);while(!((Te|0)==0&(Ue|0)==0|k));if(D=x+(D<<2)|0,k&&(d[D>>2]|0)<=(R|0)||(Ue=te,d[Ue>>2]=f,d[Ue+4>>2]=h,d[D>>2]=R,(R|0)>=(p|0)))return Ue=0,$=ve,Ue|0;switch(k=R+1|0,d[le>>2]=0,D=mi(f,h,2,le,ue)|0,D|0){case 9:{ce=9;break}case 0:{D=ue,D=fr(d[D>>2]|0,d[D+4>>2]|0,p,y,x,S,E,k)|0,D||(ce=9);break}}e:do if((ce|0)==9){switch(d[le>>2]=0,D=mi(f,h,3,le,ue)|0,D|0){case 9:break;case 0:{if(D=ue,D=fr(d[D>>2]|0,d[D+4>>2]|0,p,y,x,S,E,k)|0,D|0)break e;break}default:break e}switch(d[le>>2]=0,D=mi(f,h,1,le,ue)|0,D|0){case 9:break;case 0:{if(D=ue,D=fr(d[D>>2]|0,d[D+4>>2]|0,p,y,x,S,E,k)|0,D|0)break e;break}default:break e}switch(d[le>>2]=0,D=mi(f,h,5,le,ue)|0,D|0){case 9:break;case 0:{if(D=ue,D=fr(d[D>>2]|0,d[D+4>>2]|0,p,y,x,S,E,k)|0,D|0)break e;break}default:break e}switch(d[le>>2]=0,D=mi(f,h,4,le,ue)|0,D|0){case 9:break;case 0:{if(D=ue,D=fr(d[D>>2]|0,d[D+4>>2]|0,p,y,x,S,E,k)|0,D|0)break e;break}default:break e}switch(d[le>>2]=0,D=mi(f,h,6,le,ue)|0,D|0){case 9:break;case 0:{if(D=ue,D=fr(d[D>>2]|0,d[D+4>>2]|0,p,y,x,S,E,k)|0,D|0)break e;break}default:break e}return Ue=0,$=ve,Ue|0}while(!1);return Ue=D,$=ve,Ue|0}function mi(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0;if(p>>>0>6)return x=1,x|0;if(te=(d[y>>2]|0)%6|0,d[y>>2]=te,(te|0)>0){S=0;do p=Eo(p)|0,S=S+1|0;while((S|0)<(d[y>>2]|0))}if(te=lt(f|0,h|0,45)|0,K()|0,W=te&127,W>>>0>121)return x=5,x|0;D=kr(f,h)|0,S=lt(f|0,h|0,52)|0,K()|0,S=S&15;e:do if(!S)k=8;else{for(;;){if(E=(15-S|0)*3|0,R=lt(f|0,h|0,E|0)|0,K()|0,R=R&7,(R|0)==7){h=5;break}if(ue=(so(S)|0)==0,S=S+-1|0,ce=mt(7,0,E|0)|0,h=h&~(K()|0),le=mt(d[(ue?432:16)+(R*28|0)+(p<<2)>>2]|0,0,E|0)|0,E=K()|0,p=d[(ue?640:224)+(R*28|0)+(p<<2)>>2]|0,f=le|f&~ce,h=E|h,!p){p=0;break e}if(!S){k=8;break e}}return h|0}while(!1);(k|0)==8&&(ue=d[848+(W*28|0)+(p<<2)>>2]|0,le=mt(ue|0,0,45)|0,f=le|f,h=K()|0|h&-1040385,p=d[4272+(W*28|0)+(p<<2)>>2]|0,(ue&127|0)==127&&(ue=mt(d[848+(W*28|0)+20>>2]|0,0,45)|0,h=K()|0|h&-1040385,p=d[4272+(W*28|0)+20>>2]|0,f=f0(ue|f,h)|0,h=K()|0,d[y>>2]=(d[y>>2]|0)+1)),R=lt(f|0,h|0,45)|0,K()|0,R=R&127;e:do if(Ui(R)|0){t:do if((kr(f,h)|0)==1){if((W|0)!=(R|0))if(g5(R,d[7696+(W*28|0)>>2]|0)|0){f=b1(f,h)|0,E=1,h=K()|0;break}else dt(27795,26864,436,26872);switch(D|0){case 3:{f=f0(f,h)|0,h=K()|0,d[y>>2]=(d[y>>2]|0)+1,E=0;break t}case 5:{f=b1(f,h)|0,h=K()|0,d[y>>2]=(d[y>>2]|0)+5,E=0;break t}case 0:return ue=9,ue|0;default:return ue=1,ue|0}}else E=0;while(!1);if((p|0)>0){S=0;do f=V0(f,h)|0,h=K()|0,S=S+1|0;while((S|0)!=(p|0))}if((W|0)!=(R|0)){if(!(Ru(R)|0)){if((E|0)!=0|(kr(f,h)|0)!=5)break;d[y>>2]=(d[y>>2]|0)+1;break}switch(te&127){case 8:case 118:break e}(kr(f,h)|0)!=3&&(d[y>>2]=(d[y>>2]|0)+1)}}else if((p|0)>0){S=0;do f=f0(f,h)|0,h=K()|0,S=S+1|0;while((S|0)!=(p|0))}while(!1);return d[y>>2]=((d[y>>2]|0)+p|0)%6|0,ue=x,d[ue>>2]=f,d[ue+4>>2]=h,ue=0,ue|0}function Ur(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0;for(R=$,$=$+16|0,S=R,E=R+8|0,x=(wn(f,h)|0)==0,x=x?1:2;;){if(d[E>>2]=0,k=(mi(f,h,x,E,S)|0)==0,D=S,k&((d[D>>2]|0)==(p|0)?(d[D+4>>2]|0)==(y|0):0)){f=4;break}if(x=x+1|0,x>>>0>=7){x=7,f=4;break}}return(f|0)==4?($=R,x|0):0}function k0(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0;if(ue=$,$=$+16|0,ce=ue,le=ue+8|0,te=ce,d[te>>2]=f,d[te+4>>2]=h,!p)return le=y,d[le>>2]=f,d[le+4>>2]=h,le=0,$=ue,le|0;d[le>>2]=0;e:do if(wn(f,h)|0)f=9;else{if(S=(p|0)>0,S){x=0,te=f;do{if(f=mi(te,h,4,le,ce)|0,f|0)break e;if(h=ce,te=d[h>>2]|0,h=d[h+4>>2]|0,x=x+1|0,wn(te,h)|0){f=9;break e}}while((x|0)<(p|0));if(W=y,d[W>>2]=te,d[W+4>>2]=h,W=p+-1|0,S){k=0,f=1;do{if(x=26800+(k<<2)|0,(k|0)==5)for(E=d[x>>2]|0,S=0,x=f;;){if(f=ce,f=mi(d[f>>2]|0,d[f+4>>2]|0,E,le,ce)|0,f|0)break e;if((S|0)!=(W|0))if(D=ce,R=d[D>>2]|0,D=d[D+4>>2]|0,f=y+(x<<3)|0,d[f>>2]=R,d[f+4>>2]=D,!(wn(R,D)|0))f=x+1|0;else{f=9;break e}else f=x;if(S=S+1|0,(S|0)>=(p|0))break;x=f}else for(E=ce,D=d[x>>2]|0,R=0,x=f,S=d[E>>2]|0,E=d[E+4>>2]|0;;){if(f=mi(S,E,D,le,ce)|0,f|0)break e;if(E=ce,S=d[E>>2]|0,E=d[E+4>>2]|0,f=y+(x<<3)|0,d[f>>2]=S,d[f+4>>2]=E,f=x+1|0,wn(S,E)|0){f=9;break e}if(R=R+1|0,(R|0)>=(p|0))break;x=f}k=k+1|0}while(k>>>0<6);f=ce,E=te,x=d[f>>2]|0,S=h,f=d[f+4>>2]|0}else E=te,x=te,S=h,f=h}else E=y,d[E>>2]=f,d[E+4>>2]=h,E=f,x=f,S=h,f=h;f=(E|0)==(x|0)&(S|0)==(f|0)?0:9}while(!1);return le=f,$=ue,le|0}function Mo(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0;if(R=$,$=$+48|0,x=R+16|0,S=R+8|0,E=R,p=E1(p)|0,p|0)return E=p,$=R,E|0;if(k=f,D=d[k+4>>2]|0,p=S,d[p>>2]=d[k>>2],d[p+4>>2]=D,k6(S,x),p=b6(x,h,E)|0,!p){if(h=d[S>>2]|0,S=d[f+8>>2]|0,(S|0)>0){x=d[f+12>>2]|0,p=0;do h=(d[x+(p<<3)>>2]|0)+h|0,p=p+1|0;while((p|0)<(S|0))}p=E,x=d[p>>2]|0,p=d[p+4>>2]|0,S=((h|0)<0)<<31>>31,(p|0)<(S|0)|(p|0)==(S|0)&x>>>0<h>>>0?(p=E,d[p>>2]=h,d[p+4>>2]=S,p=S):h=x,D=ln(h|0,p|0,12,0)|0,k=K()|0,p=E,d[p>>2]=D,d[p+4>>2]=k,p=y,d[p>>2]=D,d[p+4>>2]=k,p=0}return k=p,$=R,k|0}function m1(f,h,p,y,x,S,E){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0,S=S|0,E=E|0;var R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0,In=0,$n=0,_n=0,Xt=0,At=0,Bn=0,yi=0,Ln=0,bi=0,rs=0,j5=0;if(yi=$,$=$+64|0,_n=yi+48|0,Xt=yi+32|0,At=yi+24|0,gt=yi+8|0,en=yi,D=d[f>>2]|0,(D|0)<=0)return Bn=0,$=yi,Bn|0;for(zt=f+4|0,Pn=_n+8|0,In=Xt+8|0,$n=gt+8|0,R=0,Ee=0;;){k=d[zt>>2]|0,Le=k+(Ee<<4)|0,d[_n>>2]=d[Le>>2],d[_n+4>>2]=d[Le+4>>2],d[_n+8>>2]=d[Le+8>>2],d[_n+12>>2]=d[Le+12>>2],(Ee|0)==(D+-1|0)?(d[Xt>>2]=d[k>>2],d[Xt+4>>2]=d[k+4>>2],d[Xt+8>>2]=d[k+8>>2],d[Xt+12>>2]=d[k+12>>2]):(Le=k+(Ee+1<<4)|0,d[Xt>>2]=d[Le>>2],d[Xt+4>>2]=d[Le+4>>2],d[Xt+8>>2]=d[Le+8>>2],d[Xt+12>>2]=d[Le+12>>2]),D=Ma(_n,Xt,y,At)|0;e:do if(D)k=0,R=D;else if(D=At,k=d[D>>2]|0,D=d[D+4>>2]|0,(D|0)>0|(D|0)==0&k>>>0>0){Ue=0,Le=0;t:for(;;){if(bi=1/(+(k>>>0)+4294967296*+(D|0)),j5=+X[_n>>3],D=Gr(k|0,D|0,Ue|0,Le|0)|0,rs=+(D>>>0)+4294967296*+(K()|0),Ln=+(Ue>>>0)+4294967296*+(Le|0),X[gt>>3]=bi*(j5*rs)+bi*(+X[Xt>>3]*Ln),X[$n>>3]=bi*(+X[Pn>>3]*rs)+bi*(+X[In>>3]*Ln),D=z0(gt,y,en)|0,D|0){R=D;break}Te=en,ve=d[Te>>2]|0,Te=d[Te+4>>2]|0,ce=q0(ve|0,Te|0,h|0,p|0)|0,W=K()|0,D=E+(ce<<3)|0,te=D,k=d[te>>2]|0,te=d[te+4>>2]|0;n:do if((k|0)==0&(te|0)==0)_e=D,Bn=16;else for(le=0,ue=0;;){if((le|0)>(p|0)|(le|0)==(p|0)&ue>>>0>h>>>0){R=1;break t}if((k|0)==(ve|0)&(te|0)==(Te|0))break n;if(D=ln(ce|0,W|0,1,0)|0,ce=Pl(D|0,K()|0,h|0,p|0)|0,W=K()|0,ue=ln(ue|0,le|0,1,0)|0,le=K()|0,D=E+(ce<<3)|0,te=D,k=d[te>>2]|0,te=d[te+4>>2]|0,(k|0)==0&(te|0)==0){_e=D,Bn=16;break}}while(!1);if((Bn|0)==16&&(Bn=0,!((ve|0)==0&(Te|0)==0))&&(ue=_e,d[ue>>2]=ve,d[ue+4>>2]=Te,ue=S+(d[x>>2]<<3)|0,d[ue>>2]=ve,d[ue+4>>2]=Te,ue=x,ue=ln(d[ue>>2]|0,d[ue+4>>2]|0,1,0)|0,ve=K()|0,Te=x,d[Te>>2]=ue,d[Te+4>>2]=ve),Ue=ln(Ue|0,Le|0,1,0)|0,Le=K()|0,D=At,k=d[D>>2]|0,D=d[D+4>>2]|0,!((D|0)>(Le|0)|(D|0)==(Le|0)&k>>>0>Ue>>>0)){k=1;break e}}k=0}else k=1;while(!1);if(Ee=Ee+1|0,!k){Bn=21;break}if(D=d[f>>2]|0,(Ee|0)>=(D|0)){R=0,Bn=21;break}}return(Bn|0)==21?($=yi,R|0):0}function kc(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0,In=0,$n=0,_n=0,Xt=0,At=0,Bn=0,yi=0,Ln=0,bi=0,rs=0;if(rs=$,$=$+112|0,Bn=rs+80|0,D=rs+72|0,yi=rs,Ln=rs+56|0,x=E1(p)|0,x|0)return bi=x,$=rs,bi|0;if(k=f+8|0,bi=aa((d[k>>2]<<5)+32|0)|0,!bi)return bi=13,$=rs,bi|0;if(B5(f,bi),x=E1(p)|0,!x){if(Xt=f,At=d[Xt+4>>2]|0,x=D,d[x>>2]=d[Xt>>2],d[x+4>>2]=At,k6(D,Bn),x=b6(Bn,h,yi)|0,x)Xt=0,At=0;else{if(x=d[D>>2]|0,S=d[k>>2]|0,(S|0)>0){E=d[f+12>>2]|0,p=0;do x=(d[E+(p<<3)>>2]|0)+x|0,p=p+1|0;while((p|0)!=(S|0));p=x}else p=x;x=yi,S=d[x>>2]|0,x=d[x+4>>2]|0,E=((p|0)<0)<<31>>31,(x|0)<(E|0)|(x|0)==(E|0)&S>>>0<p>>>0?(x=yi,d[x>>2]=p,d[x+4>>2]=E,x=E):p=S,Xt=ln(p|0,x|0,12,0)|0,At=K()|0,x=yi,d[x>>2]=Xt,d[x+4>>2]=At,x=0}if(!x){if(p=ao(Xt,8)|0,!p)return xn(bi),bi=13,$=rs,bi|0;if(R=ao(Xt,8)|0,!R)return xn(bi),xn(p),bi=13,$=rs,bi|0;$n=Bn,d[$n>>2]=0,d[$n+4>>2]=0,$n=f,_n=d[$n+4>>2]|0,x=D,d[x>>2]=d[$n>>2],d[x+4>>2]=_n,x=m1(D,Xt,At,h,Bn,p,R)|0;e:do if(x)xn(p),xn(R),xn(bi);else{t:do if((d[k>>2]|0)>0){for(E=f+12|0,S=0;x=m1((d[E>>2]|0)+(S<<3)|0,Xt,At,h,Bn,p,R)|0,S=S+1|0,!(x|0);)if((S|0)>=(d[k>>2]|0))break t;xn(p),xn(R),xn(bi);break e}while(!1);(At|0)>0|(At|0)==0&Xt>>>0>0&&Nl(R|0,0,Xt<<3|0)|0,_n=Bn,$n=d[_n+4>>2]|0;t:do if(($n|0)>0|($n|0)==0&(d[_n>>2]|0)>>>0>0){zt=p,Pn=R,In=p,$n=R,_n=p,x=p,_e=p,gt=R,en=R,p=R;n:for(;;){for(Te=0,Ue=0,Le=0,Ee=0,S=0,E=0;;){R=yi,D=R+56|0;do d[R>>2]=0,R=R+4|0;while((R|0)<(D|0));if(h=zt+(Te<<3)|0,k=d[h>>2]|0,h=d[h+4>>2]|0,$i(k,h,1,yi,0)|0){R=yi,D=R+56|0;do d[R>>2]=0,R=R+4|0;while((R|0)<(D|0));R=ao(7,4)|0,R|0&&(fr(k,h,1,yi,R,7,0,0)|0,xn(R))}for(ve=0;;){ue=yi+(ve<<3)|0,le=d[ue>>2]|0,ue=d[ue+4>>2]|0;i:do if((le|0)==0&(ue|0)==0)R=S,D=E;else{if(W=q0(le|0,ue|0,Xt|0,At|0)|0,k=K()|0,R=y+(W<<3)|0,h=R,D=d[h>>2]|0,h=d[h+4>>2]|0,!((D|0)==0&(h|0)==0)){te=0,ce=0;do{if((te|0)>(At|0)|(te|0)==(At|0)&ce>>>0>Xt>>>0)break n;if((D|0)==(le|0)&(h|0)==(ue|0)){R=S,D=E;break i}R=ln(W|0,k|0,1,0)|0,W=Pl(R|0,K()|0,Xt|0,At|0)|0,k=K()|0,ce=ln(ce|0,te|0,1,0)|0,te=K()|0,R=y+(W<<3)|0,h=R,D=d[h>>2]|0,h=d[h+4>>2]|0}while(!((D|0)==0&(h|0)==0))}if((le|0)==0&(ue|0)==0){R=S,D=E;break}Vr(le,ue,Ln)|0,F5(f,bi,Ln)|0&&(ce=ln(S|0,E|0,1,0)|0,E=K()|0,te=R,d[te>>2]=le,d[te+4>>2]=ue,S=Pn+(S<<3)|0,d[S>>2]=le,d[S+4>>2]=ue,S=ce),R=S,D=E}while(!1);if(ve=ve+1|0,ve>>>0>=7)break;S=R,E=D}if(Te=ln(Te|0,Ue|0,1,0)|0,Ue=K()|0,Le=ln(Le|0,Ee|0,1,0)|0,Ee=K()|0,E=Bn,S=d[E>>2]|0,E=d[E+4>>2]|0,(Ee|0)<(E|0)|(Ee|0)==(E|0)&Le>>>0<S>>>0)S=R,E=D;else break}if((E|0)>0|(E|0)==0&S>>>0>0){S=0,E=0;do Ee=zt+(S<<3)|0,d[Ee>>2]=0,d[Ee+4>>2]=0,S=ln(S|0,E|0,1,0)|0,E=K()|0,Ee=Bn,Le=d[Ee+4>>2]|0;while((E|0)<(Le|0)|((E|0)==(Le|0)?S>>>0<(d[Ee>>2]|0)>>>0:0))}if(Ee=Bn,d[Ee>>2]=R,d[Ee+4>>2]=D,(D|0)>0|(D|0)==0&R>>>0>0)ve=p,Te=en,Ue=_n,Le=gt,Ee=Pn,p=_e,en=x,gt=In,_e=ve,x=Te,_n=$n,$n=Ue,In=Le,Pn=zt,zt=Ee;else break t}xn(In),xn($n),xn(bi),x=1;break e}else x=R;while(!1);xn(bi),xn(p),xn(x),x=0}while(!1);return bi=x,$=rs,bi|0}}return xn(bi),bi=x,$=rs,bi|0}function UA(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(W=$,$=$+176|0,D=W,(h|0)<1)return q5(p,0,0),k=0,$=W,k|0;for(R=f,R=lt(d[R>>2]|0,d[R+4>>2]|0,52)|0,K()|0,q5(p,(h|0)>6?h:6,R&15),R=0;y=f+(R<<3)|0,y=Pa(d[y>>2]|0,d[y+4>>2]|0,D)|0,!(y|0);){if(y=d[D>>2]|0,(y|0)>0){E=0;do S=D+8+(E<<4)|0,E=E+1|0,y=D+8+(((E|0)%(y|0)|0)<<4)|0,x=oo(p,y,S)|0,x?q6(p,x)|0:XA(p,S,y)|0,y=d[D>>2]|0;while((E|0)<(y|0))}if(R=R+1|0,(R|0)>=(h|0)){y=0,k=13;break}}return(k|0)==13?($=W,y|0):(C1(p),k=y,$=W,k|0)}function OA(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0;if(S=$,$=$+32|0,y=S,x=S+16|0,f=UA(f,h,x)|0,f|0)return p=f,$=S,p|0;if(d[p>>2]=0,d[p+4>>2]=0,d[p+8>>2]=0,f=is(x)|0,f|0)do{h=L6(p)|0;do D6(h,f)|0,E=f+16|0,d[y>>2]=d[E>>2],d[y+4>>2]=d[E+4>>2],d[y+8>>2]=d[E+8>>2],d[y+12>>2]=d[E+12>>2],q6(x,f)|0,f=Rs(x,y)|0;while(f|0);f=is(x)|0}while(f|0);return C1(x),f=B6(p)|0,f?(P5(p),E=f,$=S,E|0):(E=0,$=S,E|0)}function Ui(f){return f=f|0,f>>>0>121?(f=0,f|0):(f=d[7696+(f*28|0)+16>>2]|0,f|0)}function Ru(f){return f=f|0,(f|0)==4|(f|0)==117|0}function g1(f){return f=f|0,d[11120+((d[f>>2]|0)*216|0)+((d[f+4>>2]|0)*72|0)+((d[f+8>>2]|0)*24|0)+(d[f+12>>2]<<3)>>2]|0}function kA(f){return f=f|0,d[11120+((d[f>>2]|0)*216|0)+((d[f+4>>2]|0)*72|0)+((d[f+8>>2]|0)*24|0)+(d[f+12>>2]<<3)+4>>2]|0}function m5(f,h){f=f|0,h=h|0,f=7696+(f*28|0)|0,d[h>>2]=d[f>>2],d[h+4>>2]=d[f+4>>2],d[h+8>>2]=d[f+8>>2],d[h+12>>2]=d[f+12>>2]}function vi(f,h){f=f|0,h=h|0;var p=0,y=0;if(h>>>0>20)return h=-1,h|0;do if((d[11120+(h*216|0)>>2]|0)!=(f|0))if((d[11120+(h*216|0)+8>>2]|0)!=(f|0))if((d[11120+(h*216|0)+16>>2]|0)!=(f|0))if((d[11120+(h*216|0)+24>>2]|0)!=(f|0))if((d[11120+(h*216|0)+32>>2]|0)!=(f|0))if((d[11120+(h*216|0)+40>>2]|0)!=(f|0))if((d[11120+(h*216|0)+48>>2]|0)!=(f|0))if((d[11120+(h*216|0)+56>>2]|0)!=(f|0))if((d[11120+(h*216|0)+64>>2]|0)!=(f|0))if((d[11120+(h*216|0)+72>>2]|0)!=(f|0))if((d[11120+(h*216|0)+80>>2]|0)!=(f|0))if((d[11120+(h*216|0)+88>>2]|0)!=(f|0))if((d[11120+(h*216|0)+96>>2]|0)!=(f|0))if((d[11120+(h*216|0)+104>>2]|0)!=(f|0))if((d[11120+(h*216|0)+112>>2]|0)!=(f|0))if((d[11120+(h*216|0)+120>>2]|0)!=(f|0))if((d[11120+(h*216|0)+128>>2]|0)!=(f|0))if((d[11120+(h*216|0)+136>>2]|0)==(f|0))f=2,p=1,y=2;else{if((d[11120+(h*216|0)+144>>2]|0)==(f|0)){f=0,p=2,y=0;break}if((d[11120+(h*216|0)+152>>2]|0)==(f|0)){f=0,p=2,y=1;break}if((d[11120+(h*216|0)+160>>2]|0)==(f|0)){f=0,p=2,y=2;break}if((d[11120+(h*216|0)+168>>2]|0)==(f|0)){f=1,p=2,y=0;break}if((d[11120+(h*216|0)+176>>2]|0)==(f|0)){f=1,p=2,y=1;break}if((d[11120+(h*216|0)+184>>2]|0)==(f|0)){f=1,p=2,y=2;break}if((d[11120+(h*216|0)+192>>2]|0)==(f|0)){f=2,p=2,y=0;break}if((d[11120+(h*216|0)+200>>2]|0)==(f|0)){f=2,p=2,y=1;break}if((d[11120+(h*216|0)+208>>2]|0)==(f|0)){f=2,p=2,y=2;break}else f=-1;return f|0}else f=2,p=1,y=1;else f=2,p=1,y=0;else f=1,p=1,y=2;else f=1,p=1,y=1;else f=1,p=1,y=0;else f=0,p=1,y=2;else f=0,p=1,y=1;else f=0,p=1,y=0;else f=2,p=0,y=2;else f=2,p=0,y=1;else f=2,p=0,y=0;else f=1,p=0,y=2;else f=1,p=0,y=1;else f=1,p=0,y=0;else f=0,p=0,y=2;else f=0,p=0,y=1;else f=0,p=0,y=0;while(!1);return h=d[11120+(h*216|0)+(p*72|0)+(f*24|0)+(y<<3)+4>>2]|0,h|0}function g5(f,h){return f=f|0,h=h|0,(d[7696+(f*28|0)+20>>2]|0)==(h|0)?(h=1,h|0):(h=(d[7696+(f*28|0)+24>>2]|0)==(h|0),h|0)}function Cu(f,h){return f=f|0,h=h|0,d[848+(f*28|0)+(h<<2)>>2]|0}function Vc(f,h){return f=f|0,h=h|0,(d[848+(f*28|0)>>2]|0)==(h|0)?(h=0,h|0):(d[848+(f*28|0)+4>>2]|0)==(h|0)?(h=1,h|0):(d[848+(f*28|0)+8>>2]|0)==(h|0)?(h=2,h|0):(d[848+(f*28|0)+12>>2]|0)==(h|0)?(h=3,h|0):(d[848+(f*28|0)+16>>2]|0)==(h|0)?(h=4,h|0):(d[848+(f*28|0)+20>>2]|0)==(h|0)?(h=5,h|0):((d[848+(f*28|0)+24>>2]|0)==(h|0)?6:7)|0}function VA(){return 122}function zA(f){f=f|0;var h=0,p=0,y=0;h=0;do mt(h|0,0,45)|0,y=K()|0|134225919,p=f+(h<<3)|0,d[p>>2]=-1,d[p+4>>2]=y,h=h+1|0;while((h|0)!=122);return 0}function Or(f){f=f|0;var h=0,p=0,y=0;return y=+X[f+16>>3],p=+X[f+24>>3],h=y-p,+(y<p?h+6.283185307179586:h)}function zc(f){return f=f|0,+X[f+16>>3]<+X[f+24>>3]|0}function GA(f){return f=f|0,+(+X[f>>3]-+X[f+8>>3])}function Pu(f,h){f=f|0,h=h|0;var p=0,y=0,x=0;return p=+X[h>>3],!(p>=+X[f+8>>3])||!(p<=+X[f>>3])?(h=0,h|0):(y=+X[f+16>>3],p=+X[f+24>>3],x=+X[h+8>>3],h=x>=p,f=x<=y&1,y<p?h&&(f=1):h||(f=0),h=(f|0)!=0,h|0)}function y5(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;return+X[f>>3]<+X[h+8>>3]||+X[f+8>>3]>+X[h>>3]?(y=0,y|0):(S=+X[f+16>>3],p=f+24|0,W=+X[p>>3],E=S<W,y=h+16|0,k=+X[y>>3],x=h+24|0,D=+X[x>>3],R=k<D,h=W-k<D-S,f=E?R|h?1:2:0,h=R?E?1:h?2:1:0,S=+er(S,f),S<+er(+X[x>>3],h)||(W=+er(+X[p>>3],f),W>+er(+X[y>>3],h))?(R=0,R|0):(R=1,R|0))}function Gc(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0;S=+X[f+16>>3],D=+X[f+24>>3],f=S<D,R=+X[h+16>>3],E=+X[h+24>>3],x=R<E,h=D-R<E-S,d[p>>2]=f?x|h?1:2:0,d[y>>2]=x?f?1:h?2:1:0}function na(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;return+X[f>>3]<+X[h>>3]||+X[f+8>>3]>+X[h+8>>3]?(y=0,y|0):(y=f+16|0,D=+X[y>>3],S=+X[f+24>>3],E=D<S,p=h+16|0,W=+X[p>>3],x=h+24|0,k=+X[x>>3],R=W<k,h=S-W<k-D,f=E?R|h?1:2:0,h=R?E?1:h?2:1:0,S=+er(S,f),S<=+er(+X[x>>3],h)?(W=+er(+X[y>>3],f),R=W>=+er(+X[p>>3],h),R|0):(R=0,R|0))}function x6(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0;x=$,$=$+176|0,y=x,d[y>>2]=4,R=+X[h>>3],X[y+8>>3]=R,S=+X[h+16>>3],X[y+16>>3]=S,X[y+24>>3]=R,R=+X[h+24>>3],X[y+32>>3]=R,E=+X[h+8>>3],X[y+40>>3]=E,X[y+48>>3]=R,X[y+56>>3]=E,X[y+64>>3]=S,h=y+72|0,p=h+96|0;do d[h>>2]=0,h=h+4|0;while((h|0)<(p|0));P1(f|0,y|0,168)|0,$=x}function b6(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0;ue=$,$=$+288|0,W=ue+264|0,te=ue+96|0,k=ue,R=k,D=R+96|0;do d[R>>2]=0,R=R+4|0;while((R|0)<(D|0));return h=G0(h,k)|0,h|0?(le=h,$=ue,le|0):(D=k,k=d[D>>2]|0,D=d[D+4>>2]|0,Vr(k,D,W)|0,Pa(k,D,te)|0,E=+zi(W,te+8|0),X[W>>3]=+X[f>>3],D=W+8|0,X[D>>3]=+X[f+16>>3],X[te>>3]=+X[f+8>>3],k=te+8|0,X[k>>3]=+X[f+24>>3],x=+zi(W,te),Te=+X[D>>3]-+X[k>>3],S=+On(+Te),ve=+X[W>>3]-+X[te>>3],y=+On(+ve),!(Te==0|ve==0)&&(Te=+d3(+S,+y),Te=+Ve(+(x*x/+$u(+(Te/+$u(+S,+y)),3)/(E*(E*2.59807621135)*.8))),X[ii>>3]=Te,ce=~~Te>>>0,le=+On(Te)>=1?Te>0?~~+pt(+pr(Te/4294967296),4294967295)>>>0:~~+Ve((Te-+(~~Te>>>0))/4294967296)>>>0:0,(d[ii+4>>2]&2146435072|0)!=2146435072)?(te=(ce|0)==0&(le|0)==0,h=p,d[h>>2]=te?1:ce,d[h+4>>2]=te?0:le,h=0):h=1,le=h,$=ue,le|0)}function Ma(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0;k=$,$=$+288|0,E=k+264|0,R=k+96|0,D=k,x=D,S=x+96|0;do d[x>>2]=0,x=x+4|0;while((x|0)<(S|0));return p=G0(p,D)|0,p|0?(y=p,$=k,y|0):(p=D,x=d[p>>2]|0,p=d[p+4>>2]|0,Vr(x,p,E)|0,Pa(x,p,R)|0,W=+zi(E,R+8|0),W=+Ve(+(+zi(f,h)/(W*2))),X[ii>>3]=W,p=~~W>>>0,x=+On(W)>=1?W>0?~~+pt(+pr(W/4294967296),4294967295)>>>0:~~+Ve((W-+(~~W>>>0))/4294967296)>>>0:0,(d[ii+4>>2]&2146435072|0)==2146435072?(y=1,$=k,y|0):(D=(p|0)==0&(x|0)==0,d[y>>2]=D?1:p,d[y+4>>2]=D?0:x,y=0,$=k,y|0))}function a0(f,h){f=f|0,h=+h;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;S=f+16|0,E=+X[S>>3],p=f+24|0,x=+X[p>>3],y=E-x,y=E<x?y+6.283185307179586:y,k=+X[f>>3],R=f+8|0,D=+X[R>>3],W=k-D,y=(y*h-y)*.5,h=(W*h-W)*.5,k=k+h,X[f>>3]=k>1.5707963267948966?1.5707963267948966:k,h=D-h,X[R>>3]=h<-1.5707963267948966?-1.5707963267948966:h,h=E+y,h=h>3.141592653589793?h+-6.283185307179586:h,X[S>>3]=h<-3.141592653589793?h+6.283185307179586:h,h=x-y,h=h>3.141592653589793?h+-6.283185307179586:h,X[p>>3]=h<-3.141592653589793?h+6.283185307179586:h}function qc(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0,d[f>>2]=h,d[f+4>>2]=p,d[f+8>>2]=y}function v5(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0;te=h+8|0,d[te>>2]=0,D=+X[f>>3],E=+On(+D),k=+X[f+8>>3],R=+On(+k)*1.1547005383792515,E=E+R*.5,p=~~E,f=~~R,E=E-+(p|0),R=R-+(f|0);do if(E<.5)if(E<.3333333333333333)if(d[h>>2]=p,R<(E+1)*.5){d[h+4>>2]=f;break}else{f=f+1|0,d[h+4>>2]=f;break}else if(ce=1-E,f=(!(R<ce)&1)+f|0,d[h+4>>2]=f,ce<=R&R<E*2){p=p+1|0,d[h>>2]=p;break}else{d[h>>2]=p;break}else{if(!(E<.6666666666666666))if(p=p+1|0,d[h>>2]=p,R<E*.5){d[h+4>>2]=f;break}else{f=f+1|0,d[h+4>>2]=f;break}if(R<1-E){if(d[h+4>>2]=f,E*2+-1<R){d[h>>2]=p;break}}else f=f+1|0,d[h+4>>2]=f;p=p+1|0,d[h>>2]=p}while(!1);do if(D<0)if(f&1){W=(f+1|0)/2|0,W=Gr(p|0,((p|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,p=~~(+(p|0)-((+(W>>>0)+4294967296*+(K()|0))*2+1)),d[h>>2]=p;break}else{W=(f|0)/2|0,W=Gr(p|0,((p|0)<0)<<31>>31|0,W|0,((W|0)<0)<<31>>31|0)|0,p=~~(+(p|0)-(+(W>>>0)+4294967296*+(K()|0))*2),d[h>>2]=p;break}while(!1);W=h+4|0,k<0&&(p=p-((f<<1|1|0)/2|0)|0,d[h>>2]=p,f=0-f|0,d[W>>2]=f),y=f-p|0,(p|0)<0?(x=0-p|0,d[W>>2]=y,d[te>>2]=x,d[h>>2]=0,f=y,p=0):x=0,(f|0)<0&&(p=p-f|0,d[h>>2]=p,x=x-f|0,d[te>>2]=x,d[W>>2]=0,f=0),S=p-x|0,y=f-x|0,(x|0)<0&&(d[h>>2]=S,d[W>>2]=y,d[te>>2]=0,f=y,p=S,x=0),y=(f|0)<(p|0)?f:p,y=(x|0)<(y|0)?x:y,!((y|0)<=0)&&(d[h>>2]=p-y,d[W>>2]=f-y,d[te>>2]=x-y)}function es(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0;h=d[f>>2]|0,E=f+4|0,p=d[E>>2]|0,(h|0)<0&&(p=p-h|0,d[E>>2]=p,S=f+8|0,d[S>>2]=(d[S>>2]|0)-h,d[f>>2]=0,h=0),(p|0)<0?(h=h-p|0,d[f>>2]=h,S=f+8|0,x=(d[S>>2]|0)-p|0,d[S>>2]=x,d[E>>2]=0,p=0):(x=f+8|0,S=x,x=d[x>>2]|0),(x|0)<0&&(h=h-x|0,d[f>>2]=h,p=p-x|0,d[E>>2]=p,d[S>>2]=0,x=0),y=(p|0)<(h|0)?p:h,y=(x|0)<(y|0)?x:y,!((y|0)<=0)&&(d[f>>2]=h-y,d[E>>2]=p-y,d[S>>2]=x-y)}function Tl(f,h){f=f|0,h=h|0;var p=0,y=0;y=d[f+8>>2]|0,p=+((d[f+4>>2]|0)-y|0),X[h>>3]=+((d[f>>2]|0)-y|0)-p*.5,X[h+8>>3]=p*.8660254037844386}function Ji(f,h,p){f=f|0,h=h|0,p=p|0,d[p>>2]=(d[h>>2]|0)+(d[f>>2]|0),d[p+4>>2]=(d[h+4>>2]|0)+(d[f+4>>2]|0),d[p+8>>2]=(d[h+8>>2]|0)+(d[f+8>>2]|0)}function _5(f,h,p){f=f|0,h=h|0,p=p|0,d[p>>2]=(d[f>>2]|0)-(d[h>>2]|0),d[p+4>>2]=(d[f+4>>2]|0)-(d[h+4>>2]|0),d[p+8>>2]=(d[f+8>>2]|0)-(d[h+8>>2]|0)}function Nu(f,h){f=f|0,h=h|0;var p=0,y=0;p=Me(d[f>>2]|0,h)|0,d[f>>2]=p,p=f+4|0,y=Me(d[p>>2]|0,h)|0,d[p>>2]=y,f=f+8|0,h=Me(d[f>>2]|0,h)|0,d[f>>2]=h}function Hc(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;E=d[f>>2]|0,R=(E|0)<0,y=(d[f+4>>2]|0)-(R?E:0)|0,S=(y|0)<0,x=(S?0-y|0:0)+((d[f+8>>2]|0)-(R?E:0))|0,p=(x|0)<0,f=p?0:x,h=(S?0:y)-(p?x:0)|0,x=(R?0:E)-(S?y:0)-(p?x:0)|0,p=(h|0)<(x|0)?h:x,p=(f|0)<(p|0)?f:p,y=(p|0)>0,f=f-(y?p:0)|0,h=h-(y?p:0)|0;e:do switch(x-(y?p:0)|0){case 0:switch(h|0){case 0:return R=f|0?(f|0)==1?1:7:0,R|0;case 1:return R=f|0?(f|0)==1?3:7:2,R|0;default:break e}case 1:switch(h|0){case 0:return R=f|0?(f|0)==1?5:7:4,R|0;case 1:{if(!f)f=6;else break e;return f|0}default:break e}}while(!1);return R=7,R|0}function ia(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0;if(D=f+8|0,E=d[D>>2]|0,R=(d[f>>2]|0)-E|0,k=f+4|0,E=(d[k>>2]|0)-E|0,R>>>0>715827881|E>>>0>715827881){if(y=(R|0)>0,x=2147483647-R|0,S=-2147483648-R|0,(y?(x|0)<(R|0):(S|0)>(R|0))||(p=R<<1,y?(2147483647-p|0)<(R|0):(-2147483648-p|0)>(R|0))||((E|0)>0?(2147483647-E|0)<(E|0):(-2147483648-E|0)>(E|0))||(h=R*3|0,p=E<<1,(y?(x|0)<(p|0):(S|0)>(p|0))||((R|0)>-1?(h|-2147483648|0)>=(E|0):(h^-2147483648|0)<(E|0))))return k=1,k|0}else p=E<<1,h=R*3|0;return y=p0(+(h-E|0)*.14285714285714285)|0,d[f>>2]=y,x=p0(+(p+R|0)*.14285714285714285)|0,d[k>>2]=x,d[D>>2]=0,p=(x|0)<(y|0),h=p?y:x,p=p?x:y,(p|0)<0&&(((p|0)==-2147483648||((h|0)>0?(2147483647-h|0)<(p|0):(-2147483648-h|0)>(p|0)))&&dt(27795,26892,354,26903),((h|0)>-1?(h|-2147483648|0)>=(p|0):(h^-2147483648|0)<(p|0))&&dt(27795,26892,354,26903)),h=x-y|0,(y|0)<0?(p=0-y|0,d[k>>2]=h,d[D>>2]=p,d[f>>2]=0,y=0):(h=x,p=0),(h|0)<0&&(y=y-h|0,d[f>>2]=y,p=p-h|0,d[D>>2]=p,d[k>>2]=0,h=0),S=y-p|0,x=h-p|0,(p|0)<0?(d[f>>2]=S,d[k>>2]=x,d[D>>2]=0,h=x,x=S,p=0):x=y,y=(h|0)<(x|0)?h:x,y=(p|0)<(y|0)?p:y,(y|0)<=0?(k=0,k|0):(d[f>>2]=x-y,d[k>>2]=h-y,d[D>>2]=p-y,k=0,k|0)}function Wc(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0,D=0;if(E=f+8|0,x=d[E>>2]|0,S=(d[f>>2]|0)-x|0,R=f+4|0,x=(d[R>>2]|0)-x|0,S>>>0>715827881|x>>>0>715827881){if(p=(S|0)>0,(p?(2147483647-S|0)<(S|0):(-2147483648-S|0)>(S|0))||(h=S<<1,y=(x|0)>0,y?(2147483647-x|0)<(x|0):(-2147483648-x|0)>(x|0)))return R=1,R|0;if(D=x<<1,(y?(2147483647-D|0)<(x|0):(-2147483648-D|0)>(x|0))||(p?(2147483647-h|0)<(x|0):(-2147483648-h|0)>(x|0))||(p=x*3|0,(x|0)>-1?(p|-2147483648|0)>=(S|0):(p^-2147483648|0)<(S|0)))return D=1,D|0}else p=x*3|0,h=S<<1;return y=p0(+(h+x|0)*.14285714285714285)|0,d[f>>2]=y,x=p0(+(p-S|0)*.14285714285714285)|0,d[R>>2]=x,d[E>>2]=0,p=(x|0)<(y|0),h=p?y:x,p=p?x:y,(p|0)<0&&(((p|0)==-2147483648||((h|0)>0?(2147483647-h|0)<(p|0):(-2147483648-h|0)>(p|0)))&&dt(27795,26892,402,26917),((h|0)>-1?(h|-2147483648|0)>=(p|0):(h^-2147483648|0)<(p|0))&&dt(27795,26892,402,26917)),h=x-y|0,(y|0)<0?(p=0-y|0,d[R>>2]=h,d[E>>2]=p,d[f>>2]=0,y=0):(h=x,p=0),(h|0)<0&&(y=y-h|0,d[f>>2]=y,p=p-h|0,d[E>>2]=p,d[R>>2]=0,h=0),S=y-p|0,x=h-p|0,(p|0)<0?(d[f>>2]=S,d[R>>2]=x,d[E>>2]=0,h=x,x=S,p=0):x=y,y=(h|0)<(x|0)?h:x,y=(p|0)<(y|0)?p:y,(y|0)<=0?(D=0,D|0):(d[f>>2]=x-y,d[R>>2]=h-y,d[E>>2]=p-y,D=0,D|0)}function jc(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;E=f+8|0,p=d[E>>2]|0,h=(d[f>>2]|0)-p|0,R=f+4|0,p=(d[R>>2]|0)-p|0,y=p0(+((h*3|0)-p|0)*.14285714285714285)|0,d[f>>2]=y,h=p0(+((p<<1)+h|0)*.14285714285714285)|0,d[R>>2]=h,d[E>>2]=0,p=h-y|0,(y|0)<0?(S=0-y|0,d[R>>2]=p,d[E>>2]=S,d[f>>2]=0,h=p,y=0,p=S):p=0,(h|0)<0&&(y=y-h|0,d[f>>2]=y,p=p-h|0,d[E>>2]=p,d[R>>2]=0,h=0),S=y-p|0,x=h-p|0,(p|0)<0?(d[f>>2]=S,d[R>>2]=x,d[E>>2]=0,h=x,x=S,p=0):x=y,y=(h|0)<(x|0)?h:x,y=(p|0)<(y|0)?p:y,!((y|0)<=0)&&(d[f>>2]=x-y,d[R>>2]=h-y,d[E>>2]=p-y)}function wl(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;E=f+8|0,p=d[E>>2]|0,h=(d[f>>2]|0)-p|0,R=f+4|0,p=(d[R>>2]|0)-p|0,y=p0(+((h<<1)+p|0)*.14285714285714285)|0,d[f>>2]=y,h=p0(+((p*3|0)-h|0)*.14285714285714285)|0,d[R>>2]=h,d[E>>2]=0,p=h-y|0,(y|0)<0?(S=0-y|0,d[R>>2]=p,d[E>>2]=S,d[f>>2]=0,h=p,y=0,p=S):p=0,(h|0)<0&&(y=y-h|0,d[f>>2]=y,p=p-h|0,d[E>>2]=p,d[R>>2]=0,h=0),S=y-p|0,x=h-p|0,(p|0)<0?(d[f>>2]=S,d[R>>2]=x,d[E>>2]=0,h=x,x=S,p=0):x=y,y=(h|0)<(x|0)?h:x,y=(p|0)<(y|0)?p:y,!((y|0)<=0)&&(d[f>>2]=x-y,d[R>>2]=h-y,d[E>>2]=p-y)}function y1(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;h=d[f>>2]|0,E=f+4|0,p=d[E>>2]|0,R=f+8|0,y=d[R>>2]|0,x=p+(h*3|0)|0,d[f>>2]=x,p=y+(p*3|0)|0,d[E>>2]=p,h=(y*3|0)+h|0,d[R>>2]=h,y=p-x|0,(x|0)<0?(h=h-x|0,d[E>>2]=y,d[R>>2]=h,d[f>>2]=0,p=y,y=0):y=x,(p|0)<0&&(y=y-p|0,d[f>>2]=y,h=h-p|0,d[R>>2]=h,d[E>>2]=0,p=0),S=y-h|0,x=p-h|0,(h|0)<0?(d[f>>2]=S,d[E>>2]=x,d[R>>2]=0,y=S,h=0):x=p,p=(x|0)<(y|0)?x:y,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(d[f>>2]=y-p,d[E>>2]=x-p,d[R>>2]=h-p)}function l0(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;x=d[f>>2]|0,E=f+4|0,h=d[E>>2]|0,R=f+8|0,p=d[R>>2]|0,y=(h*3|0)+x|0,x=p+(x*3|0)|0,d[f>>2]=x,d[E>>2]=y,h=(p*3|0)+h|0,d[R>>2]=h,p=y-x|0,(x|0)<0?(h=h-x|0,d[E>>2]=p,d[R>>2]=h,d[f>>2]=0,x=0):p=y,(p|0)<0&&(x=x-p|0,d[f>>2]=x,h=h-p|0,d[R>>2]=h,d[E>>2]=0,p=0),S=x-h|0,y=p-h|0,(h|0)<0?(d[f>>2]=S,d[E>>2]=y,d[R>>2]=0,x=S,h=0):y=p,p=(y|0)<(x|0)?y:x,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(d[f>>2]=x-p,d[E>>2]=y-p,d[R>>2]=h-p)}function x5(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0;(h+-1|0)>>>0>=6||(x=(d[15440+(h*12|0)>>2]|0)+(d[f>>2]|0)|0,d[f>>2]=x,R=f+4|0,y=(d[15440+(h*12|0)+4>>2]|0)+(d[R>>2]|0)|0,d[R>>2]=y,E=f+8|0,h=(d[15440+(h*12|0)+8>>2]|0)+(d[E>>2]|0)|0,d[E>>2]=h,p=y-x|0,(x|0)<0?(h=h-x|0,d[R>>2]=p,d[E>>2]=h,d[f>>2]=0,y=0):(p=y,y=x),(p|0)<0&&(y=y-p|0,d[f>>2]=y,h=h-p|0,d[E>>2]=h,d[R>>2]=0,p=0),S=y-h|0,x=p-h|0,(h|0)<0?(d[f>>2]=S,d[R>>2]=x,d[E>>2]=0,y=S,h=0):x=p,p=(x|0)<(y|0)?x:y,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(d[f>>2]=y-p,d[R>>2]=x-p,d[E>>2]=h-p))}function $c(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;x=d[f>>2]|0,E=f+4|0,h=d[E>>2]|0,R=f+8|0,p=d[R>>2]|0,y=h+x|0,x=p+x|0,d[f>>2]=x,d[E>>2]=y,h=p+h|0,d[R>>2]=h,p=y-x|0,(x|0)<0?(h=h-x|0,d[E>>2]=p,d[R>>2]=h,d[f>>2]=0,y=0):(p=y,y=x),(p|0)<0&&(y=y-p|0,d[f>>2]=y,h=h-p|0,d[R>>2]=h,d[E>>2]=0,p=0),S=y-h|0,x=p-h|0,(h|0)<0?(d[f>>2]=S,d[E>>2]=x,d[R>>2]=0,y=S,h=0):x=p,p=(x|0)<(y|0)?x:y,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(d[f>>2]=y-p,d[E>>2]=x-p,d[R>>2]=h-p)}function v1(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;h=d[f>>2]|0,E=f+4|0,y=d[E>>2]|0,R=f+8|0,p=d[R>>2]|0,x=y+h|0,d[f>>2]=x,y=p+y|0,d[E>>2]=y,h=p+h|0,d[R>>2]=h,p=y-x|0,(x|0)<0?(h=h-x|0,d[E>>2]=p,d[R>>2]=h,d[f>>2]=0,y=0):(p=y,y=x),(p|0)<0&&(y=y-p|0,d[f>>2]=y,h=h-p|0,d[R>>2]=h,d[E>>2]=0,p=0),S=y-h|0,x=p-h|0,(h|0)<0?(d[f>>2]=S,d[E>>2]=x,d[R>>2]=0,y=S,h=0):x=p,p=(x|0)<(y|0)?x:y,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(d[f>>2]=y-p,d[E>>2]=x-p,d[R>>2]=h-p)}function Eo(f){switch(f=f|0,f|0){case 1:{f=5;break}case 5:{f=4;break}case 4:{f=6;break}case 6:{f=2;break}case 2:{f=3;break}case 3:{f=1;break}}return f|0}function Pr(f){switch(f=f|0,f|0){case 1:{f=3;break}case 3:{f=2;break}case 2:{f=6;break}case 6:{f=4;break}case 4:{f=5;break}case 5:{f=1;break}}return f|0}function ra(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;h=d[f>>2]|0,E=f+4|0,p=d[E>>2]|0,R=f+8|0,y=d[R>>2]|0,x=p+(h<<1)|0,d[f>>2]=x,p=y+(p<<1)|0,d[E>>2]=p,h=(y<<1)+h|0,d[R>>2]=h,y=p-x|0,(x|0)<0?(h=h-x|0,d[E>>2]=y,d[R>>2]=h,d[f>>2]=0,p=y,y=0):y=x,(p|0)<0&&(y=y-p|0,d[f>>2]=y,h=h-p|0,d[R>>2]=h,d[E>>2]=0,p=0),S=y-h|0,x=p-h|0,(h|0)<0?(d[f>>2]=S,d[E>>2]=x,d[R>>2]=0,y=S,h=0):x=p,p=(x|0)<(y|0)?x:y,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(d[f>>2]=y-p,d[E>>2]=x-p,d[R>>2]=h-p)}function u0(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;x=d[f>>2]|0,E=f+4|0,h=d[E>>2]|0,R=f+8|0,p=d[R>>2]|0,y=(h<<1)+x|0,x=p+(x<<1)|0,d[f>>2]=x,d[E>>2]=y,h=(p<<1)+h|0,d[R>>2]=h,p=y-x|0,(x|0)<0?(h=h-x|0,d[E>>2]=p,d[R>>2]=h,d[f>>2]=0,x=0):p=y,(p|0)<0&&(x=x-p|0,d[f>>2]=x,h=h-p|0,d[R>>2]=h,d[E>>2]=0,p=0),S=x-h|0,y=p-h|0,(h|0)<0?(d[f>>2]=S,d[E>>2]=y,d[R>>2]=0,x=S,h=0):y=p,p=(y|0)<(x|0)?y:x,p=(h|0)<(p|0)?h:p,!((p|0)<=0)&&(d[f>>2]=x-p,d[E>>2]=y-p,d[R>>2]=h-p)}function Iu(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0;return E=(d[f>>2]|0)-(d[h>>2]|0)|0,R=(E|0)<0,y=(d[f+4>>2]|0)-(d[h+4>>2]|0)-(R?E:0)|0,S=(y|0)<0,x=(R?0-E|0:0)+(d[f+8>>2]|0)-(d[h+8>>2]|0)+(S?0-y|0:0)|0,f=(x|0)<0,h=f?0:x,p=(S?0:y)-(f?x:0)|0,x=(R?0:E)-(S?y:0)-(f?x:0)|0,f=(p|0)<(x|0)?p:x,f=(h|0)<(f|0)?h:f,y=(f|0)>0,h=h-(y?f:0)|0,p=p-(y?f:0)|0,f=x-(y?f:0)|0,f=(f|0)>-1?f:0-f|0,p=(p|0)>-1?p:0-p|0,h=(h|0)>-1?h:0-h|0,h=(p|0)>(h|0)?p:h,((f|0)>(h|0)?f:h)|0}function S6(f,h){f=f|0,h=h|0;var p=0;p=d[f+8>>2]|0,d[h>>2]=(d[f>>2]|0)-p,d[h+4>>2]=(d[f+4>>2]|0)-p}function c0(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0;return y=d[f>>2]|0,d[h>>2]=y,x=d[f+4>>2]|0,E=h+4|0,d[E>>2]=x,R=h+8|0,d[R>>2]=0,p=(x|0)<(y|0),f=p?y:x,p=p?x:y,(p|0)<0&&((p|0)==-2147483648||((f|0)>0?(2147483647-f|0)<(p|0):(-2147483648-f|0)>(p|0))||((f|0)>-1?(f|-2147483648|0)>=(p|0):(f^-2147483648|0)<(p|0)))?(h=1,h|0):(f=x-y|0,(y|0)<0?(p=0-y|0,d[E>>2]=f,d[R>>2]=p,d[h>>2]=0,y=0):(f=x,p=0),(f|0)<0&&(y=y-f|0,d[h>>2]=y,p=p-f|0,d[R>>2]=p,d[E>>2]=0,f=0),S=y-p|0,x=f-p|0,(p|0)<0?(d[h>>2]=S,d[E>>2]=x,d[R>>2]=0,f=x,x=S,p=0):x=y,y=(f|0)<(x|0)?f:x,y=(p|0)<(y|0)?p:y,(y|0)<=0?(h=0,h|0):(d[h>>2]=x-y,d[E>>2]=f-y,d[R>>2]=p-y,h=0,h|0))}function h0(f){f=f|0;var h=0,p=0,y=0,x=0;h=f+8|0,x=d[h>>2]|0,p=x-(d[f>>2]|0)|0,d[f>>2]=p,y=f+4|0,f=(d[y>>2]|0)-x|0,d[y>>2]=f,d[h>>2]=0-(f+p)}function Xc(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;p=d[f>>2]|0,h=0-p|0,d[f>>2]=h,E=f+8|0,d[E>>2]=0,R=f+4|0,y=d[R>>2]|0,x=y+p|0,(p|0)>0?(d[R>>2]=x,d[E>>2]=p,d[f>>2]=0,h=0,y=x):p=0,(y|0)<0?(S=h-y|0,d[f>>2]=S,p=p-y|0,d[E>>2]=p,d[R>>2]=0,x=S-p|0,h=0-p|0,(p|0)<0?(d[f>>2]=x,d[R>>2]=h,d[E>>2]=0,y=h,p=0):(y=0,x=S)):x=h,h=(y|0)<(x|0)?y:x,h=(p|0)<(h|0)?p:h,!((h|0)<=0)&&(d[f>>2]=x-h,d[R>>2]=y-h,d[E>>2]=p-h)}function T6(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0;if(te=$,$=$+64|0,W=te,R=te+56|0,!(!0&(h&2013265920|0)==134217728&(!0&(y&2013265920|0)==134217728)))return x=5,$=te,x|0;if((f|0)==(p|0)&(h|0)==(y|0))return d[x>>2]=0,x=0,$=te,x|0;if(E=lt(f|0,h|0,52)|0,K()|0,E=E&15,k=lt(p|0,y|0,52)|0,K()|0,(E|0)!=(k&15|0))return x=12,$=te,x|0;if(S=E+-1|0,E>>>0>1){Es(f,h,S,W)|0,Es(p,y,S,R)|0,k=W,D=d[k>>2]|0,k=d[k+4>>2]|0;e:do if((D|0)==(d[R>>2]|0)&&(k|0)==(d[R+4>>2]|0)){E=(E^15)*3|0,S=lt(f|0,h|0,E|0)|0,K()|0,S=S&7,E=lt(p|0,y|0,E|0)|0,K()|0,E=E&7;do if((S|0)==0|(E|0)==0)d[x>>2]=1,S=0;else if((S|0)==7)S=5;else{if((S|0)==1|(E|0)==1&&wn(D,k)|0){S=5;break}if((d[15536+(S<<2)>>2]|0)!=(E|0)&&(d[15568+(S<<2)>>2]|0)!=(E|0))break e;d[x>>2]=1,S=0}while(!1);return x=S,$=te,x|0}while(!1)}S=W,E=S+56|0;do d[S>>2]=0,S=S+4|0;while((S|0)<(E|0));return ta(f,h,1,W)|0,h=W,!((d[h>>2]|0)==(p|0)&&(d[h+4>>2]|0)==(y|0))&&(h=W+8|0,!((d[h>>2]|0)==(p|0)&&(d[h+4>>2]|0)==(y|0)))&&(h=W+16|0,!((d[h>>2]|0)==(p|0)&&(d[h+4>>2]|0)==(y|0)))&&(h=W+24|0,!((d[h>>2]|0)==(p|0)&&(d[h+4>>2]|0)==(y|0)))&&(h=W+32|0,!((d[h>>2]|0)==(p|0)&&(d[h+4>>2]|0)==(y|0)))&&(h=W+40|0,!((d[h>>2]|0)==(p|0)&&(d[h+4>>2]|0)==(y|0)))?(S=W+48|0,S=((d[S>>2]|0)==(p|0)?(d[S+4>>2]|0)==(y|0):0)&1):S=1,d[x>>2]=S,x=0,$=te,x|0}function Qc(f,h,p,y,x){return f=f|0,h=h|0,p=p|0,y=y|0,x=x|0,p=Ur(f,h,p,y)|0,(p|0)==7?(x=11,x|0):(y=mt(p|0,0,56)|0,h=h&-2130706433|(K()|0)|268435456,d[x>>2]=f|y,d[x+4>>2]=h,x=0,x|0)}function w6(f,h,p){return f=f|0,h=h|0,p=p|0,!0&(h&2013265920|0)==268435456?(d[p>>2]=f,d[p+4>>2]=h&-2130706433|134217728,p=0,p|0):(p=6,p|0)}function M6(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;return x=$,$=$+16|0,y=x,d[y>>2]=0,!0&(h&2013265920|0)==268435456?(S=lt(f|0,h|0,56)|0,K()|0,y=mi(f,h&-2130706433|134217728,S&7,y,p)|0,$=x,y|0):(y=6,$=x,y|0)}function b5(f,h){f=f|0,h=h|0;var p=0;switch(p=lt(f|0,h|0,56)|0,K()|0,p&7){case 0:case 7:return p=0,p|0}return p=h&-2130706433|134217728,!(!0&(h&2013265920|0)==268435456)||!0&(h&117440512|0)==16777216&(wn(f,p)|0)!=0?(p=0,p|0):(p=Du(f,p)|0,p|0)}function Yc(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0;return x=$,$=$+16|0,y=x,!0&(h&2013265920|0)==268435456?(S=h&-2130706433|134217728,E=p,d[E>>2]=f,d[E+4>>2]=S,d[y>>2]=0,h=lt(f|0,h|0,56)|0,K()|0,y=mi(f,S,h&7,y,p+8|0)|0,$=x,y|0):(y=6,$=x,y|0)}function E6(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0;return x=(wn(f,h)|0)==0,h=h&-2130706433,y=p,d[y>>2]=x?f:0,d[y+4>>2]=x?h|285212672:0,y=p+8|0,d[y>>2]=f,d[y+4>>2]=h|301989888,y=p+16|0,d[y>>2]=f,d[y+4>>2]=h|318767104,y=p+24|0,d[y>>2]=f,d[y+4>>2]=h|335544320,y=p+32|0,d[y>>2]=f,d[y+4>>2]=h|352321536,p=p+40|0,d[p>>2]=f,d[p+4>>2]=h|369098752,0}function Lu(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0;return E=$,$=$+16|0,x=E,S=h&-2130706433|134217728,!0&(h&2013265920|0)==268435456?(y=lt(f|0,h|0,56)|0,K()|0,y=La(f,S,y&7)|0,(y|0)==-1?(d[p>>2]=0,S=6,$=E,S|0):(Ca(f,S,x)|0&&dt(27795,26932,282,26947),h=lt(f|0,h|0,52)|0,K()|0,h=h&15,wn(f,S)|0?x1(x,h,y,2,p):sa(x,h,y,2,p),S=0,$=E,S|0)):(S=6,$=E,S|0)}function R6(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0;y=$,$=$+16|0,x=y,S5(f,h,p,x),v5(x,p+4|0),$=y}function S5(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0;if(R=$,$=$+16|0,D=R,_1(f,p,D),S=+p1(+(1-+X[D>>3]*.5)),S<1e-16){d[y>>2]=0,d[y+4>>2]=0,d[y+8>>2]=0,d[y+12>>2]=0,$=R;return}if(D=d[p>>2]|0,x=+X[15920+(D*24|0)>>3],x=+Rl(x-+Rl(+zr(15600+(D<<4)|0,f))),so(h)|0?E=+Rl(x+-.3334731722518321):E=x,x=+qs(+S)*2.618033988749896,(h|0)>0){f=0;do x=x*2.6457513110645907,f=f+1|0;while((f|0)!=(h|0))}S=+pi(+E)*x,X[y>>3]=S,E=+kn(+E)*x,X[y+8>>3]=E,$=R}function _1(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;if(S=$,$=$+32|0,x=S,G6(f,x),d[h>>2]=0,X[p>>3]=5,y=+mr(16400,x),y<+X[p>>3]&&(d[h>>2]=0,X[p>>3]=y),y=+mr(16424,x),y<+X[p>>3]&&(d[h>>2]=1,X[p>>3]=y),y=+mr(16448,x),y<+X[p>>3]&&(d[h>>2]=2,X[p>>3]=y),y=+mr(16472,x),y<+X[p>>3]&&(d[h>>2]=3,X[p>>3]=y),y=+mr(16496,x),y<+X[p>>3]&&(d[h>>2]=4,X[p>>3]=y),y=+mr(16520,x),y<+X[p>>3]&&(d[h>>2]=5,X[p>>3]=y),y=+mr(16544,x),y<+X[p>>3]&&(d[h>>2]=6,X[p>>3]=y),y=+mr(16568,x),y<+X[p>>3]&&(d[h>>2]=7,X[p>>3]=y),y=+mr(16592,x),y<+X[p>>3]&&(d[h>>2]=8,X[p>>3]=y),y=+mr(16616,x),y<+X[p>>3]&&(d[h>>2]=9,X[p>>3]=y),y=+mr(16640,x),y<+X[p>>3]&&(d[h>>2]=10,X[p>>3]=y),y=+mr(16664,x),y<+X[p>>3]&&(d[h>>2]=11,X[p>>3]=y),y=+mr(16688,x),y<+X[p>>3]&&(d[h>>2]=12,X[p>>3]=y),y=+mr(16712,x),y<+X[p>>3]&&(d[h>>2]=13,X[p>>3]=y),y=+mr(16736,x),y<+X[p>>3]&&(d[h>>2]=14,X[p>>3]=y),y=+mr(16760,x),y<+X[p>>3]&&(d[h>>2]=15,X[p>>3]=y),y=+mr(16784,x),y<+X[p>>3]&&(d[h>>2]=16,X[p>>3]=y),y=+mr(16808,x),y<+X[p>>3]&&(d[h>>2]=17,X[p>>3]=y),y=+mr(16832,x),y<+X[p>>3]&&(d[h>>2]=18,X[p>>3]=y),y=+mr(16856,x),!(y<+X[p>>3])){$=S;return}d[h>>2]=19,X[p>>3]=y,$=S}function Ea(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0;if(S=+z6(f),S<1e-16){h=15600+(h<<4)|0,d[x>>2]=d[h>>2],d[x+4>>2]=d[h+4>>2],d[x+8>>2]=d[h+8>>2],d[x+12>>2]=d[h+12>>2];return}if(E=+Fe(+ +X[f+8>>3],+ +X[f>>3]),(p|0)>0){f=0;do S=S*.37796447300922725,f=f+1|0;while((f|0)!=(p|0))}R=S*.3333333333333333,y?(p=(so(p)|0)==0,S=+Ce(+((p?R:R*.37796447300922725)*.381966011250105))):(S=+Ce(+(S*.381966011250105)),so(p)|0&&(E=+Rl(E+.3334731722518321))),Jc(15600+(h<<4)|0,+Rl(+X[15920+(h*24|0)>>3]-E),S,x)}function Kc(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0;y=$,$=$+16|0,x=y,Tl(f+4|0,x),Ea(x,d[f>>2]|0,h,0,p),$=y}function x1(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0,In=0,$n=0,_n=0,Xt=0,At=0,Bn=0,yi=0,Ln=0;if(Bn=$,$=$+272|0,S=Bn+256|0,Le=Bn+240|0,_n=Bn,Xt=Bn+224|0,At=Bn+208|0,Ee=Bn+176|0,_e=Bn+160|0,gt=Bn+192|0,en=Bn+144|0,zt=Bn+128|0,Pn=Bn+112|0,In=Bn+96|0,$n=Bn+80|0,d[S>>2]=h,d[Le>>2]=d[f>>2],d[Le+4>>2]=d[f+4>>2],d[Le+8>>2]=d[f+8>>2],d[Le+12>>2]=d[f+12>>2],ro(Le,S,_n),d[x>>2]=0,Le=y+p+((y|0)==5&1)|0,(Le|0)<=(p|0)){$=Bn;return}D=d[S>>2]|0,k=Xt+4|0,W=Ee+4|0,te=p+5|0,ce=16880+(D<<2)|0,le=16960+(D<<2)|0,ue=zt+8|0,ve=Pn+8|0,Te=In+8|0,Ue=At+4|0,R=p;e:for(;;){E=_n+(((R|0)%5|0)<<4)|0,d[At>>2]=d[E>>2],d[At+4>>2]=d[E+4>>2],d[At+8>>2]=d[E+8>>2],d[At+12>>2]=d[E+12>>2];do;while((ts(At,D,0,1)|0)==2);if((R|0)>(p|0)&(so(h)|0)!=0){if(d[Ee>>2]=d[At>>2],d[Ee+4>>2]=d[At+4>>2],d[Ee+8>>2]=d[At+8>>2],d[Ee+12>>2]=d[At+12>>2],Tl(k,_e),y=d[Ee>>2]|0,S=d[17040+(y*80|0)+(d[Xt>>2]<<2)>>2]|0,d[Ee>>2]=d[18640+(y*80|0)+(S*20|0)>>2],E=d[18640+(y*80|0)+(S*20|0)+16>>2]|0,(E|0)>0){f=0;do $c(W),f=f+1|0;while((f|0)<(E|0))}switch(E=18640+(y*80|0)+(S*20|0)+4|0,d[gt>>2]=d[E>>2],d[gt+4>>2]=d[E+4>>2],d[gt+8>>2]=d[E+8>>2],Nu(gt,(d[ce>>2]|0)*3|0),Ji(W,gt,W),es(W),Tl(W,en),yi=+(d[le>>2]|0),X[zt>>3]=yi*3,X[ue>>3]=0,Ln=yi*-1.5,X[Pn>>3]=Ln,X[ve>>3]=yi*2.598076211353316,X[In>>3]=Ln,X[Te>>3]=yi*-2.598076211353316,d[17040+((d[Ee>>2]|0)*80|0)+(d[At>>2]<<2)>>2]|0){case 1:{f=Pn,y=zt;break}case 3:{f=In,y=Pn;break}case 2:{f=zt,y=In;break}default:{f=12;break e}}z5(_e,en,y,f,$n),Ea($n,d[Ee>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1}if((R|0)<(te|0)&&(Tl(Ue,Ee),Ea(Ee,d[At>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1),d[Xt>>2]=d[At>>2],d[Xt+4>>2]=d[At+4>>2],d[Xt+8>>2]=d[At+8>>2],d[Xt+12>>2]=d[At+12>>2],R=R+1|0,(R|0)>=(Le|0)){f=3;break}}if((f|0)==3){$=Bn;return}else(f|0)==12&&dt(26970,27017,572,27027)}function ro(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0;D=$,$=$+128|0,y=D+64|0,x=D,S=y,E=20240,R=S+60|0;do d[S>>2]=d[E>>2],S=S+4|0,E=E+4|0;while((S|0)<(R|0));S=x,E=20304,R=S+60|0;do d[S>>2]=d[E>>2],S=S+4|0,E=E+4|0;while((S|0)<(R|0));R=(so(d[h>>2]|0)|0)==0,y=R?y:x,x=f+4|0,ra(x),u0(x),so(d[h>>2]|0)|0&&(l0(x),d[h>>2]=(d[h>>2]|0)+1),d[p>>2]=d[f>>2],h=p+4|0,Ji(x,y,h),es(h),d[p+16>>2]=d[f>>2],h=p+20|0,Ji(x,y+12|0,h),es(h),d[p+32>>2]=d[f>>2],h=p+36|0,Ji(x,y+24|0,h),es(h),d[p+48>>2]=d[f>>2],h=p+52|0,Ji(x,y+36|0,h),es(h),d[p+64>>2]=d[f>>2],p=p+68|0,Ji(x,y+48|0,p),es(p),$=D}function ts(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0;if(ue=$,$=$+32|0,ce=ue+12|0,R=ue,le=f+4|0,te=d[16960+(h<<2)>>2]|0,W=(y|0)!=0,te=W?te*3|0:te,x=d[le>>2]|0,k=f+8|0,E=d[k>>2]|0,W){if(S=f+12|0,y=d[S>>2]|0,x=E+x+y|0,(x|0)==(te|0))return le=1,$=ue,le|0;D=S}else D=f+12|0,y=d[D>>2]|0,x=E+x+y|0;if((x|0)<=(te|0))return le=0,$=ue,le|0;do if((y|0)>0){if(y=d[f>>2]|0,(E|0)>0){S=18640+(y*80|0)+60|0,y=f;break}y=18640+(y*80|0)+40|0,p?(qc(ce,te,0,0),_5(le,ce,R),v1(R),Ji(R,ce,le),S=y,y=f):(S=y,y=f)}else S=18640+((d[f>>2]|0)*80|0)+20|0,y=f;while(!1);if(d[y>>2]=d[S>>2],x=S+16|0,(d[x>>2]|0)>0){y=0;do $c(le),y=y+1|0;while((y|0)<(d[x>>2]|0))}return f=S+4|0,d[ce>>2]=d[f>>2],d[ce+4>>2]=d[f+4>>2],d[ce+8>>2]=d[f+8>>2],h=d[16880+(h<<2)>>2]|0,Nu(ce,W?h*3|0:h),Ji(le,ce,le),es(le),W?y=((d[k>>2]|0)+(d[le>>2]|0)+(d[D>>2]|0)|0)==(te|0)?1:2:y=2,le=y,$=ue,le|0}function Ml(f,h){f=f|0,h=h|0;var p=0;do p=ts(f,h,0,1)|0;while((p|0)==2);return p|0}function sa(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0,In=0,$n=0,_n=0;if(In=$,$=$+240|0,S=In+224|0,gt=In+208|0,en=In,zt=In+192|0,Pn=In+176|0,Te=In+160|0,Ue=In+144|0,Le=In+128|0,Ee=In+112|0,_e=In+96|0,d[S>>2]=h,d[gt>>2]=d[f>>2],d[gt+4>>2]=d[f+4>>2],d[gt+8>>2]=d[f+8>>2],d[gt+12>>2]=d[f+12>>2],Ra(gt,S,en),d[x>>2]=0,ve=y+p+((y|0)==6&1)|0,(ve|0)<=(p|0)){$=In;return}D=d[S>>2]|0,k=p+6|0,W=16960+(D<<2)|0,te=Ue+8|0,ce=Le+8|0,le=Ee+8|0,ue=zt+4|0,E=0,R=p,y=-1;e:for(;;){if(S=(R|0)%6|0,f=en+(S<<4)|0,d[zt>>2]=d[f>>2],d[zt+4>>2]=d[f+4>>2],d[zt+8>>2]=d[f+8>>2],d[zt+12>>2]=d[f+12>>2],f=E,E=ts(zt,D,0,1)|0,(R|0)>(p|0)&(so(h)|0)!=0&&(f|0)!=1&&(d[zt>>2]|0)!=(y|0)){switch(Tl(en+(((S+5|0)%6|0)<<4)+4|0,Pn),Tl(en+(S<<4)+4|0,Te),$n=+(d[W>>2]|0),X[Ue>>3]=$n*3,X[te>>3]=0,_n=$n*-1.5,X[Le>>3]=_n,X[ce>>3]=$n*2.598076211353316,X[Ee>>3]=_n,X[le>>3]=$n*-2.598076211353316,S=d[gt>>2]|0,d[17040+(S*80|0)+(((y|0)==(S|0)?d[zt>>2]|0:y)<<2)>>2]|0){case 1:{f=Le,y=Ue;break}case 3:{f=Ee,y=Le;break}case 2:{f=Ue,y=Ee;break}default:{f=8;break e}}z5(Pn,Te,y,f,_e),!(G5(Pn,_e)|0)&&!(G5(Te,_e)|0)&&(Ea(_e,d[gt>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1)}if((R|0)<(k|0)&&(Tl(ue,Pn),Ea(Pn,d[zt>>2]|0,D,1,x+8+(d[x>>2]<<4)|0),d[x>>2]=(d[x>>2]|0)+1),R=R+1|0,(R|0)>=(ve|0)){f=3;break}else y=d[zt>>2]|0}if((f|0)==3){$=In;return}else(f|0)==8&&dt(27054,27017,737,27099)}function Ra(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0;D=$,$=$+160|0,y=D+80|0,x=D,S=y,E=20368,R=S+72|0;do d[S>>2]=d[E>>2],S=S+4|0,E=E+4|0;while((S|0)<(R|0));S=x,E=20448,R=S+72|0;do d[S>>2]=d[E>>2],S=S+4|0,E=E+4|0;while((S|0)<(R|0));R=(so(d[h>>2]|0)|0)==0,y=R?y:x,x=f+4|0,ra(x),u0(x),so(d[h>>2]|0)|0&&(l0(x),d[h>>2]=(d[h>>2]|0)+1),d[p>>2]=d[f>>2],h=p+4|0,Ji(x,y,h),es(h),d[p+16>>2]=d[f>>2],h=p+20|0,Ji(x,y+12|0,h),es(h),d[p+32>>2]=d[f>>2],h=p+36|0,Ji(x,y+24|0,h),es(h),d[p+48>>2]=d[f>>2],h=p+52|0,Ji(x,y+36|0,h),es(h),d[p+64>>2]=d[f>>2],h=p+68|0,Ji(x,y+48|0,h),es(h),d[p+80>>2]=d[f>>2],p=p+84|0,Ji(x,y+60|0,p),es(p),$=D}function El(f,h){return f=f|0,h=h|0,h=lt(f|0,h|0,52)|0,K()|0,h&15|0}function T5(f,h){return f=f|0,h=h|0,h=lt(f|0,h|0,45)|0,K()|0,h&127|0}function Du(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0;return!(!0&(h&-16777216|0)==134217728)||(y=lt(f|0,h|0,52)|0,K()|0,y=y&15,p=lt(f|0,h|0,45)|0,K()|0,p=p&127,p>>>0>121)?(f=0,f|0):(E=(y^15)*3|0,x=lt(f|0,h|0,E|0)|0,E=mt(x|0,K()|0,E|0)|0,x=K()|0,S=Gr(-1227133514,-1171,E|0,x|0)|0,!((E&613566756&S|0)==0&(x&4681&(K()|0)|0)==0)||(E=(y*3|0)+19|0,S=mt(~f|0,~h|0,E|0)|0,E=lt(S|0,K()|0,E|0)|0,!((y|0)==15|(E|0)==0&(K()|0)==0))?(E=0,E|0):!(st[20528+p>>0]|0)||(h=h&8191,(f|0)==0&(h|0)==0)?(E=1,E|0):(E=W5(f|0,h|0)|0,K()|0,((63-E|0)%3|0|0)!=0|0))}function Bu(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0;if(x=mt(h|0,0,52)|0,S=K()|0,p=mt(p|0,0,45)|0,p=S|(K()|0)|134225919,(h|0)<1){S=-1,y=p,h=f,d[h>>2]=S,f=f+4|0,d[f>>2]=y;return}for(S=1,x=-1;E=(15-S|0)*3|0,R=mt(7,0,E|0)|0,p=p&~(K()|0),E=mt(y|0,0,E|0)|0,x=x&~R|E,p=p|(K()|0),(S|0)!=(h|0);)S=S+1|0;R=f,E=R,d[E>>2]=x,R=R+4|0,d[R>>2]=p}function Es(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0;if(S=lt(f|0,h|0,52)|0,K()|0,S=S&15,p>>>0>15)return y=4,y|0;if((S|0)<(p|0))return y=12,y|0;if((S|0)==(p|0))return d[y>>2]=f,d[y+4>>2]=h,y=0,y|0;if(x=mt(p|0,0,52)|0,x=x|f,f=K()|0|h&-15728641,(S|0)>(p|0))do h=mt(7,0,(14-p|0)*3|0)|0,p=p+1|0,x=h|x,f=K()|0|f;while((p|0)<(S|0));return d[y>>2]=x,d[y+4>>2]=f,y=0,y|0}function ns(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0;if(S=lt(f|0,h|0,52)|0,K()|0,S=S&15,!((p|0)<16&(S|0)<=(p|0)))return y=4,y|0;x=p-S|0,p=lt(f|0,h|0,45)|0,K()|0;e:do if(!(Ui(p&127)|0))p=Co(7,0,x,((x|0)<0)<<31>>31)|0,x=K()|0;else{t:do if(S|0){for(p=1;E=mt(7,0,(15-p|0)*3|0)|0,!!((E&f|0)==0&((K()|0)&h|0)==0);)if(p>>>0<S>>>0)p=p+1|0;else break t;p=Co(7,0,x,((x|0)<0)<<31>>31)|0,x=K()|0;break e}while(!1);p=Co(7,0,x,((x|0)<0)<<31>>31)|0,p=Nr(p|0,K()|0,5,0)|0,p=ln(p|0,K()|0,-5,-1)|0,p=m0(p|0,K()|0,6,0)|0,p=ln(p|0,K()|0,1,0)|0,x=K()|0}while(!1);return E=y,d[E>>2]=p,d[E+4>>2]=x,E=0,E|0}function wn(f,h){f=f|0,h=h|0;var p=0,y=0,x=0;if(x=lt(f|0,h|0,45)|0,K()|0,!(Ui(x&127)|0))return x=0,x|0;x=lt(f|0,h|0,52)|0,K()|0,x=x&15;e:do if(!x)p=0;else for(y=1;;){if(p=lt(f|0,h|0,(15-y|0)*3|0)|0,K()|0,p=p&7,p|0)break e;if(y>>>0<x>>>0)y=y+1|0;else{p=0;break}}while(!1);return x=(p|0)==0&1,x|0}function Fu(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0;if(E=$,$=$+16|0,S=E,Xi(S,f,h,p),h=S,f=d[h>>2]|0,h=d[h+4>>2]|0,(f|0)==0&(h|0)==0)return $=E,0;x=0,p=0;do R=y+(x<<3)|0,d[R>>2]=f,d[R+4>>2]=h,x=ln(x|0,p|0,1,0)|0,p=K()|0,ku(S),R=S,f=d[R>>2]|0,h=d[R+4>>2]|0;while(!((f|0)==0&(h|0)==0));return $=E,0}function Ro(f,h,p,y){return f=f|0,h=h|0,p=p|0,y=y|0,(y|0)<(p|0)?(p=h,y=f,ot(p|0),y|0):(p=mt(-1,-1,((y-p|0)*3|0)+3|0)|0,y=mt(~p|0,~(K()|0)|0,(15-y|0)*3|0)|0,p=~(K()|0)&h,y=~y&f,ot(p|0),y|0)}function w5(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0;return x=lt(f|0,h|0,52)|0,K()|0,x=x&15,(p|0)<16&(x|0)<=(p|0)?((x|0)<(p|0)&&(x=mt(-1,-1,((p+-1-x|0)*3|0)+3|0)|0,x=mt(~x|0,~(K()|0)|0,(15-p|0)*3|0)|0,h=~(K()|0)&h,f=~x&f),x=mt(p|0,0,52)|0,p=h&-15728641|(K()|0),d[y>>2]=f|x,d[y+4>>2]=p,y=0,y|0):(y=4,y|0)}function C6(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0,In=0,$n=0,_n=0,Xt=0,At=0;if((p|0)==0&(y|0)==0)return At=0,At|0;if(x=f,S=d[x>>2]|0,x=d[x+4>>2]|0,!0&(x&15728640|0)==0){if(!((y|0)>0|(y|0)==0&p>>>0>0)||(At=h,d[At>>2]=S,d[At+4>>2]=x,(p|0)==1&(y|0)==0))return At=0,At|0;x=1,S=0;do _n=f+(x<<3)|0,Xt=d[_n+4>>2]|0,At=h+(x<<3)|0,d[At>>2]=d[_n>>2],d[At+4>>2]=Xt,x=ln(x|0,S|0,1,0)|0,S=K()|0;while((S|0)<(y|0)|(S|0)==(y|0)&x>>>0<p>>>0);return x=0,x|0}if($n=p<<3,Xt=aa($n)|0,!Xt)return At=13,At|0;if(P1(Xt|0,f|0,$n|0)|0,_n=ao(p,8)|0,!_n)return xn(Xt),At=13,At|0;e:for(;;){x=Xt,k=d[x>>2]|0,x=d[x+4>>2]|0,Pn=lt(k|0,x|0,52)|0,K()|0,Pn=Pn&15,In=Pn+-1|0,zt=(Pn|0)!=0,en=(y|0)>0|(y|0)==0&p>>>0>0;t:do if(zt&en){if(Le=mt(In|0,0,52)|0,Ee=K()|0,In>>>0>15){if(!((k|0)==0&(x|0)==0)){At=16;break e}for(S=0,f=0;;){if(S=ln(S|0,f|0,1,0)|0,f=K()|0,!((f|0)<(y|0)|(f|0)==(y|0)&S>>>0<p>>>0))break t;if(E=Xt+(S<<3)|0,gt=d[E>>2]|0,E=d[E+4>>2]|0,!((gt|0)==0&(E|0)==0)){x=E,At=16;break e}}}for(R=k,f=x,S=0,E=0;;){if(!((R|0)==0&(f|0)==0)){if(!(!0&(f&117440512|0)==0)){At=21;break e}if(W=lt(R|0,f|0,52)|0,K()|0,W=W&15,(W|0)<(In|0)){x=12,At=27;break e}if((W|0)!=(In|0)&&(R=R|Le,f=f&-15728641|Ee,W>>>0>=Pn>>>0)){D=In;do gt=mt(7,0,(14-D|0)*3|0)|0,D=D+1|0,R=gt|R,f=K()|0|f;while(D>>>0<W>>>0)}if(ce=q0(R|0,f|0,p|0,y|0)|0,le=K()|0,D=_n+(ce<<3)|0,W=D,te=d[W>>2]|0,W=d[W+4>>2]|0,!((te|0)==0&(W|0)==0)){Te=0,Ue=0;do{if((Te|0)>(y|0)|(Te|0)==(y|0)&Ue>>>0>p>>>0){At=31;break e}if((te|0)==(R|0)&(W&-117440513|0)==(f|0)){ue=lt(te|0,W|0,56)|0,K()|0,ue=ue&7,ve=ue+1|0,gt=lt(te|0,W|0,45)|0,K()|0;n:do if(!(Ui(gt&127)|0))W=7;else{if(te=lt(te|0,W|0,52)|0,K()|0,te=te&15,!te){W=6;break}for(W=1;;){if(gt=mt(7,0,(15-W|0)*3|0)|0,!((gt&R|0)==0&((K()|0)&f|0)==0)){W=7;break n}if(W>>>0<te>>>0)W=W+1|0;else{W=6;break}}}while(!1);if((ue+2|0)>>>0>W>>>0){At=41;break e}gt=mt(ve|0,0,56)|0,f=K()|0|f&-117440513,_e=D,d[_e>>2]=0,d[_e+4>>2]=0,R=gt|R}else ce=ln(ce|0,le|0,1,0)|0,ce=Pl(ce|0,K()|0,p|0,y|0)|0,le=K()|0;Ue=ln(Ue|0,Te|0,1,0)|0,Te=K()|0,D=_n+(ce<<3)|0,W=D,te=d[W>>2]|0,W=d[W+4>>2]|0}while(!((te|0)==0&(W|0)==0))}gt=D,d[gt>>2]=R,d[gt+4>>2]=f}if(S=ln(S|0,E|0,1,0)|0,E=K()|0,!((E|0)<(y|0)|(E|0)==(y|0)&S>>>0<p>>>0))break t;f=Xt+(S<<3)|0,R=d[f>>2]|0,f=d[f+4>>2]|0}}while(!1);if(gt=ln(p|0,y|0,5,0)|0,_e=K()|0,_e>>>0<0|(_e|0)==0&gt>>>0<11){At=85;break}if(gt=m0(p|0,y|0,6,0)|0,K()|0,gt=ao(gt,8)|0,!gt){At=48;break}do if(en){for(ve=0,f=0,ue=0,Te=0;;){if(W=_n+(ve<<3)|0,E=W,S=d[E>>2]|0,E=d[E+4>>2]|0,(S|0)==0&(E|0)==0)_e=ue;else{te=lt(S|0,E|0,56)|0,K()|0,te=te&7,R=te+1|0,ce=E&-117440513,_e=lt(S|0,E|0,45)|0,K()|0;t:do if(Ui(_e&127)|0){if(le=lt(S|0,E|0,52)|0,K()|0,le=le&15,le|0)for(D=1;;){if(_e=mt(7,0,(15-D|0)*3|0)|0,!((S&_e|0)==0&(ce&(K()|0)|0)==0))break t;if(D>>>0<le>>>0)D=D+1|0;else break}E=mt(R|0,0,56)|0,S=E|S,E=K()|0|ce,R=W,d[R>>2]=S,d[R+4>>2]=E,R=te+2|0}while(!1);(R|0)==7?(_e=gt+(f<<3)|0,d[_e>>2]=S,d[_e+4>>2]=E&-117440513,f=ln(f|0,ue|0,1,0)|0,_e=K()|0):_e=ue}if(ve=ln(ve|0,Te|0,1,0)|0,Te=K()|0,(Te|0)<(y|0)|(Te|0)==(y|0)&ve>>>0<p>>>0)ue=_e;else break}if(en){if(Ue=In>>>0>15,Le=mt(In|0,0,52)|0,Ee=K()|0,!zt){for(S=0,D=0,R=0,E=0;(k|0)==0&(x|0)==0||(In=h+(S<<3)|0,d[In>>2]=k,d[In+4>>2]=x,S=ln(S|0,D|0,1,0)|0,D=K()|0),R=ln(R|0,E|0,1,0)|0,E=K()|0,!!((E|0)<(y|0)|(E|0)==(y|0)&R>>>0<p>>>0);)x=Xt+(R<<3)|0,k=d[x>>2]|0,x=d[x+4>>2]|0;x=_e;break}for(S=0,D=0,E=0,R=0;;){do if(!((k|0)==0&(x|0)==0)){if(le=lt(k|0,x|0,52)|0,K()|0,le=le&15,Ue|(le|0)<(In|0)){At=80;break e}if((le|0)!=(In|0)){if(W=k|Le,te=x&-15728641|Ee,le>>>0>=Pn>>>0){ce=In;do zt=mt(7,0,(14-ce|0)*3|0)|0,ce=ce+1|0,W=zt|W,te=K()|0|te;while(ce>>>0<le>>>0)}}else W=k,te=x;ue=q0(W|0,te|0,p|0,y|0)|0,ce=0,le=0,Te=K()|0;do{if((ce|0)>(y|0)|(ce|0)==(y|0)&le>>>0>p>>>0){At=81;break e}if(zt=_n+(ue<<3)|0,ve=d[zt+4>>2]|0,(ve&-117440513|0)==(te|0)&&(d[zt>>2]|0)==(W|0)){At=65;break}zt=ln(ue|0,Te|0,1,0)|0,ue=Pl(zt|0,K()|0,p|0,y|0)|0,Te=K()|0,le=ln(le|0,ce|0,1,0)|0,ce=K()|0,zt=_n+(ue<<3)|0}while(!((d[zt>>2]|0)==(W|0)&&(d[zt+4>>2]|0)==(te|0)));if((At|0)==65&&(At=0,!0&(ve&117440512|0)==100663296))break;zt=h+(S<<3)|0,d[zt>>2]=k,d[zt+4>>2]=x,S=ln(S|0,D|0,1,0)|0,D=K()|0}while(!1);if(E=ln(E|0,R|0,1,0)|0,R=K()|0,!((R|0)<(y|0)|(R|0)==(y|0)&E>>>0<p>>>0))break;x=Xt+(E<<3)|0,k=d[x>>2]|0,x=d[x+4>>2]|0}x=_e}else S=0,x=_e}else S=0,f=0,x=0;while(!1);if(Nl(_n|0,0,$n|0)|0,P1(Xt|0,gt|0,f<<3|0)|0,xn(gt),(f|0)==0&(x|0)==0){At=89;break}else h=h+(S<<3)|0,y=x,p=f}if((At|0)==16)!0&(x&117440512|0)==0?(x=4,At=27):At=21;else if((At|0)==31)dt(27795,27122,529,27132);else{if((At|0)==41)return xn(Xt),xn(_n),At=10,At|0;if((At|0)==48)return xn(Xt),xn(_n),At=13,At|0;(At|0)==80?dt(27795,27122,620,27132):(At|0)==81?dt(27795,27122,632,27132):(At|0)==85&&(P1(h|0,Xt|0,p<<3|0)|0,At=89)}return(At|0)==21?(xn(Xt),xn(_n),At=5,At|0):(At|0)==27?(xn(Xt),xn(_n),At=x,At|0):(At|0)==89?(xn(Xt),xn(_n),At=0,At|0):0}function M5(f,h,p,y,x,S,E){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0,S=S|0,E=E|0;var R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0;if(ve=$,$=$+16|0,ue=ve,!((p|0)>0|(p|0)==0&h>>>0>0))return ue=0,$=ve,ue|0;if((E|0)>=16)return ue=12,$=ve,ue|0;ce=0,le=0,te=0,R=0;e:for(;;){if(k=f+(ce<<3)|0,D=d[k>>2]|0,k=d[k+4>>2]|0,W=lt(D|0,k|0,52)|0,K()|0,(W&15|0)>(E|0)){R=12,D=11;break}if(Xi(ue,D,k,E),W=ue,k=d[W>>2]|0,W=d[W+4>>2]|0,(k|0)==0&(W|0)==0)D=te;else{D=te;do{if(!((R|0)<(S|0)|(R|0)==(S|0)&D>>>0<x>>>0)){D=10;break e}te=y+(D<<3)|0,d[te>>2]=k,d[te+4>>2]=W,D=ln(D|0,R|0,1,0)|0,R=K()|0,ku(ue),te=ue,k=d[te>>2]|0,W=d[te+4>>2]|0}while(!((k|0)==0&(W|0)==0))}if(ce=ln(ce|0,le|0,1,0)|0,le=K()|0,(le|0)<(p|0)|(le|0)==(p|0)&ce>>>0<h>>>0)te=D;else{R=0,D=11;break}}return(D|0)==10?(ue=14,$=ve,ue|0):(D|0)==11?($=ve,R|0):0}function E5(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0;ce=$,$=$+16|0,te=ce;e:do if((p|0)>0|(p|0)==0&h>>>0>0){for(k=0,E=0,S=0,W=0;;){if(D=f+(k<<3)|0,R=d[D>>2]|0,D=d[D+4>>2]|0,!((R|0)==0&(D|0)==0)&&(D=(ns(R,D,y,te)|0)==0,R=te,E=ln(d[R>>2]|0,d[R+4>>2]|0,E|0,S|0)|0,S=K()|0,!D)){S=12;break}if(k=ln(k|0,W|0,1,0)|0,W=K()|0,!((W|0)<(p|0)|(W|0)==(p|0)&k>>>0<h>>>0))break e}return $=ce,S|0}else E=0,S=0;while(!1);return d[x>>2]=E,d[x+4>>2]=S,x=0,$=ce,x|0}function P6(f,h){return f=f|0,h=h|0,h=lt(f|0,h|0,52)|0,K()|0,h&1|0}function kr(f,h){f=f|0,h=h|0;var p=0,y=0,x=0;if(x=lt(f|0,h|0,52)|0,K()|0,x=x&15,!x)return x=0,x|0;for(y=1;;){if(p=lt(f|0,h|0,(15-y|0)*3|0)|0,K()|0,p=p&7,p|0){y=5;break}if(y>>>0<x>>>0)y=y+1|0;else{p=0,y=5;break}}return(y|0)==5?p|0:0}function V0(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0;if(D=lt(f|0,h|0,52)|0,K()|0,D=D&15,!D)return R=h,D=f,ot(R|0),D|0;for(R=1,p=0;;){S=(15-R|0)*3|0,y=mt(7,0,S|0)|0,x=K()|0,E=lt(f|0,h|0,S|0)|0,K()|0,S=mt(Eo(E&7)|0,0,S|0)|0,E=K()|0,f=S|f&~y,h=E|h&~x;e:do if(!p)if((S&y|0)==0&(E&x|0)==0)p=0;else if(y=lt(f|0,h|0,52)|0,K()|0,y=y&15,!y)p=1;else{p=1;t:for(;;){switch(E=lt(f|0,h|0,(15-p|0)*3|0)|0,K()|0,E&7){case 1:break t;case 0:break;default:{p=1;break e}}if(p>>>0<y>>>0)p=p+1|0;else{p=1;break e}}for(p=1;;)if(E=(15-p|0)*3|0,x=lt(f|0,h|0,E|0)|0,K()|0,S=mt(7,0,E|0)|0,h=h&~(K()|0),E=mt(Eo(x&7)|0,0,E|0)|0,f=f&~S|E,h=h|(K()|0),p>>>0<y>>>0)p=p+1|0;else{p=1;break}}while(!1);if(R>>>0<D>>>0)R=R+1|0;else break}return ot(h|0),f|0}function f0(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0;if(y=lt(f|0,h|0,52)|0,K()|0,y=y&15,!y)return p=h,y=f,ot(p|0),y|0;for(p=1;S=(15-p|0)*3|0,E=lt(f|0,h|0,S|0)|0,K()|0,x=mt(7,0,S|0)|0,h=h&~(K()|0),S=mt(Eo(E&7)|0,0,S|0)|0,f=S|f&~x,h=K()|0|h,p>>>0<y>>>0;)p=p+1|0;return ot(h|0),f|0}function Uu(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0;if(D=lt(f|0,h|0,52)|0,K()|0,D=D&15,!D)return R=h,D=f,ot(R|0),D|0;for(R=1,p=0;;){S=(15-R|0)*3|0,y=mt(7,0,S|0)|0,x=K()|0,E=lt(f|0,h|0,S|0)|0,K()|0,S=mt(Pr(E&7)|0,0,S|0)|0,E=K()|0,f=S|f&~y,h=E|h&~x;e:do if(!p)if((S&y|0)==0&(E&x|0)==0)p=0;else if(y=lt(f|0,h|0,52)|0,K()|0,y=y&15,!y)p=1;else{p=1;t:for(;;){switch(E=lt(f|0,h|0,(15-p|0)*3|0)|0,K()|0,E&7){case 1:break t;case 0:break;default:{p=1;break e}}if(p>>>0<y>>>0)p=p+1|0;else{p=1;break e}}for(p=1;;)if(x=(15-p|0)*3|0,S=mt(7,0,x|0)|0,E=h&~(K()|0),h=lt(f|0,h|0,x|0)|0,K()|0,h=mt(Pr(h&7)|0,0,x|0)|0,f=f&~S|h,h=E|(K()|0),p>>>0<y>>>0)p=p+1|0;else{p=1;break}}while(!1);if(R>>>0<D>>>0)R=R+1|0;else break}return ot(h|0),f|0}function b1(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0;if(y=lt(f|0,h|0,52)|0,K()|0,y=y&15,!y)return p=h,y=f,ot(p|0),y|0;for(p=1;E=(15-p|0)*3|0,S=mt(7,0,E|0)|0,x=h&~(K()|0),h=lt(f|0,h|0,E|0)|0,K()|0,h=mt(Pr(h&7)|0,0,E|0)|0,f=h|f&~S,h=K()|0|x,p>>>0<y>>>0;)p=p+1|0;return ot(h|0),f|0}function N6(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(D=$,$=$+64|0,R=D+40|0,y=D+24|0,x=D+12|0,S=D,mt(h|0,0,52)|0,p=K()|0|134225919,!h)return(d[f+4>>2]|0)>2||(d[f+8>>2]|0)>2||(d[f+12>>2]|0)>2?(E=0,R=0,ot(E|0),$=D,R|0):(mt(g1(f)|0,0,45)|0,E=K()|0|p,R=-1,ot(E|0),$=D,R|0);if(d[R>>2]=d[f>>2],d[R+4>>2]=d[f+4>>2],d[R+8>>2]=d[f+8>>2],d[R+12>>2]=d[f+12>>2],E=R+4|0,(h|0)>0)for(f=-1;d[y>>2]=d[E>>2],d[y+4>>2]=d[E+4>>2],d[y+8>>2]=d[E+8>>2],h&1?(jc(E),d[x>>2]=d[E>>2],d[x+4>>2]=d[E+4>>2],d[x+8>>2]=d[E+8>>2],y1(x)):(wl(E),d[x>>2]=d[E>>2],d[x+4>>2]=d[E+4>>2],d[x+8>>2]=d[E+8>>2],l0(x)),_5(y,x,S),es(S),W=(15-h|0)*3|0,k=mt(7,0,W|0)|0,p=p&~(K()|0),W=mt(Hc(S)|0,0,W|0)|0,f=W|f&~k,p=K()|0|p,(h|0)>1;)h=h+-1|0;else f=-1;e:do if((d[E>>2]|0)<=2&&(d[R+8>>2]|0)<=2&&(d[R+12>>2]|0)<=2){if(y=g1(R)|0,h=mt(y|0,0,45)|0,h=h|f,f=K()|0|p&-1040385,S=kA(R)|0,!(Ui(y)|0)){if((S|0)<=0)break;for(x=0;;){if(y=lt(h|0,f|0,52)|0,K()|0,y=y&15,y)for(p=1;W=(15-p|0)*3|0,R=lt(h|0,f|0,W|0)|0,K()|0,k=mt(7,0,W|0)|0,f=f&~(K()|0),W=mt(Eo(R&7)|0,0,W|0)|0,h=h&~k|W,f=f|(K()|0),p>>>0<y>>>0;)p=p+1|0;if(x=x+1|0,(x|0)==(S|0))break e}}x=lt(h|0,f|0,52)|0,K()|0,x=x&15;t:do if(x){p=1;n:for(;;){switch(W=lt(h|0,f|0,(15-p|0)*3|0)|0,K()|0,W&7){case 1:break n;case 0:break;default:break t}if(p>>>0<x>>>0)p=p+1|0;else break t}if(g5(y,d[R>>2]|0)|0)for(p=1;R=(15-p|0)*3|0,k=mt(7,0,R|0)|0,W=f&~(K()|0),f=lt(h|0,f|0,R|0)|0,K()|0,f=mt(Pr(f&7)|0,0,R|0)|0,h=h&~k|f,f=W|(K()|0),p>>>0<x>>>0;)p=p+1|0;else for(p=1;W=(15-p|0)*3|0,R=lt(h|0,f|0,W|0)|0,K()|0,k=mt(7,0,W|0)|0,f=f&~(K()|0),W=mt(Eo(R&7)|0,0,W|0)|0,h=h&~k|W,f=f|(K()|0),p>>>0<x>>>0;)p=p+1|0}while(!1);if((S|0)>0){p=0;do h=V0(h,f)|0,f=K()|0,p=p+1|0;while((p|0)!=(S|0))}}else h=0,f=0;while(!1);return k=f,W=h,ot(k|0),$=D,W|0}function so(f){return f=f|0,(f|0)%2|0|0}function z0(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0;return x=$,$=$+16|0,y=x,h>>>0>15?(y=4,$=x,y|0):(d[f+4>>2]&2146435072|0)==2146435072||(d[f+8+4>>2]&2146435072|0)==2146435072?(y=3,$=x,y|0):(R6(f,h,y),h=N6(y,h)|0,y=K()|0,d[p>>2]=h,d[p+4>>2]=y,(h|0)==0&(y|0)==0&&dt(27795,27122,959,27145),y=0,$=x,y|0)}function Zc(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0;if(x=p+4|0,S=lt(f|0,h|0,52)|0,K()|0,S=S&15,E=lt(f|0,h|0,45)|0,K()|0,y=(S|0)==0,Ui(E&127)|0){if(y)return E=1,E|0;y=1}else{if(y)return E=0,E|0;!(d[x>>2]|0)&&!(d[p+8>>2]|0)?y=(d[p+12>>2]|0)!=0&1:y=1}for(p=1;p&1?y1(x):l0(x),E=lt(f|0,h|0,(15-p|0)*3|0)|0,K()|0,x5(x,E&7),p>>>0<S>>>0;)p=p+1|0;return y|0}function Ca(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(W=$,$=$+16|0,D=W,k=lt(f|0,h|0,45)|0,K()|0,k=k&127,k>>>0>121)return d[p>>2]=0,d[p+4>>2]=0,d[p+8>>2]=0,d[p+12>>2]=0,k=5,$=W,k|0;e:do if(Ui(k)|0&&(S=lt(f|0,h|0,52)|0,K()|0,S=S&15,(S|0)!=0)){y=1;t:for(;;){switch(R=lt(f|0,h|0,(15-y|0)*3|0)|0,K()|0,R&7){case 5:break t;case 0:break;default:{y=h;break e}}if(y>>>0<S>>>0)y=y+1|0;else{y=h;break e}}for(x=1,y=h;h=(15-x|0)*3|0,E=mt(7,0,h|0)|0,R=y&~(K()|0),y=lt(f|0,y|0,h|0)|0,K()|0,y=mt(Pr(y&7)|0,0,h|0)|0,f=f&~E|y,y=R|(K()|0),x>>>0<S>>>0;)x=x+1|0}else y=h;while(!1);if(R=7696+(k*28|0)|0,d[p>>2]=d[R>>2],d[p+4>>2]=d[R+4>>2],d[p+8>>2]=d[R+8>>2],d[p+12>>2]=d[R+12>>2],!(Zc(f,y,p)|0))return k=0,$=W,k|0;if(E=p+4|0,d[D>>2]=d[E>>2],d[D+4>>2]=d[E+4>>2],d[D+8>>2]=d[E+8>>2],S=lt(f|0,y|0,52)|0,K()|0,R=S&15,S&1?(l0(E),S=R+1|0):S=R,!(Ui(k)|0))y=0;else{e:do if(!R)y=0;else for(h=1;;){if(x=lt(f|0,y|0,(15-h|0)*3|0)|0,K()|0,x=x&7,x|0){y=x;break e}if(h>>>0<R>>>0)h=h+1|0;else{y=0;break}}while(!1);y=(y|0)==4&1}if(!(ts(p,S,y,0)|0))(S|0)!=(R|0)&&(d[E>>2]=d[D>>2],d[E+4>>2]=d[D+4>>2],d[E+8>>2]=d[D+8>>2]);else{if(Ui(k)|0)do;while(ts(p,S,0,0)|0);(S|0)!=(R|0)&&wl(E)}return k=0,$=W,k|0}function Vr(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;return S=$,$=$+16|0,y=S,x=Ca(f,h,y)|0,x|0?($=S,x|0):(x=lt(f|0,h|0,52)|0,K()|0,Kc(y,x&15,p),x=0,$=S,x|0)}function Pa(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0;if(E=$,$=$+16|0,S=E,y=Ca(f,h,S)|0,y|0)return S=y,$=E,S|0;y=lt(f|0,h|0,45)|0,K()|0,y=(Ui(y&127)|0)==0,x=lt(f|0,h|0,52)|0,K()|0,x=x&15;e:do if(!y){if(x|0)for(y=1;;){if(R=mt(7,0,(15-y|0)*3|0)|0,!((R&f|0)==0&((K()|0)&h|0)==0))break e;if(y>>>0<x>>>0)y=y+1|0;else break}return x1(S,x,0,5,p),R=0,$=E,R|0}while(!1);return sa(S,x,0,6,p),R=0,$=E,R|0}function S1(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;if(x=lt(f|0,h|0,45)|0,K()|0,!(Ui(x&127)|0))return x=2,d[p>>2]=x,0;if(x=lt(f|0,h|0,52)|0,K()|0,x=x&15,!x)return x=5,d[p>>2]=x,0;for(y=1;;){if(S=mt(7,0,(15-y|0)*3|0)|0,!((S&f|0)==0&((K()|0)&h|0)==0)){y=2,f=6;break}if(y>>>0<x>>>0)y=y+1|0;else{y=5,f=6;break}}return(f|0)==6&&(d[p>>2]=y),0}function oa(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0;te=$,$=$+128|0,k=te+112|0,S=te+96|0,W=te,x=lt(f|0,h|0,52)|0,K()|0,R=x&15,d[k>>2]=R,E=lt(f|0,h|0,45)|0,K()|0,E=E&127;e:do if(Ui(E)|0){if(R|0)for(y=1;;){if(D=mt(7,0,(15-y|0)*3|0)|0,!((D&f|0)==0&((K()|0)&h|0)==0)){x=0;break e}if(y>>>0<R>>>0)y=y+1|0;else break}if(x&1)x=1;else return D=mt(R+1|0,0,52)|0,W=K()|0|h&-15728641,k=mt(7,0,(14-R|0)*3|0)|0,W=oa((D|f)&~k,W&~(K()|0),p)|0,$=te,W|0}else x=0;while(!1);if(y=Ca(f,h,S)|0,!y){x?(ro(S,k,W),D=5):(Ra(S,k,W),D=6);e:do if(Ui(E)|0)if(!R)f=5;else for(y=1;;){if(E=mt(7,0,(15-y|0)*3|0)|0,!((E&f|0)==0&((K()|0)&h|0)==0)){f=2;break e}if(y>>>0<R>>>0)y=y+1|0;else{f=5;break}}else f=2;while(!1);Nl(p|0,-1,f<<2|0)|0;e:do if(x)for(S=0;;){if(E=W+(S<<4)|0,Ml(E,d[k>>2]|0)|0,E=d[E>>2]|0,R=d[p>>2]|0,(R|0)==-1|(R|0)==(E|0))y=p;else{x=0;do{if(x=x+1|0,x>>>0>=f>>>0){y=1;break e}y=p+(x<<2)|0,R=d[y>>2]|0}while(!((R|0)==-1|(R|0)==(E|0)))}if(d[y>>2]=E,S=S+1|0,S>>>0>=D>>>0){y=0;break}}else for(S=0;;){if(E=W+(S<<4)|0,ts(E,d[k>>2]|0,0,1)|0,E=d[E>>2]|0,R=d[p>>2]|0,(R|0)==-1|(R|0)==(E|0))y=p;else{x=0;do{if(x=x+1|0,x>>>0>=f>>>0){y=1;break e}y=p+(x<<2)|0,R=d[y>>2]|0}while(!((R|0)==-1|(R|0)==(E|0)))}if(d[y>>2]=E,S=S+1|0,S>>>0>=D>>>0){y=0;break}}while(!1)}return W=y,$=te,W|0}function R5(){return 12}function G0(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0;if(f>>>0>15)return R=4,R|0;if(mt(f|0,0,52)|0,R=K()|0|134225919,!f){p=0,y=0;do Ui(y)|0&&(mt(y|0,0,45)|0,E=R|(K()|0),f=h+(p<<3)|0,d[f>>2]=-1,d[f+4>>2]=E,p=p+1|0),y=y+1|0;while((y|0)!=122);return p=0,p|0}p=0,E=0;do{if(Ui(E)|0){for(mt(E|0,0,45)|0,y=1,x=-1,S=R|(K()|0);D=mt(7,0,(15-y|0)*3|0)|0,x=x&~D,S=S&~(K()|0),(y|0)!=(f|0);)y=y+1|0;D=h+(p<<3)|0,d[D>>2]=x,d[D+4>>2]=S,p=p+1|0}E=E+1|0}while((E|0)!=122);return p=0,p|0}function I6(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0;if(Le=$,$=$+16|0,Te=Le,Ue=lt(f|0,h|0,52)|0,K()|0,Ue=Ue&15,p>>>0>15)return Ue=4,$=Le,Ue|0;if((Ue|0)<(p|0))return Ue=12,$=Le,Ue|0;if((Ue|0)!=(p|0))if(S=mt(p|0,0,52)|0,S=S|f,R=K()|0|h&-15728641,(Ue|0)>(p|0)){D=p;do ve=mt(7,0,(14-D|0)*3|0)|0,D=D+1|0,S=ve|S,R=K()|0|R;while((D|0)<(Ue|0));ve=S}else ve=S;else ve=f,R=h;ue=lt(ve|0,R|0,45)|0,K()|0;e:do if(Ui(ue&127)|0){if(D=lt(ve|0,R|0,52)|0,K()|0,D=D&15,D|0)for(S=1;;){if(ue=mt(7,0,(15-S|0)*3|0)|0,!((ue&ve|0)==0&((K()|0)&R|0)==0)){k=33;break e}if(S>>>0<D>>>0)S=S+1|0;else break}if(ue=y,d[ue>>2]=0,d[ue+4>>2]=0,(Ue|0)>(p|0)){for(ue=h&-15728641,le=Ue;;){if(ce=le,le=le+-1|0,le>>>0>15|(Ue|0)<(le|0)){k=19;break}if((Ue|0)!=(le|0))if(S=mt(le|0,0,52)|0,S=S|f,D=K()|0|ue,(Ue|0)<(ce|0))te=S;else{k=le;do te=mt(7,0,(14-k|0)*3|0)|0,k=k+1|0,S=te|S,D=K()|0|D;while((k|0)<(Ue|0));te=S}else te=f,D=h;if(W=lt(te|0,D|0,45)|0,K()|0,!(Ui(W&127)|0))S=0;else{W=lt(te|0,D|0,52)|0,K()|0,W=W&15;t:do if(!W)S=0;else for(k=1;;){if(S=lt(te|0,D|0,(15-k|0)*3|0)|0,K()|0,S=S&7,S|0)break t;if(k>>>0<W>>>0)k=k+1|0;else{S=0;break}}while(!1);S=(S|0)==0&1}if(D=lt(f|0,h|0,(15-ce|0)*3|0)|0,K()|0,D=D&7,(D|0)==7){x=5,k=42;break}if(S=(S|0)!=0,(D|0)==1&S){x=5,k=42;break}if(te=D+(((D|0)!=0&S)<<31>>31)|0,te|0&&(k=Ue-ce|0,k=Co(7,0,k,((k|0)<0)<<31>>31)|0,W=K()|0,S?(S=Nr(k|0,W|0,5,0)|0,S=ln(S|0,K()|0,-5,-1)|0,S=m0(S|0,K()|0,6,0)|0,S=ln(S|0,K()|0,1,0)|0,D=K()|0):(S=k,D=W),ce=te+-1|0,ce=Nr(k|0,W|0,ce|0,((ce|0)<0)<<31>>31|0)|0,ce=ln(S|0,D|0,ce|0,K()|0)|0,te=K()|0,W=y,W=ln(ce|0,te|0,d[W>>2]|0,d[W+4>>2]|0)|0,te=K()|0,ce=y,d[ce>>2]=W,d[ce+4>>2]=te),(le|0)<=(p|0)){k=37;break}}if((k|0)==19)dt(27795,27122,1276,27158);else if((k|0)==37){E=y,x=d[E+4>>2]|0,E=d[E>>2]|0;break}else if((k|0)==42)return $=Le,x|0}else x=0,E=0}else k=33;while(!1);e:do if((k|0)==33)if(ue=y,d[ue>>2]=0,d[ue+4>>2]=0,(Ue|0)>(p|0)){for(S=Ue;;){if(x=lt(f|0,h|0,(15-S|0)*3|0)|0,K()|0,x=x&7,(x|0)==7){x=5;break}if(E=Ue-S|0,E=Co(7,0,E,((E|0)<0)<<31>>31)|0,x=Nr(E|0,K()|0,x|0,0)|0,E=K()|0,ue=y,E=ln(d[ue>>2]|0,d[ue+4>>2]|0,x|0,E|0)|0,x=K()|0,ue=y,d[ue>>2]=E,d[ue+4>>2]=x,S=S+-1|0,(S|0)<=(p|0))break e}return $=Le,x|0}else x=0,E=0;while(!1);return ns(ve,R,Ue,Te)|0&&dt(27795,27122,1236,27173),Ue=Te,Te=d[Ue+4>>2]|0,((x|0)>-1|(x|0)==-1&E>>>0>4294967295)&((Te|0)>(x|0)|((Te|0)==(x|0)?(d[Ue>>2]|0)>>>0>E>>>0:0))?(Ue=0,$=Le,Ue|0):(dt(27795,27122,1316,27158),0)}function C5(f,h,p,y,x,S){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0,S=S|0;var E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0;if(te=$,$=$+16|0,E=te,x>>>0>15)return S=4,$=te,S|0;if(R=lt(p|0,y|0,52)|0,K()|0,R=R&15,(R|0)>(x|0))return S=12,$=te,S|0;if(ns(p,y,x,E)|0&&dt(27795,27122,1236,27173),W=E,k=d[W+4>>2]|0,!(((h|0)>-1|(h|0)==-1&f>>>0>4294967295)&((k|0)>(h|0)|((k|0)==(h|0)?(d[W>>2]|0)>>>0>f>>>0:0))))return S=2,$=te,S|0;W=x-R|0,x=mt(x|0,0,52)|0,D=K()|0|y&-15728641,k=S,d[k>>2]=x|p,d[k+4>>2]=D,k=lt(p|0,y|0,45)|0,K()|0;e:do if(Ui(k&127)|0){if(R|0)for(E=1;;){if(k=mt(7,0,(15-E|0)*3|0)|0,!((k&p|0)==0&((K()|0)&y|0)==0))break e;if(E>>>0<R>>>0)E=E+1|0;else break}if((W|0)<1)return S=0,$=te,S|0;for(k=R^15,y=-1,D=1,E=1;;){R=W-D|0,R=Co(7,0,R,((R|0)<0)<<31>>31)|0,p=K()|0;do if(E)if(E=Nr(R|0,p|0,5,0)|0,E=ln(E|0,K()|0,-5,-1)|0,E=m0(E|0,K()|0,6,0)|0,x=K()|0,(h|0)>(x|0)|(h|0)==(x|0)&f>>>0>E>>>0){h=ln(f|0,h|0,-1,-1)|0,h=Gr(h|0,K()|0,E|0,x|0)|0,E=K()|0,ce=S,ue=d[ce>>2]|0,ce=d[ce+4>>2]|0,ve=(k+y|0)*3|0,le=mt(7,0,ve|0)|0,ce=ce&~(K()|0),y=m0(h|0,E|0,R|0,p|0)|0,f=K()|0,x=ln(y|0,f|0,2,0)|0,ve=mt(x|0,K()|0,ve|0)|0,ce=K()|0|ce,x=S,d[x>>2]=ve|ue&~le,d[x+4>>2]=ce,f=Nr(y|0,f|0,R|0,p|0)|0,f=Gr(h|0,E|0,f|0,K()|0)|0,E=0,h=K()|0;break}else{ve=S,le=d[ve>>2]|0,ve=d[ve+4>>2]|0,ue=mt(7,0,(k+y|0)*3|0)|0,ve=ve&~(K()|0),E=S,d[E>>2]=le&~ue,d[E+4>>2]=ve,E=1;break}else le=S,x=d[le>>2]|0,le=d[le+4>>2]|0,y=(k+y|0)*3|0,ce=mt(7,0,y|0)|0,le=le&~(K()|0),ve=m0(f|0,h|0,R|0,p|0)|0,E=K()|0,y=mt(ve|0,E|0,y|0)|0,le=K()|0|le,ue=S,d[ue>>2]=y|x&~ce,d[ue+4>>2]=le,E=Nr(ve|0,E|0,R|0,p|0)|0,f=Gr(f|0,h|0,E|0,K()|0)|0,E=0,h=K()|0;while(!1);if((W|0)>(D|0))y=~D,D=D+1|0;else{h=0;break}}return $=te,h|0}while(!1);if((W|0)<1)return ve=0,$=te,ve|0;for(x=R^15,E=1;;)if(ue=W-E|0,ue=Co(7,0,ue,((ue|0)<0)<<31>>31)|0,ve=K()|0,D=S,p=d[D>>2]|0,D=d[D+4>>2]|0,R=(x-E|0)*3|0,y=mt(7,0,R|0)|0,D=D&~(K()|0),ce=m0(f|0,h|0,ue|0,ve|0)|0,le=K()|0,R=mt(ce|0,le|0,R|0)|0,D=K()|0|D,k=S,d[k>>2]=R|p&~y,d[k+4>>2]=D,ve=Nr(ce|0,le|0,ue|0,ve|0)|0,f=Gr(f|0,h|0,ve|0,K()|0)|0,h=K()|0,(W|0)<=(E|0)){h=0;break}else E=E+1|0;return $=te,h|0}function Xi(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0;x=lt(h|0,p|0,52)|0,K()|0,x=x&15,(h|0)==0&(p|0)==0|((y|0)>15|(x|0)>(y|0))?(S=-1,h=-1,p=0,x=0):(h=Ro(h,p,x+1|0,y)|0,E=(K()|0)&-15728641,p=mt(y|0,0,52)|0,p=h|p,E=E|(K()|0),h=(wn(p,E)|0)==0,S=x,h=h?-1:y,x=E),E=f,d[E>>2]=p,d[E+4>>2]=x,d[f+8>>2]=S,d[f+12>>2]=h}function Ou(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0;if(x=lt(f|0,h|0,52)|0,K()|0,x=x&15,S=y+8|0,d[S>>2]=x,(f|0)==0&(h|0)==0|((p|0)>15|(x|0)>(p|0))){p=y,d[p>>2]=0,d[p+4>>2]=0,d[S>>2]=-1,d[y+12>>2]=-1;return}if(f=Ro(f,h,x+1|0,p)|0,S=(K()|0)&-15728641,x=mt(p|0,0,52)|0,x=f|x,S=S|(K()|0),f=y,d[f>>2]=x,d[f+4>>2]=S,f=y+12|0,wn(x,S)|0){d[f>>2]=p;return}else{d[f>>2]=-1;return}}function ku(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0;if(p=f,h=d[p>>2]|0,p=d[p+4>>2]|0,!((h|0)==0&(p|0)==0)&&(y=lt(h|0,p|0,52)|0,K()|0,y=y&15,R=mt(1,0,(y^15)*3|0)|0,h=ln(R|0,K()|0,h|0,p|0)|0,p=K()|0,R=f,d[R>>2]=h,d[R+4>>2]=p,R=f+8|0,E=d[R>>2]|0,!((y|0)<(E|0)))){for(D=f+12|0,S=y;;){if((S|0)==(E|0)){y=5;break}if(k=(S|0)==(d[D>>2]|0),x=(15-S|0)*3|0,y=lt(h|0,p|0,x|0)|0,K()|0,y=y&7,k&((y|0)==1&!0)){y=7;break}if(!((y|0)==7&!0)){y=10;break}if(k=mt(1,0,x|0)|0,h=ln(h|0,p|0,k|0,K()|0)|0,p=K()|0,k=f,d[k>>2]=h,d[k+4>>2]=p,(S|0)>(E|0))S=S+-1|0;else{y=10;break}}if((y|0)==5){k=f,d[k>>2]=0,d[k+4>>2]=0,d[R>>2]=-1,d[D>>2]=-1;return}else if((y|0)==7){E=mt(1,0,x|0)|0,E=ln(h|0,p|0,E|0,K()|0)|0,R=K()|0,k=f,d[k>>2]=E,d[k+4>>2]=R,d[D>>2]=S+-1;return}else if((y|0)==10)return}}function Rl(f){f=+f;var h=0;return h=f<0?f+6.283185307179586:f,+(f>=6.283185307179586?h+-6.283185307179586:h)}function d0(f,h){return f=f|0,h=h|0,+On(+(+X[f>>3]-+X[h>>3]))<17453292519943298e-27?(h=+On(+(+X[f+8>>3]-+X[h+8>>3]))<17453292519943298e-27,h|0):(h=0,h|0)}function er(f,h){switch(f=+f,h=h|0,h|0){case 1:{f=f<0?f+6.283185307179586:f;break}case 2:{f=f>0?f+-6.283185307179586:f;break}}return+f}function T1(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0;return x=+X[h>>3],y=+X[f>>3],S=+kn(+((x-y)*.5)),p=+kn(+((+X[h+8>>3]-+X[f+8>>3])*.5)),p=S*S+p*(+pi(+x)*+pi(+y)*p),+(+Fe(+ +li(+p),+ +li(+(1-p)))*2)}function zi(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0;return x=+X[h>>3],y=+X[f>>3],S=+kn(+((x-y)*.5)),p=+kn(+((+X[h+8>>3]-+X[f+8>>3])*.5)),p=S*S+p*(+pi(+x)*+pi(+y)*p),+(+Fe(+ +li(+p),+ +li(+(1-p)))*2*6371.007180918475)}function As(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0;return x=+X[h>>3],y=+X[f>>3],S=+kn(+((x-y)*.5)),p=+kn(+((+X[h+8>>3]-+X[f+8>>3])*.5)),p=S*S+p*(+pi(+x)*+pi(+y)*p),+(+Fe(+ +li(+p),+ +li(+(1-p)))*2*6371.007180918475*1e3)}function zr(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0;return S=+X[h>>3],y=+pi(+S),x=+X[h+8>>3]-+X[f+8>>3],E=y*+kn(+x),p=+X[f>>3],+ +Fe(+E,+(+kn(+S)*+pi(+p)-+pi(+x)*(y*+kn(+p))))}function Jc(f,h,p,y){f=f|0,h=+h,p=+p,y=y|0;var x=0,S=0,E=0,R=0;if(p<1e-16){d[y>>2]=d[f>>2],d[y+4>>2]=d[f+4>>2],d[y+8>>2]=d[f+8>>2],d[y+12>>2]=d[f+12>>2];return}S=h<0?h+6.283185307179586:h,S=h>=6.283185307179586?S+-6.283185307179586:S;do if(S<1e-16)h=+X[f>>3]+p,X[y>>3]=h,x=y;else{if(x=+On(+(S+-3.141592653589793))<1e-16,h=+X[f>>3],x){h=h-p,X[y>>3]=h,x=y;break}if(E=+pi(+p),p=+kn(+p),h=E*+kn(+h)+ +pi(+S)*(p*+pi(+h)),h=h>1?1:h,h=+ie(+(h<-1?-1:h)),X[y>>3]=h,+On(+(h+-1.5707963267948966))<1e-16){X[y>>3]=1.5707963267948966,X[y+8>>3]=0;return}if(+On(+(h+1.5707963267948966))<1e-16){X[y>>3]=-1.5707963267948966,X[y+8>>3]=0;return}if(R=1/+pi(+h),S=p*+kn(+S)*R,p=+X[f>>3],h=R*((E-+kn(+h)*+kn(+p))/+pi(+p)),E=S>1?1:S,h=h>1?1:h,h=+X[f+8>>3]+ +Fe(+(E<-1?-1:E),+(h<-1?-1:h)),h>3.141592653589793)do h=h+-6.283185307179586;while(h>3.141592653589793);if(h<-3.141592653589793)do h=h+6.283185307179586;while(h<-3.141592653589793);X[y+8>>3]=h;return}while(!1);if(+On(+(h+-1.5707963267948966))<1e-16){X[x>>3]=1.5707963267948966,X[y+8>>3]=0;return}if(+On(+(h+1.5707963267948966))<1e-16){X[x>>3]=-1.5707963267948966,X[y+8>>3]=0;return}if(h=+X[f+8>>3],h>3.141592653589793)do h=h+-6.283185307179586;while(h>3.141592653589793);if(h<-3.141592653589793)do h=h+6.283185307179586;while(h<-3.141592653589793);X[y+8>>3]=h}function w1(f,h){return f=f|0,h=h|0,f>>>0>15?(h=4,h|0):(X[h>>3]=+X[20656+(f<<3)>>3],h=0,h|0)}function Vu(f,h){return f=f|0,h=h|0,f>>>0>15?(h=4,h|0):(X[h>>3]=+X[20784+(f<<3)>>3],h=0,h|0)}function qA(f,h){return f=f|0,h=h|0,f>>>0>15?(h=4,h|0):(X[h>>3]=+X[20912+(f<<3)>>3],h=0,h|0)}function ps(f,h){return f=f|0,h=h|0,f>>>0>15?(h=4,h|0):(X[h>>3]=+X[21040+(f<<3)>>3],h=0,h|0)}function zu(f,h){f=f|0,h=h|0;var p=0;return f>>>0>15?(h=4,h|0):(p=Co(7,0,f,((f|0)<0)<<31>>31)|0,p=Nr(p|0,K()|0,120,0)|0,f=K()|0,d[h>>2]=p|2,d[h+4>>2]=f,h=0,h|0)}function e3(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0;return ce=+X[h>>3],W=+X[f>>3],D=+kn(+((ce-W)*.5)),S=+X[h+8>>3],k=+X[f+8>>3],E=+kn(+((S-k)*.5)),R=+pi(+W),te=+pi(+ce),E=D*D+E*(te*R*E),E=+Fe(+ +li(+E),+ +li(+(1-E)))*2,D=+X[p>>3],ce=+kn(+((D-ce)*.5)),y=+X[p+8>>3],S=+kn(+((y-S)*.5)),x=+pi(+D),S=ce*ce+S*(te*x*S),S=+Fe(+ +li(+S),+ +li(+(1-S)))*2,D=+kn(+((W-D)*.5)),y=+kn(+((k-y)*.5)),y=D*D+y*(R*x*y),y=+Fe(+ +li(+y),+ +li(+(1-y)))*2,x=(E+S+y)*.5,+(+Ce(+ +li(+(+qs(+(x*.5))*+qs(+((x-E)*.5))*+qs(+((x-S)*.5))*+qs(+((x-y)*.5)))))*4)}function Gu(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0;if(R=$,$=$+192|0,S=R+168|0,E=R,x=Vr(f,h,S)|0,x|0)return p=x,$=R,p|0;if(Pa(f,h,E)|0&&dt(27795,27190,415,27199),h=d[E>>2]|0,(h|0)>0){if(y=+e3(E+8|0,E+8+(((h|0)!=1&1)<<4)|0,S)+0,(h|0)!=1){f=1;do x=f,f=f+1|0,y=y+ +e3(E+8+(x<<4)|0,E+8+(((f|0)%(h|0)|0)<<4)|0,S);while((f|0)<(h|0))}}else y=0;return X[p>>3]=y,p=0,$=R,p|0}function A0(f,h,p){return f=f|0,h=h|0,p=p|0,f=Gu(f,h,p)|0,f|0||(X[p>>3]=+X[p>>3]*6371.007180918475*6371.007180918475),f|0}function Na(f,h,p){return f=f|0,h=h|0,p=p|0,f=Gu(f,h,p)|0,f|0||(X[p>>3]=+X[p>>3]*6371.007180918475*6371.007180918475*1e3*1e3),f|0}function Cl(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(R=$,$=$+176|0,E=R,f=Lu(f,h,E)|0,f|0)return E=f,$=R,E|0;if(X[p>>3]=0,f=d[E>>2]|0,(f|0)<=1)return E=0,$=R,E|0;h=f+-1|0,f=0,y=+X[E+8>>3],x=+X[E+16>>3],S=0;do f=f+1|0,k=y,y=+X[E+8+(f<<4)>>3],W=+kn(+((y-k)*.5)),D=x,x=+X[E+8+(f<<4)+8>>3],D=+kn(+((x-D)*.5)),D=W*W+D*(+pi(+y)*+pi(+k)*D),S=S+ +Fe(+ +li(+D),+ +li(+(1-D)))*2;while((f|0)<(h|0));return X[p>>3]=S,E=0,$=R,E|0}function t3(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(R=$,$=$+176|0,E=R,f=Lu(f,h,E)|0,f|0)return E=f,S=+X[p>>3],S=S*6371.007180918475,X[p>>3]=S,$=R,E|0;if(X[p>>3]=0,f=d[E>>2]|0,(f|0)<=1)return E=0,S=0,S=S*6371.007180918475,X[p>>3]=S,$=R,E|0;h=f+-1|0,f=0,y=+X[E+8>>3],x=+X[E+16>>3],S=0;do f=f+1|0,k=y,y=+X[E+8+(f<<4)>>3],W=+kn(+((y-k)*.5)),D=x,x=+X[E+8+(f<<4)+8>>3],D=+kn(+((x-D)*.5)),D=W*W+D*(+pi(+k)*+pi(+y)*D),S=S+ +Fe(+ +li(+D),+ +li(+(1-D)))*2;while((f|0)!=(h|0));return X[p>>3]=S,E=0,W=S,W=W*6371.007180918475,X[p>>3]=W,$=R,E|0}function n3(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(R=$,$=$+176|0,E=R,f=Lu(f,h,E)|0,f|0)return E=f,S=+X[p>>3],S=S*6371.007180918475,S=S*1e3,X[p>>3]=S,$=R,E|0;if(X[p>>3]=0,f=d[E>>2]|0,(f|0)<=1)return E=0,S=0,S=S*6371.007180918475,S=S*1e3,X[p>>3]=S,$=R,E|0;h=f+-1|0,f=0,y=+X[E+8>>3],x=+X[E+16>>3],S=0;do f=f+1|0,k=y,y=+X[E+8+(f<<4)>>3],W=+kn(+((y-k)*.5)),D=x,x=+X[E+8+(f<<4)+8>>3],D=+kn(+((x-D)*.5)),D=W*W+D*(+pi(+k)*+pi(+y)*D),S=S+ +Fe(+ +li(+D),+ +li(+(1-D)))*2;while((f|0)!=(h|0));return X[p>>3]=S,E=0,W=S,W=W*6371.007180918475,W=W*1e3,X[p>>3]=W,$=R,E|0}function L6(f){f=f|0;var h=0,p=0,y=0;return h=ao(1,12)|0,h||dt(27280,27235,49,27293),p=f+4|0,y=d[p>>2]|0,y|0?(y=y+8|0,d[y>>2]=h,d[p>>2]=h,h|0):(d[f>>2]|0&&dt(27310,27235,61,27333),y=f,d[y>>2]=h,d[p>>2]=h,h|0)}function D6(f,h){f=f|0,h=h|0;var p=0,y=0;return y=aa(24)|0,y||dt(27347,27235,78,27361),d[y>>2]=d[h>>2],d[y+4>>2]=d[h+4>>2],d[y+8>>2]=d[h+8>>2],d[y+12>>2]=d[h+12>>2],d[y+16>>2]=0,h=f+4|0,p=d[h>>2]|0,p|0?(d[p+16>>2]=y,d[h>>2]=y,y|0):(d[f>>2]|0&&dt(27376,27235,82,27361),d[f>>2]=y,d[h>>2]=y,y|0)}function P5(f){f=f|0;var h=0,p=0,y=0,x=0;if(f)for(y=1;;){if(h=d[f>>2]|0,h|0)do{if(p=d[h>>2]|0,p|0)do x=p,p=d[p+16>>2]|0,xn(x);while(p|0);x=h,h=d[h+8>>2]|0,xn(x)}while(h|0);if(h=f,f=d[f+8>>2]|0,y||xn(h),f)y=0;else break}}function B6(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0,In=0,$n=0,_n=0,Xt=0,At=0,Bn=0,yi=0,Ln=0;if(x=f+8|0,d[x>>2]|0)return Ln=1,Ln|0;if(y=d[f>>2]|0,!y)return Ln=0,Ln|0;h=y,p=0;do p=p+1|0,h=d[h+8>>2]|0;while(h|0);if(p>>>0<2)return Ln=0,Ln|0;Bn=aa(p<<2)|0,Bn||dt(27396,27235,317,27415),At=aa(p<<5)|0,At||dt(27437,27235,321,27415),d[f>>2]=0,en=f+4|0,d[en>>2]=0,d[x>>2]=0,p=0,Xt=0,gt=0,te=0;e:for(;;){if(W=d[y>>2]|0,W){S=0,E=W;do{if(D=+X[E+8>>3],h=E,E=d[E+16>>2]|0,k=(E|0)==0,x=k?W:E,R=+X[x+8>>3],+On(+(D-R))>3.141592653589793){Ln=14;break}S=S+(R-D)*(+X[h>>3]+ +X[x>>3])}while(!k);if((Ln|0)==14){Ln=0,S=0,h=W;do _e=+X[h+8>>3],_n=h+16|0,$n=d[_n>>2]|0,$n=$n|0?$n:W,Ee=+X[$n+8>>3],S=S+(+X[h>>3]+ +X[$n>>3])*((Ee<0?Ee+6.283185307179586:Ee)-(_e<0?_e+6.283185307179586:_e)),h=d[(h|0?_n:y)>>2]|0;while(h|0)}S>0?(d[Bn+(Xt<<2)>>2]=y,Xt=Xt+1|0,x=gt,h=te):Ln=19}else Ln=19;if((Ln|0)==19){Ln=0;do if(p){if(h=p+8|0,d[h>>2]|0){Ln=21;break e}if(p=ao(1,12)|0,!p){Ln=23;break e}d[h>>2]=p,x=p+4|0,E=p,h=te}else if(te){x=en,E=te+8|0,h=y,p=f;break}else if(d[f>>2]|0){Ln=27;break e}else{x=en,E=f,h=y,p=f;break}while(!1);if(d[E>>2]=y,d[x>>2]=y,E=At+(gt<<5)|0,k=d[y>>2]|0,k){for(W=At+(gt<<5)+8|0,X[W>>3]=17976931348623157e292,te=At+(gt<<5)+24|0,X[te>>3]=17976931348623157e292,X[E>>3]=-17976931348623157e292,ce=At+(gt<<5)+16|0,X[ce>>3]=-17976931348623157e292,Ue=17976931348623157e292,Le=-17976931348623157e292,x=0,le=k,D=17976931348623157e292,ve=17976931348623157e292,Te=-17976931348623157e292,R=-17976931348623157e292;S=+X[le>>3],_e=+X[le+8>>3],le=d[le+16>>2]|0,ue=(le|0)==0,Ee=+X[(ue?k:le)+8>>3],S<D&&(X[W>>3]=S,D=S),_e<ve&&(X[te>>3]=_e,ve=_e),S>Te?X[E>>3]=S:S=Te,_e>R&&(X[ce>>3]=_e,R=_e),Ue=_e>0&_e<Ue?_e:Ue,Le=_e<0&_e>Le?_e:Le,x=x|+On(+(_e-Ee))>3.141592653589793,!ue;)Te=S;x&&(X[ce>>3]=Le,X[te>>3]=Ue)}else d[E>>2]=0,d[E+4>>2]=0,d[E+8>>2]=0,d[E+12>>2]=0,d[E+16>>2]=0,d[E+20>>2]=0,d[E+24>>2]=0,d[E+28>>2]=0;x=gt+1|0}if(_n=y+8|0,y=d[_n>>2]|0,d[_n>>2]=0,y)gt=x,te=h;else{Ln=45;break}}if((Ln|0)==21)dt(27213,27235,35,27247);else if((Ln|0)==23)dt(27267,27235,37,27247);else if((Ln|0)==27)dt(27310,27235,61,27333);else if((Ln|0)==45){e:do if((Xt|0)>0){for(_n=(x|0)==0,In=x<<2,$n=(f|0)==0,Pn=0,h=0;;){if(zt=d[Bn+(Pn<<2)>>2]|0,_n)Ln=73;else{if(gt=aa(In)|0,!gt){Ln=50;break}if(en=aa(In)|0,!en){Ln=52;break}t:do if($n)p=0;else{for(x=0,p=0,E=f;y=At+(x<<5)|0,N5(d[E>>2]|0,y,d[zt>>2]|0)|0?(d[gt+(p<<2)>>2]=E,d[en+(p<<2)>>2]=y,ue=p+1|0):ue=p,E=d[E+8>>2]|0,E;)x=x+1|0,p=ue;if((ue|0)>0)if(y=d[gt>>2]|0,(ue|0)==1)p=y;else for(ce=0,le=-1,p=y,te=y;;){for(k=d[te>>2]|0,y=0,E=0;x=d[d[gt+(E<<2)>>2]>>2]|0,(x|0)==(k|0)?W=y:W=y+((N5(x,d[en+(E<<2)>>2]|0,d[k>>2]|0)|0)&1)|0,E=E+1|0,(E|0)!=(ue|0);)y=W;if(x=(W|0)>(le|0),p=x?te:p,y=ce+1|0,(y|0)==(ue|0))break t;ce=y,le=x?W:le,te=d[gt+(y<<2)>>2]|0}else p=0}while(!1);if(xn(gt),xn(en),p){if(x=p+4|0,y=d[x>>2]|0,y)p=y+8|0;else if(d[p>>2]|0){Ln=70;break}d[p>>2]=zt,d[x>>2]=zt}else Ln=73}if((Ln|0)==73){if(Ln=0,h=d[zt>>2]|0,h|0)do en=h,h=d[h+16>>2]|0,xn(en);while(h|0);xn(zt),h=1}if(Pn=Pn+1|0,(Pn|0)>=(Xt|0)){yi=h;break e}}(Ln|0)==50?dt(27452,27235,249,27471):(Ln|0)==52?dt(27490,27235,252,27471):(Ln|0)==70&&dt(27310,27235,61,27333)}else yi=0;while(!1);return xn(Bn),xn(At),Ln=yi,Ln|0}return 0}function N5(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(!(Pu(h,p)|0)||(h=zc(h)|0,y=+X[p>>3],x=+X[p+8>>3],x=h&x<0?x+6.283185307179586:x,f=d[f>>2]|0,!f))return f=0,f|0;if(h){h=0,k=x,p=f;e:for(;;){for(;E=+X[p>>3],x=+X[p+8>>3],p=p+16|0,W=d[p>>2]|0,W=W|0?W:f,S=+X[W>>3],R=+X[W+8>>3],E>S?(D=E,E=R):(D=S,S=E,E=x,x=R),y=y==S|y==D?y+2220446049250313e-31:y,!!(y<S|y>D);)if(p=d[p>>2]|0,!p){p=22;break e}if(R=E<0?E+6.283185307179586:E,E=x<0?x+6.283185307179586:x,k=R==k|E==k?k+-2220446049250313e-31:k,D=R+(E-R)*((y-S)/(D-S)),(D<0?D+6.283185307179586:D)>k&&(h=h^1),p=d[p>>2]|0,!p){p=22;break}}if((p|0)==22)return h|0}else{h=0,k=x,p=f;e:for(;;){for(;E=+X[p>>3],x=+X[p+8>>3],p=p+16|0,W=d[p>>2]|0,W=W|0?W:f,S=+X[W>>3],R=+X[W+8>>3],E>S?(D=E,E=R):(D=S,S=E,E=x,x=R),y=y==S|y==D?y+2220446049250313e-31:y,!!(y<S|y>D);)if(p=d[p>>2]|0,!p){p=22;break e}if(k=E==k|x==k?k+-2220446049250313e-31:k,E+(x-E)*((y-S)/(D-S))>k&&(h=h^1),p=d[p>>2]|0,!p){p=22;break}}if((p|0)==22)return h|0}return 0}function Ia(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0;if(Le=$,$=$+32|0,Ue=Le+16|0,Te=Le,S=lt(f|0,h|0,52)|0,K()|0,S=S&15,le=lt(p|0,y|0,52)|0,K()|0,(S|0)!=(le&15|0))return Ue=12,$=Le,Ue|0;if(k=lt(f|0,h|0,45)|0,K()|0,k=k&127,W=lt(p|0,y|0,45)|0,K()|0,W=W&127,k>>>0>121|W>>>0>121)return Ue=5,$=Le,Ue|0;if(le=(k|0)!=(W|0),le){if(R=Vc(k,W)|0,(R|0)==7)return Ue=1,$=Le,Ue|0;D=Vc(W,k)|0,(D|0)==7?dt(27514,27538,161,27548):(ue=R,E=D)}else ue=0,E=0;te=Ui(k)|0,ce=Ui(W)|0,d[Ue>>2]=0,d[Ue+4>>2]=0,d[Ue+8>>2]=0,d[Ue+12>>2]=0;do if(ue){if(W=d[4272+(k*28|0)+(ue<<2)>>2]|0,R=(W|0)>0,ce)if(R){k=0,D=p,R=y;do D=Uu(D,R)|0,R=K()|0,E=Pr(E)|0,(E|0)==1&&(E=Pr(1)|0),k=k+1|0;while((k|0)!=(W|0));W=E,k=D,D=R}else W=E,k=p,D=y;else if(R){k=0,D=p,R=y;do D=b1(D,R)|0,R=K()|0,E=Pr(E)|0,k=k+1|0;while((k|0)!=(W|0));W=E,k=D,D=R}else W=E,k=p,D=y;if(Zc(k,D,Ue)|0,le||dt(27563,27538,191,27548),R=(te|0)!=0,E=(ce|0)!=0,R&E&&dt(27590,27538,192,27548),R){if(E=kr(f,h)|0,(E|0)==7){S=5;break}if(st[22e3+(E*7|0)+ue>>0]|0){S=1;break}D=d[21168+(E*28|0)+(ue<<2)>>2]|0,k=D}else if(E){if(E=kr(k,D)|0,(E|0)==7){S=5;break}if(st[22e3+(E*7|0)+W>>0]|0){S=1;break}k=0,D=d[21168+(W*28|0)+(E<<2)>>2]|0}else k=0,D=0;if((k|D|0)<0)S=5;else{if((D|0)>0){R=Ue+4|0,E=0;do v1(R),E=E+1|0;while((E|0)!=(D|0))}if(d[Te>>2]=0,d[Te+4>>2]=0,d[Te+8>>2]=0,x5(Te,ue),S|0)for(;so(S)|0?y1(Te):l0(Te),(S|0)>1;)S=S+-1|0;if((k|0)>0){S=0;do v1(Te),S=S+1|0;while((S|0)!=(k|0))}ve=Ue+4|0,Ji(ve,Te,ve),es(ve),ve=51}}else if(Zc(p,y,Ue)|0,(te|0)!=0&(ce|0)!=0)if((W|0)!=(k|0)&&dt(27621,27538,261,27548),E=kr(f,h)|0,S=kr(p,y)|0,(E|0)==7|(S|0)==7)S=5;else if(st[22e3+(E*7|0)+S>>0]|0)S=1;else if(E=d[21168+(E*28|0)+(S<<2)>>2]|0,(E|0)>0){R=Ue+4|0,S=0;do v1(R),S=S+1|0;while((S|0)!=(E|0));ve=51}else ve=51;else ve=51;while(!1);return(ve|0)==51&&(S=Ue+4|0,d[x>>2]=d[S>>2],d[x+4>>2]=d[S+4>>2],d[x+8>>2]=d[S+8>>2],S=0),Ue=S,$=Le,Ue|0}function i3(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0;if(ve=$,$=$+48|0,k=ve+36|0,E=ve+24|0,R=ve+12|0,D=ve,x=lt(f|0,h|0,52)|0,K()|0,x=x&15,ce=lt(f|0,h|0,45)|0,K()|0,ce=ce&127,ce>>>0>121)return y=5,$=ve,y|0;if(W=Ui(ce)|0,mt(x|0,0,52)|0,Te=K()|0|134225919,S=y,d[S>>2]=-1,d[S+4>>2]=Te,!x)return x=Hc(p)|0,(x|0)==7||(x=Cu(ce,x)|0,(x|0)==127)?(Te=1,$=ve,Te|0):(le=mt(x|0,0,45)|0,ue=K()|0,ce=y,ue=d[ce+4>>2]&-1040385|ue,Te=y,d[Te>>2]=d[ce>>2]|le,d[Te+4>>2]=ue,Te=0,$=ve,Te|0);for(d[k>>2]=d[p>>2],d[k+4>>2]=d[p+4>>2],d[k+8>>2]=d[p+8>>2],p=x;;){if(S=p,p=p+-1|0,d[E>>2]=d[k>>2],d[E+4>>2]=d[k+4>>2],d[E+8>>2]=d[k+8>>2],so(S)|0){if(x=ia(k)|0,x|0){p=13;break}d[R>>2]=d[k>>2],d[R+4>>2]=d[k+4>>2],d[R+8>>2]=d[k+8>>2],y1(R)}else{if(x=Wc(k)|0,x|0){p=13;break}d[R>>2]=d[k>>2],d[R+4>>2]=d[k+4>>2],d[R+8>>2]=d[k+8>>2],l0(R)}if(_5(E,R,D),es(D),x=y,Le=d[x>>2]|0,x=d[x+4>>2]|0,Ee=(15-S|0)*3|0,Ue=mt(7,0,Ee|0)|0,x=x&~(K()|0),Ee=mt(Hc(D)|0,0,Ee|0)|0,x=K()|0|x,Te=y,d[Te>>2]=Ee|Le&~Ue,d[Te+4>>2]=x,(S|0)<=1){p=14;break}}e:do if((p|0)!=13&&(p|0)==14)if((d[k>>2]|0)<=1&&(d[k+4>>2]|0)<=1&&(d[k+8>>2]|0)<=1){p=Hc(k)|0,x=Cu(ce,p)|0,(x|0)==127?D=0:D=Ui(x)|0;t:do if(p){if(W){if(x=kr(f,h)|0,(x|0)==7){x=5;break e}if(S=d[21376+(x*28|0)+(p<<2)>>2]|0,(S|0)>0){x=p,p=0;do x=Eo(x)|0,p=p+1|0;while((p|0)!=(S|0))}else x=p;if((x|0)==1){x=9;break e}p=Cu(ce,x)|0,(p|0)==127&&dt(27648,27538,411,27678),Ui(p)|0?dt(27693,27538,412,27678):(ue=p,le=S,te=x)}else ue=x,le=0,te=p;if(R=d[4272+(ce*28|0)+(te<<2)>>2]|0,(R|0)<=-1&&dt(27724,27538,419,27678),!D){if((le|0)<0){x=5;break e}if(le|0){S=y,x=0,p=d[S>>2]|0,S=d[S+4>>2]|0;do p=f0(p,S)|0,S=K()|0,Ee=y,d[Ee>>2]=p,d[Ee+4>>2]=S,x=x+1|0;while((x|0)<(le|0))}if((R|0)<=0){x=ue,p=58;break}for(S=y,x=0,p=d[S>>2]|0,S=d[S+4>>2]|0;;)if(p=f0(p,S)|0,S=K()|0,Ee=y,d[Ee>>2]=p,d[Ee+4>>2]=S,x=x+1|0,(x|0)==(R|0)){x=ue,p=58;break t}}if(E=Vc(ue,ce)|0,(E|0)==7&&dt(27514,27538,428,27678),x=y,p=d[x>>2]|0,x=d[x+4>>2]|0,(R|0)>0){S=0;do p=f0(p,x)|0,x=K()|0,Ee=y,d[Ee>>2]=p,d[Ee+4>>2]=x,S=S+1|0;while((S|0)!=(R|0))}if(x=kr(p,x)|0,(x|0)==7&&dt(27795,27538,440,27678),p=Ru(ue)|0,p=d[(p?21792:21584)+(E*28|0)+(x<<2)>>2]|0,(p|0)<0&&dt(27795,27538,454,27678),!p)x=ue,p=58;else{E=y,x=0,S=d[E>>2]|0,E=d[E+4>>2]|0;do S=V0(S,E)|0,E=K()|0,Ee=y,d[Ee>>2]=S,d[Ee+4>>2]=E,x=x+1|0;while((x|0)<(p|0));x=ue,p=58}}else if((W|0)!=0&(D|0)!=0){if(p=kr(f,h)|0,S=y,S=kr(d[S>>2]|0,d[S+4>>2]|0)|0,(p|0)==7|(S|0)==7){x=5;break e}if(S=d[21376+(p*28|0)+(S<<2)>>2]|0,(S|0)<0){x=5;break e}if(!S)p=59;else{R=y,p=0,E=d[R>>2]|0,R=d[R+4>>2]|0;do E=f0(E,R)|0,R=K()|0,Ee=y,d[Ee>>2]=E,d[Ee+4>>2]=R,p=p+1|0;while((p|0)<(S|0));p=58}}else p=58;while(!1);if((p|0)==58&&D&&(p=59),(p|0)==59&&(Ee=y,(kr(d[Ee>>2]|0,d[Ee+4>>2]|0)|0)==1)){x=9;break}Ee=y,Ue=d[Ee>>2]|0,Ee=d[Ee+4>>2]&-1040385,Le=mt(x|0,0,45)|0,Ee=Ee|(K()|0),x=y,d[x>>2]=Ue|Le,d[x+4>>2]=Ee,x=0}else x=1;while(!1);return Ee=x,$=ve,Ee|0}function qu(f,h,p,y,x,S){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0,S=S|0;var E=0,R=0;return R=$,$=$+16|0,E=R,x?f=15:(f=Ia(f,h,p,y,E)|0,f||(S6(E,S),f=0)),$=R,f|0}function F6(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0;return E=$,$=$+16|0,S=E,y?p=15:(p=c0(p,S)|0,p||(p=i3(f,h,S,x)|0)),$=E,p|0}function r3(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0;return D=$,$=$+32|0,E=D+12|0,R=D,S=Ia(f,h,f,h,E)|0,S|0?(R=S,$=D,R|0):(f=Ia(f,h,p,y,R)|0,f|0?(R=f,$=D,R|0):(E=Iu(E,R)|0,R=x,d[R>>2]=E,d[R+4>>2]=((E|0)<0)<<31>>31,R=0,$=D,R|0))}function s3(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0;return D=$,$=$+32|0,E=D+12|0,R=D,S=Ia(f,h,f,h,E)|0,!S&&(S=Ia(f,h,p,y,R)|0,!S)?(y=Iu(E,R)|0,y=ln(y|0,((y|0)<0)<<31>>31|0,1,0)|0,E=K()|0,R=x,d[R>>2]=y,d[R+4>>2]=E,R=0,$=D,R|0):(R=S,$=D,R|0)}function I5(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0;if(zt=$,$=$+48|0,gt=zt+24|0,E=zt+12|0,en=zt,S=Ia(f,h,f,h,gt)|0,!S&&(S=Ia(f,h,p,y,E)|0,!S)){Ee=Iu(gt,E)|0,_e=((Ee|0)<0)<<31>>31,d[gt>>2]=0,d[gt+4>>2]=0,d[gt+8>>2]=0,d[E>>2]=0,d[E+4>>2]=0,d[E+8>>2]=0,Ia(f,h,f,h,gt)|0&&dt(27795,27538,692,27747),Ia(f,h,p,y,E)|0&&dt(27795,27538,697,27747),h0(gt),h0(E),W=Ee|0?1/+(Ee|0):0,p=d[gt>>2]|0,ve=W*+((d[E>>2]|0)-p|0),Te=gt+4|0,y=d[Te>>2]|0,Ue=W*+((d[E+4>>2]|0)-y|0),Le=gt+8|0,S=d[Le>>2]|0,W=W*+((d[E+8>>2]|0)-S|0),d[en>>2]=p,te=en+4|0,d[te>>2]=y,ce=en+8|0,d[ce>>2]=S;e:do if((Ee|0)<0)S=0;else for(le=0,ue=0;;){D=+(ue>>>0)+4294967296*+(le|0),Pn=ve*D+ +(p|0),R=Ue*D+ +(y|0),D=W*D+ +(S|0),p=~~+Po(+Pn),E=~~+Po(+R),S=~~+Po(+D),Pn=+On(+(+(p|0)-Pn)),R=+On(+(+(E|0)-R)),D=+On(+(+(S|0)-D));do if(Pn>R&Pn>D)p=0-(E+S)|0,y=E;else if(k=0-p|0,R>D){y=k-S|0;break}else{y=E,S=k-E|0;break}while(!1);if(d[en>>2]=p,d[te>>2]=y,d[ce>>2]=S,Xc(en),S=i3(f,h,en,x+(ue<<3)|0)|0,S|0)break e;if(!((le|0)<(_e|0)|(le|0)==(_e|0)&ue>>>0<Ee>>>0)){S=0;break e}p=ln(ue|0,le|0,1,0)|0,y=K()|0,le=y,ue=p,p=d[gt>>2]|0,y=d[Te>>2]|0,S=d[Le>>2]|0}while(!1);return en=S,$=zt,en|0}return en=S,$=zt,en|0}function Co(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0;if((p|0)==0&(y|0)==0)return x=0,S=1,ot(x|0),S|0;S=f,x=h,f=1,h=0;do E=(p&1|0)==0&!0,f=Nr((E?1:S)|0,(E?0:x)|0,f|0,h|0)|0,h=K()|0,p=H5(p|0,y|0,1)|0,y=K()|0,S=Nr(S|0,x|0,S|0,x|0)|0,x=K()|0;while(!((p|0)==0&(y|0)==0));return ot(h|0),f|0}function o3(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0;R=$,$=$+16|0,S=R,E=lt(f|0,h|0,52)|0,K()|0,E=E&15;do if(E){if(x=Vr(f,h,S)|0,!x){k=+X[S>>3],D=1/+pi(+k),W=+X[25968+(E<<3)>>3],X[p>>3]=k+W,X[p+8>>3]=k-W,k=+X[S+8>>3],D=W*D,X[p+16>>3]=D+k,X[p+24>>3]=k-D;break}return E=x,$=R,E|0}else{if(x=lt(f|0,h|0,45)|0,K()|0,x=x&127,x>>>0>121)return E=5,$=R,E|0;S=22064+(x<<5)|0,d[p>>2]=d[S>>2],d[p+4>>2]=d[S+4>>2],d[p+8>>2]=d[S+8>>2],d[p+12>>2]=d[S+12>>2],d[p+16>>2]=d[S+16>>2],d[p+20>>2]=d[S+20>>2],d[p+24>>2]=d[S+24>>2],d[p+28>>2]=d[S+28>>2];break}while(!1);return a0(p,y?1.4:1.1),y=26096+(E<<3)|0,(d[y>>2]|0)==(f|0)&&(d[y+4>>2]|0)==(h|0)&&(X[p>>3]=1.5707963267948966),E=26224+(E<<3)|0,(d[E>>2]|0)==(f|0)&&(d[E+4>>2]|0)==(h|0)&&(X[p+8>>3]=-1.5707963267948966),+X[p>>3]!=1.5707963267948966&&+X[p+8>>3]!=-1.5707963267948966?(E=0,$=R,E|0):(X[p+16>>3]=3.141592653589793,X[p+24>>3]=-3.141592653589793,E=0,$=R,E|0)}function U6(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0;k=$,$=$+48|0,E=k+32|0,S=k+40|0,R=k,Bu(E,0,0,0),D=d[E>>2]|0,E=d[E+4>>2]|0;do if(p>>>0<=15){if(x=E1(y)|0,x|0){y=R,d[y>>2]=0,d[y+4>>2]=0,d[R+8>>2]=x,d[R+12>>2]=-1,y=R+16|0,D=R+29|0,d[y>>2]=0,d[y+4>>2]=0,d[y+8>>2]=0,st[y+12>>0]=0,st[D>>0]=st[S>>0]|0,st[D+1>>0]=st[S+1>>0]|0,st[D+2>>0]=st[S+2>>0]|0;break}if(x=ao((d[h+8>>2]|0)+1|0,32)|0,x){B5(h,x),W=R,d[W>>2]=D,d[W+4>>2]=E,d[R+8>>2]=0,d[R+12>>2]=p,d[R+16>>2]=y,d[R+20>>2]=h,d[R+24>>2]=x,st[R+28>>0]=0,D=R+29|0,st[D>>0]=st[S>>0]|0,st[D+1>>0]=st[S+1>>0]|0,st[D+2>>0]=st[S+2>>0]|0;break}else{y=R,d[y>>2]=0,d[y+4>>2]=0,d[R+8>>2]=13,d[R+12>>2]=-1,y=R+16|0,D=R+29|0,d[y>>2]=0,d[y+4>>2]=0,d[y+8>>2]=0,st[y+12>>0]=0,st[D>>0]=st[S>>0]|0,st[D+1>>0]=st[S+1>>0]|0,st[D+2>>0]=st[S+2>>0]|0;break}}else D=R,d[D>>2]=0,d[D+4>>2]=0,d[R+8>>2]=4,d[R+12>>2]=-1,D=R+16|0,W=R+29|0,d[D>>2]=0,d[D+4>>2]=0,d[D+8>>2]=0,st[D+12>>0]=0,st[W>>0]=st[S>>0]|0,st[W+1>>0]=st[S+1>>0]|0,st[W+2>>0]=st[S+2>>0]|0;while(!1);Hu(R),d[f>>2]=d[R>>2],d[f+4>>2]=d[R+4>>2],d[f+8>>2]=d[R+8>>2],d[f+12>>2]=d[R+12>>2],d[f+16>>2]=d[R+16>>2],d[f+20>>2]=d[R+20>>2],d[f+24>>2]=d[R+24>>2],d[f+28>>2]=d[R+28>>2],$=k}function Hu(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0;if(_e=$,$=$+336|0,le=_e+168|0,ue=_e,y=f,p=d[y>>2]|0,y=d[y+4>>2]|0,(p|0)==0&(y|0)==0){$=_e;return}if(h=f+28|0,st[h>>0]|0?(p=L5(p,y)|0,y=K()|0):st[h>>0]=1,Ee=f+20|0,!(d[d[Ee>>2]>>2]|0)){h=f+24|0,p=d[h>>2]|0,p|0&&xn(p),Le=f,d[Le>>2]=0,d[Le+4>>2]=0,d[f+8>>2]=0,d[Ee>>2]=0,d[f+12>>2]=-1,d[f+16>>2]=0,d[h>>2]=0,$=_e;return}Le=f+16|0,h=d[Le>>2]|0,x=h&15;e:do if((p|0)==0&(y|0)==0)Ue=f+24|0;else{ve=f+12|0,te=(x|0)==3,W=h&255,D=(x|1|0)==3,ce=f+24|0,k=(x+-1|0)>>>0<3,E=(x|2|0)==3,R=ue+8|0;t:for(;;){if(S=lt(p|0,y|0,52)|0,K()|0,S=S&15,(S|0)==(d[ve>>2]|0)){switch(W&15){case 0:case 2:case 3:{if(x=Vr(p,y,le)|0,x|0){Te=15;break t}if(F5(d[Ee>>2]|0,d[ce>>2]|0,le)|0){Te=19;break t}break}}if(D&&(x=d[(d[Ee>>2]|0)+4>>2]|0,d[le>>2]=d[x>>2],d[le+4>>2]=d[x+4>>2],d[le+8>>2]=d[x+8>>2],d[le+12>>2]=d[x+12>>2],Pu(26832,le)|0)){if(z0(d[(d[Ee>>2]|0)+4>>2]|0,S,ue)|0){Te=25;break}if(x=ue,(d[x>>2]|0)==(p|0)&&(d[x+4>>2]|0)==(y|0)){Te=29;break}}if(k){if(x=Pa(p,y,le)|0,x|0){Te=32;break}if(o3(p,y,ue,0)|0){Te=36;break}if(E&&U5(d[Ee>>2]|0,d[ce>>2]|0,le,ue)|0){Te=42;break}if(D&&O5(d[Ee>>2]|0,d[ce>>2]|0,le,ue)|0){Te=42;break}}if(te){if(h=o3(p,y,le,1)|0,x=d[ce>>2]|0,h|0){Te=45;break}if(y5(x,le)|0){if(x6(ue,le),na(le,d[ce>>2]|0)|0){Te=53;break}if(F5(d[Ee>>2]|0,d[ce>>2]|0,R)|0){Te=53;break}if(O5(d[Ee>>2]|0,d[ce>>2]|0,ue,le)|0){Te=53;break}}}}do if((S|0)<(d[ve>>2]|0)){if(h=o3(p,y,le,1)|0,x=d[ce>>2]|0,h|0){Te=58;break t}if(!(y5(x,le)|0)){Te=73;break}if(na(d[ce>>2]|0,le)|0&&(x6(ue,le),U5(d[Ee>>2]|0,d[ce>>2]|0,ue,le)|0)){Te=65;break t}if(p=w5(p,y,S+1|0,ue)|0,p|0){Te=67;break t}y=ue,p=d[y>>2]|0,y=d[y+4>>2]|0}else Te=73;while(!1);if((Te|0)==73&&(Te=0,p=L5(p,y)|0,y=K()|0),(p|0)==0&(y|0)==0){Ue=ce;break e}}switch(Te|0){case 15:{h=d[ce>>2]|0,h|0&&xn(h),Te=f,d[Te>>2]=0,d[Te+4>>2]=0,d[Ee>>2]=0,d[ve>>2]=-1,d[Le>>2]=0,d[ce>>2]=0,d[f+8>>2]=x,Te=20;break}case 19:{d[f>>2]=p,d[f+4>>2]=y,Te=20;break}case 25:{dt(27795,27761,470,27772);break}case 29:{d[f>>2]=p,d[f+4>>2]=y,$=_e;return}case 32:{h=d[ce>>2]|0,h|0&&xn(h),Ue=f,d[Ue>>2]=0,d[Ue+4>>2]=0,d[Ee>>2]=0,d[ve>>2]=-1,d[Le>>2]=0,d[ce>>2]=0,d[f+8>>2]=x,$=_e;return}case 36:{dt(27795,27761,493,27772);break}case 42:{d[f>>2]=p,d[f+4>>2]=y,$=_e;return}case 45:{x|0&&xn(x),Te=f,d[Te>>2]=0,d[Te+4>>2]=0,d[Ee>>2]=0,d[ve>>2]=-1,d[Le>>2]=0,d[ce>>2]=0,d[f+8>>2]=h,Te=55;break}case 53:{d[f>>2]=p,d[f+4>>2]=y,Te=55;break}case 58:{x|0&&xn(x),Te=f,d[Te>>2]=0,d[Te+4>>2]=0,d[Ee>>2]=0,d[ve>>2]=-1,d[Le>>2]=0,d[ce>>2]=0,d[f+8>>2]=h,Te=71;break}case 65:{d[f>>2]=p,d[f+4>>2]=y,Te=71;break}case 67:{h=d[ce>>2]|0,h|0&&xn(h),Ue=f,d[Ue>>2]=0,d[Ue+4>>2]=0,d[Ee>>2]=0,d[ve>>2]=-1,d[Le>>2]=0,d[ce>>2]=0,d[f+8>>2]=p,$=_e;return}}if((Te|0)==20){$=_e;return}else if((Te|0)==55){$=_e;return}else if((Te|0)==71){$=_e;return}}while(!1);h=d[Ue>>2]|0,h|0&&xn(h),Te=f,d[Te>>2]=0,d[Te+4>>2]=0,d[f+8>>2]=0,d[Ee>>2]=0,d[f+12>>2]=-1,d[Le>>2]=0,d[Ue>>2]=0,$=_e}function L5(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0;te=$,$=$+16|0,W=te,y=lt(f|0,h|0,52)|0,K()|0,y=y&15,p=lt(f|0,h|0,45)|0,K()|0;do if(y){for(;p=mt(y+4095|0,0,52)|0,x=K()|0|h&-15728641,S=(15-y|0)*3|0,E=mt(7,0,S|0)|0,R=K()|0,p=p|f|E,x=x|R,D=lt(f|0,h|0,S|0)|0,K()|0,D=D&7,y=y+-1|0,!(D>>>0<6);)if(y)h=x,f=p;else{k=4;break}if((k|0)==4){p=lt(p|0,x|0,45)|0,K()|0;break}return W=(D|0)==0&(wn(p,x)|0)!=0,W=mt((W?2:1)+D|0,0,S|0)|0,k=K()|0|h&~R,W=W|f&~E,ot(k|0),$=te,W|0}while(!1);return p=p&127,p>>>0>120?(k=0,W=0,ot(k|0),$=te,W|0):(Bu(W,0,p+1|0,0),k=d[W+4>>2]|0,W=d[W>>2]|0,ot(k|0),$=te,W|0)}function D5(f,h,p,y,x,S){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0,S=S|0;var E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0;Te=$,$=$+160|0,te=Te+80|0,R=Te+64|0,ce=Te+112|0,ve=Te,U6(te,f,h,p),k=te,Xi(R,d[k>>2]|0,d[k+4>>2]|0,h),k=R,D=d[k>>2]|0,k=d[k+4>>2]|0,E=d[te+8>>2]|0,le=ce+4|0,d[le>>2]=d[te>>2],d[le+4>>2]=d[te+4>>2],d[le+8>>2]=d[te+8>>2],d[le+12>>2]=d[te+12>>2],d[le+16>>2]=d[te+16>>2],d[le+20>>2]=d[te+20>>2],d[le+24>>2]=d[te+24>>2],d[le+28>>2]=d[te+28>>2],le=ve,d[le>>2]=D,d[le+4>>2]=k,le=ve+8|0,d[le>>2]=E,f=ve+12|0,h=ce,p=f+36|0;do d[f>>2]=d[h>>2],f=f+4|0,h=h+4|0;while((f|0)<(p|0));if(ce=ve+48|0,d[ce>>2]=d[R>>2],d[ce+4>>2]=d[R+4>>2],d[ce+8>>2]=d[R+8>>2],d[ce+12>>2]=d[R+12>>2],(D|0)==0&(k|0)==0)return ve=E,$=Te,ve|0;p=ve+16|0,W=ve+24|0,te=ve+28|0,E=0,R=0,h=D,f=k;do{if(!((E|0)<(x|0)|(E|0)==(x|0)&R>>>0<y>>>0)){ue=4;break}if(k=R,R=ln(R|0,E|0,1,0)|0,E=K()|0,k=S+(k<<3)|0,d[k>>2]=h,d[k+4>>2]=f,ku(ce),f=ce,h=d[f>>2]|0,f=d[f+4>>2]|0,(h|0)==0&(f|0)==0){if(Hu(p),h=p,f=d[h>>2]|0,h=d[h+4>>2]|0,(f|0)==0&(h|0)==0){ue=10;break}Ou(f,h,d[te>>2]|0,ce),f=ce,h=d[f>>2]|0,f=d[f+4>>2]|0}k=ve,d[k>>2]=h,d[k+4>>2]=f}while(!((h|0)==0&(f|0)==0));return(ue|0)==4?(f=ve+40|0,h=d[f>>2]|0,h|0&&xn(h),ue=ve+16|0,d[ue>>2]=0,d[ue+4>>2]=0,d[W>>2]=0,d[ve+36>>2]=0,d[te>>2]=-1,d[ve+32>>2]=0,d[f>>2]=0,Ou(0,0,0,ce),d[ve>>2]=0,d[ve+4>>2]=0,d[le>>2]=0,ve=14,$=Te,ve|0):((ue|0)==10&&(d[ve>>2]=0,d[ve+4>>2]=0,d[le>>2]=d[W>>2]),ve=d[le>>2]|0,$=Te,ve|0)}function O6(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0;if(te=$,$=$+48|0,D=te+32|0,R=te+40|0,k=te,!(d[f>>2]|0))return W=y,d[W>>2]=0,d[W+4>>2]=0,W=0,$=te,W|0;Bu(D,0,0,0),E=D,x=d[E>>2]|0,E=d[E+4>>2]|0;do if(h>>>0>15)W=k,d[W>>2]=0,d[W+4>>2]=0,d[k+8>>2]=4,d[k+12>>2]=-1,W=k+16|0,p=k+29|0,d[W>>2]=0,d[W+4>>2]=0,d[W+8>>2]=0,st[W+12>>0]=0,st[p>>0]=st[R>>0]|0,st[p+1>>0]=st[R+1>>0]|0,st[p+2>>0]=st[R+2>>0]|0,p=4,W=9;else{if(p=E1(p)|0,p|0){D=k,d[D>>2]=0,d[D+4>>2]=0,d[k+8>>2]=p,d[k+12>>2]=-1,D=k+16|0,W=k+29|0,d[D>>2]=0,d[D+4>>2]=0,d[D+8>>2]=0,st[D+12>>0]=0,st[W>>0]=st[R>>0]|0,st[W+1>>0]=st[R+1>>0]|0,st[W+2>>0]=st[R+2>>0]|0,W=9;break}if(p=ao((d[f+8>>2]|0)+1|0,32)|0,!p){W=k,d[W>>2]=0,d[W+4>>2]=0,d[k+8>>2]=13,d[k+12>>2]=-1,W=k+16|0,p=k+29|0,d[W>>2]=0,d[W+4>>2]=0,d[W+8>>2]=0,st[W+12>>0]=0,st[p>>0]=st[R>>0]|0,st[p+1>>0]=st[R+1>>0]|0,st[p+2>>0]=st[R+2>>0]|0,p=13,W=9;break}B5(f,p),le=k,d[le>>2]=x,d[le+4>>2]=E,E=k+8|0,d[E>>2]=0,d[k+12>>2]=h,d[k+20>>2]=f,d[k+24>>2]=p,st[k+28>>0]=0,x=k+29|0,st[x>>0]=st[R>>0]|0,st[x+1>>0]=st[R+1>>0]|0,st[x+2>>0]=st[R+2>>0]|0,d[k+16>>2]=3,ce=+GA(p),ce=ce*+Or(p),S=+On(+ +X[p>>3]),S=ce/+pi(+ +$u(+S,+ +On(+ +X[p+8>>3])))*6371.007180918475*6371.007180918475,x=k+12|0,p=d[x>>2]|0;e:do if((p|0)>0)do{if(w1(p+-1|0,D)|0,!(S/+X[D>>3]>10))break e;le=d[x>>2]|0,p=le+-1|0,d[x>>2]=p}while((le|0)>1);while(!1);if(Hu(k),x=y,d[x>>2]=0,d[x+4>>2]=0,x=k,p=d[x>>2]|0,x=d[x+4>>2]|0,!((p|0)==0&(x|0)==0))do ns(p,x,h,D)|0,R=D,f=y,R=ln(d[f>>2]|0,d[f+4>>2]|0,d[R>>2]|0,d[R+4>>2]|0)|0,f=K()|0,le=y,d[le>>2]=R,d[le+4>>2]=f,Hu(k),le=k,p=d[le>>2]|0,x=d[le+4>>2]|0;while(!((p|0)==0&(x|0)==0));p=d[E>>2]|0}while(!1);return le=p,$=te,le|0}function M1(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0;if(!(Pu(h,p)|0)||(h=zc(h)|0,y=+X[p>>3],x=+X[p+8>>3],x=h&x<0?x+6.283185307179586:x,ce=d[f>>2]|0,(ce|0)<=0))return ce=0,ce|0;if(te=d[f+4>>2]|0,h){h=0,W=x,p=-1,f=0;e:for(;;){for(k=f;E=+X[te+(k<<4)>>3],x=+X[te+(k<<4)+8>>3],f=(p+2|0)%(ce|0)|0,S=+X[te+(f<<4)>>3],R=+X[te+(f<<4)+8>>3],E>S?(D=E,E=R):(D=S,S=E,E=x,x=R),y=y==S|y==D?y+2220446049250313e-31:y,!!(y<S|y>D);)if(p=k+1|0,(p|0)>=(ce|0)){p=22;break e}else f=k,k=p,p=f;if(R=E<0?E+6.283185307179586:E,E=x<0?x+6.283185307179586:x,W=R==W|E==W?W+-2220446049250313e-31:W,D=R+(E-R)*((y-S)/(D-S)),(D<0?D+6.283185307179586:D)>W&&(h=h^1),f=k+1|0,(f|0)>=(ce|0)){p=22;break}else p=k}if((p|0)==22)return h|0}else{h=0,W=x,p=-1,f=0;e:for(;;){for(k=f;E=+X[te+(k<<4)>>3],x=+X[te+(k<<4)+8>>3],f=(p+2|0)%(ce|0)|0,S=+X[te+(f<<4)>>3],R=+X[te+(f<<4)+8>>3],E>S?(D=E,E=R):(D=S,S=E,E=x,x=R),y=y==S|y==D?y+2220446049250313e-31:y,!!(y<S|y>D);)if(p=k+1|0,(p|0)>=(ce|0)){p=22;break e}else f=k,k=p,p=f;if(W=E==W|x==W?W+-2220446049250313e-31:W,E+(x-E)*((y-S)/(D-S))>W&&(h=h^1),f=k+1|0,(f|0)>=(ce|0)){p=22;break}else p=k}if((p|0)==22)return h|0}return 0}function k6(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0;if(ue=d[f>>2]|0,!ue){d[h>>2]=0,d[h+4>>2]=0,d[h+8>>2]=0,d[h+12>>2]=0,d[h+16>>2]=0,d[h+20>>2]=0,d[h+24>>2]=0,d[h+28>>2]=0;return}if(ve=h+8|0,X[ve>>3]=17976931348623157e292,Te=h+24|0,X[Te>>3]=17976931348623157e292,X[h>>3]=-17976931348623157e292,Ue=h+16|0,X[Ue>>3]=-17976931348623157e292,!((ue|0)<=0)){for(ce=d[f+4>>2]|0,k=17976931348623157e292,W=-17976931348623157e292,te=0,f=-1,S=17976931348623157e292,E=17976931348623157e292,D=-17976931348623157e292,y=-17976931348623157e292,le=0;p=+X[ce+(le<<4)>>3],R=+X[ce+(le<<4)+8>>3],f=f+2|0,x=+X[ce+(((f|0)==(ue|0)?0:f)<<4)+8>>3],p<S&&(X[ve>>3]=p,S=p),R<E&&(X[Te>>3]=R,E=R),p>D?X[h>>3]=p:p=D,R>y&&(X[Ue>>3]=R,y=R),k=R>0&R<k?R:k,W=R<0&R>W?R:W,te=te|+On(+(R-x))>3.141592653589793,f=le+1|0,(f|0)!=(ue|0);)Le=le,D=p,le=f,f=Le;te&&(X[Ue>>3]=W,X[Te>>3]=k)}}function E1(f){return f=f|0,(f>>>0<4?0:15)|0}function B5(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0;if(ue=d[f>>2]|0,ue){if(ve=h+8|0,X[ve>>3]=17976931348623157e292,Te=h+24|0,X[Te>>3]=17976931348623157e292,X[h>>3]=-17976931348623157e292,Ue=h+16|0,X[Ue>>3]=-17976931348623157e292,(ue|0)>0){for(x=d[f+4>>2]|0,ce=17976931348623157e292,le=-17976931348623157e292,y=0,p=-1,D=17976931348623157e292,k=17976931348623157e292,te=-17976931348623157e292,E=-17976931348623157e292,Le=0;S=+X[x+(Le<<4)>>3],W=+X[x+(Le<<4)+8>>3],en=p+2|0,R=+X[x+(((en|0)==(ue|0)?0:en)<<4)+8>>3],S<D&&(X[ve>>3]=S,D=S),W<k&&(X[Te>>3]=W,k=W),S>te?X[h>>3]=S:S=te,W>E&&(X[Ue>>3]=W,E=W),ce=W>0&W<ce?W:ce,le=W<0&W>le?W:le,y=y|+On(+(W-R))>3.141592653589793,p=Le+1|0,(p|0)!=(ue|0);)en=Le,te=S,Le=p,p=en;y&&(X[Ue>>3]=le,X[Te>>3]=ce)}}else d[h>>2]=0,d[h+4>>2]=0,d[h+8>>2]=0,d[h+12>>2]=0,d[h+16>>2]=0,d[h+20>>2]=0,d[h+24>>2]=0,d[h+28>>2]=0;if(en=f+8|0,p=d[en>>2]|0,!((p|0)<=0)){gt=f+12|0,_e=0;do if(x=d[gt>>2]|0,y=_e,_e=_e+1|0,Te=h+(_e<<5)|0,Ue=d[x+(y<<3)>>2]|0,Ue){if(Le=h+(_e<<5)+8|0,X[Le>>3]=17976931348623157e292,f=h+(_e<<5)+24|0,X[f>>3]=17976931348623157e292,X[Te>>3]=-17976931348623157e292,Ee=h+(_e<<5)+16|0,X[Ee>>3]=-17976931348623157e292,(Ue|0)>0){for(ue=d[x+(y<<3)+4>>2]|0,ce=17976931348623157e292,le=-17976931348623157e292,x=0,y=-1,ve=0,D=17976931348623157e292,k=17976931348623157e292,W=-17976931348623157e292,E=-17976931348623157e292;S=+X[ue+(ve<<4)>>3],te=+X[ue+(ve<<4)+8>>3],y=y+2|0,R=+X[ue+(((y|0)==(Ue|0)?0:y)<<4)+8>>3],S<D&&(X[Le>>3]=S,D=S),te<k&&(X[f>>3]=te,k=te),S>W?X[Te>>3]=S:S=W,te>E&&(X[Ee>>3]=te,E=te),ce=te>0&te<ce?te:ce,le=te<0&te>le?te:le,x=x|+On(+(te-R))>3.141592653589793,y=ve+1|0,(y|0)!=(Ue|0);)zt=ve,ve=y,W=S,y=zt;x&&(X[Ee>>3]=le,X[f>>3]=ce)}}else d[Te>>2]=0,d[Te+4>>2]=0,d[Te+8>>2]=0,d[Te+12>>2]=0,d[Te+16>>2]=0,d[Te+20>>2]=0,d[Te+24>>2]=0,d[Te+28>>2]=0,p=d[en>>2]|0;while((_e|0)<(p|0))}}function F5(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;if(!(M1(f,h,p)|0))return x=0,x|0;if(x=f+8|0,(d[x>>2]|0)<=0)return x=1,x|0;for(y=f+12|0,f=0;;){if(S=f,f=f+1|0,M1((d[y>>2]|0)+(S<<3)|0,h+(f<<5)|0,p)|0){f=0,y=6;break}if((f|0)>=(d[x>>2]|0)){f=1,y=6;break}}return(y|0)==6?f|0:0}function U5(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0;if(k=$,$=$+16|0,R=k,E=p+8|0,!(M1(f,h,E)|0))return D=0,$=k,D|0;D=f+8|0;e:do if((d[D>>2]|0)>0){for(S=f+12|0,x=0;;){if(W=x,x=x+1|0,M1((d[S>>2]|0)+(W<<3)|0,h+(x<<5)|0,E)|0){x=0;break}if((x|0)>=(d[D>>2]|0))break e}return $=k,x|0}while(!1);if(Wu(f,h,p,y)|0)return W=0,$=k,W|0;d[R>>2]=d[p>>2],d[R+4>>2]=E,x=d[D>>2]|0;e:do if((x|0)>0)for(f=f+12|0,E=0,S=x;;){if(x=d[f>>2]|0,(d[x+(E<<3)>>2]|0)>0){if(M1(R,y,d[x+(E<<3)+4>>2]|0)|0){x=0;break e}if(x=E+1|0,Wu((d[f>>2]|0)+(E<<3)|0,h+(x<<5)|0,p,y)|0){x=0;break e}S=d[D>>2]|0}else x=E+1|0;if((x|0)<(S|0))E=x;else{x=1;break}}else x=1;while(!1);return W=x,$=k,W|0}function Wu(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0,en=0,zt=0,Pn=0;if(en=$,$=$+176|0,Le=en+172|0,x=en+168|0,Ee=en,!(y5(h,y)|0))return f=0,$=en,f|0;if(Gc(h,y,Le,x),P1(Ee|0,p|0,168)|0,(d[p>>2]|0)>0){h=0;do zt=Ee+8+(h<<4)+8|0,Ue=+er(+X[zt>>3],d[x>>2]|0),X[zt>>3]=Ue,h=h+1|0;while((h|0)<(d[p>>2]|0))}ve=+X[y>>3],Te=+X[y+8>>3],Ue=+er(+X[y+16>>3],d[x>>2]|0),le=+er(+X[y+24>>3],d[x>>2]|0);e:do if((d[f>>2]|0)>0){if(y=f+4|0,x=d[Ee>>2]|0,(x|0)<=0){for(h=0;;)if(h=h+1|0,(h|0)>=(d[f>>2]|0)){h=0;break e}}for(p=0;;){if(h=d[y>>2]|0,ce=+X[h+(p<<4)>>3],ue=+er(+X[h+(p<<4)+8>>3],d[Le>>2]|0),h=d[y>>2]|0,p=p+1|0,zt=(p|0)%(d[f>>2]|0)|0,S=+X[h+(zt<<4)>>3],E=+er(+X[h+(zt<<4)+8>>3],d[Le>>2]|0),!(ce>=ve)|!(S>=ve)&&!(ce<=Te)|!(S<=Te)&&!(ue<=le)|!(E<=le)&&!(ue>=Ue)|!(E>=Ue)){te=S-ce,k=E-ue,h=0;do if(Pn=h,h=h+1|0,zt=(h|0)==(x|0)?0:h,S=+X[Ee+8+(Pn<<4)+8>>3],E=+X[Ee+8+(zt<<4)+8>>3]-S,R=+X[Ee+8+(Pn<<4)>>3],D=+X[Ee+8+(zt<<4)>>3]-R,W=te*E-k*D,W!=0&&(_e=ue-S,gt=ce-R,D=(_e*D-E*gt)/W,!(D<0|D>1))&&(W=(te*_e-k*gt)/W,W>=0&W<=1)){h=1;break e}while((h|0)<(x|0))}if((p|0)>=(d[f>>2]|0)){h=0;break}}}else h=0;while(!1);return Pn=h,$=en,Pn|0}function O5(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0;if(Wu(f,h,p,y)|0)return S=1,S|0;if(S=f+8|0,(d[S>>2]|0)<=0)return S=0,S|0;for(x=f+12|0,f=0;;){if(E=f,f=f+1|0,Wu((d[x>>2]|0)+(E<<3)|0,h+(f<<5)|0,p,y)|0){f=1,x=6;break}if((f|0)>=(d[S>>2]|0)){f=0,x=6;break}}return(x|0)==6?f|0:0}function V6(){return 8}function a3(){return 16}function HA(){return 168}function WA(){return 8}function jA(){return 16}function k5(){return 12}function V5(){return 8}function $A(f){return f=f|0,+(+((d[f>>2]|0)>>>0)+4294967296*+(d[f+4>>2]|0))}function z6(f){f=f|0;var h=0,p=0;return p=+X[f>>3],h=+X[f+8>>3],+ +li(+(p*p+h*h))}function z5(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0;k=+X[f>>3],D=+X[h>>3]-k,R=+X[f+8>>3],E=+X[h+8>>3]-R,te=+X[p>>3],S=+X[y>>3]-te,ce=+X[p+8>>3],W=+X[y+8>>3]-ce,S=(S*(R-ce)-(k-te)*W)/(D*W-E*S),X[x>>3]=k+D*S,X[x+8>>3]=R+E*S}function G5(f,h){return f=f|0,h=h|0,+On(+(+X[f>>3]-+X[h>>3]))<11920928955078125e-23?(h=+On(+(+X[f+8>>3]-+X[h+8>>3]))<11920928955078125e-23,h|0):(h=0,h|0)}function mr(f,h){f=f|0,h=h|0;var p=0,y=0,x=0;return x=+X[f>>3]-+X[h>>3],y=+X[f+8>>3]-+X[h+8>>3],p=+X[f+16>>3]-+X[h+16>>3],+(x*x+y*y+p*p)}function G6(f,h){f=f|0,h=h|0;var p=0,y=0,x=0;p=+X[f>>3],y=+pi(+p),p=+kn(+p),X[h+16>>3]=p,p=+X[f+8>>3],x=y*+pi(+p),X[h>>3]=x,p=y*+kn(+p),X[h+8>>3]=p}function La(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;if(S=$,$=$+16|0,x=S,y=wn(f,h)|0,(p+-1|0)>>>0>5||(y=(y|0)!=0,(p|0)==1&y))return x=-1,$=S,x|0;do if(R1(f,h,x)|0)y=-1;else if(y){y=((d[26352+(p<<2)>>2]|0)+5-(d[x>>2]|0)|0)%5|0;break}else{y=((d[26384+(p<<2)>>2]|0)+6-(d[x>>2]|0)|0)%6|0;break}while(!1);return x=y,$=S,x|0}function R1(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0,k=0;if(k=$,$=$+32|0,E=k+16|0,R=k,y=Ca(f,h,E)|0,y|0)return p=y,$=k,p|0;S=T5(f,h)|0,D=kr(f,h)|0,m5(S,R),y=vi(S,d[E>>2]|0)|0;e:do if(Ui(S)|0){do switch(S|0){case 4:{f=0;break}case 14:{f=1;break}case 24:{f=2;break}case 38:{f=3;break}case 49:{f=4;break}case 58:{f=5;break}case 63:{f=6;break}case 72:{f=7;break}case 83:{f=8;break}case 97:{f=9;break}case 107:{f=10;break}case 117:{f=11;break}default:{y=1;break e}}while(!1);if(x=d[26416+(f*24|0)+8>>2]|0,h=d[26416+(f*24|0)+16>>2]|0,f=d[E>>2]|0,(f|0)!=(d[R>>2]|0)&&(R=Ru(S)|0,f=d[E>>2]|0,R|(f|0)==(h|0)&&(y=(y+1|0)%6|0)),(D|0)==3&(f|0)==(h|0)){y=(y+5|0)%6|0,x=22;break}(D|0)==5&(f|0)==(x|0)&&(y=(y+1|0)%6|0),x=22}else x=22;while(!1);return(x|0)==22&&(d[p>>2]=y,y=0),p=y,$=k,p|0}function ms(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0;if(Ee=$,$=$+32|0,Le=Ee+24|0,Te=Ee+20|0,ue=Ee+8|0,le=Ee+16|0,ce=Ee,D=(wn(f,h)|0)==0,D=D?6:5,W=lt(f|0,h|0,52)|0,K()|0,W=W&15,D>>>0<=p>>>0)return y=2,$=Ee,y|0;te=(W|0)==0,!te&&(ve=mt(7,0,(W^15)*3|0)|0,(ve&f|0)==0&((K()|0)&h|0)==0)?x=p:S=4;e:do if((S|0)==4){if(x=(wn(f,h)|0)!=0,((x?4:5)|0)<(p|0)||R1(f,h,Le)|0||(S=(d[Le>>2]|0)+p|0,x?x=26704+(((S|0)%5|0)<<2)|0:x=26736+(((S|0)%6|0)<<2)|0,ve=d[x>>2]|0,(ve|0)==7))return y=1,$=Ee,y|0;d[Te>>2]=0,x=mi(f,h,ve,Te,ue)|0;do if(!x){if(R=ue,k=d[R>>2]|0,R=d[R+4>>2]|0,E=R>>>0<h>>>0|(R|0)==(h|0)&k>>>0<f>>>0,S=E?k:f,E=E?R:h,!te&&(te=mt(7,0,(W^15)*3|0)|0,(k&te|0)==0&(R&(K()|0)|0)==0))x=p;else{if(R=(p+-1+D|0)%(D|0)|0,x=wn(f,h)|0,(R|0)<0&&dt(27795,27797,246,27806),D=(x|0)!=0,((D?4:5)|0)<(R|0)&&dt(27795,27797,246,27806),R1(f,h,Le)|0&&dt(27795,27797,246,27806),x=(d[Le>>2]|0)+R|0,D?x=26704+(((x|0)%5|0)<<2)|0:x=26736+(((x|0)%6|0)<<2)|0,R=d[x>>2]|0,(R|0)==7&&dt(27795,27797,246,27806),d[le>>2]=0,x=mi(f,h,R,le,ce)|0,x|0)break;k=ce,D=d[k>>2]|0,k=d[k+4>>2]|0;do if(k>>>0<E>>>0|(k|0)==(E|0)&D>>>0<S>>>0){if(wn(D,k)|0?S=Ur(D,k,f,h)|0:S=d[26800+((((d[le>>2]|0)+(d[26768+(R<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,x=wn(D,k)|0,(S+-1|0)>>>0>5){x=-1,S=D,E=k;break}if(x=(x|0)!=0,(S|0)==1&x){x=-1,S=D,E=k;break}do if(R1(D,k,Le)|0)x=-1;else if(x){x=((d[26352+(S<<2)>>2]|0)+5-(d[Le>>2]|0)|0)%5|0;break}else{x=((d[26384+(S<<2)>>2]|0)+6-(d[Le>>2]|0)|0)%6|0;break}while(!1);S=D,E=k}else x=p;while(!1);R=ue,k=d[R>>2]|0,R=d[R+4>>2]|0}if((S|0)==(k|0)&(E|0)==(R|0)){if(D=(wn(k,R)|0)!=0,D?f=Ur(k,R,f,h)|0:f=d[26800+((((d[Te>>2]|0)+(d[26768+(ve<<2)>>2]|0)|0)%6|0)<<2)>>2]|0,x=wn(k,R)|0,(f+-1|0)>>>0<=5&&(Ue=(x|0)!=0,!((f|0)==1&Ue)))do if(R1(k,R,Le)|0)x=-1;else if(Ue){x=((d[26352+(f<<2)>>2]|0)+5-(d[Le>>2]|0)|0)%5|0;break}else{x=((d[26384+(f<<2)>>2]|0)+6-(d[Le>>2]|0)|0)%6|0;break}while(!1);else x=-1;x=x+1|0,x=(x|0)==6|D&(x|0)==5?0:x}h=E,f=S;break e}while(!1);return y=x,$=Ee,y|0}while(!1);return Ue=mt(x|0,0,56)|0,Le=K()|0|h&-2130706433|536870912,d[y>>2]=Ue|f,d[y+4>>2]=Le,y=0,$=Ee,y|0}function ju(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;return S=(wn(f,h)|0)==0,y=ms(f,h,0,p)|0,x=(y|0)==0,S?!x||(y=ms(f,h,1,p+8|0)|0,y|0)||(y=ms(f,h,2,p+16|0)|0,y|0)||(y=ms(f,h,3,p+24|0)|0,y|0)||(y=ms(f,h,4,p+32|0)|0,y)?(S=y,S|0):ms(f,h,5,p+40|0)|0:!x||(y=ms(f,h,1,p+8|0)|0,y|0)||(y=ms(f,h,2,p+16|0)|0,y|0)||(y=ms(f,h,3,p+24|0)|0,y|0)||(y=ms(f,h,4,p+32|0)|0,y|0)?(S=y,S|0):(S=p+40|0,d[S>>2]=0,d[S+4>>2]=0,S=0,S|0)}function l3(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0,R=0,D=0;return D=$,$=$+192|0,x=D,S=D+168|0,E=lt(f|0,h|0,56)|0,K()|0,E=E&7,R=h&-2130706433|134217728,y=Ca(f,R,S)|0,y|0?(R=y,$=D,R|0):(h=lt(f|0,h|0,52)|0,K()|0,h=h&15,wn(f,R)|0?x1(S,h,E,1,x):sa(S,h,E,1,x),R=x+8|0,d[p>>2]=d[R>>2],d[p+4>>2]=d[R+4>>2],d[p+8>>2]=d[R+8>>2],d[p+12>>2]=d[R+12>>2],R=0,$=D,R|0)}function u3(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0;return x=$,$=$+16|0,p=x,!(!0&(h&2013265920|0)==536870912)||(y=h&-2130706433|134217728,!(Du(f,y)|0))?(y=0,$=x,y|0):(S=lt(f|0,h|0,56)|0,K()|0,S=(ms(f,y,S&7,p)|0)==0,y=p,y=S&((d[y>>2]|0)==(f|0)?(d[y+4>>2]|0)==(h|0):0)&1,$=x,y|0)}function q5(f,h,p){f=f|0,h=h|0,p=p|0;var y=0;(h|0)>0?(y=ao(h,4)|0,d[f>>2]=y,y||dt(27819,27842,40,27856)):d[f>>2]=0,d[f+4>>2]=h,d[f+8>>2]=0,d[f+12>>2]=p}function C1(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0;x=f+4|0,S=f+12|0,E=f+8|0;e:for(;;){for(p=d[x>>2]|0,h=0;;){if((h|0)>=(p|0))break e;if(y=d[f>>2]|0,R=d[y+(h<<2)>>2]|0,!R)h=h+1|0;else break}h=y+(~~(+On(+(+wa(10,+ +(15-(d[S>>2]|0)|0))*(+X[R>>3]+ +X[R+8>>3])))%+(p|0))>>>0<<2)|0,p=d[h>>2]|0;t:do if(p|0){if(y=R+32|0,(p|0)==(R|0))d[h>>2]=d[y>>2];else{if(p=p+32|0,h=d[p>>2]|0,!h)break;for(;(h|0)!=(R|0);)if(p=h+32|0,h=d[p>>2]|0,!h)break t;d[p>>2]=d[y>>2]}xn(R),d[E>>2]=(d[E>>2]|0)+-1}while(!1)}xn(d[f>>2]|0)}function is(f){f=f|0;var h=0,p=0,y=0;for(y=d[f+4>>2]|0,p=0;;){if((p|0)>=(y|0)){h=0,p=4;break}if(h=d[(d[f>>2]|0)+(p<<2)>>2]|0,!h)p=p+1|0;else{p=4;break}}return(p|0)==4?h|0:0}function q6(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0;if(p=~~(+On(+(+wa(10,+ +(15-(d[f+12>>2]|0)|0))*(+X[h>>3]+ +X[h+8>>3])))%+(d[f+4>>2]|0))>>>0,p=(d[f>>2]|0)+(p<<2)|0,y=d[p>>2]|0,!y)return S=1,S|0;S=h+32|0;do if((y|0)!=(h|0)){if(p=d[y+32>>2]|0,!p)return S=1,S|0;for(x=p;;){if((x|0)==(h|0)){x=8;break}if(p=d[x+32>>2]|0,p)y=x,x=p;else{p=1,x=10;break}}if((x|0)==8){d[y+32>>2]=d[S>>2];break}else if((x|0)==10)return p|0}else d[p>>2]=d[S>>2];while(!1);return xn(h),S=f+8|0,d[S>>2]=(d[S>>2]|0)+-1,S=0,S|0}function XA(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0;S=aa(40)|0,S||dt(27872,27842,98,27885),d[S>>2]=d[h>>2],d[S+4>>2]=d[h+4>>2],d[S+8>>2]=d[h+8>>2],d[S+12>>2]=d[h+12>>2],x=S+16|0,d[x>>2]=d[p>>2],d[x+4>>2]=d[p+4>>2],d[x+8>>2]=d[p+8>>2],d[x+12>>2]=d[p+12>>2],d[S+32>>2]=0,x=~~(+On(+(+wa(10,+ +(15-(d[f+12>>2]|0)|0))*(+X[h>>3]+ +X[h+8>>3])))%+(d[f+4>>2]|0))>>>0,x=(d[f>>2]|0)+(x<<2)|0,y=d[x>>2]|0;do if(!y)d[x>>2]=S;else{for(;!(d0(y,h)|0&&d0(y+16|0,p)|0);)if(x=d[y+32>>2]|0,y=x|0?x:y,!(d[y+32>>2]|0)){E=10;break}if((E|0)==10){d[y+32>>2]=S;break}return xn(S),E=y,E|0}while(!1);return E=f+8|0,d[E>>2]=(d[E>>2]|0)+1,E=S,E|0}function oo(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0;if(x=~~(+On(+(+wa(10,+ +(15-(d[f+12>>2]|0)|0))*(+X[h>>3]+ +X[h+8>>3])))%+(d[f+4>>2]|0))>>>0,x=d[(d[f>>2]|0)+(x<<2)>>2]|0,!x)return p=0,p|0;if(!p){for(f=x;;){if(d0(f,h)|0){y=10;break}if(f=d[f+32>>2]|0,!f){f=0,y=10;break}}if((y|0)==10)return f|0}for(f=x;;){if(d0(f,h)|0&&d0(f+16|0,p)|0){y=10;break}if(f=d[f+32>>2]|0,!f){f=0,y=10;break}}return(y|0)==10?f|0:0}function Rs(f,h){f=f|0,h=h|0;var p=0;if(p=~~(+On(+(+wa(10,+ +(15-(d[f+12>>2]|0)|0))*(+X[h>>3]+ +X[h+8>>3])))%+(d[f+4>>2]|0))>>>0,f=d[(d[f>>2]|0)+(p<<2)>>2]|0,!f)return p=0,p|0;for(;;){if(d0(f,h)|0){h=5;break}if(f=d[f+32>>2]|0,!f){f=0,h=5;break}}return(h|0)==5?f|0:0}function H6(){return 27904}function p0(f){return f=+f,~~+Xu(+f)|0}function aa(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0,ve=0,Te=0,Ue=0,Le=0,Ee=0,_e=0,gt=0;gt=$,$=$+16|0,ce=gt;do if(f>>>0<245){if(k=f>>>0<11?16:f+11&-8,f=k>>>3,te=d[6977]|0,p=te>>>f,p&3|0)return h=(p&1^1)+f|0,f=27948+(h<<1<<2)|0,p=f+8|0,y=d[p>>2]|0,x=y+8|0,S=d[x>>2]|0,(S|0)==(f|0)?d[6977]=te&~(1<<h):(d[S+12>>2]=f,d[p>>2]=S),_e=h<<3,d[y+4>>2]=_e|3,_e=y+_e+4|0,d[_e>>2]=d[_e>>2]|1,_e=x,$=gt,_e|0;if(W=d[6979]|0,k>>>0>W>>>0){if(p|0)return h=2<<f,h=p<<f&(h|0-h),h=(h&0-h)+-1|0,R=h>>>12&16,h=h>>>R,p=h>>>5&8,h=h>>>p,S=h>>>2&4,h=h>>>S,f=h>>>1&2,h=h>>>f,y=h>>>1&1,y=(p|R|S|f|y)+(h>>>y)|0,h=27948+(y<<1<<2)|0,f=h+8|0,S=d[f>>2]|0,R=S+8|0,p=d[R>>2]|0,(p|0)==(h|0)?(f=te&~(1<<y),d[6977]=f):(d[p+12>>2]=h,d[f>>2]=p,f=te),_e=y<<3,E=_e-k|0,d[S+4>>2]=k|3,x=S+k|0,d[x+4>>2]=E|1,d[S+_e>>2]=E,W|0&&(y=d[6982]|0,h=W>>>3,p=27948+(h<<1<<2)|0,h=1<<h,f&h?(f=p+8|0,h=d[f>>2]|0):(d[6977]=f|h,h=p,f=p+8|0),d[f>>2]=y,d[h+12>>2]=y,d[y+8>>2]=h,d[y+12>>2]=p),d[6979]=E,d[6982]=x,_e=R,$=gt,_e|0;if(S=d[6978]|0,S){for(p=(S&0-S)+-1|0,x=p>>>12&16,p=p>>>x,y=p>>>5&8,p=p>>>y,E=p>>>2&4,p=p>>>E,R=p>>>1&2,p=p>>>R,D=p>>>1&1,D=d[28212+((y|x|E|R|D)+(p>>>D)<<2)>>2]|0,p=D,R=D,D=(d[D+4>>2]&-8)-k|0;f=d[p+16>>2]|0,!(!f&&(f=d[p+20>>2]|0,!f));)E=(d[f+4>>2]&-8)-k|0,x=E>>>0<D>>>0,p=f,R=x?f:R,D=x?E:D;if(E=R+k|0,E>>>0>R>>>0){x=d[R+24>>2]|0,h=d[R+12>>2]|0;do if((h|0)==(R|0)){if(f=R+20|0,h=d[f>>2]|0,!h&&(f=R+16|0,h=d[f>>2]|0,!h)){p=0;break}for(;;)if(y=h+20|0,p=d[y>>2]|0,p)h=p,f=y;else if(y=h+16|0,p=d[y>>2]|0,p)h=p,f=y;else break;d[f>>2]=0,p=h}else p=d[R+8>>2]|0,d[p+12>>2]=h,d[h+8>>2]=p,p=h;while(!1);do if(x|0){if(h=d[R+28>>2]|0,f=28212+(h<<2)|0,(R|0)==(d[f>>2]|0)){if(d[f>>2]=p,!p){d[6978]=S&~(1<<h);break}}else if(_e=x+16|0,d[((d[_e>>2]|0)==(R|0)?_e:x+20|0)>>2]=p,!p)break;d[p+24>>2]=x,h=d[R+16>>2]|0,h|0&&(d[p+16>>2]=h,d[h+24>>2]=p),h=d[R+20>>2]|0,h|0&&(d[p+20>>2]=h,d[h+24>>2]=p)}while(!1);return D>>>0<16?(_e=D+k|0,d[R+4>>2]=_e|3,_e=R+_e+4|0,d[_e>>2]=d[_e>>2]|1):(d[R+4>>2]=k|3,d[E+4>>2]=D|1,d[E+D>>2]=D,W|0&&(y=d[6982]|0,h=W>>>3,p=27948+(h<<1<<2)|0,h=1<<h,h&te?(f=p+8|0,h=d[f>>2]|0):(d[6977]=h|te,h=p,f=p+8|0),d[f>>2]=y,d[h+12>>2]=y,d[y+8>>2]=h,d[y+12>>2]=p),d[6979]=D,d[6982]=E),_e=R+8|0,$=gt,_e|0}else te=k}else te=k}else te=k}else if(f>>>0<=4294967231)if(f=f+11|0,k=f&-8,y=d[6978]|0,y){x=0-k|0,f=f>>>8,f?k>>>0>16777215?D=31:(te=(f+1048320|0)>>>16&8,ve=f<<te,R=(ve+520192|0)>>>16&4,ve=ve<<R,D=(ve+245760|0)>>>16&2,D=14-(R|te|D)+(ve<<D>>>15)|0,D=k>>>(D+7|0)&1|D<<1):D=0,p=d[28212+(D<<2)>>2]|0;e:do if(!p)p=0,f=0,ve=61;else for(f=0,R=k<<((D|0)==31?0:25-(D>>>1)|0),S=0;;){if(E=(d[p+4>>2]&-8)-k|0,E>>>0<x>>>0)if(E)f=p,x=E;else{f=p,x=0,ve=65;break e}if(ve=d[p+20>>2]|0,p=d[p+16+(R>>>31<<2)>>2]|0,S=(ve|0)==0|(ve|0)==(p|0)?S:ve,p)R=R<<1;else{p=S,ve=61;break}}while(!1);if((ve|0)==61){if((p|0)==0&(f|0)==0){if(f=2<<D,f=(f|0-f)&y,!f){te=k;break}te=(f&0-f)+-1|0,E=te>>>12&16,te=te>>>E,S=te>>>5&8,te=te>>>S,R=te>>>2&4,te=te>>>R,D=te>>>1&2,te=te>>>D,p=te>>>1&1,f=0,p=d[28212+((S|E|R|D|p)+(te>>>p)<<2)>>2]|0}p?ve=65:(R=f,E=x)}if((ve|0)==65)for(S=p;;)if(te=(d[S+4>>2]&-8)-k|0,p=te>>>0<x>>>0,x=p?te:x,f=p?S:f,p=d[S+16>>2]|0,p||(p=d[S+20>>2]|0),p)S=p;else{R=f,E=x;break}if(R|0&&E>>>0<((d[6979]|0)-k|0)>>>0&&(W=R+k|0,W>>>0>R>>>0)){S=d[R+24>>2]|0,h=d[R+12>>2]|0;do if((h|0)==(R|0)){if(f=R+20|0,h=d[f>>2]|0,!h&&(f=R+16|0,h=d[f>>2]|0,!h)){h=0;break}for(;;)if(x=h+20|0,p=d[x>>2]|0,p)h=p,f=x;else if(x=h+16|0,p=d[x>>2]|0,p)h=p,f=x;else break;d[f>>2]=0}else _e=d[R+8>>2]|0,d[_e+12>>2]=h,d[h+8>>2]=_e;while(!1);do if(S){if(f=d[R+28>>2]|0,p=28212+(f<<2)|0,(R|0)==(d[p>>2]|0)){if(d[p>>2]=h,!h){y=y&~(1<<f),d[6978]=y;break}}else if(_e=S+16|0,d[((d[_e>>2]|0)==(R|0)?_e:S+20|0)>>2]=h,!h)break;d[h+24>>2]=S,f=d[R+16>>2]|0,f|0&&(d[h+16>>2]=f,d[f+24>>2]=h),f=d[R+20>>2]|0,f&&(d[h+20>>2]=f,d[f+24>>2]=h)}while(!1);e:do if(E>>>0<16)_e=E+k|0,d[R+4>>2]=_e|3,_e=R+_e+4|0,d[_e>>2]=d[_e>>2]|1;else{if(d[R+4>>2]=k|3,d[W+4>>2]=E|1,d[W+E>>2]=E,h=E>>>3,E>>>0<256){p=27948+(h<<1<<2)|0,f=d[6977]|0,h=1<<h,f&h?(f=p+8|0,h=d[f>>2]|0):(d[6977]=f|h,h=p,f=p+8|0),d[f>>2]=W,d[h+12>>2]=W,d[W+8>>2]=h,d[W+12>>2]=p;break}if(h=E>>>8,h?E>>>0>16777215?p=31:(Ee=(h+1048320|0)>>>16&8,_e=h<<Ee,Le=(_e+520192|0)>>>16&4,_e=_e<<Le,p=(_e+245760|0)>>>16&2,p=14-(Le|Ee|p)+(_e<<p>>>15)|0,p=E>>>(p+7|0)&1|p<<1):p=0,h=28212+(p<<2)|0,d[W+28>>2]=p,f=W+16|0,d[f+4>>2]=0,d[f>>2]=0,f=1<<p,!(y&f)){d[6978]=y|f,d[h>>2]=W,d[W+24>>2]=h,d[W+12>>2]=W,d[W+8>>2]=W;break}h=d[h>>2]|0;t:do if((d[h+4>>2]&-8|0)!=(E|0)){for(y=E<<((p|0)==31?0:25-(p>>>1)|0);p=h+16+(y>>>31<<2)|0,f=d[p>>2]|0,!!f;)if((d[f+4>>2]&-8|0)==(E|0)){h=f;break t}else y=y<<1,h=f;d[p>>2]=W,d[W+24>>2]=h,d[W+12>>2]=W,d[W+8>>2]=W;break e}while(!1);Ee=h+8|0,_e=d[Ee>>2]|0,d[_e+12>>2]=W,d[Ee>>2]=W,d[W+8>>2]=_e,d[W+12>>2]=h,d[W+24>>2]=0}while(!1);return _e=R+8|0,$=gt,_e|0}else te=k}else te=k;else te=-1;while(!1);if(p=d[6979]|0,p>>>0>=te>>>0)return h=p-te|0,f=d[6982]|0,h>>>0>15?(_e=f+te|0,d[6982]=_e,d[6979]=h,d[_e+4>>2]=h|1,d[f+p>>2]=h,d[f+4>>2]=te|3):(d[6979]=0,d[6982]=0,d[f+4>>2]=p|3,_e=f+p+4|0,d[_e>>2]=d[_e>>2]|1),_e=f+8|0,$=gt,_e|0;if(E=d[6980]|0,E>>>0>te>>>0)return Le=E-te|0,d[6980]=Le,_e=d[6983]|0,Ee=_e+te|0,d[6983]=Ee,d[Ee+4>>2]=Le|1,d[_e+4>>2]=te|3,_e=_e+8|0,$=gt,_e|0;if(d[7095]|0?f=d[7097]|0:(d[7097]=4096,d[7096]=4096,d[7098]=-1,d[7099]=-1,d[7100]=0,d[7088]=0,d[7095]=ce&-16^1431655768,f=4096),R=te+48|0,D=te+47|0,S=f+D|0,x=0-f|0,k=S&x,k>>>0<=te>>>0||(f=d[7087]|0,f|0&&(W=d[7085]|0,ce=W+k|0,ce>>>0<=W>>>0|ce>>>0>f>>>0)))return _e=0,$=gt,_e|0;e:do if(d[7088]&4)h=0,ve=143;else{p=d[6983]|0;t:do if(p){for(y=28356;ce=d[y>>2]|0,!(ce>>>0<=p>>>0&&(ce+(d[y+4>>2]|0)|0)>>>0>p>>>0);)if(f=d[y+8>>2]|0,f)y=f;else{ve=128;break t}if(h=S-E&x,h>>>0<2147483647)if(f=Hs(h|0)|0,(f|0)==((d[y>>2]|0)+(d[y+4>>2]|0)|0)){if((f|0)!=-1){E=h,S=f,ve=145;break e}}else y=f,ve=136;else h=0}else ve=128;while(!1);do if((ve|0)==128)if(p=Hs(0)|0,(p|0)!=-1&&(h=p,le=d[7096]|0,ue=le+-1|0,h=(ue&h|0?(ue+h&0-le)-h|0:0)+k|0,le=d[7085]|0,ue=h+le|0,h>>>0>te>>>0&h>>>0<2147483647)){if(ce=d[7087]|0,ce|0&&ue>>>0<=le>>>0|ue>>>0>ce>>>0){h=0;break}if(f=Hs(h|0)|0,(f|0)==(p|0)){E=h,S=p,ve=145;break e}else y=f,ve=136}else h=0;while(!1);do if((ve|0)==136){if(p=0-h|0,!(R>>>0>h>>>0&(h>>>0<2147483647&(y|0)!=-1)))if((y|0)==-1){h=0;break}else{E=h,S=y,ve=145;break e}if(f=d[7097]|0,f=D-h+f&0-f,f>>>0>=2147483647){E=h,S=y,ve=145;break e}if((Hs(f|0)|0)==-1){Hs(p|0)|0,h=0;break}else{E=f+h|0,S=y,ve=145;break e}}while(!1);d[7088]=d[7088]|4,ve=143}while(!1);if((ve|0)==143&&k>>>0<2147483647&&(Le=Hs(k|0)|0,ue=Hs(0)|0,Te=ue-Le|0,Ue=Te>>>0>(te+40|0)>>>0,!((Le|0)==-1|Ue^1|Le>>>0<ue>>>0&((Le|0)!=-1&(ue|0)!=-1)^1))&&(E=Ue?Te:h,S=Le,ve=145),(ve|0)==145){h=(d[7085]|0)+E|0,d[7085]=h,h>>>0>(d[7086]|0)>>>0&&(d[7086]=h),D=d[6983]|0;e:do if(D){for(h=28356;;){if(f=d[h>>2]|0,p=d[h+4>>2]|0,(S|0)==(f+p|0)){ve=154;break}if(y=d[h+8>>2]|0,y)h=y;else break}if((ve|0)==154&&(Ee=h+4|0,(d[h+12>>2]&8|0)==0)&&S>>>0>D>>>0&f>>>0<=D>>>0){d[Ee>>2]=p+E,_e=(d[6980]|0)+E|0,Le=D+8|0,Le=Le&7|0?0-Le&7:0,Ee=D+Le|0,Le=_e-Le|0,d[6983]=Ee,d[6980]=Le,d[Ee+4>>2]=Le|1,d[D+_e+4>>2]=40,d[6984]=d[7099];break}for(S>>>0<(d[6981]|0)>>>0&&(d[6981]=S),p=S+E|0,h=28356;;){if((d[h>>2]|0)==(p|0)){ve=162;break}if(f=d[h+8>>2]|0,f)h=f;else break}if((ve|0)==162&&!(d[h+12>>2]&8|0)){d[h>>2]=S,W=h+4|0,d[W>>2]=(d[W>>2]|0)+E,W=S+8|0,W=S+(W&7|0?0-W&7:0)|0,h=p+8|0,h=p+(h&7|0?0-h&7:0)|0,k=W+te|0,R=h-W-te|0,d[W+4>>2]=te|3;t:do if((D|0)==(h|0))_e=(d[6980]|0)+R|0,d[6980]=_e,d[6983]=k,d[k+4>>2]=_e|1;else{if((d[6982]|0)==(h|0)){_e=(d[6979]|0)+R|0,d[6979]=_e,d[6982]=k,d[k+4>>2]=_e|1,d[k+_e>>2]=_e;break}if(f=d[h+4>>2]|0,(f&3|0)==1){E=f&-8,y=f>>>3;n:do if(f>>>0<256)if(f=d[h+8>>2]|0,p=d[h+12>>2]|0,(p|0)==(f|0)){d[6977]=d[6977]&~(1<<y);break}else{d[f+12>>2]=p,d[p+8>>2]=f;break}else{S=d[h+24>>2]|0,f=d[h+12>>2]|0;do if((f|0)==(h|0)){if(p=h+16|0,y=p+4|0,f=d[y>>2]|0,f)p=y;else if(f=d[p>>2]|0,!f){f=0;break}for(;;)if(x=f+20|0,y=d[x>>2]|0,y)f=y,p=x;else if(x=f+16|0,y=d[x>>2]|0,y)f=y,p=x;else break;d[p>>2]=0}else _e=d[h+8>>2]|0,d[_e+12>>2]=f,d[f+8>>2]=_e;while(!1);if(!S)break;p=d[h+28>>2]|0,y=28212+(p<<2)|0;do if((d[y>>2]|0)!=(h|0)){if(_e=S+16|0,d[((d[_e>>2]|0)==(h|0)?_e:S+20|0)>>2]=f,!f)break n}else{if(d[y>>2]=f,f|0)break;d[6978]=d[6978]&~(1<<p);break n}while(!1);if(d[f+24>>2]=S,p=h+16|0,y=d[p>>2]|0,y|0&&(d[f+16>>2]=y,d[y+24>>2]=f),p=d[p+4>>2]|0,!p)break;d[f+20>>2]=p,d[p+24>>2]=f}while(!1);h=h+E|0,x=E+R|0}else x=R;if(h=h+4|0,d[h>>2]=d[h>>2]&-2,d[k+4>>2]=x|1,d[k+x>>2]=x,h=x>>>3,x>>>0<256){p=27948+(h<<1<<2)|0,f=d[6977]|0,h=1<<h,f&h?(f=p+8|0,h=d[f>>2]|0):(d[6977]=f|h,h=p,f=p+8|0),d[f>>2]=k,d[h+12>>2]=k,d[k+8>>2]=h,d[k+12>>2]=p;break}h=x>>>8;do if(!h)y=0;else{if(x>>>0>16777215){y=31;break}Ee=(h+1048320|0)>>>16&8,_e=h<<Ee,Le=(_e+520192|0)>>>16&4,_e=_e<<Le,y=(_e+245760|0)>>>16&2,y=14-(Le|Ee|y)+(_e<<y>>>15)|0,y=x>>>(y+7|0)&1|y<<1}while(!1);if(h=28212+(y<<2)|0,d[k+28>>2]=y,f=k+16|0,d[f+4>>2]=0,d[f>>2]=0,f=d[6978]|0,p=1<<y,!(f&p)){d[6978]=f|p,d[h>>2]=k,d[k+24>>2]=h,d[k+12>>2]=k,d[k+8>>2]=k;break}h=d[h>>2]|0;n:do if((d[h+4>>2]&-8|0)!=(x|0)){for(y=x<<((y|0)==31?0:25-(y>>>1)|0);p=h+16+(y>>>31<<2)|0,f=d[p>>2]|0,!!f;)if((d[f+4>>2]&-8|0)==(x|0)){h=f;break n}else y=y<<1,h=f;d[p>>2]=k,d[k+24>>2]=h,d[k+12>>2]=k,d[k+8>>2]=k;break t}while(!1);Ee=h+8|0,_e=d[Ee>>2]|0,d[_e+12>>2]=k,d[Ee>>2]=k,d[k+8>>2]=_e,d[k+12>>2]=h,d[k+24>>2]=0}while(!1);return _e=W+8|0,$=gt,_e|0}for(h=28356;f=d[h>>2]|0,!(f>>>0<=D>>>0&&(_e=f+(d[h+4>>2]|0)|0,_e>>>0>D>>>0));)h=d[h+8>>2]|0;x=_e+-47|0,f=x+8|0,f=x+(f&7|0?0-f&7:0)|0,x=D+16|0,f=f>>>0<x>>>0?D:f,h=f+8|0,p=E+-40|0,Le=S+8|0,Le=Le&7|0?0-Le&7:0,Ee=S+Le|0,Le=p-Le|0,d[6983]=Ee,d[6980]=Le,d[Ee+4>>2]=Le|1,d[S+p+4>>2]=40,d[6984]=d[7099],p=f+4|0,d[p>>2]=27,d[h>>2]=d[7089],d[h+4>>2]=d[7090],d[h+8>>2]=d[7091],d[h+12>>2]=d[7092],d[7089]=S,d[7090]=E,d[7092]=0,d[7091]=h,h=f+24|0;do Ee=h,h=h+4|0,d[h>>2]=7;while((Ee+8|0)>>>0<_e>>>0);if((f|0)!=(D|0)){if(S=f-D|0,d[p>>2]=d[p>>2]&-2,d[D+4>>2]=S|1,d[f>>2]=S,h=S>>>3,S>>>0<256){p=27948+(h<<1<<2)|0,f=d[6977]|0,h=1<<h,f&h?(f=p+8|0,h=d[f>>2]|0):(d[6977]=f|h,h=p,f=p+8|0),d[f>>2]=D,d[h+12>>2]=D,d[D+8>>2]=h,d[D+12>>2]=p;break}if(h=S>>>8,h?S>>>0>16777215?y=31:(Ee=(h+1048320|0)>>>16&8,_e=h<<Ee,Le=(_e+520192|0)>>>16&4,_e=_e<<Le,y=(_e+245760|0)>>>16&2,y=14-(Le|Ee|y)+(_e<<y>>>15)|0,y=S>>>(y+7|0)&1|y<<1):y=0,p=28212+(y<<2)|0,d[D+28>>2]=y,d[D+20>>2]=0,d[x>>2]=0,h=d[6978]|0,f=1<<y,!(h&f)){d[6978]=h|f,d[p>>2]=D,d[D+24>>2]=p,d[D+12>>2]=D,d[D+8>>2]=D;break}h=d[p>>2]|0;t:do if((d[h+4>>2]&-8|0)!=(S|0)){for(y=S<<((y|0)==31?0:25-(y>>>1)|0);p=h+16+(y>>>31<<2)|0,f=d[p>>2]|0,!!f;)if((d[f+4>>2]&-8|0)==(S|0)){h=f;break t}else y=y<<1,h=f;d[p>>2]=D,d[D+24>>2]=h,d[D+12>>2]=D,d[D+8>>2]=D;break e}while(!1);Ee=h+8|0,_e=d[Ee>>2]|0,d[_e+12>>2]=D,d[Ee>>2]=D,d[D+8>>2]=_e,d[D+12>>2]=h,d[D+24>>2]=0}}else _e=d[6981]|0,(_e|0)==0|S>>>0<_e>>>0&&(d[6981]=S),d[7089]=S,d[7090]=E,d[7092]=0,d[6986]=d[7095],d[6985]=-1,d[6990]=27948,d[6989]=27948,d[6992]=27956,d[6991]=27956,d[6994]=27964,d[6993]=27964,d[6996]=27972,d[6995]=27972,d[6998]=27980,d[6997]=27980,d[7e3]=27988,d[6999]=27988,d[7002]=27996,d[7001]=27996,d[7004]=28004,d[7003]=28004,d[7006]=28012,d[7005]=28012,d[7008]=28020,d[7007]=28020,d[7010]=28028,d[7009]=28028,d[7012]=28036,d[7011]=28036,d[7014]=28044,d[7013]=28044,d[7016]=28052,d[7015]=28052,d[7018]=28060,d[7017]=28060,d[7020]=28068,d[7019]=28068,d[7022]=28076,d[7021]=28076,d[7024]=28084,d[7023]=28084,d[7026]=28092,d[7025]=28092,d[7028]=28100,d[7027]=28100,d[7030]=28108,d[7029]=28108,d[7032]=28116,d[7031]=28116,d[7034]=28124,d[7033]=28124,d[7036]=28132,d[7035]=28132,d[7038]=28140,d[7037]=28140,d[7040]=28148,d[7039]=28148,d[7042]=28156,d[7041]=28156,d[7044]=28164,d[7043]=28164,d[7046]=28172,d[7045]=28172,d[7048]=28180,d[7047]=28180,d[7050]=28188,d[7049]=28188,d[7052]=28196,d[7051]=28196,_e=E+-40|0,Le=S+8|0,Le=Le&7|0?0-Le&7:0,Ee=S+Le|0,Le=_e-Le|0,d[6983]=Ee,d[6980]=Le,d[Ee+4>>2]=Le|1,d[S+_e+4>>2]=40,d[6984]=d[7099];while(!1);if(h=d[6980]|0,h>>>0>te>>>0)return Le=h-te|0,d[6980]=Le,_e=d[6983]|0,Ee=_e+te|0,d[6983]=Ee,d[Ee+4>>2]=Le|1,d[_e+4>>2]=te|3,_e=_e+8|0,$=gt,_e|0}return _e=H6()|0,d[_e>>2]=12,_e=0,$=gt,_e|0}function xn(f){f=f|0;var h=0,p=0,y=0,x=0,S=0,E=0,R=0,D=0;if(f){p=f+-8|0,x=d[6981]|0,f=d[f+-4>>2]|0,h=f&-8,D=p+h|0;do if(f&1)R=p,E=p;else{if(y=d[p>>2]|0,!(f&3)||(E=p+(0-y)|0,S=y+h|0,E>>>0<x>>>0))return;if((d[6982]|0)==(E|0)){if(f=D+4|0,h=d[f>>2]|0,(h&3|0)!=3){R=E,h=S;break}d[6979]=S,d[f>>2]=h&-2,d[E+4>>2]=S|1,d[E+S>>2]=S;return}if(p=y>>>3,y>>>0<256)if(f=d[E+8>>2]|0,h=d[E+12>>2]|0,(h|0)==(f|0)){d[6977]=d[6977]&~(1<<p),R=E,h=S;break}else{d[f+12>>2]=h,d[h+8>>2]=f,R=E,h=S;break}x=d[E+24>>2]|0,f=d[E+12>>2]|0;do if((f|0)==(E|0)){if(h=E+16|0,p=h+4|0,f=d[p>>2]|0,f)h=p;else if(f=d[h>>2]|0,!f){f=0;break}for(;;)if(y=f+20|0,p=d[y>>2]|0,p)f=p,h=y;else if(y=f+16|0,p=d[y>>2]|0,p)f=p,h=y;else break;d[h>>2]=0}else R=d[E+8>>2]|0,d[R+12>>2]=f,d[f+8>>2]=R;while(!1);if(x){if(h=d[E+28>>2]|0,p=28212+(h<<2)|0,(d[p>>2]|0)==(E|0)){if(d[p>>2]=f,!f){d[6978]=d[6978]&~(1<<h),R=E,h=S;break}}else if(R=x+16|0,d[((d[R>>2]|0)==(E|0)?R:x+20|0)>>2]=f,!f){R=E,h=S;break}d[f+24>>2]=x,h=E+16|0,p=d[h>>2]|0,p|0&&(d[f+16>>2]=p,d[p+24>>2]=f),h=d[h+4>>2]|0,h?(d[f+20>>2]=h,d[h+24>>2]=f,R=E,h=S):(R=E,h=S)}else R=E,h=S}while(!1);if(!(E>>>0>=D>>>0)&&(f=D+4|0,y=d[f>>2]|0,!!(y&1))){if(y&2)d[f>>2]=y&-2,d[R+4>>2]=h|1,d[E+h>>2]=h,x=h;else{if((d[6983]|0)==(D|0)){if(D=(d[6980]|0)+h|0,d[6980]=D,d[6983]=R,d[R+4>>2]=D|1,(R|0)!=(d[6982]|0))return;d[6982]=0,d[6979]=0;return}if((d[6982]|0)==(D|0)){D=(d[6979]|0)+h|0,d[6979]=D,d[6982]=E,d[R+4>>2]=D|1,d[E+D>>2]=D;return}x=(y&-8)+h|0,p=y>>>3;do if(y>>>0<256)if(h=d[D+8>>2]|0,f=d[D+12>>2]|0,(f|0)==(h|0)){d[6977]=d[6977]&~(1<<p);break}else{d[h+12>>2]=f,d[f+8>>2]=h;break}else{S=d[D+24>>2]|0,f=d[D+12>>2]|0;do if((f|0)==(D|0)){if(h=D+16|0,p=h+4|0,f=d[p>>2]|0,f)h=p;else if(f=d[h>>2]|0,!f){p=0;break}for(;;)if(y=f+20|0,p=d[y>>2]|0,p)f=p,h=y;else if(y=f+16|0,p=d[y>>2]|0,p)f=p,h=y;else break;d[h>>2]=0,p=f}else p=d[D+8>>2]|0,d[p+12>>2]=f,d[f+8>>2]=p,p=f;while(!1);if(S|0){if(f=d[D+28>>2]|0,h=28212+(f<<2)|0,(d[h>>2]|0)==(D|0)){if(d[h>>2]=p,!p){d[6978]=d[6978]&~(1<<f);break}}else if(y=S+16|0,d[((d[y>>2]|0)==(D|0)?y:S+20|0)>>2]=p,!p)break;d[p+24>>2]=S,f=D+16|0,h=d[f>>2]|0,h|0&&(d[p+16>>2]=h,d[h+24>>2]=p),f=d[f+4>>2]|0,f|0&&(d[p+20>>2]=f,d[f+24>>2]=p)}}while(!1);if(d[R+4>>2]=x|1,d[E+x>>2]=x,(R|0)==(d[6982]|0)){d[6979]=x;return}}if(f=x>>>3,x>>>0<256){p=27948+(f<<1<<2)|0,h=d[6977]|0,f=1<<f,h&f?(h=p+8|0,f=d[h>>2]|0):(d[6977]=h|f,f=p,h=p+8|0),d[h>>2]=R,d[f+12>>2]=R,d[R+8>>2]=f,d[R+12>>2]=p;return}f=x>>>8,f?x>>>0>16777215?y=31:(E=(f+1048320|0)>>>16&8,D=f<<E,S=(D+520192|0)>>>16&4,D=D<<S,y=(D+245760|0)>>>16&2,y=14-(S|E|y)+(D<<y>>>15)|0,y=x>>>(y+7|0)&1|y<<1):y=0,f=28212+(y<<2)|0,d[R+28>>2]=y,d[R+20>>2]=0,d[R+16>>2]=0,h=d[6978]|0,p=1<<y;e:do if(!(h&p))d[6978]=h|p,d[f>>2]=R,d[R+24>>2]=f,d[R+12>>2]=R,d[R+8>>2]=R;else{f=d[f>>2]|0;t:do if((d[f+4>>2]&-8|0)!=(x|0)){for(y=x<<((y|0)==31?0:25-(y>>>1)|0);p=f+16+(y>>>31<<2)|0,h=d[p>>2]|0,!!h;)if((d[h+4>>2]&-8|0)==(x|0)){f=h;break t}else y=y<<1,f=h;d[p>>2]=R,d[R+24>>2]=f,d[R+12>>2]=R,d[R+8>>2]=R;break e}while(!1);E=f+8|0,D=d[E>>2]|0,d[D+12>>2]=R,d[E>>2]=R,d[R+8>>2]=D,d[R+12>>2]=f,d[R+24>>2]=0}while(!1);if(D=(d[6985]|0)+-1|0,d[6985]=D,!(D|0)){for(f=28364;f=d[f>>2]|0,f;)f=f+8|0;d[6985]=-1}}}}function ao(f,h){f=f|0,h=h|0;var p=0;return f?(p=Me(h,f)|0,(h|f)>>>0>65535&&(p=((p>>>0)/(f>>>0)|0|0)==(h|0)?p:-1)):p=0,f=aa(p)|0,!f||!(d[f+-4>>2]&3)||Nl(f|0,0,p|0)|0,f|0}function ln(f,h,p,y){return f=f|0,h=h|0,p=p|0,y=y|0,p=f+p>>>0,ot(h+y+(p>>>0<f>>>0|0)>>>0|0),p|0|0}function Gr(f,h,p,y){return f=f|0,h=h|0,p=p|0,y=y|0,y=h-y-(p>>>0>f>>>0|0)>>>0,ot(y|0),f-p>>>0|0|0}function c3(f){return f=f|0,(f?31-(kt(f^f-1)|0)|0:32)|0}function h3(f,h,p,y,x){f=f|0,h=h|0,p=p|0,y=y|0,x=x|0;var S=0,E=0,R=0,D=0,k=0,W=0,te=0,ce=0,le=0,ue=0;if(W=f,D=h,k=D,E=p,ce=y,R=ce,!k)return S=(x|0)!=0,R?S?(d[x>>2]=f|0,d[x+4>>2]=h&0,ce=0,x=0,ot(ce|0),x|0):(ce=0,x=0,ot(ce|0),x|0):(S&&(d[x>>2]=(W>>>0)%(E>>>0),d[x+4>>2]=0),ce=0,x=(W>>>0)/(E>>>0)>>>0,ot(ce|0),x|0);S=(R|0)==0;do if(E){if(!S){if(S=(kt(R|0)|0)-(kt(k|0)|0)|0,S>>>0<=31){te=S+1|0,R=31-S|0,h=S-31>>31,E=te,f=W>>>(te>>>0)&h|k<<R,h=k>>>(te>>>0)&h,S=0,R=W<<R;break}return x?(d[x>>2]=f|0,d[x+4>>2]=D|h&0,ce=0,x=0,ot(ce|0),x|0):(ce=0,x=0,ot(ce|0),x|0)}if(S=E-1|0,S&E|0){R=(kt(E|0)|0)+33-(kt(k|0)|0)|0,ue=64-R|0,te=32-R|0,D=te>>31,le=R-32|0,h=le>>31,E=R,f=te-1>>31&k>>>(le>>>0)|(k<<te|W>>>(R>>>0))&h,h=h&k>>>(R>>>0),S=W<<ue&D,R=(k<<ue|W>>>(le>>>0))&D|W<<te&R-33>>31;break}return x|0&&(d[x>>2]=S&W,d[x+4>>2]=0),(E|0)==1?(le=D|h&0,ue=f|0|0,ot(le|0),ue|0):(ue=c3(E|0)|0,le=k>>>(ue>>>0)|0,ue=k<<32-ue|W>>>(ue>>>0)|0,ot(le|0),ue|0)}else{if(S)return x|0&&(d[x>>2]=(k>>>0)%(E>>>0),d[x+4>>2]=0),le=0,ue=(k>>>0)/(E>>>0)>>>0,ot(le|0),ue|0;if(!W)return x|0&&(d[x>>2]=0,d[x+4>>2]=(k>>>0)%(R>>>0)),le=0,ue=(k>>>0)/(R>>>0)>>>0,ot(le|0),ue|0;if(S=R-1|0,!(S&R))return x|0&&(d[x>>2]=f|0,d[x+4>>2]=S&k|h&0),le=0,ue=k>>>((c3(R|0)|0)>>>0),ot(le|0),ue|0;if(S=(kt(R|0)|0)-(kt(k|0)|0)|0,S>>>0<=30){h=S+1|0,R=31-S|0,E=h,f=k<<R|W>>>(h>>>0),h=k>>>(h>>>0),S=0,R=W<<R;break}return x?(d[x>>2]=f|0,d[x+4>>2]=D|h&0,le=0,ue=0,ot(le|0),ue|0):(le=0,ue=0,ot(le|0),ue|0)}while(!1);if(!E)k=R,D=0,R=0;else{te=p|0|0,W=ce|y&0,k=ln(te|0,W|0,-1,-1)|0,p=K()|0,D=R,R=0;do y=D,D=S>>>31|D<<1,S=R|S<<1,y=f<<1|y>>>31|0,ce=f>>>31|h<<1|0,Gr(k|0,p|0,y|0,ce|0)|0,ue=K()|0,le=ue>>31|((ue|0)<0?-1:0)<<1,R=le&1,f=Gr(y|0,ce|0,le&te|0,(((ue|0)<0?-1:0)>>31|((ue|0)<0?-1:0)<<1)&W|0)|0,h=K()|0,E=E-1|0;while(E|0);k=D,D=0}return E=0,x|0&&(d[x>>2]=f,d[x+4>>2]=h),le=(S|0)>>>31|(k|E)<<1|(E<<1|S>>>31)&0|D,ue=(S<<1|0)&-2|R,ot(le|0),ue|0}function m0(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0;return k=h>>31|((h|0)<0?-1:0)<<1,D=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,S=y>>31|((y|0)<0?-1:0)<<1,x=((y|0)<0?-1:0)>>31|((y|0)<0?-1:0)<<1,R=Gr(k^f|0,D^h|0,k|0,D|0)|0,E=K()|0,f=S^k,h=x^D,Gr((h3(R,E,Gr(S^p|0,x^y|0,S|0,x|0)|0,K()|0,0)|0)^f|0,(K()|0)^h|0,f|0,h|0)|0}function f3(f,h){f=f|0,h=h|0;var p=0,y=0,x=0,S=0;return S=f&65535,x=h&65535,p=Me(x,S)|0,y=f>>>16,f=(p>>>16)+(Me(x,y)|0)|0,x=h>>>16,h=Me(x,S)|0,ot((f>>>16)+(Me(x,y)|0)+(((f&65535)+h|0)>>>16)|0),f+h<<16|p&65535|0|0}function Nr(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0;return x=f,S=p,p=f3(x,S)|0,f=K()|0,ot((Me(h,S)|0)+(Me(y,x)|0)+f|f&0|0),p|0|0|0}function Pl(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0,E=0,R=0,D=0,k=0;return x=$,$=$+16|0,R=x|0,E=h>>31|((h|0)<0?-1:0)<<1,S=((h|0)<0?-1:0)>>31|((h|0)<0?-1:0)<<1,k=y>>31|((y|0)<0?-1:0)<<1,D=((y|0)<0?-1:0)>>31|((y|0)<0?-1:0)<<1,f=Gr(E^f|0,S^h|0,E|0,S|0)|0,h=K()|0,h3(f,h,Gr(k^p|0,D^y|0,k|0,D|0)|0,K()|0,R)|0,y=Gr(d[R>>2]^E|0,d[R+4>>2]^S|0,E|0,S|0)|0,p=K()|0,$=x,ot(p|0),y|0}function q0(f,h,p,y){f=f|0,h=h|0,p=p|0,y=y|0;var x=0,S=0;return S=$,$=$+16|0,x=S|0,h3(f,h,p,y,x)|0,$=S,ot(d[x+4>>2]|0),d[x>>2]|0|0}function H5(f,h,p){return f=f|0,h=h|0,p=p|0,(p|0)<32?(ot(h>>p|0),f>>>p|(h&(1<<p)-1)<<32-p):(ot(((h|0)<0?-1:0)|0),h>>p-32|0)}function lt(f,h,p){return f=f|0,h=h|0,p=p|0,(p|0)<32?(ot(h>>>p|0),f>>>p|(h&(1<<p)-1)<<32-p):(ot(0),h>>>p-32|0)}function mt(f,h,p){return f=f|0,h=h|0,p=p|0,(p|0)<32?(ot(h<<p|(f&(1<<p)-1<<32-p)>>>32-p|0),f<<p):(ot(f<<p-32|0),0)}function W5(f,h,p){return f=f|0,h=h|0,h=kt(h)|0,(h|0)==32&&(h=h+(kt(f)|0)|0),ot(0),h|0}function d3(f,h){return f=+f,h=+h,f!=f?+h:h!=h?+f:+Ft(+f,+h)}function $u(f,h){return f=+f,h=+h,f!=f?+h:h!=h?+f:+pt(+f,+h)}function Po(f){return f=+f,f>=0?+pr(f+.5):+Ve(f-.5)}function P1(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0;if((p|0)>=8192)return dn(f|0,h|0,p|0)|0,f|0;if(S=f|0,x=f+p|0,(f&3)==(h&3)){for(;f&3;){if(!p)return S|0;st[f>>0]=st[h>>0]|0,f=f+1|0,h=h+1|0,p=p-1|0}for(p=x&-4|0,y=p-64|0;(f|0)<=(y|0);)d[f>>2]=d[h>>2],d[f+4>>2]=d[h+4>>2],d[f+8>>2]=d[h+8>>2],d[f+12>>2]=d[h+12>>2],d[f+16>>2]=d[h+16>>2],d[f+20>>2]=d[h+20>>2],d[f+24>>2]=d[h+24>>2],d[f+28>>2]=d[h+28>>2],d[f+32>>2]=d[h+32>>2],d[f+36>>2]=d[h+36>>2],d[f+40>>2]=d[h+40>>2],d[f+44>>2]=d[h+44>>2],d[f+48>>2]=d[h+48>>2],d[f+52>>2]=d[h+52>>2],d[f+56>>2]=d[h+56>>2],d[f+60>>2]=d[h+60>>2],f=f+64|0,h=h+64|0;for(;(f|0)<(p|0);)d[f>>2]=d[h>>2],f=f+4|0,h=h+4|0}else for(p=x-4|0;(f|0)<(p|0);)st[f>>0]=st[h>>0]|0,st[f+1>>0]=st[h+1>>0]|0,st[f+2>>0]=st[h+2>>0]|0,st[f+3>>0]=st[h+3>>0]|0,f=f+4|0,h=h+4|0;for(;(f|0)<(x|0);)st[f>>0]=st[h>>0]|0,f=f+1|0,h=h+1|0;return S|0}function Nl(f,h,p){f=f|0,h=h|0,p=p|0;var y=0,x=0,S=0,E=0;if(S=f+p|0,h=h&255,(p|0)>=67){for(;f&3;)st[f>>0]=h,f=f+1|0;for(y=S&-4|0,E=h|h<<8|h<<16|h<<24,x=y-64|0;(f|0)<=(x|0);)d[f>>2]=E,d[f+4>>2]=E,d[f+8>>2]=E,d[f+12>>2]=E,d[f+16>>2]=E,d[f+20>>2]=E,d[f+24>>2]=E,d[f+28>>2]=E,d[f+32>>2]=E,d[f+36>>2]=E,d[f+40>>2]=E,d[f+44>>2]=E,d[f+48>>2]=E,d[f+52>>2]=E,d[f+56>>2]=E,d[f+60>>2]=E,f=f+64|0;for(;(f|0)<(y|0);)d[f>>2]=E,f=f+4|0}for(;(f|0)<(S|0);)st[f>>0]=h,f=f+1|0;return S-p|0}function Xu(f){return f=+f,f>=0?+pr(f+.5):+Ve(f-.5)}function Hs(f){f=f|0;var h=0,p=0,y=0;return y=nn()|0,p=d[fi>>2]|0,h=p+f|0,(f|0)>0&(h|0)<(p|0)|(h|0)<0?(Qn(h|0)|0,Jt(12),-1):(h|0)>(y|0)&&!(xi(h|0)|0)?(Jt(12),-1):(d[fi>>2]=h,p|0)}return{___divdi3:m0,___muldi3:Nr,___remdi3:Pl,___uremdi3:q0,_areNeighborCells:T6,_bitshift64Ashr:H5,_bitshift64Lshr:lt,_bitshift64Shl:mt,_calloc:ao,_cellAreaKm2:A0,_cellAreaM2:Na,_cellAreaRads2:Gu,_cellToBoundary:Pa,_cellToCenterChild:w5,_cellToChildPos:I6,_cellToChildren:Fu,_cellToChildrenSize:ns,_cellToLatLng:Vr,_cellToLocalIj:qu,_cellToParent:Es,_cellToVertex:ms,_cellToVertexes:ju,_cellsToDirectedEdge:Qc,_cellsToLinkedMultiPolygon:OA,_childPosToCell:C5,_compactCells:C6,_destroyLinkedMultiPolygon:P5,_directedEdgeToBoundary:Lu,_directedEdgeToCells:Yc,_edgeLengthKm:t3,_edgeLengthM:n3,_edgeLengthRads:Cl,_emscripten_replace_memory:an,_free:xn,_getBaseCellNumber:T5,_getDirectedEdgeDestination:M6,_getDirectedEdgeOrigin:w6,_getHexagonAreaAvgKm2:w1,_getHexagonAreaAvgM2:Vu,_getHexagonEdgeLengthAvgKm:qA,_getHexagonEdgeLengthAvgM:ps,_getIcosahedronFaces:oa,_getNumCells:zu,_getPentagons:G0,_getRes0Cells:zA,_getResolution:El,_greatCircleDistanceKm:zi,_greatCircleDistanceM:As,_greatCircleDistanceRads:T1,_gridDisk:ta,_gridDiskDistances:Fi,_gridDistance:r3,_gridPathCells:I5,_gridPathCellsSize:s3,_gridRingUnsafe:k0,_i64Add:ln,_i64Subtract:Gr,_isPentagon:wn,_isResClassIII:P6,_isValidCell:Du,_isValidDirectedEdge:b5,_isValidVertex:u3,_latLngToCell:z0,_llvm_ctlz_i64:W5,_llvm_maxnum_f64:d3,_llvm_minnum_f64:$u,_llvm_round_f64:Po,_localIjToCell:F6,_malloc:aa,_maxFaceCount:S1,_maxGridDiskSize:ds,_maxPolygonToCellsSize:Mo,_maxPolygonToCellsSizeExperimental:O6,_memcpy:P1,_memset:Nl,_originToDirectedEdges:E6,_pentagonCount:R5,_polygonToCells:kc,_polygonToCellsExperimental:D5,_readInt64AsDoubleFromPointer:$A,_res0CellCount:VA,_round:Xu,_sbrk:Hs,_sizeOfCellBoundary:HA,_sizeOfCoordIJ:V5,_sizeOfGeoLoop:WA,_sizeOfGeoPolygon:jA,_sizeOfH3Index:V6,_sizeOfLatLng:a3,_sizeOfLinkedGeoPolygon:k5,_uncompactCells:M5,_uncompactCellsSize:E5,_vertexToLatLng:l3,establishStackSpace:o0,stackAlloc:Mi,stackRestore:Fr,stackSave:Nn}}(Be,bt,H);e.___divdi3=oe.___divdi3,e.___muldi3=oe.___muldi3,e.___remdi3=oe.___remdi3,e.___uremdi3=oe.___uremdi3,e._areNeighborCells=oe._areNeighborCells,e._bitshift64Ashr=oe._bitshift64Ashr,e._bitshift64Lshr=oe._bitshift64Lshr,e._bitshift64Shl=oe._bitshift64Shl,e._calloc=oe._calloc,e._cellAreaKm2=oe._cellAreaKm2,e._cellAreaM2=oe._cellAreaM2,e._cellAreaRads2=oe._cellAreaRads2,e._cellToBoundary=oe._cellToBoundary,e._cellToCenterChild=oe._cellToCenterChild,e._cellToChildPos=oe._cellToChildPos,e._cellToChildren=oe._cellToChildren,e._cellToChildrenSize=oe._cellToChildrenSize,e._cellToLatLng=oe._cellToLatLng,e._cellToLocalIj=oe._cellToLocalIj,e._cellToParent=oe._cellToParent,e._cellToVertex=oe._cellToVertex,e._cellToVertexes=oe._cellToVertexes,e._cellsToDirectedEdge=oe._cellsToDirectedEdge,e._cellsToLinkedMultiPolygon=oe._cellsToLinkedMultiPolygon,e._childPosToCell=oe._childPosToCell,e._compactCells=oe._compactCells,e._destroyLinkedMultiPolygon=oe._destroyLinkedMultiPolygon,e._directedEdgeToBoundary=oe._directedEdgeToBoundary,e._directedEdgeToCells=oe._directedEdgeToCells,e._edgeLengthKm=oe._edgeLengthKm,e._edgeLengthM=oe._edgeLengthM,e._edgeLengthRads=oe._edgeLengthRads;var at=e._emscripten_replace_memory=oe._emscripten_replace_memory;e._free=oe._free,e._getBaseCellNumber=oe._getBaseCellNumber,e._getDirectedEdgeDestination=oe._getDirectedEdgeDestination,e._getDirectedEdgeOrigin=oe._getDirectedEdgeOrigin,e._getHexagonAreaAvgKm2=oe._getHexagonAreaAvgKm2,e._getHexagonAreaAvgM2=oe._getHexagonAreaAvgM2,e._getHexagonEdgeLengthAvgKm=oe._getHexagonEdgeLengthAvgKm,e._getHexagonEdgeLengthAvgM=oe._getHexagonEdgeLengthAvgM,e._getIcosahedronFaces=oe._getIcosahedronFaces,e._getNumCells=oe._getNumCells,e._getPentagons=oe._getPentagons,e._getRes0Cells=oe._getRes0Cells,e._getResolution=oe._getResolution,e._greatCircleDistanceKm=oe._greatCircleDistanceKm,e._greatCircleDistanceM=oe._greatCircleDistanceM,e._greatCircleDistanceRads=oe._greatCircleDistanceRads,e._gridDisk=oe._gridDisk,e._gridDiskDistances=oe._gridDiskDistances,e._gridDistance=oe._gridDistance,e._gridPathCells=oe._gridPathCells,e._gridPathCellsSize=oe._gridPathCellsSize,e._gridRingUnsafe=oe._gridRingUnsafe,e._i64Add=oe._i64Add,e._i64Subtract=oe._i64Subtract,e._isPentagon=oe._isPentagon,e._isResClassIII=oe._isResClassIII,e._isValidCell=oe._isValidCell,e._isValidDirectedEdge=oe._isValidDirectedEdge,e._isValidVertex=oe._isValidVertex,e._latLngToCell=oe._latLngToCell,e._llvm_ctlz_i64=oe._llvm_ctlz_i64,e._llvm_maxnum_f64=oe._llvm_maxnum_f64,e._llvm_minnum_f64=oe._llvm_minnum_f64,e._llvm_round_f64=oe._llvm_round_f64,e._localIjToCell=oe._localIjToCell,e._malloc=oe._malloc,e._maxFaceCount=oe._maxFaceCount,e._maxGridDiskSize=oe._maxGridDiskSize,e._maxPolygonToCellsSize=oe._maxPolygonToCellsSize,e._maxPolygonToCellsSizeExperimental=oe._maxPolygonToCellsSizeExperimental,e._memcpy=oe._memcpy,e._memset=oe._memset,e._originToDirectedEdges=oe._originToDirectedEdges,e._pentagonCount=oe._pentagonCount,e._polygonToCells=oe._polygonToCells,e._polygonToCellsExperimental=oe._polygonToCellsExperimental,e._readInt64AsDoubleFromPointer=oe._readInt64AsDoubleFromPointer,e._res0CellCount=oe._res0CellCount,e._round=oe._round,e._sbrk=oe._sbrk,e._sizeOfCellBoundary=oe._sizeOfCellBoundary,e._sizeOfCoordIJ=oe._sizeOfCoordIJ,e._sizeOfGeoLoop=oe._sizeOfGeoLoop,e._sizeOfGeoPolygon=oe._sizeOfGeoPolygon,e._sizeOfH3Index=oe._sizeOfH3Index,e._sizeOfLatLng=oe._sizeOfLatLng,e._sizeOfLinkedGeoPolygon=oe._sizeOfLinkedGeoPolygon,e._uncompactCells=oe._uncompactCells,e._uncompactCellsSize=oe._uncompactCellsSize,e._vertexToLatLng=oe._vertexToLatLng,e.establishStackSpace=oe.establishStackSpace;var xt=e.stackAlloc=oe.stackAlloc,Ut=e.stackRestore=oe.stackRestore,_t=e.stackSave=oe.stackSave;if(e.asm=oe,e.cwrap=P,e.setValue=_,e.getValue=b,fn){he(fn)||(fn=s(fn));{ut();var rt=function(Oe){Oe.byteLength&&(Oe=new Uint8Array(Oe)),Y.set(Oe,m),e.memoryInitializerRequest&&delete e.memoryInitializerRequest.response,Tt()},Ot=function(){o(fn,rt,function(){throw"could not load memory initializer "+fn})},cn=ge(fn);if(cn)rt(cn.buffer);else if(e.memoryInitializerRequest){var ai=function(){var Oe=e.memoryInitializerRequest,it=Oe.response;if(Oe.status!==200&&Oe.status!==0){var Ct=ge(e.memoryInitializerRequestURL);if(Ct)it=Ct.buffer;else{console.warn("a problem seems to have happened with Module.memoryInitializerRequest, status: "+Oe.status+", retrying "+fn),Ot();return}}rt(it)};e.memoryInitializerRequest.response?setTimeout(ai,0):e.memoryInitializerRequest.addEventListener("load",ai)}else Ot()}}var Xn;vt=function Oe(){Xn||xr(),Xn||(vt=Oe)};function xr(Oe){if(Ze>0||(tt(),Ze>0))return;function it(){Xn||(Xn=!0,!M&&(Dt(),Rt(),e.onRuntimeInitialized&&e.onRuntimeInitialized(),It()))}e.setStatus?(e.setStatus("Running..."),setTimeout(function(){setTimeout(function(){e.setStatus("")},1),it()},1)):it()}e.run=xr;function hr(Oe){throw e.onAbort&&e.onAbort(Oe),Oe+="",a(Oe),l(Oe),M=!0,"abort("+Oe+"). Build with -s ASSERTIONS=1 for more info."}if(e.abort=hr,e.preInit)for(typeof e.preInit=="function"&&(e.preInit=[e.preInit]);e.preInit.length>0;)e.preInit.pop()();return xr(),i}(typeof gi=="object"?gi:{}),Gn="number",Cn=Gn,dh=Gn,Vn=Gn,zn=Gn,vs=Gn,jt=Gn,WQ=[["sizeOfH3Index",Gn],["sizeOfLatLng",Gn],["sizeOfCellBoundary",Gn],["sizeOfGeoLoop",Gn],["sizeOfGeoPolygon",Gn],["sizeOfLinkedGeoPolygon",Gn],["sizeOfCoordIJ",Gn],["readInt64AsDoubleFromPointer",Gn],["isValidCell",dh,[Vn,zn]],["latLngToCell",Cn,[Gn,Gn,vs,jt]],["cellToLatLng",Cn,[Vn,zn,jt]],["cellToBoundary",Cn,[Vn,zn,jt]],["maxGridDiskSize",Cn,[Gn,jt]],["gridDisk",Cn,[Vn,zn,Gn,jt]],["gridDiskDistances",Cn,[Vn,zn,Gn,jt,jt]],["gridRingUnsafe",Cn,[Vn,zn,Gn,jt]],["maxPolygonToCellsSize",Cn,[jt,vs,Gn,jt]],["polygonToCells",Cn,[jt,vs,Gn,jt]],["maxPolygonToCellsSizeExperimental",Cn,[jt,vs,Gn,jt]],["polygonToCellsExperimental",Cn,[jt,vs,Gn,Gn,Gn,jt]],["cellsToLinkedMultiPolygon",Cn,[jt,Gn,jt]],["destroyLinkedMultiPolygon",null,[jt]],["compactCells",Cn,[jt,jt,Gn,Gn]],["uncompactCells",Cn,[jt,Gn,Gn,jt,Gn,vs]],["uncompactCellsSize",Cn,[jt,Gn,Gn,vs,jt]],["isPentagon",dh,[Vn,zn]],["isResClassIII",dh,[Vn,zn]],["getBaseCellNumber",Gn,[Vn,zn]],["getResolution",Gn,[Vn,zn]],["maxFaceCount",Cn,[Vn,zn,jt]],["getIcosahedronFaces",Cn,[Vn,zn,jt]],["cellToParent",Cn,[Vn,zn,vs,jt]],["cellToChildren",Cn,[Vn,zn,vs,jt]],["cellToCenterChild",Cn,[Vn,zn,vs,jt]],["cellToChildrenSize",Cn,[Vn,zn,vs,jt]],["cellToChildPos",Cn,[Vn,zn,vs,jt]],["childPosToCell",Cn,[Gn,Gn,Vn,zn,vs,jt]],["areNeighborCells",Cn,[Vn,zn,Vn,zn,jt]],["cellsToDirectedEdge",Cn,[Vn,zn,Vn,zn,jt]],["getDirectedEdgeOrigin",Cn,[Vn,zn,jt]],["getDirectedEdgeDestination",Cn,[Vn,zn,jt]],["isValidDirectedEdge",dh,[Vn,zn]],["directedEdgeToCells",Cn,[Vn,zn,jt]],["originToDirectedEdges",Cn,[Vn,zn,jt]],["directedEdgeToBoundary",Cn,[Vn,zn,jt]],["gridDistance",Cn,[Vn,zn,Vn,zn,jt]],["gridPathCells",Cn,[Vn,zn,Vn,zn,jt]],["gridPathCellsSize",Cn,[Vn,zn,Vn,zn,jt]],["cellToLocalIj",Cn,[Vn,zn,Vn,zn,Gn,jt]],["localIjToCell",Cn,[Vn,zn,jt,Gn,jt]],["getHexagonAreaAvgM2",Cn,[vs,jt]],["getHexagonAreaAvgKm2",Cn,[vs,jt]],["getHexagonEdgeLengthAvgM",Cn,[vs,jt]],["getHexagonEdgeLengthAvgKm",Cn,[vs,jt]],["greatCircleDistanceM",Gn,[jt,jt]],["greatCircleDistanceKm",Gn,[jt,jt]],["greatCircleDistanceRads",Gn,[jt,jt]],["cellAreaM2",Cn,[Vn,zn,jt]],["cellAreaKm2",Cn,[Vn,zn,jt]],["cellAreaRads2",Cn,[Vn,zn,jt]],["edgeLengthM",Cn,[Vn,zn,jt]],["edgeLengthKm",Cn,[Vn,zn,jt]],["edgeLengthRads",Cn,[Vn,zn,jt]],["getNumCells",Cn,[vs,jt]],["getRes0Cells",Cn,[jt]],["res0CellCount",Gn],["getPentagons",Cn,[Gn,jt]],["pentagonCount",Gn],["cellToVertex",Cn,[Vn,zn,Gn,jt]],["cellToVertexes",Cn,[Vn,zn,jt]],["vertexToLatLng",Cn,[Vn,zn,jt]],["isValidVertex",dh,[Vn,zn]]],jQ=0,$Q=1,XQ=2,QQ=3,TC=4,YQ=5,KQ=6,ZQ=7,JQ=8,eY=9,tY=10,nY=11,iY=12,rY=13,sY=14,oY=15,zs={};zs[jQ]="Success";zs[$Q]="The operation failed but a more specific error is not available";zs[XQ]="Argument was outside of acceptable range";zs[QQ]="Latitude or longitude arguments were outside of acceptable range";zs[TC]="Resolution argument was outside of acceptable range";zs[YQ]="Cell argument was not valid";zs[KQ]="Directed edge argument was not valid";zs[ZQ]="Undirected edge argument was not valid";zs[JQ]="Vertex argument was not valid";zs[eY]="Pentagon distortion was encountered";zs[tY]="Duplicate input";zs[nY]="Cell arguments were not neighbors";zs[iY]="Cell arguments had incompatible resolutions";zs[rY]="Memory allocation failed";zs[sY]="Bounds of provided memory were insufficient";zs[oY]="Mode or flags argument was not valid";var aY=1e3,wC=1001,MC=1002,J9={};J9[aY]="Unknown unit";J9[wC]="Array length out of bounds";J9[MC]="Got unexpected null value for H3 index";var lY="Unknown error";function EC(i,e,t){var n=t&&"value"in t,r=new Error((i[e]||lY)+" (code: "+e+(n?", value: "+t.value:"")+")");return r.code=e,r}function RC(i,e){var t=arguments.length===2?{value:e}:{};return EC(zs,i,t)}function CC(i,e){var t=arguments.length===2?{value:e}:{};return EC(J9,i,t)}function w8(i){if(i!==0)throw RC(i)}var Yo={};WQ.forEach(function(e){Yo[e[0]]=gi.cwrap.apply(gi,e)});var f4=16,M8=4,Z4=8,uY=8,Hd=Yo.sizeOfH3Index(),c_=Yo.sizeOfLatLng(),cY=Yo.sizeOfCellBoundary(),hY=Yo.sizeOfGeoPolygon(),Zh=Yo.sizeOfGeoLoop();Yo.sizeOfLinkedGeoPolygon();Yo.sizeOfCoordIJ();function fY(i){if(typeof i!="number"||i<0||i>15||Math.floor(i)!==i)throw RC(TC,i);return i}function dY(i){if(!i)throw CC(MC);return i}var AY=Math.pow(2,32)-1;function pY(i){if(i>AY)throw CC(wC,i);return i}var mY=/[^0-9a-fA-F]/;function PC(i){if(Array.isArray(i)&&i.length===2&&Number.isInteger(i[0])&&Number.isInteger(i[1]))return i;if(typeof i!="string"||mY.test(i))return[0,0];var e=parseInt(i.substring(0,i.length-8),f4),t=parseInt(i.substring(i.length-8),f4);return[t,e]}function jT(i){if(i>=0)return i.toString(f4);i=i&2147483647;var e=NC(8,i.toString(f4)),t=(parseInt(e[0],f4)+8).toString(f4);return e=t+e.substring(1),e}function gY(i,e){return jT(e)+NC(8,jT(i))}function NC(i,e){for(var t=i-e.length,n="",r=0;r<t;r++)n+="0";return n=n+e,n}function $T(i,e,t){for(var n=i.length,r=gi._calloc(n,c_),s=t?1:0,o=t?0:1,a=0;a<n*2;a+=2)gi.HEAPF64.set([i[a/2][s],i[a/2][o]].map(BC),r/Z4+a);return gi.HEAPU32.set([n,r],e/M8),e}function yY(i,e){var t=i.length-1,n=gi._calloc(hY),r=0,s=r+Zh,o=s+M8;$T(i[0],n+r,e);var a;if(t>0){a=gi._calloc(t,Zh);for(var l=0;l<t;l++)$T(i[l+1],a+Zh*l,e)}return gi.setValue(n+s,t,"i32"),gi.setValue(n+o,a,"i32"),n}function vY(i){var e=0,t=e+Zh,n=t+M8,r=M8;gi._free(gi.getValue(i+e+r,"i8*"));var s=gi.getValue(i+t,"i32");if(s>0){for(var o=gi.getValue(i+n,"i32"),a=0;a<s;a++)gi._free(gi.getValue(o+Zh*a+r,"i8*"));gi._free(o)}gi._free(i)}function IC(i,e){e===void 0&&(e=0);var t=gi.getValue(i+Hd*e,"i32"),n=gi.getValue(i+Hd*e+M8,"i32");return n?gY(t,n):null}function _Y(i){return Yo.readInt64AsDoubleFromPointer(i)}function xY(i,e){for(var t=[],n=0;n<e;n++){var r=IC(i,n);r!==null&&t.push(r)}return t}function Wd(i){return MY(gi.getValue(i,"double"))}function bY(i){return[Wd(i),Wd(i+Z4)]}function SY(i){return[Wd(i+Z4),Wd(i)]}function TY(i,e,t){for(var n=gi.getValue(i,"i32"),r=i+Z4,s=[],o=SY,a=0;a<n*2;a+=2)s.push(o(r+Z4*a));return s.push(s[0]),s}function wY(i,e,t){var n=gi._malloc(c_);gi.HEAPF64.set([i,e].map(BC),n/Z4);var r=gi._malloc(Hd);try{return w8(Yo.latLngToCell(n,t,r)),dY(IC(r))}finally{gi._free(r),gi._free(n)}}function LC(i){var e=gi._malloc(c_),t=PC(i),n=t[0],r=t[1];try{return w8(Yo.cellToLatLng(n,r,e)),bY(e)}finally{gi._free(e)}}function DC(i,e){var t=gi._malloc(cY),n=PC(i),r=n[0],s=n[1];try{return w8(Yo.cellToBoundary(r,s,t)),TY(t,e,e)}finally{gi._free(t)}}function XT(i,e,t){if(fY(e),t=!!t,i.length===0||i[0].length===0)return[];var n=typeof i[0][0]=="number"?[i]:i,r=yY(n,t),s=gi._malloc(uY);try{w8(Yo.maxPolygonToCellsSize(r,e,0,s));var o=pY(_Y(s)),a=gi._calloc(o,Hd);try{return w8(Yo.polygonToCells(r,e,0,a)),xY(a,o)}finally{gi._free(a)}}finally{gi._free(s),vY(r)}}function BC(i){return i*Math.PI/180}function MY(i){return i*180/Math.PI}function EY(i){return i=Math.max(0,Math.min(1,i)),"rgb("+Math.max(0,Math.min(255,Math.round(34.61+i*(1172.33-i*(10793.56-i*(33300.12-i*(38394.49-i*14825.05)))))))+", "+Math.max(0,Math.min(255,Math.round(23.31+i*(557.33+i*(1225.33-i*(3574.96-i*(1073.77+i*707.56)))))))+", "+Math.max(0,Math.min(255,Math.round(27.2+i*(3211.1-i*(15327.97-i*(27814-i*(22569.18-i*6838.66)))))))+")"}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */const RY=["alphaMap","alphaTest","anisotropy","anisotropyMap","anisotropyRotation","aoMap","aoMapIntensity","attenuationColor","attenuationDistance","bumpMap","clearcoat","clearcoatMap","clearcoatNormalMap","clearcoatNormalScale","clearcoatRoughness","color","dispersion","displacementMap","emissive","emissiveIntensity","emissiveMap","envMap","envMapIntensity","gradientMap","ior","iridescence","iridescenceIOR","iridescenceMap","iridescenceThicknessMap","lightMap","lightMapIntensity","map","matcap","metalness","metalnessMap","normalMap","normalScale","opacity","roughness","roughnessMap","sheen","sheenColor","sheenColorMap","sheenRoughnessMap","shininess","specular","specularColor","specularColorMap","specularIntensity","specularIntensityMap","specularMap","thickness","transmission","transmissionMap"],Am=new WeakMap;class CY{constructor(e){this.renderObjects=new WeakMap,this.hasNode=this.containsNode(e),this.hasAnimation=e.object.isSkinnedMesh===!0,this.refreshUniforms=RY,this.renderId=0}firstInitialization(e){return this.renderObjects.has(e)===!1?(this.getRenderObjectData(e),!0):!1}needsVelocity(e){const t=e.getMRT();return t!==null&&t.has("velocity")}getRenderObjectData(e){let t=this.renderObjects.get(e);if(t===void 0){const{geometry:n,material:r,object:s}=e;if(t={material:this.getMaterialData(r),geometry:{id:n.id,attributes:this.getAttributesData(n.attributes),indexVersion:n.index?n.index.version:null,drawRange:{start:n.drawRange.start,count:n.drawRange.count}},worldMatrix:s.matrixWorld.clone()},s.center&&(t.center=s.center.clone()),s.morphTargetInfluences&&(t.morphTargetInfluences=s.morphTargetInfluences.slice()),e.bundle!==null&&(t.version=e.bundle.version),t.material.transmission>0){const{width:o,height:a}=e.context;t.bufferWidth=o,t.bufferHeight=a}t.lights=this.getLightsData(e.lightsNode.getLights()),this.renderObjects.set(e,t)}return t}getAttributesData(e){const t={};for(const n in e){const r=e[n];t[n]={version:r.version}}return t}containsNode(e){const t=e.material;for(const n in t)if(t[n]&&t[n].isNode)return!0;return e.renderer.overrideNodes.modelViewMatrix!==null||e.renderer.overrideNodes.modelNormalViewMatrix!==null}getMaterialData(e){const t={};for(const n of this.refreshUniforms){const r=e[n];r!=null&&(typeof r=="object"&&r.clone!==void 0?r.isTexture===!0?t[n]={id:r.id,version:r.version}:t[n]=r.clone():t[n]=r)}return t}equals(e,t){const{object:n,material:r,geometry:s}=e,o=this.getRenderObjectData(e);if(o.worldMatrix.equals(n.matrixWorld)!==!0)return o.worldMatrix.copy(n.matrixWorld),!1;const a=o.material;for(const w in a){const T=a[w],N=r[w];if(T.equals!==void 0){if(T.equals(N)===!1)return T.copy(N),!1}else if(N.isTexture===!0){if(T.id!==N.id||T.version!==N.version)return T.id=N.id,T.version=N.version,!1}else if(T!==N)return a[w]=N,!1}if(a.transmission>0){const{width:w,height:T}=e.context;if(o.bufferWidth!==w||o.bufferHeight!==T)return o.bufferWidth=w,o.bufferHeight=T,!1}const l=o.geometry,u=s.attributes,c=l.attributes,A=Object.keys(c),m=Object.keys(u);if(l.id!==s.id)return l.id=s.id,!1;if(A.length!==m.length)return o.geometry.attributes=this.getAttributesData(u),!1;for(const w of A){const T=c[w],N=u[w];if(N===void 0)return delete c[w],!1;if(T.version!==N.version)return T.version=N.version,!1}const _=s.index,b=l.indexVersion,M=_?_.version:null;if(b!==M)return l.indexVersion=M,!1;if(l.drawRange.start!==s.drawRange.start||l.drawRange.count!==s.drawRange.count)return l.drawRange.start=s.drawRange.start,l.drawRange.count=s.drawRange.count,!1;if(o.morphTargetInfluences){let w=!1;for(let T=0;T<o.morphTargetInfluences.length;T++)o.morphTargetInfluences[T]!==n.morphTargetInfluences[T]&&(w=!0);if(w)return!0}if(o.lights){for(let w=0;w<t.length;w++)if(o.lights[w].map!==t[w].map)return!1}return o.center&&o.center.equals(n.center)===!1?(o.center.copy(n.center),!0):(e.bundle!==null&&(o.version=e.bundle.version),!0)}getLightsData(e){const t=[];for(const n of e)n.isSpotLight===!0&&n.map!==null&&t.push({map:n.map.version});return t}getLights(e,t){if(Am.has(e)){const r=Am.get(e);if(r.renderId===t)return r.lightsData}const n=this.getLightsData(e.getLights());return Am.set(e,{renderId:t,lightsData:n}),n}needsRefresh(e,t){if(this.hasNode||this.hasAnimation||this.firstInitialization(e)||this.needsVelocity(t.renderer))return!0;const{renderId:n}=t;if(this.renderId!==n)return this.renderId=n,!0;const r=e.object.static===!0,s=e.bundle!==null&&e.bundle.static===!0&&this.getRenderObjectData(e).version===e.bundle.version;if(r||s)return!1;const o=this.getLights(e.lightsNode,n);return this.equals(e,o)!==!0}}function E8(i,e=0){let t=3735928559^e,n=1103547991^e;if(i instanceof Array)for(let r=0,s;r<i.length;r++)s=i[r],t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);else for(let r=0,s;r<i.length;r++)s=i.charCodeAt(r),t=Math.imul(t^s,2654435761),n=Math.imul(n^s,1597334677);return t=Math.imul(t^t>>>16,2246822507),t^=Math.imul(n^n>>>13,3266489909),n=Math.imul(n^n>>>16,2246822507),n^=Math.imul(t^t>>>13,3266489909),4294967296*(2097151&n)+(t>>>0)}const FC=i=>E8(i),eA=i=>E8(i),jd=(...i)=>E8(i);function UC(i,e=!1){const t=[];i.isNode===!0&&(t.push(i.id),i=i.getSelf());for(const{property:n,childNode:r}of $d(i))t.push(E8(n.slice(0,-4)),r.getCacheKey(e));return E8(t)}function*$d(i,e=!1){for(const t in i){if(t.startsWith("_")===!0)continue;const n=i[t];if(Array.isArray(n)===!0)for(let r=0;r<n.length;r++){const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}else if(n&&n.isNode===!0)yield{property:t,childNode:n};else if(n&&Object.getPrototypeOf(n)===Object.prototype)for(const r in n){if(r.startsWith("_")===!0)continue;const s=n[r];s&&(s.isNode===!0||e&&typeof s.toJSON=="function")&&(yield{property:t,index:r,childNode:s})}}}const PY=new Map([[1,"float"],[2,"vec2"],[3,"vec3"],[4,"vec4"],[9,"mat3"],[16,"mat4"]]),QT=new WeakMap;function OC(i){return PY.get(i)}function Xd(i){if(/[iu]?vec\d/.test(i))return i.startsWith("ivec")?Int32Array:i.startsWith("uvec")?Uint32Array:Float32Array;if(/mat\d/.test(i)||/float/.test(i))return Float32Array;if(/uint/.test(i))return Uint32Array;if(/int/.test(i))return Int32Array;throw new Error(`THREE.NodeUtils: Unsupported type: ${i}`)}function kC(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 9;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function NY(i){if(/float|int|uint/.test(i))return 1;if(/vec2/.test(i))return 2;if(/vec3/.test(i))return 3;if(/vec4/.test(i)||/mat2/.test(i))return 4;if(/mat3/.test(i))return 12;if(/mat4/.test(i))return 16;console.error("THREE.TSL: Unsupported type:",i)}function IY(i){if(/float|int|uint/.test(i))return 4;if(/vec2/.test(i))return 8;if(/vec3/.test(i)||/vec4/.test(i))return 16;if(/mat2/.test(i))return 8;if(/mat3/.test(i))return 48;if(/mat4/.test(i))return 64;console.error("THREE.TSL: Unsupported type:",i)}function ru(i){if(i==null)return null;const e=typeof i;return i.isNode===!0?"node":e==="number"?"float":e==="boolean"?"bool":e==="string"?"string":e==="function"?"shader":i.isVector2===!0?"vec2":i.isVector3===!0?"vec3":i.isVector4===!0?"vec4":i.isMatrix2===!0?"mat2":i.isMatrix3===!0?"mat3":i.isMatrix4===!0?"mat4":i.isColor===!0?"color":i instanceof ArrayBuffer?"ArrayBuffer":null}function VC(i,...e){const t=i?i.slice(-4):void 0;return e.length===1&&(t==="vec2"?e=[e[0],e[0]]:t==="vec3"?e=[e[0],e[0],e[0]]:t==="vec4"&&(e=[e[0],e[0],e[0],e[0]])),i==="color"?new Et(...e):t==="vec2"?new Ge(...e):t==="vec3"?new J(...e):t==="vec4"?new rn(...e):t==="mat2"?new i6(...e):t==="mat3"?new Fn(...e):t==="mat4"?new Wt(...e):i==="bool"?e[0]||!1:i==="float"||i==="int"||i==="uint"?e[0]||0:i==="string"?e[0]||"":i==="ArrayBuffer"?qC(e[0]):null}function zC(i){let e=QT.get(i);return e===void 0&&(e={},QT.set(i,e)),e}function GC(i){let e="";const t=new Uint8Array(i);for(let n=0;n<t.length;n++)e+=String.fromCharCode(t[n]);return btoa(e)}function qC(i){return Uint8Array.from(atob(i),e=>e.charCodeAt(0)).buffer}const zh={VERTEX:"vertex",FRAGMENT:"fragment"},qn={NONE:"none",FRAME:"frame",RENDER:"render",OBJECT:"object"},LY={BOOLEAN:"bool",INTEGER:"int",FLOAT:"float",VECTOR2:"vec2",VECTOR3:"vec3",VECTOR4:"vec4",MATRIX2:"mat2",MATRIX3:"mat3",MATRIX4:"mat4"},Us={READ_ONLY:"readOnly",WRITE_ONLY:"writeOnly",READ_WRITE:"readWrite"},HC=["fragment","vertex"],uy=["setup","analyze","generate"],cy=[...HC,"compute"],Lc=["x","y","z","w"],DY={analyze:"setup",generate:"analyze"};let BY=0;class un extends Ta{static get type(){return"Node"}constructor(e=null){super(),this.nodeType=e,this.updateType=qn.NONE,this.updateBeforeType=qn.NONE,this.updateAfterType=qn.NONE,this.uuid=R9.generateUUID(),this.version=0,this.global=!1,this.parents=!1,this.isNode=!0,this._cacheKey=null,this._cacheKeyVersion=0,Object.defineProperty(this,"id",{value:BY++})}set needsUpdate(e){e===!0&&this.version++}get type(){return this.constructor.type}onUpdate(e,t){return this.updateType=t,this.update=e.bind(this.getSelf()),this}onFrameUpdate(e){return this.onUpdate(e,qn.FRAME)}onRenderUpdate(e){return this.onUpdate(e,qn.RENDER)}onObjectUpdate(e){return this.onUpdate(e,qn.OBJECT)}onReference(e){return this.updateReference=e.bind(this.getSelf()),this}getSelf(){return this.self||this}updateReference(){return this}isGlobal(){return this.global}*getChildren(){for(const{childNode:e}of $d(this))yield e}dispose(){this.dispatchEvent({type:"dispose"})}traverse(e){e(this);for(const t of this.getChildren())t.traverse(e)}getCacheKey(e=!1){return e=e||this.version!==this._cacheKeyVersion,(e===!0||this._cacheKey===null)&&(this._cacheKey=jd(UC(this,e),this.customCacheKey()),this._cacheKeyVersion=this.version),this._cacheKey}customCacheKey(){return 0}getScope(){return this}getHash(){return this.uuid}getUpdateType(){return this.updateType}getUpdateBeforeType(){return this.updateBeforeType}getUpdateAfterType(){return this.updateAfterType}getElementType(e){const t=this.getNodeType(e);return e.getElementType(t)}getMemberType(){return"void"}getNodeType(e){const t=e.getNodeProperties(this);return t.outputNode?t.outputNode.getNodeType(e):this.nodeType}getShared(e){const t=this.getHash(e);return e.getNodeFromHash(t)||this}getArrayCount(){return null}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())t["node"+n++]=r;return t.outputNode||null}analyze(e,t=null){const n=e.increaseUsage(this);if(this.parents===!0){const r=e.getDataFromNode(this,"any");r.stages=r.stages||{},r.stages[e.shaderStage]=r.stages[e.shaderStage]||[],r.stages[e.shaderStage].push(t)}if(n===1){const r=e.getNodeProperties(this);for(const s of Object.values(r))s&&s.isNode===!0&&s.build(e,this)}}generate(e,t){const{outputNode:n}=e.getNodeProperties(this);if(n&&n.isNode===!0)return n.build(e,t)}updateBefore(){console.warn("Abstract function.")}updateAfter(){console.warn("Abstract function.")}update(){console.warn("Abstract function.")}build(e,t=null){const n=this.getShared(e);if(this!==n)return n.build(e,t);const r=e.getDataFromNode(this);r.buildStages=r.buildStages||{},r.buildStages[e.buildStage]=!0;const s=DY[e.buildStage];if(s&&r.buildStages[s]!==!0){const l=e.getBuildStage();e.setBuildStage(s),this.build(e),e.setBuildStage(l)}e.addNode(this),e.addChain(this);let o=null;const a=e.getBuildStage();if(a==="setup"){this.updateReference(e);const l=e.getNodeProperties(this);if(l.initialized!==!0){l.initialized=!0,l.outputNode=this.setup(e)||l.outputNode||null;for(const u of Object.values(l))if(u&&u.isNode===!0){if(u.parents===!0){const c=e.getNodeProperties(u);c.parents=c.parents||[],c.parents.push(this)}u.build(e)}}o=l.outputNode}else if(a==="analyze")this.analyze(e,t);else if(a==="generate")if(this.generate.length===1){const u=this.getNodeType(e),c=e.getDataFromNode(this);o=c.snippet,o===void 0?c.generated===void 0?(c.generated=!0,o=this.generate(e)||"",c.snippet=o):(console.warn("THREE.Node: Recursion detected.",this),o="/* Recursion detected. */"):c.flowCodes!==void 0&&e.context.nodeBlock!==void 0&&e.addFlowCodeHierarchy(this,e.context.nodeBlock),o=e.format(o,u,t)}else o=this.generate(e,t)||"";return e.removeChain(this),e.addSequentialNode(this),o}getSerializeChildren(){return $d(this)}serialize(e){const t=this.getSerializeChildren(),n={};for(const{property:r,index:s,childNode:o}of t)s!==void 0?(n[r]===void 0&&(n[r]=Number.isInteger(s)?[]:{}),n[r][s]=o.toJSON(e.meta).uuid):n[r]=o.toJSON(e.meta).uuid;Object.keys(n).length>0&&(e.inputNodes=n)}deserialize(e){if(e.inputNodes!==void 0){const t=e.meta.nodes;for(const n in e.inputNodes)if(Array.isArray(e.inputNodes[n])){const r=[];for(const s of e.inputNodes[n])r.push(t[s]);this[n]=r}else if(typeof e.inputNodes[n]=="object"){const r={};for(const s in e.inputNodes[n]){const o=e.inputNodes[n][s];r[s]=t[o]}this[n]=r}else{const r=e.inputNodes[n];this[n]=t[r]}}}toJSON(e){const{uuid:t,type:n}=this,r=e===void 0||typeof e=="string";r&&(e={textures:{},images:{},nodes:{}});let s=e.nodes[t];s===void 0&&(s={uuid:t,type:n,meta:e,metadata:{version:4.7,type:"Node",generator:"Node.toJSON"}},r!==!0&&(e.nodes[s.uuid]=s),this.serialize(s),delete s.meta);function o(a){const l=[];for(const u in a){const c=a[u];delete c.metadata,l.push(c)}return l}if(r){const a=o(e.textures),l=o(e.images),u=o(e.nodes);a.length>0&&(s.textures=a),l.length>0&&(s.images=l),u.length>0&&(s.nodes=u)}return s}}class Dc extends un{static get type(){return"ArrayElementNode"}constructor(e,t){super(),this.node=e,this.indexNode=t,this.isArrayElementNode=!0}getNodeType(e){return this.node.getElementType(e)}generate(e){const t=this.indexNode.getNodeType(e),n=this.node.build(e),r=this.indexNode.build(e,!e.isVector(t)&&e.isInteger(t)?t:"uint");return`${n}[ ${r} ]`}}class WC extends un{static get type(){return"ConvertNode"}constructor(e,t){super(),this.node=e,this.convertTo=t}getNodeType(e){const t=this.node.getNodeType(e);let n=null;for(const r of this.convertTo.split("|"))(n===null||e.getTypeLength(t)===e.getTypeLength(r))&&(n=r);return n}serialize(e){super.serialize(e),e.convertTo=this.convertTo}deserialize(e){super.deserialize(e),this.convertTo=e.convertTo}generate(e,t){const n=this.node,r=this.getNodeType(e),s=n.build(e,r);return e.format(s,r,t)}}class Zr extends un{static get type(){return"TempNode"}constructor(e=null){super(e),this.isTempNode=!0}hasDependencies(e){return e.getDataFromNode(this).usageCount>1}build(e,t){if(e.getBuildStage()==="generate"){const r=e.getVectorType(this.getNodeType(e,t)),s=e.getDataFromNode(this);if(s.propertyName!==void 0)return e.format(s.propertyName,r,t);if(r!=="void"&&t!=="void"&&this.hasDependencies(e)){const o=super.build(e,r),a=e.getVarFromNode(this,null,r),l=e.getPropertyName(a);return e.addLineFlowCode(`${l} = ${o}`,this),s.snippet=o,s.propertyName=l,e.format(s.propertyName,r,t)}}return super.build(e,t)}}class FY extends Zr{static get type(){return"JoinNode"}constructor(e=[],t=null){super(t),this.nodes=e}getNodeType(e){return this.nodeType!==null?e.getVectorType(this.nodeType):e.getTypeFromLength(this.nodes.reduce((t,n)=>t+e.getTypeLength(n.getNodeType(e)),0))}generate(e,t){const n=this.getNodeType(e),r=e.getTypeLength(n),s=this.nodes,o=e.getComponentType(n),a=[];let l=0;for(const c of s){if(l>=r){console.error(`THREE.TSL: Length of parameters exceeds maximum length of function '${n}()' type.`);break}let A=c.getNodeType(e),m=e.getTypeLength(A),_;l+m>r&&(console.error(`THREE.TSL: Length of '${n}()' data exceeds maximum length of output type.`),m=r-l,A=e.getTypeFromLength(m)),l+=m,_=c.build(e,A);const b=e.getComponentType(A);b!==o&&(_=e.format(_,b,o)),a.push(_)}const u=`${e.getType(n)}( ${a.join(", ")} )`;return e.format(u,n,t)}}const UY=Lc.join("");class hy extends un{static get type(){return"SplitNode"}constructor(e,t="x"){super(),this.node=e,this.components=t,this.isSplitNode=!0}getVectorLength(){let e=this.components.length;for(const t of this.components)e=Math.max(Lc.indexOf(t)+1,e);return e}getComponentType(e){return e.getComponentType(this.node.getNodeType(e))}getNodeType(e){return e.getTypeFromLength(this.components.length,this.getComponentType(e))}generate(e,t){const n=this.node,r=e.getTypeLength(n.getNodeType(e));let s=null;if(r>1){let o=null;this.getVectorLength()>=r&&(o=e.getTypeFromLength(this.getVectorLength(),this.getComponentType(e)));const l=n.build(e,o);this.components.length===r&&this.components===UY.slice(0,this.components.length)?s=e.format(l,o,t):s=e.format(`${l}.${this.components}`,this.getNodeType(e),t)}else s=n.build(e,t);return s}serialize(e){super.serialize(e),e.components=this.components}deserialize(e){super.deserialize(e),this.components=e.components}}class OY extends Zr{static get type(){return"SetNode"}constructor(e,t,n){super(),this.sourceNode=e,this.components=t,this.targetNode=n}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{sourceNode:t,components:n,targetNode:r}=this,s=this.getNodeType(e),o=e.getComponentType(r.getNodeType(e)),a=e.getTypeFromLength(n.length,o),l=r.build(e,a),u=t.build(e,s),c=e.getTypeLength(s),A=[];for(let m=0;m<c;m++){const _=Lc[m];_===n[0]?(A.push(l),m+=n.length-1):A.push(u+"."+_)}return`${e.getType(s)}( ${A.join(", ")} )`}}class kY extends Zr{static get type(){return"FlipNode"}constructor(e,t){super(),this.sourceNode=e,this.components=t}getNodeType(e){return this.sourceNode.getNodeType(e)}generate(e){const{components:t,sourceNode:n}=this,r=this.getNodeType(e),s=n.build(e),o=e.getVarFromNode(this),a=e.getPropertyName(o);e.addLineFlowCode(a+" = "+s,this);const l=e.getTypeLength(r),u=[];let c=0;for(let A=0;A<l;A++){const m=Lc[A];m===t[c]?(u.push("1.0 - "+(a+"."+m)),c++):u.push(a+"."+m)}return`${e.getType(r)}( ${u.join(", ")} )`}}class h_ extends un{static get type(){return"InputNode"}constructor(e,t=null){super(t),this.isInputNode=!0,this.value=e,this.precision=null}getNodeType(){return this.nodeType===null?ru(this.value):this.nodeType}getInputType(e){return this.getNodeType(e)}setPrecision(e){return this.precision=e,this}serialize(e){super.serialize(e),e.value=this.value,this.value&&this.value.toArray&&(e.value=this.value.toArray()),e.valueType=ru(this.value),e.nodeType=this.nodeType,e.valueType==="ArrayBuffer"&&(e.value=GC(e.value)),e.precision=this.precision}deserialize(e){super.deserialize(e),this.nodeType=e.nodeType,this.value=Array.isArray(e.value)?VC(e.valueType,...e.value):e.value,this.precision=e.precision||null,this.value&&this.value.fromArray&&(this.value=this.value.fromArray(e.value))}generate(){console.warn("Abstract function.")}}const YT=/float|u?int/;class O0 extends h_{static get type(){return"ConstNode"}constructor(e,t=null){super(e,t),this.isConstNode=!0}generateConst(e){return e.generateConst(this.getNodeType(e),this.value)}generate(e,t){const n=this.getNodeType(e);return YT.test(n)&&YT.test(t)?e.generateConst(t,this.value):e.format(this.generateConst(e),n,t)}}class VY extends un{static get type(){return"MemberNode"}constructor(e,t){super(),this.node=e,this.property=t,this.isMemberNode=!0}getNodeType(e){return this.node.getMemberType(e,this.property)}generate(e){return this.node.build(e)+"."+this.property}}let bc=null;const d4=new Map;function qe(i,e){if(d4.has(i)){console.warn(`THREE.TSL: Redefinition of method chaining '${i}'.`);return}if(typeof e!="function")throw new Error(`THREE.TSL: Node element ${i} is not a function`);d4.set(i,e)}const jC=i=>i.replace(/r|s/g,"x").replace(/g|t/g,"y").replace(/b|p/g,"z").replace(/a|q/g,"w"),KT=i=>jC(i).split("").sort().join(""),$C={setup(i,e){const t=e.shift();return i(a6(t),...e)},get(i,e,t){if(typeof e=="string"&&i[e]===void 0){if(i.isStackNode!==!0&&e==="assign")return(...n)=>(bc.assign(t,...n),t);if(d4.has(e)){const n=d4.get(e);return i.isStackNode?(...r)=>t.add(n(...r)):(...r)=>n(t,...r)}else{if(e==="toVarIntent")return()=>t;if(e==="self")return i;if(e.endsWith("Assign")&&d4.has(e.slice(0,e.length-6))){const n=d4.get(e.slice(0,e.length-6));return i.isStackNode?(...r)=>t.assign(r[0],n(...r)):(...r)=>t.assign(n(t,...r))}else{if(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0)return e=jC(e),$e(new hy(t,e));if(/^set[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=KT(e.slice(3).toLowerCase()),n=>$e(new OY(i,e,$e(n)));if(/^flip[XYZWRGBASTPQ]{1,4}$/.test(e)===!0)return e=KT(e.slice(4).toLowerCase()),()=>$e(new kY($e(i),e));if(e==="width"||e==="height"||e==="depth")return e==="width"?e="x":e==="height"?e="y":e==="depth"&&(e="z"),$e(new hy(i,e));if(/^\d+$/.test(e)===!0)return $e(new Dc(t,new O0(Number(e),"uint")));if(/^get$/.test(e)===!0)return n=>$e(new VY(t,n))}}}return Reflect.get(i,e,t)},set(i,e,t,n){return typeof e=="string"&&i[e]===void 0&&(/^[xyzwrgbastpq]{1,4}$/.test(e)===!0||e==="width"||e==="height"||e==="depth"||/^\d+$/.test(e)===!0)?(n[e].assign(t),!0):Reflect.set(i,e,t,n)}},pm=new WeakMap,ZT=new WeakMap,zY=function(i,e=null){const t=ru(i);if(t==="node"){let n=pm.get(i);return n===void 0&&(n=new Proxy(i,$C),pm.set(i,n),pm.set(n,n)),n}else{if(e===null&&(t==="float"||t==="boolean")||t&&t!=="shader"&&t!=="string")return $e(fy(i,e));if(t==="shader")return i.isFn?i:Se(i)}return i},GY=function(i,e=null){for(const t in i)i[t]=$e(i[t],e);return i},qY=function(i,e=null){const t=i.length;for(let n=0;n<t;n++)i[n]=$e(i[n],e);return i},XC=function(i,e=null,t=null,n=null){function r(c){return n!==null?(c=$e(Object.assign(c,n)),n.intent===!0&&(c=c.toVarIntent())):c=$e(c),c}let s,o=e,a,l;function u(c){let A;return o?A=/[a-z]/i.test(o)?o+"()":o:A=i.type,a!==void 0&&c.length<a?(console.error(`THREE.TSL: "${A}" parameter length is less than minimum required.`),c.concat(new Array(a-c.length).fill(0))):l!==void 0&&c.length>l?(console.error(`THREE.TSL: "${A}" parameter length exceeds limit.`),c.slice(0,l)):c}return e===null?s=(...c)=>r(new i(...j2(u(c)))):t!==null?(t=$e(t),s=(...c)=>r(new i(e,...j2(u(c)),t))):s=(...c)=>r(new i(e,...j2(u(c)))),s.setParameterLength=(...c)=>(c.length===1?a=l=c[0]:c.length===2&&([a,l]=c),s),s.setName=c=>(o=c,s),s},HY=function(i,...e){return $e(new i(...j2(e)))};class WY extends un{constructor(e,t){super(),this.shaderNode=e,this.inputNodes=t,this.isShaderCallNodeInternal=!0}getNodeType(e){return this.shaderNode.nodeType||this.getOutputNode(e).getNodeType(e)}getMemberType(e,t){return this.getOutputNode(e).getMemberType(e,t)}call(e){const{shaderNode:t,inputNodes:n}=this,r=e.getNodeProperties(t),s=e.getClosestSubBuild(t.subBuilds)||"",o=s||"default";if(r[o])return r[o];const a=e.subBuildFn;e.subBuildFn=s;let l=null;if(t.layout){let u=ZT.get(e.constructor);u===void 0&&(u=new WeakMap,ZT.set(e.constructor,u));let c=u.get(t);c===void 0&&(c=$e(e.buildFunctionNode(t)),u.set(t,c)),e.addInclude(c),l=$e(c.call(n))}else{let u=n;if(Array.isArray(u)){let m=0;u=new Proxy(u,{get:(_,b,M)=>_[b]===void 0?_[m++]:Reflect.get(_,b,M)})}const c=t.jsFunc,A=u!==null||c.length>1?c(u||[],e):c(e);l=$e(A)}return e.subBuildFn=a,t.once&&(r[o]=l),l}setupOutput(e){return e.addStack(),e.stack.outputNode=this.call(e),e.removeStack()}getOutputNode(e){const t=e.getNodeProperties(this),n=e.getSubBuildOutput(this);return t[n]=t[n]||this.setupOutput(e),t[n].subBuild=e.getClosestSubBuild(this),t[n]}build(e,t=null){let n=null;const r=e.getBuildStage(),s=e.getNodeProperties(this),o=e.getSubBuildOutput(this),a=this.getOutputNode(e);if(r==="setup"){const l=e.getSubBuildProperty("initialized",this);if(s[l]!==!0&&(s[l]=!0,s[o]=this.getOutputNode(e),s[o].build(e),this.shaderNode.subBuilds))for(const u of e.chaining){const c=e.getDataFromNode(u,"any");c.subBuilds=c.subBuilds||new Set;for(const A of this.shaderNode.subBuilds)c.subBuilds.add(A)}n=s[o]}else r==="analyze"?a.build(e,t):r==="generate"&&(n=a.build(e,t)||"");return n}}class jY extends un{constructor(e,t){super(t),this.jsFunc=e,this.layout=null,this.global=!0,this.once=!1}setLayout(e){return this.layout=e,this}call(e=null){return a6(e),$e(new WY(this,e))}setup(){return this.call()}}const $Y=[!1,!0],XY=[0,1,2,3],QY=[-1,-2],QC=[.5,1.5,1/3,1e-6,1e6,Math.PI,Math.PI*2,1/Math.PI,2/Math.PI,1/(Math.PI*2),Math.PI/2],f_=new Map;for(const i of $Y)f_.set(i,new O0(i));const d_=new Map;for(const i of XY)d_.set(i,new O0(i,"uint"));const A_=new Map([...d_].map(i=>new O0(i.value,"int")));for(const i of QY)A_.set(i,new O0(i,"int"));const tA=new Map([...A_].map(i=>new O0(i.value)));for(const i of QC)tA.set(i,new O0(i));for(const i of QC)tA.set(-i,new O0(-i));const nA={bool:f_,uint:d_,ints:A_,float:tA},JT=new Map([...f_,...tA]),fy=(i,e)=>JT.has(i)?JT.get(i):i.isNode===!0?i:new O0(i,e),Jr=function(i,e=null){return(...t)=>{if((t.length===0||!["bool","float","int","uint"].includes(i)&&t.every(r=>typeof r!="object"))&&(t=[VC(i,...t)]),t.length===1&&e!==null&&e.has(t[0]))return Gh(e.get(t[0]));if(t.length===1){const r=fy(t[0],i);return r.nodeType===i?Gh(r):Gh(new WC(r,i))}const n=t.map(r=>fy(r));return Gh(new FY(n,i))}},R8=i=>typeof i=="object"&&i!==null?i.value:i,YC=i=>i!=null?i.nodeType||i.convertTo||(typeof i=="string"?i:null):null;function A4(i,e){return new Proxy(new jY(i,e),$C)}const $e=(i,e=null)=>zY(i,e),Gh=(i,e=null)=>$e(i,e).toVarIntent(),a6=(i,e=null)=>new GY(i,e),j2=(i,e=null)=>new qY(i,e),Mn=(i,e=null,t=null,n=null)=>new XC(i,e,t,n),wt=(i,...e)=>new HY(i,...e),Vt=(i,e=null,t=null,n={})=>new XC(i,e,t,{intent:!0,...n});let YY=0;const Se=(i,e=null)=>{let t=null;e!==null&&(typeof e=="object"?t=e.return:(typeof e=="string"?t=e:console.error("THREE.TSL: Invalid layout type."),e=null));const n=new A4(i,t),r=(...s)=>{let o;a6(s),s[0]&&(s[0].isNode||Object.getPrototypeOf(s[0])!==Object.prototype)?o=[...s]:o=s[0];const l=n.call(o);return t==="void"&&l.toStack(),l.toVarIntent()};if(r.shaderNode=n,r.id=n.id,r.isFn=!0,r.getNodeType=(...s)=>n.getNodeType(...s),r.getCacheKey=(...s)=>n.getCacheKey(...s),r.setLayout=s=>(n.setLayout(s),r),r.once=(s=null)=>(n.once=!0,n.subBuilds=s,r),e!==null){if(typeof e.inputs!="object"){const s={name:"fn"+YY++,type:t,inputs:[]};for(const o in e)o!=="return"&&s.inputs.push({name:o,type:e[o]});e=s}r.setLayout(e)}return r},C8=i=>{bc=i},iA=()=>bc,gn=(...i)=>bc.If(...i),KY=(...i)=>bc.Switch(...i);function rA(i){return bc&&bc.add(i),i}qe("toStack",rA);const KC=new Jr("color"),ae=new Jr("float",nA.float),me=new Jr("int",nA.ints),Lt=new Jr("uint",nA.uint),Ka=new Jr("bool",nA.bool),Ke=new Jr("vec2"),os=new Jr("ivec2"),ZC=new Jr("uvec2"),JC=new Jr("bvec2"),be=new Jr("vec3"),eP=new Jr("ivec3"),f5=new Jr("uvec3"),p_=new Jr("bvec3"),sn=new Jr("vec4"),tP=new Jr("ivec4"),nP=new Jr("uvec4"),iP=new Jr("bvec4"),sA=new Jr("mat2"),no=new Jr("mat3"),$2=new Jr("mat4"),ZY=(i="")=>$e(new O0(i,"string")),JY=i=>$e(new O0(i,"ArrayBuffer"));qe("toColor",KC);qe("toFloat",ae);qe("toInt",me);qe("toUint",Lt);qe("toBool",Ka);qe("toVec2",Ke);qe("toIVec2",os);qe("toUVec2",ZC);qe("toBVec2",JC);qe("toVec3",be);qe("toIVec3",eP);qe("toUVec3",f5);qe("toBVec3",p_);qe("toVec4",sn);qe("toIVec4",tP);qe("toUVec4",nP);qe("toBVec4",iP);qe("toMat2",sA);qe("toMat3",no);qe("toMat4",$2);const rP=Mn(Dc).setParameterLength(2),sP=(i,e)=>$e(new WC($e(i),e)),eK=(i,e)=>$e(new hy($e(i),e));qe("element",rP);qe("convert",sP);const tK=i=>(console.warn("THREE.TSL: append() has been renamed to Stack()."),rA(i));qe("append",i=>(console.warn("THREE.TSL: .append() has been renamed to .toStack()."),rA(i)));class Pi extends un{static get type(){return"PropertyNode"}constructor(e,t=null,n=!1){super(e),this.name=t,this.varying=n,this.isPropertyNode=!0,this.global=!0}getHash(e){return this.name||super.getHash(e)}generate(e){let t;return this.varying===!0?(t=e.getVaryingFromNode(this,this.name),t.needsInterpolation=!0):t=e.getVarFromNode(this,this.name),e.getPropertyName(t)}}const Zl=(i,e)=>$e(new Pi(i,e)),P8=(i,e)=>$e(new Pi(i,e,!0)),wi=wt(Pi,"vec4","DiffuseColor"),dy=wt(Pi,"vec3","EmissiveColor"),el=wt(Pi,"float","Roughness"),N8=wt(Pi,"float","Metalness"),Qd=wt(Pi,"float","Clearcoat"),I8=wt(Pi,"float","ClearcoatRoughness"),O2=wt(Pi,"vec3","Sheen"),oA=wt(Pi,"float","SheenRoughness"),aA=wt(Pi,"float","Iridescence"),m_=wt(Pi,"float","IridescenceIOR"),g_=wt(Pi,"float","IridescenceThickness"),Yd=wt(Pi,"float","AlphaT"),Z1=wt(Pi,"float","Anisotropy"),Jh=wt(Pi,"vec3","AnisotropyT"),X2=wt(Pi,"vec3","AnisotropyB"),Fo=wt(Pi,"color","SpecularColor"),L8=wt(Pi,"float","SpecularF90"),Kd=wt(Pi,"float","Shininess"),b4=wt(Pi,"vec4","Output"),$f=wt(Pi,"float","dashSize"),Ay=wt(Pi,"float","gapSize"),nK=wt(Pi,"float","pointWidth"),e8=wt(Pi,"float","IOR"),Zd=wt(Pi,"float","Transmission"),y_=wt(Pi,"float","Thickness"),v_=wt(Pi,"float","AttenuationDistance"),__=wt(Pi,"color","AttenuationColor"),x_=wt(Pi,"float","Dispersion");class oP extends un{static get type(){return"UniformGroupNode"}constructor(e,t=!1,n=1){super("string"),this.name=e,this.shared=t,this.order=n,this.isUniformGroup=!0}serialize(e){super.serialize(e),e.name=this.name,e.version=this.version,e.shared=this.shared}deserialize(e){super.deserialize(e),this.name=e.name,this.version=e.version,this.shared=e.shared}}const aP=i=>new oP(i),lA=(i,e=0)=>new oP(i,!0,e),lP=lA("frame"),pn=lA("render"),b_=aP("object");class l6 extends h_{static get type(){return"UniformNode"}constructor(e,t=null){super(e,t),this.isUniformNode=!0,this.name="",this.groupNode=b_}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setGroup(e){return this.groupNode=e,this}getGroup(){return this.groupNode}getUniformHash(e){return this.getHash(e)}onUpdate(e,t){const n=this.getSelf();return e=e.bind(n),super.onUpdate(r=>{const s=e(r,n);s!==void 0&&(this.value=s)},t)}getInputType(e){let t=super.getInputType(e);return t==="bool"&&(t="uint"),t}generate(e,t){const n=this.getNodeType(e),r=this.getUniformHash(e);let s=e.getNodeFromHash(r);s===void 0&&(e.setHashNode(this,r),s=this);const o=s.getInputType(e),a=e.getUniformFromNode(s,o,e.shaderStage,this.name||e.context.nodeName),l=e.getPropertyName(a);e.context.nodeName!==void 0&&delete e.context.nodeName;let u=l;if(n==="bool"){const c=e.getDataFromNode(this);let A=c.propertyName;if(A===void 0){const m=e.getVarFromNode(this,null,"bool");A=e.getPropertyName(m),c.propertyName=A,u=e.format(l,o,n),e.addLineFlowCode(`${A} = ${u}`,this)}u=A}return e.format(u,n,t)}}const on=(i,e)=>{const t=YC(e||i),n=i&&i.isNode===!0?i.node&&i.node.value||i.value:i;return $e(new l6(n,t))};class ew extends Zr{static get type(){return"ArrayNode"}constructor(e,t,n=null){super(e),this.count=t,this.values=n,this.isArrayNode=!0}getArrayCount(){return this.count}getNodeType(e){return this.nodeType===null&&(this.nodeType=this.values[0].getNodeType(e)),this.nodeType}getElementType(e){return this.getNodeType(e)}generate(e){const t=this.getNodeType(e);return e.generateArray(t,this.count,this.values)}}const uP=(...i)=>{let e;if(i.length===1){const t=i[0];e=new ew(null,t.length,t)}else{const t=i[0],n=i[1];e=new ew(t,n)}return $e(e)};qe("toArray",(i,e)=>uP(Array(e).fill(i)));class iK extends Zr{static get type(){return"AssignNode"}constructor(e,t){super(),this.targetNode=e,this.sourceNode=t,this.isAssignNode=!0}hasDependencies(){return!1}getNodeType(e,t){return t!=="void"?this.targetNode.getNodeType(e):"void"}needsSplitAssign(e){const{targetNode:t}=this;if(e.isAvailable("swizzleAssign")===!1&&t.isSplitNode&&t.components.length>1){const n=e.getTypeLength(t.node.getNodeType(e));return Lc.join("").slice(0,n)!==t.components}return!1}setup(e){const{targetNode:t,sourceNode:n}=this,r=e.getNodeProperties(t);r.assign=!0;const s=e.getNodeProperties(this);s.sourceNode=n,s.targetNode=t.context({assign:!0})}generate(e,t){const{targetNode:n,sourceNode:r}=e.getNodeProperties(this),s=this.needsSplitAssign(e),o=n.getNodeType(e),a=n.build(e),l=r.build(e,o),u=r.getNodeType(e),c=e.getDataFromNode(this);let A;if(c.initialized===!0)t!=="void"&&(A=a);else if(s){const m=e.getVarFromNode(this,null,o),_=e.getPropertyName(m);e.addLineFlowCode(`${_} = ${l}`,this);const b=n.node,w=b.node.context({assign:!0}).build(e);for(let T=0;T<b.components.length;T++){const N=b.components[T];e.addLineFlowCode(`${w}.${N} = ${_}[ ${T} ]`,this)}t!=="void"&&(A=a)}else A=`${a} = ${l}`,(t==="void"||u==="void")&&(e.addLineFlowCode(A,this),t!=="void"&&(A=a));return c.initialized=!0,e.format(A,o,t)}}const cP=Mn(iK).setParameterLength(2);qe("assign",cP);class rK extends Zr{static get type(){return"FunctionCallNode"}constructor(e=null,t={}){super(),this.functionNode=e,this.parameters=t}setParameters(e){return this.parameters=e,this}getParameters(){return this.parameters}getNodeType(e){return this.functionNode.getNodeType(e)}generate(e){const t=[],n=this.functionNode,r=n.getInputs(e),s=this.parameters,o=(l,u)=>{const c=u.type,A=c==="pointer";let m;return A?m="&"+l.build(e):m=l.build(e,c),m};if(Array.isArray(s)){if(s.length>r.length)console.error("THREE.TSL: The number of provided parameters exceeds the expected number of inputs in 'Fn()'."),s.length=r.length;else if(s.length<r.length)for(console.error("THREE.TSL: The number of provided parameters is less than the expected number of inputs in 'Fn()'.");s.length<r.length;)s.push(ae(0));for(let l=0;l<s.length;l++)t.push(o(s[l],r[l]))}else for(const l of r){const u=s[l.name];u!==void 0?t.push(o(u,l)):(console.error(`THREE.TSL: Input '${l.name}' not found in 'Fn()'.`),t.push(o(ae(0),l)))}return`${n.build(e,"property")}( ${t.join(", ")} )`}}const hP=(i,...e)=>(e=e.length>1||e[0]&&e[0].isNode===!0?j2(e):a6(e[0]),$e(new rK($e(i),e)));qe("call",hP);const sK={"==":"equal","!=":"notEqual","<":"lessThan",">":"greaterThan","<=":"lessThanEqual",">=":"greaterThanEqual","%":"mod"};class Ar extends Zr{static get type(){return"OperatorNode"}constructor(e,t,n,...r){if(super(),r.length>0){let s=new Ar(e,t,n);for(let o=0;o<r.length-1;o++)s=new Ar(e,s,r[o]);t=s,n=r[r.length-1]}this.op=e,this.aNode=t,this.bNode=n,this.isOperatorNode=!0}getOperatorMethod(e,t){return e.getMethod(sK[this.op],t)}getNodeType(e){const t=this.op,n=this.aNode,r=this.bNode,s=n.getNodeType(e),o=r?r.getNodeType(e):null;if(s==="void"||o==="void")return"void";if(t==="%")return s;if(t==="~"||t==="&"||t==="|"||t==="^"||t===">>"||t==="<<")return e.getIntegerType(s);if(t==="!"||t==="&&"||t==="||"||t==="^^")return"bool";if(t==="=="||t==="!="||t==="<"||t===">"||t==="<="||t===">="){const a=Math.max(e.getTypeLength(s),e.getTypeLength(o));return a>1?`bvec${a}`:"bool"}else{if(e.isMatrix(s)){if(o==="float")return s;if(e.isVector(o))return e.getVectorFromMatrix(s);if(e.isMatrix(o))return s}else if(e.isMatrix(o)){if(s==="float")return o;if(e.isVector(s))return e.getVectorFromMatrix(o)}return e.getTypeLength(o)>e.getTypeLength(s)?o:s}}generate(e,t){const n=this.op,{aNode:r,bNode:s}=this,o=this.getNodeType(e);let a=null,l=null;o!=="void"?(a=r.getNodeType(e),l=s?s.getNodeType(e):null,n==="<"||n===">"||n==="<="||n===">="||n==="=="||n==="!="?e.isVector(a)?l=a:e.isVector(l)?a=l:a!==l&&(a=l="float"):n===">>"||n==="<<"?(a=o,l=e.changeComponentType(l,"uint")):n==="%"?(a=o,l=e.isInteger(a)&&e.isInteger(l)?l:a):e.isMatrix(a)?l==="float"?l="float":e.isVector(l)?l=e.getVectorFromMatrix(a):e.isMatrix(l)||(a=l=o):e.isMatrix(l)?a==="float"?a="float":e.isVector(a)?a=e.getVectorFromMatrix(l):a=l=o:a=l=o):a=l=o;const u=r.build(e,a),c=s?s.build(e,l):null,A=e.getFunctionOperator(n);if(t!=="void"){const m=e.renderer.coordinateSystem===bs;if(n==="=="||n==="!="||n==="<"||n===">"||n==="<="||n===">=")return m?e.isVector(a)?e.format(`${this.getOperatorMethod(e,t)}( ${u}, ${c} )`,o,t):e.format(`( ${u} ${n} ${c} )`,o,t):e.format(`( ${u} ${n} ${c} )`,o,t);if(n==="%")return e.isInteger(l)?e.format(`( ${u} % ${c} )`,o,t):e.format(`${this.getOperatorMethod(e,o)}( ${u}, ${c} )`,o,t);if(n==="!"||n==="~")return e.format(`(${n}${u})`,a,t);if(A)return e.format(`${A}( ${u}, ${c} )`,o,t);if(e.isMatrix(a)&&l==="float")return e.format(`( ${c} ${n} ${u} )`,o,t);if(a==="float"&&e.isMatrix(l))return e.format(`${u} ${n} ${c}`,o,t);{let _=`( ${u} ${n} ${c} )`;return!m&&o==="bool"&&e.isVector(a)&&e.isVector(l)&&(_=`all${_}`),e.format(_,o,t)}}else if(a!=="void")return A?e.format(`${A}( ${u}, ${c} )`,o,t):e.isMatrix(a)&&l==="float"?e.format(`${c} ${n} ${u}`,o,t):e.format(`${u} ${n} ${c}`,o,t)}serialize(e){super.serialize(e),e.op=this.op}deserialize(e){super.deserialize(e),this.op=e.op}}const Br=Vt(Ar,"+").setParameterLength(2,1/0).setName("add"),si=Vt(Ar,"-").setParameterLength(2,1/0).setName("sub"),Hn=Vt(Ar,"*").setParameterLength(2,1/0).setName("mul"),Sa=Vt(Ar,"/").setParameterLength(2,1/0).setName("div"),u6=Vt(Ar,"%").setParameterLength(2).setName("mod"),S_=Vt(Ar,"==").setParameterLength(2).setName("equal"),fP=Vt(Ar,"!=").setParameterLength(2).setName("notEqual"),dP=Vt(Ar,"<").setParameterLength(2).setName("lessThan"),T_=Vt(Ar,">").setParameterLength(2).setName("greaterThan"),AP=Vt(Ar,"<=").setParameterLength(2).setName("lessThanEqual"),pP=Vt(Ar,">=").setParameterLength(2).setName("greaterThanEqual"),mP=Vt(Ar,"&&").setParameterLength(2,1/0).setName("and"),gP=Vt(Ar,"||").setParameterLength(2,1/0).setName("or"),yP=Vt(Ar,"!").setParameterLength(1).setName("not"),vP=Vt(Ar,"^^").setParameterLength(2).setName("xor"),_P=Vt(Ar,"&").setParameterLength(2).setName("bitAnd"),xP=Vt(Ar,"~").setParameterLength(2).setName("bitNot"),bP=Vt(Ar,"|").setParameterLength(2).setName("bitOr"),SP=Vt(Ar,"^").setParameterLength(2).setName("bitXor"),TP=Vt(Ar,"<<").setParameterLength(2).setName("shiftLeft"),wP=Vt(Ar,">>").setParameterLength(2).setName("shiftRight"),MP=Se(([i])=>(i.addAssign(1),i)),EP=Se(([i])=>(i.subAssign(1),i)),RP=Se(([i])=>{const e=me(i).toConst();return i.addAssign(1),e}),CP=Se(([i])=>{const e=me(i).toConst();return i.subAssign(1),e});qe("add",Br);qe("sub",si);qe("mul",Hn);qe("div",Sa);qe("mod",u6);qe("equal",S_);qe("notEqual",fP);qe("lessThan",dP);qe("greaterThan",T_);qe("lessThanEqual",AP);qe("greaterThanEqual",pP);qe("and",mP);qe("or",gP);qe("not",yP);qe("xor",vP);qe("bitAnd",_P);qe("bitNot",xP);qe("bitOr",bP);qe("bitXor",SP);qe("shiftLeft",TP);qe("shiftRight",wP);qe("incrementBefore",MP);qe("decrementBefore",EP);qe("increment",RP);qe("decrement",CP);const PP=(i,e)=>(console.warn('THREE.TSL: "modInt()" is deprecated. Use "mod( int( ... ) )" instead.'),u6(me(i),me(e)));qe("modInt",PP);class Re extends Zr{static get type(){return"MathNode"}constructor(e,t,n=null,r=null){if(super(),(e===Re.MAX||e===Re.MIN)&&arguments.length>3){let s=new Re(e,t,n);for(let o=2;o<arguments.length-1;o++)s=new Re(e,s,arguments[o]);t=s,n=arguments[arguments.length-1],r=null}this.method=e,this.aNode=t,this.bNode=n,this.cNode=r,this.isMathNode=!0}getInputType(e){const t=this.aNode.getNodeType(e),n=this.bNode?this.bNode.getNodeType(e):null,r=this.cNode?this.cNode.getNodeType(e):null,s=e.isMatrix(t)?0:e.getTypeLength(t),o=e.isMatrix(n)?0:e.getTypeLength(n),a=e.isMatrix(r)?0:e.getTypeLength(r);return s>o&&s>a?t:o>a?n:a>s?r:t}getNodeType(e){const t=this.method;return t===Re.LENGTH||t===Re.DISTANCE||t===Re.DOT?"float":t===Re.CROSS?"vec3":t===Re.ALL||t===Re.ANY?"bool":t===Re.EQUALS?e.changeComponentType(this.aNode.getNodeType(e),"bool"):this.getInputType(e)}setup(e){const{aNode:t,bNode:n,method:r}=this;let s=null;if(r===Re.ONE_MINUS)s=si(1,t);else if(r===Re.RECIPROCAL)s=Sa(1,t);else if(r===Re.DIFFERENCE)s=Ki(si(t,n));else if(r===Re.TRANSFORM_DIRECTION){let o=t,a=n;e.isMatrix(o.getNodeType(e))?a=sn(be(a),0):o=sn(be(o),0);const l=Hn(o,a).xyz;s=h1(l)}return s!==null?s:super.setup(e)}generate(e,t){if(e.getNodeProperties(this).outputNode)return super.generate(e,t);let r=this.method;const s=this.getNodeType(e),o=this.getInputType(e),a=this.aNode,l=this.bNode,u=this.cNode,c=e.renderer.coordinateSystem;if(r===Re.NEGATE)return e.format("( - "+a.build(e,o)+" )",s,t);{const A=[];return r===Re.CROSS?A.push(a.build(e,s),l.build(e,s)):c===bs&&r===Re.STEP?A.push(a.build(e,e.getTypeLength(a.getNodeType(e))===1?"float":o),l.build(e,o)):c===bs&&(r===Re.MIN||r===Re.MAX)?A.push(a.build(e,o),l.build(e,e.getTypeLength(l.getNodeType(e))===1?"float":o)):r===Re.REFRACT?A.push(a.build(e,o),l.build(e,o),u.build(e,"float")):r===Re.MIX?A.push(a.build(e,o),l.build(e,o),u.build(e,e.getTypeLength(u.getNodeType(e))===1?"float":o)):(c===Qa&&r===Re.ATAN&&l!==null&&(r="atan2"),e.shaderStage!=="fragment"&&(r===Re.DFDX||r===Re.DFDY)&&(console.warn(`THREE.TSL: '${r}' is not supported in the ${e.shaderStage} stage.`),r="/*"+r+"*/"),A.push(a.build(e,o)),l!==null&&A.push(l.build(e,o)),u!==null&&A.push(u.build(e,o))),e.format(`${e.getMethod(r,s)}( ${A.join(", ")} )`,s,t)}}serialize(e){super.serialize(e),e.method=this.method}deserialize(e){super.deserialize(e),this.method=e.method}}Re.ALL="all";Re.ANY="any";Re.RADIANS="radians";Re.DEGREES="degrees";Re.EXP="exp";Re.EXP2="exp2";Re.LOG="log";Re.LOG2="log2";Re.SQRT="sqrt";Re.INVERSE_SQRT="inversesqrt";Re.FLOOR="floor";Re.CEIL="ceil";Re.NORMALIZE="normalize";Re.FRACT="fract";Re.SIN="sin";Re.COS="cos";Re.TAN="tan";Re.ASIN="asin";Re.ACOS="acos";Re.ATAN="atan";Re.ABS="abs";Re.SIGN="sign";Re.LENGTH="length";Re.NEGATE="negate";Re.ONE_MINUS="oneMinus";Re.DFDX="dFdx";Re.DFDY="dFdy";Re.ROUND="round";Re.RECIPROCAL="reciprocal";Re.TRUNC="trunc";Re.FWIDTH="fwidth";Re.TRANSPOSE="transpose";Re.DETERMINANT="determinant";Re.INVERSE="inverse";Re.BITCAST="bitcast";Re.EQUALS="equals";Re.MIN="min";Re.MAX="max";Re.STEP="step";Re.REFLECT="reflect";Re.DISTANCE="distance";Re.DIFFERENCE="difference";Re.DOT="dot";Re.CROSS="cross";Re.POW="pow";Re.TRANSFORM_DIRECTION="transformDirection";Re.MIX="mix";Re.CLAMP="clamp";Re.REFRACT="refract";Re.SMOOTHSTEP="smoothstep";Re.FACEFORWARD="faceforward";const NP=ae(1e-6),oK=ae(1e6),Jd=ae(Math.PI),aK=ae(Math.PI*2),IP=Vt(Re,Re.ALL).setParameterLength(1),LP=Vt(Re,Re.ANY).setParameterLength(1),DP=Vt(Re,Re.RADIANS).setParameterLength(1),BP=Vt(Re,Re.DEGREES).setParameterLength(1),w_=Vt(Re,Re.EXP).setParameterLength(1),J4=Vt(Re,Re.EXP2).setParameterLength(1),uA=Vt(Re,Re.LOG).setParameterLength(1),al=Vt(Re,Re.LOG2).setParameterLength(1),xl=Vt(Re,Re.SQRT).setParameterLength(1),M_=Vt(Re,Re.INVERSE_SQRT).setParameterLength(1),ll=Vt(Re,Re.FLOOR).setParameterLength(1),cA=Vt(Re,Re.CEIL).setParameterLength(1),h1=Vt(Re,Re.NORMALIZE).setParameterLength(1),A1=Vt(Re,Re.FRACT).setParameterLength(1),ya=Vt(Re,Re.SIN).setParameterLength(1),zl=Vt(Re,Re.COS).setParameterLength(1),FP=Vt(Re,Re.TAN).setParameterLength(1),UP=Vt(Re,Re.ASIN).setParameterLength(1),E_=Vt(Re,Re.ACOS).setParameterLength(1),hA=Vt(Re,Re.ATAN).setParameterLength(1,2),Ki=Vt(Re,Re.ABS).setParameterLength(1),D8=Vt(Re,Re.SIGN).setParameterLength(1),ul=Vt(Re,Re.LENGTH).setParameterLength(1),OP=Vt(Re,Re.NEGATE).setParameterLength(1),kP=Vt(Re,Re.ONE_MINUS).setParameterLength(1),R_=Vt(Re,Re.DFDX).setParameterLength(1),C_=Vt(Re,Re.DFDY).setParameterLength(1),VP=Vt(Re,Re.ROUND).setParameterLength(1),zP=Vt(Re,Re.RECIPROCAL).setParameterLength(1),P_=Vt(Re,Re.TRUNC).setParameterLength(1),GP=Vt(Re,Re.FWIDTH).setParameterLength(1),qP=Vt(Re,Re.TRANSPOSE).setParameterLength(1),HP=Vt(Re,Re.DETERMINANT).setParameterLength(1),WP=Vt(Re,Re.INVERSE).setParameterLength(1),lK=Vt(Re,Re.BITCAST).setParameterLength(2),jP=(i,e)=>(console.warn('THREE.TSL: "equals" is deprecated. Use "equal" inside a vector instead, like: "bvec*( equal( ... ) )"'),S_(i,e)),Ko=Vt(Re,Re.MIN).setParameterLength(2,1/0),_r=Vt(Re,Re.MAX).setParameterLength(2,1/0),fA=Vt(Re,Re.STEP).setParameterLength(2),$P=Vt(Re,Re.REFLECT).setParameterLength(2),XP=Vt(Re,Re.DISTANCE).setParameterLength(2),QP=Vt(Re,Re.DIFFERENCE).setParameterLength(2),Su=Vt(Re,Re.DOT).setParameterLength(2),dA=Vt(Re,Re.CROSS).setParameterLength(2),Ha=Vt(Re,Re.POW).setParameterLength(2),N_=Vt(Re,Re.POW,2).setParameterLength(1),YP=Vt(Re,Re.POW,3).setParameterLength(1),KP=Vt(Re,Re.POW,4).setParameterLength(1),ZP=Vt(Re,Re.TRANSFORM_DIRECTION).setParameterLength(2),JP=i=>Hn(D8(i),Ha(Ki(i),1/3)),I_=i=>Su(i,i),_i=Vt(Re,Re.MIX).setParameterLength(3),Za=(i,e=0,t=1)=>$e(new Re(Re.CLAMP,$e(i),$e(e),$e(t))),L_=i=>Za(i),D_=Vt(Re,Re.REFRACT).setParameterLength(3),pl=Vt(Re,Re.SMOOTHSTEP).setParameterLength(3),B_=Vt(Re,Re.FACEFORWARD).setParameterLength(3),eN=Se(([i])=>{const n=43758.5453,r=Su(i.xy,Ke(12.9898,78.233)),s=u6(r,Jd);return A1(ya(s).mul(n))}),tN=(i,e,t)=>_i(e,t,i),nN=(i,e,t)=>pl(e,t,i),iN=(i,e)=>fA(e,i),rN=(i,e)=>(console.warn('THREE.TSL: "atan2" is overloaded. Use "atan" instead.'),hA(i,e)),uK=B_,cK=M_;qe("all",IP);qe("any",LP);qe("equals",jP);qe("radians",DP);qe("degrees",BP);qe("exp",w_);qe("exp2",J4);qe("log",uA);qe("log2",al);qe("sqrt",xl);qe("inverseSqrt",M_);qe("floor",ll);qe("ceil",cA);qe("normalize",h1);qe("fract",A1);qe("sin",ya);qe("cos",zl);qe("tan",FP);qe("asin",UP);qe("acos",E_);qe("atan",hA);qe("abs",Ki);qe("sign",D8);qe("length",ul);qe("lengthSq",I_);qe("negate",OP);qe("oneMinus",kP);qe("dFdx",R_);qe("dFdy",C_);qe("round",VP);qe("reciprocal",zP);qe("trunc",P_);qe("fwidth",GP);qe("atan2",rN);qe("min",Ko);qe("max",_r);qe("step",iN);qe("reflect",$P);qe("distance",XP);qe("dot",Su);qe("cross",dA);qe("pow",Ha);qe("pow2",N_);qe("pow3",YP);qe("pow4",KP);qe("transformDirection",ZP);qe("mix",tN);qe("clamp",Za);qe("refract",D_);qe("smoothstep",nN);qe("faceForward",B_);qe("difference",QP);qe("saturate",L_);qe("cbrt",JP);qe("transpose",qP);qe("determinant",HP);qe("inverse",WP);qe("rand",eN);class hK extends un{static get type(){return"ConditionalNode"}constructor(e,t,n=null){super(),this.condNode=e,this.ifNode=t,this.elseNode=n}getNodeType(e){const{ifNode:t,elseNode:n}=e.getNodeProperties(this);if(t===void 0)return e.flowBuildStage(this,"setup"),this.getNodeType(e);const r=t.getNodeType(e);if(n!==null){const s=n.getNodeType(e);if(e.getTypeLength(s)>e.getTypeLength(r))return s}return r}setup(e){const t=this.condNode.cache(),n=this.ifNode.cache(),r=this.elseNode?this.elseNode.cache():null,s=e.context.nodeBlock;e.getDataFromNode(n).parentNodeBlock=s,r!==null&&(e.getDataFromNode(r).parentNodeBlock=s);const o=e.getNodeProperties(this);o.condNode=t,o.ifNode=n.context({nodeBlock:n}),o.elseNode=r?r.context({nodeBlock:r}):null}generate(e,t){const n=this.getNodeType(e),r=e.getDataFromNode(this);if(r.nodeProperty!==void 0)return r.nodeProperty;const{condNode:s,ifNode:o,elseNode:a}=e.getNodeProperties(this),l=e.currentFunctionNode,u=t!=="void",c=u?Zl(n).build(e):"";r.nodeProperty=c;const A=s.build(e,"bool");e.addFlowCode(`
${e.tab}if ( ${A} ) {

`).addFlowTab();let m=o.build(e,n);if(m&&(u?m=c+" = "+m+";":(m="return "+m+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),m="// "+m))),e.removeFlowTab().addFlowCode(e.tab+"	"+m+`

`+e.tab+"}"),a!==null){e.addFlowCode(` else {

`).addFlowTab();let _=a.build(e,n);_&&(u?_=c+" = "+_+";":(_="return "+_+";",l===null&&(console.warn("THREE.TSL: Return statement used in an inline 'Fn()'. Define a layout struct to allow return values."),_="// "+_))),e.removeFlowTab().addFlowCode(e.tab+"	"+_+`

`+e.tab+`}

`)}else e.addFlowCode(`

`);return e.format(c,n,t)}}const Ss=Mn(hK).setParameterLength(2,3);qe("select",Ss);class sN extends un{static get type(){return"ContextNode"}constructor(e,t={}){super(),this.isContextNode=!0,this.node=e,this.value=t}getScope(){return this.node.getScope()}getNodeType(e){return this.node.getNodeType(e)}analyze(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}setup(e){const t=e.getContext();e.setContext({...e.context,...this.value}),this.node.build(e),e.setContext(t)}generate(e,t){const n=e.getContext();e.setContext({...e.context,...this.value});const r=this.node.build(e,t);return e.setContext(n),r}}const AA=Mn(sN).setParameterLength(1,2),F_=(i,e)=>AA(i,{nodeName:e});function oN(i,e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),F_(i,e)}qe("context",AA);qe("label",oN);qe("setName",F_);class Xf extends un{static get type(){return"VarNode"}constructor(e,t=null,n=!1){super(),this.node=e,this.name=t,this.global=!0,this.isVarNode=!0,this.readOnly=n,this.parents=!0,this.intent=!1}setIntent(e){return this.intent=e,this}getIntent(){return this.intent}getMemberType(e,t){return this.node.getMemberType(e,t)}getElementType(e){return this.node.getElementType(e)}getNodeType(e){return this.node.getNodeType(e)}getArrayCount(e){return this.node.getArrayCount(e)}build(...e){return this.intent===!0&&e[0].getNodeProperties(this).assign!==!0?this.node.build(...e):super.build(...e)}generate(e){const{node:t,name:n,readOnly:r}=this,{renderer:s}=e,o=s.backend.isWebGPUBackend===!0;let a=!1,l=!1;r&&(a=e.isDeterministic(t),l=o?r:a);const u=e.getVectorType(this.getNodeType(e)),c=t.build(e,u),A=e.getVarFromNode(this,n,u,void 0,l),m=e.getPropertyName(A);let _=m;if(l)if(o)_=a?`const ${m}`:`let ${m}`;else{const b=t.getArrayCount(e);_=`const ${e.getVar(A.type,m,b)}`}return e.addLineFlowCode(`${_} = ${c}`,this),m}}const pA=Mn(Xf),aN=(i,e=null)=>pA(i,e).toStack(),lN=(i,e=null)=>pA(i,e,!0).toStack(),uN=i=>iA()===null?i:pA(i).setIntent(!0).toStack();qe("toVar",aN);qe("toConst",lN);qe("toVarIntent",uN);const cN=i=>(console.warn('TSL: "temp( node )" is deprecated. Use "Var( node )" or "node.toVar()" instead.'),pA(i));qe("temp",cN);class fK extends un{static get type(){return"SubBuild"}constructor(e,t,n=null){super(n),this.node=e,this.name=t,this.isSubBuildNode=!0}getNodeType(e){if(this.nodeType!==null)return this.nodeType;e.addSubBuild(this.name);const t=this.node.getNodeType(e);return e.removeSubBuild(),t}build(e,...t){e.addSubBuild(this.name);const n=this.node.build(e,...t);return e.removeSubBuild(),n}}const S4=(i,e,t=null)=>$e(new fK($e(i),e,t));class dK extends un{static get type(){return"VaryingNode"}constructor(e,t=null){super(),this.node=e,this.name=t,this.isVaryingNode=!0,this.interpolationType=null,this.interpolationSampling=null,this.global=!0}setInterpolation(e,t=null){return this.interpolationType=e,this.interpolationSampling=t,this}getHash(e){return this.name||super.getHash(e)}getNodeType(e){return this.node.getNodeType(e)}setupVarying(e){const t=e.getNodeProperties(this);let n=t.varying;if(n===void 0){const r=this.name,s=this.getNodeType(e),o=this.interpolationType,a=this.interpolationSampling;t.varying=n=e.getVaryingFromNode(this,r,s,o,a),t.node=S4(this.node,"VERTEX")}return n.needsInterpolation||(n.needsInterpolation=e.shaderStage==="fragment"),n}setup(e){this.setupVarying(e),e.flowNodeFromShaderStage(zh.VERTEX,this.node)}analyze(e){this.setupVarying(e),e.flowNodeFromShaderStage(zh.VERTEX,this.node)}generate(e){const t=e.getSubBuildProperty("property",e.currentStack),n=e.getNodeProperties(this),r=this.setupVarying(e);if(n[t]===void 0){const s=this.getNodeType(e),o=e.getPropertyName(r,zh.VERTEX);e.flowNodeFromShaderStage(zh.VERTEX,n.node,s,o),n[t]=o}return e.getPropertyName(r)}}const bl=Mn(dK).setParameterLength(1,2),hN=i=>bl(i);qe("toVarying",bl);qe("toVertexStage",hN);qe("varying",(...i)=>(console.warn("THREE.TSL: .varying() has been renamed to .toVarying()."),bl(...i)));qe("vertexStage",(...i)=>(console.warn("THREE.TSL: .vertexStage() has been renamed to .toVertexStage()."),bl(...i)));const fN=Se(([i])=>{const e=i.mul(.9478672986).add(.0521327014).pow(2.4),t=i.mul(.0773993808),n=i.lessThanEqual(.04045);return _i(e,t,n)}).setLayout({name:"sRGBTransferEOTF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),dN=Se(([i])=>{const e=i.pow(.41666).mul(1.055).sub(.055),t=i.mul(12.92),n=i.lessThanEqual(.0031308);return _i(e,t,n)}).setLayout({name:"sRGBTransferOETF",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),U_="WorkingColorSpace",AK="OutputColorSpace";class O_ extends Zr{static get type(){return"ColorSpaceNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.source=t,this.target=n}resolveColorSpace(e,t){return t===U_?Sn.workingColorSpace:t===AK?e.context.outputColorSpace||e.renderer.outputColorSpace:t}setup(e){const{colorNode:t}=this,n=this.resolveColorSpace(e,this.source),r=this.resolveColorSpace(e,this.target);let s=t;return Sn.enabled===!1||n===r||!n||!r||(Sn.getTransfer(n)===qt&&(s=sn(fN(s.rgb),s.a)),Sn.getPrimaries(n)!==Sn.getPrimaries(r)&&(s=sn(no(Sn._getMatrix(new Fn,n,r)).mul(s.rgb),s.a)),Sn.getTransfer(r)===qt&&(s=sn(dN(s.rgb),s.a))),s}}const AN=(i,e)=>$e(new O_($e(i),U_,e)),mA=(i,e)=>$e(new O_($e(i),e,U_)),pK=(i,e,t)=>$e(new O_($e(i),e,t));qe("workingToColorSpace",AN);qe("colorSpaceToWorking",mA);let mK=class extends Dc{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}};class pN extends un{static get type(){return"ReferenceBaseNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.updateType=qn.OBJECT}setGroup(e){return this.group=e,this}element(e){return $e(new mK(this,$e(e)))}setNodeType(e){const t=on(null,e).getSelf();this.group!==null&&t.setGroup(this.group),this.node=t}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const gK=(i,e,t)=>$e(new pN(i,e,t));class yK extends pN{static get type(){return"RendererReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.renderer=n,this.setGroup(pn)}updateReference(e){return this.reference=this.renderer!==null?this.renderer:e.renderer,this.reference}}const mN=(i,e,t=null)=>$e(new yK(i,e,t));class vK extends Zr{static get type(){return"ToneMappingNode"}constructor(e,t=yN,n=null){super("vec3"),this.toneMapping=e,this.exposureNode=t,this.colorNode=n}customCacheKey(){return jd(this.toneMapping)}setup(e){const t=this.colorNode||e.context.color,n=this.toneMapping;if(n===eo)return t;let r=null;const s=e.renderer.library.getToneMappingFunction(n);return s!==null?r=sn(s(t.rgb,this.exposureNode),t.a):(console.error("ToneMappingNode: Unsupported Tone Mapping configuration.",n),r=t),r}}const gN=(i,e,t)=>$e(new vK(i,$e(e),$e(t))),yN=mN("toneMappingExposure","float");qe("toneMapping",(i,e,t)=>gN(e,t,i));class _K extends h_{static get type(){return"BufferAttributeNode"}constructor(e,t=null,n=0,r=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferStride=n,this.bufferOffset=r,this.usage=q4,this.instanced=!1,this.attribute=null,this.global=!0,e&&e.isBufferAttribute===!0&&(this.attribute=e,this.usage=e.usage,this.instanced=e.isInstancedBufferAttribute)}getHash(e){if(this.bufferStride===0&&this.bufferOffset===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getNodeType(e){return this.bufferType===null&&(this.bufferType=e.getTypeFromAttribute(this.attribute)),this.bufferType}setup(e){if(this.attribute!==null)return;const t=this.getNodeType(e),n=this.value,r=e.getTypeLength(t),s=this.bufferStride||r,o=this.bufferOffset,a=n.isInterleavedBuffer===!0?n:new u5(n,s),l=new bo(a,r,o);a.setUsage(this.usage),this.attribute=l,this.attribute.isInstancedBufferAttribute=this.instanced}generate(e){const t=this.getNodeType(e),n=e.getBufferAttributeFromNode(this,t),r=e.getPropertyName(n);let s=null;return e.shaderStage==="vertex"||e.shaderStage==="compute"?(this.name=r,s=r):s=bl(this).build(e,t),s}getInputType(){return"bufferAttribute"}setUsage(e){return this.usage=e,this.attribute&&this.attribute.isBufferAttribute===!0&&(this.attribute.usage=e),this}setInstanced(e){return this.instanced=e,this}}const c6=(i,e=null,t=0,n=0)=>$e(new _K(i,e,t,n)),vN=(i,e=null,t=0,n=0)=>c6(i,e,t,n).setUsage(D2),e9=(i,e=null,t=0,n=0)=>c6(i,e,t,n).setInstanced(!0),py=(i,e=null,t=0,n=0)=>vN(i,e,t,n).setInstanced(!0);qe("toAttribute",i=>c6(i.value));class xK extends un{static get type(){return"ComputeNode"}constructor(e,t){super("void"),this.isComputeNode=!0,this.computeNode=e,this.workgroupSize=t,this.count=null,this.version=1,this.name="",this.updateBeforeType=qn.OBJECT,this.onInitFunction=null}setCount(e){return this.count=e,this}getCount(){return this.count}dispose(){this.dispatchEvent({type:"dispose"})}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}onInit(e){return this.onInitFunction=e,this}updateBefore({renderer:e}){e.compute(this)}setup(e){const t=this.computeNode.build(e);if(t){const n=e.getNodeProperties(this);n.outputComputeNode=t.outputNode,t.outputNode=null}return t}generate(e,t){const{shaderStage:n}=e;if(n==="compute"){const r=this.computeNode.build(e,"void");r!==""&&e.addLineFlowCode(r,this)}else{const s=e.getNodeProperties(this).outputComputeNode;if(s)return s.build(e,t)}}}const k_=(i,e=[64])=>{(e.length===0||e.length>3)&&console.error("THREE.TSL: compute() workgroupSize must have 1, 2, or 3 elements");for(let t=0;t<e.length;t++){const n=e[t];(typeof n!="number"||n<=0||!Number.isInteger(n))&&console.error(`THREE.TSL: compute() workgroupSize element at index [ ${t} ] must be a positive integer`)}for(;e.length<3;)e.push(1);return $e(new xK($e(i),e))},_N=(i,e,t)=>k_(i,t).setCount(e);qe("compute",_N);qe("computeKernel",k_);class bK extends un{static get type(){return"CacheNode"}constructor(e,t=!0){super(),this.node=e,this.parent=t,this.isCacheNode=!0}getNodeType(e){const t=e.getCache(),n=e.getCacheFromNode(this,this.parent);e.setCache(n);const r=this.node.getNodeType(e);return e.setCache(t),r}build(e,...t){const n=e.getCache(),r=e.getCacheFromNode(this,this.parent);e.setCache(r);const s=this.node.build(e,...t);return e.setCache(n),s}}const t8=(i,e)=>$e(new bK($e(i),e));qe("cache",t8);class SK extends un{static get type(){return"BypassNode"}constructor(e,t){super(),this.isBypassNode=!0,this.outputNode=e,this.callNode=t}getNodeType(e){return this.outputNode.getNodeType(e)}generate(e){const t=this.callNode.build(e,"void");return t!==""&&e.addLineFlowCode(t,this),this.outputNode.build(e)}}const xN=Mn(SK).setParameterLength(2);qe("bypass",xN);class bN extends un{static get type(){return"RemapNode"}constructor(e,t,n,r=ae(0),s=ae(1)){super(),this.node=e,this.inLowNode=t,this.inHighNode=n,this.outLowNode=r,this.outHighNode=s,this.doClamp=!0}setup(){const{node:e,inLowNode:t,inHighNode:n,outLowNode:r,outHighNode:s,doClamp:o}=this;let a=e.sub(t).div(n.sub(t));return o===!0&&(a=a.clamp()),a.mul(s.sub(r)).add(r)}}const SN=Mn(bN,null,null,{doClamp:!1}).setParameterLength(3,5),TN=Mn(bN).setParameterLength(3,5);qe("remap",SN);qe("remapClamp",TN);class Qf extends un{static get type(){return"ExpressionNode"}constructor(e="",t="void"){super(t),this.snippet=e}generate(e,t){const n=this.getNodeType(e),r=this.snippet;if(n==="void")e.addLineFlowCode(r,this);else return e.format(r,n,t)}}const f1=Mn(Qf).setParameterLength(1,2),wN=i=>(i?Ss(i,f1("discard")):f1("discard")).toStack(),TK=()=>f1("return").toStack();qe("discard",wN);class wK extends Zr{static get type(){return"RenderOutputNode"}constructor(e,t,n){super("vec4"),this.colorNode=e,this.toneMapping=t,this.outputColorSpace=n,this.isRenderOutputNode=!0}setup({context:e}){let t=this.colorNode||e.color;const n=(this.toneMapping!==null?this.toneMapping:e.toneMapping)||eo,r=(this.outputColorSpace!==null?this.outputColorSpace:e.outputColorSpace)||vo;return n!==eo&&(t=t.toneMapping(n)),r!==vo&&r!==Sn.workingColorSpace&&(t=t.workingToColorSpace(r)),t}}const MN=(i,e=null,t=null)=>$e(new wK($e(i),e,t));qe("renderOutput",MN);class MK extends Zr{static get type(){return"DebugNode"}constructor(e,t=null){super(),this.node=e,this.callback=t}getNodeType(e){return this.node.getNodeType(e)}setup(e){return this.node.build(e)}analyze(e){return this.node.build(e)}generate(e){const t=this.callback,n=this.node.build(e),r="--- TSL debug - "+e.shaderStage+" shader ---",s="-".repeat(r.length);let o="";return o+="// #"+r+`#
`,o+=e.flow.code.replace(/^\t/mg,"")+`
`,o+="/* ... */ "+n+` /* ... */
`,o+="// #"+s+`#
`,t!==null?t(e,o):console.log(o),n}}const EN=(i,e=null)=>$e(new MK($e(i),e)).toStack();qe("debug",EN);function EK(i){console.warn("THREE.TSL: AddNodeElement has been removed in favor of tree-shaking. Trying add",i)}class RN extends un{static get type(){return"AttributeNode"}constructor(e,t=null){super(t),this.global=!0,this._attributeName=e}getHash(e){return this.getAttributeName(e)}getNodeType(e){let t=this.nodeType;if(t===null){const n=this.getAttributeName(e);if(e.hasGeometryAttribute(n)){const r=e.geometry.getAttribute(n);t=e.getTypeFromAttribute(r)}else t="float"}return t}setAttributeName(e){return this._attributeName=e,this}getAttributeName(){return this._attributeName}generate(e){const t=this.getAttributeName(e),n=this.getNodeType(e);if(e.hasGeometryAttribute(t)===!0){const s=e.geometry.getAttribute(t),o=e.getTypeFromAttribute(s),a=e.getAttribute(t,o);return e.shaderStage==="vertex"?e.format(a.name,o,n):bl(this).build(e,n)}else return console.warn(`AttributeNode: Vertex attribute "${t}" not found on geometry.`),e.generateConst(n)}serialize(e){super.serialize(e),e.global=this.global,e._attributeName=this._attributeName}deserialize(e){super.deserialize(e),this.global=e.global,this._attributeName=e._attributeName}}const d1=(i,e=null)=>$e(new RN(i,e)),Vi=(i=0)=>d1("uv"+(i>0?i:""),"vec2");class RK extends un{static get type(){return"TextureSizeNode"}constructor(e,t=null){super("uvec2"),this.isTextureSizeNode=!0,this.textureNode=e,this.levelNode=t}generate(e,t){const n=this.textureNode.build(e,"property"),r=this.levelNode===null?"0":this.levelNode.build(e,"int");return e.format(`${e.getMethod("textureDimensions")}( ${n}, ${r} )`,this.getNodeType(e),t)}}const cu=Mn(RK).setParameterLength(1,2);class CK extends l6{static get type(){return"MaxMipLevelNode"}constructor(e){super(0),this._textureNode=e,this.updateType=qn.FRAME}get textureNode(){return this._textureNode}get texture(){return this._textureNode.value}update(){const e=this.texture,t=e.images,n=t&&t.length>0?t[0]&&t[0].image||t[0]:e.image;if(n&&n.width!==void 0){const{width:r,height:s}=n;this.value=Math.log2(Math.max(r,s))}}}const V_=Mn(CK).setParameterLength(1),z_=new ur;class ml extends l6{static get type(){return"TextureNode"}constructor(e=z_,t=null,n=null,r=null){super(e),this.isTextureNode=!0,this.uvNode=t,this.levelNode=n,this.biasNode=r,this.compareNode=null,this.depthNode=null,this.gradNode=null,this.sampler=!0,this.updateMatrix=!1,this.updateType=qn.NONE,this.referenceNode=null,this._value=e,this._matrixUniform=null,this.setUpdateMatrix(t===null)}set value(e){this.referenceNode?this.referenceNode.value=e:this._value=e}get value(){return this.referenceNode?this.referenceNode.value:this._value}getUniformHash(){return this.value.uuid}getNodeType(){return this.value.isDepthTexture===!0?"float":this.value.type===Oi?"uvec4":this.value.type===as?"ivec4":"vec4"}getInputType(){return"texture"}getDefaultUV(){return Vi(this.value.channel)}updateReference(){return this.value}getTransformedUV(e){return this._matrixUniform===null&&(this._matrixUniform=on(this.value.matrix)),this._matrixUniform.mul(be(e,1)).xy}setUpdateMatrix(e){return this.updateMatrix=e,this.updateType=e?qn.OBJECT:qn.NONE,this}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.image instanceof ImageBitmap&&n.flipY===!0||n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0||n.isDepthTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(me(cu(this,this.levelNode).y).sub(t.y).sub(1))),t}setup(e){const t=e.getNodeProperties(this);t.referenceNode=this.referenceNode;const n=this.value;if(!n||n.isTexture!==!0)throw new Error("THREE.TSL: `texture( value )` function expects a valid instance of THREE.Texture().");let r=this.uvNode;(r===null||e.context.forceUVContext===!0)&&e.context.getUV&&(r=e.context.getUV(this,e)),r||(r=this.getDefaultUV()),this.updateMatrix===!0&&(r=this.getTransformedUV(r)),r=this.setupUV(e,r);let s=this.levelNode;s===null&&e.context.getTextureLevel&&(s=e.context.getTextureLevel(this)),t.uvNode=r,t.levelNode=s,t.biasNode=this.biasNode,t.compareNode=this.compareNode,t.gradNode=this.gradNode,t.depthNode=this.depthNode}generateUV(e,t){return t.build(e,this.sampler===!0?"vec2":"ivec2")}generateSnippet(e,t,n,r,s,o,a,l){const u=this.value;let c;return r?c=e.generateTextureLevel(u,t,n,r,o):s?c=e.generateTextureBias(u,t,n,s,o):l?c=e.generateTextureGrad(u,t,n,l,o):a?c=e.generateTextureCompare(u,t,n,a,o):this.sampler===!1?c=e.generateTextureLoad(u,t,n,o):c=e.generateTexture(u,t,n,o),c}generate(e,t){const n=this.value,r=e.getNodeProperties(this),s=super.generate(e,"property");if(/^sampler/.test(t))return s+"_sampler";if(e.isReference(t))return s;{const o=e.getDataFromNode(this);let a=o.propertyName;if(a===void 0){const{uvNode:c,levelNode:A,biasNode:m,compareNode:_,depthNode:b,gradNode:M}=r,w=this.generateUV(e,c),T=A?A.build(e,"float"):null,N=m?m.build(e,"float"):null,P=b?b.build(e,"int"):null,I=_?_.build(e,"float"):null,B=M?[M[0].build(e,"vec2"),M[1].build(e,"vec2")]:null,F=e.getVarFromNode(this);a=e.getPropertyName(F);const O=this.generateSnippet(e,s,w,T,N,P,I,B);e.addLineFlowCode(`${a} = ${O}`,this),o.snippet=O,o.propertyName=a}let l=a;const u=this.getNodeType(e);return e.needsToWorkingColorSpace(n)&&(l=mA(f1(l,u),n.colorSpace).setup(e).build(e,u)),e.format(l,u,t)}}setSampler(e){return this.sampler=e,this}getSampler(){return this.sampler}uv(e){return console.warn("THREE.TextureNode: .uv() has been renamed. Use .sample() instead."),this.sample(e)}sample(e){const t=this.clone();return t.uvNode=$e(e),t.referenceNode=this.getSelf(),$e(t)}load(e){return this.sample(e).setSampler(!1)}blur(e){const t=this.clone();t.biasNode=$e(e).mul(V_(t)),t.referenceNode=this.getSelf();const n=t.value;return t.generateMipmaps===!1&&(n&&n.generateMipmaps===!1||n.minFilter===qi||n.magFilter===qi)&&(console.warn("THREE.TSL: texture().blur() requires mipmaps and sampling. Use .generateMipmaps=true and .minFilter/.magFilter=THREE.LinearFilter in the Texture."),t.biasNode=null),$e(t)}level(e){const t=this.clone();return t.levelNode=$e(e),t.referenceNode=this.getSelf(),$e(t)}size(e){return cu(this,e)}bias(e){const t=this.clone();return t.biasNode=$e(e),t.referenceNode=this.getSelf(),$e(t)}compare(e){const t=this.clone();return t.compareNode=$e(e),t.referenceNode=this.getSelf(),$e(t)}grad(e,t){const n=this.clone();return n.gradNode=[$e(e),$e(t)],n.referenceNode=this.getSelf(),$e(n)}depth(e){const t=this.clone();return t.depthNode=$e(e),t.referenceNode=this.getSelf(),$e(t)}serialize(e){super.serialize(e),e.value=this.value.toJSON(e.meta).uuid,e.sampler=this.sampler,e.updateMatrix=this.updateMatrix,e.updateType=this.updateType}deserialize(e){super.deserialize(e),this.value=e.meta.textures[e.value],this.sampler=e.sampler,this.updateMatrix=e.updateMatrix,this.updateType=e.updateType}update(){const e=this.value,t=this._matrixUniform;t!==null&&(t.value=e.matrix),e.matrixAutoUpdate===!0&&e.updateMatrix()}clone(){const e=new this.constructor(this.value,this.uvNode,this.levelNode,this.biasNode);return e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e}}const PK=Mn(ml).setParameterLength(1,4).setName("texture"),ni=(i=z_,e=null,t=null,n=null)=>{let r;return i&&i.isTextureNode===!0?(r=$e(i.clone()),r.referenceNode=i.getSelf(),e!==null&&(r.uvNode=$e(e)),t!==null&&(r.levelNode=$e(t)),n!==null&&(r.biasNode=$e(n))):r=PK(i,e,t,n),r},NK=(i=z_)=>ni(i),Tr=(...i)=>ni(...i).setSampler(!1),IK=i=>(i.isNode===!0?i:ni(i)).convert("sampler"),LK=i=>(i.isNode===!0?i:ni(i)).convert("samplerComparison");class G_ extends l6{static get type(){return"BufferNode"}constructor(e,t,n=0){super(e,t),this.isBufferNode=!0,this.bufferType=t,this.bufferCount=n}getElementType(e){return this.getNodeType(e)}getInputType(){return"buffer"}}const h6=(i,e,t)=>$e(new G_(i,e,t));class DK extends Dc{static get type(){return"UniformArrayElementNode"}constructor(e,t){super(e,t),this.isArrayBufferElementNode=!0}generate(e){const t=super.generate(e),n=this.getNodeType(),r=this.node.getPaddedType();return e.format(t,r,n)}}class BK extends G_{static get type(){return"UniformArrayNode"}constructor(e,t=null){super(null),this.array=e,this.elementType=t===null?ru(e[0]):t,this.paddedType=this.getPaddedType(),this.updateType=qn.RENDER,this.isArrayBufferNode=!0}getNodeType(){return this.paddedType}getElementType(){return this.elementType}getPaddedType(){const e=this.elementType;let t="vec4";return e==="mat2"?t="mat2":/mat/.test(e)===!0?t="mat4":e.charAt(0)==="i"?t="ivec4":e.charAt(0)==="u"&&(t="uvec4"),t}update(){const{array:e,value:t}=this,n=this.elementType;if(n==="float"||n==="int"||n==="uint")for(let r=0;r<e.length;r++){const s=r*4;t[s]=e[r]}else if(n==="color")for(let r=0;r<e.length;r++){const s=r*4,o=e[r];t[s]=o.r,t[s+1]=o.g,t[s+2]=o.b||0}else if(n==="mat2")for(let r=0;r<e.length;r++){const s=r*4,o=e[r];t[s]=o.elements[0],t[s+1]=o.elements[1],t[s+2]=o.elements[2],t[s+3]=o.elements[3]}else if(n==="mat3")for(let r=0;r<e.length;r++){const s=r*16,o=e[r];t[s]=o.elements[0],t[s+1]=o.elements[1],t[s+2]=o.elements[2],t[s+4]=o.elements[3],t[s+5]=o.elements[4],t[s+6]=o.elements[5],t[s+8]=o.elements[6],t[s+9]=o.elements[7],t[s+10]=o.elements[8],t[s+15]=1}else if(n==="mat4")for(let r=0;r<e.length;r++){const s=r*16,o=e[r];for(let a=0;a<o.elements.length;a++)t[s+a]=o.elements[a]}else for(let r=0;r<e.length;r++){const s=r*4,o=e[r];t[s]=o.x,t[s+1]=o.y,t[s+2]=o.z||0,t[s+3]=o.w||0}}setup(e){const t=this.array.length,n=this.elementType;let r=Float32Array;const s=this.paddedType,o=e.getTypeLength(s);return n.charAt(0)==="i"&&(r=Int32Array),n.charAt(0)==="u"&&(r=Uint32Array),this.value=new r(t*o),this.bufferCount=t,this.bufferType=s,super.setup(e)}element(e){return $e(new DK(this,$e(e)))}}const Ga=(i,e)=>$e(new BK(i,e));class FK extends un{constructor(e){super("float"),this.name=e,this.isBuiltinNode=!0}generate(){return this.name}}const f6=Mn(FK).setParameterLength(1),gA=on(0,"uint").setName("u_cameraIndex").setGroup(lA("cameraIndex")).toVarying("v_cameraIndex"),eu=on("float").setName("cameraNear").setGroup(pn).onRenderUpdate(({camera:i})=>i.near),tu=on("float").setName("cameraFar").setGroup(pn).onRenderUpdate(({camera:i})=>i.far),Bc=Se(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrix);e=Ga(t).setGroup(pn).setName("cameraProjectionMatrices").element(i.isMultiViewCamera?f6("gl_ViewID_OVR"):gA).toVar("cameraProjectionMatrix")}else e=on("mat4").setName("cameraProjectionMatrix").setGroup(pn).onRenderUpdate(({camera:t})=>t.projectionMatrix);return e}).once()(),UK=Se(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.projectionMatrixInverse);e=Ga(t).setGroup(pn).setName("cameraProjectionMatricesInverse").element(i.isMultiViewCamera?f6("gl_ViewID_OVR"):gA).toVar("cameraProjectionMatrixInverse")}else e=on("mat4").setName("cameraProjectionMatrixInverse").setGroup(pn).onRenderUpdate(({camera:t})=>t.projectionMatrixInverse);return e}).once()(),s0=Se(({camera:i})=>{let e;if(i.isArrayCamera&&i.cameras.length>0){const t=[];for(const r of i.cameras)t.push(r.matrixWorldInverse);e=Ga(t).setGroup(pn).setName("cameraViewMatrices").element(i.isMultiViewCamera?f6("gl_ViewID_OVR"):gA).toVar("cameraViewMatrix")}else e=on("mat4").setName("cameraViewMatrix").setGroup(pn).onRenderUpdate(({camera:t})=>t.matrixWorldInverse);return e}).once()(),OK=on("mat4").setName("cameraWorldMatrix").setGroup(pn).onRenderUpdate(({camera:i})=>i.matrixWorld),kK=on("mat3").setName("cameraNormalMatrix").setGroup(pn).onRenderUpdate(({camera:i})=>i.normalMatrix),CN=on(new J).setName("cameraPosition").setGroup(pn).onRenderUpdate(({camera:i},e)=>e.value.setFromMatrixPosition(i.matrixWorld)),tw=new Kr;class ci extends un{static get type(){return"Object3DNode"}constructor(e,t=null){super(),this.scope=e,this.object3d=t,this.updateType=qn.OBJECT,this.uniformNode=new l6(null)}getNodeType(){const e=this.scope;if(e===ci.WORLD_MATRIX)return"mat4";if(e===ci.POSITION||e===ci.VIEW_POSITION||e===ci.DIRECTION||e===ci.SCALE)return"vec3";if(e===ci.RADIUS)return"float"}update(e){const t=this.object3d,n=this.uniformNode,r=this.scope;if(r===ci.WORLD_MATRIX)n.value=t.matrixWorld;else if(r===ci.POSITION)n.value=n.value||new J,n.value.setFromMatrixPosition(t.matrixWorld);else if(r===ci.SCALE)n.value=n.value||new J,n.value.setFromMatrixScale(t.matrixWorld);else if(r===ci.DIRECTION)n.value=n.value||new J,t.getWorldDirection(n.value);else if(r===ci.VIEW_POSITION){const s=e.camera;n.value=n.value||new J,n.value.setFromMatrixPosition(t.matrixWorld),n.value.applyMatrix4(s.matrixWorldInverse)}else if(r===ci.RADIUS){const s=e.object.geometry;s.boundingSphere===null&&s.computeBoundingSphere(),tw.copy(s.boundingSphere).applyMatrix4(t.matrixWorld),n.value=tw.radius}}generate(e){const t=this.scope;return t===ci.WORLD_MATRIX?this.uniformNode.nodeType="mat4":t===ci.POSITION||t===ci.VIEW_POSITION||t===ci.DIRECTION||t===ci.SCALE?this.uniformNode.nodeType="vec3":t===ci.RADIUS&&(this.uniformNode.nodeType="float"),this.uniformNode.build(e)}serialize(e){super.serialize(e),e.scope=this.scope}deserialize(e){super.deserialize(e),this.scope=e.scope}}ci.WORLD_MATRIX="worldMatrix";ci.POSITION="position";ci.SCALE="scale";ci.VIEW_POSITION="viewPosition";ci.DIRECTION="direction";ci.RADIUS="radius";const VK=Mn(ci,ci.DIRECTION).setParameterLength(1),zK=Mn(ci,ci.WORLD_MATRIX).setParameterLength(1),PN=Mn(ci,ci.POSITION).setParameterLength(1),GK=Mn(ci,ci.SCALE).setParameterLength(1),qK=Mn(ci,ci.VIEW_POSITION).setParameterLength(1),HK=Mn(ci,ci.RADIUS).setParameterLength(1);class Ja extends ci{static get type(){return"ModelNode"}constructor(e){super(e)}update(e){this.object3d=e.object,super.update(e)}}const WK=wt(Ja,Ja.DIRECTION),Wa=wt(Ja,Ja.WORLD_MATRIX),jK=wt(Ja,Ja.POSITION),$K=wt(Ja,Ja.SCALE),XK=wt(Ja,Ja.VIEW_POSITION),QK=wt(Ja,Ja.RADIUS),NN=on(new Fn).onObjectUpdate(({object:i},e)=>e.value.getNormalMatrix(i.matrixWorld)),YK=on(new Wt).onObjectUpdate(({object:i},e)=>e.value.copy(i.matrixWorld).invert()),Fc=Se(i=>i.renderer.overrideNodes.modelViewMatrix||IN).once()().toVar("modelViewMatrix"),IN=s0.mul(Wa),my=Se(i=>(i.context.isHighPrecisionModelViewMatrix=!0,on("mat4").onObjectUpdate(({object:e,camera:t})=>e.modelViewMatrix.multiplyMatrices(t.matrixWorldInverse,e.matrixWorld)))).once()().toVar("highpModelViewMatrix"),gy=Se(i=>{const e=i.context.isHighPrecisionModelViewMatrix;return on("mat3").onObjectUpdate(({object:t,camera:n})=>(e!==!0&&t.modelViewMatrix.multiplyMatrices(n.matrixWorldInverse,t.matrixWorld),t.normalMatrix.getNormalMatrix(t.modelViewMatrix)))}).once()().toVar("highpModelNormalViewMatrix"),d6=d1("position","vec3"),Er=d6.toVarying("positionLocal"),t9=d6.toVarying("positionPrevious"),cl=Se(i=>Wa.mul(Er).xyz.toVarying(i.getSubBuildProperty("v_positionWorld")),"vec3").once(["POSITION"])(),q_=Se(()=>Er.transformDirection(Wa).toVarying("v_positionWorldDirection").normalize().toVar("positionWorldDirection"),"vec3").once(["POSITION"])(),Rr=Se(i=>i.context.setupPositionView().toVarying("v_positionView"),"vec3").once(["POSITION"])(),sr=Rr.negate().toVarying("v_positionViewDirection").normalize().toVar("positionViewDirection");class KK extends un{static get type(){return"FrontFacingNode"}constructor(){super("bool"),this.isFrontFacingNode=!0}generate(e){if(e.shaderStage!=="fragment")return"true";const{renderer:t,material:n}=e;return t.coordinateSystem===bs&&n.side===Bi?"false":e.getFrontFacing()}}const LN=wt(KK),H_=ae(LN).mul(2).sub(1),d5=Se(([i],{material:e})=>{const t=e.side;return t===Bi?i=i.mul(-1):t===Mr&&(i=i.mul(H_)),i}),yA=d1("normal","vec3"),Zo=Se(i=>i.geometry.hasAttribute("normal")===!1?(console.warn('THREE.TSL: Vertex attribute "normal" not found on geometry.'),be(0,1,0)):yA,"vec3").once()().toVar("normalLocal"),DN=Rr.dFdx().cross(Rr.dFdy()).normalize().toVar("normalFlat"),e5=Se(i=>{let e;return i.material.flatShading===!0?e=DN:e=W_(Zo).toVarying("v_normalViewGeometry").normalize(),e},"vec3").once()().toVar("normalViewGeometry"),BN=Se(i=>{let e=e5.transformDirection(s0);return i.material.flatShading!==!0&&(e=e.toVarying("v_normalWorldGeometry")),e.normalize().toVar("normalWorldGeometry")},"vec3").once()(),Li=Se(({subBuildFn:i,material:e,context:t})=>{let n;return i==="NORMAL"||i==="VERTEX"?(n=e5,e.flatShading!==!0&&(n=d5(n))):n=t.setupNormal().context({getUV:null}),n},"vec3").once(["NORMAL","VERTEX"])().toVar("normalView"),Tu=Li.transformDirection(s0).toVar("normalWorld"),k2=Se(({subBuildFn:i,context:e})=>{let t;return i==="NORMAL"||i==="VERTEX"?t=Li:t=e.setupClearcoatNormal().context({getUV:null}),t},"vec3").once(["NORMAL","VERTEX"])().toVar("clearcoatNormalView"),FN=Se(([i,e=Wa])=>{const t=no(e),n=i.div(be(t[0].dot(t[0]),t[1].dot(t[1]),t[2].dot(t[2])));return t.mul(n).xyz}),W_=Se(([i],e)=>{const t=e.renderer.overrideNodes.modelNormalViewMatrix;if(t!==null)return t.transformDirection(i);const n=NN.mul(i);return s0.transformDirection(n)}),ZK=Se(()=>(console.warn('THREE.TSL: "transformedNormalView" is deprecated. Use "normalView" instead.'),Li)).once(["NORMAL","VERTEX"])(),JK=Se(()=>(console.warn('THREE.TSL: "transformedNormalWorld" is deprecated. Use "normalWorld" instead.'),Tu)).once(["NORMAL","VERTEX"])(),eZ=Se(()=>(console.warn('THREE.TSL: "transformedClearcoatNormalView" is deprecated. Use "clearcoatNormalView" instead.'),k2)).once(["NORMAL","VERTEX"])(),nw=new Ts,mm=new Wt,UN=on(0).onReference(({material:i})=>i).onObjectUpdate(({material:i})=>i.refractionRatio),Yf=on(1).onReference(({material:i})=>i).onObjectUpdate(function({material:i,scene:e}){return i.envMap?i.envMapIntensity:e.environmentIntensity}),j_=on(new Wt).onReference(function(i){return i.material}).onObjectUpdate(function({material:i,scene:e}){const t=e.environment!==null&&i.envMap===null?e.environmentRotation:i.envMapRotation;return t?(nw.copy(t),mm.makeRotationFromEuler(nw)):mm.identity(),mm}),ON=sr.negate().reflect(Li),kN=sr.negate().refract(Li,UN),VN=ON.transformDirection(s0).toVar("reflectVector"),zN=kN.transformDirection(s0).toVar("reflectVector"),GN=new vu;class tZ extends ml{static get type(){return"CubeTextureNode"}constructor(e,t=null,n=null,r=null){super(e,t,n,r),this.isCubeTextureNode=!0}getInputType(){return"cubeTexture"}getDefaultUV(){const e=this.value;return e.mapping===_a?VN:e.mapping===Xa?zN:(console.error('THREE.CubeTextureNode: Mapping "%s" not supported.',e.mapping),be(0,0,0))}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return(e.renderer.coordinateSystem===Qa||!n.isRenderTargetTexture)&&(t=be(t.x.negate(),t.yz)),j_.mul(t)}generateUV(e,t){return t.build(e,"vec3")}}const $_=Mn(tZ).setParameterLength(1,4).setName("cubeTexture"),t5=(i=GN,e=null,t=null,n=null)=>{let r;return i&&i.isCubeTextureNode===!0?(r=$e(i.clone()),r.referenceNode=i.getSelf(),e!==null&&(r.uvNode=$e(e)),t!==null&&(r.levelNode=$e(t)),n!==null&&(r.biasNode=$e(n))):r=$_(i,e,t,n),r},nZ=(i=GN)=>$_(i);class iZ extends Dc{static get type(){return"ReferenceElementNode"}constructor(e,t){super(e,t),this.referenceNode=e,this.isReferenceElementNode=!0}getNodeType(){return this.referenceNode.uniformType}generate(e){const t=super.generate(e),n=this.referenceNode.getNodeType(),r=this.getNodeType();return e.format(t,n,r)}}class vA extends un{static get type(){return"ReferenceNode"}constructor(e,t,n=null,r=null){super(),this.property=e,this.uniformType=t,this.object=n,this.count=r,this.properties=e.split("."),this.reference=n,this.node=null,this.group=null,this.name=null,this.updateType=qn.OBJECT}element(e){return $e(new iZ(this,$e(e)))}setGroup(e){return this.group=e,this}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setNodeType(e){let t=null;this.count!==null?t=h6(null,e,this.count):Array.isArray(this.getValueFromReference())?t=Ga(null,e):e==="texture"?t=ni(null):e==="cubeTexture"?t=t5(null):t=on(null,e),this.group!==null&&t.setGroup(this.group),this.name!==null&&t.setName(this.name),this.node=t.getSelf()}getNodeType(e){return this.node===null&&(this.updateReference(e),this.updateValue()),this.node.getNodeType(e)}getValueFromReference(e=this.reference){const{properties:t}=this;let n=e[t[0]];for(let r=1;r<t.length;r++)n=n[t[r]];return n}updateReference(e){return this.reference=this.object!==null?this.object:e.object,this.reference}setup(){return this.updateValue(),this.node}update(){this.updateValue()}updateValue(){this.node===null&&this.setNodeType(this.uniformType);const e=this.getValueFromReference();Array.isArray(e)?this.node.array=e:this.node.value=e}}const Gi=(i,e,t)=>$e(new vA(i,e,t)),yy=(i,e,t,n)=>$e(new vA(i,e,n,t));class rZ extends vA{static get type(){return"MaterialReferenceNode"}constructor(e,t,n=null){super(e,t,n),this.material=n,this.isMaterialReferenceNode=!0}updateReference(e){return this.reference=this.material!==null?this.material:e.material,this.reference}}const Hl=(i,e,t=null)=>$e(new rZ(i,e,t)),qN=Vi(),sZ=Rr.dFdx(),oZ=Rr.dFdy(),HN=qN.dFdx(),WN=qN.dFdy(),jN=Li,$N=oZ.cross(jN),XN=jN.cross(sZ),vy=$N.mul(HN.x).add(XN.mul(WN.x)),_y=$N.mul(HN.y).add(XN.mul(WN.y)),iw=vy.dot(vy).max(_y.dot(_y)),QN=iw.equal(0).select(0,iw.inverseSqrt()),aZ=vy.mul(QN).toVar("tangentViewFrame"),lZ=_y.mul(QN).toVar("bitangentViewFrame"),_A=Se(i=>(i.geometry.hasAttribute("tangent")===!1&&i.geometry.computeTangents(),d1("tangent","vec4")))(),A6=_A.xyz.toVar("tangentLocal"),xA=Se(({subBuildFn:i,geometry:e,material:t})=>{let n;return i==="VERTEX"||e.hasAttribute("tangent")?n=Fc.mul(sn(A6,0)).xyz.toVarying("v_tangentView").normalize():n=aZ,t.flatShading!==!0&&(n=d5(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("tangentView"),YN=xA.transformDirection(s0).toVarying("v_tangentWorld").normalize().toVar("tangentWorld"),bA=Se(([i,e],{subBuildFn:t,material:n})=>{let r=i.mul(_A.w).xyz;return t==="NORMAL"&&n.flatShading!==!0&&(r=r.toVarying(e)),r}).once(["NORMAL"]),uZ=bA(yA.cross(_A),"v_bitangentGeometry").normalize().toVar("bitangentGeometry"),cZ=bA(Zo.cross(A6),"v_bitangentLocal").normalize().toVar("bitangentLocal"),KN=Se(({subBuildFn:i,geometry:e,material:t})=>{let n;return i==="VERTEX"||e.hasAttribute("tangent")?n=bA(Li.cross(xA),"v_bitangentView").normalize():n=lZ,t.flatShading!==!0&&(n=d5(n)),n},"vec3").once(["NORMAL","VERTEX"])().toVar("bitangentView"),hZ=bA(Tu.cross(YN),"v_bitangentWorld").normalize().toVar("bitangentWorld"),V2=no(xA,KN,Li).toVar("TBNViewMatrix"),ZN=sr.mul(V2),fZ=(i,e)=>i.sub(ZN.mul(e)),JN=Se(()=>{let i=X2.cross(sr);return i=i.cross(X2).normalize(),i=_i(i,Li,Z1.mul(el.oneMinus()).oneMinus().pow2().pow2()).normalize(),i}).once()();class dZ extends Zr{static get type(){return"NormalMapNode"}constructor(e,t=null){super("vec3"),this.node=e,this.scaleNode=t,this.normalMapType=fl}setup({material:e}){const{normalMapType:t,scaleNode:n}=this;let r=this.node.mul(2).sub(1);if(n!==null){let o=n;e.flatShading===!0&&(o=d5(o)),r=be(r.xy.mul(o),r.z)}let s=null;return t===tv?s=W_(r):t===fl?s=V2.mul(r).normalize():(console.error(`THREE.NodeMaterial: Unsupported normal map type: ${t}`),s=Li),s}}const xy=Mn(dZ).setParameterLength(1,2),AZ=Se(({textureNode:i,bumpScale:e})=>{const t=r=>i.cache().context({getUV:s=>r(s.uvNode||Vi()),forceUVContext:!0}),n=ae(t(r=>r));return Ke(ae(t(r=>r.add(r.dFdx()))).sub(n),ae(t(r=>r.add(r.dFdy()))).sub(n)).mul(e)}),pZ=Se(i=>{const{surf_pos:e,surf_norm:t,dHdxy:n}=i,r=e.dFdx().normalize(),s=e.dFdy().normalize(),o=t,a=s.cross(o),l=o.cross(r),u=r.dot(a).mul(H_),c=u.sign().mul(n.x.mul(a).add(n.y.mul(l)));return u.abs().mul(t).sub(c).normalize()});class mZ extends Zr{static get type(){return"BumpMapNode"}constructor(e,t=null){super("vec3"),this.textureNode=e,this.scaleNode=t}setup(){const e=this.scaleNode!==null?this.scaleNode:1,t=AZ({textureNode:this.textureNode,bumpScale:e});return pZ({surf_pos:Rr,surf_norm:Li,dHdxy:t})}}const X_=Mn(mZ).setParameterLength(1,2),rw=new Map;class je extends un{static get type(){return"MaterialNode"}constructor(e){super(),this.scope=e}getCache(e,t){let n=rw.get(e);return n===void 0&&(n=Hl(e,t),rw.set(e,n)),n}getFloat(e){return this.getCache(e,"float")}getColor(e){return this.getCache(e,"color")}getTexture(e){return this.getCache(e==="map"?"map":e+"Map","texture")}setup(e){const t=e.context.material,n=this.scope;let r=null;if(n===je.COLOR){const s=t.color!==void 0?this.getColor(n):be();t.map&&t.map.isTexture===!0?r=s.mul(this.getTexture("map")):r=s}else if(n===je.OPACITY){const s=this.getFloat(n);t.alphaMap&&t.alphaMap.isTexture===!0?r=s.mul(this.getTexture("alpha")):r=s}else if(n===je.SPECULAR_STRENGTH)t.specularMap&&t.specularMap.isTexture===!0?r=this.getTexture("specular").r:r=ae(1);else if(n===je.SPECULAR_INTENSITY){const s=this.getFloat(n);t.specularIntensityMap&&t.specularIntensityMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s}else if(n===je.SPECULAR_COLOR){const s=this.getColor(n);t.specularColorMap&&t.specularColorMap.isTexture===!0?r=s.mul(this.getTexture(n).rgb):r=s}else if(n===je.ROUGHNESS){const s=this.getFloat(n);t.roughnessMap&&t.roughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).g):r=s}else if(n===je.METALNESS){const s=this.getFloat(n);t.metalnessMap&&t.metalnessMap.isTexture===!0?r=s.mul(this.getTexture(n).b):r=s}else if(n===je.EMISSIVE){const s=this.getFloat("emissiveIntensity"),o=this.getColor(n).mul(s);t.emissiveMap&&t.emissiveMap.isTexture===!0?r=o.mul(this.getTexture(n)):r=o}else if(n===je.NORMAL)t.normalMap?(r=xy(this.getTexture("normal"),this.getCache("normalScale","vec2")),r.normalMapType=t.normalMapType):t.bumpMap?r=X_(this.getTexture("bump").r,this.getFloat("bumpScale")):r=Li;else if(n===je.CLEARCOAT){const s=this.getFloat(n);t.clearcoatMap&&t.clearcoatMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===je.CLEARCOAT_ROUGHNESS){const s=this.getFloat(n);t.clearcoatRoughnessMap&&t.clearcoatRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).r):r=s}else if(n===je.CLEARCOAT_NORMAL)t.clearcoatNormalMap?r=xy(this.getTexture(n),this.getCache(n+"Scale","vec2")):r=Li;else if(n===je.SHEEN){const s=this.getColor("sheenColor").mul(this.getFloat("sheen"));t.sheenColorMap&&t.sheenColorMap.isTexture===!0?r=s.mul(this.getTexture("sheenColor").rgb):r=s}else if(n===je.SHEEN_ROUGHNESS){const s=this.getFloat(n);t.sheenRoughnessMap&&t.sheenRoughnessMap.isTexture===!0?r=s.mul(this.getTexture(n).a):r=s,r=r.clamp(.07,1)}else if(n===je.ANISOTROPY)if(t.anisotropyMap&&t.anisotropyMap.isTexture===!0){const s=this.getTexture(n);r=sA(i4.x,i4.y,i4.y.negate(),i4.x).mul(s.rg.mul(2).sub(Ke(1)).normalize().mul(s.b))}else r=i4;else if(n===je.IRIDESCENCE_THICKNESS){const s=Gi("1","float",t.iridescenceThicknessRange);if(t.iridescenceThicknessMap){const o=Gi("0","float",t.iridescenceThicknessRange);r=s.sub(o).mul(this.getTexture(n).g).add(o)}else r=s}else if(n===je.TRANSMISSION){const s=this.getFloat(n);t.transmissionMap?r=s.mul(this.getTexture(n).r):r=s}else if(n===je.THICKNESS){const s=this.getFloat(n);t.thicknessMap?r=s.mul(this.getTexture(n).g):r=s}else if(n===je.IOR)r=this.getFloat(n);else if(n===je.LIGHT_MAP)r=this.getTexture(n).rgb.mul(this.getFloat("lightMapIntensity"));else if(n===je.AO)r=this.getTexture(n).r.sub(1).mul(this.getFloat("aoMapIntensity")).add(1);else if(n===je.LINE_DASH_OFFSET)r=t.dashOffset?this.getFloat(n):ae(0);else{const s=this.getNodeType(e);r=this.getCache(n,s)}return r}}je.ALPHA_TEST="alphaTest";je.COLOR="color";je.OPACITY="opacity";je.SHININESS="shininess";je.SPECULAR="specular";je.SPECULAR_STRENGTH="specularStrength";je.SPECULAR_INTENSITY="specularIntensity";je.SPECULAR_COLOR="specularColor";je.REFLECTIVITY="reflectivity";je.ROUGHNESS="roughness";je.METALNESS="metalness";je.NORMAL="normal";je.CLEARCOAT="clearcoat";je.CLEARCOAT_ROUGHNESS="clearcoatRoughness";je.CLEARCOAT_NORMAL="clearcoatNormal";je.EMISSIVE="emissive";je.ROTATION="rotation";je.SHEEN="sheen";je.SHEEN_ROUGHNESS="sheenRoughness";je.ANISOTROPY="anisotropy";je.IRIDESCENCE="iridescence";je.IRIDESCENCE_IOR="iridescenceIOR";je.IRIDESCENCE_THICKNESS="iridescenceThickness";je.IOR="ior";je.TRANSMISSION="transmission";je.THICKNESS="thickness";je.ATTENUATION_DISTANCE="attenuationDistance";je.ATTENUATION_COLOR="attenuationColor";je.LINE_SCALE="scale";je.LINE_DASH_SIZE="dashSize";je.LINE_GAP_SIZE="gapSize";je.LINE_WIDTH="linewidth";je.LINE_DASH_OFFSET="dashOffset";je.POINT_SIZE="size";je.DISPERSION="dispersion";je.LIGHT_MAP="light";je.AO="ao";const eI=wt(je,je.ALPHA_TEST),tI=wt(je,je.COLOR),nI=wt(je,je.SHININESS),iI=wt(je,je.EMISSIVE),Q_=wt(je,je.OPACITY),rI=wt(je,je.SPECULAR),by=wt(je,je.SPECULAR_INTENSITY),sI=wt(je,je.SPECULAR_COLOR),n8=wt(je,je.SPECULAR_STRENGTH),Kf=wt(je,je.REFLECTIVITY),oI=wt(je,je.ROUGHNESS),aI=wt(je,je.METALNESS),lI=wt(je,je.NORMAL),uI=wt(je,je.CLEARCOAT),cI=wt(je,je.CLEARCOAT_ROUGHNESS),hI=wt(je,je.CLEARCOAT_NORMAL),fI=wt(je,je.ROTATION),dI=wt(je,je.SHEEN),AI=wt(je,je.SHEEN_ROUGHNESS),pI=wt(je,je.ANISOTROPY),mI=wt(je,je.IRIDESCENCE),gI=wt(je,je.IRIDESCENCE_IOR),yI=wt(je,je.IRIDESCENCE_THICKNESS),vI=wt(je,je.TRANSMISSION),_I=wt(je,je.THICKNESS),xI=wt(je,je.IOR),bI=wt(je,je.ATTENUATION_DISTANCE),SI=wt(je,je.ATTENUATION_COLOR),TI=wt(je,je.LINE_SCALE),wI=wt(je,je.LINE_DASH_SIZE),MI=wt(je,je.LINE_GAP_SIZE),gZ=wt(je,je.LINE_WIDTH),EI=wt(je,je.LINE_DASH_OFFSET),RI=wt(je,je.POINT_SIZE),CI=wt(je,je.DISPERSION),Y_=wt(je,je.LIGHT_MAP),PI=wt(je,je.AO),i4=on(new Ge).onReference(function(i){return i.material}).onRenderUpdate(function({material:i}){this.value.set(i.anisotropy*Math.cos(i.anisotropyRotation),i.anisotropy*Math.sin(i.anisotropyRotation))}),K_=Se(i=>i.context.setupModelViewProjection(),"vec4").once()().toVarying("v_modelViewProjection");class or extends un{static get type(){return"IndexNode"}constructor(e){super("uint"),this.scope=e,this.isIndexNode=!0}generate(e){const t=this.getNodeType(e),n=this.scope;let r;if(n===or.VERTEX)r=e.getVertexIndex();else if(n===or.INSTANCE)r=e.getInstanceIndex();else if(n===or.DRAW)r=e.getDrawIndex();else if(n===or.INVOCATION_LOCAL)r=e.getInvocationLocalIndex();else if(n===or.INVOCATION_SUBGROUP)r=e.getInvocationSubgroupIndex();else if(n===or.SUBGROUP)r=e.getSubgroupIndex();else throw new Error("THREE.IndexNode: Unknown scope: "+n);let s;return e.shaderStage==="vertex"||e.shaderStage==="compute"?s=r:s=bl(this).build(e,t),s}}or.VERTEX="vertex";or.INSTANCE="instance";or.SUBGROUP="subgroup";or.INVOCATION_LOCAL="invocationLocal";or.INVOCATION_SUBGROUP="invocationSubgroup";or.DRAW="draw";const NI=wt(or,or.VERTEX),hu=wt(or,or.INSTANCE),yZ=wt(or,or.SUBGROUP),vZ=wt(or,or.INVOCATION_SUBGROUP),_Z=wt(or,or.INVOCATION_LOCAL),II=wt(or,or.DRAW);class LI extends un{static get type(){return"InstanceNode"}constructor(e,t,n=null){super("void"),this.count=e,this.instanceMatrix=t,this.instanceColor=n,this.instanceMatrixNode=null,this.instanceColorNode=null,this.updateType=qn.FRAME,this.buffer=null,this.bufferColor=null}setup(e){const{count:t,instanceMatrix:n,instanceColor:r}=this;let{instanceMatrixNode:s,instanceColorNode:o}=this;if(s===null){if(t<=1e3)s=h6(n.array,"mat4",Math.max(t,1)).element(hu);else{const l=new p8(n.array,16,1);this.buffer=l;const u=n.usage===D2?py:e9,c=[u(l,"vec4",16,0),u(l,"vec4",16,4),u(l,"vec4",16,8),u(l,"vec4",16,12)];s=$2(...c)}this.instanceMatrixNode=s}if(r&&o===null){const l=new Xo(r.array,3),u=r.usage===D2?py:e9;this.bufferColor=l,o=be(u(l,"vec3",3,0)),this.instanceColorNode=o}const a=s.mul(Er).xyz;if(Er.assign(a),e.hasGeometryAttribute("normal")){const l=FN(Zo,s);Zo.assign(l)}this.instanceColorNode!==null&&P8("vec3","vInstanceColor").assign(this.instanceColorNode)}update(){this.instanceMatrix.usage!==D2&&this.buffer!==null&&this.instanceMatrix.version!==this.buffer.version&&(this.buffer.version=this.instanceMatrix.version),this.instanceColor&&this.instanceColor.usage!==D2&&this.bufferColor!==null&&this.instanceColor.version!==this.bufferColor.version&&(this.bufferColor.version=this.instanceColor.version)}}const xZ=Mn(LI).setParameterLength(2,3);class bZ extends LI{static get type(){return"InstancedMeshNode"}constructor(e){const{count:t,instanceMatrix:n,instanceColor:r}=e;super(t,n,r),this.instancedMesh=e}}const DI=Mn(bZ).setParameterLength(1);class SZ extends un{static get type(){return"BatchNode"}constructor(e){super("void"),this.batchMesh=e,this.batchingIdNode=null}setup(e){this.batchingIdNode===null&&(e.getDrawIndex()===null?this.batchingIdNode=hu:this.batchingIdNode=II);const n=Se(([b])=>{const M=me(cu(Tr(this.batchMesh._indirectTexture),0).x),w=me(b).mod(M),T=me(b).div(M);return Tr(this.batchMesh._indirectTexture,os(w,T)).x}).setLayout({name:"getIndirectIndex",type:"uint",inputs:[{name:"id",type:"int"}]})(me(this.batchingIdNode)),r=this.batchMesh._matricesTexture,s=me(cu(Tr(r),0).x),o=ae(n).mul(4).toInt().toVar(),a=o.mod(s),l=o.div(s),u=$2(Tr(r,os(a,l)),Tr(r,os(a.add(1),l)),Tr(r,os(a.add(2),l)),Tr(r,os(a.add(3),l))),c=this.batchMesh._colorsTexture;if(c!==null){const M=Se(([w])=>{const T=me(cu(Tr(c),0).x),N=w,P=N.mod(T),I=N.div(T);return Tr(c,os(P,I)).rgb}).setLayout({name:"getBatchingColor",type:"vec3",inputs:[{name:"id",type:"int"}]})(n);P8("vec3","vBatchColor").assign(M)}const A=no(u);Er.assign(u.mul(Er));const m=Zo.div(be(A[0].dot(A[0]),A[1].dot(A[1]),A[2].dot(A[2]))),_=A.mul(m).xyz;Zo.assign(_),e.hasGeometryAttribute("tangent")&&A6.mulAssign(A)}}const BI=Mn(SZ).setParameterLength(1);class TZ extends Dc{static get type(){return"StorageArrayElementNode"}constructor(e,t){super(e,t),this.isStorageArrayElementNode=!0}set storageBufferNode(e){this.node=e}get storageBufferNode(){return this.node}getMemberType(e,t){const n=this.storageBufferNode.structTypeNode;return n?n.getMemberType(e,t):"void"}setup(e){return e.isAvailable("storageBuffer")===!1&&this.node.isPBO===!0&&e.setupPBO(this.node),super.setup(e)}generate(e,t){let n;const r=e.context.assign;if(e.isAvailable("storageBuffer")===!1?this.node.isPBO===!0&&r!==!0&&(this.node.value.isInstancedBufferAttribute||e.shaderStage!=="compute")?n=e.generatePBO(this):n=this.node.build(e):n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}const wZ=Mn(TZ).setParameterLength(2);class MZ extends G_{static get type(){return"StorageBufferNode"}constructor(e,t=null,n=0){let r,s=null;t&&t.isStruct?(r="struct",s=t.layout,(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(n=e.count)):t===null&&(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)?(r=OC(e.itemSize),n=e.count):r=t,super(e,r,n),this.isStorageBufferNode=!0,this.structTypeNode=s,this.access=Us.READ_WRITE,this.isAtomic=!1,this.isPBO=!1,this._attribute=null,this._varying=null,this.global=!0,e.isStorageBufferAttribute!==!0&&e.isStorageInstancedBufferAttribute!==!0&&(e.isInstancedBufferAttribute?e.isStorageInstancedBufferAttribute=!0:e.isStorageBufferAttribute=!0)}getHash(e){if(this.bufferCount===0){let t=e.globalCache.getData(this.value);return t===void 0&&(t={node:this},e.globalCache.setData(this.value,t)),t.node.uuid}return this.uuid}getInputType(){return this.value.isIndirectStorageBufferAttribute?"indirectStorageBuffer":"storageBuffer"}element(e){return wZ(this,e)}setPBO(e){return this.isPBO=e,this}getPBO(){return this.isPBO}setAccess(e){return this.access=e,this}toReadOnly(){return this.setAccess(Us.READ_ONLY)}setAtomic(e){return this.isAtomic=e,this}toAtomic(){return this.setAtomic(!0)}getAttributeData(){return this._attribute===null&&(this._attribute=c6(this.value),this._varying=bl(this._attribute)),{attribute:this._attribute,varying:this._varying}}getNodeType(e){if(this.structTypeNode!==null)return this.structTypeNode.getNodeType(e);if(e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.getNodeType(e);const{attribute:t}=this.getAttributeData();return t.getNodeType(e)}getMemberType(e,t){return this.structTypeNode!==null?this.structTypeNode.getMemberType(e,t):"void"}generate(e){if(this.structTypeNode!==null&&this.structTypeNode.build(e),e.isAvailable("storageBuffer")||e.isAvailable("indirectStorageBuffer"))return super.generate(e);const{attribute:t,varying:n}=this.getAttributeData(),r=n.build(e);return e.registerTransform(r,t),r}}const Q2=(i,e=null,t=0)=>$e(new MZ(i,e,t)),EZ=(i,e,t)=>(console.warn('THREE.TSL: "storageObject()" is deprecated. Use "storage().setPBO( true )" instead.'),Q2(i,e,t).setPBO(!0)),sw=new WeakMap;class FI extends un{static get type(){return"SkinningNode"}constructor(e){super("void"),this.skinnedMesh=e,this.updateType=qn.OBJECT,this.skinIndexNode=d1("skinIndex","uvec4"),this.skinWeightNode=d1("skinWeight","vec4"),this.bindMatrixNode=Gi("bindMatrix","mat4"),this.bindMatrixInverseNode=Gi("bindMatrixInverse","mat4"),this.boneMatricesNode=yy("skeleton.boneMatrices","mat4",e.skeleton.bones.length),this.positionNode=Er,this.toPositionNode=Er,this.previousBoneMatricesNode=null}getSkinnedPosition(e=this.boneMatricesNode,t=this.positionNode){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(n.x),l=e.element(n.y),u=e.element(n.z),c=e.element(n.w),A=s.mul(t),m=Br(a.mul(r.x).mul(A),l.mul(r.y).mul(A),u.mul(r.z).mul(A),c.mul(r.w).mul(A));return o.mul(m).xyz}getSkinnedNormal(e=this.boneMatricesNode,t=Zo){const{skinIndexNode:n,skinWeightNode:r,bindMatrixNode:s,bindMatrixInverseNode:o}=this,a=e.element(n.x),l=e.element(n.y),u=e.element(n.z),c=e.element(n.w);let A=Br(r.x.mul(a),r.y.mul(l),r.z.mul(u),r.w.mul(c));return A=o.mul(A).mul(s),A.transformDirection(t).xyz}getPreviousSkinnedPosition(e){const t=e.object;return this.previousBoneMatricesNode===null&&(t.skeleton.previousBoneMatrices=new Float32Array(t.skeleton.boneMatrices),this.previousBoneMatricesNode=yy("skeleton.previousBoneMatrices","mat4",t.skeleton.bones.length)),this.getSkinnedPosition(this.previousBoneMatricesNode,t9)}needsPreviousBoneMatrices(e){const t=e.renderer.getMRT();return t&&t.has("velocity")||zC(e.object).useVelocity===!0}setup(e){this.needsPreviousBoneMatrices(e)&&t9.assign(this.getPreviousSkinnedPosition(e));const t=this.getSkinnedPosition();if(this.toPositionNode&&this.toPositionNode.assign(t),e.hasGeometryAttribute("normal")){const n=this.getSkinnedNormal();Zo.assign(n),e.hasGeometryAttribute("tangent")&&A6.assign(n)}return t}generate(e,t){if(t!=="void")return super.generate(e,t)}update(e){const t=e.object&&e.object.skeleton?e.object.skeleton:this.skinnedMesh.skeleton;sw.get(t)!==e.frameId&&(sw.set(t,e.frameId),this.previousBoneMatricesNode!==null&&t.previousBoneMatrices.set(t.boneMatrices),t.update())}}const UI=i=>$e(new FI(i)),RZ=(i,e=null)=>{const t=new FI(i);return t.positionNode=Q2(new Xo(i.geometry.getAttribute("position").array,3),"vec3").setPBO(!0).toReadOnly().element(hu).toVar(),t.skinIndexNode=Q2(new Xo(new Uint32Array(i.geometry.getAttribute("skinIndex").array),4),"uvec4").setPBO(!0).toReadOnly().element(hu).toVar(),t.skinWeightNode=Q2(new Xo(i.geometry.getAttribute("skinWeight").array,4),"vec4").setPBO(!0).toReadOnly().element(hu).toVar(),t.bindMatrixNode=on(i.bindMatrix,"mat4"),t.bindMatrixInverseNode=on(i.bindMatrixInverse,"mat4"),t.boneMatricesNode=h6(i.skeleton.boneMatrices,"mat4",i.skeleton.bones.length),t.toPositionNode=e,$e(t)};class CZ extends un{static get type(){return"LoopNode"}constructor(e=[]){super(),this.params=e}getVarName(e){return String.fromCharCode(105+e)}getProperties(e){const t=e.getNodeProperties(this);if(t.stackNode!==void 0)return t;const n={};for(let o=0,a=this.params.length-1;o<a;o++){const l=this.params[o],u=l.isNode!==!0&&l.name||this.getVarName(o),c=l.isNode!==!0&&l.type||"int";n[u]=f1(u,c)}const r=e.addStack();t.returnsNode=this.params[this.params.length-1](n,e),t.stackNode=r;const s=this.params[0];return s.isNode!==!0&&typeof s.update=="function"&&(t.updateNode=Se(this.params[0].update)(n)),e.removeStack(),t}getNodeType(e){const{returnsNode:t}=this.getProperties(e);return t?t.getNodeType(e):"void"}setup(e){this.getProperties(e)}generate(e){const t=this.getProperties(e),n=this.params,r=t.stackNode;for(let a=0,l=n.length-1;a<l;a++){const u=n[a];let c=!1,A=null,m=null,_=null,b=null,M=null,w=null;u.isNode?u.getNodeType(e)==="bool"?(c=!0,b="bool",m=u.build(e,b)):(b="int",_=this.getVarName(a),A="0",m=u.build(e,b),M="<"):(b=u.type||"int",_=u.name||this.getVarName(a),A=u.start,m=u.end,M=u.condition,w=u.update,typeof A=="number"?A=e.generateConst(b,A):A&&A.isNode&&(A=A.build(e,b)),typeof m=="number"?m=e.generateConst(b,m):m&&m.isNode&&(m=m.build(e,b)),A!==void 0&&m===void 0?(A=A+" - 1",m="0",M=">="):m!==void 0&&A===void 0&&(A="0",M="<"),M===void 0&&(Number(A)>Number(m)?M=">=":M="<"));let T;if(c)T=`while ( ${m} )`;else{const N={start:A,end:m},P=N.start,I=N.end;let B;const F=()=>M.includes("<")?"+=":"-=";if(w!=null)switch(typeof w){case"function":B=e.flowStagesNode(t.updateNode,"void").code.replace(/\t|;/g,"");break;case"number":B=_+" "+F()+" "+e.generateConst(b,w);break;case"string":B=_+" "+w;break;default:w.isNode?B=_+" "+F()+" "+w.build(e):(console.error("THREE.TSL: 'Loop( { update: ... } )' is not a function, string or number."),B="break /* invalid update */")}else b==="int"||b==="uint"?w=M.includes("<")?"++":"--":w=F()+" 1.",B=_+" "+w;const O=e.getVar(b,_)+" = "+P,V=_+" "+M+" "+I;T=`for ( ${O}; ${V}; ${B} )`}e.addFlowCode((a===0?`
`:"")+e.tab+T+` {

`).addFlowTab()}const s=r.build(e,"void"),o=t.returnsNode?t.returnsNode.build(e):"";e.removeFlowTab().addFlowCode(`
`+e.tab+s);for(let a=0,l=this.params.length-1;a<l;a++)e.addFlowCode((a===0?"":e.tab)+`}

`).removeFlowTab();return e.addFlowTab(),o}}const Di=(...i)=>$e(new CZ(j2(i,"int"))).toStack(),PZ=()=>f1("continue").toStack(),OI=()=>f1("break").toStack(),gm=new WeakMap,ha=new rn,ow=Se(({bufferMap:i,influence:e,stride:t,width:n,depth:r,offset:s})=>{const o=me(NI).mul(t).add(s),a=o.div(n),l=o.sub(a.mul(n));return Tr(i,os(l,a)).depth(r).xyz.mul(e)});function NZ(i){const e=i.morphAttributes.position!==void 0,t=i.morphAttributes.normal!==void 0,n=i.morphAttributes.color!==void 0,r=i.morphAttributes.position||i.morphAttributes.normal||i.morphAttributes.color,s=r!==void 0?r.length:0;let o=gm.get(i);if(o===void 0||o.count!==s){let T=function(){M.dispose(),gm.delete(i),i.removeEventListener("dispose",T)};o!==void 0&&o.texture.dispose();const a=i.morphAttributes.position||[],l=i.morphAttributes.normal||[],u=i.morphAttributes.color||[];let c=0;e===!0&&(c=1),t===!0&&(c=2),n===!0&&(c=3);let A=i.attributes.position.count*c,m=1;const _=4096;A>_&&(m=Math.ceil(A/_),A=_);const b=new Float32Array(A*m*4*s),M=new j8(b,A,m,s);M.type=nr,M.needsUpdate=!0;const w=c*4;for(let N=0;N<s;N++){const P=a[N],I=l[N],B=u[N],F=A*m*4*N;for(let O=0;O<P.count;O++){const V=O*w;e===!0&&(ha.fromBufferAttribute(P,O),b[F+V+0]=ha.x,b[F+V+1]=ha.y,b[F+V+2]=ha.z,b[F+V+3]=0),t===!0&&(ha.fromBufferAttribute(I,O),b[F+V+4]=ha.x,b[F+V+5]=ha.y,b[F+V+6]=ha.z,b[F+V+7]=0),n===!0&&(ha.fromBufferAttribute(B,O),b[F+V+8]=ha.x,b[F+V+9]=ha.y,b[F+V+10]=ha.z,b[F+V+11]=B.itemSize===4?ha.w:1)}}o={count:s,texture:M,stride:c,size:new Ge(A,m)},gm.set(i,o),i.addEventListener("dispose",T)}return o}class IZ extends un{static get type(){return"MorphNode"}constructor(e){super("void"),this.mesh=e,this.morphBaseInfluence=on(1),this.updateType=qn.OBJECT}setup(e){const{geometry:t}=e,n=t.morphAttributes.position!==void 0,r=t.hasAttribute("normal")&&t.morphAttributes.normal!==void 0,s=t.morphAttributes.position||t.morphAttributes.normal||t.morphAttributes.color,o=s!==void 0?s.length:0,{texture:a,stride:l,size:u}=NZ(t);n===!0&&Er.mulAssign(this.morphBaseInfluence),r===!0&&Zo.mulAssign(this.morphBaseInfluence);const c=me(u.width);Di(o,({i:A})=>{const m=ae(0).toVar();this.mesh.count>1&&this.mesh.morphTexture!==null&&this.mesh.morphTexture!==void 0?m.assign(Tr(this.mesh.morphTexture,os(me(A).add(1),me(hu))).r):m.assign(Gi("morphTargetInfluences","float").element(A).toVar()),gn(m.notEqual(0),()=>{n===!0&&Er.addAssign(ow({bufferMap:a,influence:m,stride:l,width:c,depth:A,offset:me(0)})),r===!0&&Zo.addAssign(ow({bufferMap:a,influence:m,stride:l,width:c,depth:A,offset:me(1)}))})})}update(){const e=this.morphBaseInfluence;this.mesh.geometry.morphTargetsRelative?e.value=1:e.value=1-this.mesh.morphTargetInfluences.reduce((t,n)=>t+n,0)}}const kI=Mn(IZ).setParameterLength(1);class A5 extends un{static get type(){return"LightingNode"}constructor(){super("vec3"),this.isLightingNode=!0}}class LZ extends A5{static get type(){return"AONode"}constructor(e=null){super(),this.aoNode=e}setup(e){e.context.ambientOcclusion.mulAssign(this.aoNode)}}class DZ extends sN{static get type(){return"LightingContextNode"}constructor(e,t=null,n=null,r=null){super(e),this.lightingModel=t,this.backdropNode=n,this.backdropAlphaNode=r,this._value=null}getContext(){const{backdropNode:e,backdropAlphaNode:t}=this,n=be().toVar("directDiffuse"),r=be().toVar("directSpecular"),s=be().toVar("indirectDiffuse"),o=be().toVar("indirectSpecular"),a={directDiffuse:n,directSpecular:r,indirectDiffuse:s,indirectSpecular:o};return{radiance:be().toVar("radiance"),irradiance:be().toVar("irradiance"),iblIrradiance:be().toVar("iblIrradiance"),ambientOcclusion:ae(1).toVar("ambientOcclusion"),reflectedLight:a,backdrop:e,backdropAlpha:t}}setup(e){return this.value=this._value||(this._value=this.getContext()),this.value.lightingModel=this.lightingModel||e.context.lightingModel,super.setup(e)}}const VI=Mn(DZ);class BZ extends A5{static get type(){return"IrradianceNode"}constructor(e){super(),this.node=e}setup(e){e.context.irradiance.addAssign(this.node)}}let Ah,ph;class Qr extends un{static get type(){return"ScreenNode"}constructor(e){super(),this.scope=e,this.isViewportNode=!0}getNodeType(){return this.scope===Qr.VIEWPORT?"vec4":"vec2"}getUpdateType(){let e=qn.NONE;return(this.scope===Qr.SIZE||this.scope===Qr.VIEWPORT)&&(e=qn.RENDER),this.updateType=e,e}update({renderer:e}){const t=e.getRenderTarget();this.scope===Qr.VIEWPORT?t!==null?ph.copy(t.viewport):(e.getViewport(ph),ph.multiplyScalar(e.getPixelRatio())):t!==null?(Ah.width=t.width,Ah.height=t.height):e.getDrawingBufferSize(Ah)}setup(){const e=this.scope;let t=null;return e===Qr.SIZE?t=on(Ah||(Ah=new Ge)):e===Qr.VIEWPORT?t=on(ph||(ph=new rn)):t=Ke(p6.div(B8)),t}generate(e){if(this.scope===Qr.COORDINATE){let t=e.getFragCoord();if(e.isFlipY()){const n=e.getNodeProperties(B8).outputNode.build(e);t=`${e.getType("vec2")}( ${t}.x, ${n}.y - ${t}.y )`}return t}return super.generate(e)}}Qr.COORDINATE="coordinate";Qr.VIEWPORT="viewport";Qr.SIZE="size";Qr.UV="uv";const Jl=wt(Qr,Qr.UV),B8=wt(Qr,Qr.SIZE),p6=wt(Qr,Qr.COORDINATE),T4=wt(Qr,Qr.VIEWPORT),zI=T4.zw,GI=p6.sub(T4.xy),FZ=GI.div(zI),UZ=Se(()=>(console.warn('THREE.TSL: "viewportResolution" is deprecated. Use "screenSize" instead.'),B8),"vec2").once()(),H3=new Ge;class SA extends ml{static get type(){return"ViewportTextureNode"}constructor(e=Jl,t=null,n=null){let r=null;n===null?(r=new cv,r.minFilter=Fs,n=r):r=n,super(n,e,t),this.generateMipmaps=!1,this.defaultFramebuffer=r,this.isOutputTextureNode=!0,this.updateBeforeType=qn.RENDER,this._textures=new WeakMap}getFrameBufferTexture(e=null){const t=this.referenceNode?this.referenceNode.defaultFramebuffer:this.defaultFramebuffer;if(e===null)return t;if(this._textures.has(e)===!1){const n=t.clone();this._textures.set(e,n)}return this._textures.get(e)}updateBefore(e){const t=e.renderer,n=t.getRenderTarget();n===null?t.getDrawingBufferSize(H3):H3.set(n.width,n.height);const r=this.getFrameBufferTexture(n);(r.image.width!==H3.width||r.image.height!==H3.height)&&(r.image.width=H3.width,r.image.height=H3.height,r.needsUpdate=!0);const s=r.generateMipmaps;r.generateMipmaps=this.generateMipmaps,t.copyFramebufferToTexture(r),r.generateMipmaps=s,this.value=r}clone(){const e=new this.constructor(this.uvNode,this.levelNode,this.value);return e.generateMipmaps=this.generateMipmaps,e}}const OZ=Mn(SA).setParameterLength(0,3),Z_=Mn(SA,null,null,{generateMipmaps:!0}).setParameterLength(0,3);let ym=null;class kZ extends SA{static get type(){return"ViewportDepthTextureNode"}constructor(e=Jl,t=null){ym===null&&(ym=new Qo),super(e,t,ym)}}const J_=Mn(kZ).setParameterLength(0,2);class zo extends un{static get type(){return"ViewportDepthNode"}constructor(e,t=null){super("float"),this.scope=e,this.valueNode=t,this.isViewportDepthNode=!0}generate(e){const{scope:t}=this;return t===zo.DEPTH_BASE?e.getFragDepth():super.generate(e)}setup({camera:e}){const{scope:t}=this,n=this.valueNode;let r=null;if(t===zo.DEPTH_BASE)n!==null&&(r=HI().assign(n));else if(t===zo.DEPTH)e.isPerspectiveCamera?r=qI(Rr.z,eu,tu):r=w4(Rr.z,eu,tu);else if(t===zo.LINEAR_DEPTH)if(n!==null)if(e.isPerspectiveCamera){const s=ex(n,eu,tu);r=w4(s,eu,tu)}else r=n;else r=w4(Rr.z,eu,tu);return r}}zo.DEPTH_BASE="depthBase";zo.DEPTH="depth";zo.LINEAR_DEPTH="linearDepth";const w4=(i,e,t)=>i.add(e).div(e.sub(t)),VZ=(i,e,t)=>e.sub(t).mul(i).sub(e),qI=(i,e,t)=>e.add(i).mul(t).div(t.sub(e).mul(i)),ex=(i,e,t)=>e.mul(t).div(t.sub(e).mul(i).sub(t)),tx=(i,e,t)=>{e=e.max(1e-6).toVar();const n=al(i.negate().div(e)),r=al(t.div(e));return n.div(r)},zZ=(i,e,t)=>{const n=i.mul(uA(t.div(e)));return ae(Math.E).pow(n).mul(e).negate()},HI=Mn(zo,zo.DEPTH_BASE),nx=wt(zo,zo.DEPTH),n9=Mn(zo,zo.LINEAR_DEPTH).setParameterLength(0,1),GZ=n9(J_());nx.assign=i=>HI(i);class $a extends un{static get type(){return"ClippingNode"}constructor(e=$a.DEFAULT){super(),this.scope=e}setup(e){super.setup(e);const t=e.clippingContext,{intersectionPlanes:n,unionPlanes:r}=t;return this.hardwareClipping=e.material.hardwareClipping,this.scope===$a.ALPHA_TO_COVERAGE?this.setupAlphaToCoverage(n,r):this.scope===$a.HARDWARE?this.setupHardwareClipping(r,e):this.setupDefault(n,r)}setupAlphaToCoverage(e,t){return Se(()=>{const n=ae().toVar("distanceToPlane"),r=ae().toVar("distanceToGradient"),s=ae(1).toVar("clipOpacity"),o=t.length;if(this.hardwareClipping===!1&&o>0){const l=Ga(t);Di(o,({i:u})=>{const c=l.element(u);n.assign(Rr.dot(c.xyz).negate().add(c.w)),r.assign(n.fwidth().div(2)),s.mulAssign(pl(r.negate(),r,n))})}const a=e.length;if(a>0){const l=Ga(e),u=ae(1).toVar("intersectionClipOpacity");Di(a,({i:c})=>{const A=l.element(c);n.assign(Rr.dot(A.xyz).negate().add(A.w)),r.assign(n.fwidth().div(2)),u.mulAssign(pl(r.negate(),r,n).oneMinus())}),s.mulAssign(u.oneMinus())}wi.a.mulAssign(s),wi.a.equal(0).discard()})()}setupDefault(e,t){return Se(()=>{const n=t.length;if(this.hardwareClipping===!1&&n>0){const s=Ga(t);Di(n,({i:o})=>{const a=s.element(o);Rr.dot(a.xyz).greaterThan(a.w).discard()})}const r=e.length;if(r>0){const s=Ga(e),o=Ka(!0).toVar("clipped");Di(r,({i:a})=>{const l=s.element(a);o.assign(Rr.dot(l.xyz).greaterThan(l.w).and(o))}),o.discard()}})()}setupHardwareClipping(e,t){const n=e.length;return t.enableHardwareClipping(n),Se(()=>{const r=Ga(e),s=f6(t.getClipDistance());Di(n,({i:o})=>{const a=r.element(o),l=Rr.dot(a.xyz).sub(a.w).negate();s.element(o).assign(l)})})()}}$a.ALPHA_TO_COVERAGE="alphaToCoverage";$a.DEFAULT="default";$a.HARDWARE="hardware";const qZ=()=>$e(new $a),HZ=()=>$e(new $a($a.ALPHA_TO_COVERAGE)),WZ=()=>$e(new $a($a.HARDWARE)),jZ=.05,aw=Se(([i])=>A1(Hn(1e4,ya(Hn(17,i.x).add(Hn(.1,i.y)))).mul(Br(.1,Ki(ya(Hn(13,i.y).add(i.x))))))),lw=Se(([i])=>aw(Ke(aw(i.xy),i.z))),$Z=Se(([i])=>{const e=_r(ul(R_(i.xyz)),ul(C_(i.xyz))),t=ae(1).div(ae(jZ).mul(e)).toVar("pixScale"),n=Ke(J4(ll(al(t))),J4(cA(al(t)))),r=Ke(lw(ll(n.x.mul(i.xyz))),lw(ll(n.y.mul(i.xyz)))),s=A1(al(t)),o=Br(Hn(s.oneMinus(),r.x),Hn(s,r.y)),a=Ko(s,s.oneMinus()),l=be(o.mul(o).div(Hn(2,a).mul(si(1,a))),o.sub(Hn(.5,a)).div(si(1,a)),si(1,si(1,o).mul(si(1,o)).div(Hn(2,a).mul(si(1,a))))),u=o.lessThan(a.oneMinus()).select(o.lessThan(a).select(l.x,l.y),l.z);return Za(u,1e-6,1)}).setLayout({name:"getAlphaHashThreshold",type:"float",inputs:[{name:"position",type:"vec3"}]});class XZ extends RN{static get type(){return"VertexColorNode"}constructor(e){super(null,"vec4"),this.isVertexColorNode=!0,this.index=e}getAttributeName(){const e=this.index;return"color"+(e>0?e:"")}generate(e){const t=this.getAttributeName(e),n=e.hasGeometryAttribute(t);let r;return n===!0?r=super.generate(e):r=e.generateConst(this.nodeType,new rn(1,1,1,1)),r}serialize(e){super.serialize(e),e.index=this.index}deserialize(e){super.deserialize(e),this.index=e.index}}const WI=(i=0)=>$e(new XZ(i)),jI=Se(([i,e])=>Ko(1,i.oneMinus().div(e)).oneMinus()).setLayout({name:"blendBurn",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),$I=Se(([i,e])=>Ko(i.div(e.oneMinus()),1)).setLayout({name:"blendDodge",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),XI=Se(([i,e])=>i.oneMinus().mul(e.oneMinus()).oneMinus()).setLayout({name:"blendScreen",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),QI=Se(([i,e])=>_i(i.mul(2).mul(e),i.oneMinus().mul(2).mul(e.oneMinus()).oneMinus(),fA(.5,i))).setLayout({name:"blendOverlay",type:"vec3",inputs:[{name:"base",type:"vec3"},{name:"blend",type:"vec3"}]}),QZ=Se(([i,e])=>{const t=e.a.add(i.a.mul(e.a.oneMinus()));return sn(e.rgb.mul(e.a).add(i.rgb.mul(i.a).mul(e.a.oneMinus())).div(t),t)}).setLayout({name:"blendColor",type:"vec4",inputs:[{name:"base",type:"vec4"},{name:"blend",type:"vec4"}]}),YI=Se(([i])=>sn(i.rgb.mul(i.a),i.a),{color:"vec4",return:"vec4"}),YZ=Se(([i])=>(gn(i.a.equal(0),()=>sn(0)),sn(i.rgb.div(i.a),i.a)),{color:"vec4",return:"vec4"}),KZ=(...i)=>(console.warn('THREE.TSL: "burn" has been renamed. Use "blendBurn" instead.'),jI(i)),ZZ=(...i)=>(console.warn('THREE.TSL: "dodge" has been renamed. Use "blendDodge" instead.'),$I(i)),JZ=(...i)=>(console.warn('THREE.TSL: "screen" has been renamed. Use "blendScreen" instead.'),XI(i)),eJ=(...i)=>(console.warn('THREE.TSL: "overlay" has been renamed. Use "blendOverlay" instead.'),QI(i));class Cr extends ws{static get type(){return"NodeMaterial"}get type(){return this.constructor.type}set type(e){}constructor(){super(),this.isNodeMaterial=!0,this.fog=!0,this.lights=!1,this.hardwareClipping=!1,this.lightsNode=null,this.envNode=null,this.aoNode=null,this.colorNode=null,this.normalNode=null,this.opacityNode=null,this.backdropNode=null,this.backdropAlphaNode=null,this.alphaTestNode=null,this.maskNode=null,this.positionNode=null,this.geometryNode=null,this.depthNode=null,this.receivedShadowPositionNode=null,this.castShadowPositionNode=null,this.receivedShadowNode=null,this.castShadowNode=null,this.outputNode=null,this.mrtNode=null,this.fragmentNode=null,this.vertexNode=null,Object.defineProperty(this,"shadowPositionNode",{get:()=>this.receivedShadowPositionNode,set:e=>{console.warn('THREE.NodeMaterial: ".shadowPositionNode" was renamed to ".receivedShadowPositionNode".'),this.receivedShadowPositionNode=e}})}customProgramCacheKey(){return this.type+UC(this)}build(e){this.setup(e)}setupObserver(e){return new CY(e)}setup(e){e.context.setupNormal=()=>S4(this.setupNormal(e),"NORMAL","vec3"),e.context.setupPositionView=()=>this.setupPositionView(e),e.context.setupModelViewProjection=()=>this.setupModelViewProjection(e);const t=e.renderer,n=t.getRenderTarget();e.addStack();const r=S4(this.setupVertex(e),"VERTEX"),s=this.vertexNode||r;e.stack.outputNode=s,this.setupHardwareClipping(e),this.geometryNode!==null&&(e.stack.outputNode=e.stack.outputNode.bypass(this.geometryNode)),e.addFlow("vertex",e.removeStack()),e.addStack();let o;const a=this.setupClipping(e);if((this.depthWrite===!0||this.depthTest===!0)&&(n!==null?n.depthBuffer===!0&&this.setupDepth(e):t.depth===!0&&this.setupDepth(e)),this.fragmentNode===null){this.setupDiffuseColor(e),this.setupVariants(e);const l=this.setupLighting(e);a!==null&&e.stack.add(a);const u=sn(l,wi.a).max(0);o=this.setupOutput(e,u),b4.assign(o);const c=this.outputNode!==null;if(c&&(o=this.outputNode),n!==null){const A=t.getMRT(),m=this.mrtNode;A!==null?(c&&b4.assign(o),o=A,m!==null&&(o=A.merge(m))):m!==null&&(o=m)}}else{let l=this.fragmentNode;l.isOutputStructNode!==!0&&(l=sn(l)),o=this.setupOutput(e,l)}e.stack.outputNode=o,e.addFlow("fragment",e.removeStack()),e.observer=this.setupObserver(e)}setupClipping(e){if(e.clippingContext===null)return null;const{unionPlanes:t,intersectionPlanes:n}=e.clippingContext;let r=null;if(t.length>0||n.length>0){const s=e.renderer.samples;this.alphaToCoverage&&s>1?r=HZ():e.stack.add(qZ())}return r}setupHardwareClipping(e){if(this.hardwareClipping=!1,e.clippingContext===null)return;const t=e.clippingContext.unionPlanes.length;t>0&&t<=8&&e.isAvailable("clipDistance")&&(e.stack.add(WZ()),this.hardwareClipping=!0)}setupDepth(e){const{renderer:t,camera:n}=e;let r=this.depthNode;if(r===null){const s=t.getMRT();s&&s.has("depth")?r=s.get("depth"):t.logarithmicDepthBuffer===!0&&(n.isPerspectiveCamera?r=tx(Rr.z,eu,tu):r=w4(Rr.z,eu,tu))}r!==null&&nx.assign(r).toStack()}setupPositionView(){return Fc.mul(Er).xyz}setupModelViewProjection(){return Bc.mul(Rr)}setupVertex(e){return e.addStack(),this.setupPosition(e),e.context.vertex=e.removeStack(),K_}setupPosition(e){const{object:t,geometry:n}=e;if((n.morphAttributes.position||n.morphAttributes.normal||n.morphAttributes.color)&&kI(t).toStack(),t.isSkinnedMesh===!0&&UI(t).toStack(),this.displacementMap){const r=Hl("displacementMap","texture"),s=Hl("displacementScale","float"),o=Hl("displacementBias","float");Er.addAssign(Zo.normalize().mul(r.x.mul(s).add(o)))}return t.isBatchedMesh&&BI(t).toStack(),t.isInstancedMesh&&t.instanceMatrix&&t.instanceMatrix.isInstancedBufferAttribute===!0&&DI(t).toStack(),this.positionNode!==null&&Er.assign(S4(this.positionNode,"POSITION","vec3")),Er}setupDiffuseColor({object:e,geometry:t}){this.maskNode!==null&&Ka(this.maskNode).not().discard();let n=this.colorNode?sn(this.colorNode):tI;this.vertexColors===!0&&t.hasAttribute("color")&&(n=n.mul(WI())),e.instanceColor&&(n=P8("vec3","vInstanceColor").mul(n)),e.isBatchedMesh&&e._colorsTexture&&(n=P8("vec3","vBatchColor").mul(n)),wi.assign(n);const r=this.opacityNode?ae(this.opacityNode):Q_;wi.a.assign(wi.a.mul(r));let s=null;(this.alphaTestNode!==null||this.alphaTest>0)&&(s=this.alphaTestNode!==null?ae(this.alphaTestNode):eI,wi.a.lessThanEqual(s).discard()),this.alphaHash===!0&&wi.a.lessThan($Z(Er)).discard(),this.transparent===!1&&this.blending===Js&&this.alphaToCoverage===!1?wi.a.assign(1):s===null&&wi.a.lessThanEqual(0).discard()}setupVariants(){}setupOutgoingLight(){return this.lights===!0?be(0):wi.rgb}setupNormal(){return this.normalNode?be(this.normalNode):lI}setupEnvironment(){let e=null;return this.envNode?e=this.envNode:this.envMap&&(e=this.envMap.isCubeTexture?Hl("envMap","cubeTexture"):Hl("envMap","texture")),e}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new BZ(Y_)),t}setupLights(e){const t=[],n=this.setupEnvironment(e);n&&n.isLightingNode&&t.push(n);const r=this.setupLightMap(e);if(r&&r.isLightingNode&&t.push(r),this.aoNode!==null||e.material.aoMap){const o=this.aoNode!==null?this.aoNode:PI;t.push(new LZ(o))}let s=this.lightsNode||e.lightsNode;return t.length>0&&(s=e.renderer.lighting.createNode([...s.getLights(),...t])),s}setupLightingModel(){}setupLighting(e){const{material:t}=e,{backdropNode:n,backdropAlphaNode:r,emissiveNode:s}=this,a=this.lights===!0||this.lightsNode!==null?this.setupLights(e):null;let l=this.setupOutgoingLight(e);if(a&&a.getScope().hasLights){const u=this.setupLightingModel(e)||null;l=VI(a,u,n,r)}else n!==null&&(l=be(r!==null?_i(l,n,r):n));return(s&&s.isNode===!0||t.emissive&&t.emissive.isColor===!0)&&(dy.assign(be(s||iI)),l=l.add(dy)),l}setupFog(e,t){const n=e.fogNode;return n&&(b4.assign(t),t=sn(n.toVar())),t}setupPremultipliedAlpha(e,t){return YI(t)}setupOutput(e,t){return this.fog===!0&&(t=this.setupFog(e,t)),this.premultipliedAlpha===!0&&(t=this.setupPremultipliedAlpha(e,t)),t}setDefaultValues(e){for(const n in e){const r=e[n];this[n]===void 0&&(this[n]=r,r&&r.clone&&(this[n]=r.clone()))}const t=Object.getOwnPropertyDescriptors(e.constructor.prototype);for(const n in t)Object.getOwnPropertyDescriptor(this.constructor.prototype,n)===void 0&&t[n].get!==void 0&&Object.defineProperty(this.constructor.prototype,n,t[n])}toJSON(e){const t=e===void 0||typeof e=="string";t&&(e={textures:{},images:{},nodes:{}});const n=ws.prototype.toJSON.call(this,e),r=$d(this);n.inputNodes={};for(const{property:o,childNode:a}of r)n.inputNodes[o]=a.toJSON(e).uuid;function s(o){const a=[];for(const l in o){const u=o[l];delete u.metadata,a.push(u)}return a}if(t){const o=s(e.textures),a=s(e.images),l=s(e.nodes);o.length>0&&(n.textures=o),a.length>0&&(n.images=a),l.length>0&&(n.nodes=l)}return n}copy(e){return this.lightsNode=e.lightsNode,this.envNode=e.envNode,this.colorNode=e.colorNode,this.normalNode=e.normalNode,this.opacityNode=e.opacityNode,this.backdropNode=e.backdropNode,this.backdropAlphaNode=e.backdropAlphaNode,this.alphaTestNode=e.alphaTestNode,this.maskNode=e.maskNode,this.positionNode=e.positionNode,this.geometryNode=e.geometryNode,this.depthNode=e.depthNode,this.receivedShadowPositionNode=e.receivedShadowPositionNode,this.castShadowPositionNode=e.castShadowPositionNode,this.receivedShadowNode=e.receivedShadowNode,this.castShadowNode=e.castShadowNode,this.outputNode=e.outputNode,this.mrtNode=e.mrtNode,this.fragmentNode=e.fragmentNode,this.vertexNode=e.vertexNode,super.copy(e)}}const tJ=new hs;class nJ extends Cr{static get type(){return"LineBasicNodeMaterial"}constructor(e){super(),this.isLineBasicNodeMaterial=!0,this.setDefaultValues(tJ),this.setValues(e)}}const iJ=new Mv;class rJ extends Cr{static get type(){return"LineDashedNodeMaterial"}constructor(e){super(),this.isLineDashedNodeMaterial=!0,this.setDefaultValues(iJ),this.dashOffset=0,this.offsetNode=null,this.dashScaleNode=null,this.dashSizeNode=null,this.gapSizeNode=null,this.setValues(e)}setupVariants(){const e=this.offsetNode?ae(this.offsetNode):EI,t=this.dashScaleNode?ae(this.dashScaleNode):TI,n=this.dashSizeNode?ae(this.dashSizeNode):wI,r=this.gapSizeNode?ae(this.gapSizeNode):MI;$f.assign(n),Ay.assign(r);const s=bl(d1("lineDistance").mul(t));(e?s.add(e):s).mod($f.add(Ay)).greaterThan($f).discard()}}let vm=null;class sJ extends SA{static get type(){return"ViewportSharedTextureNode"}constructor(e=Jl,t=null){vm===null&&(vm=new cv),super(e,t,vm)}updateReference(){return this}}const oJ=Mn(sJ).setParameterLength(0,2),KI=i=>$e(i).mul(.5).add(.5),aJ=i=>$e(i).mul(2).sub(1),lJ=new bv;class uJ extends Cr{static get type(){return"MeshNormalNodeMaterial"}constructor(e){super(),this.isMeshNormalNodeMaterial=!0,this.setDefaultValues(lJ),this.setValues(e)}setupDiffuseColor(){const e=this.opacityNode?ae(this.opacityNode):Q_;wi.assign(mA(sn(KI(Li),e),xs))}}const ix=Se(([i=q_])=>{const e=i.z.atan(i.x).mul(1/(Math.PI*2)).add(.5),t=i.y.clamp(-1,1).asin().mul(1/Math.PI).add(.5);return Ke(e,t)});class ZI extends av{constructor(e=1,t={}){super(e,t),this.isCubeRenderTarget=!0}fromEquirectangularTexture(e,t){const n=t.minFilter,r=t.generateMipmaps;t.generateMipmaps=!0,this.texture.type=t.type,this.texture.colorSpace=t.colorSpace,this.texture.generateMipmaps=t.generateMipmaps,this.texture.minFilter=t.minFilter,this.texture.magFilter=t.magFilter;const s=new _l(5,5,5),o=ix(q_),a=new Cr;a.colorNode=ni(t,o,0),a.side=Bi,a.blending=qo;const l=new ei(s,a),u=new Rc;u.add(l),t.minFilter===Fs&&(t.minFilter=Wi);const c=new ov(1,10,this),A=e.getMRT();return e.setMRT(null),c.update(e,u),e.setMRT(A),t.minFilter=n,t.currentGenerateMipmaps=r,l.geometry.dispose(),l.material.dispose(),this}}const i8=new WeakMap;class cJ extends Zr{static get type(){return"CubeMapNode"}constructor(e){super("vec3"),this.envNode=e,this._cubeTexture=null,this._cubeTextureNode=t5(null);const t=new vu;t.isRenderTargetTexture=!0,this._defaultTexture=t,this.updateBeforeType=qn.RENDER}updateBefore(e){const{renderer:t,material:n}=e,r=this.envNode;if(r.isTextureNode||r.isMaterialReferenceNode){const s=r.isTextureNode?r.value:n[r.property];if(s&&s.isTexture){const o=s.mapping;if(o===fu||o===du){if(i8.has(s)){const a=i8.get(s);uw(a,s.mapping),this._cubeTexture=a}else{const a=s.image;if(hJ(a)){const l=new ZI(a.height);l.fromEquirectangularTexture(t,s),uw(l.texture,s.mapping),this._cubeTexture=l.texture,i8.set(s,l.texture),s.addEventListener("dispose",JI)}else this._cubeTexture=this._defaultTexture}this._cubeTextureNode.value=this._cubeTexture}else this._cubeTextureNode=this.envNode}}}setup(e){return this.updateBefore(e),this._cubeTextureNode}}function hJ(i){return i==null?!1:i.height>0}function JI(i){const e=i.target;e.removeEventListener("dispose",JI);const t=i8.get(e);t!==void 0&&(i8.delete(e),t.dispose())}function uw(i,e){e===fu?i.mapping=_a:e===du&&(i.mapping=Xa)}const eL=Mn(cJ).setParameterLength(1);class rx extends A5{static get type(){return"BasicEnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){e.context.environment=eL(this.envNode)}}class fJ extends A5{static get type(){return"BasicLightMapNode"}constructor(e=null){super(),this.lightMapNode=e}setup(e){const t=ae(1/Math.PI);e.context.irradianceLightMap=this.lightMapNode.mul(t)}}class TA{start(e){e.lightsNode.setupLights(e,e.lightsNode.getLightNodes(e)),this.indirect(e)}finish(){}direct(){}directRectArea(){}indirect(){}ambientOcclusion(){}}class tL extends TA{constructor(){super()}indirect({context:e}){const t=e.ambientOcclusion,n=e.reflectedLight,r=e.irradianceLightMap;n.indirectDiffuse.assign(sn(0)),r?n.indirectDiffuse.addAssign(r):n.indirectDiffuse.addAssign(sn(1,1,1,0)),n.indirectDiffuse.mulAssign(t),n.indirectDiffuse.mulAssign(wi.rgb)}finish(e){const{material:t,context:n}=e,r=n.outgoingLight,s=e.context.environment;if(s)switch(t.combine){case a5:r.rgb.assign(_i(r.rgb,r.rgb.mul(s.rgb),n8.mul(Kf)));break;case $y:r.rgb.assign(_i(r.rgb,s.rgb,n8.mul(Kf)));break;case Xy:r.rgb.addAssign(s.rgb.mul(n8.mul(Kf)));break;default:console.warn("THREE.BasicLightingModel: Unsupported .combine value:",t.combine);break}}}const dJ=new Bs;class AJ extends Cr{static get type(){return"MeshBasicNodeMaterial"}constructor(e){super(),this.isMeshBasicNodeMaterial=!0,this.lights=!0,this.setDefaultValues(dJ),this.setValues(e)}setupNormal(){return d5(e5)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new rx(t):null}setupLightMap(e){let t=null;return e.material.lightMap&&(t=new fJ(Y_)),t}setupOutgoingLight(){return wi.rgb}setupLightingModel(){return new tL}}const n5=Se(({f0:i,f90:e,dotVH:t})=>{const n=t.mul(-5.55473).sub(6.98316).mul(t).exp2();return i.mul(n.oneMinus()).add(e.mul(n))}),Sc=Se(i=>i.diffuseColor.mul(1/Math.PI)),pJ=()=>ae(.25),mJ=Se(({dotNH:i})=>Kd.mul(ae(.5)).add(1).mul(ae(1/Math.PI)).mul(i.pow(Kd))),gJ=Se(({lightDirection:i})=>{const e=i.add(sr).normalize(),t=Li.dot(e).clamp(),n=sr.dot(e).clamp(),r=n5({f0:Fo,f90:1,dotVH:n}),s=pJ(),o=mJ({dotNH:t});return r.mul(s).mul(o)});class nL extends tL{constructor(e=!0){super(),this.specular=e}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Li.dot(e).clamp().mul(t);n.directDiffuse.addAssign(s.mul(Sc({diffuseColor:wi.rgb}))),this.specular===!0&&n.directSpecular.addAssign(s.mul(gJ({lightDirection:e})).mul(n8))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(Sc({diffuseColor:wi}))),r.indirectDiffuse.mulAssign(t)}}const yJ=new U0;class vJ extends Cr{static get type(){return"MeshLambertNodeMaterial"}constructor(e){super(),this.isMeshLambertNodeMaterial=!0,this.lights=!0,this.setDefaultValues(yJ),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new rx(t):null}setupLightingModel(){return new nL(!1)}}const _J=new X9;class xJ extends Cr{static get type(){return"MeshPhongNodeMaterial"}constructor(e){super(),this.isMeshPhongNodeMaterial=!0,this.lights=!0,this.shininessNode=null,this.specularNode=null,this.setDefaultValues(_J),this.setValues(e)}setupEnvironment(e){const t=super.setupEnvironment(e);return t?new rx(t):null}setupLightingModel(){return new nL}setupVariants(){const e=(this.shininessNode?ae(this.shininessNode):nI).max(1e-4);Kd.assign(e);const t=this.specularNode||rI;Fo.assign(t)}copy(e){return this.shininessNode=e.shininessNode,this.specularNode=e.specularNode,super.copy(e)}}const iL=Se(i=>{if(i.geometry.hasAttribute("normal")===!1)return ae(0);const e=e5.dFdx().abs().max(e5.dFdy().abs());return e.x.max(e.y).max(e.z)}),sx=Se(i=>{const{roughness:e}=i,t=iL();let n=e.max(.0525);return n=n.add(t),n=n.min(1),n}),rL=Se(({alpha:i,dotNL:e,dotNV:t})=>{const n=i.pow2(),r=e.mul(n.add(n.oneMinus().mul(t.pow2())).sqrt()),s=t.mul(n.add(n.oneMinus().mul(e.pow2())).sqrt());return Sa(.5,r.add(s).max(NP))}).setLayout({name:"V_GGX_SmithCorrelated",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNL",type:"float"},{name:"dotNV",type:"float"}]}),bJ=Se(({alphaT:i,alphaB:e,dotTV:t,dotBV:n,dotTL:r,dotBL:s,dotNV:o,dotNL:a})=>{const l=a.mul(be(i.mul(t),e.mul(n),o).length()),u=o.mul(be(i.mul(r),e.mul(s),a).length());return Sa(.5,l.add(u)).saturate()}).setLayout({name:"V_GGX_SmithCorrelated_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotTV",type:"float",qualifier:"in"},{name:"dotBV",type:"float",qualifier:"in"},{name:"dotTL",type:"float",qualifier:"in"},{name:"dotBL",type:"float",qualifier:"in"},{name:"dotNV",type:"float",qualifier:"in"},{name:"dotNL",type:"float",qualifier:"in"}]}),sL=Se(({alpha:i,dotNH:e})=>{const t=i.pow2(),n=e.pow2().mul(t.oneMinus()).oneMinus();return t.div(n.pow2()).mul(1/Math.PI)}).setLayout({name:"D_GGX",type:"float",inputs:[{name:"alpha",type:"float"},{name:"dotNH",type:"float"}]}),SJ=ae(1/Math.PI),TJ=Se(({alphaT:i,alphaB:e,dotNH:t,dotTH:n,dotBH:r})=>{const s=i.mul(e),o=be(e.mul(n),i.mul(r),s.mul(t)),a=o.dot(o),l=s.div(a);return SJ.mul(s.mul(l.pow2()))}).setLayout({name:"D_GGX_Anisotropic",type:"float",inputs:[{name:"alphaT",type:"float",qualifier:"in"},{name:"alphaB",type:"float",qualifier:"in"},{name:"dotNH",type:"float",qualifier:"in"},{name:"dotTH",type:"float",qualifier:"in"},{name:"dotBH",type:"float",qualifier:"in"}]}),Sy=Se(({lightDirection:i,f0:e,f90:t,roughness:n,f:r,normalView:s=Li,USE_IRIDESCENCE:o,USE_ANISOTROPY:a})=>{const l=n.pow2(),u=i.add(sr).normalize(),c=s.dot(i).clamp(),A=s.dot(sr).clamp(),m=s.dot(u).clamp(),_=sr.dot(u).clamp();let b=n5({f0:e,f90:t,dotVH:_}),M,w;if(R8(o)&&(b=aA.mix(b,r)),R8(a)){const T=Jh.dot(i),N=Jh.dot(sr),P=Jh.dot(u),I=X2.dot(i),B=X2.dot(sr),F=X2.dot(u);M=bJ({alphaT:Yd,alphaB:l,dotTV:N,dotBV:B,dotTL:T,dotBL:I,dotNV:A,dotNL:c}),w=TJ({alphaT:Yd,alphaB:l,dotNH:m,dotTH:P,dotBH:F})}else M=rL({alpha:l,dotNL:c,dotNV:A}),w=sL({alpha:l,dotNH:m});return b.mul(M).mul(w)}),ox=Se(({roughness:i,dotNV:e})=>{const t=sn(-1,-.0275,-.572,.022),n=sn(1,.0425,1.04,-.04),r=i.mul(t).add(n),s=r.x.mul(r.x).min(e.mul(-9.28).exp2()).mul(r.x).add(r.y);return Ke(-1.04,1.04).mul(s).add(r.zw)}).setLayout({name:"DFGApprox",type:"vec2",inputs:[{name:"roughness",type:"float"},{name:"dotNV",type:"vec3"}]}),oL=Se(i=>{const{dotNV:e,specularColor:t,specularF90:n,roughness:r}=i,s=ox({dotNV:e,roughness:r});return t.mul(s.x).add(n.mul(s.y))}),aL=Se(({f:i,f90:e,dotVH:t})=>{const n=t.oneMinus().saturate(),r=n.mul(n),s=n.mul(r,r).clamp(0,.9999);return i.sub(be(e).mul(s)).div(s.oneMinus())}).setLayout({name:"Schlick_to_F0",type:"vec3",inputs:[{name:"f",type:"vec3"},{name:"f90",type:"float"},{name:"dotVH",type:"float"}]}),wJ=Se(({roughness:i,dotNH:e})=>{const t=i.pow2(),n=ae(1).div(t),s=e.pow2().oneMinus().max(.0078125);return ae(2).add(n).mul(s.pow(n.mul(.5))).div(2*Math.PI)}).setLayout({name:"D_Charlie",type:"float",inputs:[{name:"roughness",type:"float"},{name:"dotNH",type:"float"}]}),MJ=Se(({dotNV:i,dotNL:e})=>ae(1).div(ae(4).mul(e.add(i).sub(e.mul(i))))).setLayout({name:"V_Neubelt",type:"float",inputs:[{name:"dotNV",type:"float"},{name:"dotNL",type:"float"}]}),EJ=Se(({lightDirection:i})=>{const e=i.add(sr).normalize(),t=Li.dot(i).clamp(),n=Li.dot(sr).clamp(),r=Li.dot(e).clamp(),s=wJ({roughness:oA,dotNH:r}),o=MJ({dotNV:n,dotNL:t});return O2.mul(s).mul(o)}),RJ=Se(({N:i,V:e,roughness:t})=>{const s=.0078125,o=i.dot(e).saturate(),a=Ke(t,o.oneMinus().sqrt());return a.assign(a.mul(.984375).add(s)),a}).setLayout({name:"LTC_Uv",type:"vec2",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"roughness",type:"float"}]}),CJ=Se(({f:i})=>{const e=i.length();return _r(e.mul(e).add(i.z).div(e.add(1)),0)}).setLayout({name:"LTC_ClippedSphereFormFactor",type:"float",inputs:[{name:"f",type:"vec3"}]}),lf=Se(({v1:i,v2:e})=>{const t=i.dot(e),n=t.abs().toVar(),r=n.mul(.0145206).add(.4965155).mul(n).add(.8543985).toVar(),s=n.add(4.1616724).mul(n).add(3.417594).toVar(),o=r.div(s),a=t.greaterThan(0).select(o,_r(t.mul(t).oneMinus(),1e-7).inverseSqrt().mul(.5).sub(o));return i.cross(e).mul(a)}).setLayout({name:"LTC_EdgeVectorFormFactor",type:"vec3",inputs:[{name:"v1",type:"vec3"},{name:"v2",type:"vec3"}]}),cw=Se(({N:i,V:e,P:t,mInv:n,p0:r,p1:s,p2:o,p3:a})=>{const l=s.sub(r).toVar(),u=a.sub(r).toVar(),c=l.cross(u),A=be().toVar();return gn(c.dot(t.sub(r)).greaterThanEqual(0),()=>{const m=e.sub(i.mul(e.dot(i))).normalize(),_=i.cross(m).negate(),b=n.mul(no(m,_,i).transpose()).toVar(),M=b.mul(r.sub(t)).normalize().toVar(),w=b.mul(s.sub(t)).normalize().toVar(),T=b.mul(o.sub(t)).normalize().toVar(),N=b.mul(a.sub(t)).normalize().toVar(),P=be(0).toVar();P.addAssign(lf({v1:M,v2:w})),P.addAssign(lf({v1:w,v2:T})),P.addAssign(lf({v1:T,v2:N})),P.addAssign(lf({v1:N,v2:M})),A.assign(be(CJ({f:P})))}),A}).setLayout({name:"LTC_Evaluate",type:"vec3",inputs:[{name:"N",type:"vec3"},{name:"V",type:"vec3"},{name:"P",type:"vec3"},{name:"mInv",type:"mat3"},{name:"p0",type:"vec3"},{name:"p1",type:"vec3"},{name:"p2",type:"vec3"},{name:"p3",type:"vec3"}]}),wA=1/6,lL=i=>Hn(wA,Hn(i,Hn(i,i.negate().add(3)).sub(3)).add(1)),Ty=i=>Hn(wA,Hn(i,Hn(i,Hn(3,i).sub(6))).add(4)),uL=i=>Hn(wA,Hn(i,Hn(i,Hn(-3,i).add(3)).add(3)).add(1)),wy=i=>Hn(wA,Ha(i,3)),hw=i=>lL(i).add(Ty(i)),fw=i=>uL(i).add(wy(i)),dw=i=>Br(-1,Ty(i).div(lL(i).add(Ty(i)))),Aw=i=>Br(1,wy(i).div(uL(i).add(wy(i)))),pw=(i,e,t)=>{const n=i.uvNode,r=Hn(n,e.zw).add(.5),s=ll(r),o=A1(r),a=hw(o.x),l=fw(o.x),u=dw(o.x),c=Aw(o.x),A=dw(o.y),m=Aw(o.y),_=Ke(s.x.add(u),s.y.add(A)).sub(.5).mul(e.xy),b=Ke(s.x.add(c),s.y.add(A)).sub(.5).mul(e.xy),M=Ke(s.x.add(u),s.y.add(m)).sub(.5).mul(e.xy),w=Ke(s.x.add(c),s.y.add(m)).sub(.5).mul(e.xy),T=hw(o.y).mul(Br(a.mul(i.sample(_).level(t)),l.mul(i.sample(b).level(t)))),N=fw(o.y).mul(Br(a.mul(i.sample(M).level(t)),l.mul(i.sample(w).level(t))));return T.add(N)},ax=Se(([i,e])=>{const t=Ke(i.size(me(e))),n=Ke(i.size(me(e.add(1)))),r=Sa(1,t),s=Sa(1,n),o=pw(i,sn(r,t),ll(e)),a=pw(i,sn(s,n),cA(e));return A1(e).mix(o,a)}),PJ=Se(([i,e])=>{const t=e.mul(V_(i));return ax(i,t)}),mw=Se(([i,e,t,n,r])=>{const s=be(D_(e.negate(),h1(i),Sa(1,n))),o=be(ul(r[0].xyz),ul(r[1].xyz),ul(r[2].xyz));return h1(s).mul(t.mul(o))}).setLayout({name:"getVolumeTransmissionRay",type:"vec3",inputs:[{name:"n",type:"vec3"},{name:"v",type:"vec3"},{name:"thickness",type:"float"},{name:"ior",type:"float"},{name:"modelMatrix",type:"mat4"}]}),NJ=Se(([i,e])=>i.mul(Za(e.mul(2).sub(2),0,1))).setLayout({name:"applyIorToRoughness",type:"float",inputs:[{name:"roughness",type:"float"},{name:"ior",type:"float"}]}),IJ=Z_(),LJ=Z_(),gw=Se(([i,e,t],{material:n})=>{const s=(n.side===Bi?IJ:LJ).sample(i),o=al(B8.x).mul(NJ(e,t));return ax(s,o)}),yw=Se(([i,e,t])=>(gn(t.notEqual(0),()=>{const n=uA(e).negate().div(t);return w_(n.negate().mul(i))}),be(1))).setLayout({name:"volumeAttenuation",type:"vec3",inputs:[{name:"transmissionDistance",type:"float"},{name:"attenuationColor",type:"vec3"},{name:"attenuationDistance",type:"float"}]}),DJ=Se(([i,e,t,n,r,s,o,a,l,u,c,A,m,_,b])=>{let M,w;if(b){M=sn().toVar(),w=be().toVar();const B=c.sub(1).mul(b.mul(.025)),F=be(c.sub(B),c,c.add(B));Di({start:0,end:3},({i:O})=>{const V=F.element(O),U=mw(i,e,A,V,a),z=o.add(U),H=u.mul(l.mul(sn(z,1))),Q=Ke(H.xy.div(H.w)).toVar();Q.addAssign(1),Q.divAssign(2),Q.assign(Ke(Q.x,Q.y.oneMinus()));const Y=gw(Q,t,V);M.element(O).assign(Y.element(O)),M.a.addAssign(Y.a),w.element(O).assign(n.element(O).mul(yw(ul(U),m,_).element(O)))}),M.a.divAssign(3)}else{const B=mw(i,e,A,c,a),F=o.add(B),O=u.mul(l.mul(sn(F,1))),V=Ke(O.xy.div(O.w)).toVar();V.addAssign(1),V.divAssign(2),V.assign(Ke(V.x,V.y.oneMinus())),M=gw(V,t,c),w=n.mul(yw(ul(B),m,_))}const T=w.rgb.mul(M.rgb),N=i.dot(e).clamp(),P=be(oL({dotNV:N,specularColor:r,specularF90:s,roughness:t})),I=w.r.add(w.g,w.b).div(3);return sn(P.oneMinus().mul(T),M.a.oneMinus().mul(I).oneMinus())}),BJ=no(3.2404542,-.969266,.0556434,-1.5371385,1.8760108,-.2040259,-.4985314,.041556,1.0572252),FJ=i=>{const e=i.sqrt();return be(1).add(e).div(be(1).sub(e))},vw=(i,e)=>i.sub(e).div(i.add(e)).pow2(),UJ=(i,e)=>{const t=i.mul(2*Math.PI*1e-9),n=be(54856e-17,44201e-17,52481e-17),r=be(1681e3,1795300,2208400),s=be(43278e5,93046e5,66121e5),o=ae(9747e-17*Math.sqrt(2*Math.PI*45282e5)).mul(t.mul(2239900).add(e.x).cos()).mul(t.pow2().mul(-45282e5).exp());let a=n.mul(s.mul(2*Math.PI).sqrt()).mul(r.mul(t).add(e).cos()).mul(t.pow2().negate().mul(s).exp());return a=be(a.x.add(o),a.y,a.z).div(10685e-11),BJ.mul(a)},OJ=Se(({outsideIOR:i,eta2:e,cosTheta1:t,thinFilmThickness:n,baseF0:r})=>{const s=_i(i,e,pl(0,.03,n)),a=i.div(s).pow2().mul(t.pow2().oneMinus()).oneMinus();gn(a.lessThan(0),()=>be(1));const l=a.sqrt(),u=vw(s,i),c=n5({f0:u,f90:1,dotVH:t}),A=c.oneMinus(),m=s.lessThan(i).select(Math.PI,0),_=ae(Math.PI).sub(m),b=FJ(r.clamp(0,.9999)),M=vw(b,s.toVec3()),w=n5({f0:M,f90:1,dotVH:l}),T=be(b.x.lessThan(s).select(Math.PI,0),b.y.lessThan(s).select(Math.PI,0),b.z.lessThan(s).select(Math.PI,0)),N=s.mul(n,l,2),P=be(_).add(T),I=c.mul(w).clamp(1e-5,.9999),B=I.sqrt(),F=A.pow2().mul(w).div(be(1).sub(I)),V=c.add(F).toVar(),U=F.sub(A).toVar();return Di({start:1,end:2,condition:"<=",name:"m"},({m:z})=>{U.mulAssign(B);const H=UJ(ae(z).mul(N),ae(z).mul(P)).mul(2);V.addAssign(U.mul(H))}),V.max(be(0))}).setLayout({name:"evalIridescence",type:"vec3",inputs:[{name:"outsideIOR",type:"float"},{name:"eta2",type:"float"},{name:"cosTheta1",type:"float"},{name:"thinFilmThickness",type:"float"},{name:"baseF0",type:"vec3"}]}),kJ=Se(({normal:i,viewDir:e,roughness:t})=>{const n=i.dot(e).saturate(),r=t.pow2(),s=Ss(t.lessThan(.25),ae(-339.2).mul(r).add(ae(161.4).mul(t)).sub(25.9),ae(-8.48).mul(r).add(ae(14.3).mul(t)).sub(9.95)),o=Ss(t.lessThan(.25),ae(44).mul(r).sub(ae(23.7).mul(t)).add(3.26),ae(1.97).mul(r).sub(ae(3.27).mul(t)).add(.72));return Ss(t.lessThan(.25),0,ae(.1).mul(t).sub(.025)).add(s.mul(n).add(o).exp()).mul(1/Math.PI).saturate()}),_m=be(.04),xm=ae(1);class cL extends TA{constructor(e=!1,t=!1,n=!1,r=!1,s=!1,o=!1){super(),this.clearcoat=e,this.sheen=t,this.iridescence=n,this.anisotropy=r,this.transmission=s,this.dispersion=o,this.clearcoatRadiance=null,this.clearcoatSpecularDirect=null,this.clearcoatSpecularIndirect=null,this.sheenSpecularDirect=null,this.sheenSpecularIndirect=null,this.iridescenceFresnel=null,this.iridescenceF0=null}start(e){if(this.clearcoat===!0&&(this.clearcoatRadiance=be().toVar("clearcoatRadiance"),this.clearcoatSpecularDirect=be().toVar("clearcoatSpecularDirect"),this.clearcoatSpecularIndirect=be().toVar("clearcoatSpecularIndirect")),this.sheen===!0&&(this.sheenSpecularDirect=be().toVar("sheenSpecularDirect"),this.sheenSpecularIndirect=be().toVar("sheenSpecularIndirect")),this.iridescence===!0){const t=Li.dot(sr).clamp();this.iridescenceFresnel=OJ({outsideIOR:ae(1),eta2:m_,cosTheta1:t,thinFilmThickness:g_,baseF0:Fo}),this.iridescenceF0=aL({f:this.iridescenceFresnel,f90:1,dotVH:t})}if(this.transmission===!0){const t=cl,n=CN.sub(cl).normalize(),r=Tu,s=e.context;s.backdrop=DJ(r,n,el,wi,Fo,L8,t,Wa,s0,Bc,e8,y_,__,v_,this.dispersion?x_:null),s.backdropAlpha=Zd,wi.a.mulAssign(_i(1,s.backdrop.a,Zd))}super.start(e)}computeMultiscattering(e,t,n){const r=Li.dot(sr).clamp(),s=ox({roughness:el,dotNV:r}),a=(this.iridescenceF0?aA.mix(Fo,this.iridescenceF0):Fo).mul(s.x).add(n.mul(s.y)),u=s.x.add(s.y).oneMinus(),c=Fo.add(Fo.oneMinus().mul(.047619)),A=a.mul(c).div(u.mul(c).oneMinus());e.addAssign(a),t.addAssign(A.mul(u))}direct({lightDirection:e,lightColor:t,reflectedLight:n}){const s=Li.dot(e).clamp().mul(t);if(this.sheen===!0&&this.sheenSpecularDirect.addAssign(s.mul(EJ({lightDirection:e}))),this.clearcoat===!0){const a=k2.dot(e).clamp().mul(t);this.clearcoatSpecularDirect.addAssign(a.mul(Sy({lightDirection:e,f0:_m,f90:xm,roughness:I8,normalView:k2})))}n.directDiffuse.addAssign(s.mul(Sc({diffuseColor:wi.rgb}))),n.directSpecular.addAssign(s.mul(Sy({lightDirection:e,f0:Fo,f90:1,roughness:el,iridescence:this.iridescence,f:this.iridescenceFresnel,USE_IRIDESCENCE:this.iridescence,USE_ANISOTROPY:this.anisotropy})))}directRectArea({lightColor:e,lightPosition:t,halfWidth:n,halfHeight:r,reflectedLight:s,ltc_1:o,ltc_2:a}){const l=t.add(n).sub(r),u=t.sub(n).sub(r),c=t.sub(n).add(r),A=t.add(n).add(r),m=Li,_=sr,b=Rr.toVar(),M=RJ({N:m,V:_,roughness:el}),w=o.sample(M).toVar(),T=a.sample(M).toVar(),N=no(be(w.x,0,w.y),be(0,1,0),be(w.z,0,w.w)).toVar(),P=Fo.mul(T.x).add(Fo.oneMinus().mul(T.y)).toVar();s.directSpecular.addAssign(e.mul(P).mul(cw({N:m,V:_,P:b,mInv:N,p0:l,p1:u,p2:c,p3:A}))),s.directDiffuse.addAssign(e.mul(wi).mul(cw({N:m,V:_,P:b,mInv:no(1,0,0,0,1,0,0,0,1),p0:l,p1:u,p2:c,p3:A})))}indirect(e){this.indirectDiffuse(e),this.indirectSpecular(e),this.ambientOcclusion(e)}indirectDiffuse(e){const{irradiance:t,reflectedLight:n}=e.context;n.indirectDiffuse.addAssign(t.mul(Sc({diffuseColor:wi})))}indirectSpecular(e){const{radiance:t,iblIrradiance:n,reflectedLight:r}=e.context;if(this.sheen===!0&&this.sheenSpecularIndirect.addAssign(n.mul(O2,kJ({normal:Li,viewDir:sr,roughness:oA}))),this.clearcoat===!0){const c=k2.dot(sr).clamp(),A=oL({dotNV:c,specularColor:_m,specularF90:xm,roughness:I8});this.clearcoatSpecularIndirect.addAssign(this.clearcoatRadiance.mul(A))}const s=be().toVar("singleScattering"),o=be().toVar("multiScattering"),a=n.mul(1/Math.PI);this.computeMultiscattering(s,o,L8);const l=s.add(o),u=wi.mul(l.r.max(l.g).max(l.b).oneMinus());r.indirectSpecular.addAssign(t.mul(s)),r.indirectSpecular.addAssign(o.mul(a)),r.indirectDiffuse.addAssign(u.mul(a))}ambientOcclusion(e){const{ambientOcclusion:t,reflectedLight:n}=e.context,s=Li.dot(sr).clamp().add(t),o=el.mul(-16).oneMinus().negate().exp2(),a=t.sub(s.pow(o).oneMinus()).clamp();this.clearcoat===!0&&this.clearcoatSpecularIndirect.mulAssign(t),this.sheen===!0&&this.sheenSpecularIndirect.mulAssign(t),n.indirectDiffuse.mulAssign(t),n.indirectSpecular.mulAssign(a)}finish({context:e}){const{outgoingLight:t}=e;if(this.clearcoat===!0){const n=k2.dot(sr).clamp(),r=n5({dotVH:n,f0:_m,f90:xm}),s=t.mul(Qd.mul(r).oneMinus()).add(this.clearcoatSpecularDirect.add(this.clearcoatSpecularIndirect).mul(Qd));t.assign(s)}if(this.sheen===!0){const n=O2.r.max(O2.g).max(O2.b).mul(.157).oneMinus(),r=t.mul(n).add(this.sheenSpecularDirect,this.sheenSpecularIndirect);t.assign(r)}}}const _w=ae(1),My=ae(-2),uf=ae(.8),bm=ae(-1),cf=ae(.4),Sm=ae(2),hf=ae(.305),Tm=ae(3),xw=ae(.21),VJ=ae(4),bw=ae(4),zJ=ae(16),GJ=Se(([i])=>{const e=be(Ki(i)).toVar(),t=ae(-1).toVar();return gn(e.x.greaterThan(e.z),()=>{gn(e.x.greaterThan(e.y),()=>{t.assign(Ss(i.x.greaterThan(0),0,3))}).Else(()=>{t.assign(Ss(i.y.greaterThan(0),1,4))})}).Else(()=>{gn(e.z.greaterThan(e.y),()=>{t.assign(Ss(i.z.greaterThan(0),2,5))}).Else(()=>{t.assign(Ss(i.y.greaterThan(0),1,4))})}),t}).setLayout({name:"getFace",type:"float",inputs:[{name:"direction",type:"vec3"}]}),qJ=Se(([i,e])=>{const t=Ke().toVar();return gn(e.equal(0),()=>{t.assign(Ke(i.z,i.y).div(Ki(i.x)))}).ElseIf(e.equal(1),()=>{t.assign(Ke(i.x.negate(),i.z.negate()).div(Ki(i.y)))}).ElseIf(e.equal(2),()=>{t.assign(Ke(i.x.negate(),i.y).div(Ki(i.z)))}).ElseIf(e.equal(3),()=>{t.assign(Ke(i.z.negate(),i.y).div(Ki(i.x)))}).ElseIf(e.equal(4),()=>{t.assign(Ke(i.x.negate(),i.z).div(Ki(i.y)))}).Else(()=>{t.assign(Ke(i.x,i.y).div(Ki(i.z)))}),Hn(.5,t.add(1))}).setLayout({name:"getUV",type:"vec2",inputs:[{name:"direction",type:"vec3"},{name:"face",type:"float"}]}),HJ=Se(([i])=>{const e=ae(0).toVar();return gn(i.greaterThanEqual(uf),()=>{e.assign(_w.sub(i).mul(bm.sub(My)).div(_w.sub(uf)).add(My))}).ElseIf(i.greaterThanEqual(cf),()=>{e.assign(uf.sub(i).mul(Sm.sub(bm)).div(uf.sub(cf)).add(bm))}).ElseIf(i.greaterThanEqual(hf),()=>{e.assign(cf.sub(i).mul(Tm.sub(Sm)).div(cf.sub(hf)).add(Sm))}).ElseIf(i.greaterThanEqual(xw),()=>{e.assign(hf.sub(i).mul(VJ.sub(Tm)).div(hf.sub(xw)).add(Tm))}).Else(()=>{e.assign(ae(-2).mul(al(Hn(1.16,i))))}),e}).setLayout({name:"roughnessToMip",type:"float",inputs:[{name:"roughness",type:"float"}]}),hL=Se(([i,e])=>{const t=i.toVar();t.assign(Hn(2,t).sub(1));const n=be(t,1).toVar();return gn(e.equal(0),()=>{n.assign(n.zyx)}).ElseIf(e.equal(1),()=>{n.assign(n.xzy),n.xz.mulAssign(-1)}).ElseIf(e.equal(2),()=>{n.x.mulAssign(-1)}).ElseIf(e.equal(3),()=>{n.assign(n.zyx),n.xz.mulAssign(-1)}).ElseIf(e.equal(4),()=>{n.assign(n.xzy),n.xy.mulAssign(-1)}).ElseIf(e.equal(5),()=>{n.z.mulAssign(-1)}),n}).setLayout({name:"getDirection",type:"vec3",inputs:[{name:"uv",type:"vec2"},{name:"face",type:"float"}]}),fL=Se(([i,e,t,n,r,s])=>{const o=ae(t),a=be(e),l=Za(HJ(o),My,s),u=A1(l),c=ll(l),A=be(Ey(i,a,c,n,r,s)).toVar();return gn(u.notEqual(0),()=>{const m=be(Ey(i,a,c.add(1),n,r,s)).toVar();A.assign(_i(A,m,u))}),A}),Ey=Se(([i,e,t,n,r,s])=>{const o=ae(t).toVar(),a=be(e),l=ae(GJ(a)).toVar(),u=ae(_r(bw.sub(o),0)).toVar();o.assign(_r(o,bw));const c=ae(J4(o)).toVar(),A=Ke(qJ(a,l).mul(c.sub(2)).add(1)).toVar();return gn(l.greaterThan(2),()=>{A.y.addAssign(c),l.subAssign(3)}),A.x.addAssign(l.mul(c)),A.x.addAssign(u.mul(Hn(3,zJ))),A.y.addAssign(Hn(4,J4(s).sub(c))),A.x.mulAssign(n),A.y.mulAssign(r),i.sample(A).grad(Ke(),Ke())}),wm=Se(({envMap:i,mipInt:e,outputDirection:t,theta:n,axis:r,CUBEUV_TEXEL_WIDTH:s,CUBEUV_TEXEL_HEIGHT:o,CUBEUV_MAX_MIP:a})=>{const l=zl(n),u=t.mul(l).add(r.cross(t).mul(ya(n))).add(r.mul(r.dot(t).mul(l.oneMinus())));return Ey(i,u,e,s,o,a)}),dL=Se(({n:i,latitudinal:e,poleAxis:t,outputDirection:n,weights:r,samples:s,dTheta:o,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:A})=>{const m=be(Ss(e,t,dA(t,n))).toVar();gn(m.equal(be(0)),()=>{m.assign(be(n.z,0,n.x.negate()))}),m.assign(h1(m));const _=be().toVar();return _.addAssign(r.element(0).mul(wm({theta:0,axis:m,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:A}))),Di({start:me(1),end:i},({i:b})=>{gn(b.greaterThanEqual(s),()=>{OI()});const M=ae(o.mul(ae(b))).toVar();_.addAssign(r.element(b).mul(wm({theta:M.mul(-1),axis:m,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:A}))),_.addAssign(r.element(b).mul(wm({theta:M,axis:m,outputDirection:n,mipInt:a,envMap:l,CUBEUV_TEXEL_WIDTH:u,CUBEUV_TEXEL_HEIGHT:c,CUBEUV_MAX_MIP:A})))}),sn(_,1)}),p4=4,Sw=[.125,.215,.35,.446,.526,.582],C2=20,Mm=new rl(-1,1,1,-1,0,1),WJ=new tr(90,1),Tw=new Et;let Em=null,Rm=0,Cm=0;const E2=(1+Math.sqrt(5))/2,W3=1/E2,ww=[new J(-E2,W3,0),new J(E2,W3,0),new J(-W3,0,E2),new J(W3,0,E2),new J(0,E2,-W3),new J(0,E2,W3),new J(-1,1,-1),new J(1,1,-1),new J(-1,1,1),new J(1,1,1)],jJ=new J,AL=new WeakMap,$J=[3,1,5,0,4,2],Pm=hL(Vi(),d1("faceIndex")).normalize(),lx=be(Pm.x,Pm.y,Pm.z);class XJ{constructor(e){this._renderer=e,this._pingPongRenderTarget=null,this._lodMax=0,this._cubeSize=0,this._lodPlanes=[],this._sizeLods=[],this._sigmas=[],this._lodMeshes=[],this._blurMaterial=null,this._cubemapMaterial=null,this._equirectMaterial=null,this._backgroundBox=null}get _hasInitialized(){return this._renderer.hasInitialized()}fromScene(e,t=0,n=.1,r=100,s={}){const{size:o=256,position:a=jJ,renderTarget:l=null}=s;if(this._setSize(o),this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromScene() called before the backend is initialized. Try using .fromSceneAsync() instead.");const c=l||this._allocateTarget();return s.renderTarget=c,this.fromSceneAsync(e,t,n,r,s),c}Em=this._renderer.getRenderTarget(),Rm=this._renderer.getActiveCubeFace(),Cm=this._renderer.getActiveMipmapLevel();const u=l||this._allocateTarget();return u.depthBuffer=!0,this._init(u),this._sceneToCubeUV(e,n,r,u,a),t>0&&this._blur(u,0,0,t),this._applyPMREM(u),this._cleanup(u),u}async fromSceneAsync(e,t=0,n=.1,r=100,s={}){return this._hasInitialized===!1&&await this._renderer.init(),this.fromScene(e,t,n,r,s)}fromEquirectangular(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromEquirectangular() called before the backend is initialized. Try using .fromEquirectangularAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromEquirectangularAsync(e,n),n}return this._fromTexture(e,t)}async fromEquirectangularAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}fromCubemap(e,t=null){if(this._hasInitialized===!1){console.warn("THREE.PMREMGenerator: .fromCubemap() called before the backend is initialized. Try using .fromCubemapAsync() instead."),this._setSizeFromTexture(e);const n=t||this._allocateTarget();return this.fromCubemapAsync(e,t),n}return this._fromTexture(e,t)}async fromCubemapAsync(e,t=null){return this._hasInitialized===!1&&await this._renderer.init(),this._fromTexture(e,t)}async compileCubemapShader(){this._cubemapMaterial===null&&(this._cubemapMaterial=Ew(),await this._compileMaterial(this._cubemapMaterial))}async compileEquirectangularShader(){this._equirectMaterial===null&&(this._equirectMaterial=Rw(),await this._compileMaterial(this._equirectMaterial))}dispose(){this._dispose(),this._cubemapMaterial!==null&&this._cubemapMaterial.dispose(),this._equirectMaterial!==null&&this._equirectMaterial.dispose(),this._backgroundBox!==null&&(this._backgroundBox.geometry.dispose(),this._backgroundBox.material.dispose())}_setSizeFromTexture(e){e.mapping===_a||e.mapping===Xa?this._setSize(e.image.length===0?16:e.image[0].width||e.image[0].image.width):this._setSize(e.image.width/4)}_setSize(e){this._lodMax=Math.floor(Math.log2(e)),this._cubeSize=Math.pow(2,this._lodMax)}_dispose(){this._blurMaterial!==null&&this._blurMaterial.dispose(),this._pingPongRenderTarget!==null&&this._pingPongRenderTarget.dispose();for(let e=0;e<this._lodPlanes.length;e++)this._lodPlanes[e].dispose()}_cleanup(e){this._renderer.setRenderTarget(Em,Rm,Cm),e.scissorTest=!1,ff(e,0,0,e.width,e.height)}_fromTexture(e,t){this._setSizeFromTexture(e),Em=this._renderer.getRenderTarget(),Rm=this._renderer.getActiveCubeFace(),Cm=this._renderer.getActiveMipmapLevel();const n=t||this._allocateTarget();return this._init(n),this._textureToCubeUV(e,n),this._applyPMREM(n),this._cleanup(n),n}_allocateTarget(){const e=3*Math.max(this._cubeSize,112),t=4*this._cubeSize;return Mw(e,t)}_init(e){if(this._pingPongRenderTarget===null||this._pingPongRenderTarget.width!==e.width||this._pingPongRenderTarget.height!==e.height){this._pingPongRenderTarget!==null&&this._dispose(),this._pingPongRenderTarget=Mw(e.width,e.height);const{_lodMax:t}=this;({sizeLods:this._sizeLods,lodPlanes:this._lodPlanes,sigmas:this._sigmas,lodMeshes:this._lodMeshes}=QJ(t)),this._blurMaterial=YJ(t,e.width,e.height)}}async _compileMaterial(e){const t=new ei(this._lodPlanes[0],e);await this._renderer.compile(t,Mm)}_sceneToCubeUV(e,t,n,r,s){const o=WJ;o.near=t,o.far=n;const a=[1,1,1,1,-1,1],l=[1,-1,1,-1,1,-1],u=this._renderer,c=u.autoClear;u.getClearColor(Tw),u.autoClear=!1;let A=this._backgroundBox;if(A===null){const b=new Bs({name:"PMREM.Background",side:Bi,depthWrite:!1,depthTest:!1});A=new ei(new _l,b)}let m=!1;const _=e.background;_?_.isColor&&(A.material.color.copy(_),e.background=null,m=!0):(A.material.color.copy(Tw),m=!0),u.setRenderTarget(r),u.clear(),m&&u.render(A,o);for(let b=0;b<6;b++){const M=b%3;M===0?(o.up.set(0,a[b],0),o.position.set(s.x,s.y,s.z),o.lookAt(s.x+l[b],s.y,s.z)):M===1?(o.up.set(0,0,a[b]),o.position.set(s.x,s.y,s.z),o.lookAt(s.x,s.y+l[b],s.z)):(o.up.set(0,a[b],0),o.position.set(s.x,s.y,s.z),o.lookAt(s.x,s.y,s.z+l[b]));const w=this._cubeSize;ff(r,M*w,b>2?w:0,w,w),u.render(e,o)}u.autoClear=c,e.background=_}_textureToCubeUV(e,t){const n=this._renderer,r=e.mapping===_a||e.mapping===Xa;r?this._cubemapMaterial===null&&(this._cubemapMaterial=Ew(e)):this._equirectMaterial===null&&(this._equirectMaterial=Rw(e));const s=r?this._cubemapMaterial:this._equirectMaterial;s.fragmentNode.value=e;const o=this._lodMeshes[0];o.material=s;const a=this._cubeSize;ff(t,0,0,3*a,2*a),n.setRenderTarget(t),n.render(o,Mm)}_applyPMREM(e){const t=this._renderer,n=t.autoClear;t.autoClear=!1;const r=this._lodPlanes.length;for(let s=1;s<r;s++){const o=Math.sqrt(this._sigmas[s]*this._sigmas[s]-this._sigmas[s-1]*this._sigmas[s-1]),a=ww[(r-s-1)%ww.length];this._blur(e,s-1,s,o,a)}t.autoClear=n}_blur(e,t,n,r,s){const o=this._pingPongRenderTarget;this._halfBlur(e,o,t,n,r,"latitudinal",s),this._halfBlur(o,e,n,n,r,"longitudinal",s)}_halfBlur(e,t,n,r,s,o,a){const l=this._renderer,u=this._blurMaterial;o!=="latitudinal"&&o!=="longitudinal"&&console.error("blur direction must be either latitudinal or longitudinal!");const c=3,A=this._lodMeshes[r];A.material=u;const m=AL.get(u),_=this._sizeLods[n]-1,b=isFinite(s)?Math.PI/(2*_):2*Math.PI/(2*C2-1),M=s/b,w=isFinite(s)?1+Math.floor(c*M):C2;w>C2&&console.warn(`sigmaRadians, ${s}, is too large and will clip, as it requested ${w} samples when the maximum is set to ${C2}`);const T=[];let N=0;for(let O=0;O<C2;++O){const V=O/M,U=Math.exp(-V*V/2);T.push(U),O===0?N+=U:O<w&&(N+=2*U)}for(let O=0;O<T.length;O++)T[O]=T[O]/N;e.texture.frame=(e.texture.frame||0)+1,m.envMap.value=e.texture,m.samples.value=w,m.weights.array=T,m.latitudinal.value=o==="latitudinal"?1:0,a&&(m.poleAxis.value=a);const{_lodMax:P}=this;m.dTheta.value=b,m.mipInt.value=P-n;const I=this._sizeLods[r],B=3*I*(r>P-p4?r-P+p4:0),F=4*(this._cubeSize-I);ff(t,B,F,3*I,2*I),l.setRenderTarget(t),l.render(A,Mm)}}function QJ(i){const e=[],t=[],n=[],r=[];let s=i;const o=i-p4+1+Sw.length;for(let a=0;a<o;a++){const l=Math.pow(2,s);t.push(l);let u=1/l;a>i-p4?u=Sw[a-i+p4-1]:a===0&&(u=0),n.push(u);const c=1/(l-2),A=-c,m=1+c,_=[A,A,m,A,m,m,A,A,m,m,A,m],b=6,M=6,w=3,T=2,N=1,P=new Float32Array(w*M*b),I=new Float32Array(T*M*b),B=new Float32Array(N*M*b);for(let O=0;O<b;O++){const V=O%3*2/3-1,U=O>2?0:-1,z=[V,U,0,V+2/3,U,0,V+2/3,U+1,0,V,U,0,V+2/3,U+1,0,V,U+1,0],H=$J[O];P.set(z,w*M*H),I.set(_,T*M*H);const Q=[H,H,H,H,H,H];B.set(Q,N*M*H)}const F=new Tn;F.setAttribute("position",new oi(P,w)),F.setAttribute("uv",new oi(I,T)),F.setAttribute("faceIndex",new oi(B,N)),e.push(F),r.push(new ei(F,null)),s>p4&&s--}return{lodPlanes:e,sizeLods:t,sigmas:n,lodMeshes:r}}function Mw(i,e){const t={magFilter:Wi,minFilter:Wi,generateMipmaps:!1,type:Yr,format:Zi,colorSpace:r1},n=new F0(i,e,t);return n.texture.mapping=t1,n.texture.name="PMREM.cubeUv",n.texture.isPMREMTexture=!0,n.scissorTest=!0,n}function ff(i,e,t,n,r){i.viewport.set(e,t,n,r),i.scissor.set(e,t,n,r)}function ux(i){const e=new Cr;return e.depthTest=!1,e.depthWrite=!1,e.blending=qo,e.name=`PMREM_${i}`,e}function YJ(i,e,t){const n=Ga(new Array(C2).fill(0)),r=on(new J(0,1,0)),s=on(0),o=ae(C2),a=on(0),l=on(1),u=ni(null),c=on(0),A=ae(1/e),m=ae(1/t),_=ae(i),b={n:o,latitudinal:a,weights:n,poleAxis:r,outputDirection:lx,dTheta:s,samples:l,envMap:u,mipInt:c,CUBEUV_TEXEL_WIDTH:A,CUBEUV_TEXEL_HEIGHT:m,CUBEUV_MAX_MIP:_},M=ux("blur");return M.fragmentNode=dL({...b,latitudinal:a.equal(1)}),AL.set(M,b),M}function Ew(i){const e=ux("cubemap");return e.fragmentNode=t5(i,lx),e}function Rw(i){const e=ux("equirect");return e.fragmentNode=ni(i,ix(lx),0),e}const Cw=new WeakMap;function KJ(i){const e=Math.log2(i)-2,t=1/i;return{texelWidth:1/(3*Math.max(Math.pow(2,e),7*16)),texelHeight:t,maxMip:e}}function ZJ(i,e,t){const n=JJ(e);let r=n.get(i);if((r!==void 0?r.pmremVersion:-1)!==i.pmremVersion){const o=i.image;if(i.isCubeTexture)if(tee(o))r=t.fromCubemap(i,r);else return null;else if(nee(o))r=t.fromEquirectangular(i,r);else return null;r.pmremVersion=i.pmremVersion,n.set(i,r)}return r.texture}function JJ(i){let e=Cw.get(i);return e===void 0&&(e=new WeakMap,Cw.set(i,e)),e}class eee extends Zr{static get type(){return"PMREMNode"}constructor(e,t=null,n=null){super("vec3"),this._value=e,this._pmrem=null,this.uvNode=t,this.levelNode=n,this._generator=null;const r=new ur;r.isRenderTargetTexture=!0,this._texture=ni(r),this._width=on(0),this._height=on(0),this._maxMip=on(0),this.updateBeforeType=qn.RENDER}set value(e){this._value=e,this._pmrem=null}get value(){return this._value}updateFromTexture(e){const t=KJ(e.image.height);this._texture.value=e,this._width.value=t.texelWidth,this._height.value=t.texelHeight,this._maxMip.value=t.maxMip}updateBefore(e){let t=this._pmrem;const n=t?t.pmremVersion:-1,r=this._value;n!==r.pmremVersion&&(r.isPMREMTexture===!0?t=r:t=ZJ(r,e.renderer,this._generator),t!==null&&(this._pmrem=t,this.updateFromTexture(t)))}setup(e){this._generator===null&&(this._generator=new XJ(e.renderer)),this.updateBefore(e);let t=this.uvNode;t===null&&e.context.getUV&&(t=e.context.getUV(this)),t=j_.mul(be(t.x,t.y.negate(),t.z));let n=this.levelNode;return n===null&&e.context.getTextureLevel&&(n=e.context.getTextureLevel(this)),fL(this._texture,t,n,this._width,this._height,this._maxMip)}dispose(){super.dispose(),this._generator!==null&&this._generator.dispose()}}function tee(i){if(i==null)return!1;let e=0;const t=6;for(let n=0;n<t;n++)i[n]!==void 0&&e++;return e===t}function nee(i){return i==null?!1:i.height>0}const cx=Mn(eee).setParameterLength(1,3),Pw=new WeakMap;class iee extends A5{static get type(){return"EnvironmentNode"}constructor(e=null){super(),this.envNode=e}setup(e){const{material:t}=e;let n=this.envNode;if(n.isTextureNode||n.isMaterialReferenceNode){const A=n.isTextureNode?n.value:t[n.property];let m=Pw.get(A);m===void 0&&(m=cx(A),Pw.set(A,m)),n=m}const s=t.useAnisotropy===!0||t.anisotropy>0?JN:Li,o=n.context(Nw(el,s)).mul(Yf),a=n.context(ree(Tu)).mul(Math.PI).mul(Yf),l=t8(o),u=t8(a);e.context.radiance.addAssign(l),e.context.iblIrradiance.addAssign(u);const c=e.context.lightingModel.clearcoatRadiance;if(c){const A=n.context(Nw(I8,k2)).mul(Yf),m=t8(A);c.addAssign(m)}}}const Nw=(i,e)=>{let t=null;return{getUV:()=>(t===null&&(t=sr.negate().reflect(e),t=i.mul(i).mix(t,e).normalize(),t=t.transformDirection(s0)),t),getTextureLevel:()=>i}},ree=i=>({getUV:()=>i,getTextureLevel:()=>ae(1)}),see=new $9;class pL extends Cr{static get type(){return"MeshStandardNodeMaterial"}constructor(e){super(),this.isMeshStandardNodeMaterial=!0,this.lights=!0,this.emissiveNode=null,this.metalnessNode=null,this.roughnessNode=null,this.setDefaultValues(see),this.setValues(e)}setupEnvironment(e){let t=super.setupEnvironment(e);return t===null&&e.environmentNode&&(t=e.environmentNode),t?new iee(t):null}setupLightingModel(){return new cL}setupSpecular(){const e=_i(be(.04),wi.rgb,N8);Fo.assign(e),L8.assign(1)}setupVariants(){const e=this.metalnessNode?ae(this.metalnessNode):aI;N8.assign(e);let t=this.roughnessNode?ae(this.roughnessNode):oI;t=sx({roughness:t}),el.assign(t),this.setupSpecular(),wi.assign(sn(wi.rgb.mul(e.oneMinus()),wi.a))}copy(e){return this.emissiveNode=e.emissiveNode,this.metalnessNode=e.metalnessNode,this.roughnessNode=e.roughnessNode,super.copy(e)}}const oee=new _v;class aee extends pL{static get type(){return"MeshPhysicalNodeMaterial"}constructor(e){super(),this.isMeshPhysicalNodeMaterial=!0,this.clearcoatNode=null,this.clearcoatRoughnessNode=null,this.clearcoatNormalNode=null,this.sheenNode=null,this.sheenRoughnessNode=null,this.iridescenceNode=null,this.iridescenceIORNode=null,this.iridescenceThicknessNode=null,this.specularIntensityNode=null,this.specularColorNode=null,this.iorNode=null,this.transmissionNode=null,this.thicknessNode=null,this.attenuationDistanceNode=null,this.attenuationColorNode=null,this.dispersionNode=null,this.anisotropyNode=null,this.setDefaultValues(oee),this.setValues(e)}get useClearcoat(){return this.clearcoat>0||this.clearcoatNode!==null}get useIridescence(){return this.iridescence>0||this.iridescenceNode!==null}get useSheen(){return this.sheen>0||this.sheenNode!==null}get useAnisotropy(){return this.anisotropy>0||this.anisotropyNode!==null}get useTransmission(){return this.transmission>0||this.transmissionNode!==null}get useDispersion(){return this.dispersion>0||this.dispersionNode!==null}setupSpecular(){const e=this.iorNode?ae(this.iorNode):xI;e8.assign(e),Fo.assign(_i(Ko(N_(e8.sub(1).div(e8.add(1))).mul(sI),be(1)).mul(by),wi.rgb,N8)),L8.assign(_i(by,1,N8))}setupLightingModel(){return new cL(this.useClearcoat,this.useSheen,this.useIridescence,this.useAnisotropy,this.useTransmission,this.useDispersion)}setupVariants(e){if(super.setupVariants(e),this.useClearcoat){const t=this.clearcoatNode?ae(this.clearcoatNode):uI,n=this.clearcoatRoughnessNode?ae(this.clearcoatRoughnessNode):cI;Qd.assign(t),I8.assign(sx({roughness:n}))}if(this.useSheen){const t=this.sheenNode?be(this.sheenNode):dI,n=this.sheenRoughnessNode?ae(this.sheenRoughnessNode):AI;O2.assign(t),oA.assign(n)}if(this.useIridescence){const t=this.iridescenceNode?ae(this.iridescenceNode):mI,n=this.iridescenceIORNode?ae(this.iridescenceIORNode):gI,r=this.iridescenceThicknessNode?ae(this.iridescenceThicknessNode):yI;aA.assign(t),m_.assign(n),g_.assign(r)}if(this.useAnisotropy){const t=(this.anisotropyNode?Ke(this.anisotropyNode):pI).toVar();Z1.assign(t.length()),gn(Z1.equal(0),()=>{t.assign(Ke(1,0))}).Else(()=>{t.divAssign(Ke(Z1)),Z1.assign(Z1.saturate())}),Yd.assign(Z1.pow2().mix(el.pow2(),1)),Jh.assign(V2[0].mul(t.x).add(V2[1].mul(t.y))),X2.assign(V2[1].mul(t.x).sub(V2[0].mul(t.y)))}if(this.useTransmission){const t=this.transmissionNode?ae(this.transmissionNode):vI,n=this.thicknessNode?ae(this.thicknessNode):_I,r=this.attenuationDistanceNode?ae(this.attenuationDistanceNode):bI,s=this.attenuationColorNode?be(this.attenuationColorNode):SI;if(Zd.assign(t),y_.assign(n),v_.assign(r),__.assign(s),this.useDispersion){const o=this.dispersionNode?ae(this.dispersionNode):CI;x_.assign(o)}}}setupClearcoatNormal(){return this.clearcoatNormalNode?be(this.clearcoatNormalNode):hI}setup(e){e.context.setupClearcoatNormal=()=>S4(this.setupClearcoatNormal(e),"NORMAL","vec3"),super.setup(e)}copy(e){return this.clearcoatNode=e.clearcoatNode,this.clearcoatRoughnessNode=e.clearcoatRoughnessNode,this.clearcoatNormalNode=e.clearcoatNormalNode,this.sheenNode=e.sheenNode,this.sheenRoughnessNode=e.sheenRoughnessNode,this.iridescenceNode=e.iridescenceNode,this.iridescenceIORNode=e.iridescenceIORNode,this.iridescenceThicknessNode=e.iridescenceThicknessNode,this.specularIntensityNode=e.specularIntensityNode,this.specularColorNode=e.specularColorNode,this.transmissionNode=e.transmissionNode,this.thicknessNode=e.thicknessNode,this.attenuationDistanceNode=e.attenuationDistanceNode,this.attenuationColorNode=e.attenuationColorNode,this.dispersionNode=e.dispersionNode,this.anisotropyNode=e.anisotropyNode,super.copy(e)}}const lee=Se(({normal:i,lightDirection:e,builder:t})=>{const n=i.dot(e),r=Ke(n.mul(.5).add(.5),0);if(t.material.gradientMap){const s=Hl("gradientMap","texture").context({getUV:()=>r});return be(s.r)}else{const s=r.fwidth().mul(.5);return _i(be(.7),be(1),pl(ae(.7).sub(s.x),ae(.7).add(s.x),r.x))}});class uee extends TA{direct({lightDirection:e,lightColor:t,reflectedLight:n},r){const s=lee({normal:yA,lightDirection:e,builder:r}).mul(t);n.directDiffuse.addAssign(s.mul(Sc({diffuseColor:wi.rgb})))}indirect(e){const{ambientOcclusion:t,irradiance:n,reflectedLight:r}=e.context;r.indirectDiffuse.addAssign(n.mul(Sc({diffuseColor:wi}))),r.indirectDiffuse.mulAssign(t)}}const cee=new xv;class hee extends Cr{static get type(){return"MeshToonNodeMaterial"}constructor(e){super(),this.isMeshToonNodeMaterial=!0,this.lights=!0,this.setDefaultValues(cee),this.setValues(e)}setupLightingModel(){return new uee}}const mL=Se(()=>{const i=be(sr.z,0,sr.x.negate()).normalize(),e=sr.cross(i);return Ke(i.dot(Li),e.dot(Li)).mul(.495).add(.5)}).once(["NORMAL","VERTEX"])().toVar("matcapUV"),fee=new wv;class dee extends Cr{static get type(){return"MeshMatcapNodeMaterial"}constructor(e){super(),this.isMeshMatcapNodeMaterial=!0,this.setDefaultValues(fee),this.setValues(e)}setupVariants(e){const t=mL;let n;e.material.matcap?n=Hl("matcap","texture").context({getUV:()=>t}):n=be(_i(.2,.8,t.y)),wi.rgb.mulAssign(n.rgb)}}class Aee extends Zr{static get type(){return"RotateNode"}constructor(e,t){super(),this.positionNode=e,this.rotationNode=t}getNodeType(e){return this.positionNode.getNodeType(e)}setup(e){const{rotationNode:t,positionNode:n}=this;if(this.getNodeType(e)==="vec2"){const s=t.cos(),o=t.sin();return sA(s,o,o.negate(),s).mul(n)}else{const s=t,o=$2(sn(1,0,0,0),sn(0,zl(s.x),ya(s.x).negate(),0),sn(0,ya(s.x),zl(s.x),0),sn(0,0,0,1)),a=$2(sn(zl(s.y),0,ya(s.y),0),sn(0,1,0,0),sn(ya(s.y).negate(),0,zl(s.y),0),sn(0,0,0,1)),l=$2(sn(zl(s.z),ya(s.z).negate(),0,0),sn(ya(s.z),zl(s.z),0,0),sn(0,0,1,0),sn(0,0,0,1));return o.mul(a).mul(l).mul(sn(n,1)).xyz}}}const m6=Mn(Aee).setParameterLength(2),pee=new D9;class gL extends Cr{static get type(){return"SpriteNodeMaterial"}constructor(e){super(),this.isSpriteNodeMaterial=!0,this._useSizeAttenuation=!0,this.positionNode=null,this.rotationNode=null,this.scaleNode=null,this.transparent=!0,this.setDefaultValues(pee),this.setValues(e)}setupPositionView(e){const{object:t,camera:n}=e,r=this.sizeAttenuation,{positionNode:s,rotationNode:o,scaleNode:a}=this,l=Fc.mul(be(s||0));let u=Ke(Wa[0].xyz.length(),Wa[1].xyz.length());if(a!==null&&(u=u.mul(Ke(a))),r===!1)if(n.isPerspectiveCamera)u=u.mul(l.z.negate());else{const _=ae(2).div(Bc.element(1).element(1));u=u.mul(_.mul(2))}let c=d6.xy;if(t.center&&t.center.isVector2===!0){const _=gK("center","vec2",t);c=c.sub(_.sub(.5))}c=c.mul(u);const A=ae(o||fI),m=m6(c,A);return sn(l.xy.add(m),l.zw)}copy(e){return this.positionNode=e.positionNode,this.rotationNode=e.rotationNode,this.scaleNode=e.scaleNode,super.copy(e)}get sizeAttenuation(){return this._useSizeAttenuation}set sizeAttenuation(e){this._useSizeAttenuation!==e&&(this._useSizeAttenuation=e,this.needsUpdate=!0)}}const mee=new Q8;class gee extends gL{static get type(){return"PointsNodeMaterial"}constructor(e){super(),this.sizeNode=null,this.isPointsNodeMaterial=!0,this.setDefaultValues(mee),this.setValues(e)}setupPositionView(){const{positionNode:e}=this;return Fc.mul(be(e||Er)).xyz}setupVertex(e){const t=super.setupVertex(e);if(e.material.isNodeMaterial!==!0)return t;const{rotationNode:n,scaleNode:r,sizeNode:s}=this,o=d6.xy.toVar(),a=T4.z.div(T4.w);if(n&&n.isNode){const u=ae(n);o.assign(m6(o,u))}let l=s!==null?Ke(s):RI;return this.sizeAttenuation===!0&&(l=l.mul(l.div(Rr.z.negate()))),r&&r.isNode&&(l=l.mul(Ke(r))),o.mulAssign(l.mul(2)),o.assign(o.div(T4.z)),o.y.assign(o.y.mul(a)),o.assign(o.mul(t.w)),t.addAssign(sn(o,0,0)),t}get alphaToCoverage(){return this._useAlphaToCoverage}set alphaToCoverage(e){this._useAlphaToCoverage!==e&&(this._useAlphaToCoverage=e,this.needsUpdate=!0)}}class yee extends TA{constructor(){super(),this.shadowNode=ae(1).toVar("shadowMask")}direct({lightNode:e}){e.shadowNode!==null&&this.shadowNode.mulAssign(e.shadowNode)}finish({context:e}){wi.a.mulAssign(this.shadowNode.oneMinus()),e.outgoingLight.rgb.assign(wi.rgb)}}const vee=new vv;class _ee extends Cr{static get type(){return"ShadowNodeMaterial"}constructor(e){super(),this.isShadowNodeMaterial=!0,this.lights=!0,this.transparent=!0,this.setDefaultValues(vee),this.setValues(e)}setupLightingModel(){return new yee}}Zl("vec3");Zl("vec3");Zl("vec3");class xee{constructor(e,t){this.nodes=e,this.info=t,this._context=typeof self<"u"?self:null,this._animationLoop=null,this._requestId=null}start(){const e=(t,n)=>{this._requestId=this._context.requestAnimationFrame(e),this.info.autoReset===!0&&this.info.reset(),this.nodes.nodeFrame.update(),this.info.frame=this.nodes.nodeFrame.frameId,this._animationLoop!==null&&this._animationLoop(t,n)};e()}stop(){this._context.cancelAnimationFrame(this._requestId),this._requestId=null}getAnimationLoop(){return this._animationLoop}setAnimationLoop(e){this._animationLoop=e}getContext(){return this._context}setContext(e){this._context=e}dispose(){this.stop()}}class B0{constructor(){this.weakMap=new WeakMap}get(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return;return t.get(e[e.length-1])}set(e,t){let n=this.weakMap;for(let r=0;r<e.length-1;r++){const s=e[r];n.has(s)===!1&&n.set(s,new WeakMap),n=n.get(s)}return n.set(e[e.length-1],t),this}delete(e){let t=this.weakMap;for(let n=0;n<e.length-1;n++)if(t=t.get(e[n]),t===void 0)return!1;return t.delete(e[e.length-1])}}let bee=0;function See(i){const e=Object.keys(i);let t=Object.getPrototypeOf(i);for(;t;){const n=Object.getOwnPropertyDescriptors(t);for(const r in n)if(n[r]!==void 0){const s=n[r];s&&typeof s.get=="function"&&e.push(r)}t=Object.getPrototypeOf(t)}return e}class Tee{constructor(e,t,n,r,s,o,a,l,u,c){this.id=bee++,this._nodes=e,this._geometries=t,this.renderer=n,this.object=r,this.material=s,this.scene=o,this.camera=a,this.lightsNode=l,this.context=u,this.geometry=r.geometry,this.version=s.version,this.drawRange=null,this.attributes=null,this.attributesId=null,this.pipeline=null,this.group=null,this.vertexBuffers=null,this.drawParams=null,this.bundle=null,this.clippingContext=c,this.clippingContextCacheKey=c!==null?c.cacheKey:"",this.initialNodesCacheKey=this.getDynamicCacheKey(),this.initialCacheKey=this.getCacheKey(),this._nodeBuilderState=null,this._bindings=null,this._monitor=null,this.onDispose=null,this.isRenderObject=!0,this.onMaterialDispose=()=>{this.dispose()},this.onGeometryDispose=()=>{this.attributes=null,this.attributesId=null},this.material.addEventListener("dispose",this.onMaterialDispose),this.geometry.addEventListener("dispose",this.onGeometryDispose)}updateClipping(e){this.clippingContext=e}get clippingNeedsUpdate(){return this.clippingContext===null||this.clippingContext.cacheKey===this.clippingContextCacheKey?!1:(this.clippingContextCacheKey=this.clippingContext.cacheKey,!0)}get hardwareClippingPlanes(){return this.material.hardwareClipping===!0?this.clippingContext.unionClippingCount:0}getNodeBuilderState(){return this._nodeBuilderState||(this._nodeBuilderState=this._nodes.getForRender(this))}getMonitor(){return this._monitor||(this._monitor=this.getNodeBuilderState().observer)}getBindings(){return this._bindings||(this._bindings=this.getNodeBuilderState().createBindings())}getBindingGroup(e){for(const t of this.getBindings())if(t.name===e)return t}getIndex(){return this._geometries.getIndex(this)}getIndirect(){return this._geometries.getIndirect(this)}getChainArray(){return[this.object,this.material,this.context,this.lightsNode]}setGeometry(e){this.geometry=e,this.attributes=null,this.attributesId=null}getAttributes(){if(this.attributes!==null)return this.attributes;const e=this.getNodeBuilderState().nodeAttributes,t=this.geometry,n=[],r=new Set,s={};for(const o of e){let a;if(o.node&&o.node.attribute?a=o.node.attribute:(a=t.getAttribute(o.name),s[o.name]=a.version),a===void 0)continue;n.push(a);const l=a.isInterleavedBufferAttribute?a.data:a;r.add(l)}return this.attributes=n,this.attributesId=s,this.vertexBuffers=Array.from(r.values()),n}getVertexBuffers(){return this.vertexBuffers===null&&this.getAttributes(),this.vertexBuffers}getDrawParameters(){const{object:e,material:t,geometry:n,group:r,drawRange:s}=this,o=this.drawParams||(this.drawParams={vertexCount:0,firstVertex:0,instanceCount:0,firstInstance:0}),a=this.getIndex(),l=a!==null;let u=1;if(n.isInstancedBufferGeometry===!0?u=n.instanceCount:e.count!==void 0&&(u=Math.max(0,e.count)),u===0)return null;if(o.instanceCount=u,e.isBatchedMesh===!0)return o;let c=1;t.wireframe===!0&&!e.isPoints&&!e.isLineSegments&&!e.isLine&&!e.isLineLoop&&(c=2);let A=s.start*c,m=(s.start+s.count)*c;r!==null&&(A=Math.max(A,r.start*c),m=Math.min(m,(r.start+r.count)*c));const _=n.attributes.position;let b=1/0;l?b=a.count:_!=null&&(b=_.count),A=Math.max(A,0),m=Math.min(m,b);const M=m-A;return M<0||M===1/0?null:(o.vertexCount=M,o.firstVertex=A,o)}getGeometryCacheKey(){const{geometry:e}=this;let t="";for(const n of Object.keys(e.attributes).sort()){const r=e.attributes[n];t+=n+",",r.data&&(t+=r.data.stride+","),r.offset&&(t+=r.offset+","),r.itemSize&&(t+=r.itemSize+","),r.normalized&&(t+="n,")}for(const n of Object.keys(e.morphAttributes).sort()){const r=e.morphAttributes[n];t+="morph-"+n+",";for(let s=0,o=r.length;s<o;s++){const a=r[s];t+=a.id+","}}return e.index&&(t+="index,"),t}getMaterialCacheKey(){const{object:e,material:t}=this;let n=t.customProgramCacheKey();for(const r of See(t)){if(/^(is[A-Z]|_)|^(visible|version|uuid|name|opacity|userData)$/.test(r))continue;const s=t[r];let o;if(s!==null){const a=typeof s;a==="number"?o=s!==0?"1":"0":a==="object"?(o="{",s.isTexture&&(o+=s.mapping),o+="}"):o=String(s)}else o=String(s);n+=o+","}return n+=this.clippingContextCacheKey+",",e.geometry&&(n+=this.getGeometryCacheKey()),e.skeleton&&(n+=e.skeleton.bones.length+","),e.isBatchedMesh&&(n+=e._matricesTexture.uuid+",",e._colorsTexture!==null&&(n+=e._colorsTexture.uuid+",")),e.count>1&&(n+=e.uuid+","),n+=e.receiveShadow+",",FC(n)}get needsGeometryUpdate(){if(this.geometry.id!==this.object.geometry.id)return!0;if(this.attributes!==null){const e=this.attributesId;for(const t in e){const n=this.geometry.getAttribute(t);if(n===void 0||e[t]!==n.id)return!0}}return!1}get needsUpdate(){return this.initialNodesCacheKey!==this.getDynamicCacheKey()||this.clippingNeedsUpdate}getDynamicCacheKey(){let e=0;return this.material.isShadowPassMaterial!==!0&&(e=this._nodes.getCacheKey(this.scene,this.lightsNode)),this.camera.isArrayCamera&&(e=jd(e,this.camera.cameras.length)),this.object.receiveShadow&&(e=jd(e,1)),e}getCacheKey(){return this.getMaterialCacheKey()+this.getDynamicCacheKey()}dispose(){this.material.removeEventListener("dispose",this.onMaterialDispose),this.geometry.removeEventListener("dispose",this.onGeometryDispose),this.onDispose()}}const p2=[];class wee{constructor(e,t,n,r,s,o){this.renderer=e,this.nodes=t,this.geometries=n,this.pipelines=r,this.bindings=s,this.info=o,this.chainMaps={}}get(e,t,n,r,s,o,a,l){const u=this.getChainMap(l);p2[0]=e,p2[1]=t,p2[2]=o,p2[3]=s;let c=u.get(p2);return c===void 0?(c=this.createRenderObject(this.nodes,this.geometries,this.renderer,e,t,n,r,s,o,a,l),u.set(p2,c)):(c.updateClipping(a),c.needsGeometryUpdate&&c.setGeometry(e.geometry),(c.version!==t.version||c.needsUpdate)&&(c.initialCacheKey!==c.getCacheKey()?(c.dispose(),c=this.get(e,t,n,r,s,o,a,l)):c.version=t.version)),p2.length=0,c}getChainMap(e="default"){return this.chainMaps[e]||(this.chainMaps[e]=new B0)}dispose(){this.chainMaps={}}createRenderObject(e,t,n,r,s,o,a,l,u,c,A){const m=this.getChainMap(A),_=new Tee(e,t,n,r,s,o,a,l,u,c);return _.onDispose=()=>{this.pipelines.delete(_),this.bindings.delete(_),this.nodes.delete(_),m.delete(_.getChainArray())},_}}class wu{constructor(){this.data=new WeakMap}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}delete(e){let t=null;return this.data.has(e)&&(t=this.data.get(e),this.data.delete(e)),t}has(e){return this.data.has(e)}dispose(){this.data=new WeakMap}}const ja={VERTEX:1,INDEX:2,STORAGE:3,INDIRECT:4},nu=16,Mee=211,Eee=212;class Ree extends wu{constructor(e){super(),this.backend=e}delete(e){const t=super.delete(e);return t!==null&&this.backend.destroyAttribute(e),t}update(e,t){const n=this.get(e);if(n.version===void 0)t===ja.VERTEX?this.backend.createAttribute(e):t===ja.INDEX?this.backend.createIndexAttribute(e):t===ja.STORAGE?this.backend.createStorageAttribute(e):t===ja.INDIRECT&&this.backend.createIndirectStorageAttribute(e),n.version=this._getBufferAttribute(e).version;else{const r=this._getBufferAttribute(e);(n.version<r.version||r.usage===D2)&&(this.backend.updateAttribute(e),n.version=r.version)}}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}function yL(i){return i.index!==null?i.index.version:i.attributes.position.version}function Iw(i){const e=[],t=i.index,n=i.attributes.position;if(t!==null){const s=t.array;for(let o=0,a=s.length;o<a;o+=3){const l=s[o+0],u=s[o+1],c=s[o+2];e.push(l,u,u,c,c,l)}}else{const s=n.array;for(let o=0,a=s.length/3-1;o<a;o+=3){const l=o+0,u=o+1,c=o+2;e.push(l,u,u,c,c,l)}}const r=new(iv(e)?N9:P9)(e,1);return r.version=yL(i),r}class Cee extends wu{constructor(e,t){super(),this.attributes=e,this.info=t,this.wireframes=new WeakMap,this.attributeCall=new WeakMap}has(e){const t=e.geometry;return super.has(t)&&this.get(t).initialized===!0}updateForRender(e){this.has(e)===!1&&this.initGeometry(e),this.updateAttributes(e)}initGeometry(e){const t=e.geometry,n=this.get(t);n.initialized=!0,this.info.memory.geometries++;const r=()=>{this.info.memory.geometries--;const s=t.index,o=e.getAttributes();s!==null&&this.attributes.delete(s);for(const l of o)this.attributes.delete(l);const a=this.wireframes.get(t);a!==void 0&&this.attributes.delete(a),t.removeEventListener("dispose",r)};t.addEventListener("dispose",r)}updateAttributes(e){const t=e.getAttributes();for(const s of t)s.isStorageBufferAttribute||s.isStorageInstancedBufferAttribute?this.updateAttribute(s,ja.STORAGE):this.updateAttribute(s,ja.VERTEX);const n=this.getIndex(e);n!==null&&this.updateAttribute(n,ja.INDEX);const r=e.geometry.indirect;r!==null&&this.updateAttribute(r,ja.INDIRECT)}updateAttribute(e,t){const n=this.info.render.calls;e.isInterleavedBufferAttribute?this.attributeCall.get(e)===void 0?(this.attributes.update(e,t),this.attributeCall.set(e,n)):this.attributeCall.get(e.data)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e.data,n),this.attributeCall.set(e,n)):this.attributeCall.get(e)!==n&&(this.attributes.update(e,t),this.attributeCall.set(e,n))}getIndirect(e){return e.geometry.indirect}getIndex(e){const{geometry:t,material:n}=e;let r=t.index;if(n.wireframe===!0){const s=this.wireframes;let o=s.get(t);o===void 0?(o=Iw(t),s.set(t,o)):o.version!==yL(t)&&(this.attributes.delete(o),o=Iw(t),s.set(t,o)),r=o}return r}}class Pee{constructor(){this.autoReset=!0,this.frame=0,this.calls=0,this.render={calls:0,frameCalls:0,drawCalls:0,triangles:0,points:0,lines:0,timestamp:0},this.compute={calls:0,frameCalls:0,timestamp:0},this.memory={geometries:0,textures:0}}update(e,t,n){this.render.drawCalls++,e.isMesh||e.isSprite?this.render.triangles+=n*(t/3):e.isPoints?this.render.points+=n*t:e.isLineSegments?this.render.lines+=n*(t/2):e.isLine?this.render.lines+=n*(t-1):console.error("THREE.WebGPUInfo: Unknown object type.")}reset(){this.render.drawCalls=0,this.render.frameCalls=0,this.compute.frameCalls=0,this.render.triangles=0,this.render.points=0,this.render.lines=0}dispose(){this.reset(),this.calls=0,this.render.calls=0,this.compute.calls=0,this.render.timestamp=0,this.compute.timestamp=0,this.memory.geometries=0,this.memory.textures=0}}class vL{constructor(e){this.cacheKey=e,this.usedTimes=0}}class Nee extends vL{constructor(e,t,n){super(e),this.vertexProgram=t,this.fragmentProgram=n}}class Iee extends vL{constructor(e,t){super(e),this.computeProgram=t,this.isComputePipeline=!0}}let Lee=0;class Nm{constructor(e,t,n,r=null,s=null){this.id=Lee++,this.code=e,this.stage=t,this.name=n,this.transforms=r,this.attributes=s,this.usedTimes=0}}class Dee extends wu{constructor(e,t){super(),this.backend=e,this.nodes=t,this.bindings=null,this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}getForCompute(e,t){const{backend:n}=this,r=this.get(e);if(this._needsComputeUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.computeProgram.usedTimes--);const o=this.nodes.getForCompute(e);let a=this.programs.compute.get(o.computeShader);a===void 0&&(s&&s.computeProgram.usedTimes===0&&this._releaseProgram(s.computeProgram),a=new Nm(o.computeShader,"compute",e.name,o.transforms,o.nodeAttributes),this.programs.compute.set(o.computeShader,a),n.createProgram(a));const l=this._getComputeCacheKey(e,a);let u=this.caches.get(l);u===void 0&&(s&&s.usedTimes===0&&this._releasePipeline(s),u=this._getComputePipeline(e,a,l,t)),u.usedTimes++,a.usedTimes++,r.version=e.version,r.pipeline=u}return r.pipeline}getForRender(e,t=null){const{backend:n}=this,r=this.get(e);if(this._needsRenderUpdate(e)){const s=r.pipeline;s&&(s.usedTimes--,s.vertexProgram.usedTimes--,s.fragmentProgram.usedTimes--);const o=e.getNodeBuilderState(),a=e.material?e.material.name:"";let l=this.programs.vertex.get(o.vertexShader);l===void 0&&(s&&s.vertexProgram.usedTimes===0&&this._releaseProgram(s.vertexProgram),l=new Nm(o.vertexShader,"vertex",a),this.programs.vertex.set(o.vertexShader,l),n.createProgram(l));let u=this.programs.fragment.get(o.fragmentShader);u===void 0&&(s&&s.fragmentProgram.usedTimes===0&&this._releaseProgram(s.fragmentProgram),u=new Nm(o.fragmentShader,"fragment",a),this.programs.fragment.set(o.fragmentShader,u),n.createProgram(u));const c=this._getRenderCacheKey(e,l,u);let A=this.caches.get(c);A===void 0?(s&&s.usedTimes===0&&this._releasePipeline(s),A=this._getRenderPipeline(e,l,u,c,t)):e.pipeline=A,A.usedTimes++,l.usedTimes++,u.usedTimes++,r.pipeline=A}return r.pipeline}delete(e){const t=this.get(e).pipeline;return t&&(t.usedTimes--,t.usedTimes===0&&this._releasePipeline(t),t.isComputePipeline?(t.computeProgram.usedTimes--,t.computeProgram.usedTimes===0&&this._releaseProgram(t.computeProgram)):(t.fragmentProgram.usedTimes--,t.vertexProgram.usedTimes--,t.vertexProgram.usedTimes===0&&this._releaseProgram(t.vertexProgram),t.fragmentProgram.usedTimes===0&&this._releaseProgram(t.fragmentProgram))),super.delete(e)}dispose(){super.dispose(),this.caches=new Map,this.programs={vertex:new Map,fragment:new Map,compute:new Map}}updateForRender(e){this.getForRender(e)}_getComputePipeline(e,t,n,r){n=n||this._getComputeCacheKey(e,t);let s=this.caches.get(n);return s===void 0&&(s=new Iee(n,t),this.caches.set(n,s),this.backend.createComputePipeline(s,r)),s}_getRenderPipeline(e,t,n,r,s){r=r||this._getRenderCacheKey(e,t,n);let o=this.caches.get(r);return o===void 0&&(o=new Nee(r,t,n),this.caches.set(r,o),e.pipeline=o,this.backend.createRenderPipeline(e,s)),o}_getComputeCacheKey(e,t){return e.id+","+t.id}_getRenderCacheKey(e,t,n){return t.id+","+n.id+","+this.backend.getRenderCacheKey(e)}_releasePipeline(e){this.caches.delete(e.cacheKey)}_releaseProgram(e){const t=e.code,n=e.stage;this.programs[n].delete(t)}_needsComputeUpdate(e){const t=this.get(e);return t.pipeline===void 0||t.version!==e.version}_needsRenderUpdate(e){return this.get(e).pipeline===void 0||this.backend.needsRenderUpdate(e)}}class Bee extends wu{constructor(e,t,n,r,s,o){super(),this.backend=e,this.textures=n,this.pipelines=s,this.attributes=r,this.nodes=t,this.info=o,this.pipelines.bindings=this}getForRender(e){const t=e.getBindings();for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}getForCompute(e){const t=this.nodes.getForCompute(e).bindings;for(const n of t){const r=this.get(n);r.bindGroup===void 0&&(this._init(n),this.backend.createBindings(n,t,0),r.bindGroup=n)}return t}updateForCompute(e){this._updateBindings(this.getForCompute(e))}updateForRender(e){this._updateBindings(this.getForRender(e))}_updateBindings(e){for(const t of e)this._update(t,e)}_init(e){for(const t of e.bindings)if(t.isSampledTexture)this.textures.updateTexture(t.texture);else if(t.isStorageBuffer){const n=t.attribute,r=n.isIndirectStorageBufferAttribute?ja.INDIRECT:ja.STORAGE;this.attributes.update(n,r)}}_update(e,t){const{backend:n}=this;let r=!1,s=!0,o=0,a=0;for(const l of e.bindings)if(!(l.isNodeUniformsGroup&&this.nodes.updateGroup(l)===!1)){if(l.isStorageBuffer){const u=l.attribute,c=u.isIndirectStorageBufferAttribute?ja.INDIRECT:ja.STORAGE;this.attributes.update(u,c)}if(l.isUniformBuffer)l.update()&&n.updateBinding(l);else if(l.isSampledTexture){const u=l.update(),c=l.texture,A=this.textures.get(c);if(u&&(this.textures.updateTexture(c),l.generation!==A.generation&&(l.generation=A.generation,r=!0)),n.get(c).externalTexture!==void 0||A.isDefaultTexture?s=!1:(o=o*10+c.id,a+=c.version),c.isStorageTexture===!0){const _=this.get(c);l.store===!0?_.needsMipmap=!0:this.textures.needsMipmaps(c)&&_.needsMipmap===!0&&(this.backend.generateMipmaps(c),_.needsMipmap=!1)}}else l.isSampler&&l.update()}r===!0&&this.backend.updateBindings(e,t,s?o:0,a)}}function Fee(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?i.z-e.z:i.id-e.id}function Lw(i,e){return i.groupOrder!==e.groupOrder?i.groupOrder-e.groupOrder:i.renderOrder!==e.renderOrder?i.renderOrder-e.renderOrder:i.z!==e.z?e.z-i.z:i.id-e.id}function Dw(i){return(i.transmission>0||i.transmissionNode)&&i.side===Mr&&i.forceSinglePass===!1}class Uee{constructor(e,t,n){this.renderItems=[],this.renderItemsIndex=0,this.opaque=[],this.transparentDoublePass=[],this.transparent=[],this.bundles=[],this.lightsNode=e.getNode(t,n),this.lightsArray=[],this.scene=t,this.camera=n,this.occlusionQueryCount=0}begin(){return this.renderItemsIndex=0,this.opaque.length=0,this.transparentDoublePass.length=0,this.transparent.length=0,this.bundles.length=0,this.lightsArray.length=0,this.occlusionQueryCount=0,this}getNextRenderItem(e,t,n,r,s,o,a){let l=this.renderItems[this.renderItemsIndex];return l===void 0?(l={id:e.id,object:e,geometry:t,material:n,groupOrder:r,renderOrder:e.renderOrder,z:s,group:o,clippingContext:a},this.renderItems[this.renderItemsIndex]=l):(l.id=e.id,l.object=e,l.geometry=t,l.material=n,l.groupOrder=r,l.renderOrder=e.renderOrder,l.z=s,l.group=o,l.clippingContext=a),this.renderItemsIndex++,l}push(e,t,n,r,s,o,a){const l=this.getNextRenderItem(e,t,n,r,s,o,a);e.occlusionTest===!0&&this.occlusionQueryCount++,n.transparent===!0||n.transmission>0?(Dw(n)&&this.transparentDoublePass.push(l),this.transparent.push(l)):this.opaque.push(l)}unshift(e,t,n,r,s,o,a){const l=this.getNextRenderItem(e,t,n,r,s,o,a);n.transparent===!0||n.transmission>0?(Dw(n)&&this.transparentDoublePass.unshift(l),this.transparent.unshift(l)):this.opaque.unshift(l)}pushBundle(e){this.bundles.push(e)}pushLight(e){this.lightsArray.push(e)}sort(e,t){this.opaque.length>1&&this.opaque.sort(e||Fee),this.transparentDoublePass.length>1&&this.transparentDoublePass.sort(t||Lw),this.transparent.length>1&&this.transparent.sort(t||Lw)}finish(){this.lightsNode.setLights(this.lightsArray);for(let e=this.renderItemsIndex,t=this.renderItems.length;e<t;e++){const n=this.renderItems[e];if(n.id===null)break;n.id=null,n.object=null,n.geometry=null,n.material=null,n.groupOrder=null,n.renderOrder=null,n.z=null,n.group=null,n.clippingContext=null}}}const mh=[];class Oee{constructor(e){this.lighting=e,this.lists=new B0}get(e,t){const n=this.lists;mh[0]=e,mh[1]=t;let r=n.get(mh);return r===void 0&&(r=new Uee(this.lighting,e,t),n.set(mh,r)),mh.length=0,r}dispose(){this.lists=new B0}}let kee=0;class Vee{constructor(){this.id=kee++,this.color=!0,this.clearColor=!0,this.clearColorValue={r:0,g:0,b:0,a:1},this.depth=!0,this.clearDepth=!0,this.clearDepthValue=1,this.stencil=!1,this.clearStencil=!0,this.clearStencilValue=1,this.viewport=!1,this.viewportValue=new rn,this.scissor=!1,this.scissorValue=new rn,this.renderTarget=null,this.textures=null,this.depthTexture=null,this.activeCubeFace=0,this.activeMipmapLevel=0,this.sampleCount=1,this.width=0,this.height=0,this.occlusionQueryCount=0,this.clippingContext=null,this.isRenderContext=!0}getCacheKey(){return _L(this)}}function _L(i){const{textures:e,activeCubeFace:t}=i,n=[t];for(const r of e)n.push(r.id);return eA(n)}const gh=[],zee=new Rc,Gee=new yu;class qee{constructor(){this.chainMaps={}}get(e,t,n=null){gh[0]=e,gh[1]=t;let r;if(n===null)r="default";else{const a=n.texture.format;r=`${n.textures.length}:${a}:${n.samples}:${n.depthBuffer}:${n.stencilBuffer}`}const s=this._getChainMap(r);let o=s.get(gh);return o===void 0&&(o=new Vee,s.set(gh,o)),gh.length=0,n!==null&&(o.sampleCount=n.samples===0?1:n.samples),o}getForClear(e=null){return this.get(zee,Gee,e)}_getChainMap(e){return this.chainMaps[e]||(this.chainMaps[e]=new B0)}dispose(){this.chainMaps={}}}const Hee=new J;class Wee extends wu{constructor(e,t,n){super(),this.renderer=e,this.backend=t,this.info=n}updateRenderTarget(e,t=0){const n=this.get(e),r=e.samples===0?1:e.samples,s=n.depthTextureMips||(n.depthTextureMips={}),o=e.textures,a=this.getSize(o[0]),l=a.width>>t,u=a.height>>t;let c=e.depthTexture||s[t];const A=e.depthBuffer===!0||e.stencilBuffer===!0;let m=!1;c===void 0&&A&&(c=new Qo,c.format=e.stencilBuffer?jo:Wo,c.type=e.stencilBuffer?Ho:Oi,c.image.width=l,c.image.height=u,c.image.depth=a.depth,c.isArrayTexture=e.multiview===!0&&a.depth>1,s[t]=c),(n.width!==a.width||a.height!==n.height)&&(m=!0,c&&(c.needsUpdate=!0,c.image.width=l,c.image.height=u,c.image.depth=c.isArrayTexture?c.image.depth:1)),n.width=a.width,n.height=a.height,n.textures=o,n.depthTexture=c||null,n.depth=e.depthBuffer,n.stencil=e.stencilBuffer,n.renderTarget=e,n.sampleCount!==r&&(m=!0,c&&(c.needsUpdate=!0),n.sampleCount=r);const _={sampleCount:r};if(e.isXRRenderTarget!==!0){for(let b=0;b<o.length;b++){const M=o[b];m&&(M.needsUpdate=!0),this.updateTexture(M,_)}c&&this.updateTexture(c,_)}if(n.initialized!==!0){n.initialized=!0;const b=()=>{e.removeEventListener("dispose",b);for(let M=0;M<o.length;M++)this._destroyTexture(o[M]);c&&this._destroyTexture(c),this.delete(e)};e.addEventListener("dispose",b)}}updateTexture(e,t={}){const n=this.get(e);if(n.initialized===!0&&n.version===e.version)return;const r=e.isRenderTargetTexture||e.isDepthTexture||e.isFramebufferTexture,s=this.backend;if(r&&n.initialized===!0&&(s.destroySampler(e),s.destroyTexture(e)),e.isFramebufferTexture){const u=this.renderer.getRenderTarget();u?e.type=u.texture.type:e.type=ar}const{width:o,height:a,depth:l}=this.getSize(e);if(t.width=o,t.height=a,t.depth=l,t.needsMipmaps=this.needsMipmaps(e),t.levels=t.needsMipmaps?this.getMipLevels(e,o,a):1,r||e.isStorageTexture===!0)s.createSampler(e),s.createTexture(e,t),n.generation=e.version;else if(n.initialized!==!0&&s.createSampler(e),e.version>0){const c=e.image;if(c===void 0)console.warn("THREE.Renderer: Texture marked for update but image is undefined.");else if(c.complete===!1)console.warn("THREE.Renderer: Texture marked for update but image is incomplete.");else{if(e.images){const A=[];for(const m of e.images)A.push(m);t.images=A}else t.image=c;(n.isDefaultTexture===void 0||n.isDefaultTexture===!0)&&(s.createTexture(e,t),n.isDefaultTexture=!1,n.generation=e.version),e.source.dataReady===!0&&s.updateTexture(e,t),t.needsMipmaps&&e.mipmaps.length===0&&s.generateMipmaps(e)}}else s.createDefaultTexture(e),n.isDefaultTexture=!0,n.generation=e.version;if(n.initialized!==!0){n.initialized=!0,n.generation=e.version,this.info.memory.textures++;const u=()=>{e.removeEventListener("dispose",u),this._destroyTexture(e)};e.addEventListener("dispose",u)}n.version=e.version}getSize(e,t=Hee){let n=e.images?e.images[0]:e.image;return n?(n.image!==void 0&&(n=n.image),n instanceof HTMLVideoElement?(t.width=n.videoWidth||1,t.height=n.videoHeight||1,t.depth=1):n instanceof VideoFrame?(t.width=n.displayWidth||1,t.height=n.displayHeight||1,t.depth=1):(t.width=n.width||1,t.height=n.height||1,t.depth=e.isCubeTexture?6:n.depth||1)):t.width=t.height=t.depth=1,t}getMipLevels(e,t,n){let r;return e.isCompressedTexture?e.mipmaps?r=e.mipmaps.length:r=1:r=Math.floor(Math.log2(Math.max(t,n)))+1,r}needsMipmaps(e){return e.isCompressedTexture===!0||e.generateMipmaps}_destroyTexture(e){this.has(e)===!0&&(this.backend.destroySampler(e),this.backend.destroyTexture(e),this.delete(e),this.info.memory.textures--)}}class hx extends Et{constructor(e,t,n,r=1){super(e,t,n),this.a=r}set(e,t,n,r=1){return this.a=r,super.set(e,t,n)}copy(e){return e.a!==void 0&&(this.a=e.a),super.copy(e)}clone(){return new this.constructor(this.r,this.g,this.b,this.a)}}class xL extends Pi{static get type(){return"ParameterNode"}constructor(e,t=null){super(e,t),this.isParameterNode=!0}getHash(){return this.uuid}generate(){return this.name}}const jee=(i,e)=>$e(new xL(i,e));class $ee extends un{static get type(){return"StackNode"}constructor(e=null){super(),this.nodes=[],this.outputNode=null,this.parent=e,this._currentCond=null,this._expressionNode=null,this.isStackNode=!0}getNodeType(e){return this.outputNode?this.outputNode.getNodeType(e):"void"}getMemberType(e,t){return this.outputNode?this.outputNode.getMemberType(e,t):"void"}add(e){return this.nodes.push(e),this}If(e,t){const n=new A4(t);return this._currentCond=Ss(e,n),this.add(this._currentCond)}ElseIf(e,t){const n=new A4(t),r=Ss(e,n);return this._currentCond.elseNode=r,this._currentCond=r,this}Else(e){return this._currentCond.elseNode=new A4(e),this}Switch(e){return this._expressionNode=$e(e),this}Case(...e){const t=[];if(e.length>=2)for(let a=0;a<e.length-1;a++)t.push(this._expressionNode.equal($e(e[a])));else throw new Error("TSL: Invalid parameter length. Case() requires at least two parameters.");const n=e[e.length-1],r=new A4(n);let s=t[0];for(let a=1;a<t.length;a++)s=s.or(t[a]);const o=Ss(s,r);return this._currentCond===null?(this._currentCond=o,this.add(this._currentCond)):(this._currentCond.elseNode=o,this._currentCond=o,this)}Default(e){return this.Else(e),this}setup(e){const t=e.getNodeProperties(this);let n=0;for(const r of this.getChildren())r.isVarNode&&r.intent===!0&&e.getNodeProperties(r).assign!==!0||(t["node"+n++]=r);return t.outputNode||null}build(e,...t){const n=e.currentStack,r=iA();C8(this),e.currentStack=this;const s=e.buildStage;for(const a of this.nodes)if(!(a.isVarNode&&a.intent===!0&&e.getNodeProperties(a).assign!==!0)){if(s==="setup")a.build(e);else if(s==="analyze")a.build(e,this);else if(s==="generate"){const l=e.getDataFromNode(a,"any").stages,u=l&&l[e.shaderStage];if(a.isVarNode&&u&&u.length===1&&u[0]&&u[0].isStackNode)continue;a.build(e,"void")}}const o=this.outputNode?this.outputNode.build(e,...t):super.build(e,...t);return C8(r),e.currentStack=n,o}}const Zf=Mn($ee).setParameterLength(0,1);function Xee(i){return Object.entries(i).map(([e,t])=>typeof t=="string"?{name:e,type:t,atomic:!1}:{name:e,type:t.type,atomic:t.atomic||!1})}class Qee extends un{static get type(){return"StructTypeNode"}constructor(e,t=null){super("struct"),this.membersLayout=Xee(e),this.name=t,this.isStructLayoutNode=!0}getLength(){const t=Float32Array.BYTES_PER_ELEMENT;let n=0;for(const r of this.membersLayout){const s=r.type,o=NY(s)*t,a=IY(s),l=n%8,u=l%a,c=l+u;n+=u,c!==0&&8-c<o&&(n+=8-c),n+=o}return Math.ceil(n/8)*8/t}getMemberType(e,t){const n=this.membersLayout.find(r=>r.name===t);return n?n.type:"void"}getNodeType(e){return e.getStructTypeFromNode(this,this.membersLayout,this.name).name}setup(e){e.addInclude(this)}generate(e){return this.getNodeType(e)}}class Yee extends un{static get type(){return"StructNode"}constructor(e,t){super("vec3"),this.structLayoutNode=e,this.values=t,this.isStructNode=!0}getNodeType(e){return this.structLayoutNode.getNodeType(e)}getMemberType(e,t){return this.structLayoutNode.getMemberType(e,t)}generate(e){const t=e.getVarFromNode(this),n=t.type,r=e.getPropertyName(t);return e.addLineFlowCode(`${r} = ${e.generateStruct(n,this.structLayoutNode.membersLayout,this.values)}`,this),t.name}}const Kee=(i,e=null)=>{const t=new Qee(i,e),n=(...r)=>{let s=null;if(r.length>0)if(r[0].isNode){s={};const o=Object.keys(i);for(let a=0;a<r.length;a++)s[o[a]]=r[a]}else s=r[0];return $e(new Yee(t,s))};return n.layout=t,n.isStruct=!0,n};class bL extends un{static get type(){return"OutputStructNode"}constructor(...e){super(),this.members=e,this.isOutputStructNode=!0}getNodeType(e){const t=e.getNodeProperties(this);if(t.membersLayout===void 0){const n=this.members,r=[];for(let s=0;s<n.length;s++){const o="m"+s,a=n[s].getNodeType(e);r.push({name:o,type:a,index:s})}t.membersLayout=r,t.structType=e.getOutputStructTypeFromNode(this,t.membersLayout)}return t.structType.name}generate(e){const t=e.getOutputStructName(),n=this.members,r=t!==""?t+".":"";for(let s=0;s<n.length;s++){const o=n[s].build(e);e.addLineFlowCode(`${r}m${s} = ${o}`,this)}return t}}const Zee=Mn(bL);function SL(i,e){for(let t=0;t<i.length;t++)if(i[t].name===e)return t;return-1}class Jee extends bL{static get type(){return"MRTNode"}constructor(e){super(),this.outputNodes=e,this.isMRTNode=!0}has(e){return this.outputNodes[e]!==void 0}get(e){return this.outputNodes[e]}merge(e){const t={...this.outputNodes,...e.outputNodes};return TL(t)}setup(e){const t=this.outputNodes,n=e.renderer.getRenderTarget(),r=[],s=n.textures;for(const o in t){const a=SL(s,o);r[a]=sn(t[o])}return this.members=r,super.setup(e)}}const TL=Mn(Jee),ete=Se(([i])=>{const e=i.toUint().mul(747796405).add(2891336453),t=e.shiftRight(e.shiftRight(28).add(4)).bitXor(e).mul(277803737);return t.shiftRight(22).bitXor(t).toFloat().mul(1/2**32)}),Ry=(i,e)=>Ha(Hn(4,i.mul(si(1,i))),e),tte=(i,e)=>i.lessThan(.5)?Ry(i.mul(2),e).div(2):si(1,Ry(Hn(si(1,i),2),e).div(2)),nte=(i,e,t)=>Ha(Sa(Ha(i,e),Br(Ha(i,e),Ha(si(1,i),t))),1/e),ite=(i,e)=>ya(Jd.mul(e.mul(i).sub(1))).div(Jd.mul(e.mul(i).sub(1))),Gl=Se(([i])=>i.fract().sub(.5).abs()).setLayout({name:"tri",type:"float",inputs:[{name:"x",type:"float"}]}),rte=Se(([i])=>be(Gl(i.z.add(Gl(i.y.mul(1)))),Gl(i.z.add(Gl(i.x.mul(1)))),Gl(i.y.add(Gl(i.x.mul(1)))))).setLayout({name:"tri3",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),ste=Se(([i,e,t])=>{const n=be(i).toVar(),r=ae(1.4).toVar(),s=ae(0).toVar(),o=be(n).toVar();return Di({start:ae(0),end:ae(3),type:"float",condition:"<="},()=>{const a=be(rte(o.mul(2))).toVar();n.addAssign(a.add(t.mul(ae(.1).mul(e)))),o.mulAssign(1.8),r.mulAssign(1.5),n.mulAssign(1.2);const l=ae(Gl(n.z.add(Gl(n.x.add(Gl(n.y)))))).toVar();s.addAssign(l.div(r)),o.addAssign(.14)}),s}).setLayout({name:"triNoise3D",type:"float",inputs:[{name:"position",type:"vec3"},{name:"speed",type:"float"},{name:"time",type:"float"}]});class ote extends un{static get type(){return"FunctionOverloadingNode"}constructor(e=[],...t){super(),this.functionNodes=e,this.parametersNodes=t,this._candidateFnCall=null,this.global=!0}getNodeType(){return this.functionNodes[0].shaderNode.layout.type}setup(e){const t=this.parametersNodes;let n=this._candidateFnCall;if(n===null){let r=null,s=-1;for(const o of this.functionNodes){const l=o.shaderNode.layout;if(l===null)throw new Error("FunctionOverloadingNode: FunctionNode must be a layout.");const u=l.inputs;if(t.length===u.length){let c=0;for(let A=0;A<t.length;A++){const m=t[A],_=u[A];m.getNodeType(e)===_.type?c++:c=0}c>s&&(r=o,s=c)}}this._candidateFnCall=n=r(...t)}return n}}const ate=Mn(ote),Gs=i=>(...e)=>ate(i,...e),Mu=on(0).setGroup(pn).onRenderUpdate(i=>i.time),wL=on(0).setGroup(pn).onRenderUpdate(i=>i.deltaTime),ML=on(0,"uint").setGroup(pn).onRenderUpdate(i=>i.frameId),lte=(i=1)=>(console.warn('TSL: timerLocal() is deprecated. Use "time" instead.'),Mu.mul(i)),ute=(i=1)=>(console.warn('TSL: timerGlobal() is deprecated. Use "time" instead.'),Mu.mul(i)),cte=(i=1)=>(console.warn('TSL: timerDelta() is deprecated. Use "deltaTime" instead.'),wL.mul(i)),hte=(i=Mu)=>i.add(.75).mul(Math.PI*2).sin().mul(.5).add(.5),fte=(i=Mu)=>i.fract().round(),dte=(i=Mu)=>i.add(.5).fract().mul(2).sub(1).abs(),Ate=(i=Mu)=>i.fract(),pte=Se(([i,e,t=Ke(.5)])=>m6(i.sub(t),e).add(t)),mte=Se(([i,e,t=Ke(.5)])=>{const n=i.sub(t),r=n.dot(n),o=r.mul(r).mul(e);return i.add(n.mul(o))}),gte=Se(({position:i=null,horizontal:e=!0,vertical:t=!1})=>{let n;i!==null?(n=Wa.toVar(),n[3][0]=i.x,n[3][1]=i.y,n[3][2]=i.z):n=Wa;const r=s0.mul(n);return R8(e)&&(r[0][0]=Wa[0].length(),r[0][1]=0,r[0][2]=0),R8(t)&&(r[1][0]=0,r[1][1]=Wa[1].length(),r[1][2]=0),r[2][0]=0,r[2][1]=0,r[2][2]=1,Bc.mul(r).mul(Er)}),yte=Se(([i=null])=>{const e=n9();return n9(J_(i)).sub(e).lessThan(0).select(Jl,i)});class vte extends un{static get type(){return"SpriteSheetUVNode"}constructor(e,t=Vi(),n=ae(0)){super("vec2"),this.countNode=e,this.uvNode=t,this.frameNode=n}setup(){const{frameNode:e,uvNode:t,countNode:n}=this,{width:r,height:s}=n,o=e.mod(r.mul(s)).floor(),a=o.mod(r),l=s.sub(o.add(1).div(r).ceil()),u=n.reciprocal(),c=Ke(a,l);return t.add(c).mul(u)}}const _te=Mn(vte).setParameterLength(3),EL=Se(([i,e=null,t=null,n=ae(1),r=Er,s=Zo])=>{let o=s.abs().normalize();o=o.div(o.dot(be(1)));const a=r.yz.mul(n),l=r.zx.mul(n),u=r.xy.mul(n),c=i.value,A=e!==null?e.value:c,m=t!==null?t.value:c,_=ni(c,a).mul(o.x),b=ni(A,l).mul(o.y),M=ni(m,u).mul(o.z);return Br(_,b,M)}),xte=(...i)=>EL(...i),j3=new M0,m2=new J,$3=new J,Im=new J,yh=new Wt,df=new J(0,0,-1),j0=new rn,vh=new J,Af=new J,_h=new rn,pf=new Ge,i9=new F0,bte=Jl.flipX();i9.depthTexture=new Qo(1,1);let mf=!1;class fx extends ml{static get type(){return"ReflectorNode"}constructor(e={}){super(e.defaultTexture||i9.texture,bte),this._reflectorBaseNode=e.reflector||new Ste(this,e),this._depthNode=null,this.setUpdateMatrix(!1)}get reflector(){return this._reflectorBaseNode}get target(){return this._reflectorBaseNode.target}getDepthNode(){if(this._depthNode===null){if(this._reflectorBaseNode.depth!==!0)throw new Error("THREE.ReflectorNode: Depth node can only be requested when the reflector is created with { depth: true }. ");this._depthNode=$e(new fx({defaultTexture:i9.depthTexture,reflector:this._reflectorBaseNode}))}return this._depthNode}setup(e){return e.object.isQuadMesh||this._reflectorBaseNode.build(e),super.setup(e)}clone(){const e=new this.constructor(this.reflectorNode);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e._reflectorBaseNode=this._reflectorBaseNode,e}dispose(){super.dispose(),this._reflectorBaseNode.dispose()}}class Ste extends un{static get type(){return"ReflectorBaseNode"}constructor(e,t={}){super();const{target:n=new Ai,resolution:r=1,generateMipmaps:s=!1,bounces:o=!0,depth:a=!1}=t;this.textureNode=e,this.target=n,this.resolution=r,this.generateMipmaps=s,this.bounces=o,this.depth=a,this.updateBeforeType=o?qn.RENDER:qn.FRAME,this.virtualCameras=new WeakMap,this.renderTargets=new Map,this.forceUpdate=!1,this.hasOutput=!1}_updateResolution(e,t){const n=this.resolution;t.getDrawingBufferSize(pf),e.setSize(Math.round(pf.width*n),Math.round(pf.height*n))}setup(e){return this._updateResolution(i9,e.renderer),super.setup(e)}dispose(){super.dispose();for(const e of this.renderTargets.values())e.dispose()}getVirtualCamera(e){let t=this.virtualCameras.get(e);return t===void 0&&(t=e.clone(),this.virtualCameras.set(e,t)),t}getRenderTarget(e){let t=this.renderTargets.get(e);return t===void 0&&(t=new F0(0,0,{type:Yr}),this.generateMipmaps===!0&&(t.texture.minFilter=eE,t.texture.generateMipmaps=!0),this.depth===!0&&(t.depthTexture=new Qo),this.renderTargets.set(e,t)),t}updateBefore(e){if(this.bounces===!1&&mf)return!1;mf=!0;const{scene:t,camera:n,renderer:r,material:s}=e,{target:o}=this,a=this.getVirtualCamera(n),l=this.getRenderTarget(a);r.getDrawingBufferSize(pf),this._updateResolution(l,r),$3.setFromMatrixPosition(o.matrixWorld),Im.setFromMatrixPosition(n.matrixWorld),yh.extractRotation(o.matrixWorld),m2.set(0,0,1),m2.applyMatrix4(yh),vh.subVectors($3,Im);const u=vh.dot(m2)>0;let c=!1;if(u===!0&&this.forceUpdate===!1){if(this.hasOutput===!1){mf=!1;return}c=!0}vh.reflect(m2).negate(),vh.add($3),yh.extractRotation(n.matrixWorld),df.set(0,0,-1),df.applyMatrix4(yh),df.add(Im),Af.subVectors($3,df),Af.reflect(m2).negate(),Af.add($3),a.coordinateSystem=n.coordinateSystem,a.position.copy(vh),a.up.set(0,1,0),a.up.applyMatrix4(yh),a.up.reflect(m2),a.lookAt(Af),a.near=n.near,a.far=n.far,a.updateMatrixWorld(),a.projectionMatrix.copy(n.projectionMatrix),j3.setFromNormalAndCoplanarPoint(m2,$3),j3.applyMatrix4(a.matrixWorldInverse),j0.set(j3.normal.x,j3.normal.y,j3.normal.z,j3.constant);const A=a.projectionMatrix;_h.x=(Math.sign(j0.x)+A.elements[8])/A.elements[0],_h.y=(Math.sign(j0.y)+A.elements[9])/A.elements[5],_h.z=-1,_h.w=(1+A.elements[10])/A.elements[14],j0.multiplyScalar(1/j0.dot(_h));const m=0;A.elements[2]=j0.x,A.elements[6]=j0.y,A.elements[10]=r.coordinateSystem===Qa?j0.z-m:j0.z+1-m,A.elements[14]=j0.w,this.textureNode.value=l.texture,this.depth===!0&&(this.textureNode.getDepthNode().value=l.depthTexture),s.visible=!1;const _=r.getRenderTarget(),b=r.getMRT(),M=r.autoClear;r.setMRT(null),r.setRenderTarget(l),r.autoClear=!0,c?(r.clear(),this.hasOutput=!1):(r.render(t,a),this.hasOutput=!0),r.setMRT(b),r.setRenderTarget(_),r.autoClear=M,s.visible=!0,mf=!1,this.forceUpdate=!1}}const Tte=i=>$e(new fx(i)),Lm=new rl(-1,1,1,-1,0,1);class wte extends Tn{constructor(e=!1){super();const t=e===!1?[0,-1,0,1,2,1]:[0,2,0,0,2,0];this.setAttribute("position",new Ht([-1,3,0,-1,-1,0,3,-1,0],3)),this.setAttribute("uv",new Ht(t,2))}}const Mte=new wte;class MA extends ei{constructor(e=null){super(Mte,e),this.camera=Lm,this.isQuadMesh=!0}async renderAsync(e){return e.renderAsync(this,Lm)}render(e){e.render(this,Lm)}}const Ete=new Ge;class Rte extends ml{static get type(){return"RTTNode"}constructor(e,t=null,n=null,r={type:Yr}){const s=new F0(t,n,r);super(s.texture,Vi()),this.isRTTNode=!0,this.node=e,this.width=t,this.height=n,this.pixelRatio=1,this.renderTarget=s,this.textureNeedsUpdate=!0,this.autoUpdate=!0,this._rttNode=null,this._quadMesh=new MA(new Cr),this.updateBeforeType=qn.RENDER}get autoResize(){return this.width===null}setup(e){return this._rttNode=this.node.context(e.getSharedContext()),this._quadMesh.material.name="RTT",this._quadMesh.material.needsUpdate=!0,super.setup(e)}setSize(e,t){this.width=e,this.height=t;const n=e*this.pixelRatio,r=t*this.pixelRatio;this.renderTarget.setSize(n,r),this.textureNeedsUpdate=!0}setPixelRatio(e){this.pixelRatio=e,this.setSize(this.width,this.height)}updateBefore({renderer:e}){if(this.textureNeedsUpdate===!1&&this.autoUpdate===!1)return;if(this.textureNeedsUpdate=!1,this.autoResize===!0){const n=e.getPixelRatio(),r=e.getSize(Ete),s=r.width*n,o=r.height*n;(s!==this.renderTarget.width||o!==this.renderTarget.height)&&(this.renderTarget.setSize(s,o),this.textureNeedsUpdate=!0)}this._quadMesh.material.fragmentNode=this._rttNode;const t=e.getRenderTarget();e.setRenderTarget(this.renderTarget),this._quadMesh.render(e),e.setRenderTarget(t)}clone(){const e=new ml(this.value,this.uvNode,this.levelNode);return e.sampler=this.sampler,e.referenceNode=this,e}}const RL=(i,...e)=>$e(new Rte($e(i),...e)),Cte=(i,...e)=>i.isTextureNode?i:i.isPassNode?i.getTextureNode():RL(i,...e),r4=Se(([i,e,t],n)=>{let r;n.renderer.coordinateSystem===Qa?(i=Ke(i.x,i.y.oneMinus()).mul(2).sub(1),r=sn(be(i,e),1)):r=sn(be(i.x,i.y.oneMinus(),e).mul(2).sub(1),1);const s=sn(t.mul(r));return s.xyz.div(s.w)}),Pte=Se(([i,e])=>{const t=e.mul(sn(i,1)),n=t.xy.div(t.w).mul(.5).add(.5).toVar();return Ke(n.x,n.y.oneMinus())}),Nte=Se(([i,e,t])=>{const n=cu(Tr(e)),r=os(i.mul(n)).toVar(),s=Tr(e,r).toVar(),o=Tr(e,r.sub(os(2,0))).toVar(),a=Tr(e,r.sub(os(1,0))).toVar(),l=Tr(e,r.add(os(1,0))).toVar(),u=Tr(e,r.add(os(2,0))).toVar(),c=Tr(e,r.add(os(0,2))).toVar(),A=Tr(e,r.add(os(0,1))).toVar(),m=Tr(e,r.sub(os(0,1))).toVar(),_=Tr(e,r.sub(os(0,2))).toVar(),b=Ki(si(ae(2).mul(a).sub(o),s)).toVar(),M=Ki(si(ae(2).mul(l).sub(u),s)).toVar(),w=Ki(si(ae(2).mul(A).sub(c),s)).toVar(),T=Ki(si(ae(2).mul(m).sub(_),s)).toVar(),N=r4(i,s,t).toVar(),P=b.lessThan(M).select(N.sub(r4(i.sub(Ke(ae(1).div(n.x),0)),a,t)),N.negate().add(r4(i.add(Ke(ae(1).div(n.x),0)),l,t))),I=w.lessThan(T).select(N.sub(r4(i.add(Ke(0,ae(1).div(n.y))),A,t)),N.negate().add(r4(i.sub(Ke(0,ae(1).div(n.y))),m,t)));return h1(dA(P,I))});class Ite extends un{static get type(){return"SampleNode"}constructor(e){super(),this.callback=e,this.isSampleNode=!0}setup(){return this.sample(Vi())}sample(e){return this.callback(e)}}const Lte=i=>$e(new Ite(i));class pu extends un{static get type(){return"EventNode"}constructor(e,t){super("void"),this.eventType=e,this.callback=t,e===pu.OBJECT?this.updateType=qn.OBJECT:e===pu.MATERIAL&&(this.updateType=qn.RENDER)}update(e){this.callback(e)}}pu.OBJECT="object";pu.MATERIAL="material";const CL=(i,e)=>$e(new pu(i,e)).toStack(),Dte=i=>CL(pu.OBJECT,i),Bte=i=>CL(pu.MATERIAL,i);class Jf extends Xo{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageInstancedBufferAttribute=!0}}class Fte extends oi{constructor(e,t,n=Float32Array){const r=ArrayBuffer.isView(e)?e:new n(e*t);super(r,t),this.isStorageBufferAttribute=!0}}const Ute=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=Xd("float")):(t=kC(e),n=Xd(e));const r=new Fte(i,t,n);return Q2(r,e,i)},Ote=(i,e="float")=>{let t,n;e.isStruct===!0?(t=e.layout.getLength(),n=Xd("float")):(t=kC(e),n=Xd(e));const r=new Jf(i,t,n);return Q2(r,e,i)};class kte extends un{static get type(){return"PointUVNode"}constructor(){super("vec2"),this.isPointUVNode=!0}generate(){return"vec2( gl_PointCoord.x, 1.0 - gl_PointCoord.y )"}}const Vte=wt(kte),xh=new Ts,Dm=new Wt;class Go extends un{static get type(){return"SceneNode"}constructor(e=Go.BACKGROUND_BLURRINESS,t=null){super(),this.scope=e,this.scene=t}setup(e){const t=this.scope,n=this.scene!==null?this.scene:e.scene;let r;return t===Go.BACKGROUND_BLURRINESS?r=Gi("backgroundBlurriness","float",n):t===Go.BACKGROUND_INTENSITY?r=Gi("backgroundIntensity","float",n):t===Go.BACKGROUND_ROTATION?r=on("mat4").setName("backgroundRotation").setGroup(pn).onRenderUpdate(()=>{const s=n.background;return s!==null&&s.isTexture&&s.mapping!==k8?(xh.copy(n.backgroundRotation),xh.x*=-1,xh.y*=-1,xh.z*=-1,Dm.makeRotationFromEuler(xh)):Dm.identity(),Dm}):console.error("THREE.SceneNode: Unknown scope:",t),r}}Go.BACKGROUND_BLURRINESS="backgroundBlurriness";Go.BACKGROUND_INTENSITY="backgroundIntensity";Go.BACKGROUND_ROTATION="backgroundRotation";const PL=wt(Go,Go.BACKGROUND_BLURRINESS),Cy=wt(Go,Go.BACKGROUND_INTENSITY),NL=wt(Go,Go.BACKGROUND_ROTATION);class zte extends ml{static get type(){return"StorageTextureNode"}constructor(e,t,n=null){super(e,t),this.storeNode=n,this.isStorageTextureNode=!0,this.access=Us.WRITE_ONLY}getInputType(){return"storageTexture"}setup(e){super.setup(e);const t=e.getNodeProperties(this);return t.storeNode=this.storeNode,t}setAccess(e){return this.access=e,this}generate(e,t){let n;return this.storeNode!==null?n=this.generateStore(e):n=super.generate(e,t),n}toReadWrite(){return this.setAccess(Us.READ_WRITE)}toReadOnly(){return this.setAccess(Us.READ_ONLY)}toWriteOnly(){return this.setAccess(Us.WRITE_ONLY)}generateStore(e){const t=e.getNodeProperties(this),{uvNode:n,storeNode:r,depthNode:s}=t,o=super.generate(e,"property"),a=n.build(e,this.value.is3DTexture===!0?"uvec3":"uvec2"),l=r.build(e,"vec4"),u=s?s.build(e,"int"):null,c=e.generateTextureStore(e,o,a,u,l);e.addLineFlowCode(c,this)}clone(){const e=super.clone();return e.storeNode=this.storeNode,e}}const IL=Mn(zte).setParameterLength(1,3),Gte=(i,e,t)=>{const n=IL(i,e,t);return t!==null&&n.toStack(),n},qte=Se(({texture:i,uv:e})=>{const n=be().toVar();return gn(e.x.lessThan(1e-4),()=>{n.assign(be(1,0,0))}).ElseIf(e.y.lessThan(1e-4),()=>{n.assign(be(0,1,0))}).ElseIf(e.z.lessThan(1e-4),()=>{n.assign(be(0,0,1))}).ElseIf(e.x.greaterThan(1-1e-4),()=>{n.assign(be(-1,0,0))}).ElseIf(e.y.greaterThan(1-1e-4),()=>{n.assign(be(0,-1,0))}).ElseIf(e.z.greaterThan(1-1e-4),()=>{n.assign(be(0,0,-1))}).Else(()=>{const s=i.sample(e.add(be(-.01,0,0))).r.sub(i.sample(e.add(be(.01,0,0))).r),o=i.sample(e.add(be(0,-.01,0))).r.sub(i.sample(e.add(be(0,.01,0))).r),a=i.sample(e.add(be(0,0,-.01))).r.sub(i.sample(e.add(be(0,0,.01))).r);n.assign(be(s,o,a))}),n.normalize()});class Hte extends ml{static get type(){return"Texture3DNode"}constructor(e,t=null,n=null){super(e,t,n),this.isTexture3DNode=!0}getInputType(){return"texture3D"}getDefaultUV(){return be(.5,.5,.5)}setUpdateMatrix(){}setupUV(e,t){const n=this.value;return e.isFlipY()&&(n.isRenderTargetTexture===!0||n.isFramebufferTexture===!0)&&(this.sampler?t=t.flipY():t=t.setY(me(cu(this,this.levelNode).y).sub(t.y).sub(1))),t}generateUV(e,t){return t.build(e,"vec3")}normal(e){return qte({texture:this,uv:e})}}const LL=Mn(Hte).setParameterLength(1,3);class Wte extends vA{static get type(){return"UserDataNode"}constructor(e,t,n=null){super(e,t,n),this.userData=n}updateReference(e){return this.reference=this.userData!==null?this.userData:e.object.userData,this.reference}}const jte=(i,e,t)=>$e(new Wte(i,e,t)),Bw=new WeakMap;class $te extends Zr{static get type(){return"VelocityNode"}constructor(){super("vec2"),this.projectionMatrix=null,this.updateType=qn.OBJECT,this.updateAfterType=qn.OBJECT,this.previousModelWorldMatrix=on(new Wt),this.previousProjectionMatrix=on(new Wt).setGroup(pn),this.previousCameraViewMatrix=on(new Wt)}setProjectionMatrix(e){this.projectionMatrix=e}update({frameId:e,camera:t,object:n}){const r=Fw(n);this.previousModelWorldMatrix.value.copy(r);const s=DL(t);s.frameId!==e&&(s.frameId=e,s.previousProjectionMatrix===void 0?(s.previousProjectionMatrix=new Wt,s.previousCameraViewMatrix=new Wt,s.currentProjectionMatrix=new Wt,s.currentCameraViewMatrix=new Wt,s.previousProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.previousCameraViewMatrix.copy(t.matrixWorldInverse)):(s.previousProjectionMatrix.copy(s.currentProjectionMatrix),s.previousCameraViewMatrix.copy(s.currentCameraViewMatrix)),s.currentProjectionMatrix.copy(this.projectionMatrix||t.projectionMatrix),s.currentCameraViewMatrix.copy(t.matrixWorldInverse),this.previousProjectionMatrix.value.copy(s.previousProjectionMatrix),this.previousCameraViewMatrix.value.copy(s.previousCameraViewMatrix))}updateAfter({object:e}){Fw(e).copy(e.matrixWorld)}setup(){const e=this.projectionMatrix===null?Bc:on(this.projectionMatrix),t=this.previousCameraViewMatrix.mul(this.previousModelWorldMatrix),n=e.mul(Fc).mul(Er),r=this.previousProjectionMatrix.mul(t).mul(t9),s=n.xy.div(n.w),o=r.xy.div(r.w);return si(s,o)}}function DL(i){let e=Bw.get(i);return e===void 0&&(e={},Bw.set(i,e)),e}function Fw(i,e=0){const t=DL(i);let n=t[e];return n===void 0&&(t[e]=n=new Wt,t[e].copy(i.matrixWorld)),n}const Xte=wt($te),Qte=Se(([i])=>dx(i.rgb)),Yte=Se(([i,e=ae(1)])=>e.mix(dx(i.rgb),i.rgb)),Kte=Se(([i,e=ae(1)])=>{const t=Br(i.r,i.g,i.b).div(3),n=i.r.max(i.g.max(i.b)),r=n.sub(t).mul(e).mul(-3);return _i(i.rgb,n,r)}),Zte=Se(([i,e=ae(1)])=>{const t=be(.57735,.57735,.57735),n=e.cos();return be(i.rgb.mul(n).add(t.cross(i.rgb).mul(e.sin()).add(t.mul(Su(t,i.rgb).mul(n.oneMinus())))))}),dx=(i,e=be(Sn.getLuminanceCoefficients(new J)))=>Su(i,e),Jte=Se(([i,e=be(1),t=be(0),n=be(1),r=ae(1),s=be(Sn.getLuminanceCoefficients(new J,r1))])=>{const o=i.rgb.dot(be(s)),a=_r(i.rgb.mul(e).add(t),0).toVar(),l=a.pow(n).toVar();return gn(a.r.greaterThan(0),()=>{a.r.assign(l.r)}),gn(a.g.greaterThan(0),()=>{a.g.assign(l.g)}),gn(a.b.greaterThan(0),()=>{a.b.assign(l.b)}),a.assign(o.add(a.sub(o).mul(r))),sn(a.rgb,i.a)});class ene extends Zr{static get type(){return"PosterizeNode"}constructor(e,t){super(),this.sourceNode=e,this.stepsNode=t}setup(){const{sourceNode:e,stepsNode:t}=this;return e.mul(t).floor().div(t)}}const tne=Mn(ene).setParameterLength(2),gf=new Ge;class BL extends ml{static get type(){return"PassTextureNode"}constructor(e,t){super(t),this.passNode=e,this.setUpdateMatrix(!1)}setup(e){return this.passNode.build(e),super.setup(e)}clone(){return new this.constructor(this.passNode,this.value)}}class Uw extends BL{static get type(){return"PassMultipleTextureNode"}constructor(e,t,n=!1){super(e,null),this.textureName=t,this.previousTexture=n}updateTexture(){this.value=this.previousTexture?this.passNode.getPreviousTexture(this.textureName):this.passNode.getTexture(this.textureName)}setup(e){return this.updateTexture(),super.setup(e)}clone(){const e=new this.constructor(this.passNode,this.textureName,this.previousTexture);return e.uvNode=this.uvNode,e.levelNode=this.levelNode,e.biasNode=this.biasNode,e.sampler=this.sampler,e.depthNode=this.depthNode,e.compareNode=this.compareNode,e.gradNode=this.gradNode,e}}class gl extends Zr{static get type(){return"PassNode"}constructor(e,t,n,r={}){super("vec4"),this.scope=e,this.scene=t,this.camera=n,this.options=r,this._pixelRatio=1,this._width=1,this._height=1;const s=new Qo;s.isRenderTargetTexture=!0,s.name="depth";const o=new F0(this._width*this._pixelRatio,this._height*this._pixelRatio,{type:Yr,...r});o.texture.name="output",o.depthTexture=s,this.renderTarget=o,this._textures={output:o.texture,depth:s},this._textureNodes={},this._linearDepthNodes={},this._viewZNodes={},this._previousTextures={},this._previousTextureNodes={},this._cameraNear=on(0),this._cameraFar=on(0),this._mrt=null,this._layers=null,this._resolution=1,this._viewport=null,this._scissor=null,this.isPassNode=!0,this.updateBeforeType=qn.FRAME,this.global=!0}setResolution(e){return this._resolution=e,this}getResolution(){return this._resolution}setLayers(e){return this._layers=e,this}getLayers(){return this._layers}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getTexture(e){let t=this._textures[e];return t===void 0&&(t=this.renderTarget.texture.clone(),t.name=e,this._textures[e]=t,this.renderTarget.textures.push(t)),t}getPreviousTexture(e){let t=this._previousTextures[e];return t===void 0&&(t=this.getTexture(e).clone(),this._previousTextures[e]=t),t}toggleTexture(e){const t=this._previousTextures[e];if(t!==void 0){const n=this._textures[e],r=this.renderTarget.textures.indexOf(n);this.renderTarget.textures[r]=t,this._textures[e]=t,this._previousTextures[e]=n,this._textureNodes[e].updateTexture(),this._previousTextureNodes[e].updateTexture()}}getTextureNode(e="output"){let t=this._textureNodes[e];return t===void 0&&(t=$e(new Uw(this,e)),t.updateTexture(),this._textureNodes[e]=t),t}getPreviousTextureNode(e="output"){let t=this._previousTextureNodes[e];return t===void 0&&(this._textureNodes[e]===void 0&&this.getTextureNode(e),t=$e(new Uw(this,e,!0)),t.updateTexture(),this._previousTextureNodes[e]=t),t}getViewZNode(e="depth"){let t=this._viewZNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar;this._viewZNodes[e]=t=ex(this.getTextureNode(e),n,r)}return t}getLinearDepthNode(e="depth"){let t=this._linearDepthNodes[e];if(t===void 0){const n=this._cameraNear,r=this._cameraFar,s=this.getViewZNode(e);this._linearDepthNodes[e]=t=w4(s,n,r)}return t}async compileAsync(e){const t=e.getRenderTarget(),n=e.getMRT();e.setRenderTarget(this.renderTarget),e.setMRT(this._mrt),await e.compileAsync(this.scene,this.camera),e.setRenderTarget(t),e.setMRT(n)}setup({renderer:e}){return this.renderTarget.samples=this.options.samples===void 0?e.samples:this.options.samples,this.renderTarget.texture.type=e.getColorBufferType(),this.scope===gl.COLOR?this.getTextureNode():this.getLinearDepthNode()}updateBefore(e){const{renderer:t}=e,{scene:n}=this;let r,s;const o=t.getOutputRenderTarget();o&&o.isXRRenderTarget===!0?(s=1,r=t.xr.getCamera(),t.xr.updateCamera(r),gf.set(o.width,o.height)):(r=this.camera,s=t.getPixelRatio(),t.getSize(gf)),this._pixelRatio=s,this.setSize(gf.width,gf.height);const a=t.getRenderTarget(),l=t.getMRT(),u=r.layers.mask;this._cameraNear.value=r.near,this._cameraFar.value=r.far,this._layers!==null&&(r.layers.mask=this._layers.mask);for(const c in this._previousTextures)this.toggleTexture(c);t.setRenderTarget(this.renderTarget),t.setMRT(this._mrt),t.render(n,r),t.setRenderTarget(a),t.setMRT(l),r.layers.mask=u}setSize(e,t){this._width=e,this._height=t;const n=this._width*this._pixelRatio*this._resolution,r=this._height*this._pixelRatio*this._resolution;this.renderTarget.setSize(n,r),this._scissor!==null&&this.renderTarget.scissor.copy(this._scissor),this._viewport!==null&&this.renderTarget.viewport.copy(this._viewport)}setScissor(e,t,n,r){e===null?this._scissor=null:(this._scissor===null&&(this._scissor=new rn),e.isVector4?this._scissor.copy(e):this._scissor.set(e,t,n,r),this._scissor.multiplyScalar(this._pixelRatio*this._resolution).floor())}setViewport(e,t,n,r){e===null?this._viewport=null:(this._viewport===null&&(this._viewport=new rn),e.isVector4?this._viewport.copy(e):this._viewport.set(e,t,n,r),this._viewport.multiplyScalar(this._pixelRatio*this._resolution).floor())}setPixelRatio(e){this._pixelRatio=e,this.setSize(this._width,this._height)}dispose(){this.renderTarget.dispose()}}gl.COLOR="color";gl.DEPTH="depth";const nne=(i,e,t)=>$e(new gl(gl.COLOR,i,e,t)),ine=(i,e)=>$e(new BL(i,e)),rne=(i,e,t)=>$e(new gl(gl.DEPTH,i,e,t));class sne extends gl{static get type(){return"ToonOutlinePassNode"}constructor(e,t,n,r,s){super(gl.COLOR,e,t),this.colorNode=n,this.thicknessNode=r,this.alphaNode=s,this._materialCache=new WeakMap}updateBefore(e){const{renderer:t}=e,n=t.getRenderObjectFunction();t.setRenderObjectFunction((r,s,o,a,l,u,c,A)=>{if((l.isMeshToonMaterial||l.isMeshToonNodeMaterial)&&l.wireframe===!1){const m=this._getOutlineMaterial(l);t.renderObject(r,s,o,a,m,u,c,A)}t.renderObject(r,s,o,a,l,u,c,A)}),super.updateBefore(e),t.setRenderObjectFunction(n)}_createMaterial(){const e=new Cr;e.isMeshToonOutlineMaterial=!0,e.name="Toon_Outline",e.side=Bi;const t=Zo.negate(),n=Bc.mul(Fc),r=ae(1),s=n.mul(sn(Er,1)),o=n.mul(sn(Er.add(t),1)),a=h1(s.sub(o));return e.vertexNode=s.add(a.mul(this.thicknessNode).mul(s.w).mul(r)),e.colorNode=sn(this.colorNode,this.alphaNode),e}_getOutlineMaterial(e){let t=this._materialCache.get(e);return t===void 0&&(t=this._createMaterial(),this._materialCache.set(e,t)),t}}const one=(i,e,t=new Et(0,0,0),n=.003,r=1)=>$e(new sne(i,e,$e(t),$e(n),$e(r))),FL=Se(([i,e])=>i.mul(e).clamp()).setLayout({name:"linearToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),UL=Se(([i,e])=>(i=i.mul(e),i.div(i.add(1)).clamp())).setLayout({name:"reinhardToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),OL=Se(([i,e])=>{i=i.mul(e),i=i.sub(.004).max(0);const t=i.mul(i.mul(6.2).add(.5)),n=i.mul(i.mul(6.2).add(1.7)).add(.06);return t.div(n).pow(2.2)}).setLayout({name:"cineonToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),ane=Se(([i])=>{const e=i.mul(i.add(.0245786)).sub(90537e-9),t=i.mul(i.add(.432951).mul(.983729)).add(.238081);return e.div(t)}),kL=Se(([i,e])=>{const t=no(.59719,.35458,.04823,.076,.90834,.01566,.0284,.13383,.83777),n=no(1.60475,-.53108,-.07367,-.10208,1.10813,-.00605,-.00327,-.07276,1.07602);return i=i.mul(e).div(.6),i=t.mul(i),i=ane(i),i=n.mul(i),i.clamp()}).setLayout({name:"acesFilmicToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),lne=no(be(1.6605,-.1246,-.0182),be(-.5876,1.1329,-.1006),be(-.0728,-.0083,1.1187)),une=no(be(.6274,.0691,.0164),be(.3293,.9195,.088),be(.0433,.0113,.8956)),cne=Se(([i])=>{const e=be(i).toVar(),t=be(e.mul(e)).toVar(),n=be(t.mul(t)).toVar();return ae(15.5).mul(n.mul(t)).sub(Hn(40.14,n.mul(e))).add(Hn(31.96,n).sub(Hn(6.868,t.mul(e))).add(Hn(.4298,t).add(Hn(.1191,e).sub(.00232))))}),VL=Se(([i,e])=>{const t=be(i).toVar(),n=no(be(.856627153315983,.137318972929847,.11189821299995),be(.0951212405381588,.761241990602591,.0767994186031903),be(.0482516061458583,.101439036467562,.811302368396859)),r=no(be(1.1271005818144368,-.1413297634984383,-.14132976349843826),be(-.11060664309660323,1.157823702216272,-.11060664309660294),be(-.016493938717834573,-.016493938717834257,1.2519364065950405)),s=ae(-12.47393),o=ae(4.026069);return t.mulAssign(e),t.assign(une.mul(t)),t.assign(n.mul(t)),t.assign(_r(t,1e-10)),t.assign(al(t)),t.assign(t.sub(s).div(o.sub(s))),t.assign(Za(t,0,1)),t.assign(cne(t)),t.assign(r.mul(t)),t.assign(Ha(_r(be(0),t),be(2.2))),t.assign(lne.mul(t)),t.assign(Za(t,0,1)),t}).setLayout({name:"agxToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]}),zL=Se(([i,e])=>{const t=ae(.76),n=ae(.15);i=i.mul(e);const r=Ko(i.r,Ko(i.g,i.b)),s=Ss(r.lessThan(.08),r.sub(Hn(6.25,r.mul(r))),.04);i.subAssign(s);const o=_r(i.r,_r(i.g,i.b));gn(o.lessThan(t),()=>i);const a=si(1,t),l=si(1,a.mul(a).div(o.add(a.sub(t))));i.mulAssign(l.div(o));const u=si(1,Sa(1,n.mul(o.sub(l)).add(1)));return _i(i,be(l),u)}).setLayout({name:"neutralToneMapping",type:"vec3",inputs:[{name:"color",type:"vec3"},{name:"exposure",type:"float"}]});class jr extends un{static get type(){return"CodeNode"}constructor(e="",t=[],n=""){super("code"),this.isCodeNode=!0,this.global=!0,this.code=e,this.includes=t,this.language=n}setIncludes(e){return this.includes=e,this}getIncludes(){return this.includes}generate(e){const t=this.getIncludes(e);for(const r of t)r.build(e);const n=e.getCodeFromNode(this,this.getNodeType(e));return n.code=this.code,n.code}serialize(e){super.serialize(e),e.code=this.code,e.language=this.language}deserialize(e){super.deserialize(e),this.code=e.code,this.language=e.language}}const EA=Mn(jr).setParameterLength(1,3),hne=(i,e)=>EA(i,e,"js"),fne=(i,e)=>EA(i,e,"wgsl"),dne=(i,e)=>EA(i,e,"glsl");class GL extends jr{static get type(){return"FunctionNode"}constructor(e="",t=[],n=""){super(e,t,n)}getNodeType(e){return this.getNodeFunction(e).type}getInputs(e){return this.getNodeFunction(e).inputs}getNodeFunction(e){const t=e.getDataFromNode(this);let n=t.nodeFunction;return n===void 0&&(n=e.parser.parseFunction(this.code),t.nodeFunction=n),n}generate(e,t){super.generate(e);const n=this.getNodeFunction(e),r=n.name,s=n.type,o=e.getCodeFromNode(this,s);r!==""&&(o.name=r);const a=e.getPropertyName(o),l=this.getNodeFunction(e).getCode(a);return o.code=l+`
`,t==="property"?a:e.format(`${a}()`,s,t)}}const qL=(i,e=[],t="")=>{for(let s=0;s<e.length;s++){const o=e[s];typeof o=="function"&&(e[s]=o.functionNode)}const n=$e(new GL(i,e,t)),r=(...s)=>n.call(...s);return r.functionNode=n,r},Ane=(i,e)=>qL(i,e,"glsl"),pne=(i,e)=>qL(i,e,"wgsl");class mne extends un{static get type(){return"ScriptableValueNode"}constructor(e=null){super(),this._value=e,this._cache=null,this.inputType=null,this.outputType=null,this.events=new Ta,this.isScriptableValueNode=!0}get isScriptableOutputNode(){return this.outputType!==null}set value(e){this._value!==e&&(this._cache&&this.inputType==="URL"&&this.value.value instanceof ArrayBuffer&&(URL.revokeObjectURL(this._cache),this._cache=null),this._value=e,this.events.dispatchEvent({type:"change"}),this.refresh())}get value(){return this._value}refresh(){this.events.dispatchEvent({type:"refresh"})}getValue(){const e=this.value;if(e&&this._cache===null&&this.inputType==="URL"&&e.value instanceof ArrayBuffer)this._cache=URL.createObjectURL(new Blob([e.value]));else if(e&&e.value!==null&&e.value!==void 0&&((this.inputType==="URL"||this.inputType==="String")&&typeof e.value=="string"||this.inputType==="Number"&&typeof e.value=="number"||this.inputType==="Vector2"&&e.value.isVector2||this.inputType==="Vector3"&&e.value.isVector3||this.inputType==="Vector4"&&e.value.isVector4||this.inputType==="Color"&&e.value.isColor||this.inputType==="Matrix3"&&e.value.isMatrix3||this.inputType==="Matrix4"&&e.value.isMatrix4))return e.value;return this._cache||e}getNodeType(e){return this.value&&this.value.isNode?this.value.getNodeType(e):"float"}setup(){return this.value&&this.value.isNode?this.value:ae()}serialize(e){super.serialize(e),this.value!==null?this.inputType==="ArrayBuffer"?e.value=GC(this.value):e.value=this.value?this.value.toJSON(e.meta).uuid:null:e.value=null,e.inputType=this.inputType,e.outputType=this.outputType}deserialize(e){super.deserialize(e);let t=null;e.value!==null&&(e.inputType==="ArrayBuffer"?t=qC(e.value):e.inputType==="Texture"?t=e.meta.textures[e.value]:t=e.meta.nodes[e.value]||null),this.value=t,this.inputType=e.inputType,this.outputType=e.outputType}}const ed=Mn(mne).setParameterLength(1);class HL extends Map{get(e,t=null,...n){if(this.has(e))return super.get(e);if(t!==null){const r=t(...n);return this.set(e,r),r}}}class gne{constructor(e){this.scriptableNode=e}get parameters(){return this.scriptableNode.parameters}get layout(){return this.scriptableNode.getLayout()}getInputLayout(e){return this.scriptableNode.getInputLayout(e)}get(e){const t=this.parameters[e];return t?t.getValue():null}}const td=new HL;class yne extends un{static get type(){return"ScriptableNode"}constructor(e=null,t={}){super(),this.codeNode=e,this.parameters=t,this._local=new HL,this._output=ed(null),this._outputs={},this._source=this.source,this._method=null,this._object=null,this._value=null,this._needsOutputUpdate=!0,this.onRefresh=this.onRefresh.bind(this),this.isScriptableNode=!0}get source(){return this.codeNode?this.codeNode.code:""}setLocal(e,t){return this._local.set(e,t)}getLocal(e){return this._local.get(e)}onRefresh(){this._refresh()}getInputLayout(e){for(const t of this.getLayout())if(t.inputType&&(t.id===e||t.name===e))return t}getOutputLayout(e){for(const t of this.getLayout())if(t.outputType&&(t.id===e||t.name===e))return t}setOutput(e,t){const n=this._outputs;return n[e]===void 0?n[e]=ed(t):n[e].value=t,this}getOutput(e){return this._outputs[e]}getParameter(e){return this.parameters[e]}setParameter(e,t){const n=this.parameters;return t&&t.isScriptableNode?(this.deleteParameter(e),n[e]=t,n[e].getDefaultOutput().events.addEventListener("refresh",this.onRefresh)):t&&t.isScriptableValueNode?(this.deleteParameter(e),n[e]=t,n[e].events.addEventListener("refresh",this.onRefresh)):n[e]===void 0?(n[e]=ed(t),n[e].events.addEventListener("refresh",this.onRefresh)):n[e].value=t,this}getValue(){return this.getDefaultOutput().getValue()}deleteParameter(e){let t=this.parameters[e];return t&&(t.isScriptableNode&&(t=t.getDefaultOutput()),t.events.removeEventListener("refresh",this.onRefresh)),this}clearParameters(){for(const e of Object.keys(this.parameters))this.deleteParameter(e);return this.needsUpdate=!0,this}call(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r(...t)}async callAsync(e,...t){const r=this.getObject()[e];if(typeof r=="function")return r.constructor.name==="AsyncFunction"?await r(...t):r(...t)}getNodeType(e){return this.getDefaultOutputNode().getNodeType(e)}refresh(e=null){e!==null?this.getOutput(e).refresh():this._refresh()}getObject(){if(this.needsUpdate&&this.dispose(),this._object!==null)return this._object;const e=()=>this.refresh(),t=(u,c)=>this.setOutput(u,c),n=new gne(this),r=td.get("THREE"),s=td.get("TSL"),o=this.getMethod(),a=[n,this._local,td,e,t,r,s];this._object=o(...a);const l=this._object.layout;if(l&&(l.cache===!1&&this._local.clear(),this._output.outputType=l.outputType||null,Array.isArray(l.elements)))for(const u of l.elements){const c=u.id||u.name;u.inputType&&(this.getParameter(c)===void 0&&this.setParameter(c,null),this.getParameter(c).inputType=u.inputType),u.outputType&&(this.getOutput(c)===void 0&&this.setOutput(c,null),this.getOutput(c).outputType=u.outputType)}return this._object}deserialize(e){super.deserialize(e);for(const t in this.parameters){let n=this.parameters[t];n.isScriptableNode&&(n=n.getDefaultOutput()),n.events.addEventListener("refresh",this.onRefresh)}}getLayout(){return this.getObject().layout}getDefaultOutputNode(){const e=this.getDefaultOutput().value;return e&&e.isNode?e:ae()}getDefaultOutput(){return this._exec()._output}getMethod(){if(this.needsUpdate&&this.dispose(),this._method!==null)return this._method;const e=["parameters","local","global","refresh","setOutput","THREE","TSL"],n=["layout","init","main","dispose"].join(", "),r="var "+n+`; var output = {};
`,s=`
return { ...output, `+n+" };",o=r+this.codeNode.code+s;return this._method=new Function(...e,o),this._method}dispose(){this._method!==null&&(this._object&&typeof this._object.dispose=="function"&&this._object.dispose(),this._method=null,this._object=null,this._source=null,this._value=null,this._needsOutputUpdate=!0,this._output.value=null,this._outputs={})}setup(){return this.getDefaultOutputNode()}getCacheKey(e){const t=[FC(this.source),this.getDefaultOutputNode().getCacheKey(e)];for(const n in this.parameters)t.push(this.parameters[n].getCacheKey(e));return eA(t)}set needsUpdate(e){e===!0&&this.dispose()}get needsUpdate(){return this.source!==this._source}_exec(){return this.codeNode===null?this:(this._needsOutputUpdate===!0&&(this._value=this.call("main"),this._needsOutputUpdate=!1),this._output.value=this._value,this)}_refresh(){this.needsUpdate=!0,this._exec(),this._output.refresh()}}const vne=Mn(yne).setParameterLength(1,2);function WL(i){let e;const t=i.context.getViewZ;return t!==void 0&&(e=t(this)),(e||Rr.z).negate()}const Ax=Se(([i,e],t)=>{const n=WL(t);return pl(i,e,n)}),px=Se(([i],e)=>{const t=WL(e);return i.mul(i,t,t).negate().exp().oneMinus()}),F8=Se(([i,e])=>sn(e.toFloat().mix(b4.rgb,i.toVec3()),b4.a));function _ne(i,e,t){return console.warn('THREE.TSL: "rangeFog( color, near, far )" is deprecated. Use "fog( color, rangeFogFactor( near, far ) )" instead.'),F8(i,Ax(e,t))}function xne(i,e){return console.warn('THREE.TSL: "densityFog( color, density )" is deprecated. Use "fog( color, densityFogFactor( density ) )" instead.'),F8(i,px(e))}let g2=null,y2=null;class bne extends un{static get type(){return"RangeNode"}constructor(e=ae(),t=ae()){super(),this.minNode=e,this.maxNode=t}getVectorLength(e){const t=e.getTypeLength(ru(this.minNode.value)),n=e.getTypeLength(ru(this.maxNode.value));return t>n?t:n}getNodeType(e){return e.object.count>1?e.getTypeFromLength(this.getVectorLength(e)):"float"}setup(e){const t=e.object;let n=null;if(t.count>1){const r=this.minNode.value,s=this.maxNode.value,o=e.getTypeLength(ru(r)),a=e.getTypeLength(ru(s));g2=g2||new rn,y2=y2||new rn,g2.setScalar(0),y2.setScalar(0),o===1?g2.setScalar(r):r.isColor?g2.set(r.r,r.g,r.b,1):g2.set(r.x,r.y,r.z||0,r.w||0),a===1?y2.setScalar(s):s.isColor?y2.set(s.r,s.g,s.b,1):y2.set(s.x,s.y,s.z||0,s.w||0);const l=4,u=l*t.count,c=new Float32Array(u);for(let m=0;m<u;m++){const _=m%l,b=g2.getComponent(_),M=y2.getComponent(_);c[m]=R9.lerp(b,M,Math.random())}const A=this.getNodeType(e);if(t.count<=4096)n=h6(c,"vec4",t.count).element(hu).convert(A);else{const m=new Xo(c,4);e.geometry.setAttribute("__range"+this.id,m),n=e9(m).convert(A)}}else n=ae(0);return n}}const Sne=Mn(bne).setParameterLength(2);class Tne extends un{static get type(){return"ComputeBuiltinNode"}constructor(e,t){super(t),this._builtinName=e}getHash(e){return this.getBuiltinName(e)}getNodeType(){return this.nodeType}setBuiltinName(e){return this._builtinName=e,this}getBuiltinName(){return this._builtinName}hasBuiltin(e){return e.hasBuiltin(this._builtinName)}generate(e,t){const n=this.getBuiltinName(e),r=this.getNodeType(e);return e.shaderStage==="compute"?e.format(n,r,t):(console.warn(`ComputeBuiltinNode: Compute built-in value ${n} can not be accessed in the ${e.shaderStage} stage`),e.generateConst(r))}serialize(e){super.serialize(e),e.global=this.global,e._builtinName=this._builtinName}deserialize(e){super.deserialize(e),this.global=e.global,this._builtinName=e._builtinName}}const g6=(i,e)=>$e(new Tne(i,e)),wne=g6("numWorkgroups","uvec3"),Mne=g6("workgroupId","uvec3"),Ene=g6("globalId","uvec3"),Rne=g6("localId","uvec3"),Cne=g6("subgroupSize","uint");class Pne extends un{constructor(e){super(),this.scope=e}generate(e){const{scope:t}=this,{renderer:n}=e;n.backend.isWebGLBackend===!0?e.addFlowCode(`	// ${t}Barrier 
`):e.addLineFlowCode(`${t}Barrier()`,this)}}const mx=Mn(Pne),Nne=()=>mx("workgroup").toStack(),Ine=()=>mx("storage").toStack(),Lne=()=>mx("texture").toStack();class Dne extends Dc{constructor(e,t){super(e,t),this.isWorkgroupInfoElementNode=!0}generate(e,t){let n;const r=e.context.assign;if(n=super.generate(e),r!==!0){const s=this.getNodeType(e);n=e.format(n,s,t)}return n}}class Bne extends un{constructor(e,t,n=0){super(t),this.bufferType=t,this.bufferCount=n,this.isWorkgroupInfoNode=!0,this.elementType=t,this.scope=e,this.name=""}setName(e){return this.name=e,this}label(e){return console.warn('THREE.TSL: "label()" has been deprecated. Use "setName()" instead.'),this.setName(e)}setScope(e){return this.scope=e,this}getElementType(){return this.elementType}getInputType(){return`${this.scope}Array`}element(e){return $e(new Dne(this,e))}generate(e){const t=this.name!==""?this.name:`${this.scope}Array_${this.id}`;return e.getScopedArray(t,this.scope.toLowerCase(),this.bufferType,this.bufferCount)}}const Fne=(i,e)=>$e(new Bne("Workgroup",i,e));class fs extends un{static get type(){return"AtomicFunctionNode"}constructor(e,t,n){super("uint"),this.method=e,this.pointerNode=t,this.valueNode=n,this.parents=!0}getInputType(e){return this.pointerNode.getNodeType(e)}getNodeType(e){return this.getInputType(e)}generate(e){const t=e.getNodeProperties(this),n=t.parents,r=this.method,s=this.getNodeType(e),o=this.getInputType(e),a=this.pointerNode,l=this.valueNode,u=[];u.push(`&${a.build(e,o)}`),l!==null&&u.push(l.build(e,o));const c=`${e.getMethod(r,s)}( ${u.join(", ")} )`;if(n?n.length===1&&n[0].isStackNode===!0:!1)e.addLineFlowCode(c,this);else return t.constNode===void 0&&(t.constNode=f1(c,s).toConst()),t.constNode.build(e)}}fs.ATOMIC_LOAD="atomicLoad";fs.ATOMIC_STORE="atomicStore";fs.ATOMIC_ADD="atomicAdd";fs.ATOMIC_SUB="atomicSub";fs.ATOMIC_MAX="atomicMax";fs.ATOMIC_MIN="atomicMin";fs.ATOMIC_AND="atomicAnd";fs.ATOMIC_OR="atomicOr";fs.ATOMIC_XOR="atomicXor";const Une=Mn(fs),Sl=(i,e,t)=>Une(i,e,t).toStack(),One=i=>Sl(fs.ATOMIC_LOAD,i,null),kne=(i,e)=>Sl(fs.ATOMIC_STORE,i,e),Vne=(i,e)=>Sl(fs.ATOMIC_ADD,i,e),zne=(i,e)=>Sl(fs.ATOMIC_SUB,i,e),Gne=(i,e)=>Sl(fs.ATOMIC_MAX,i,e),qne=(i,e)=>Sl(fs.ATOMIC_MIN,i,e),Hne=(i,e)=>Sl(fs.ATOMIC_AND,i,e),Wne=(i,e)=>Sl(fs.ATOMIC_OR,i,e),jne=(i,e)=>Sl(fs.ATOMIC_XOR,i,e);let yf;function RA(i){yf=yf||new WeakMap;let e=yf.get(i);return e===void 0&&yf.set(i,e={}),e}function CA(i){const e=RA(i);return e.shadowMatrix||(e.shadowMatrix=on("mat4").setGroup(pn).onRenderUpdate(t=>((i.castShadow!==!0||t.renderer.shadowMap.enabled===!1)&&i.shadow.updateMatrices(i),i.shadow.matrix)))}function jL(i,e=cl){const t=CA(i).mul(e);return t.xyz.div(t.w)}function gx(i){const e=RA(i);return e.position||(e.position=on(new J).setGroup(pn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.matrixWorld)))}function $L(i){const e=RA(i);return e.targetPosition||(e.targetPosition=on(new J).setGroup(pn).onRenderUpdate((t,n)=>n.value.setFromMatrixPosition(i.target.matrixWorld)))}function yx(i){const e=RA(i);return e.viewPosition||(e.viewPosition=on(new J).setGroup(pn).onRenderUpdate(({camera:t},n)=>{n.value=n.value||new J,n.value.setFromMatrixPosition(i.matrixWorld),n.value.applyMatrix4(t.matrixWorldInverse)}))}const vx=i=>s0.transformDirection(gx(i).sub($L(i))),$ne=i=>i.sort((e,t)=>e.id-t.id),Xne=(i,e)=>{for(const t of e)if(t.isAnalyticLightNode&&t.light.id===i)return t;return null},Bm=new WeakMap,bh=[];class _x extends un{static get type(){return"LightsNode"}constructor(){super("vec3"),this.totalDiffuseNode=Zl("vec3","totalDiffuse"),this.totalSpecularNode=Zl("vec3","totalSpecular"),this.outgoingLightNode=Zl("vec3","outgoingLight"),this._lights=[],this._lightNodes=null,this._lightNodesHash=null,this.global=!0}customCacheKey(){const e=this._lights;for(let n=0;n<e.length;n++){const r=e[n];if(bh.push(r.id),bh.push(r.castShadow?1:0),r.isSpotLight===!0){const s=r.map!==null?r.map.id:-1,o=r.colorNode?r.colorNode.getCacheKey():-1;bh.push(s,o)}}const t=eA(bh);return bh.length=0,t}getHash(e){if(this._lightNodesHash===null){this._lightNodes===null&&this.setupLightsNode(e);const t=[];for(const n of this._lightNodes)t.push(n.getSelf().getHash());this._lightNodesHash="lights-"+t.join(",")}return this._lightNodesHash}analyze(e){const t=e.getNodeProperties(this);for(const n of t.nodes)n.build(e);t.outputNode.build(e)}setupLightsNode(e){const t=[],n=this._lightNodes,r=$ne(this._lights),s=e.renderer.library;for(const o of r)if(o.isNode)t.push($e(o));else{let a=null;if(n!==null&&(a=Xne(o.id,n)),a===null){const l=s.getLightNodeClass(o.constructor);if(l===null){console.warn(`LightsNode.setupNodeLights: Light node not found for ${o.constructor.name}`);continue}let u=null;Bm.has(o)?u=Bm.get(o):(u=$e(new l(o)),Bm.set(o,u)),t.push(u)}}this._lightNodes=t}setupDirectLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.direct({...n,lightNode:t,reflectedLight:s},e)}setupDirectRectAreaLight(e,t,n){const{lightingModel:r,reflectedLight:s}=e.context;r.directRectArea({...n,lightNode:t,reflectedLight:s},e)}setupLights(e,t){for(const n of t)n.build(e)}getLightNodes(e){return this._lightNodes===null&&this.setupLightsNode(e),this._lightNodes}setup(e){const t=e.lightsNode;e.lightsNode=this;let n=this.outgoingLightNode;const r=e.context,s=r.lightingModel,o=e.getNodeProperties(this);if(s){const{totalDiffuseNode:a,totalSpecularNode:l}=this;r.outgoingLight=n;const u=e.addStack();o.nodes=u.nodes,s.start(e);const{backdrop:c,backdropAlpha:A}=r,{directDiffuse:m,directSpecular:_,indirectDiffuse:b,indirectSpecular:M}=r.reflectedLight;let w=m.add(b);c!==null&&(A!==null?w=be(A.mix(w,c)):w=be(c),r.material.transparent=!0),a.assign(w),l.assign(_.add(M)),n.assign(a.add(l)),s.finish(e),n=n.bypass(e.removeStack())}else o.nodes=[];return e.lightsNode=t,n}setLights(e){return this._lights=e,this._lightNodes=null,this._lightNodesHash=null,this}getLights(){return this._lights}get hasLights(){return this._lights.length>0}}const Qne=(i=[])=>$e(new _x).setLights(i);class Yne extends un{static get type(){return"ShadowBaseNode"}constructor(e){super(),this.light=e,this.updateBeforeType=qn.RENDER,this.isShadowBaseNode=!0}setupShadowPosition({context:e,material:t}){xx.assign(t.receivedShadowPositionNode||e.shadowPositionWorld||cl)}}const xx=Zl("vec3","shadowPositionWorld");function Kne(i,e={}){return e.toneMapping=i.toneMapping,e.toneMappingExposure=i.toneMappingExposure,e.outputColorSpace=i.outputColorSpace,e.renderTarget=i.getRenderTarget(),e.activeCubeFace=i.getActiveCubeFace(),e.activeMipmapLevel=i.getActiveMipmapLevel(),e.renderObjectFunction=i.getRenderObjectFunction(),e.pixelRatio=i.getPixelRatio(),e.mrt=i.getMRT(),e.clearColor=i.getClearColor(e.clearColor||new Et),e.clearAlpha=i.getClearAlpha(),e.autoClear=i.autoClear,e.scissorTest=i.getScissorTest(),e}function Zne(i,e){return e=Kne(i,e),i.setMRT(null),i.setRenderObjectFunction(null),i.setClearColor(0,1),i.autoClear=!0,e}function Jne(i,e){i.toneMapping=e.toneMapping,i.toneMappingExposure=e.toneMappingExposure,i.outputColorSpace=e.outputColorSpace,i.setRenderTarget(e.renderTarget,e.activeCubeFace,e.activeMipmapLevel),i.setRenderObjectFunction(e.renderObjectFunction),i.setPixelRatio(e.pixelRatio),i.setMRT(e.mrt),i.setClearColor(e.clearColor,e.clearAlpha),i.autoClear=e.autoClear,i.setScissorTest(e.scissorTest)}function eie(i,e={}){return e.background=i.background,e.backgroundNode=i.backgroundNode,e.overrideMaterial=i.overrideMaterial,e}function tie(i,e){return e=eie(i,e),i.background=null,i.backgroundNode=null,i.overrideMaterial=null,e}function nie(i,e){i.background=e.background,i.backgroundNode=e.backgroundNode,i.overrideMaterial=e.overrideMaterial}function iie(i,e,t){return t=Zne(i,t),t=tie(e,t),t}function rie(i,e,t){Jne(i,t),nie(e,t)}const Ow=new WeakMap,XL=Se(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{let n=ni(i,e.xy).setName("t_basic");return i.isArrayTexture&&(n=n.depth(t)),n.compare(e.z)}),QL=Se(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const r=(w,T)=>{let N=ni(i,w);return i.isArrayTexture&&(N=N.depth(n)),N.compare(T)},s=Gi("mapSize","vec2",t).setGroup(pn),o=Gi("radius","float",t).setGroup(pn),a=Ke(1).div(s),l=a.x.negate().mul(o),u=a.y.negate().mul(o),c=a.x.mul(o),A=a.y.mul(o),m=l.div(2),_=u.div(2),b=c.div(2),M=A.div(2);return Br(r(e.xy.add(Ke(l,u)),e.z),r(e.xy.add(Ke(0,u)),e.z),r(e.xy.add(Ke(c,u)),e.z),r(e.xy.add(Ke(m,_)),e.z),r(e.xy.add(Ke(0,_)),e.z),r(e.xy.add(Ke(b,_)),e.z),r(e.xy.add(Ke(l,0)),e.z),r(e.xy.add(Ke(m,0)),e.z),r(e.xy,e.z),r(e.xy.add(Ke(b,0)),e.z),r(e.xy.add(Ke(c,0)),e.z),r(e.xy.add(Ke(m,M)),e.z),r(e.xy.add(Ke(0,M)),e.z),r(e.xy.add(Ke(b,M)),e.z),r(e.xy.add(Ke(l,A)),e.z),r(e.xy.add(Ke(0,A)),e.z),r(e.xy.add(Ke(c,A)),e.z)).mul(1/17)}),YL=Se(({depthTexture:i,shadowCoord:e,shadow:t,depthLayer:n})=>{const r=(A,m)=>{let _=ni(i,A);return i.isArrayTexture&&(_=_.depth(n)),_.compare(m)},s=Gi("mapSize","vec2",t).setGroup(pn),o=Ke(1).div(s),a=o.x,l=o.y,u=e.xy,c=A1(u.mul(s).add(.5));return u.subAssign(c.mul(o)),Br(r(u,e.z),r(u.add(Ke(a,0)),e.z),r(u.add(Ke(0,l)),e.z),r(u.add(o),e.z),_i(r(u.add(Ke(a.negate(),0)),e.z),r(u.add(Ke(a.mul(2),0)),e.z),c.x),_i(r(u.add(Ke(a.negate(),l)),e.z),r(u.add(Ke(a.mul(2),l)),e.z),c.x),_i(r(u.add(Ke(0,l.negate())),e.z),r(u.add(Ke(0,l.mul(2))),e.z),c.y),_i(r(u.add(Ke(a,l.negate())),e.z),r(u.add(Ke(a,l.mul(2))),e.z),c.y),_i(_i(r(u.add(Ke(a.negate(),l.negate())),e.z),r(u.add(Ke(a.mul(2),l.negate())),e.z),c.x),_i(r(u.add(Ke(a.negate(),l.mul(2))),e.z),r(u.add(Ke(a.mul(2),l.mul(2))),e.z),c.x),c.y)).mul(1/9)}),KL=Se(({depthTexture:i,shadowCoord:e,depthLayer:t})=>{const n=ae(1).toVar();let r=ni(i).sample(e.xy);i.isArrayTexture&&(r=r.depth(t)),r=r.rg;const s=fA(e.z,r.x);return gn(s.notEqual(ae(1)),()=>{const o=e.z.sub(r.x),a=_r(0,r.y.mul(r.y));let l=a.div(a.add(o.mul(o)));l=Za(si(l,.3).div(.95-.3)),n.assign(Za(_r(s,l)))}),n}),sie=Se(([i,e,t])=>{let n=cl.sub(i).length();return n=n.sub(e).div(t.sub(e)),n=n.saturate(),n}),oie=i=>{const e=i.shadow.camera,t=Gi("near","float",e).setGroup(pn),n=Gi("far","float",e).setGroup(pn),r=PN(i);return sie(r,t,n)},ZL=i=>{let e=Ow.get(i);if(e===void 0){const t=i.isPointLight?oie(i):null;e=new Cr,e.colorNode=sn(0,0,0,1),e.depthNode=t,e.isShadowPassMaterial=!0,e.name="ShadowMaterial",e.fog=!1,Ow.set(i,e)}return e},kw=new B0,X3=[],JL=(i,e,t,n)=>{X3[0]=i,X3[1]=e;let r=kw.get(X3);return(r===void 0||r.shadowType!==t||r.useVelocity!==n)&&(r=(s,o,a,l,u,c,...A)=>{(s.castShadow===!0||s.receiveShadow&&t===Ao)&&(n&&(zC(s).useVelocity=!0),s.onBeforeShadow(i,s,a,e.camera,l,o.overrideMaterial,c),i.renderObject(s,o,a,l,u,c,...A),s.onAfterShadow(i,s,a,e.camera,l,o.overrideMaterial,c))},r.shadowType=t,r.useVelocity=n,kw.set(X3,r)),X3[0]=null,X3[1]=null,r},aie=Se(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:r})=>{const s=ae(0).toVar("meanVertical"),o=ae(0).toVar("squareMeanVertical"),a=i.lessThanEqual(ae(1)).select(ae(0),ae(2).div(i.sub(1))),l=i.lessThanEqual(ae(1)).select(ae(0),ae(-1));Di({start:me(0),end:me(i),type:"int",condition:"<"},({i:c})=>{const A=l.add(ae(c).mul(a));let m=n.sample(Br(p6.xy,Ke(0,A).mul(e)).div(t));n.value.isArrayTexture&&(m=m.depth(r)),m=m.x,s.addAssign(m),o.addAssign(m.mul(m))}),s.divAssign(i),o.divAssign(i);const u=xl(o.sub(s.mul(s)));return Ke(s,u)}),lie=Se(({samples:i,radius:e,size:t,shadowPass:n,depthLayer:r})=>{const s=ae(0).toVar("meanHorizontal"),o=ae(0).toVar("squareMeanHorizontal"),a=i.lessThanEqual(ae(1)).select(ae(0),ae(2).div(i.sub(1))),l=i.lessThanEqual(ae(1)).select(ae(0),ae(-1));Di({start:me(0),end:me(i),type:"int",condition:"<"},({i:c})=>{const A=l.add(ae(c).mul(a));let m=n.sample(Br(p6.xy,Ke(A,0).mul(e)).div(t));n.value.isArrayTexture&&(m=m.depth(r)),s.addAssign(m.x),o.addAssign(Br(m.y.mul(m.y),m.x.mul(m.x)))}),s.divAssign(i),o.divAssign(i);const u=xl(o.sub(s.mul(s)));return Ke(s,u)}),uie=[XL,QL,YL,KL];let Fm;const vf=new MA;class eD extends Yne{static get type(){return"ShadowNode"}constructor(e,t=null){super(e),this.shadow=t||e.shadow,this.shadowMap=null,this.vsmShadowMapVertical=null,this.vsmShadowMapHorizontal=null,this.vsmMaterialVertical=null,this.vsmMaterialHorizontal=null,this._node=null,this._cameraFrameId=new WeakMap,this.isShadowNode=!0,this.depthLayer=0}setupShadowFilter(e,{filterFn:t,depthTexture:n,shadowCoord:r,shadow:s,depthLayer:o}){const a=r.x.greaterThanEqual(0).and(r.x.lessThanEqual(1)).and(r.y.greaterThanEqual(0)).and(r.y.lessThanEqual(1)).and(r.z.lessThanEqual(1)),l=t({depthTexture:n,shadowCoord:r,shadow:s,depthLayer:o});return a.select(l,ae(1))}setupShadowCoord(e,t){const{shadow:n}=this,{renderer:r}=e,s=Gi("bias","float",n).setGroup(pn);let o=t,a;if(n.camera.isOrthographicCamera||r.logarithmicDepthBuffer!==!0)o=o.xyz.div(o.w),a=o.z,r.coordinateSystem===Qa&&(a=a.mul(2).sub(1));else{const l=o.w;o=o.xy.div(l);const u=Gi("near","float",n.camera).setGroup(pn),c=Gi("far","float",n.camera).setGroup(pn);a=tx(l.negate(),u,c)}return o=be(o.x,o.y.oneMinus(),a.add(s)),o}getShadowFilterFn(e){return uie[e]}setupRenderTarget(e,t){const n=new Qo(e.mapSize.width,e.mapSize.height);n.name="ShadowDepthTexture",n.compareFunction=H8;const r=t.createRenderTarget(e.mapSize.width,e.mapSize.height);return r.texture.name="ShadowMap",r.texture.type=e.mapType,r.depthTexture=n,{shadowMap:r,depthTexture:n}}setupShadow(e){const{renderer:t}=e,{light:n,shadow:r}=this,s=t.shadowMap.type,{depthTexture:o,shadowMap:a}=this.setupRenderTarget(r,e);if(r.camera.updateProjectionMatrix(),s===Ao&&r.isPointLightShadow!==!0){o.compareFunction=null,a.depth>1?(a._vsmShadowMapVertical||(a._vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:nl,type:Yr,depth:a.depth,depthBuffer:!1}),a._vsmShadowMapVertical.texture.name="VSMVertical"),this.vsmShadowMapVertical=a._vsmShadowMapVertical,a._vsmShadowMapHorizontal||(a._vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:nl,type:Yr,depth:a.depth,depthBuffer:!1}),a._vsmShadowMapHorizontal.texture.name="VSMHorizontal"),this.vsmShadowMapHorizontal=a._vsmShadowMapHorizontal):(this.vsmShadowMapVertical=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:nl,type:Yr,depthBuffer:!1}),this.vsmShadowMapHorizontal=e.createRenderTarget(r.mapSize.width,r.mapSize.height,{format:nl,type:Yr,depthBuffer:!1}));let T=ni(o);o.isArrayTexture&&(T=T.depth(this.depthLayer));let N=ni(this.vsmShadowMapVertical.texture);o.isArrayTexture&&(N=N.depth(this.depthLayer));const P=Gi("blurSamples","float",r).setGroup(pn),I=Gi("radius","float",r).setGroup(pn),B=Gi("mapSize","vec2",r).setGroup(pn);let F=this.vsmMaterialVertical||(this.vsmMaterialVertical=new Cr);F.fragmentNode=aie({samples:P,radius:I,size:B,shadowPass:T,depthLayer:this.depthLayer}).context(e.getSharedContext()),F.name="VSMVertical",F=this.vsmMaterialHorizontal||(this.vsmMaterialHorizontal=new Cr),F.fragmentNode=lie({samples:P,radius:I,size:B,shadowPass:N,depthLayer:this.depthLayer}).context(e.getSharedContext()),F.name="VSMHorizontal"}const l=Gi("intensity","float",r).setGroup(pn),u=Gi("normalBias","float",r).setGroup(pn),c=CA(n).mul(xx.add(Tu.mul(u))),A=this.setupShadowCoord(e,c),m=r.filterNode||this.getShadowFilterFn(t.shadowMap.type)||null;if(m===null)throw new Error("THREE.WebGPURenderer: Shadow map type not supported yet.");const _=s===Ao&&r.isPointLightShadow!==!0?this.vsmShadowMapHorizontal.texture:o,b=this.setupShadowFilter(e,{filterFn:m,shadowTexture:a.texture,depthTexture:_,shadowCoord:A,shadow:r,depthLayer:this.depthLayer});let M=ni(a.texture,A);o.isArrayTexture&&(M=M.depth(this.depthLayer));const w=_i(1,b.rgb.mix(M,1),l.mul(M.a)).toVar();return this.shadowMap=a,this.shadow.map=a,w}setup(e){if(e.renderer.shadowMap.enabled!==!1)return Se(()=>{let t=this._node;return this.setupShadowPosition(e),t===null&&(this._node=t=this.setupShadow(e)),e.material.shadowNode&&console.warn('THREE.NodeMaterial: ".shadowNode" is deprecated. Use ".castShadowNode" instead.'),e.material.receivedShadowNode&&(t=e.material.receivedShadowNode(t)),t})()}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:o}=e;t.updateMatrices(r),n.setSize(t.mapSize.width,t.mapSize.height,n.depth),s.render(o,t.camera)}updateShadow(e){const{shadowMap:t,light:n,shadow:r}=this,{renderer:s,scene:o,camera:a}=e,l=s.shadowMap.type,u=t.depthTexture.version;this._depthVersionCached=u;const c=r.camera.layers.mask;r.camera.layers.mask&4294967294||(r.camera.layers.mask=a.layers.mask);const A=s.getRenderObjectFunction(),m=s.getMRT(),_=m?m.has("velocity"):!1;Fm=iie(s,o,Fm),o.overrideMaterial=ZL(n),s.setRenderObjectFunction(JL(s,r,l,_)),s.setClearColor(0,0),s.setRenderTarget(t),this.renderShadow(e),s.setRenderObjectFunction(A),l===Ao&&r.isPointLightShadow!==!0&&this.vsmPass(s),r.camera.layers.mask=c,rie(s,o,Fm)}vsmPass(e){const{shadow:t}=this,n=this.shadowMap.depth;this.vsmShadowMapVertical.setSize(t.mapSize.width,t.mapSize.height,n),this.vsmShadowMapHorizontal.setSize(t.mapSize.width,t.mapSize.height,n),e.setRenderTarget(this.vsmShadowMapVertical),vf.material=this.vsmMaterialVertical,vf.render(e),e.setRenderTarget(this.vsmShadowMapHorizontal),vf.material=this.vsmMaterialHorizontal,vf.render(e)}dispose(){this.shadowMap.dispose(),this.shadowMap=null,this.vsmShadowMapVertical!==null&&(this.vsmShadowMapVertical.dispose(),this.vsmShadowMapVertical=null,this.vsmMaterialVertical.dispose(),this.vsmMaterialVertical=null),this.vsmShadowMapHorizontal!==null&&(this.vsmShadowMapHorizontal.dispose(),this.vsmShadowMapHorizontal=null,this.vsmMaterialHorizontal.dispose(),this.vsmMaterialHorizontal=null),super.dispose()}updateBefore(e){const{shadow:t}=this;let n=t.needsUpdate||t.autoUpdate;n&&(this._cameraFrameId[e.camera]===e.frameId&&(n=!1),this._cameraFrameId[e.camera]=e.frameId),n&&(this.updateShadow(e),this.shadowMap.depthTexture.version===this._depthVersionCached&&(t.needsUpdate=!1))}}const tD=(i,e)=>$e(new eD(i,e)),cie=new Et,w0=Se(([i,e])=>{const t=i.toVar(),n=Ki(t),r=Sa(1,_r(n.x,_r(n.y,n.z)));n.mulAssign(r),t.mulAssign(r.mul(e.mul(2).oneMinus()));const s=Ke(t.xy).toVar(),a=e.mul(1.5).oneMinus();return gn(n.z.greaterThanEqual(a),()=>{gn(t.z.greaterThan(0),()=>{s.x.assign(si(4,t.x))})}).ElseIf(n.x.greaterThanEqual(a),()=>{const l=D8(t.x);s.x.assign(t.z.mul(l).add(l.mul(2)))}).ElseIf(n.y.greaterThanEqual(a),()=>{const l=D8(t.y);s.x.assign(t.x.add(l.mul(2)).add(2)),s.y.assign(t.z.mul(l).sub(2))}),Ke(.125,.25).mul(s).add(Ke(.375,.75)).flipY()}).setLayout({name:"cubeToUV",type:"vec2",inputs:[{name:"pos",type:"vec3"},{name:"texelSizeY",type:"float"}]}),nD=Se(({depthTexture:i,bd3D:e,dp:t,texelSize:n})=>ni(i,w0(e,n.y)).compare(t)),iD=Se(({depthTexture:i,bd3D:e,dp:t,texelSize:n,shadow:r})=>{const s=Gi("radius","float",r).setGroup(pn),o=Ke(-1,1).mul(s).mul(n.y);return ni(i,w0(e.add(o.xyy),n.y)).compare(t).add(ni(i,w0(e.add(o.yyy),n.y)).compare(t)).add(ni(i,w0(e.add(o.xyx),n.y)).compare(t)).add(ni(i,w0(e.add(o.yyx),n.y)).compare(t)).add(ni(i,w0(e,n.y)).compare(t)).add(ni(i,w0(e.add(o.xxy),n.y)).compare(t)).add(ni(i,w0(e.add(o.yxy),n.y)).compare(t)).add(ni(i,w0(e.add(o.xxx),n.y)).compare(t)).add(ni(i,w0(e.add(o.yxx),n.y)).compare(t)).mul(1/9)}),hie=Se(({filterFn:i,depthTexture:e,shadowCoord:t,shadow:n})=>{const r=t.xyz.toVar(),s=r.length(),o=on("float").setGroup(pn).onRenderUpdate(()=>n.camera.near),a=on("float").setGroup(pn).onRenderUpdate(()=>n.camera.far),l=Gi("bias","float",n).setGroup(pn),u=on(n.mapSize).setGroup(pn),c=ae(1).toVar();return gn(s.sub(a).lessThanEqual(0).and(s.sub(o).greaterThanEqual(0)),()=>{const A=s.sub(o).div(a.sub(o)).toVar();A.addAssign(l);const m=r.normalize(),_=Ke(1).div(u.mul(Ke(4,2)));c.assign(i({depthTexture:e,bd3D:m,dp:A,texelSize:_,shadow:n}))}),c}),Vw=new rn,Q3=new Ge,Sh=new Ge;class fie extends eD{static get type(){return"PointShadowNode"}constructor(e,t=null){super(e,t)}getShadowFilterFn(e){return e===Hy?nD:iD}setupShadowCoord(e,t){return t}setupShadowFilter(e,{filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:o}){return hie({filterFn:t,shadowTexture:n,depthTexture:r,shadowCoord:s,shadow:o})}renderShadow(e){const{shadow:t,shadowMap:n,light:r}=this,{renderer:s,scene:o}=e,a=t.getFrameExtents();Sh.copy(t.mapSize),Sh.multiply(a),n.setSize(Sh.width,Sh.height),Q3.copy(t.mapSize);const l=s.autoClear,u=s.getClearColor(cie),c=s.getClearAlpha();s.autoClear=!1,s.setClearColor(t.clearColor,t.clearAlpha),s.clear();const A=t.getViewportCount();for(let m=0;m<A;m++){const _=t.getViewport(m),b=Q3.x*_.x,M=Sh.y-Q3.y-Q3.y*_.y;Vw.set(b,M,Q3.x*_.z,Q3.y*_.w),n.viewport.copy(Vw),t.updateMatrices(r,m),s.render(o,t.camera)}s.autoClear=l,s.setClearColor(u,c)}}const rD=(i,e)=>$e(new fie(i,e));class Uc extends A5{static get type(){return"AnalyticLightNode"}constructor(e=null){super(),this.light=e,this.color=new Et,this.colorNode=e&&e.colorNode||on(this.color).setGroup(pn),this.baseColorNode=null,this.shadowNode=null,this.shadowColorNode=null,this.isAnalyticLightNode=!0,this.updateType=qn.FRAME}getHash(){return this.light.uuid}getLightVector(e){return yx(this.light).sub(e.context.positionView||Rr)}setupDirect(){}setupDirectRectArea(){}setupShadowNode(){return tD(this.light)}setupShadow(e){const{renderer:t}=e;if(t.shadowMap.enabled===!1)return;let n=this.shadowColorNode;if(n===null){const r=this.light.shadow.shadowNode;let s;r!==void 0?s=$e(r):s=this.setupShadowNode(),this.shadowNode=s,this.shadowColorNode=n=this.colorNode.mul(s),this.baseColorNode=this.colorNode}this.colorNode=n}setup(e){this.colorNode=this.baseColorNode||this.colorNode,this.light.castShadow?e.object.receiveShadow&&this.setupShadow(e):this.shadowNode!==null&&(this.shadowNode.dispose(),this.shadowNode=null,this.shadowColorNode=null);const t=this.setupDirect(e),n=this.setupDirectRectArea(e);t&&e.lightsNode.setupDirectLight(e,this,t),n&&e.lightsNode.setupDirectRectAreaLight(e,this,n)}update(){const{light:e}=this;this.color.copy(e.color).multiplyScalar(e.intensity)}}const bx=Se(({lightDistance:i,cutoffDistance:e,decayExponent:t})=>{const n=i.pow(t).max(.01).reciprocal();return e.greaterThan(0).select(n.mul(i.div(e).pow4().oneMinus().clamp().pow2()),n)}),sD=({color:i,lightVector:e,cutoffDistance:t,decayExponent:n})=>{const r=e.normalize(),s=e.length(),o=bx({lightDistance:s,cutoffDistance:t,decayExponent:n}),a=i.mul(o);return{lightDirection:r,lightColor:a}};class die extends Uc{static get type(){return"PointLightNode"}constructor(e=null){super(e),this.cutoffDistanceNode=on(0).setGroup(pn),this.decayExponentNode=on(2).setGroup(pn)}update(e){const{light:t}=this;super.update(e),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}setupShadowNode(){return rD(this.light)}setupDirect(e){return sD({color:this.colorNode,lightVector:this.getLightVector(e),cutoffDistance:this.cutoffDistanceNode,decayExponent:this.decayExponentNode})}}const Aie=Se(([i=Vi()])=>{const e=i.mul(2),t=e.x.floor(),n=e.y.floor();return t.add(n).mod(2).sign()}),pie=Se(([i=Vi()],{renderer:e,material:t})=>{const n=I_(i.mul(2).sub(1));let r;if(t.alphaToCoverage&&e.samples>1){const s=ae(n.fwidth()).toVar();r=pl(s.oneMinus(),s.add(1),n).oneMinus()}else r=Ss(n.greaterThan(1),0,1);return r}),r8=Se(([i,e,t])=>{const n=ae(t).toVar(),r=ae(e).toVar(),s=Ka(i).toVar();return Ss(s,r,n)}).setLayout({name:"mx_select",type:"float",inputs:[{name:"b",type:"bool"},{name:"t",type:"float"},{name:"f",type:"float"}]}),r9=Se(([i,e])=>{const t=Ka(e).toVar(),n=ae(i).toVar();return Ss(t,n.negate(),n)}).setLayout({name:"mx_negate_if",type:"float",inputs:[{name:"val",type:"float"},{name:"b",type:"bool"}]}),Dr=Se(([i])=>{const e=ae(i).toVar();return me(ll(e))}).setLayout({name:"mx_floor",type:"int",inputs:[{name:"x",type:"float"}]}),cr=Se(([i,e])=>{const t=ae(i).toVar();return e.assign(Dr(t)),t.sub(ae(e))}),mie=Se(([i,e,t,n,r,s])=>{const o=ae(s).toVar(),a=ae(r).toVar(),l=ae(n).toVar(),u=ae(t).toVar(),c=ae(e).toVar(),A=ae(i).toVar(),m=ae(si(1,a)).toVar();return si(1,o).mul(A.mul(m).add(c.mul(a))).add(o.mul(u.mul(m).add(l.mul(a))))}).setLayout({name:"mx_bilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"}]}),gie=Se(([i,e,t,n,r,s])=>{const o=ae(s).toVar(),a=ae(r).toVar(),l=be(n).toVar(),u=be(t).toVar(),c=be(e).toVar(),A=be(i).toVar(),m=ae(si(1,a)).toVar();return si(1,o).mul(A.mul(m).add(c.mul(a))).add(o.mul(u.mul(m).add(l.mul(a))))}).setLayout({name:"mx_bilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"}]}),oD=Gs([mie,gie]),yie=Se(([i,e,t,n,r,s,o,a,l,u,c])=>{const A=ae(c).toVar(),m=ae(u).toVar(),_=ae(l).toVar(),b=ae(a).toVar(),M=ae(o).toVar(),w=ae(s).toVar(),T=ae(r).toVar(),N=ae(n).toVar(),P=ae(t).toVar(),I=ae(e).toVar(),B=ae(i).toVar(),F=ae(si(1,_)).toVar(),O=ae(si(1,m)).toVar();return ae(si(1,A)).toVar().mul(O.mul(B.mul(F).add(I.mul(_))).add(m.mul(P.mul(F).add(N.mul(_))))).add(A.mul(O.mul(T.mul(F).add(w.mul(_))).add(m.mul(M.mul(F).add(b.mul(_))))))}).setLayout({name:"mx_trilerp_0",type:"float",inputs:[{name:"v0",type:"float"},{name:"v1",type:"float"},{name:"v2",type:"float"},{name:"v3",type:"float"},{name:"v4",type:"float"},{name:"v5",type:"float"},{name:"v6",type:"float"},{name:"v7",type:"float"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),vie=Se(([i,e,t,n,r,s,o,a,l,u,c])=>{const A=ae(c).toVar(),m=ae(u).toVar(),_=ae(l).toVar(),b=be(a).toVar(),M=be(o).toVar(),w=be(s).toVar(),T=be(r).toVar(),N=be(n).toVar(),P=be(t).toVar(),I=be(e).toVar(),B=be(i).toVar(),F=ae(si(1,_)).toVar(),O=ae(si(1,m)).toVar();return ae(si(1,A)).toVar().mul(O.mul(B.mul(F).add(I.mul(_))).add(m.mul(P.mul(F).add(N.mul(_))))).add(A.mul(O.mul(T.mul(F).add(w.mul(_))).add(m.mul(M.mul(F).add(b.mul(_))))))}).setLayout({name:"mx_trilerp_1",type:"vec3",inputs:[{name:"v0",type:"vec3"},{name:"v1",type:"vec3"},{name:"v2",type:"vec3"},{name:"v3",type:"vec3"},{name:"v4",type:"vec3"},{name:"v5",type:"vec3"},{name:"v6",type:"vec3"},{name:"v7",type:"vec3"},{name:"s",type:"float"},{name:"t",type:"float"},{name:"r",type:"float"}]}),aD=Gs([yie,vie]),_ie=Se(([i,e,t])=>{const n=ae(t).toVar(),r=ae(e).toVar(),s=Lt(i).toVar(),o=Lt(s.bitAnd(Lt(7))).toVar(),a=ae(r8(o.lessThan(Lt(4)),r,n)).toVar(),l=ae(Hn(2,r8(o.lessThan(Lt(4)),n,r))).toVar();return r9(a,Ka(o.bitAnd(Lt(1)))).add(r9(l,Ka(o.bitAnd(Lt(2)))))}).setLayout({name:"mx_gradient_float_0",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"}]}),xie=Se(([i,e,t,n])=>{const r=ae(n).toVar(),s=ae(t).toVar(),o=ae(e).toVar(),a=Lt(i).toVar(),l=Lt(a.bitAnd(Lt(15))).toVar(),u=ae(r8(l.lessThan(Lt(8)),o,s)).toVar(),c=ae(r8(l.lessThan(Lt(4)),s,r8(l.equal(Lt(12)).or(l.equal(Lt(14))),o,r))).toVar();return r9(u,Ka(l.bitAnd(Lt(1)))).add(r9(c,Ka(l.bitAnd(Lt(2)))))}).setLayout({name:"mx_gradient_float_1",type:"float",inputs:[{name:"hash",type:"uint"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),_s=Gs([_ie,xie]),bie=Se(([i,e,t])=>{const n=ae(t).toVar(),r=ae(e).toVar(),s=f5(i).toVar();return be(_s(s.x,r,n),_s(s.y,r,n),_s(s.z,r,n))}).setLayout({name:"mx_gradient_vec3_0",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"}]}),Sie=Se(([i,e,t,n])=>{const r=ae(n).toVar(),s=ae(t).toVar(),o=ae(e).toVar(),a=f5(i).toVar();return be(_s(a.x,o,s,r),_s(a.y,o,s,r),_s(a.z,o,s,r))}).setLayout({name:"mx_gradient_vec3_1",type:"vec3",inputs:[{name:"hash",type:"uvec3"},{name:"x",type:"float"},{name:"y",type:"float"},{name:"z",type:"float"}]}),ka=Gs([bie,Sie]),Tie=Se(([i])=>{const e=ae(i).toVar();return Hn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_0",type:"float",inputs:[{name:"v",type:"float"}]}),wie=Se(([i])=>{const e=ae(i).toVar();return Hn(.982,e)}).setLayout({name:"mx_gradient_scale3d_0",type:"float",inputs:[{name:"v",type:"float"}]}),Mie=Se(([i])=>{const e=be(i).toVar();return Hn(.6616,e)}).setLayout({name:"mx_gradient_scale2d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),lD=Gs([Tie,Mie]),Eie=Se(([i])=>{const e=be(i).toVar();return Hn(.982,e)}).setLayout({name:"mx_gradient_scale3d_1",type:"vec3",inputs:[{name:"v",type:"vec3"}]}),uD=Gs([wie,Eie]),ma=Se(([i,e])=>{const t=me(e).toVar(),n=Lt(i).toVar();return n.shiftLeft(t).bitOr(n.shiftRight(me(32).sub(t)))}).setLayout({name:"mx_rotl32",type:"uint",inputs:[{name:"x",type:"uint"},{name:"k",type:"int"}]}),cD=Se(([i,e,t])=>{i.subAssign(t),i.bitXorAssign(ma(t,me(4))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(ma(i,me(6))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(ma(e,me(8))),e.addAssign(i),i.subAssign(t),i.bitXorAssign(ma(t,me(16))),t.addAssign(e),e.subAssign(i),e.bitXorAssign(ma(i,me(19))),i.addAssign(t),t.subAssign(e),t.bitXorAssign(ma(e,me(4))),e.addAssign(i)}),y6=Se(([i,e,t])=>{const n=Lt(t).toVar(),r=Lt(e).toVar(),s=Lt(i).toVar();return n.bitXorAssign(r),n.subAssign(ma(r,me(14))),s.bitXorAssign(n),s.subAssign(ma(n,me(11))),r.bitXorAssign(s),r.subAssign(ma(s,me(25))),n.bitXorAssign(r),n.subAssign(ma(r,me(16))),s.bitXorAssign(n),s.subAssign(ma(n,me(4))),r.bitXorAssign(s),r.subAssign(ma(s,me(14))),n.bitXorAssign(r),n.subAssign(ma(r,me(24))),n}).setLayout({name:"mx_bjfinal",type:"uint",inputs:[{name:"a",type:"uint"},{name:"b",type:"uint"},{name:"c",type:"uint"}]}),to=Se(([i])=>{const e=Lt(i).toVar();return ae(e).div(ae(Lt(me(4294967295))))}).setLayout({name:"mx_bits_to_01",type:"float",inputs:[{name:"bits",type:"uint"}]}),hl=Se(([i])=>{const e=ae(i).toVar();return e.mul(e).mul(e).mul(e.mul(e.mul(6).sub(15)).add(10))}).setLayout({name:"mx_fade",type:"float",inputs:[{name:"t",type:"float"}]}),Rie=Se(([i])=>{const e=me(i).toVar(),t=Lt(Lt(1)).toVar(),n=Lt(Lt(me(3735928559)).add(t.shiftLeft(Lt(2))).add(Lt(13))).toVar();return y6(n.add(Lt(e)),n,n)}).setLayout({name:"mx_hash_int_0",type:"uint",inputs:[{name:"x",type:"int"}]}),Cie=Se(([i,e])=>{const t=me(e).toVar(),n=me(i).toVar(),r=Lt(Lt(2)).toVar(),s=Lt().toVar(),o=Lt().toVar(),a=Lt().toVar();return s.assign(o.assign(a.assign(Lt(me(3735928559)).add(r.shiftLeft(Lt(2))).add(Lt(13))))),s.addAssign(Lt(n)),o.addAssign(Lt(t)),y6(s,o,a)}).setLayout({name:"mx_hash_int_1",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Pie=Se(([i,e,t])=>{const n=me(t).toVar(),r=me(e).toVar(),s=me(i).toVar(),o=Lt(Lt(3)).toVar(),a=Lt().toVar(),l=Lt().toVar(),u=Lt().toVar();return a.assign(l.assign(u.assign(Lt(me(3735928559)).add(o.shiftLeft(Lt(2))).add(Lt(13))))),a.addAssign(Lt(s)),l.addAssign(Lt(r)),u.addAssign(Lt(n)),y6(a,l,u)}).setLayout({name:"mx_hash_int_2",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Nie=Se(([i,e,t,n])=>{const r=me(n).toVar(),s=me(t).toVar(),o=me(e).toVar(),a=me(i).toVar(),l=Lt(Lt(4)).toVar(),u=Lt().toVar(),c=Lt().toVar(),A=Lt().toVar();return u.assign(c.assign(A.assign(Lt(me(3735928559)).add(l.shiftLeft(Lt(2))).add(Lt(13))))),u.addAssign(Lt(a)),c.addAssign(Lt(o)),A.addAssign(Lt(s)),cD(u,c,A),u.addAssign(Lt(r)),y6(u,c,A)}).setLayout({name:"mx_hash_int_3",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"}]}),Iie=Se(([i,e,t,n,r])=>{const s=me(r).toVar(),o=me(n).toVar(),a=me(t).toVar(),l=me(e).toVar(),u=me(i).toVar(),c=Lt(Lt(5)).toVar(),A=Lt().toVar(),m=Lt().toVar(),_=Lt().toVar();return A.assign(m.assign(_.assign(Lt(me(3735928559)).add(c.shiftLeft(Lt(2))).add(Lt(13))))),A.addAssign(Lt(u)),m.addAssign(Lt(l)),_.addAssign(Lt(a)),cD(A,m,_),A.addAssign(Lt(o)),m.addAssign(Lt(s)),y6(A,m,_)}).setLayout({name:"mx_hash_int_4",type:"uint",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xx",type:"int"},{name:"yy",type:"int"}]}),Ii=Gs([Rie,Cie,Pie,Nie,Iie]),Lie=Se(([i,e])=>{const t=me(e).toVar(),n=me(i).toVar(),r=Lt(Ii(n,t)).toVar(),s=f5().toVar();return s.x.assign(r.bitAnd(me(255))),s.y.assign(r.shiftRight(me(8)).bitAnd(me(255))),s.z.assign(r.shiftRight(me(16)).bitAnd(me(255))),s}).setLayout({name:"mx_hash_vec3_0",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"}]}),Die=Se(([i,e,t])=>{const n=me(t).toVar(),r=me(e).toVar(),s=me(i).toVar(),o=Lt(Ii(s,r,n)).toVar(),a=f5().toVar();return a.x.assign(o.bitAnd(me(255))),a.y.assign(o.shiftRight(me(8)).bitAnd(me(255))),a.z.assign(o.shiftRight(me(16)).bitAnd(me(255))),a}).setLayout({name:"mx_hash_vec3_1",type:"uvec3",inputs:[{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"}]}),Va=Gs([Lie,Die]),Bie=Se(([i])=>{const e=Ke(i).toVar(),t=me().toVar(),n=me().toVar(),r=ae(cr(e.x,t)).toVar(),s=ae(cr(e.y,n)).toVar(),o=ae(hl(r)).toVar(),a=ae(hl(s)).toVar(),l=ae(oD(_s(Ii(t,n),r,s),_s(Ii(t.add(me(1)),n),r.sub(1),s),_s(Ii(t,n.add(me(1))),r,s.sub(1)),_s(Ii(t.add(me(1)),n.add(me(1))),r.sub(1),s.sub(1)),o,a)).toVar();return lD(l)}).setLayout({name:"mx_perlin_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"}]}),Fie=Se(([i])=>{const e=be(i).toVar(),t=me().toVar(),n=me().toVar(),r=me().toVar(),s=ae(cr(e.x,t)).toVar(),o=ae(cr(e.y,n)).toVar(),a=ae(cr(e.z,r)).toVar(),l=ae(hl(s)).toVar(),u=ae(hl(o)).toVar(),c=ae(hl(a)).toVar(),A=ae(aD(_s(Ii(t,n,r),s,o,a),_s(Ii(t.add(me(1)),n,r),s.sub(1),o,a),_s(Ii(t,n.add(me(1)),r),s,o.sub(1),a),_s(Ii(t.add(me(1)),n.add(me(1)),r),s.sub(1),o.sub(1),a),_s(Ii(t,n,r.add(me(1))),s,o,a.sub(1)),_s(Ii(t.add(me(1)),n,r.add(me(1))),s.sub(1),o,a.sub(1)),_s(Ii(t,n.add(me(1)),r.add(me(1))),s,o.sub(1),a.sub(1)),_s(Ii(t.add(me(1)),n.add(me(1)),r.add(me(1))),s.sub(1),o.sub(1),a.sub(1)),l,u,c)).toVar();return uD(A)}).setLayout({name:"mx_perlin_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"}]}),Sx=Gs([Bie,Fie]),Uie=Se(([i])=>{const e=Ke(i).toVar(),t=me().toVar(),n=me().toVar(),r=ae(cr(e.x,t)).toVar(),s=ae(cr(e.y,n)).toVar(),o=ae(hl(r)).toVar(),a=ae(hl(s)).toVar(),l=be(oD(ka(Va(t,n),r,s),ka(Va(t.add(me(1)),n),r.sub(1),s),ka(Va(t,n.add(me(1))),r,s.sub(1)),ka(Va(t.add(me(1)),n.add(me(1))),r.sub(1),s.sub(1)),o,a)).toVar();return lD(l)}).setLayout({name:"mx_perlin_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),Oie=Se(([i])=>{const e=be(i).toVar(),t=me().toVar(),n=me().toVar(),r=me().toVar(),s=ae(cr(e.x,t)).toVar(),o=ae(cr(e.y,n)).toVar(),a=ae(cr(e.z,r)).toVar(),l=ae(hl(s)).toVar(),u=ae(hl(o)).toVar(),c=ae(hl(a)).toVar(),A=be(aD(ka(Va(t,n,r),s,o,a),ka(Va(t.add(me(1)),n,r),s.sub(1),o,a),ka(Va(t,n.add(me(1)),r),s,o.sub(1),a),ka(Va(t.add(me(1)),n.add(me(1)),r),s.sub(1),o.sub(1),a),ka(Va(t,n,r.add(me(1))),s,o,a.sub(1)),ka(Va(t.add(me(1)),n,r.add(me(1))),s.sub(1),o,a.sub(1)),ka(Va(t,n.add(me(1)),r.add(me(1))),s,o.sub(1),a.sub(1)),ka(Va(t.add(me(1)),n.add(me(1)),r.add(me(1))),s.sub(1),o.sub(1),a.sub(1)),l,u,c)).toVar();return uD(A)}).setLayout({name:"mx_perlin_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),v6=Gs([Uie,Oie]),kie=Se(([i])=>{const e=ae(i).toVar(),t=me(Dr(e)).toVar();return to(Ii(t))}).setLayout({name:"mx_cell_noise_float_0",type:"float",inputs:[{name:"p",type:"float"}]}),Vie=Se(([i])=>{const e=Ke(i).toVar(),t=me(Dr(e.x)).toVar(),n=me(Dr(e.y)).toVar();return to(Ii(t,n))}).setLayout({name:"mx_cell_noise_float_1",type:"float",inputs:[{name:"p",type:"vec2"}]}),zie=Se(([i])=>{const e=be(i).toVar(),t=me(Dr(e.x)).toVar(),n=me(Dr(e.y)).toVar(),r=me(Dr(e.z)).toVar();return to(Ii(t,n,r))}).setLayout({name:"mx_cell_noise_float_2",type:"float",inputs:[{name:"p",type:"vec3"}]}),Gie=Se(([i])=>{const e=sn(i).toVar(),t=me(Dr(e.x)).toVar(),n=me(Dr(e.y)).toVar(),r=me(Dr(e.z)).toVar(),s=me(Dr(e.w)).toVar();return to(Ii(t,n,r,s))}).setLayout({name:"mx_cell_noise_float_3",type:"float",inputs:[{name:"p",type:"vec4"}]}),qie=Gs([kie,Vie,zie,Gie]),Hie=Se(([i])=>{const e=ae(i).toVar(),t=me(Dr(e)).toVar();return be(to(Ii(t,me(0))),to(Ii(t,me(1))),to(Ii(t,me(2))))}).setLayout({name:"mx_cell_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"float"}]}),Wie=Se(([i])=>{const e=Ke(i).toVar(),t=me(Dr(e.x)).toVar(),n=me(Dr(e.y)).toVar();return be(to(Ii(t,n,me(0))),to(Ii(t,n,me(1))),to(Ii(t,n,me(2))))}).setLayout({name:"mx_cell_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec2"}]}),jie=Se(([i])=>{const e=be(i).toVar(),t=me(Dr(e.x)).toVar(),n=me(Dr(e.y)).toVar(),r=me(Dr(e.z)).toVar();return be(to(Ii(t,n,r,me(0))),to(Ii(t,n,r,me(1))),to(Ii(t,n,r,me(2))))}).setLayout({name:"mx_cell_noise_vec3_2",type:"vec3",inputs:[{name:"p",type:"vec3"}]}),$ie=Se(([i])=>{const e=sn(i).toVar(),t=me(Dr(e.x)).toVar(),n=me(Dr(e.y)).toVar(),r=me(Dr(e.z)).toVar(),s=me(Dr(e.w)).toVar();return be(to(Ii(t,n,r,s,me(0))),to(Ii(t,n,r,s,me(1))),to(Ii(t,n,r,s,me(2))))}).setLayout({name:"mx_cell_noise_vec3_3",type:"vec3",inputs:[{name:"p",type:"vec4"}]}),PA=Gs([Hie,Wie,jie,$ie]),s9=Se(([i,e,t,n])=>{const r=ae(n).toVar(),s=ae(t).toVar(),o=me(e).toVar(),a=be(i).toVar(),l=ae(0).toVar(),u=ae(1).toVar();return Di(o,()=>{l.addAssign(u.mul(Sx(a))),u.mulAssign(r),a.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_float",type:"float",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),NA=Se(([i,e,t,n])=>{const r=ae(n).toVar(),s=ae(t).toVar(),o=me(e).toVar(),a=be(i).toVar(),l=be(0).toVar(),u=ae(1).toVar();return Di(o,()=>{l.addAssign(u.mul(v6(a))),u.mulAssign(r),a.mulAssign(s)}),l}).setLayout({name:"mx_fractal_noise_vec3",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Xie=Se(([i,e,t,n])=>{const r=ae(n).toVar(),s=ae(t).toVar(),o=me(e).toVar(),a=be(i).toVar();return Ke(s9(a,o,s,r),s9(a.add(be(me(19),me(193),me(17))),o,s,r))}).setLayout({name:"mx_fractal_noise_vec2",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Qie=Se(([i,e,t,n])=>{const r=ae(n).toVar(),s=ae(t).toVar(),o=me(e).toVar(),a=be(i).toVar(),l=be(NA(a,o,s,r)).toVar(),u=ae(s9(a.add(be(me(19),me(193),me(17))),o,s,r)).toVar();return sn(l,u)}).setLayout({name:"mx_fractal_noise_vec4",type:"vec4",inputs:[{name:"p",type:"vec3"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),Yie=Se(([i,e,t,n,r,s,o])=>{const a=me(o).toVar(),l=ae(s).toVar(),u=me(r).toVar(),c=me(n).toVar(),A=me(t).toVar(),m=me(e).toVar(),_=Ke(i).toVar(),b=be(PA(Ke(m.add(c),A.add(u)))).toVar(),M=Ke(b.x,b.y).toVar();M.subAssign(.5),M.mulAssign(l),M.addAssign(.5);const w=Ke(Ke(ae(m),ae(A)).add(M)).toVar(),T=Ke(w.sub(_)).toVar();return gn(a.equal(me(2)),()=>Ki(T.x).add(Ki(T.y))),gn(a.equal(me(3)),()=>_r(Ki(T.x),Ki(T.y))),Su(T,T)}).setLayout({name:"mx_worley_distance_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Kie=Se(([i,e,t,n,r,s,o,a,l])=>{const u=me(l).toVar(),c=ae(a).toVar(),A=me(o).toVar(),m=me(s).toVar(),_=me(r).toVar(),b=me(n).toVar(),M=me(t).toVar(),w=me(e).toVar(),T=be(i).toVar(),N=be(PA(be(w.add(_),M.add(m),b.add(A)))).toVar();N.subAssign(.5),N.mulAssign(c),N.addAssign(.5);const P=be(be(ae(w),ae(M),ae(b)).add(N)).toVar(),I=be(P.sub(T)).toVar();return gn(u.equal(me(2)),()=>Ki(I.x).add(Ki(I.y)).add(Ki(I.z))),gn(u.equal(me(3)),()=>_r(Ki(I.x),Ki(I.y),Ki(I.z))),Su(I,I)}).setLayout({name:"mx_worley_distance_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"x",type:"int"},{name:"y",type:"int"},{name:"z",type:"int"},{name:"xoff",type:"int"},{name:"yoff",type:"int"},{name:"zoff",type:"int"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),p5=Gs([Yie,Kie]),Zie=Se(([i,e,t])=>{const n=me(t).toVar(),r=ae(e).toVar(),s=Ke(i).toVar(),o=me().toVar(),a=me().toVar(),l=Ke(cr(s.x,o),cr(s.y,a)).toVar(),u=ae(1e6).toVar();return Di({start:-1,end:me(1),name:"x",condition:"<="},({x:c})=>{Di({start:-1,end:me(1),name:"y",condition:"<="},({y:A})=>{const m=ae(p5(l,c,A,o,a,r,n)).toVar();u.assign(Ko(u,m))})}),gn(n.equal(me(0)),()=>{u.assign(xl(u))}),u}).setLayout({name:"mx_worley_noise_float_0",type:"float",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Jie=Se(([i,e,t])=>{const n=me(t).toVar(),r=ae(e).toVar(),s=Ke(i).toVar(),o=me().toVar(),a=me().toVar(),l=Ke(cr(s.x,o),cr(s.y,a)).toVar(),u=Ke(1e6,1e6).toVar();return Di({start:-1,end:me(1),name:"x",condition:"<="},({x:c})=>{Di({start:-1,end:me(1),name:"y",condition:"<="},({y:A})=>{const m=ae(p5(l,c,A,o,a,r,n)).toVar();gn(m.lessThan(u.x),()=>{u.y.assign(u.x),u.x.assign(m)}).ElseIf(m.lessThan(u.y),()=>{u.y.assign(m)})})}),gn(n.equal(me(0)),()=>{u.assign(xl(u))}),u}).setLayout({name:"mx_worley_noise_vec2_0",type:"vec2",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),ere=Se(([i,e,t])=>{const n=me(t).toVar(),r=ae(e).toVar(),s=Ke(i).toVar(),o=me().toVar(),a=me().toVar(),l=Ke(cr(s.x,o),cr(s.y,a)).toVar(),u=be(1e6,1e6,1e6).toVar();return Di({start:-1,end:me(1),name:"x",condition:"<="},({x:c})=>{Di({start:-1,end:me(1),name:"y",condition:"<="},({y:A})=>{const m=ae(p5(l,c,A,o,a,r,n)).toVar();gn(m.lessThan(u.x),()=>{u.z.assign(u.y),u.y.assign(u.x),u.x.assign(m)}).ElseIf(m.lessThan(u.y),()=>{u.z.assign(u.y),u.y.assign(m)}).ElseIf(m.lessThan(u.z),()=>{u.z.assign(m)})})}),gn(n.equal(me(0)),()=>{u.assign(xl(u))}),u}).setLayout({name:"mx_worley_noise_vec3_0",type:"vec3",inputs:[{name:"p",type:"vec2"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),tre=Se(([i,e,t])=>{const n=me(t).toVar(),r=ae(e).toVar(),s=be(i).toVar(),o=me().toVar(),a=me().toVar(),l=me().toVar(),u=be(cr(s.x,o),cr(s.y,a),cr(s.z,l)).toVar(),c=ae(1e6).toVar();return Di({start:-1,end:me(1),name:"x",condition:"<="},({x:A})=>{Di({start:-1,end:me(1),name:"y",condition:"<="},({y:m})=>{Di({start:-1,end:me(1),name:"z",condition:"<="},({z:_})=>{const b=ae(p5(u,A,m,_,o,a,l,r,n)).toVar();c.assign(Ko(c,b))})})}),gn(n.equal(me(0)),()=>{c.assign(xl(c))}),c}).setLayout({name:"mx_worley_noise_float_1",type:"float",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),nre=Gs([Zie,tre]),ire=Se(([i,e,t])=>{const n=me(t).toVar(),r=ae(e).toVar(),s=be(i).toVar(),o=me().toVar(),a=me().toVar(),l=me().toVar(),u=be(cr(s.x,o),cr(s.y,a),cr(s.z,l)).toVar(),c=Ke(1e6,1e6).toVar();return Di({start:-1,end:me(1),name:"x",condition:"<="},({x:A})=>{Di({start:-1,end:me(1),name:"y",condition:"<="},({y:m})=>{Di({start:-1,end:me(1),name:"z",condition:"<="},({z:_})=>{const b=ae(p5(u,A,m,_,o,a,l,r,n)).toVar();gn(b.lessThan(c.x),()=>{c.y.assign(c.x),c.x.assign(b)}).ElseIf(b.lessThan(c.y),()=>{c.y.assign(b)})})})}),gn(n.equal(me(0)),()=>{c.assign(xl(c))}),c}).setLayout({name:"mx_worley_noise_vec2_1",type:"vec2",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),rre=Gs([Jie,ire]),sre=Se(([i,e,t])=>{const n=me(t).toVar(),r=ae(e).toVar(),s=be(i).toVar(),o=me().toVar(),a=me().toVar(),l=me().toVar(),u=be(cr(s.x,o),cr(s.y,a),cr(s.z,l)).toVar(),c=be(1e6,1e6,1e6).toVar();return Di({start:-1,end:me(1),name:"x",condition:"<="},({x:A})=>{Di({start:-1,end:me(1),name:"y",condition:"<="},({y:m})=>{Di({start:-1,end:me(1),name:"z",condition:"<="},({z:_})=>{const b=ae(p5(u,A,m,_,o,a,l,r,n)).toVar();gn(b.lessThan(c.x),()=>{c.z.assign(c.y),c.y.assign(c.x),c.x.assign(b)}).ElseIf(b.lessThan(c.y),()=>{c.z.assign(c.y),c.y.assign(b)}).ElseIf(b.lessThan(c.z),()=>{c.z.assign(b)})})})}),gn(n.equal(me(0)),()=>{c.assign(xl(c))}),c}).setLayout({name:"mx_worley_noise_vec3_1",type:"vec3",inputs:[{name:"p",type:"vec3"},{name:"jitter",type:"float"},{name:"metric",type:"int"}]}),Tx=Gs([ere,sre]),ore=Se(([i,e,t,n,r,s,o,a,l,u,c])=>{const A=me(i).toVar(),m=Ke(e).toVar(),_=Ke(t).toVar(),b=Ke(n).toVar(),M=ae(r).toVar(),w=ae(s).toVar(),T=ae(o).toVar(),N=Ka(a).toVar(),P=me(l).toVar(),I=ae(u).toVar(),B=ae(c).toVar(),F=m.mul(_).add(b),O=ae(0).toVar();return gn(A.equal(me(0)),()=>{O.assign(v6(F))}),gn(A.equal(me(1)),()=>{O.assign(PA(F))}),gn(A.equal(me(2)),()=>{O.assign(Tx(F,M,me(0)))}),gn(A.equal(me(3)),()=>{O.assign(NA(be(F,0),P,I,B))}),O.assign(O.mul(T.sub(w)).add(w)),gn(N,()=>{O.assign(Za(O,w,T))}),O}).setLayout({name:"mx_unifiednoise2d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"texcoord",type:"vec2"},{name:"freq",type:"vec2"},{name:"offset",type:"vec2"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),are=Se(([i,e,t,n,r,s,o,a,l,u,c])=>{const A=me(i).toVar(),m=be(e).toVar(),_=be(t).toVar(),b=be(n).toVar(),M=ae(r).toVar(),w=ae(s).toVar(),T=ae(o).toVar(),N=Ka(a).toVar(),P=me(l).toVar(),I=ae(u).toVar(),B=ae(c).toVar(),F=m.mul(_).add(b),O=ae(0).toVar();return gn(A.equal(me(0)),()=>{O.assign(v6(F))}),gn(A.equal(me(1)),()=>{O.assign(PA(F))}),gn(A.equal(me(2)),()=>{O.assign(Tx(F,M,me(0)))}),gn(A.equal(me(3)),()=>{O.assign(NA(F,P,I,B))}),O.assign(O.mul(T.sub(w)).add(w)),gn(N,()=>{O.assign(Za(O,w,T))}),O}).setLayout({name:"mx_unifiednoise3d",type:"float",inputs:[{name:"noiseType",type:"int"},{name:"position",type:"vec3"},{name:"freq",type:"vec3"},{name:"offset",type:"vec3"},{name:"jitter",type:"float"},{name:"outmin",type:"float"},{name:"outmax",type:"float"},{name:"clampoutput",type:"bool"},{name:"octaves",type:"int"},{name:"lacunarity",type:"float"},{name:"diminish",type:"float"}]}),lre=Se(([i])=>{const e=i.y,t=i.z,n=be().toVar();return gn(e.lessThan(1e-4),()=>{n.assign(be(t,t,t))}).Else(()=>{let r=i.x;r=r.sub(ll(r)).mul(6).toVar();const s=me(P_(r)),o=r.sub(ae(s)),a=t.mul(e.oneMinus()),l=t.mul(e.mul(o).oneMinus()),u=t.mul(e.mul(o.oneMinus()).oneMinus());gn(s.equal(me(0)),()=>{n.assign(be(t,u,a))}).ElseIf(s.equal(me(1)),()=>{n.assign(be(l,t,a))}).ElseIf(s.equal(me(2)),()=>{n.assign(be(a,t,u))}).ElseIf(s.equal(me(3)),()=>{n.assign(be(a,l,t))}).ElseIf(s.equal(me(4)),()=>{n.assign(be(u,a,t))}).Else(()=>{n.assign(be(t,a,l))})}),n}).setLayout({name:"mx_hsvtorgb",type:"vec3",inputs:[{name:"hsv",type:"vec3"}]}),ure=Se(([i])=>{const e=be(i).toVar(),t=ae(e.x).toVar(),n=ae(e.y).toVar(),r=ae(e.z).toVar(),s=ae(Ko(t,Ko(n,r))).toVar(),o=ae(_r(t,_r(n,r))).toVar(),a=ae(o.sub(s)).toVar(),l=ae().toVar(),u=ae().toVar(),c=ae().toVar();return c.assign(o),gn(o.greaterThan(0),()=>{u.assign(a.div(o))}).Else(()=>{u.assign(0)}),gn(u.lessThanEqual(0),()=>{l.assign(0)}).Else(()=>{gn(t.greaterThanEqual(o),()=>{l.assign(n.sub(r).div(a))}).ElseIf(n.greaterThanEqual(o),()=>{l.assign(Br(2,r.sub(t).div(a)))}).Else(()=>{l.assign(Br(4,t.sub(n).div(a)))}),l.mulAssign(1/6),gn(l.lessThan(0),()=>{l.addAssign(1)})}),be(l,u,c)}).setLayout({name:"mx_rgbtohsv",type:"vec3",inputs:[{name:"c",type:"vec3"}]}),cre=Se(([i])=>{const e=be(i).toVar(),t=p_(T_(e,be(.04045))).toVar(),n=be(e.div(12.92)).toVar(),r=be(Ha(_r(e.add(be(.055)),be(0)).div(1.055),be(2.4))).toVar();return _i(n,r,t)}).setLayout({name:"mx_srgb_texture_to_lin_rec709",type:"vec3",inputs:[{name:"color",type:"vec3"}]}),hD=(i,e)=>{i=ae(i),e=ae(e);const t=Ke(e.dFdx(),e.dFdy()).length().mul(.7071067811865476);return pl(i.sub(t),i.add(t),e)},fD=(i,e,t,n)=>_i(i,e,t[n].clamp()),hre=(i,e,t=Vi())=>fD(i,e,t,"x"),fre=(i,e,t=Vi())=>fD(i,e,t,"y"),dre=(i,e,t,n,r=Vi())=>{const s=r.x.clamp(),o=r.y.clamp(),a=_i(i,e,s),l=_i(t,n,s);return _i(a,l,o)},dD=(i,e,t,n,r)=>_i(i,e,hD(t,n[r])),Are=(i,e,t,n=Vi())=>dD(i,e,t,n,"x"),pre=(i,e,t,n=Vi())=>dD(i,e,t,n,"y"),mre=(i=1,e=0,t=Vi())=>t.mul(i).add(e),gre=(i,e=1)=>(i=ae(i),i.abs().pow(e).mul(i.sign())),yre=(i,e=1,t=.5)=>ae(i).sub(t).mul(e).add(t),vre=(i=Vi(),e=1,t=0)=>Sx(i.convert("vec2|vec3")).mul(e).add(t),_re=(i=Vi(),e=1,t=0)=>v6(i.convert("vec2|vec3")).mul(e).add(t),xre=(i=Vi(),e=1,t=0)=>(i=i.convert("vec2|vec3"),sn(v6(i),Sx(i.add(Ke(19,73)))).mul(e).add(t)),bre=(i,e=Vi(),t=Ke(1,1),n=Ke(0,0),r=1,s=0,o=1,a=!1,l=1,u=2,c=.5)=>ore(i,e.convert("vec2|vec3"),t,n,r,s,o,a,l,u,c),Sre=(i,e=Vi(),t=Ke(1,1),n=Ke(0,0),r=1,s=0,o=1,a=!1,l=1,u=2,c=.5)=>are(i,e.convert("vec2|vec3"),t,n,r,s,o,a,l,u,c),Tre=(i=Vi(),e=1)=>nre(i.convert("vec2|vec3"),e,me(1)),wre=(i=Vi(),e=1)=>rre(i.convert("vec2|vec3"),e,me(1)),Mre=(i=Vi(),e=1)=>Tx(i.convert("vec2|vec3"),e,me(1)),Ere=(i=Vi())=>qie(i.convert("vec2|vec3")),Rre=(i=Vi(),e=3,t=2,n=.5,r=1)=>s9(i,me(e),t,n).mul(r),Cre=(i=Vi(),e=3,t=2,n=.5,r=1)=>Xie(i,me(e),t,n).mul(r),Pre=(i=Vi(),e=3,t=2,n=.5,r=1)=>NA(i,me(e),t,n).mul(r),Nre=(i=Vi(),e=3,t=2,n=.5,r=1)=>Qie(i,me(e),t,n).mul(r),Ire=(i,e=ae(0))=>Br(i,e),Lre=(i,e=ae(0))=>si(i,e),Dre=(i,e=ae(1))=>Hn(i,e),Bre=(i,e=ae(1))=>Sa(i,e),Fre=(i,e=ae(1))=>u6(i,e),Ure=(i,e=ae(1))=>Ha(i,e),Ore=(i=ae(0),e=ae(1))=>hA(i,e),kre=()=>Mu,Vre=()=>ML,zre=(i,e=ae(1))=>si(e,i),Gre=(i,e,t,n)=>i.greaterThan(e).mix(t,n),qre=(i,e,t,n)=>i.greaterThanEqual(e).mix(t,n),Hre=(i,e,t,n)=>i.equal(e).mix(t,n),Wre=(i,e=null)=>{if(typeof e=="string"){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3},n=e.replace(/^out/,"").toLowerCase();if(t[n]!==void 0)return i.element(t[n])}if(typeof e=="number")return i.element(e);if(typeof e=="string"&&e.length===1){const t={x:0,r:0,y:1,g:1,z:2,b:2,w:3,a:3};if(t[e]!==void 0)return i.element(t[e])}return i},jre=(i,e=Ke(.5,.5),t=Ke(1,1),n=ae(0),r=Ke(0,0))=>{let s=i;if(e&&(s=s.sub(e)),t&&(s=s.mul(t)),n){const o=n.mul(Math.PI/180),a=o.cos(),l=o.sin();s=Ke(s.x.mul(a).sub(s.y.mul(l)),s.x.mul(l).add(s.y.mul(a)))}return e&&(s=s.add(e)),r&&(s=s.add(r)),s},$re=(i,e)=>{i=Ke(i),e=ae(e);const t=e.mul(Math.PI/180);return m6(i,t)},Xre=(i,e,t)=>{i=be(i),e=ae(e),t=be(t);const n=e.mul(Math.PI/180),r=t.normalize(),s=n.cos(),o=n.sin(),a=ae(1).sub(s);return i.mul(s).add(r.cross(i).mul(o)).add(r.mul(r.dot(i)).mul(a))},Qre=(i,e)=>(i=be(i),e=ae(e),X_(i,e)),Yre=Se(([i,e,t])=>{const n=h1(i).toVar(),r=si(ae(.5).mul(e.sub(t)),cl).div(n).toVar(),s=si(ae(-.5).mul(e.sub(t)),cl).div(n).toVar(),o=be().toVar();o.x=n.x.greaterThan(ae(0)).select(r.x,s.x),o.y=n.y.greaterThan(ae(0)).select(r.y,s.y),o.z=n.z.greaterThan(ae(0)).select(r.z,s.z);const a=Ko(o.x,o.y,o.z).toVar();return cl.add(n.mul(a)).toVar().sub(t)}),AD=Se(([i,e])=>{const t=i.x,n=i.y,r=i.z;let s=e.element(0).mul(.886227);return s=s.add(e.element(1).mul(2*.511664).mul(n)),s=s.add(e.element(2).mul(2*.511664).mul(r)),s=s.add(e.element(3).mul(2*.511664).mul(t)),s=s.add(e.element(4).mul(2*.429043).mul(t).mul(n)),s=s.add(e.element(5).mul(2*.429043).mul(n).mul(r)),s=s.add(e.element(6).mul(r.mul(r).mul(.743125).sub(.247708))),s=s.add(e.element(7).mul(2*.429043).mul(t).mul(r)),s=s.add(e.element(8).mul(.429043).mul(Hn(t,t).sub(Hn(n,n)))),s});var q=Object.freeze({__proto__:null,BRDF_GGX:Sy,BRDF_Lambert:Sc,BasicPointShadowFilter:nD,BasicShadowFilter:XL,Break:OI,Const:lN,Continue:PZ,DFGApprox:ox,D_GGX:sL,Discard:wN,EPSILON:NP,F_Schlick:n5,Fn:Se,INFINITY:oK,If:gn,Loop:Di,NodeAccess:Us,NodeShaderStage:zh,NodeType:LY,NodeUpdateType:qn,OnMaterialUpdate:Bte,OnObjectUpdate:Dte,PCFShadowFilter:QL,PCFSoftShadowFilter:YL,PI:Jd,PI2:aK,PointShadowFilter:iD,Return:TK,Schlick_to_F0:aL,ScriptableNodeResources:td,ShaderNode:A4,Stack:rA,Switch:KY,TBNViewMatrix:V2,VSMShadowFilter:KL,V_GGX_SmithCorrelated:rL,Var:aN,VarIntent:uN,abs:Ki,acesFilmicToneMapping:kL,acos:E_,add:Br,addMethodChaining:qe,addNodeElement:EK,agxToneMapping:VL,all:IP,alphaT:Yd,and:mP,anisotropy:Z1,anisotropyB:X2,anisotropyT:Jh,any:LP,append:tK,array:uP,arrayBuffer:JY,asin:UP,assign:cP,atan:hA,atan2:rN,atomicAdd:Vne,atomicAnd:Hne,atomicFunc:Sl,atomicLoad:One,atomicMax:Gne,atomicMin:qne,atomicOr:Wne,atomicStore:kne,atomicSub:zne,atomicXor:jne,attenuationColor:__,attenuationDistance:v_,attribute:d1,attributeArray:Ute,backgroundBlurriness:PL,backgroundIntensity:Cy,backgroundRotation:NL,batch:BI,bentNormalView:JN,billboarding:gte,bitAnd:_P,bitNot:xP,bitOr:bP,bitXor:SP,bitangentGeometry:uZ,bitangentLocal:cZ,bitangentView:KN,bitangentWorld:hZ,bitcast:lK,blendBurn:jI,blendColor:QZ,blendDodge:$I,blendOverlay:QI,blendScreen:XI,blur:dL,bool:Ka,buffer:h6,bufferAttribute:c6,bumpMap:X_,burn:KZ,bvec2:JC,bvec3:p_,bvec4:iP,bypass:xN,cache:t8,call:hP,cameraFar:tu,cameraIndex:gA,cameraNear:eu,cameraNormalMatrix:kK,cameraPosition:CN,cameraProjectionMatrix:Bc,cameraProjectionMatrixInverse:UK,cameraViewMatrix:s0,cameraWorldMatrix:OK,cbrt:JP,cdl:Jte,ceil:cA,checker:Aie,cineonToneMapping:OL,clamp:Za,clearcoat:Qd,clearcoatNormalView:k2,clearcoatRoughness:I8,code:EA,color:KC,colorSpaceToWorking:mA,colorToDirection:aJ,compute:_N,computeKernel:k_,computeSkinning:RZ,context:AA,convert:sP,convertColorSpace:pK,convertToTexture:Cte,cos:zl,cross:dA,cubeTexture:t5,cubeTextureBase:$_,cubeToUV:w0,dFdx:R_,dFdy:C_,dashSize:$f,debug:EN,decrement:CP,decrementBefore:EP,defaultBuildStages:uy,defaultShaderStages:HC,defined:R8,degrees:BP,deltaTime:wL,densityFog:xne,densityFogFactor:px,depth:nx,depthPass:rne,determinant:HP,difference:QP,diffuseColor:wi,directPointLight:sD,directionToColor:KI,directionToFaceDirection:d5,dispersion:x_,distance:XP,div:Sa,dodge:ZZ,dot:Su,drawIndex:II,dynamicBufferAttribute:vN,element:rP,emissive:dy,equal:S_,equals:jP,equirectUV:ix,exp:w_,exp2:J4,expression:f1,faceDirection:H_,faceForward:B_,faceforward:uK,float:ae,floor:ll,fog:F8,fract:A1,frameGroup:lP,frameId:ML,frontFacing:LN,fwidth:GP,gain:tte,gapSize:Ay,getConstNodeType:YC,getCurrentStack:iA,getDirection:hL,getDistanceAttenuation:bx,getGeometryRoughness:iL,getNormalFromDepth:Nte,getParallaxCorrectNormal:Yre,getRoughness:sx,getScreenPosition:Pte,getShIrradianceAt:AD,getShadowMaterial:ZL,getShadowRenderObjectFunction:JL,getTextureIndex:SL,getViewPosition:r4,globalId:Ene,glsl:dne,glslFn:Ane,grayscale:Qte,greaterThan:T_,greaterThanEqual:pP,hash:ete,highpModelNormalViewMatrix:gy,highpModelViewMatrix:my,hue:Zte,increment:RP,incrementBefore:MP,instance:xZ,instanceIndex:hu,instancedArray:Ote,instancedBufferAttribute:e9,instancedDynamicBufferAttribute:py,instancedMesh:DI,int:me,inverse:WP,inverseSqrt:M_,inversesqrt:cK,invocationLocalIndex:_Z,invocationSubgroupIndex:vZ,ior:e8,iridescence:aA,iridescenceIOR:m_,iridescenceThickness:g_,ivec2:os,ivec3:eP,ivec4:tP,js:hne,label:oN,length:ul,lengthSq:I_,lessThan:dP,lessThanEqual:AP,lightPosition:gx,lightProjectionUV:jL,lightShadowMatrix:CA,lightTargetDirection:vx,lightTargetPosition:$L,lightViewPosition:yx,lightingContext:VI,lights:Qne,linearDepth:n9,linearToneMapping:FL,localId:Rne,log:uA,log2:al,logarithmicDepthToViewZ:zZ,luminance:dx,mat2:sA,mat3:no,mat4:$2,matcapUV:mL,materialAO:PI,materialAlphaTest:eI,materialAnisotropy:pI,materialAnisotropyVector:i4,materialAttenuationColor:SI,materialAttenuationDistance:bI,materialClearcoat:uI,materialClearcoatNormal:hI,materialClearcoatRoughness:cI,materialColor:tI,materialDispersion:CI,materialEmissive:iI,materialEnvIntensity:Yf,materialEnvRotation:j_,materialIOR:xI,materialIridescence:mI,materialIridescenceIOR:gI,materialIridescenceThickness:yI,materialLightMap:Y_,materialLineDashOffset:EI,materialLineDashSize:wI,materialLineGapSize:MI,materialLineScale:TI,materialLineWidth:gZ,materialMetalness:aI,materialNormal:lI,materialOpacity:Q_,materialPointSize:RI,materialReference:Hl,materialReflectivity:Kf,materialRefractionRatio:UN,materialRotation:fI,materialRoughness:oI,materialSheen:dI,materialSheenRoughness:AI,materialShininess:nI,materialSpecular:rI,materialSpecularColor:sI,materialSpecularIntensity:by,materialSpecularStrength:n8,materialThickness:_I,materialTransmission:vI,max:_r,maxMipLevel:V_,mediumpModelViewMatrix:IN,metalness:N8,min:Ko,mix:_i,mixElement:tN,mod:u6,modInt:PP,modelDirection:WK,modelNormalMatrix:NN,modelPosition:jK,modelRadius:QK,modelScale:$K,modelViewMatrix:Fc,modelViewPosition:XK,modelViewProjection:K_,modelWorldMatrix:Wa,modelWorldMatrixInverse:YK,morphReference:kI,mrt:TL,mul:Hn,mx_aastep:hD,mx_add:Ire,mx_atan2:Ore,mx_cell_noise_float:Ere,mx_contrast:yre,mx_divide:Bre,mx_fractal_noise_float:Rre,mx_fractal_noise_vec2:Cre,mx_fractal_noise_vec3:Pre,mx_fractal_noise_vec4:Nre,mx_frame:Vre,mx_heighttonormal:Qre,mx_hsvtorgb:lre,mx_ifequal:Hre,mx_ifgreater:Gre,mx_ifgreatereq:qre,mx_invert:zre,mx_modulo:Fre,mx_multiply:Dre,mx_noise_float:vre,mx_noise_vec3:_re,mx_noise_vec4:xre,mx_place2d:jre,mx_power:Ure,mx_ramp4:dre,mx_ramplr:hre,mx_ramptb:fre,mx_rgbtohsv:ure,mx_rotate2d:$re,mx_rotate3d:Xre,mx_safepower:gre,mx_separate:Wre,mx_splitlr:Are,mx_splittb:pre,mx_srgb_texture_to_lin_rec709:cre,mx_subtract:Lre,mx_timer:kre,mx_transform_uv:mre,mx_unifiednoise2d:bre,mx_unifiednoise3d:Sre,mx_worley_noise_float:Tre,mx_worley_noise_vec2:wre,mx_worley_noise_vec3:Mre,negate:OP,neutralToneMapping:zL,nodeArray:j2,nodeImmutable:wt,nodeObject:$e,nodeObjectIntent:Gh,nodeObjects:a6,nodeProxy:Mn,nodeProxyIntent:Vt,normalFlat:DN,normalGeometry:yA,normalLocal:Zo,normalMap:xy,normalView:Li,normalViewGeometry:e5,normalWorld:Tu,normalWorldGeometry:BN,normalize:h1,not:yP,notEqual:fP,numWorkgroups:wne,objectDirection:VK,objectGroup:b_,objectPosition:PN,objectRadius:HK,objectScale:GK,objectViewPosition:qK,objectWorldMatrix:zK,oneMinus:kP,or:gP,orthographicDepthToViewZ:VZ,oscSawtooth:Ate,oscSine:hte,oscSquare:fte,oscTriangle:dte,output:b4,outputStruct:Zee,overlay:eJ,overloadingFn:Gs,parabola:Ry,parallaxDirection:ZN,parallaxUV:fZ,parameter:jee,pass:nne,passTexture:ine,pcurve:nte,perspectiveDepthToViewZ:ex,pmremTexture:cx,pointShadow:rD,pointUV:Vte,pointWidth:nK,positionGeometry:d6,positionLocal:Er,positionPrevious:t9,positionView:Rr,positionViewDirection:sr,positionWorld:cl,positionWorldDirection:q_,posterize:tne,pow:Ha,pow2:N_,pow3:YP,pow4:KP,premultiplyAlpha:YI,property:Zl,radians:DP,rand:eN,range:Sne,rangeFog:_ne,rangeFogFactor:Ax,reciprocal:zP,reference:Gi,referenceBuffer:yy,reflect:$P,reflectVector:VN,reflectView:ON,reflector:Tte,refract:D_,refractVector:zN,refractView:kN,reinhardToneMapping:UL,remap:SN,remapClamp:TN,renderGroup:pn,renderOutput:MN,rendererReference:mN,rotate:m6,rotateUV:pte,roughness:el,round:VP,rtt:RL,sRGBTransferEOTF:fN,sRGBTransferOETF:dN,sample:Lte,sampler:IK,samplerComparison:LK,saturate:L_,saturation:Yte,screen:JZ,screenCoordinate:p6,screenSize:B8,screenUV:Jl,scriptable:vne,scriptableValue:ed,select:Ss,setCurrentStack:C8,setName:F_,shaderStages:cy,shadow:tD,shadowPositionWorld:xx,shapeCircle:pie,sharedUniformGroup:lA,sheen:O2,sheenRoughness:oA,shiftLeft:TP,shiftRight:wP,shininess:Kd,sign:D8,sin:ya,sinc:ite,skinning:UI,smoothstep:pl,smoothstepElement:nN,specularColor:Fo,specularF90:L8,spherizeUV:mte,split:eK,spritesheetUV:_te,sqrt:xl,stack:Zf,step:fA,stepElement:iN,storage:Q2,storageBarrier:Ine,storageObject:EZ,storageTexture:IL,string:ZY,struct:Kee,sub:si,subBuild:S4,subgroupIndex:yZ,subgroupSize:Cne,tan:FP,tangentGeometry:_A,tangentLocal:A6,tangentView:xA,tangentWorld:YN,temp:cN,texture:ni,texture3D:LL,textureBarrier:Lne,textureBicubic:PJ,textureBicubicLevel:ax,textureCubeUV:fL,textureLoad:Tr,textureSize:cu,textureStore:Gte,thickness:y_,time:Mu,timerDelta:cte,timerGlobal:ute,timerLocal:lte,toneMapping:gN,toneMappingExposure:yN,toonOutlinePass:one,transformDirection:ZP,transformNormal:FN,transformNormalToView:W_,transformedClearcoatNormalView:eZ,transformedNormalView:ZK,transformedNormalWorld:JK,transmission:Zd,transpose:qP,triNoise3D:ste,triplanarTexture:xte,triplanarTextures:EL,trunc:P_,uint:Lt,uniform:on,uniformArray:Ga,uniformCubeTexture:nZ,uniformGroup:aP,uniformTexture:NK,unpremultiplyAlpha:YZ,userData:jte,uv:Vi,uvec2:ZC,uvec3:f5,uvec4:nP,varying:bl,varyingProperty:P8,vec2:Ke,vec3:be,vec4:sn,vectorComponents:Lc,velocity:Xte,vertexColor:WI,vertexIndex:NI,vertexStage:hN,vibrance:Kte,viewZToLogarithmicDepth:tx,viewZToOrthographicDepth:w4,viewZToPerspectiveDepth:qI,viewport:T4,viewportCoordinate:GI,viewportDepthTexture:J_,viewportLinearDepth:GZ,viewportMipTexture:Z_,viewportResolution:UZ,viewportSafeUV:yte,viewportSharedTexture:oJ,viewportSize:zI,viewportTexture:OZ,viewportUV:FZ,wgsl:fne,wgslFn:pne,workgroupArray:Fne,workgroupBarrier:Nne,workgroupId:Mne,workingToColorSpace:AN,xor:vP});const _0=new hx;class Kre extends wu{constructor(e,t){super(),this.renderer=e,this.nodes=t}update(e,t,n){const r=this.renderer,s=this.nodes.getBackgroundNode(e)||e.background;let o=!1;if(s===null)r._clearColor.getRGB(_0),_0.a=r._clearColor.a;else if(s.isColor===!0)s.getRGB(_0),_0.a=1,o=!0;else if(s.isNode===!0){const l=this.get(e),u=s;_0.copy(r._clearColor);let c=l.backgroundMesh;if(c===void 0){let M=function(){s.removeEventListener("dispose",M),c.material.dispose(),c.geometry.dispose()};const m=AA(sn(u).mul(Cy),{getUV:()=>NL.mul(BN),getTextureLevel:()=>PL});let _=K_;_=_.setZ(_.w);const b=new Cr;b.name="Background.material",b.side=Bi,b.depthTest=!1,b.depthWrite=!1,b.allowOverride=!1,b.fog=!1,b.lights=!1,b.vertexNode=_,b.colorNode=m,l.backgroundMeshNode=m,l.backgroundMesh=c=new ei(new i0(1,32,32),b),c.frustumCulled=!1,c.name="Background.mesh",c.onBeforeRender=function(w,T,N){this.matrixWorld.copyPosition(N.matrixWorld)},s.addEventListener("dispose",M)}const A=u.getCacheKey();l.backgroundCacheKey!==A&&(l.backgroundMeshNode.node=sn(u).mul(Cy),l.backgroundMeshNode.needsUpdate=!0,c.material.needsUpdate=!0,l.backgroundCacheKey=A),t.unshift(c,c.geometry,c.material,0,0,null,null)}else console.error("THREE.Renderer: Unsupported background configuration.",s);const a=r.xr.getEnvironmentBlendMode();if(a==="additive"?_0.set(0,0,0,1):a==="alpha-blend"&&_0.set(0,0,0,0),r.autoClear===!0||o===!0){const l=n.clearColorValue;l.r=_0.r,l.g=_0.g,l.b=_0.b,l.a=_0.a,(r.backend.isWebGLBackend===!0||r.alpha===!0)&&(l.r*=l.a,l.g*=l.a,l.b*=l.a),n.depthClearValue=r._clearDepth,n.stencilClearValue=r._clearStencil,n.clearColor=r.autoClearColor===!0,n.clearDepth=r.autoClearDepth===!0,n.clearStencil=r.autoClearStencil===!0}else n.clearColor=!1,n.clearDepth=!1,n.clearStencil=!1}}let Zre=0;class Py{constructor(e="",t=[],n=0,r=[]){this.name=e,this.bindings=t,this.index=n,this.bindingsReference=r,this.id=Zre++}}class Jre{constructor(e,t,n,r,s,o,a,l,u,c=[]){this.vertexShader=e,this.fragmentShader=t,this.computeShader=n,this.transforms=c,this.nodeAttributes=r,this.bindings=s,this.updateNodes=o,this.updateBeforeNodes=a,this.updateAfterNodes=l,this.observer=u,this.usedTimes=0}createBindings(){const e=[];for(const t of this.bindings)if(t.bindings[0].groupNode.shared!==!0){const r=new Py(t.name,[],t.index,t);e.push(r);for(const s of t.bindings)r.bindings.push(s.clone())}else e.push(t);return e}}class zw{constructor(e,t,n=null){this.isNodeAttribute=!0,this.name=e,this.type=t,this.node=n}}class ese{constructor(e,t,n){this.isNodeUniform=!0,this.name=e,this.type=t,this.node=n.getSelf()}get value(){return this.node.value}set value(e){this.node.value=e}get id(){return this.node.id}get groupNode(){return this.node.groupNode}}class pD{constructor(e,t,n=!1,r=null){this.isNodeVar=!0,this.name=e,this.type=t,this.readOnly=n,this.count=r}}class tse extends pD{constructor(e,t,n=null,r=null){super(e,t),this.needsInterpolation=!1,this.isNodeVarying=!0,this.interpolationType=n,this.interpolationSampling=r}}class nse{constructor(e,t,n=""){this.name=e,this.type=t,this.code=n,Object.defineProperty(this,"isNodeCode",{value:!0})}}let ise=0;class Um{constructor(e=null){this.id=ise++,this.nodesData=new WeakMap,this.parent=e}getData(e){let t=this.nodesData.get(e);return t===void 0&&this.parent!==null&&(t=this.parent.getData(e)),t}setData(e,t){this.nodesData.set(e,t)}}class rse{constructor(e,t){this.name=e,this.members=t,this.output=!1}}class Eu{constructor(e,t){this.name=e,this.value=t,this.boundary=0,this.itemSize=0,this.offset=0}setValue(e){this.value=e}getValue(){return this.value}}class sse extends Eu{constructor(e,t=0){super(e,t),this.isNumberUniform=!0,this.boundary=4,this.itemSize=1}}class ose extends Eu{constructor(e,t=new Ge){super(e,t),this.isVector2Uniform=!0,this.boundary=8,this.itemSize=2}}class ase extends Eu{constructor(e,t=new J){super(e,t),this.isVector3Uniform=!0,this.boundary=16,this.itemSize=3}}class lse extends Eu{constructor(e,t=new rn){super(e,t),this.isVector4Uniform=!0,this.boundary=16,this.itemSize=4}}class use extends Eu{constructor(e,t=new Et){super(e,t),this.isColorUniform=!0,this.boundary=16,this.itemSize=3}}class cse extends Eu{constructor(e,t=new i6){super(e,t),this.isMatrix2Uniform=!0,this.boundary=8,this.itemSize=4}}class hse extends Eu{constructor(e,t=new Fn){super(e,t),this.isMatrix3Uniform=!0,this.boundary=48,this.itemSize=12}}class fse extends Eu{constructor(e,t=new Wt){super(e,t),this.isMatrix4Uniform=!0,this.boundary=64,this.itemSize=16}}class dse extends sse{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class Ase extends ose{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class pse extends ase{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class mse extends lse{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class gse extends use{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class yse extends cse{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class vse extends hse{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}class _se extends fse{constructor(e){super(e.name,e.value),this.nodeUniform=e}getValue(){return this.nodeUniform.value}getType(){return this.nodeUniform.type}}const Gw=new WeakMap,xse=new Map([[Int8Array,"int"],[Int16Array,"int"],[Int32Array,"int"],[Uint8Array,"uint"],[Uint16Array,"uint"],[Uint32Array,"uint"],[Float32Array,"float"]]),_f=i=>/e/g.test(i)?String(i).replace(/\+/g,""):(i=Number(i),i+(i%1?"":".0"));class mD{constructor(e,t,n){this.object=e,this.material=e&&e.material||null,this.geometry=e&&e.geometry||null,this.renderer=t,this.parser=n,this.scene=null,this.camera=null,this.nodes=[],this.sequentialNodes=[],this.updateNodes=[],this.updateBeforeNodes=[],this.updateAfterNodes=[],this.hashNodes={},this.observer=null,this.lightsNode=null,this.environmentNode=null,this.fogNode=null,this.clippingContext=null,this.vertexShader=null,this.fragmentShader=null,this.computeShader=null,this.flowNodes={vertex:[],fragment:[],compute:[]},this.flowCode={vertex:"",fragment:"",compute:""},this.uniforms={vertex:[],fragment:[],compute:[],index:0},this.structs={vertex:[],fragment:[],compute:[],index:0},this.bindings={vertex:{},fragment:{},compute:{}},this.bindingsIndexes={},this.bindGroups=null,this.attributes=[],this.bufferAttributes=[],this.varyings=[],this.codes={},this.vars={},this.declarations={},this.flow={code:""},this.chaining=[],this.stack=Zf(),this.stacks=[],this.tab="	",this.currentFunctionNode=null,this.context={material:this.material},this.cache=new Um,this.globalCache=this.cache,this.flowsData=new WeakMap,this.shaderStage=null,this.buildStage=null,this.subBuildLayers=[],this.currentStack=null,this.subBuildFn=null}getBindGroupsCache(){let e=Gw.get(this.renderer);return e===void 0&&(e=new B0,Gw.set(this.renderer,e)),e}createRenderTarget(e,t,n){return new F0(e,t,n)}createCubeRenderTarget(e,t){return new ZI(e,t)}includes(e){return this.nodes.includes(e)}getOutputStructName(){}_getBindGroup(e,t){const n=this.getBindGroupsCache(),r=[];let s=!0;for(const a of t)r.push(a),s=s&&a.groupNode.shared!==!0;let o;return s?(o=n.get(r),o===void 0&&(o=new Py(e,r,this.bindingsIndexes[e].group,r),n.set(r,o))):o=new Py(e,r,this.bindingsIndexes[e].group,r),o}getBindGroupArray(e,t){const n=this.bindings[t];let r=n[e];return r===void 0&&(this.bindingsIndexes[e]===void 0&&(this.bindingsIndexes[e]={binding:0,group:Object.keys(this.bindingsIndexes).length}),n[e]=r=[]),r}getBindings(){let e=this.bindGroups;if(e===null){const t={},n=this.bindings;for(const r of cy)for(const s in n[r]){const o=n[r][s];(t[s]||(t[s]=[])).push(...o)}e=[];for(const r in t){const s=t[r],o=this._getBindGroup(r,s);e.push(o)}this.bindGroups=e}return e}sortBindingGroups(){const e=this.getBindings();e.sort((t,n)=>t.bindings[0].groupNode.order-n.bindings[0].groupNode.order);for(let t=0;t<e.length;t++){const n=e[t];this.bindingsIndexes[n.name].group=t,n.index=t}}setHashNode(e,t){this.hashNodes[t]=e}addNode(e){this.nodes.includes(e)===!1&&(this.nodes.push(e),this.setHashNode(e,e.getHash(this)))}addSequentialNode(e){this.sequentialNodes.includes(e)===!1&&this.sequentialNodes.push(e)}buildUpdateNodes(){for(const e of this.nodes)e.getUpdateType()!==qn.NONE&&this.updateNodes.push(e.getSelf());for(const e of this.sequentialNodes){const t=e.getUpdateBeforeType(),n=e.getUpdateAfterType();t!==qn.NONE&&this.updateBeforeNodes.push(e.getSelf()),n!==qn.NONE&&this.updateAfterNodes.push(e.getSelf())}}get currentNode(){return this.chaining[this.chaining.length-1]}isFilteredTexture(e){return e.magFilter===Wi||e.magFilter===su||e.magFilter===R0||e.magFilter===Fs||e.minFilter===Wi||e.minFilter===su||e.minFilter===R0||e.minFilter===Fs}addChain(e){this.chaining.push(e)}removeChain(e){if(this.chaining.pop()!==e)throw new Error("NodeBuilder: Invalid node chaining!")}getMethod(e){return e}getNodeFromHash(e){return this.hashNodes[e]}addFlow(e,t){return this.flowNodes[e].push(t),t}setContext(e){this.context=e}getContext(){return this.context}getSharedContext(){return{...this.context},this.context}setCache(e){this.cache=e}getCache(){return this.cache}getCacheFromNode(e,t=!0){const n=this.getDataFromNode(e);return n.cache===void 0&&(n.cache=new Um(t?this.getCache():null)),n.cache}isAvailable(){return!1}getVertexIndex(){console.warn("Abstract function.")}getInstanceIndex(){console.warn("Abstract function.")}getDrawIndex(){console.warn("Abstract function.")}getFrontFacing(){console.warn("Abstract function.")}getFragCoord(){console.warn("Abstract function.")}isFlipY(){return!1}increaseUsage(e){const t=this.getDataFromNode(e);return t.usageCount=t.usageCount===void 0?1:t.usageCount+1,t.usageCount}generateTexture(){console.warn("Abstract function.")}generateTextureLod(){console.warn("Abstract function.")}generateArrayDeclaration(e,t){return this.getType(e)+"[ "+t+" ]"}generateArray(e,t,n=null){let r=this.generateArrayDeclaration(e,t)+"( ";for(let s=0;s<t;s++){const o=n?n[s]:null;o!==null?r+=o.build(this,e):r+=this.generateConst(e),s<t-1&&(r+=", ")}return r+=" )",r}generateStruct(e,t,n=null){const r=[];for(const s of t){const{name:o,type:a}=s;n&&n[o]&&n[o].isNode?r.push(n[o].build(this,a)):r.push(this.generateConst(a))}return e+"( "+r.join(", ")+" )"}generateConst(e,t=null){if(t===null&&(e==="float"||e==="int"||e==="uint"?t=0:e==="bool"?t=!1:e==="color"?t=new Et:e==="vec2"?t=new Ge:e==="vec3"?t=new J:e==="vec4"&&(t=new rn)),e==="float")return _f(t);if(e==="int")return`${Math.round(t)}`;if(e==="uint")return t>=0?`${Math.round(t)}u`:"0u";if(e==="bool")return t?"true":"false";if(e==="color")return`${this.getType("vec3")}( ${_f(t.r)}, ${_f(t.g)}, ${_f(t.b)} )`;const n=this.getTypeLength(e),r=this.getComponentType(e),s=o=>this.generateConst(r,o);if(n===2)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)} )`;if(n===3)return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)} )`;if(n===4&&e!=="mat2")return`${this.getType(e)}( ${s(t.x)}, ${s(t.y)}, ${s(t.z)}, ${s(t.w)} )`;if(n>=4&&t&&(t.isMatrix2||t.isMatrix3||t.isMatrix4))return`${this.getType(e)}( ${t.elements.map(s).join(", ")} )`;if(n>4)return`${this.getType(e)}()`;throw new Error(`NodeBuilder: Type '${e}' not found in generate constant attempt.`)}getType(e){return e==="color"?"vec3":e}hasGeometryAttribute(e){return this.geometry&&this.geometry.getAttribute(e)!==void 0}getAttribute(e,t){const n=this.attributes;for(const s of n)if(s.name===e)return s;const r=new zw(e,t);return this.registerDeclaration(r),n.push(r),r}getPropertyName(e){return e.name}isVector(e){return/vec\d/.test(e)}isMatrix(e){return/mat\d/.test(e)}isReference(e){return e==="void"||e==="property"||e==="sampler"||e==="samplerComparison"||e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="depthTexture"||e==="texture3D"}needsToWorkingColorSpace(){return!1}getComponentTypeFromTexture(e){const t=e.type;if(e.isDataTexture){if(t===as)return"int";if(t===Oi)return"uint"}return"float"}getElementType(e){return e==="mat2"?"vec2":e==="mat3"?"vec3":e==="mat4"?"vec4":this.getComponentType(e)}getComponentType(e){if(e=this.getVectorType(e),e==="float"||e==="bool"||e==="int"||e==="uint")return e;const t=/(b|i|u|)(vec|mat)([2-4])/.exec(e);return t===null?null:t[1]==="b"?"bool":t[1]==="i"?"int":t[1]==="u"?"uint":"float"}getVectorType(e){return e==="color"?"vec3":e==="texture"||e==="cubeTexture"||e==="storageTexture"||e==="texture3D"?"vec4":e}getTypeFromLength(e,t="float"){if(e===1)return t;let n=OC(e);const r=t==="float"?"":t[0];return/mat2/.test(t)===!0&&(n=n.replace("vec","mat")),r+n}getTypeFromArray(e){return xse.get(e.constructor)}isInteger(e){return/int|uint|(i|u)vec/.test(e)}getTypeFromAttribute(e){let t=e;e.isInterleavedBufferAttribute&&(t=e.data);const n=t.array,r=e.itemSize,s=e.normalized;let o;return!(e instanceof sv)&&s!==!0&&(o=this.getTypeFromArray(n)),this.getTypeFromLength(r,o)}getTypeLength(e){const t=this.getVectorType(e),n=/vec([2-4])/.exec(t);return n!==null?Number(n[1]):t==="float"||t==="bool"||t==="int"||t==="uint"?1:/mat2/.test(e)===!0?4:/mat3/.test(e)===!0?9:/mat4/.test(e)===!0?16:0}getVectorFromMatrix(e){return e.replace("mat","vec")}changeComponentType(e,t){return this.getTypeFromLength(this.getTypeLength(e),t)}getIntegerType(e){const t=this.getComponentType(e);return t==="int"||t==="uint"?e:this.changeComponentType(e,"int")}addStack(){return this.stack=Zf(this.stack),this.stacks.push(iA()||this.stack),C8(this.stack),this.stack}removeStack(){const e=this.stack;return this.stack=e.parent,C8(this.stacks.pop()),e}getDataFromNode(e,t=this.shaderStage,n=null){n=n===null?e.isGlobal(this)?this.globalCache:this.cache:n;let r=n.getData(e);r===void 0&&(r={},n.setData(e,r)),r[t]===void 0&&(r[t]={});let s=r[t];const o=r.any?r.any.subBuilds:null,a=this.getClosestSubBuild(o);return a&&(s.subBuildsCache===void 0&&(s.subBuildsCache={}),s=s.subBuildsCache[a]||(s.subBuildsCache[a]={}),s.subBuilds=o),s}getNodeProperties(e,t="any"){const n=this.getDataFromNode(e,t);return n.properties||(n.properties={outputNode:null})}getBufferAttributeFromNode(e,t){const n=this.getDataFromNode(e);let r=n.bufferAttribute;if(r===void 0){const s=this.uniforms.index++;r=new zw("nodeAttribute"+s,t,e),this.bufferAttributes.push(r),n.bufferAttribute=r}return r}getStructTypeFromNode(e,t,n=null,r=this.shaderStage){const s=this.getDataFromNode(e,r,this.globalCache);let o=s.structType;if(o===void 0){const a=this.structs.index++;n===null&&(n="StructType"+a),o=new rse(n,t),this.structs[r].push(o),s.structType=o}return o}getOutputStructTypeFromNode(e,t){const n=this.getStructTypeFromNode(e,t,"OutputType","fragment");return n.output=!0,n}getUniformFromNode(e,t,n=this.shaderStage,r=null){const s=this.getDataFromNode(e,n,this.globalCache);let o=s.uniform;if(o===void 0){const a=this.uniforms.index++;o=new ese(r||"nodeUniform"+a,t,e),this.uniforms[n].push(o),this.registerDeclaration(o),s.uniform=o}return o}getVarFromNode(e,t=null,n=e.getNodeType(this),r=this.shaderStage,s=!1){const o=this.getDataFromNode(e,r),a=this.getSubBuildProperty("variable",o.subBuilds);let l=o[a];if(l===void 0){const u=s?"_const":"_var",c=this.vars[r]||(this.vars[r]=[]),A=this.vars[u]||(this.vars[u]=0);t===null&&(t=(s?"nodeConst":"nodeVar")+A,this.vars[u]++),a!=="variable"&&(t=this.getSubBuildProperty(t,o.subBuilds));const m=e.getArrayCount(this);l=new pD(t,n,s,m),s||c.push(l),this.registerDeclaration(l),o[a]=l}return l}isDeterministic(e){if(e.isMathNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0)&&(e.cNode?this.isDeterministic(e.cNode):!0);if(e.isOperatorNode)return this.isDeterministic(e.aNode)&&(e.bNode?this.isDeterministic(e.bNode):!0);if(e.isArrayNode){if(e.values!==null){for(const t of e.values)if(!this.isDeterministic(t))return!1}return!0}else if(e.isConstNode)return!0;return!1}getVaryingFromNode(e,t=null,n=e.getNodeType(this),r=null,s=null){const o=this.getDataFromNode(e,"any"),a=this.getSubBuildProperty("varying",o.subBuilds);let l=o[a];if(l===void 0){const u=this.varyings,c=u.length;t===null&&(t="nodeVarying"+c),a!=="varying"&&(t=this.getSubBuildProperty(t,o.subBuilds)),l=new tse(t,n,r,s),u.push(l),this.registerDeclaration(l),o[a]=l}return l}registerDeclaration(e){const t=this.shaderStage,n=this.declarations[t]||(this.declarations[t]={}),r=this.getPropertyName(e);let s=1,o=r;for(;n[o]!==void 0;)o=r+"_"+s++;s>1&&(e.name=o,console.warn(`THREE.TSL: Declaration name '${r}' of '${e.type}' already in use. Renamed to '${o}'.`)),n[o]=e}getCodeFromNode(e,t,n=this.shaderStage){const r=this.getDataFromNode(e);let s=r.code;if(s===void 0){const o=this.codes[n]||(this.codes[n]=[]),a=o.length;s=new nse("nodeCode"+a,t),o.push(s),r.code=s}return s}addFlowCodeHierarchy(e,t){const{flowCodes:n,flowCodeBlock:r}=this.getDataFromNode(e);let s=!0,o=t;for(;o;){if(r.get(o)===!0){s=!1;break}o=this.getDataFromNode(o).parentNodeBlock}if(s)for(const a of n)this.addLineFlowCode(a)}addLineFlowCodeBlock(e,t,n){const r=this.getDataFromNode(e),s=r.flowCodes||(r.flowCodes=[]),o=r.flowCodeBlock||(r.flowCodeBlock=new WeakMap);s.push(t),o.set(n,!0)}addLineFlowCode(e,t=null){return e===""?this:(t!==null&&this.context.nodeBlock&&this.addLineFlowCodeBlock(t,e,this.context.nodeBlock),e=this.tab+e,/;\s*$/.test(e)||(e=e+`;
`),this.flow.code+=e,this)}addFlowCode(e){return this.flow.code+=e,this}addFlowTab(){return this.tab+="	",this}removeFlowTab(){return this.tab=this.tab.slice(0,-1),this}getFlowData(e){return this.flowsData.get(e)}flowNode(e){const t=e.getNodeType(this),n=this.flowChildNode(e,t);return this.flowsData.set(e,n),n}addInclude(e){this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(e)}buildFunctionNode(e){const t=new GL,n=this.currentFunctionNode;return this.currentFunctionNode=t,t.code=this.buildFunctionCode(e),this.currentFunctionNode=n,t}flowShaderNode(e){const t=e.layout,n={[Symbol.iterator](){let o=0;const a=Object.values(this);return{next:()=>({value:a[o],done:o++>=a.length})}}};for(const o of t.inputs)n[o.name]=new xL(o.type,o.name);e.layout=null;const r=e.call(n),s=this.flowStagesNode(r,t.type);return e.layout=t,s}flowBuildStage(e,t,n=null){const r=this.getBuildStage();this.setBuildStage(t);const s=e.build(this,n);return this.setBuildStage(r),s}flowStagesNode(e,t=null){const n=this.flow,r=this.vars,s=this.declarations,o=this.cache,a=this.buildStage,l=this.stack,u={code:""};this.flow=u,this.vars={},this.declarations={},this.cache=new Um,this.stack=Zf();for(const c of uy)this.setBuildStage(c),u.result=e.build(this,t);return u.vars=this.getVars(this.shaderStage),this.flow=n,this.vars=r,this.declarations=s,this.cache=o,this.stack=l,this.setBuildStage(a),u}getFunctionOperator(){return null}buildFunctionCode(){console.warn("Abstract function.")}flowChildNode(e,t=null){const n=this.flow,r={code:""};return this.flow=r,r.result=e.build(this,t),this.flow=n,r}flowNodeFromShaderStage(e,t,n=null,r=null){const s=this.tab,o=this.cache,a=this.shaderStage,l=this.context;this.setShaderStage(e);const u={...this.context};delete u.nodeBlock,this.cache=this.globalCache,this.tab="	",this.context=u;let c=null;if(this.buildStage==="generate"){const A=this.flowChildNode(t,n);r!==null&&(A.code+=`${this.tab+r} = ${A.result};
`),this.flowCode[e]=this.flowCode[e]+A.code,c=A}else c=t.build(this);return this.setShaderStage(a),this.cache=o,this.tab=s,this.context=l,c}getAttributesArray(){return this.attributes.concat(this.bufferAttributes)}getAttributes(){console.warn("Abstract function.")}getVaryings(){console.warn("Abstract function.")}getVar(e,t,n=null){return`${n!==null?this.generateArrayDeclaration(e,n):this.getType(e)} ${t}`}getVars(e){let t="";const n=this.vars[e];if(n!==void 0)for(const r of n)t+=`${this.getVar(r.type,r.name)}; `;return t}getUniforms(){console.warn("Abstract function.")}getCodes(e){const t=this.codes[e];let n="";if(t!==void 0)for(const r of t)n+=r.code+`
`;return n}getHash(){return this.vertexShader+this.fragmentShader+this.computeShader}setShaderStage(e){this.shaderStage=e}getShaderStage(){return this.shaderStage}setBuildStage(e){this.buildStage=e}getBuildStage(){return this.buildStage}buildCode(){console.warn("Abstract function.")}get subBuild(){return this.subBuildLayers[this.subBuildLayers.length-1]||null}addSubBuild(e){this.subBuildLayers.push(e)}removeSubBuild(){return this.subBuildLayers.pop()}getClosestSubBuild(e){let t;if(e&&e.isNode?e.isShaderCallNodeInternal?t=e.shaderNode.subBuilds:e.isStackNode?t=[e.subBuild]:t=this.getDataFromNode(e,"any").subBuilds:e instanceof Set?t=[...e]:t=e,!t)return null;const n=this.subBuildLayers;for(let r=t.length-1;r>=0;r--){const s=t[r];if(n.includes(s))return s}return null}getSubBuildOutput(e){return this.getSubBuildProperty("outputNode",e)}getSubBuildProperty(e="",t=null){let n;t!==null?n=this.getClosestSubBuild(t):n=this.subBuildFn;let r;return n?r=e?n+"_"+e:n:r=e,r}build(){const{object:e,material:t,renderer:n}=this;if(t!==null){let r=n.library.fromMaterial(t);r===null&&(console.error(`NodeMaterial: Material "${t.type}" is not compatible.`),r=new Cr),r.build(this)}else this.addFlow("compute",e);for(const r of uy){this.setBuildStage(r),this.context.vertex&&this.context.vertex.isNode&&this.flowNodeFromShaderStage("vertex",this.context.vertex);for(const s of cy){this.setShaderStage(s);const o=this.flowNodes[s];for(const a of o)r==="generate"?this.flowNode(a):a.build(this)}}return this.setBuildStage(null),this.setShaderStage(null),this.buildCode(),this.buildUpdateNodes(),this}getNodeUniform(e,t){if(t==="float"||t==="int"||t==="uint")return new dse(e);if(t==="vec2"||t==="ivec2"||t==="uvec2")return new Ase(e);if(t==="vec3"||t==="ivec3"||t==="uvec3")return new pse(e);if(t==="vec4"||t==="ivec4"||t==="uvec4")return new mse(e);if(t==="color")return new gse(e);if(t==="mat2")return new yse(e);if(t==="mat3")return new vse(e);if(t==="mat4")return new _se(e);throw new Error(`Uniform "${t}" not declared.`)}format(e,t,n){if(t=this.getVectorType(t),n=this.getVectorType(n),t===n||n===null||this.isReference(n))return e;const r=this.getTypeLength(t),s=this.getTypeLength(n);return r===16&&s===9?`${this.getType(n)}( ${e}[ 0 ].xyz, ${e}[ 1 ].xyz, ${e}[ 2 ].xyz )`:r===9&&s===4?`${this.getType(n)}( ${e}[ 0 ].xy, ${e}[ 1 ].xy )`:r>4||s>4||s===0?e:r===s?`${this.getType(n)}( ${e} )`:r>s?(e=n==="bool"?`all( ${e} )`:`${e}.${"xyz".slice(0,s)}`,this.format(e,this.getTypeFromLength(s,this.getComponentType(t)),n)):s===4&&r>1?`${this.getType(n)}( ${this.format(e,t,"vec3")}, 1.0 )`:r===2?`${this.getType(n)}( ${this.format(e,t,"vec2")}, 0.0 )`:(r===1&&s>1&&t!==this.getComponentType(n)&&(e=`${this.getType(this.getComponentType(n))}( ${e} )`),`${this.getType(n)}( ${e} )`)}getSignature(){return`// Three.js r${o5} - Node System
`}*[Symbol.iterator](){}}class qw{constructor(){this.time=0,this.deltaTime=0,this.frameId=0,this.renderId=0,this.updateMap=new WeakMap,this.updateBeforeMap=new WeakMap,this.updateAfterMap=new WeakMap,this.renderer=null,this.material=null,this.camera=null,this.object=null,this.scene=null}_getMaps(e,t){let n=e.get(t);return n===void 0&&(n={renderMap:new WeakMap,frameMap:new WeakMap},e.set(t,n)),n}updateBeforeNode(e){const t=e.getUpdateBeforeType(),n=e.updateReference(this);if(t===qn.FRAME){const{frameMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.frameId&&e.updateBefore(this)!==!1&&r.set(n,this.frameId)}else if(t===qn.RENDER){const{renderMap:r}=this._getMaps(this.updateBeforeMap,n);r.get(n)!==this.renderId&&e.updateBefore(this)!==!1&&r.set(n,this.renderId)}else t===qn.OBJECT&&e.updateBefore(this)}updateAfterNode(e){const t=e.getUpdateAfterType(),n=e.updateReference(this);if(t===qn.FRAME){const{frameMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.frameId&&e.updateAfter(this)!==!1&&r.set(n,this.frameId)}else if(t===qn.RENDER){const{renderMap:r}=this._getMaps(this.updateAfterMap,n);r.get(n)!==this.renderId&&e.updateAfter(this)!==!1&&r.set(n,this.renderId)}else t===qn.OBJECT&&e.updateAfter(this)}updateNode(e){const t=e.getUpdateType(),n=e.updateReference(this);if(t===qn.FRAME){const{frameMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.frameId&&e.update(this)!==!1&&r.set(n,this.frameId)}else if(t===qn.RENDER){const{renderMap:r}=this._getMaps(this.updateMap,n);r.get(n)!==this.renderId&&e.update(this)!==!1&&r.set(n,this.renderId)}else t===qn.OBJECT&&e.update(this)}update(){this.frameId++,this.lastTime===void 0&&(this.lastTime=performance.now()),this.deltaTime=(performance.now()-this.lastTime)/1e3,this.lastTime=performance.now(),this.time+=this.deltaTime}}class wx{constructor(e,t,n=null,r="",s=!1){this.type=e,this.name=t,this.count=n,this.qualifier=r,this.isConst=s}}wx.isNodeFunctionInput=!0;class bse extends Uc{static get type(){return"DirectionalLightNode"}constructor(e=null){super(e)}setupDirect(){const e=this.colorNode;return{lightDirection:vx(this.light),lightColor:e}}}const Om=new Wt,xf=new Wt;let Th=null;class Sse extends Uc{static get type(){return"RectAreaLightNode"}constructor(e=null){super(e),this.halfHeight=on(new J).setGroup(pn),this.halfWidth=on(new J).setGroup(pn),this.updateType=qn.RENDER}update(e){super.update(e);const{light:t}=this,n=e.camera.matrixWorldInverse;xf.identity(),Om.copy(t.matrixWorld),Om.premultiply(n),xf.extractRotation(Om),this.halfWidth.value.set(t.width*.5,0,0),this.halfHeight.value.set(0,t.height*.5,0),this.halfWidth.value.applyMatrix4(xf),this.halfHeight.value.applyMatrix4(xf)}setupDirectRectArea(e){let t,n;e.isAvailable("float32Filterable")?(t=ni(Th.LTC_FLOAT_1),n=ni(Th.LTC_FLOAT_2)):(t=ni(Th.LTC_HALF_1),n=ni(Th.LTC_HALF_2));const{colorNode:r,light:s}=this,o=yx(s);return{lightColor:r,lightPosition:o,halfWidth:this.halfWidth,halfHeight:this.halfHeight,ltc_1:t,ltc_2:n}}static setLTC(e){Th=e}}class Mx extends Uc{static get type(){return"SpotLightNode"}constructor(e=null){super(e),this.coneCosNode=on(0).setGroup(pn),this.penumbraCosNode=on(0).setGroup(pn),this.cutoffDistanceNode=on(0).setGroup(pn),this.decayExponentNode=on(0).setGroup(pn),this.colorNode=on(this.color).setGroup(pn)}update(e){super.update(e);const{light:t}=this;this.coneCosNode.value=Math.cos(t.angle),this.penumbraCosNode.value=Math.cos(t.angle*(1-t.penumbra)),this.cutoffDistanceNode.value=t.distance,this.decayExponentNode.value=t.decay}getSpotAttenuation(e,t){const{coneCosNode:n,penumbraCosNode:r}=this;return pl(n,r,t)}getLightCoord(e){const t=e.getNodeProperties(this);let n=t.projectionUV;return n===void 0&&(n=jL(this.light,e.context.positionWorld),t.projectionUV=n),n}setupDirect(e){const{colorNode:t,cutoffDistanceNode:n,decayExponentNode:r,light:s}=this,o=this.getLightVector(e),a=o.normalize(),l=a.dot(vx(s)),u=this.getSpotAttenuation(e,l),c=o.length(),A=bx({lightDistance:c,cutoffDistance:n,decayExponent:r});let m=t.mul(u).mul(A),_,b;return s.colorNode?(b=this.getLightCoord(e),_=s.colorNode(b)):s.map&&(b=this.getLightCoord(e),_=ni(s.map,b.xy).onRenderUpdate(()=>s.map)),_&&(m=b.mul(2).sub(1).abs().lessThan(1).all().select(m.mul(_),m)),{lightColor:m,lightDirection:a}}}class Tse extends Mx{static get type(){return"IESSpotLightNode"}getSpotAttenuation(e,t){const n=this.light.iesMap;let r=null;if(n&&n.isTexture===!0){const s=t.acos().mul(1/Math.PI);r=ni(n,Ke(s,0),0).r}else r=super.getSpotAttenuation(t);return r}}const wse=Se(([i,e])=>{const t=i.abs().sub(e);return ul(_r(t,0)).add(Ko(_r(t.x,t.y),0))});class Mse extends Mx{static get type(){return"ProjectorLightNode"}update(e){super.update(e);const t=this.light;if(this.penumbraCosNode.value=Math.min(Math.cos(t.angle*(1-t.penumbra)),.99999),t.aspect===null){let n=1;t.map!==null&&(n=t.map.width/t.map.height),t.shadow.aspect=n}else t.shadow.aspect=t.aspect}getSpotAttenuation(e){const t=ae(0),n=this.penumbraCosNode,r=CA(this.light).mul(e.context.positionWorld||cl);return gn(r.w.greaterThan(0),()=>{const s=r.xyz.div(r.w),o=wse(s.xy.sub(Ke(.5)),Ke(.5)),a=Sa(-1,si(1,E_(n)).sub(1));t.assign(L_(o.mul(-2).mul(a)))}),t}}class Ese extends Uc{static get type(){return"AmbientLightNode"}constructor(e=null){super(e)}setup({context:e}){e.irradiance.addAssign(this.colorNode)}}class Rse extends Uc{static get type(){return"HemisphereLightNode"}constructor(e=null){super(e),this.lightPositionNode=gx(e),this.lightDirectionNode=this.lightPositionNode.normalize(),this.groundColorNode=on(new Et).setGroup(pn)}update(e){const{light:t}=this;super.update(e),this.lightPositionNode.object3d=t,this.groundColorNode.value.copy(t.groundColor).multiplyScalar(t.intensity)}setup(e){const{colorNode:t,groundColorNode:n,lightDirectionNode:r}=this,o=Tu.dot(r).mul(.5).add(.5),a=_i(n,t,o);e.context.irradiance.addAssign(a)}}class Cse extends Uc{static get type(){return"LightProbeNode"}constructor(e=null){super(e);const t=[];for(let n=0;n<9;n++)t.push(new J);this.lightProbe=Ga(t)}update(e){const{light:t}=this;super.update(e);for(let n=0;n<9;n++)this.lightProbe.array[n].copy(t.sh.coefficients[n]).multiplyScalar(t.intensity)}setup(e){const t=AD(Tu,this.lightProbe);e.context.irradiance.addAssign(t)}}class gD{parseFunction(){console.warn("Abstract function.")}}class Ex{constructor(e,t,n="",r=""){this.type=e,this.inputs=t,this.name=n,this.precision=r}getCode(){console.warn("Abstract function.")}}Ex.isNodeFunction=!0;const Pse=/^\s*(highp|mediump|lowp)?\s*([a-z_0-9]+)\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)/i,Nse=/[a-z_0-9]+/ig,Hw="#pragma main",Ise=i=>{i=i.trim();const e=i.indexOf(Hw),t=e!==-1?i.slice(e+Hw.length):i,n=t.match(Pse);if(n!==null&&n.length===5){const r=n[4],s=[];let o=null;for(;(o=Nse.exec(r))!==null;)s.push(o);const a=[];let l=0;for(;l<s.length;){const b=s[l][0]==="const";b===!0&&l++;let M=s[l][0];M==="in"||M==="out"||M==="inout"?l++:M="";const w=s[l++][0];let T=Number.parseInt(s[l][0]);Number.isNaN(T)===!1?l++:T=null;const N=s[l++][0];a.push(new wx(w,N,T,M,b))}const u=t.substring(n[0].length),c=n[3]!==void 0?n[3]:"",A=n[2],m=n[1]!==void 0?n[1]:"",_=e!==-1?i.slice(0,e):"";return{type:A,inputs:a,name:c,precision:m,inputsCode:r,blockCode:u,headerCode:_}}else throw new Error("FunctionNode: Function is not a GLSL code.")};class Lse extends Ex{constructor(e){const{type:t,inputs:n,name:r,precision:s,inputsCode:o,blockCode:a,headerCode:l}=Ise(e);super(t,n,r,s),this.inputsCode=o,this.blockCode=a,this.headerCode=l}getCode(e=this.name){let t;const n=this.blockCode;if(n!==""){const{type:r,inputsCode:s,headerCode:o,precision:a}=this;let l=`${r} ${e} ( ${s.trim()} )`;a!==""&&(l=`${a} ${l}`),t=o+l+n}else t="";return t}}class Dse extends gD{parseFunction(e){return new Lse(e)}}const Ww=new WeakMap,$0=[],v2=[];class Bse extends wu{constructor(e,t){super(),this.renderer=e,this.backend=t,this.nodeFrame=new qw,this.nodeBuilderCache=new Map,this.callHashCache=new B0,this.groupsData=new B0,this.cacheLib={}}updateGroup(e){const t=e.groupNode,n=t.name;if(n===b_.name)return!0;if(n===pn.name){const s=this.get(e),o=this.nodeFrame.renderId;return s.renderId!==o?(s.renderId=o,!0):!1}if(n===lP.name){const s=this.get(e),o=this.nodeFrame.frameId;return s.frameId!==o?(s.frameId=o,!0):!1}$0[0]=t,$0[1]=e;let r=this.groupsData.get($0);return r===void 0&&this.groupsData.set($0,r={}),$0.length=0,r.version!==t.version?(r.version=t.version,!0):!1}getForRenderCacheKey(e){return e.initialCacheKey}getForRender(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const{nodeBuilderCache:r}=this,s=this.getForRenderCacheKey(e);if(n=r.get(s),n===void 0){const o=this.backend.createNodeBuilder(e.object,this.renderer);o.scene=e.scene,o.material=e.material,o.camera=e.camera,o.context.material=e.material,o.lightsNode=e.lightsNode,o.environmentNode=this.getEnvironmentNode(e.scene),o.fogNode=this.getFogNode(e.scene),o.clippingContext=e.clippingContext,this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview&&o.enableMultiview(),o.build(),n=this._createNodeBuilderState(o),r.set(s,n)}n.usedTimes++,t.nodeBuilderState=n}return n}delete(e){if(e.isRenderObject){const t=this.get(e).nodeBuilderState;t.usedTimes--,t.usedTimes===0&&this.nodeBuilderCache.delete(this.getForRenderCacheKey(e))}return super.delete(e)}getForCompute(e){const t=this.get(e);let n=t.nodeBuilderState;if(n===void 0){const r=this.backend.createNodeBuilder(e,this.renderer);r.build(),n=this._createNodeBuilderState(r),t.nodeBuilderState=n}return n}_createNodeBuilderState(e){return new Jre(e.vertexShader,e.fragmentShader,e.computeShader,e.getAttributesArray(),e.getBindings(),e.updateNodes,e.updateBeforeNodes,e.updateAfterNodes,e.observer,e.transforms)}getEnvironmentNode(e){this.updateEnvironment(e);let t=null;if(e.environmentNode&&e.environmentNode.isNode)t=e.environmentNode;else{const n=this.get(e);n.environmentNode&&(t=n.environmentNode)}return t}getBackgroundNode(e){this.updateBackground(e);let t=null;if(e.backgroundNode&&e.backgroundNode.isNode)t=e.backgroundNode;else{const n=this.get(e);n.backgroundNode&&(t=n.backgroundNode)}return t}getFogNode(e){return this.updateFog(e),e.fogNode||this.get(e).fogNode||null}getCacheKey(e,t){$0[0]=e,$0[1]=t;const n=this.renderer.info.calls,r=this.callHashCache.get($0)||{};if(r.callId!==n){const s=this.getEnvironmentNode(e),o=this.getFogNode(e);t&&v2.push(t.getCacheKey(!0)),s&&v2.push(s.getCacheKey()),o&&v2.push(o.getCacheKey()),v2.push(this.renderer.getOutputRenderTarget()&&this.renderer.getOutputRenderTarget().multiview?1:0),v2.push(this.renderer.shadowMap.enabled?1:0),r.callId=n,r.cacheKey=eA(v2),this.callHashCache.set($0,r),v2.length=0}return $0.length=0,r.cacheKey}get isToneMappingState(){return!this.renderer.getRenderTarget()}updateBackground(e){const t=this.get(e),n=e.background;if(n){const r=e.backgroundBlurriness===0&&t.backgroundBlurriness>0||e.backgroundBlurriness>0&&t.backgroundBlurriness===0;if(t.background!==n||r){const s=this.getCacheNode("background",n,()=>{if(n.isCubeTexture===!0||n.mapping===fu||n.mapping===du||n.mapping===t1){if(e.backgroundBlurriness>0||n.mapping===t1)return cx(n);{let o;return n.isCubeTexture===!0?o=t5(n):o=ni(n),eL(o)}}else{if(n.isTexture===!0)return ni(n,Jl.flipY()).setUpdateMatrix(!0);n.isColor!==!0&&console.error("WebGPUNodes: Unsupported background configuration.",n)}},r);t.backgroundNode=s,t.background=n,t.backgroundBlurriness=e.backgroundBlurriness}}else t.backgroundNode&&(delete t.backgroundNode,delete t.background)}getCacheNode(e,t,n,r=!1){const s=this.cacheLib[e]||(this.cacheLib[e]=new WeakMap);let o=s.get(t);return(o===void 0||r)&&(o=n(),s.set(t,o)),o}updateFog(e){const t=this.get(e),n=e.fog;if(n){if(t.fog!==n){const r=this.getCacheNode("fog",n,()=>{if(n.isFogExp2){const s=Gi("color","color",n).setGroup(pn),o=Gi("density","float",n).setGroup(pn);return F8(s,px(o))}else if(n.isFog){const s=Gi("color","color",n).setGroup(pn),o=Gi("near","float",n).setGroup(pn),a=Gi("far","float",n).setGroup(pn);return F8(s,Ax(o,a))}else console.error("THREE.Renderer: Unsupported fog configuration.",n)});t.fogNode=r,t.fog=n}}else delete t.fogNode,delete t.fog}updateEnvironment(e){const t=this.get(e),n=e.environment;if(n){if(t.environment!==n){const r=this.getCacheNode("environment",n,()=>{if(n.isCubeTexture===!0)return t5(n);if(n.isTexture===!0)return ni(n);console.error("Nodes: Unsupported environment configuration.",n)});t.environmentNode=r,t.environment=n}}else t.environmentNode&&(delete t.environmentNode,delete t.environment)}getNodeFrame(e=this.renderer,t=null,n=null,r=null,s=null){const o=this.nodeFrame;return o.renderer=e,o.scene=t,o.object=n,o.camera=r,o.material=s,o}getNodeFrameForRender(e){return this.getNodeFrame(e.renderer,e.scene,e.object,e.camera,e.material)}getOutputCacheKey(){const e=this.renderer;return e.toneMapping+","+e.currentColorSpace+","+e.xr.isPresenting}hasOutputChange(e){return Ww.get(e)!==this.getOutputCacheKey()}getOutputNode(e){const t=this.renderer,n=this.getOutputCacheKey(),r=e.isArrayTexture?LL(e,be(Jl,f6("gl_ViewID_OVR"))).renderOutput(t.toneMapping,t.currentColorSpace):ni(e,Jl).renderOutput(t.toneMapping,t.currentColorSpace);return Ww.set(e,n),r}updateBefore(e){const t=e.getNodeBuilderState();for(const n of t.updateBeforeNodes)this.getNodeFrameForRender(e).updateBeforeNode(n)}updateAfter(e){const t=e.getNodeBuilderState();for(const n of t.updateAfterNodes)this.getNodeFrameForRender(e).updateAfterNode(n)}updateForCompute(e){const t=this.getNodeFrame(),n=this.getForCompute(e);for(const r of n.updateNodes)t.updateNode(r)}updateForRender(e){const t=this.getNodeFrameForRender(e),n=e.getNodeBuilderState();for(const r of n.updateNodes)t.updateNode(r)}needsRefresh(e){const t=this.getNodeFrameForRender(e);return e.getMonitor().needsRefresh(e,t)}dispose(){super.dispose(),this.nodeFrame=new qw,this.nodeBuilderCache=new Map,this.cacheLib={}}}const km=new M0;class o9{constructor(e=null){this.version=0,this.clipIntersection=null,this.cacheKey="",this.shadowPass=!1,this.viewNormalMatrix=new Fn,this.clippingGroupContexts=new WeakMap,this.intersectionPlanes=[],this.unionPlanes=[],this.parentVersion=null,e!==null&&(this.viewNormalMatrix=e.viewNormalMatrix,this.clippingGroupContexts=e.clippingGroupContexts,this.shadowPass=e.shadowPass,this.viewMatrix=e.viewMatrix)}projectPlanes(e,t,n){const r=e.length;for(let s=0;s<r;s++){km.copy(e[s]).applyMatrix4(this.viewMatrix,this.viewNormalMatrix);const o=t[n+s],a=km.normal;o.x=-a.x,o.y=-a.y,o.z=-a.z,o.w=km.constant}}updateGlobal(e,t){this.shadowPass=e.overrideMaterial!==null&&e.overrideMaterial.isShadowPassMaterial,this.viewMatrix=t.matrixWorldInverse,this.viewNormalMatrix.getNormalMatrix(this.viewMatrix)}update(e,t){let n=!1;e.version!==this.parentVersion&&(this.intersectionPlanes=Array.from(e.intersectionPlanes),this.unionPlanes=Array.from(e.unionPlanes),this.parentVersion=e.version),this.clipIntersection!==t.clipIntersection&&(this.clipIntersection=t.clipIntersection,this.clipIntersection?this.unionPlanes.length=e.unionPlanes.length:this.intersectionPlanes.length=e.intersectionPlanes.length);const r=t.clippingPlanes,s=r.length;let o,a;if(this.clipIntersection?(o=this.intersectionPlanes,a=e.intersectionPlanes.length):(o=this.unionPlanes,a=e.unionPlanes.length),o.length!==a+s){o.length=a+s;for(let l=0;l<s;l++)o[a+l]=new rn;n=!0}this.projectPlanes(r,o,a),n&&(this.version++,this.cacheKey=`${this.intersectionPlanes.length}:${this.unionPlanes.length}`)}getGroupContext(e){if(this.shadowPass&&!e.clipShadows)return this;let t=this.clippingGroupContexts.get(e);return t===void 0&&(t=new o9(this),this.clippingGroupContexts.set(e,t)),t.update(this,e),t}get unionClippingCount(){return this.unionPlanes.length}}class Fse{constructor(e,t){this.bundleGroup=e,this.camera=t}}const wh=[];class Use{constructor(){this.bundles=new B0}get(e,t){const n=this.bundles;wh[0]=e,wh[1]=t;let r=n.get(wh);return r===void 0&&(r=new Fse(e,t),n.set(wh,r)),wh.length=0,r}dispose(){this.bundles=new B0}}class yD{constructor(){this.lightNodes=new WeakMap,this.materialNodes=new Map,this.toneMappingNodes=new Map}fromMaterial(e){if(e.isNodeMaterial)return e;let t=null;const n=this.getMaterialNodeClass(e.type);if(n!==null){t=new n;for(const r in e)t[r]=e[r]}return t}addToneMapping(e,t){this.addType(e,t,this.toneMappingNodes)}getToneMappingFunction(e){return this.toneMappingNodes.get(e)||null}getMaterialNodeClass(e){return this.materialNodes.get(e)||null}addMaterial(e,t){this.addType(e,t,this.materialNodes)}getLightNodeClass(e){return this.lightNodes.get(e)||null}addLight(e,t){this.addClass(e,t,this.lightNodes)}addType(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t=="function"||typeof t=="object")throw new Error(`Base class ${t} is not a class.`);n.set(t,e)}addClass(e,t,n){if(n.has(t)){console.warn(`Redefinition of node ${t.name}`);return}if(typeof e!="function")throw new Error(`Node class ${e.name} is not a class.`);if(typeof t!="function")throw new Error(`Base class ${t.name} is not a class.`);n.set(t,e)}}const Ose=new _x,Mh=[];class kse extends B0{constructor(){super()}createNode(e=[]){return new _x().setLights(e)}getNode(e,t){if(e.isQuadMesh)return Ose;Mh[0]=e,Mh[1]=t;let n=this.get(Mh);return n===void 0&&(n=this.createNode(),this.set(Mh,n)),Mh.length=0,n}}class qh extends F0{constructor(e=1,t=1,n={}){super(e,t,n),this.isXRRenderTarget=!0,this._hasExternalTextures=!1,this._autoAllocateDepthBuffer=!0,this._isOpaqueFramebuffer=!1}copy(e){return super.copy(e),this._hasExternalTextures=e._hasExternalTextures,this._autoAllocateDepthBuffer=e._autoAllocateDepthBuffer,this._isOpaqueFramebuffer=e._isOpaqueFramebuffer,this}}const jw=new J,$w=new J;class Vse extends Ta{constructor(e,t=!1){super(),this.enabled=!1,this.isPresenting=!1,this.cameraAutoUpdate=!0,this._renderer=e,this._cameraL=new tr,this._cameraL.viewport=new rn,this._cameraR=new tr,this._cameraR.viewport=new rn,this._cameras=[this._cameraL,this._cameraR],this._cameraXR=new zv,this._currentDepthNear=null,this._currentDepthFar=null,this._controllers=[],this._controllerInputSources=[],this._xrRenderTarget=null,this._layers=[],this._supportsLayers=!1,this._supportsGlBinding=typeof XRWebGLBinding<"u",this._frameBufferTargets=null,this._createXRLayer=jse.bind(this),this._gl=null,this._currentAnimationContext=null,this._currentAnimationLoop=null,this._currentPixelRatio=null,this._currentSize=new Ge,this._onSessionEvent=qse.bind(this),this._onSessionEnd=Hse.bind(this),this._onInputSourcesChange=Wse.bind(this),this._onAnimationFrame=$se.bind(this),this._referenceSpace=null,this._referenceSpaceType="local-floor",this._customReferenceSpace=null,this._framebufferScaleFactor=1,this._foveation=1,this._session=null,this._glBaseLayer=null,this._glBinding=null,this._glProjLayer=null,this._xrFrame=null,this._useLayers=this._supportsGlBinding&&"createProjectionLayer"in XRWebGLBinding.prototype,this._useMultiviewIfPossible=t,this._useMultiview=!1}getController(e){return this._getController(e).getTargetRaySpace()}getControllerGrip(e){return this._getController(e).getGripSpace()}getHand(e){return this._getController(e).getHandSpace()}getFoveation(){if(!(this._glProjLayer===null&&this._glBaseLayer===null))return this._foveation}setFoveation(e){this._foveation=e,this._glProjLayer!==null&&(this._glProjLayer.fixedFoveation=e),this._glBaseLayer!==null&&this._glBaseLayer.fixedFoveation!==void 0&&(this._glBaseLayer.fixedFoveation=e)}getFramebufferScaleFactor(){return this._framebufferScaleFactor}setFramebufferScaleFactor(e){this._framebufferScaleFactor=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change framebuffer scale while presenting.")}getReferenceSpaceType(){return this._referenceSpaceType}setReferenceSpaceType(e){this._referenceSpaceType=e,this.isPresenting===!0&&console.warn("THREE.XRManager: Cannot change reference space type while presenting.")}getReferenceSpace(){return this._customReferenceSpace||this._referenceSpace}setReferenceSpace(e){this._customReferenceSpace=e}getCamera(){return this._cameraXR}getEnvironmentBlendMode(){if(this._session!==null)return this._session.environmentBlendMode}getFrame(){return this._xrFrame}useMultiview(){return this._useMultiview}createQuadLayer(e,t,n,r,s,o,a,l={}){const u=new Pc(e,t),c=new qh(s,o,{format:Zi,type:ar,depthTexture:new Qo(s,o,l.stencil?Ho:Oi,void 0,void 0,void 0,void 0,void 0,void 0,l.stencil?jo:Wo),stencilBuffer:l.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});c._autoAllocateDepthBuffer=!0;const A=new Bs({color:16777215,side:So});A.map=c.texture,A.map.offset.y=1,A.map.repeat.y=-1;const m=new ei(u,A);m.position.copy(n),m.quaternion.copy(r);const _={type:"quad",width:e,height:t,translation:n,quaternion:r,pixelwidth:s,pixelheight:o,plane:m,material:A,rendercall:a,renderTarget:c};if(this._layers.push(_),this._session!==null){_.plane.material=new Bs({color:16777215,side:So}),_.plane.material.blending=z2,_.plane.material.blendEquation=Ds,_.plane.material.blendSrc=K0,_.plane.material.blendDst=K0,_.xrlayer=this._createXRLayer(_);const b=this._session.renderState.layers;b.unshift(_.xrlayer),this._session.updateRenderState({layers:b})}else c.isXRRenderTarget=!1;return m}createCylinderLayer(e,t,n,r,s,o,a,l,u={}){const c=new Cc(e,e,e*t/n,64,64,!0,Math.PI-t/2,t),A=new qh(o,a,{format:Zi,type:ar,depthTexture:new Qo(o,a,u.stencil?Ho:Oi,void 0,void 0,void 0,void 0,void 0,void 0,u.stencil?jo:Wo),stencilBuffer:u.stencil,resolveDepthBuffer:!1,resolveStencilBuffer:!1});A._autoAllocateDepthBuffer=!0;const m=new Bs({color:16777215,side:Bi});m.map=A.texture,m.map.offset.y=1,m.map.repeat.y=-1;const _=new ei(c,m);_.position.copy(r),_.quaternion.copy(s);const b={type:"cylinder",radius:e,centralAngle:t,aspectratio:n,translation:r,quaternion:s,pixelwidth:o,pixelheight:a,plane:_,material:m,rendercall:l,renderTarget:A};if(this._layers.push(b),this._session!==null){b.plane.material=new Bs({color:16777215,side:Bi}),b.plane.material.blending=z2,b.plane.material.blendEquation=Ds,b.plane.material.blendSrc=K0,b.plane.material.blendDst=K0,b.xrlayer=this._createXRLayer(b);const M=this._session.renderState.layers;M.unshift(b.xrlayer),this._session.updateRenderState({layers:M})}else A.isXRRenderTarget=!1;return _}renderLayers(){const e=new J,t=new Os,n=this._renderer,r=this.isPresenting,s=n.getOutputRenderTarget(),o=n._frameBufferTarget;this.isPresenting=!1;const a=new Ge;n.getSize(a);const l=n._quad;for(const u of this._layers)if(u.renderTarget.isXRRenderTarget=this._session!==null,u.renderTarget._hasExternalTextures=u.renderTarget.isXRRenderTarget,u.renderTarget.isXRRenderTarget&&this._supportsLayers){u.xrlayer.transform=new XRRigidTransform(u.plane.getWorldPosition(e),u.plane.getWorldQuaternion(t));const c=this._glBinding.getSubImage(u.xrlayer,this._xrFrame);n.backend.setXRRenderTargetTextures(u.renderTarget,c.colorTexture,void 0),n._setXRLayerSize(u.renderTarget.width,u.renderTarget.height),n.setOutputRenderTarget(u.renderTarget),n.setRenderTarget(null),n._frameBufferTarget=null,this._frameBufferTargets||(this._frameBufferTargets=new WeakMap);const{frameBufferTarget:A,quad:m}=this._frameBufferTargets.get(u.renderTarget)||{frameBufferTarget:null,quad:null};A?(n._frameBufferTarget=A,n._quad=m):(n._quad=new MA(new Cr),this._frameBufferTargets.set(u.renderTarget,{frameBufferTarget:n._getFrameBufferTarget(),quad:n._quad})),u.rendercall(),n._frameBufferTarget=null}else n.setRenderTarget(u.renderTarget),u.rendercall();n.setRenderTarget(null),n.setOutputRenderTarget(s),n._frameBufferTarget=o,n._setXRLayerSize(a.x,a.y),n._quad=l,this.isPresenting=r}getSession(){return this._session}async setSession(e){const t=this._renderer,n=t.backend;this._gl=t.getContext();const r=this._gl,s=r.getContextAttributes();if(this._session=e,e!==null){if(n.isWebGPUBackend===!0)throw new Error('THREE.XRManager: XR is currently not supported with a WebGPU backend. Use WebGL by passing "{ forceWebGL: true }" to the constructor of the renderer.');if(e.addEventListener("select",this._onSessionEvent),e.addEventListener("selectstart",this._onSessionEvent),e.addEventListener("selectend",this._onSessionEvent),e.addEventListener("squeeze",this._onSessionEvent),e.addEventListener("squeezestart",this._onSessionEvent),e.addEventListener("squeezeend",this._onSessionEvent),e.addEventListener("end",this._onSessionEnd),e.addEventListener("inputsourceschange",this._onInputSourcesChange),await n.makeXRCompatible(),this._currentPixelRatio=t.getPixelRatio(),t.getSize(this._currentSize),this._currentAnimationContext=t._animation.getContext(),this._currentAnimationLoop=t._animation.getAnimationLoop(),t._animation.stop(),this._supportsGlBinding){const o=new XRWebGLBinding(e,r);this._glBinding=o}if(this._useLayers===!0){let o=null,a=null,l=null;t.depth&&(l=t.stencil?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24,o=t.stencil?jo:Wo,a=t.stencil?Ho:Oi);const u={colorFormat:r.RGBA8,depthFormat:l,scaleFactor:this._framebufferScaleFactor,clearOnAccess:!1};this._useMultiviewIfPossible&&t.hasFeature("OVR_multiview2")&&(u.textureType="texture-array",this._useMultiview=!0);const c=this._glBinding.createProjectionLayer(u),A=[c];this._glProjLayer=c,t.setPixelRatio(1),t._setXRLayerSize(c.textureWidth,c.textureHeight);const m=this._useMultiview?2:1,_=new Qo(c.textureWidth,c.textureHeight,a,void 0,void 0,void 0,void 0,void 0,void 0,o,m);if(this._xrRenderTarget=new qh(c.textureWidth,c.textureHeight,{format:Zi,type:ar,colorSpace:t.outputColorSpace,depthTexture:_,stencilBuffer:t.stencil,samples:s.antialias?4:0,resolveDepthBuffer:c.ignoreDepthValues===!1,resolveStencilBuffer:c.ignoreDepthValues===!1,depth:this._useMultiview?2:1,multiview:this._useMultiview}),this._xrRenderTarget._hasExternalTextures=!0,this._xrRenderTarget.depth=this._useMultiview?2:1,this._supportsLayers=e.enabledFeatures.includes("layers"),this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType()),this._supportsLayers)for(const b of this._layers)b.plane.material=new Bs({color:16777215,side:b.type==="cylinder"?Bi:So}),b.plane.material.blending=z2,b.plane.material.blendEquation=Ds,b.plane.material.blendSrc=K0,b.plane.material.blendDst=K0,b.xrlayer=this._createXRLayer(b),A.unshift(b.xrlayer);e.updateRenderState({layers:A})}else{const o={antialias:t.samples>0,alpha:!0,depth:t.depth,stencil:t.stencil,framebufferScaleFactor:this.getFramebufferScaleFactor()},a=new XRWebGLLayer(e,r,o);this._glBaseLayer=a,e.updateRenderState({baseLayer:a}),t.setPixelRatio(1),t._setXRLayerSize(a.framebufferWidth,a.framebufferHeight),this._xrRenderTarget=new qh(a.framebufferWidth,a.framebufferHeight,{format:Zi,type:ar,colorSpace:t.outputColorSpace,stencilBuffer:t.stencil,resolveDepthBuffer:a.ignoreDepthValues===!1,resolveStencilBuffer:a.ignoreDepthValues===!1}),this._xrRenderTarget._isOpaqueFramebuffer=!0,this._referenceSpace=await e.requestReferenceSpace(this.getReferenceSpaceType())}this.setFoveation(this.getFoveation()),t._animation.setAnimationLoop(this._onAnimationFrame),t._animation.setContext(e),t._animation.start(),this.isPresenting=!0,this.dispatchEvent({type:"sessionstart"})}}updateCamera(e){const t=this._session;if(t===null)return;const n=e.near,r=e.far,s=this._cameraXR,o=this._cameraL,a=this._cameraR;s.near=a.near=o.near=n,s.far=a.far=o.far=r,s.isMultiViewCamera=this._useMultiview,(this._currentDepthNear!==s.near||this._currentDepthFar!==s.far)&&(t.updateRenderState({depthNear:s.near,depthFar:s.far}),this._currentDepthNear=s.near,this._currentDepthFar=s.far),s.layers.mask=e.layers.mask|6,o.layers.mask=s.layers.mask&3,a.layers.mask=s.layers.mask&5;const l=e.parent,u=s.cameras;Xw(s,l);for(let c=0;c<u.length;c++)Xw(u[c],l);u.length===2?zse(s,o,a):s.projectionMatrix.copy(o.projectionMatrix),Gse(e,s,l)}_getController(e){let t=this._controllers[e];return t===void 0&&(t=new $h,this._controllers[e]=t),t}}function zse(i,e,t){jw.setFromMatrixPosition(e.matrixWorld),$w.setFromMatrixPosition(t.matrixWorld);const n=jw.distanceTo($w),r=e.projectionMatrix.elements,s=t.projectionMatrix.elements,o=r[14]/(r[10]-1),a=r[14]/(r[10]+1),l=(r[9]+1)/r[5],u=(r[9]-1)/r[5],c=(r[8]-1)/r[0],A=(s[8]+1)/s[0],m=o*c,_=o*A,b=n/(-c+A),M=b*-c;if(e.matrixWorld.decompose(i.position,i.quaternion,i.scale),i.translateX(M),i.translateZ(b),i.matrixWorld.compose(i.position,i.quaternion,i.scale),i.matrixWorldInverse.copy(i.matrixWorld).invert(),r[10]===-1)i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse);else{const w=o+b,T=a+b,N=m-M,P=_+(n-M),I=l*a/T*w,B=u*a/T*w;i.projectionMatrix.makePerspective(N,P,I,B,w,T),i.projectionMatrixInverse.copy(i.projectionMatrix).invert()}}function Xw(i,e){e===null?i.matrixWorld.copy(i.matrix):i.matrixWorld.multiplyMatrices(e.matrixWorld,i.matrix),i.matrixWorldInverse.copy(i.matrixWorld).invert()}function Gse(i,e,t){t===null?i.matrix.copy(e.matrixWorld):(i.matrix.copy(t.matrixWorld),i.matrix.invert(),i.matrix.multiply(e.matrixWorld)),i.matrix.decompose(i.position,i.quaternion,i.scale),i.updateMatrixWorld(!0),i.projectionMatrix.copy(e.projectionMatrix),i.projectionMatrixInverse.copy(e.projectionMatrixInverse),i.isPerspectiveCamera&&(i.fov=gc*2*Math.atan(1/i.projectionMatrix.elements[5]),i.zoom=1)}function qse(i){const e=this._controllerInputSources.indexOf(i.inputSource);if(e===-1)return;const t=this._controllers[e];if(t!==void 0){const n=this.getReferenceSpace();t.update(i.inputSource,i.frame,n),t.dispatchEvent({type:i.type,data:i.inputSource})}}function Hse(){const i=this._session,e=this._renderer;i.removeEventListener("select",this._onSessionEvent),i.removeEventListener("selectstart",this._onSessionEvent),i.removeEventListener("selectend",this._onSessionEvent),i.removeEventListener("squeeze",this._onSessionEvent),i.removeEventListener("squeezestart",this._onSessionEvent),i.removeEventListener("squeezeend",this._onSessionEvent),i.removeEventListener("end",this._onSessionEnd),i.removeEventListener("inputsourceschange",this._onInputSourcesChange);for(let t=0;t<this._controllers.length;t++){const n=this._controllerInputSources[t];n!==null&&(this._controllerInputSources[t]=null,this._controllers[t].disconnect(n))}if(this._currentDepthNear=null,this._currentDepthFar=null,e._resetXRState(),this._session=null,this._xrRenderTarget=null,this._supportsLayers===!0)for(const t of this._layers)t.renderTarget=new qh(t.pixelwidth,t.pixelheight,{format:Zi,type:ar,depthTexture:new Qo(t.pixelwidth,t.pixelheight,t.stencilBuffer?Ho:Oi,void 0,void 0,void 0,void 0,void 0,void 0,t.stencilBuffer?jo:Wo),stencilBuffer:t.stencilBuffer,resolveDepthBuffer:!1,resolveStencilBuffer:!1}),t.renderTarget.isXRRenderTarget=!1,t.plane.material=t.material,t.material.map=t.renderTarget.texture,t.material.map.offset.y=1,t.material.map.repeat.y=-1,delete t.xrlayer;this.isPresenting=!1,this._useMultiview=!1,e._animation.stop(),e._animation.setAnimationLoop(this._currentAnimationLoop),e._animation.setContext(this._currentAnimationContext),e._animation.start(),e.setPixelRatio(this._currentPixelRatio),e.setSize(this._currentSize.width,this._currentSize.height,!1),this.dispatchEvent({type:"sessionend"})}function Wse(i){const e=this._controllers,t=this._controllerInputSources;for(let n=0;n<i.removed.length;n++){const r=i.removed[n],s=t.indexOf(r);s>=0&&(t[s]=null,e[s].disconnect(r))}for(let n=0;n<i.added.length;n++){const r=i.added[n];let s=t.indexOf(r);if(s===-1){for(let a=0;a<e.length;a++)if(a>=t.length){t.push(r),s=a;break}else if(t[a]===null){t[a]=r,s=a;break}if(s===-1)break}const o=e[s];o&&o.connect(r)}}function jse(i){return i.type==="quad"?this._glBinding.createQuadLayer({transform:new XRRigidTransform(i.translation,i.quaternion),width:i.width/2,height:i.height/2,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1}):this._glBinding.createCylinderLayer({transform:new XRRigidTransform(i.translation,i.quaternion),radius:i.radius,centralAngle:i.centralAngle,aspectRatio:i.aspectRatio,space:this._referenceSpace,viewPixelWidth:i.pixelwidth,viewPixelHeight:i.pixelheight,clearOnAccess:!1})}function $se(i,e){if(e===void 0)return;const t=this._cameraXR,n=this._renderer,r=n.backend,s=this._glBaseLayer,o=this.getReferenceSpace(),a=e.getViewerPose(o);if(this._xrFrame=e,a!==null){const l=a.views;this._glBaseLayer!==null&&r.setXRTarget(s.framebuffer);let u=!1;l.length!==t.cameras.length&&(t.cameras.length=0,u=!0);for(let c=0;c<l.length;c++){const A=l[c];let m;if(this._useLayers===!0){const b=this._glBinding.getViewSubImage(this._glProjLayer,A);m=b.viewport,c===0&&r.setXRRenderTargetTextures(this._xrRenderTarget,b.colorTexture,this._glProjLayer.ignoreDepthValues&&!this._useMultiview?void 0:b.depthStencilTexture)}else m=s.getViewport(A);let _=this._cameras[c];_===void 0&&(_=new tr,_.layers.enable(c),_.viewport=new rn,this._cameras[c]=_),_.matrix.fromArray(A.transform.matrix),_.matrix.decompose(_.position,_.quaternion,_.scale),_.projectionMatrix.fromArray(A.projectionMatrix),_.projectionMatrixInverse.copy(_.projectionMatrix).invert(),_.viewport.set(m.x,m.y,m.width,m.height),c===0&&(t.matrix.copy(_.matrix),t.matrix.decompose(t.position,t.quaternion,t.scale)),u===!0&&t.cameras.push(_)}n.setOutputRenderTarget(this._xrRenderTarget)}for(let l=0;l<this._controllers.length;l++){const u=this._controllerInputSources[l],c=this._controllers[l];u!==null&&c!==void 0&&c.update(u,e,o)}this._currentAnimationLoop&&this._currentAnimationLoop(i,e),e.detectedPlanes&&this.dispatchEvent({type:"planesdetected",data:e}),this._xrFrame=null}const Qw=new Rc,bf=new Ge,Vm=new rn,zm=new _u,Gm=new X8,Sf=new Wt,j1=new rn;class Xse{constructor(e,t={}){this.isRenderer=!0;const{logarithmicDepthBuffer:n=!1,alpha:r=!0,depth:s=!0,stencil:o=!1,antialias:a=!1,samples:l=0,getFallback:u=null,colorBufferType:c=Yr,multiview:A=!1}=t;this.domElement=e.getDomElement(),this.backend=e,this.samples=l||a===!0?4:0,this.autoClear=!0,this.autoClearColor=!0,this.autoClearDepth=!0,this.autoClearStencil=!0,this.alpha=r,this.logarithmicDepthBuffer=n,this.outputColorSpace=xs,this.toneMapping=eo,this.toneMappingExposure=1,this.sortObjects=!0,this.depth=s,this.stencil=o,this.info=new Pee,this.overrideNodes={modelViewMatrix:null,modelNormalViewMatrix:null},this.library=new yD,this.lighting=new kse,this._getFallback=u,this._pixelRatio=1,this._width=this.domElement.width,this._height=this.domElement.height,this._viewport=new rn(0,0,this._width,this._height),this._scissor=new rn(0,0,this._width,this._height),this._scissorTest=!1,this._attributes=null,this._geometries=null,this._nodes=null,this._animation=null,this._bindings=null,this._objects=null,this._pipelines=null,this._bundles=null,this._renderLists=null,this._renderContexts=null,this._textures=null,this._background=null,this._quad=new MA(new Cr),this._quad.material.name="Renderer_output",this._currentRenderContext=null,this._opaqueSort=null,this._transparentSort=null,this._frameBufferTarget=null;const m=this.alpha===!0?0:1;this._clearColor=new hx(0,0,0,m),this._clearDepth=1,this._clearStencil=0,this._renderTarget=null,this._activeCubeFace=0,this._activeMipmapLevel=0,this._outputRenderTarget=null,this._mrt=null,this._renderObjectFunction=null,this._currentRenderObjectFunction=null,this._currentRenderBundle=null,this._handleObjectFunction=this._renderObjectDirect,this._isDeviceLost=!1,this.onDeviceLost=this._onDeviceLost,this._colorBufferType=c,this._initialized=!1,this._initPromise=null,this._compilationPromises=null,this.transparent=!0,this.opaque=!0,this.shadowMap={enabled:!1,type:O8},this.xr=new Vse(this,A),this.debug={checkShaderErrors:!0,onShaderError:null,getShaderAsync:async(_,b,M)=>{await this.compileAsync(_,b);const w=this._renderLists.get(_,b),T=this._renderContexts.get(_,b,this._renderTarget),N=_.overrideMaterial||M.material,P=this._objects.get(M,N,_,b,w.lightsNode,T,T.clippingContext),{fragmentShader:I,vertexShader:B}=P.getNodeBuilderState();return{fragmentShader:I,vertexShader:B}}}}async init(){if(this._initialized)throw new Error("Renderer: Backend has already been initialized.");return this._initPromise!==null?this._initPromise:(this._initPromise=new Promise(async(e,t)=>{let n=this.backend;try{await n.init(this)}catch(r){if(this._getFallback!==null)try{this.backend=n=this._getFallback(r),await n.init(this)}catch(s){t(s);return}else{t(r);return}}this._nodes=new Bse(this,n),this._animation=new xee(this._nodes,this.info),this._attributes=new Ree(n),this._background=new Kre(this,this._nodes),this._geometries=new Cee(this._attributes,this.info),this._textures=new Wee(this,n,this.info),this._pipelines=new Dee(n,this._nodes),this._bindings=new Bee(n,this._nodes,this._textures,this._attributes,this._pipelines,this.info),this._objects=new wee(this,this._nodes,this._geometries,this._pipelines,this._bindings,this.info),this._renderLists=new Oee(this.lighting),this._bundles=new Use,this._renderContexts=new qee,this._animation.start(),this._initialized=!0,e(this)}),this._initPromise)}get coordinateSystem(){return this.backend.coordinateSystem}async compileAsync(e,t,n=null){if(this._isDeviceLost===!0)return;this._initialized===!1&&await this.init();const r=this._nodes.nodeFrame,s=r.renderId,o=this._currentRenderContext,a=this._currentRenderObjectFunction,l=this._compilationPromises,u=e.isScene===!0?e:Qw;n===null&&(n=e);const c=this._renderTarget,A=this._renderContexts.get(n,t,c),m=this._activeMipmapLevel,_=[];this._currentRenderContext=A,this._currentRenderObjectFunction=this.renderObject,this._handleObjectFunction=this._createObjectPipeline,this._compilationPromises=_,r.renderId++,r.update(),A.depth=this.depth,A.stencil=this.stencil,A.clippingContext||(A.clippingContext=new o9),A.clippingContext.updateGlobal(u,t),u.onBeforeRender(this,e,t,c);const b=this._renderLists.get(e,t);if(b.begin(),this._projectObject(e,t,0,b,A.clippingContext),n!==e&&n.traverseVisible(function(P){P.isLight&&P.layers.test(t.layers)&&b.pushLight(P)}),b.finish(),c!==null){this._textures.updateRenderTarget(c,m);const P=this._textures.get(c);A.textures=P.textures,A.depthTexture=P.depthTexture}else A.textures=null,A.depthTexture=null;this._background.update(u,b,A);const M=b.opaque,w=b.transparent,T=b.transparentDoublePass,N=b.lightsNode;this.opaque===!0&&M.length>0&&this._renderObjects(M,t,u,N),this.transparent===!0&&w.length>0&&this._renderTransparents(w,T,t,u,N),r.renderId=s,this._currentRenderContext=o,this._currentRenderObjectFunction=a,this._compilationPromises=l,this._handleObjectFunction=this._renderObjectDirect,await Promise.all(_)}async renderAsync(e,t){this._initialized===!1&&await this.init(),this._renderScene(e,t)}async waitForGPU(){await this.backend.waitForGPU()}set highPrecision(e){e===!0?(this.overrideNodes.modelViewMatrix=my,this.overrideNodes.modelNormalViewMatrix=gy):this.highPrecision&&(this.overrideNodes.modelViewMatrix=null,this.overrideNodes.modelNormalViewMatrix=null)}get highPrecision(){return this.overrideNodes.modelViewMatrix===my&&this.overrideNodes.modelNormalViewMatrix===gy}setMRT(e){return this._mrt=e,this}getMRT(){return this._mrt}getColorBufferType(){return this._colorBufferType}_onDeviceLost(e){let t=`THREE.WebGPURenderer: ${e.api} Device Lost:

Message: ${e.message}`;e.reason&&(t+=`
Reason: ${e.reason}`),console.error(t),this._isDeviceLost=!0}_renderBundle(e,t,n){const{bundleGroup:r,camera:s,renderList:o}=e,a=this._currentRenderContext,l=this._bundles.get(r,s),u=this.backend.get(l);u.renderContexts===void 0&&(u.renderContexts=new Set);const c=r.version!==u.version,A=u.renderContexts.has(a)===!1||c;if(u.renderContexts.add(a),A){this.backend.beginBundle(a),(u.renderObjects===void 0||c)&&(u.renderObjects=[]),this._currentRenderBundle=l;const{transparentDoublePass:m,transparent:_,opaque:b}=o;this.opaque===!0&&b.length>0&&this._renderObjects(b,s,t,n),this.transparent===!0&&_.length>0&&this._renderTransparents(_,m,s,t,n),this._currentRenderBundle=null,this.backend.finishBundle(a,l),u.version=r.version}else{const{renderObjects:m}=u;for(let _=0,b=m.length;_<b;_++){const M=m[_];this._nodes.needsRefresh(M)&&(this._nodes.updateBefore(M),this._nodes.updateForRender(M),this._bindings.updateForRender(M),this._nodes.updateAfter(M))}}this.backend.addBundle(a,l)}render(e,t){if(this._initialized===!1)return console.warn("THREE.Renderer: .render() called before the backend is initialized. Try using .renderAsync() instead."),this.renderAsync(e,t);this._renderScene(e,t)}_getFrameBufferTarget(){const{currentToneMapping:e,currentColorSpace:t}=this,n=e!==eo,r=t!==Sn.workingColorSpace;if(n===!1&&r===!1)return null;const{width:s,height:o}=this.getDrawingBufferSize(bf),{depth:a,stencil:l}=this;let u=this._frameBufferTarget;u===null&&(u=new F0(s,o,{depthBuffer:a,stencilBuffer:l,type:this._colorBufferType,format:Zi,colorSpace:Sn.workingColorSpace,generateMipmaps:!1,minFilter:Wi,magFilter:Wi,samples:this.samples}),u.isPostProcessingRenderTarget=!0,this._frameBufferTarget=u);const c=this.getOutputRenderTarget();return u.depthBuffer=a,u.stencilBuffer=l,c!==null?u.setSize(c.width,c.height,c.depth):u.setSize(s,o,1),u.viewport.copy(this._viewport),u.scissor.copy(this._scissor),u.viewport.multiplyScalar(this._pixelRatio),u.scissor.multiplyScalar(this._pixelRatio),u.scissorTest=this._scissorTest,u.multiview=c!==null?c.multiview:!1,u.resolveDepthBuffer=c!==null?c.resolveDepthBuffer:!0,u._autoAllocateDepthBuffer=c!==null?c._autoAllocateDepthBuffer:!1,u}_renderScene(e,t,n=!0){if(this._isDeviceLost===!0)return;const r=n?this._getFrameBufferTarget():null,s=this._nodes.nodeFrame,o=s.renderId,a=this._currentRenderContext,l=this._currentRenderObjectFunction,u=e.isScene===!0?e:Qw,c=this._renderTarget||this._outputRenderTarget,A=this._activeCubeFace,m=this._activeMipmapLevel;let _;r!==null?(_=r,this.setRenderTarget(_)):_=c;const b=this._renderContexts.get(e,t,_);this._currentRenderContext=b,this._currentRenderObjectFunction=this._renderObjectFunction||this.renderObject,this.info.calls++,this.info.render.calls++,this.info.render.frameCalls++,s.renderId=this.info.calls;const M=this.coordinateSystem,w=this.xr;if(t.coordinateSystem!==M&&w.isPresenting===!1&&(t.coordinateSystem=M,t.updateProjectionMatrix(),t.isArrayCamera))for(const Y of t.cameras)Y.coordinateSystem=M,Y.updateProjectionMatrix();e.matrixWorldAutoUpdate===!0&&e.updateMatrixWorld(),t.parent===null&&t.matrixWorldAutoUpdate===!0&&t.updateMatrixWorld(),w.enabled===!0&&w.isPresenting===!0&&(w.cameraAutoUpdate===!0&&w.updateCamera(t),t=w.getCamera());let T=this._viewport,N=this._scissor,P=this._pixelRatio;_!==null&&(T=_.viewport,N=_.scissor,P=1),this.getDrawingBufferSize(bf),Vm.set(0,0,bf.width,bf.height);const I=T.minDepth===void 0?0:T.minDepth,B=T.maxDepth===void 0?1:T.maxDepth;b.viewportValue.copy(T).multiplyScalar(P).floor(),b.viewportValue.width>>=m,b.viewportValue.height>>=m,b.viewportValue.minDepth=I,b.viewportValue.maxDepth=B,b.viewport=b.viewportValue.equals(Vm)===!1,b.scissorValue.copy(N).multiplyScalar(P).floor(),b.scissor=this._scissorTest&&b.scissorValue.equals(Vm)===!1,b.scissorValue.width>>=m,b.scissorValue.height>>=m,b.clippingContext||(b.clippingContext=new o9),b.clippingContext.updateGlobal(u,t),u.onBeforeRender(this,e,t,_);const F=t.isArrayCamera?Gm:zm;t.isArrayCamera||(Sf.multiplyMatrices(t.projectionMatrix,t.matrixWorldInverse),F.setFromProjectionMatrix(Sf,t.coordinateSystem,t.reversedDepth));const O=this._renderLists.get(e,t);if(O.begin(),this._projectObject(e,t,0,O,b.clippingContext),O.finish(),this.sortObjects===!0&&O.sort(this._opaqueSort,this._transparentSort),_!==null){this._textures.updateRenderTarget(_,m);const Y=this._textures.get(_);b.textures=Y.textures,b.depthTexture=Y.depthTexture,b.width=Y.width,b.height=Y.height,b.renderTarget=_,b.depth=_.depthBuffer,b.stencil=_.stencilBuffer}else b.textures=null,b.depthTexture=null,b.width=this.domElement.width,b.height=this.domElement.height,b.depth=this.depth,b.stencil=this.stencil;b.width>>=m,b.height>>=m,b.activeCubeFace=A,b.activeMipmapLevel=m,b.occlusionQueryCount=O.occlusionQueryCount,this._background.update(u,O,b),b.camera=t,this.backend.beginRender(b);const{bundles:V,lightsNode:U,transparentDoublePass:z,transparent:H,opaque:Q}=O;return V.length>0&&this._renderBundles(V,u,U),this.opaque===!0&&Q.length>0&&this._renderObjects(Q,t,u,U),this.transparent===!0&&H.length>0&&this._renderTransparents(H,z,t,u,U),this.backend.finishRender(b),s.renderId=o,this._currentRenderContext=a,this._currentRenderObjectFunction=l,r!==null&&(this.setRenderTarget(c,A,m),this._renderOutput(_)),u.onAfterRender(this,e,t,_),b}_setXRLayerSize(e,t){this._width=e,this._height=t,this.setViewport(0,0,e,t)}_renderOutput(e){const t=this._quad;this._nodes.hasOutputChange(e.texture)&&(t.material.fragmentNode=this._nodes.getOutputNode(e.texture),t.material.needsUpdate=!0);const n=this.autoClear,r=this.xr.enabled;this.autoClear=!1,this.xr.enabled=!1,this._renderScene(t,t.camera,!1),this.autoClear=n,this.xr.enabled=r}getMaxAnisotropy(){return this.backend.getMaxAnisotropy()}getActiveCubeFace(){return this._activeCubeFace}getActiveMipmapLevel(){return this._activeMipmapLevel}async setAnimationLoop(e){this._initialized===!1&&await this.init(),this._animation.setAnimationLoop(e)}async getArrayBufferAsync(e){return await this.backend.getArrayBufferAsync(e)}getContext(){return this.backend.getContext()}getPixelRatio(){return this._pixelRatio}getDrawingBufferSize(e){return e.set(this._width*this._pixelRatio,this._height*this._pixelRatio).floor()}getSize(e){return e.set(this._width,this._height)}setPixelRatio(e=1){this._pixelRatio!==e&&(this._pixelRatio=e,this.setSize(this._width,this._height,!1))}setDrawingBufferSize(e,t,n){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this._pixelRatio=n,this.domElement.width=Math.floor(e*n),this.domElement.height=Math.floor(t*n),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setSize(e,t,n=!0){this.xr&&this.xr.isPresenting||(this._width=e,this._height=t,this.domElement.width=Math.floor(e*this._pixelRatio),this.domElement.height=Math.floor(t*this._pixelRatio),n===!0&&(this.domElement.style.width=e+"px",this.domElement.style.height=t+"px"),this.setViewport(0,0,e,t),this._initialized&&this.backend.updateSize())}setOpaqueSort(e){this._opaqueSort=e}setTransparentSort(e){this._transparentSort=e}getScissor(e){const t=this._scissor;return e.x=t.x,e.y=t.y,e.width=t.width,e.height=t.height,e}setScissor(e,t,n,r){const s=this._scissor;e.isVector4?s.copy(e):s.set(e,t,n,r)}getScissorTest(){return this._scissorTest}setScissorTest(e){this._scissorTest=e,this.backend.setScissorTest(e)}getViewport(e){return e.copy(this._viewport)}setViewport(e,t,n,r,s=0,o=1){const a=this._viewport;e.isVector4?a.copy(e):a.set(e,t,n,r),a.minDepth=s,a.maxDepth=o}getClearColor(e){return e.copy(this._clearColor)}setClearColor(e,t=1){this._clearColor.set(e),this._clearColor.a=t}getClearAlpha(){return this._clearColor.a}setClearAlpha(e){this._clearColor.a=e}getClearDepth(){return this._clearDepth}setClearDepth(e){this._clearDepth=e}getClearStencil(){return this._clearStencil}setClearStencil(e){this._clearStencil=e}isOccluded(e){const t=this._currentRenderContext;return t&&this.backend.isOccluded(t,e)}clear(e=!0,t=!0,n=!0){if(this._initialized===!1)return console.warn("THREE.Renderer: .clear() called before the backend is initialized. Try using .clearAsync() instead."),this.clearAsync(e,t,n);const r=this._renderTarget||this._getFrameBufferTarget();let s=null;if(r!==null){this._textures.updateRenderTarget(r);const o=this._textures.get(r);s=this._renderContexts.getForClear(r),s.textures=o.textures,s.depthTexture=o.depthTexture,s.width=o.width,s.height=o.height,s.renderTarget=r,s.depth=r.depthBuffer,s.stencil=r.stencilBuffer,s.clearColorValue=this.backend.getClearColor(),s.activeCubeFace=this.getActiveCubeFace(),s.activeMipmapLevel=this.getActiveMipmapLevel()}this.backend.clear(e,t,n,s),r!==null&&this._renderTarget===null&&this._renderOutput(r)}clearColor(){return this.clear(!0,!1,!1)}clearDepth(){return this.clear(!1,!0,!1)}clearStencil(){return this.clear(!1,!1,!0)}async clearAsync(e=!0,t=!0,n=!0){this._initialized===!1&&await this.init(),this.clear(e,t,n)}async clearColorAsync(){this.clearAsync(!0,!1,!1)}async clearDepthAsync(){this.clearAsync(!1,!0,!1)}async clearStencilAsync(){this.clearAsync(!1,!1,!0)}get currentToneMapping(){return this.isOutputTarget?this.toneMapping:eo}get currentColorSpace(){return this.isOutputTarget?this.outputColorSpace:Sn.workingColorSpace}get isOutputTarget(){return this._renderTarget===this._outputRenderTarget||this._renderTarget===null}dispose(){this.info.dispose(),this.backend.dispose(),this._animation.dispose(),this._objects.dispose(),this._pipelines.dispose(),this._nodes.dispose(),this._bindings.dispose(),this._renderLists.dispose(),this._renderContexts.dispose(),this._textures.dispose(),this._frameBufferTarget!==null&&this._frameBufferTarget.dispose(),Object.values(this.backend.timestampQueryPool).forEach(e=>{e!==null&&e.dispose()}),this.setRenderTarget(null),this.setAnimationLoop(null)}setRenderTarget(e,t=0,n=0){this._renderTarget=e,this._activeCubeFace=t,this._activeMipmapLevel=n}getRenderTarget(){return this._renderTarget}setOutputRenderTarget(e){this._outputRenderTarget=e}getOutputRenderTarget(){return this._outputRenderTarget}_resetXRState(){this.backend.setXRTarget(null),this.setOutputRenderTarget(null),this.setRenderTarget(null),this._frameBufferTarget.dispose(),this._frameBufferTarget=null}setRenderObjectFunction(e){this._renderObjectFunction=e}getRenderObjectFunction(){return this._renderObjectFunction}compute(e,t=null){if(this._isDeviceLost===!0)return;if(this._initialized===!1)return console.warn("THREE.Renderer: .compute() called before the backend is initialized. Try using .computeAsync() instead."),this.computeAsync(e);const n=this._nodes.nodeFrame,r=n.renderId;this.info.calls++,this.info.compute.calls++,this.info.compute.frameCalls++,n.renderId=this.info.calls;const s=this.backend,o=this._pipelines,a=this._bindings,l=this._nodes,u=Array.isArray(e)?e:[e];if(u[0]===void 0||u[0].isComputeNode!==!0)throw new Error("THREE.Renderer: .compute() expects a ComputeNode.");s.beginCompute(e);for(const c of u){if(o.has(c)===!1){const _=()=>{c.removeEventListener("dispose",_),o.delete(c),a.delete(c),l.delete(c)};c.addEventListener("dispose",_);const b=c.onInitFunction;b!==null&&b.call(c,{renderer:this})}l.updateForCompute(c),a.updateForCompute(c);const A=a.getForCompute(c),m=o.getForCompute(c,A);s.compute(e,c,A,m,t)}s.finishCompute(e),n.renderId=r}async computeAsync(e,t=null){this._initialized===!1&&await this.init(),this.compute(e,t)}async hasFeatureAsync(e){return this._initialized===!1&&await this.init(),this.backend.hasFeature(e)}async resolveTimestampsAsync(e="render"){return this._initialized===!1&&await this.init(),this.backend.resolveTimestampsAsync(e)}hasFeature(e){return this._initialized===!1?(console.warn("THREE.Renderer: .hasFeature() called before the backend is initialized. Try using .hasFeatureAsync() instead."),!1):this.backend.hasFeature(e)}hasInitialized(){return this._initialized}async initTextureAsync(e){this._initialized===!1&&await this.init(),this._textures.updateTexture(e)}initTexture(e){this._initialized===!1&&console.warn("THREE.Renderer: .initTexture() called before the backend is initialized. Try using .initTextureAsync() instead."),this._textures.updateTexture(e)}copyFramebufferToTexture(e,t=null){if(t!==null)if(t.isVector2)t=j1.set(t.x,t.y,e.image.width,e.image.height).floor();else if(t.isVector4)t=j1.copy(t).floor();else{console.error("THREE.Renderer.copyFramebufferToTexture: Invalid rectangle.");return}else t=j1.set(0,0,e.image.width,e.image.height);let n=this._currentRenderContext,r;n!==null?r=n.renderTarget:(r=this._renderTarget||this._getFrameBufferTarget(),r!==null&&(this._textures.updateRenderTarget(r),n=this._textures.get(r))),this._textures.updateTexture(e,{renderTarget:r}),this.backend.copyFramebufferToTexture(e,n,t)}copyTextureToTexture(e,t,n=null,r=null,s=0,o=0){this._textures.updateTexture(e),this._textures.updateTexture(t),this.backend.copyTextureToTexture(e,t,n,r,s,o)}async readRenderTargetPixelsAsync(e,t,n,r,s,o=0,a=0){return this.backend.copyTextureToBuffer(e.textures[o],t,n,r,s,a)}_projectObject(e,t,n,r,s){if(e.visible===!1)return;if(e.layers.test(t.layers)){if(e.isGroup)n=e.renderOrder,e.isClippingGroup&&e.enabled&&(s=s.getGroupContext(e));else if(e.isLOD)e.autoUpdate===!0&&e.update(t);else if(e.isLight)r.pushLight(e);else if(e.isSprite){const l=t.isArrayCamera?Gm:zm;if(!e.frustumCulled||l.intersectsSprite(e,t)){this.sortObjects===!0&&j1.setFromMatrixPosition(e.matrixWorld).applyMatrix4(Sf);const{geometry:u,material:c}=e;c.visible&&r.push(e,u,c,n,j1.z,null,s)}}else if(e.isLineLoop)console.error("THREE.Renderer: Objects of type THREE.LineLoop are not supported. Please use THREE.Line or THREE.LineSegments.");else if(e.isMesh||e.isLine||e.isPoints){const l=t.isArrayCamera?Gm:zm;if(!e.frustumCulled||l.intersectsObject(e,t)){const{geometry:u,material:c}=e;if(this.sortObjects===!0&&(u.boundingSphere===null&&u.computeBoundingSphere(),j1.copy(u.boundingSphere.center).applyMatrix4(e.matrixWorld).applyMatrix4(Sf)),Array.isArray(c)){const A=u.groups;for(let m=0,_=A.length;m<_;m++){const b=A[m],M=c[b.materialIndex];M&&M.visible&&r.push(e,u,M,n,j1.z,b,s)}}else c.visible&&r.push(e,u,c,n,j1.z,null,s)}}}if(e.isBundleGroup===!0&&this.backend.beginBundle!==void 0){const l=r;r=this._renderLists.get(e,t),r.begin(),l.pushBundle({bundleGroup:e,camera:t,renderList:r}),r.finish()}const a=e.children;for(let l=0,u=a.length;l<u;l++)this._projectObject(a[l],t,n,r,s)}_renderBundles(e,t,n){for(const r of e)this._renderBundle(r,t,n)}_renderTransparents(e,t,n,r,s){if(t.length>0){for(const{material:o}of t)o.side=Bi;this._renderObjects(t,n,r,s,"backSide");for(const{material:o}of t)o.side=So;this._renderObjects(e,n,r,s);for(const{material:o}of t)o.side=Mr}else this._renderObjects(e,n,r,s)}_renderObjects(e,t,n,r,s=null){for(let o=0,a=e.length;o<a;o++){const{object:l,geometry:u,material:c,group:A,clippingContext:m}=e[o];this._currentRenderObjectFunction(l,n,t,u,c,A,r,m,s)}}renderObject(e,t,n,r,s,o,a,l=null,u=null){let c,A,m;if(e.onBeforeRender(this,t,n,r,s,o),s.allowOverride===!0&&t.overrideMaterial!==null){const _=t.overrideMaterial;s.positionNode&&s.positionNode.isNode&&(c=_.positionNode,_.positionNode=s.positionNode),_.alphaTest=s.alphaTest,_.alphaMap=s.alphaMap,_.transparent=s.transparent||s.transmission>0,_.isShadowPassMaterial&&(_.side=s.shadowSide===null?s.side:s.shadowSide,s.depthNode&&s.depthNode.isNode&&(m=_.depthNode,_.depthNode=s.depthNode),s.castShadowNode&&s.castShadowNode.isNode&&(A=_.colorNode,_.colorNode=s.castShadowNode),s.castShadowPositionNode&&s.castShadowPositionNode.isNode&&(c=_.positionNode,_.positionNode=s.castShadowPositionNode)),s=_}s.transparent===!0&&s.side===Mr&&s.forceSinglePass===!1?(s.side=Bi,this._handleObjectFunction(e,s,t,n,a,o,l,"backSide"),s.side=So,this._handleObjectFunction(e,s,t,n,a,o,l,u),s.side=Mr):this._handleObjectFunction(e,s,t,n,a,o,l,u),c!==void 0&&(t.overrideMaterial.positionNode=c),m!==void 0&&(t.overrideMaterial.depthNode=m),A!==void 0&&(t.overrideMaterial.colorNode=A),e.onAfterRender(this,t,n,r,s,o)}_renderObjectDirect(e,t,n,r,s,o,a,l){const u=this._objects.get(e,t,n,r,s,this._currentRenderContext,a,l);u.drawRange=e.geometry.drawRange,u.group=o;const c=this._nodes.needsRefresh(u);c&&(this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u)),this._pipelines.updateForRender(u),this._currentRenderBundle!==null&&(this.backend.get(this._currentRenderBundle).renderObjects.push(u),u.bundle=this._currentRenderBundle.bundleGroup),this.backend.draw(u,this.info),c&&this._nodes.updateAfter(u)}_createObjectPipeline(e,t,n,r,s,o,a,l){const u=this._objects.get(e,t,n,r,s,this._currentRenderContext,a,l);u.drawRange=e.geometry.drawRange,u.group=o,this._nodes.updateBefore(u),this._geometries.updateForRender(u),this._nodes.updateForRender(u),this._bindings.updateForRender(u),this._pipelines.getForRender(u,this._compilationPromises),this._nodes.updateAfter(u)}get compile(){return this.compileAsync}}class vD{constructor(e=""){this.name=e,this.visibility=0}setVisibility(e){this.visibility|=e}clone(){return Object.assign(new this.constructor,this)}}function Qse(i){return i+(nu-i%nu)%nu}class _D extends vD{constructor(e,t=null){super(e),this.isBuffer=!0,this.bytesPerElement=Float32Array.BYTES_PER_ELEMENT,this._buffer=t}get byteLength(){return Qse(this._buffer.byteLength)}get buffer(){return this._buffer}update(){return!0}}class xD extends _D{constructor(e,t=null){super(e,t),this.isUniformBuffer=!0}}let Yse=0;class bD extends xD{constructor(e,t){super("UniformBuffer_"+Yse++,e?e.value:null),this.nodeUniform=e,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class Kse extends xD{constructor(e){super(e),this.isUniformsGroup=!0,this._values=null,this.uniforms=[]}addUniform(e){return this.uniforms.push(e),this}removeUniform(e){const t=this.uniforms.indexOf(e);return t!==-1&&this.uniforms.splice(t,1),this}get values(){return this._values===null&&(this._values=Array.from(this.buffer)),this._values}get buffer(){let e=this._buffer;if(e===null){const t=this.byteLength;e=new Float32Array(new ArrayBuffer(t)),this._buffer=e}return e}get byteLength(){const e=this.bytesPerElement;let t=0;for(let n=0,r=this.uniforms.length;n<r;n++){const s=this.uniforms[n],o=s.boundary,a=s.itemSize*e,l=t%nu,u=l%o,c=l+u;t+=u,c!==0&&nu-c<a&&(t+=nu-c),s.offset=t/e,t+=a}return Math.ceil(t/nu)*nu}update(){let e=!1;for(const t of this.uniforms)this.updateByType(t)===!0&&(e=!0);return e}updateByType(e){if(e.isNumberUniform)return this.updateNumber(e);if(e.isVector2Uniform)return this.updateVector2(e);if(e.isVector3Uniform)return this.updateVector3(e);if(e.isVector4Uniform)return this.updateVector4(e);if(e.isColorUniform)return this.updateColor(e);if(e.isMatrix3Uniform)return this.updateMatrix3(e);if(e.isMatrix4Uniform)return this.updateMatrix4(e);console.error("THREE.WebGPUUniformsGroup: Unsupported uniform type.",e)}updateNumber(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s]!==r){const a=this._getBufferForType(o);a[s]=n[s]=r,t=!0}return t}updateVector2(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y){const a=this._getBufferForType(o);a[s+0]=n[s+0]=r.x,a[s+1]=n[s+1]=r.y,t=!0}return t}updateVector3(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z){const a=this._getBufferForType(o);a[s+0]=n[s+0]=r.x,a[s+1]=n[s+1]=r.y,a[s+2]=n[s+2]=r.z,t=!0}return t}updateVector4(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset,o=e.getType();if(n[s+0]!==r.x||n[s+1]!==r.y||n[s+2]!==r.z||n[s+4]!==r.w){const a=this._getBufferForType(o);a[s+0]=n[s+0]=r.x,a[s+1]=n[s+1]=r.y,a[s+2]=n[s+2]=r.z,a[s+3]=n[s+3]=r.w,t=!0}return t}updateColor(e){let t=!1;const n=this.values,r=e.getValue(),s=e.offset;if(n[s+0]!==r.r||n[s+1]!==r.g||n[s+2]!==r.b){const o=this.buffer;o[s+0]=n[s+0]=r.r,o[s+1]=n[s+1]=r.g,o[s+2]=n[s+2]=r.b,t=!0}return t}updateMatrix3(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;if(n[s+0]!==r[0]||n[s+1]!==r[1]||n[s+2]!==r[2]||n[s+4]!==r[3]||n[s+5]!==r[4]||n[s+6]!==r[5]||n[s+8]!==r[6]||n[s+9]!==r[7]||n[s+10]!==r[8]){const o=this.buffer;o[s+0]=n[s+0]=r[0],o[s+1]=n[s+1]=r[1],o[s+2]=n[s+2]=r[2],o[s+4]=n[s+4]=r[3],o[s+5]=n[s+5]=r[4],o[s+6]=n[s+6]=r[5],o[s+8]=n[s+8]=r[6],o[s+9]=n[s+9]=r[7],o[s+10]=n[s+10]=r[8],t=!0}return t}updateMatrix4(e){let t=!1;const n=this.values,r=e.getValue().elements,s=e.offset;return Jse(n,r,s)===!1&&(this.buffer.set(r,s),Zse(n,r,s),t=!0),t}_getBufferForType(e){return e==="int"||e==="ivec2"||e==="ivec3"||e==="ivec4"?new Int32Array(this.buffer.buffer):e==="uint"||e==="uvec2"||e==="uvec3"||e==="uvec4"?new Uint32Array(this.buffer.buffer):this.buffer}}function Zse(i,e,t){for(let n=0,r=e.length;n<r;n++)i[t+n]=e[n]}function Jse(i,e,t){for(let n=0,r=e.length;n<r;n++)if(i[t+n]!==e[n])return!1;return!0}let eoe=0;class SD extends Kse{constructor(e,t){super(e),this.id=eoe++,this.groupNode=t,this.isNodeUniformsGroup=!0}}class TD extends vD{constructor(e,t){super(e),this._onDisposeTexture=()=>{this.texture=null},this.texture=t,this.version=t?t.version:0,this.generation=null,this.isSampler=!0}set texture(e){this._texture!==e&&(this._texture&&this._texture.removeEventListener("dispose",this._onDisposeTexture),this._texture=e,this.generation=null,this.version=0,this._texture&&this._texture.addEventListener("dispose",this._onDisposeTexture))}get texture(){return this._texture}update(){const{texture:e,version:t}=this;return t!==e.version?(this.version=e.version,!0):!1}}let toe=0;class noe extends TD{constructor(e,t){super(e,t),this.id=toe++,this.store=!1,this.isSampledTexture=!0}}class IA extends noe{constructor(e,t,n,r=null){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n,this.access=r}update(){const{textureNode:e}=this;return this.texture!==e.value?(this.texture=e.value,!0):super.update()}}class wD extends IA{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledCubeTexture=!0}}class Ny extends IA{constructor(e,t,n,r=null){super(e,t,n,r),this.isSampledTexture3D=!0}}const ioe={textureDimensions:"textureSize",equals:"equal"},roe={low:"lowp",medium:"mediump",high:"highp"},Yw={swizzleAssign:!0,storageBuffer:!1},Kw={perspective:"smooth",linear:"noperspective"},Zw={centroid:"centroid"},Jw=`
precision highp float;
precision highp int;
precision highp sampler2D;
precision highp sampler3D;
precision highp samplerCube;
precision highp sampler2DArray;

precision highp usampler2D;
precision highp usampler3D;
precision highp usamplerCube;
precision highp usampler2DArray;

precision highp isampler2D;
precision highp isampler3D;
precision highp isamplerCube;
precision highp isampler2DArray;

precision lowp sampler2DShadow;
precision lowp sampler2DArrayShadow;
precision lowp samplerCubeShadow;
`;class soe extends mD{constructor(e,t){super(e,t,new Dse),this.uniformGroups={},this.transforms=[],this.extensions={},this.builtins={vertex:[],fragment:[],compute:[]}}needsToWorkingColorSpace(e){return e.isVideoTexture===!0&&e.colorSpace!==vo}getMethod(e){return ioe[e]||e}getOutputStructName(){return""}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const o of t.inputs)r.push(this.getType(o.type)+" "+o.name);return`${this.getType(t.type)} ${t.name}( ${r.join(", ")} ) {

	${n.vars}

${n.code}
	return ${n.result};

}`}setupPBO(e){const t=e.value;if(t.pbo===void 0){const n=t.array,r=t.count*t.itemSize,{itemSize:s}=t,o=t.array.constructor.name.toLowerCase().includes("int");let a=o?gu:Tc;s===2?a=o?wc:nl:s===3?a=o?tE:l5:s===4&&(a=o?Mc:Zi);const l={Float32Array:nr,Uint8Array:ar,Uint16Array:qa,Uint32Array:Oi,Int8Array:ou,Int16Array:au,Int32Array:as,Uint8ClampedArray:ar},u=Math.pow(2,Math.ceil(Math.log2(Math.sqrt(r/s))));let c=Math.ceil(r/s/u);u*c*s<r&&c++;const A=u*c*s,m=new n.constructor(A);m.set(n,0),t.array=m;const _=new I0(t.array,u,c,a,l[t.array.constructor.name]||nr);_.needsUpdate=!0,_.isPBOTexture=!0;const b=new ml(_,null,null);b.setPrecision("high"),t.pboNode=b,t.pbo=b.value,this.getUniformFromNode(t.pboNode,"texture",this.shaderStage,this.context.nodeName)}}getPropertyName(e,t=this.shaderStage){return e.isNodeUniform&&e.node.isTextureNode!==!0&&e.node.isBufferNode!==!0?t.charAt(0)+"_"+e.name:super.getPropertyName(e,t)}generatePBO(e){const{node:t,indexNode:n}=e,r=t.value;if(this.renderer.backend.has(r)){const c=this.renderer.backend.get(r);c.pbo=r.pbo}const s=this.getUniformFromNode(r.pboNode,"texture",this.shaderStage,this.context.nodeName),o=this.getPropertyName(s);this.increaseUsage(n);const a=n.build(this,"uint"),l=this.getDataFromNode(e);let u=l.propertyName;if(u===void 0){const c=this.getVarFromNode(e);u=this.getPropertyName(c);const A=this.getDataFromNode(t);let m=A.propertySizeName;m===void 0&&(m=u+"Size",this.getVarFromNode(t,m,"uint"),this.addLineFlowCode(`${m} = uint( textureSize( ${o}, 0 ).x )`,e),A.propertySizeName=m);const{itemSize:_}=r,b="."+Lc.join("").slice(0,_),M=`ivec2(${a} % ${m}, ${a} / ${m})`,w=this.generateTextureLoad(null,o,M,null,"0");let T="vec4";r.pbo.type===Oi?T="uvec4":r.pbo.type===as&&(T="ivec4"),this.addLineFlowCode(`${u} = ${T}(${w})${b}`,e),l.propertyName=u}return u}generateTextureLoad(e,t,n,r,s="0"){return r?`texelFetch( ${t}, ivec3( ${n}, ${r} ), ${s} )`:`texelFetch( ${t}, ${n}, ${s} )`}generateTexture(e,t,n,r){return e.isDepthTexture?(r&&(n=`vec4( ${n}, ${r} )`),`texture( ${t}, ${n} ).x`):(r&&(n=`vec3( ${n}, ${r} )`),`texture( ${t}, ${n} )`)}generateTextureLevel(e,t,n,r){return`textureLod( ${t}, ${n}, ${r} )`}generateTextureBias(e,t,n,r){return`texture( ${t}, ${n}, ${r} )`}generateTextureGrad(e,t,n,r){return`textureGrad( ${t}, ${n}, ${r[0]}, ${r[1]} )`}generateTextureCompare(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return s?`texture( ${t}, vec4( ${n}, ${s}, ${r} ) )`:`texture( ${t}, vec3( ${n}, ${r} ) )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`${this.getVar(r.type,r.name,r.count)};`);return t.join(`
	`)}getUniforms(e){const t=this.uniforms[e],n=[],r={};for(const o of t){let a=null,l=!1;if(o.type==="texture"||o.type==="texture3D"){const c=o.node.value;let A="";(c.isDataTexture===!0||c.isData3DTexture===!0)&&(c.type===Oi?A="u":c.type===as&&(A="i")),o.type==="texture3D"&&c.isArrayTexture===!1?a=`${A}sampler3D ${o.name};`:c.compareFunction?c.isArrayTexture===!0?a=`sampler2DArrayShadow ${o.name};`:a=`sampler2DShadow ${o.name};`:c.isArrayTexture===!0||c.isDataArrayTexture===!0||c.isCompressedArrayTexture===!0?a=`${A}sampler2DArray ${o.name};`:a=`${A}sampler2D ${o.name};`}else if(o.type==="cubeTexture")a=`samplerCube ${o.name};`;else if(o.type==="buffer"){const c=o.node,A=this.getType(c.bufferType),m=c.bufferCount,_=m>0?m:"";a=`${c.name} {
	${A} ${o.name}[${_}];
};
`}else a=`${this.getVectorType(o.type)} ${this.getPropertyName(o,e)};`,l=!0;const u=o.node.precision;if(u!==null&&(a=roe[u]+" "+a),l){a="	"+a;const c=o.groupNode.name;(r[c]||(r[c]=[])).push(a)}else a="uniform "+a,n.push(a)}let s="";for(const o in r){const a=r[o];s+=this._getGLSLUniformStruct(e+"_"+o,a.join(`
`))+`
`}return s+=n.join(`
`),s}getTypeFromAttribute(e){let t=super.getTypeFromAttribute(e);if(/^[iu]/.test(t)&&e.gpuType!==as){let n=e;e.isInterleavedBufferAttribute&&(n=e.data);const r=n.array;r instanceof Uint32Array||r instanceof Int32Array||(t=t.slice(1))}return t}getAttributes(e){let t="";if(e==="vertex"||e==="compute"){const n=this.getAttributesArray();let r=0;for(const s of n)t+=`layout( location = ${r++} ) in ${s.type} ${s.name};
`}return t}getStructMembers(e){const t=[];for(const n of e.members)t.push(`	${n.type} ${n.name};`);return t.join(`
`)}getStructs(e){const t=[],n=this.structs[e],r=[];for(const s of n)if(s.output)for(const o of s.members)r.push(`layout( location = ${o.index} ) out ${o.type} ${o.name};`);else{let o="struct "+s.name+` {
`;o+=this.getStructMembers(s),o+=`
};
`,t.push(o)}return r.length===0&&r.push("layout( location = 0 ) out vec4 fragColor;"),`
`+r.join(`
`)+`

`+t.join(`
`)}getVaryings(e){let t="";const n=this.varyings;if(e==="vertex"||e==="compute")for(const r of n){e==="compute"&&(r.needsInterpolation=!0);const s=this.getType(r.type);if(r.needsInterpolation)if(r.interpolationType){const o=Kw[r.interpolationType]||r.interpolationType,a=Zw[r.interpolationSampling]||"";t+=`${o} ${a} out ${s} ${r.name};
`}else{const o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}out ${s} ${r.name};
`}else t+=`${s} ${r.name};
`}else if(e==="fragment"){for(const r of n)if(r.needsInterpolation){const s=this.getType(r.type);if(r.interpolationType){const o=Kw[r.interpolationType]||r.interpolationType,a=Zw[r.interpolationSampling]||"";t+=`${o} ${a} in ${s} ${r.name};
`}else{const o=s.includes("int")||s.includes("uv")||s.includes("iv")?"flat ":"";t+=`${o}in ${s} ${r.name};
`}}}for(const r of this.builtins[e])t+=`${r};
`;return t}getVertexIndex(){return"uint( gl_VertexID )"}getInstanceIndex(){return"uint( gl_InstanceID )"}getInvocationLocalIndex(){return`uint( gl_InstanceID ) % ${this.object.workgroupSize.reduce((n,r)=>n*r,1)}u`}getDrawIndex(){return this.renderer.backend.extensions.has("WEBGL_multi_draw")?"uint( gl_DrawID )":null}getFrontFacing(){return"gl_FrontFacing"}getFragCoord(){return"gl_FragCoord.xy"}getFragDepth(){return"gl_FragDepth"}enableExtension(e,t,n=this.shaderStage){const r=this.extensions[n]||(this.extensions[n]=new Map);r.has(e)===!1&&r.set(e,{name:e,behavior:t})}getExtensions(e){const t=[];if(e==="vertex"){const r=this.renderer.backend.extensions;this.object.isBatchedMesh&&r.has("WEBGL_multi_draw")&&this.enableExtension("GL_ANGLE_multi_draw","require",e)}const n=this.extensions[e];if(n!==void 0)for(const{name:r,behavior:s}of n.values())t.push(`#extension ${r} : ${s}`);return t.join(`
`)}getClipDistance(){return"gl_ClipDistance"}isAvailable(e){let t=Yw[e];if(t===void 0){let n;switch(t=!1,e){case"float32Filterable":n="OES_texture_float_linear";break;case"clipDistance":n="WEBGL_clip_cull_distance";break}if(n!==void 0){const r=this.renderer.backend.extensions;r.has(n)&&(r.get(n),t=!0)}Yw[e]=t}return t}isFlipY(){return!0}enableHardwareClipping(e){this.enableExtension("GL_ANGLE_clip_cull_distance","require"),this.builtins.vertex.push(`out float gl_ClipDistance[ ${e} ]`)}enableMultiview(){this.enableExtension("GL_OVR_multiview2","require","fragment"),this.enableExtension("GL_OVR_multiview2","require","vertex"),this.builtins.vertex.push("layout(num_views = 2) in")}registerTransform(e,t){this.transforms.push({varyingName:e,attributeNode:t})}getTransforms(){const e=this.transforms;let t="";for(let n=0;n<e.length;n++){const r=e[n],s=this.getPropertyName(r.attributeNode);s&&(t+=`${r.varyingName} = ${s};
	`)}return t}_getGLSLUniformStruct(e,t){return`
layout( std140 ) uniform ${e} {
${t}
};`}_getGLSLVertexCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${Jw}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// attributes
${e.attributes}

// codes
${e.codes}

void main() {

	// vars
	${e.vars}

	// transforms
	${e.transforms}

	// flow
	${e.flow}

	gl_PointSize = 1.0;

}
`}_getGLSLFragmentCode(e){return`#version 300 es

${this.getSignature()}

// extensions
${e.extensions}

// precision
${Jw}

// uniforms
${e.uniforms}

// varyings
${e.varyings}

// codes
${e.codes}

// structs
${e.structs}

void main() {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){let n=`// code

`;n+=this.flowCode[t];const r=this.flowNodes[t],s=r[r.length-1];for(const a of r){const l=this.getFlowData(a),u=a.name;u&&(n.length>0&&(n+=`
`),n+=`	// flow -> ${u}
	`),n+=`${l.code}
	`,a===s&&t!=="compute"&&(n+=`// result
	`,t==="vertex"?(n+="gl_Position = ",n+=`${l.result};`):t==="fragment"&&(a.outputNode.isOutputStructNode||(n+="fragColor = ",n+=`${l.result};`)))}const o=e[t];o.extensions=this.getExtensions(t),o.uniforms=this.getUniforms(t),o.attributes=this.getAttributes(t),o.varyings=this.getVaryings(t),o.vars=this.getVars(t),o.structs=this.getStructs(t),o.codes=this.getCodes(t),o.transforms=this.getTransforms(t),o.flow=n}this.material!==null?(this.vertexShader=this._getGLSLVertexCode(e.vertex),this.fragmentShader=this._getGLSLFragmentCode(e.fragment)):this.computeShader=this._getGLSLVertexCode(e.compute)}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),o=this.getDataFromNode(e,n,this.globalCache);let a=o.uniformGPU;if(a===void 0){const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,n);if(t==="texture")a=new IA(s.name,s.node,l),c.push(a);else if(t==="cubeTexture")a=new wD(s.name,s.node,l),c.push(a);else if(t==="texture3D")a=new Ny(s.name,s.node,l),c.push(a);else if(t==="buffer"){e.name=`NodeBuffer_${e.id}`,s.name=`buffer${e.id}`;const A=new bD(e,l);A.name=e.name,c.push(A),a=A}else{const A=this.uniformGroups[n]||(this.uniformGroups[n]={});let m=A[u];m===void 0&&(m=new SD(n+"_"+u,l),A[u]=m,c.push(m)),a=this.getNodeUniform(s,t),m.addUniform(a)}o.uniformGPU=a}return s}}let qm=null,Y3=null;class MD{constructor(e={}){this.parameters=Object.assign({},e),this.data=new WeakMap,this.renderer=null,this.domElement=null,this.timestampQueryPool={render:null,compute:null},this.trackTimestamp=e.trackTimestamp===!0}async init(e){this.renderer=e}get coordinateSystem(){}beginRender(){}finishRender(){}beginCompute(){}finishCompute(){}draw(){}compute(){}createProgram(){}destroyProgram(){}createBindings(){}updateBindings(){}updateBinding(){}createRenderPipeline(){}createComputePipeline(){}needsRenderUpdate(){}getRenderCacheKey(){}createNodeBuilder(){}createSampler(){}destroySampler(){}createDefaultTexture(){}createTexture(){}updateTexture(){}generateMipmaps(){}destroyTexture(){}async copyTextureToBuffer(){}copyTextureToTexture(){}copyFramebufferToTexture(){}createAttribute(){}createIndexAttribute(){}createStorageAttribute(){}updateAttribute(){}destroyAttribute(){}getContext(){}updateSize(){}updateViewport(){}isOccluded(){}async resolveTimestampsAsync(e="render"){if(!this.trackTimestamp){$o("WebGPURenderer: Timestamp tracking is disabled.");return}const t=this.timestampQueryPool[e];if(!t){$o(`WebGPURenderer: No timestamp query pool for type '${e}' found.`);return}const n=await t.resolveQueriesAsync();return this.renderer.info[e].timestamp=n,n}async waitForGPU(){}async getArrayBufferAsync(){}async hasFeatureAsync(){}hasFeature(){}getMaxAnisotropy(){}getDrawingBufferSize(){return qm=qm||new Ge,this.renderer.getDrawingBufferSize(qm)}setScissorTest(){}getClearColor(){const e=this.renderer;return Y3=Y3||new hx,e.getClearColor(Y3),Y3.getRGB(Y3),Y3}getDomElement(){let e=this.domElement;return e===null&&(e=this.parameters.canvas!==void 0?this.parameters.canvas:rv(),"setAttribute"in e&&e.setAttribute("data-engine",`three.js r${o5} webgpu`),this.domElement=e),e}set(e,t){this.data.set(e,t)}get(e){let t=this.data.get(e);return t===void 0&&(t={},this.data.set(e,t)),t}has(e){return this.data.has(e)}delete(e){this.data.delete(e)}dispose(){}}let ooe=0;class aoe{constructor(e,t){this.buffers=[e.bufferGPU,t],this.type=e.type,this.bufferType=e.bufferType,this.pbo=e.pbo,this.byteLength=e.byteLength,this.bytesPerElement=e.BYTES_PER_ELEMENT,this.version=e.version,this.isInteger=e.isInteger,this.activeBufferIndex=0,this.baseId=e.id}get id(){return`${this.baseId}|${this.activeBufferIndex}`}get bufferGPU(){return this.buffers[this.activeBufferIndex]}get transformBuffer(){return this.buffers[this.activeBufferIndex^1]}switchBuffers(){this.activeBufferIndex^=1}}class loe{constructor(e){this.backend=e}createAttribute(e,t){const n=this.backend,{gl:r}=n,s=e.array,o=e.usage||r.STATIC_DRAW,a=e.isInterleavedBufferAttribute?e.data:e,l=n.get(a);let u=l.bufferGPU;u===void 0&&(u=this._createBuffer(r,t,s,o),l.bufferGPU=u,l.bufferType=t,l.version=a.version);let c;if(s instanceof Float32Array)c=r.FLOAT;else if(typeof Float16Array<"u"&&s instanceof Float16Array)c=r.HALF_FLOAT;else if(s instanceof Uint16Array)e.isFloat16BufferAttribute?c=r.HALF_FLOAT:c=r.UNSIGNED_SHORT;else if(s instanceof Int16Array)c=r.SHORT;else if(s instanceof Uint32Array)c=r.UNSIGNED_INT;else if(s instanceof Int32Array)c=r.INT;else if(s instanceof Int8Array)c=r.BYTE;else if(s instanceof Uint8Array)c=r.UNSIGNED_BYTE;else if(s instanceof Uint8ClampedArray)c=r.UNSIGNED_BYTE;else throw new Error("THREE.WebGLBackend: Unsupported buffer data format: "+s);let A={bufferGPU:u,bufferType:t,type:c,byteLength:s.byteLength,bytesPerElement:s.BYTES_PER_ELEMENT,version:e.version,pbo:e.pbo,isInteger:c===r.INT||c===r.UNSIGNED_INT||e.gpuType===as,id:ooe++};if(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute){const m=this._createBuffer(r,t,s,o);A=new aoe(A,m)}n.set(e,A)}updateAttribute(e){const t=this.backend,{gl:n}=t,r=e.array,s=e.isInterleavedBufferAttribute?e.data:e,o=t.get(s),a=o.bufferType,l=e.isInterleavedBufferAttribute?e.data.updateRanges:e.updateRanges;if(n.bindBuffer(a,o.bufferGPU),l.length===0)n.bufferSubData(a,0,r);else{for(let u=0,c=l.length;u<c;u++){const A=l[u];n.bufferSubData(a,A.start*r.BYTES_PER_ELEMENT,r,A.start,A.count)}s.clearUpdateRanges()}n.bindBuffer(a,null),o.version=s.version}destroyAttribute(e){const t=this.backend,{gl:n}=t;e.isInterleavedBufferAttribute&&t.delete(e.data);const r=t.get(e);n.deleteBuffer(r.bufferGPU),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,{gl:n}=t,r=e.isInterleavedBufferAttribute?e.data:e,{bufferGPU:s}=t.get(r),o=e.array,a=o.byteLength;n.bindBuffer(n.COPY_READ_BUFFER,s);const l=n.createBuffer();n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.bufferData(n.COPY_WRITE_BUFFER,a,n.STREAM_READ),n.copyBufferSubData(n.COPY_READ_BUFFER,n.COPY_WRITE_BUFFER,0,0,a),await t.utils._clientWaitAsync();const u=new e.array.constructor(o.length);return n.bindBuffer(n.COPY_WRITE_BUFFER,l),n.getBufferSubData(n.COPY_WRITE_BUFFER,0,u),n.deleteBuffer(l),n.bindBuffer(n.COPY_READ_BUFFER,null),n.bindBuffer(n.COPY_WRITE_BUFFER,null),u.buffer}_createBuffer(e,t,n,r){const s=e.createBuffer();return e.bindBuffer(t,s),e.bufferData(t,n,r),e.bindBuffer(t,null),s}}let Hm,Eh;class uoe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.enabled={},this.currentFlipSided=null,this.currentCullFace=null,this.currentProgram=null,this.currentBlendingEnabled=!1,this.currentBlending=null,this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentPremultipledAlpha=null,this.currentPolygonOffsetFactor=null,this.currentPolygonOffsetUnits=null,this.currentColorMask=null,this.currentDepthFunc=null,this.currentDepthMask=null,this.currentStencilFunc=null,this.currentStencilRef=null,this.currentStencilFuncMask=null,this.currentStencilFail=null,this.currentStencilZFail=null,this.currentStencilZPass=null,this.currentStencilMask=null,this.currentLineWidth=null,this.currentClippingPlanes=0,this.currentVAO=null,this.currentIndex=null,this.currentBoundFramebuffers={},this.currentDrawbuffers=new WeakMap,this.maxTextures=this.gl.getParameter(this.gl.MAX_TEXTURE_IMAGE_UNITS),this.currentTextureSlot=null,this.currentBoundTextures={},this.currentBoundBufferBases={},this._init()}_init(){const e=this.gl;Hm={[Ds]:e.FUNC_ADD,[l9]:e.FUNC_SUBTRACT,[u9]:e.FUNC_REVERSE_SUBTRACT},Eh={[K0]:e.ZERO,[c9]:e.ONE,[h9]:e.SRC_COLOR,[M4]:e.SRC_ALPHA,[g9]:e.SRC_ALPHA_SATURATE,[p9]:e.DST_COLOR,[d9]:e.DST_ALPHA,[f9]:e.ONE_MINUS_SRC_COLOR,[E4]:e.ONE_MINUS_SRC_ALPHA,[m9]:e.ONE_MINUS_DST_COLOR,[A9]:e.ONE_MINUS_DST_ALPHA};const t=e.getParameter(e.SCISSOR_BOX),n=e.getParameter(e.VIEWPORT);this.currentScissor=new rn().fromArray(t),this.currentViewport=new rn().fromArray(n),this._tempVec4=new rn}enable(e){const{enabled:t}=this;t[e]!==!0&&(this.gl.enable(e),t[e]=!0)}disable(e){const{enabled:t}=this;t[e]!==!1&&(this.gl.disable(e),t[e]=!1)}setFlipSided(e){if(this.currentFlipSided!==e){const{gl:t}=this;e?t.frontFace(t.CW):t.frontFace(t.CCW),this.currentFlipSided=e}}setCullFace(e){const{gl:t}=this;e!==Gy?(this.enable(t.CULL_FACE),e!==this.currentCullFace&&(e===id?t.cullFace(t.BACK):e===qy?t.cullFace(t.FRONT):t.cullFace(t.FRONT_AND_BACK))):this.disable(t.CULL_FACE),this.currentCullFace=e}setLineWidth(e){const{currentLineWidth:t,gl:n}=this;e!==t&&(n.lineWidth(e),this.currentLineWidth=e)}setBlending(e,t,n,r,s,o,a,l){const{gl:u}=this;if(e===qo){this.currentBlendingEnabled===!0&&(this.disable(u.BLEND),this.currentBlendingEnabled=!1);return}if(this.currentBlendingEnabled===!1&&(this.enable(u.BLEND),this.currentBlendingEnabled=!0),e!==z2){if(e!==this.currentBlending||l!==this.currentPremultipledAlpha){if((this.currentBlendEquation!==Ds||this.currentBlendEquationAlpha!==Ds)&&(u.blendEquation(u.FUNC_ADD),this.currentBlendEquation=Ds,this.currentBlendEquationAlpha=Ds),l)switch(e){case Js:u.blendFuncSeparate(u.ONE,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case K2:u.blendFunc(u.ONE,u.ONE);break;case Z2:u.blendFuncSeparate(u.ZERO,u.ONE_MINUS_SRC_COLOR,u.ZERO,u.ONE);break;case J2:u.blendFuncSeparate(u.DST_COLOR,u.ONE_MINUS_SRC_ALPHA,u.ZERO,u.ONE);break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}else switch(e){case Js:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE_MINUS_SRC_ALPHA,u.ONE,u.ONE_MINUS_SRC_ALPHA);break;case K2:u.blendFuncSeparate(u.SRC_ALPHA,u.ONE,u.ONE,u.ONE);break;case Z2:console.error("THREE.WebGLState: SubtractiveBlending requires material.premultipliedAlpha = true");break;case J2:console.error("THREE.WebGLState: MultiplyBlending requires material.premultipliedAlpha = true");break;default:console.error("THREE.WebGLState: Invalid blending: ",e);break}this.currentBlendSrc=null,this.currentBlendDst=null,this.currentBlendSrcAlpha=null,this.currentBlendDstAlpha=null,this.currentBlending=e,this.currentPremultipledAlpha=l}return}s=s||t,o=o||n,a=a||r,(t!==this.currentBlendEquation||s!==this.currentBlendEquationAlpha)&&(u.blendEquationSeparate(Hm[t],Hm[s]),this.currentBlendEquation=t,this.currentBlendEquationAlpha=s),(n!==this.currentBlendSrc||r!==this.currentBlendDst||o!==this.currentBlendSrcAlpha||a!==this.currentBlendDstAlpha)&&(u.blendFuncSeparate(Eh[n],Eh[r],Eh[o],Eh[a]),this.currentBlendSrc=n,this.currentBlendDst=r,this.currentBlendSrcAlpha=o,this.currentBlendDstAlpha=a),this.currentBlending=e,this.currentPremultipledAlpha=!1}setColorMask(e){this.currentColorMask!==e&&(this.gl.colorMask(e,e,e,e),this.currentColorMask=e)}setDepthTest(e){const{gl:t}=this;e?this.enable(t.DEPTH_TEST):this.disable(t.DEPTH_TEST)}setDepthMask(e){this.currentDepthMask!==e&&(this.gl.depthMask(e),this.currentDepthMask=e)}setDepthFunc(e){if(this.currentDepthFunc!==e){const{gl:t}=this;switch(e){case R4:t.depthFunc(t.NEVER);break;case C4:t.depthFunc(t.ALWAYS);break;case P4:t.depthFunc(t.LESS);break;case e1:t.depthFunc(t.LEQUAL);break;case N4:t.depthFunc(t.EQUAL);break;case I4:t.depthFunc(t.GEQUAL);break;case L4:t.depthFunc(t.GREATER);break;case D4:t.depthFunc(t.NOTEQUAL);break;default:t.depthFunc(t.LEQUAL)}this.currentDepthFunc=e}}scissor(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentScissor.equals(s)===!1){const{gl:o}=this;o.scissor(s.x,s.y,s.z,s.w),this.currentScissor.copy(s)}}viewport(e,t,n,r){const s=this._tempVec4.set(e,t,n,r);if(this.currentViewport.equals(s)===!1){const{gl:o}=this;o.viewport(s.x,s.y,s.z,s.w),this.currentViewport.copy(s)}}setScissorTest(e){const t=this.gl;e?t.enable(t.SCISSOR_TEST):t.disable(t.SCISSOR_TEST)}setStencilTest(e){const{gl:t}=this;e?this.enable(t.STENCIL_TEST):this.disable(t.STENCIL_TEST)}setStencilMask(e){this.currentStencilMask!==e&&(this.gl.stencilMask(e),this.currentStencilMask=e)}setStencilFunc(e,t,n){(this.currentStencilFunc!==e||this.currentStencilRef!==t||this.currentStencilFuncMask!==n)&&(this.gl.stencilFunc(e,t,n),this.currentStencilFunc=e,this.currentStencilRef=t,this.currentStencilFuncMask=n)}setStencilOp(e,t,n){(this.currentStencilFail!==e||this.currentStencilZFail!==t||this.currentStencilZPass!==n)&&(this.gl.stencilOp(e,t,n),this.currentStencilFail=e,this.currentStencilZFail=t,this.currentStencilZPass=n)}setMaterial(e,t,n){const{gl:r}=this;e.side===Mr?this.disable(r.CULL_FACE):this.enable(r.CULL_FACE);let s=e.side===Bi;t&&(s=!s),this.setFlipSided(s),e.blending===Js&&e.transparent===!1?this.setBlending(qo):this.setBlending(e.blending,e.blendEquation,e.blendSrc,e.blendDst,e.blendEquationAlpha,e.blendSrcAlpha,e.blendDstAlpha,e.premultipliedAlpha),this.setDepthFunc(e.depthFunc),this.setDepthTest(e.depthTest),this.setDepthMask(e.depthWrite),this.setColorMask(e.colorWrite);const o=e.stencilWrite;if(this.setStencilTest(o),o&&(this.setStencilMask(e.stencilWriteMask),this.setStencilFunc(e.stencilFunc,e.stencilRef,e.stencilFuncMask),this.setStencilOp(e.stencilFail,e.stencilZFail,e.stencilZPass)),this.setPolygonOffset(e.polygonOffset,e.polygonOffsetFactor,e.polygonOffsetUnits),e.alphaToCoverage===!0&&this.backend.renderer.samples>1?this.enable(r.SAMPLE_ALPHA_TO_COVERAGE):this.disable(r.SAMPLE_ALPHA_TO_COVERAGE),n>0&&this.currentClippingPlanes!==n)for(let l=0;l<8;l++)l<n?this.enable(12288+l):this.disable(12288+l)}setPolygonOffset(e,t,n){const{gl:r}=this;e?(this.enable(r.POLYGON_OFFSET_FILL),(this.currentPolygonOffsetFactor!==t||this.currentPolygonOffsetUnits!==n)&&(r.polygonOffset(t,n),this.currentPolygonOffsetFactor=t,this.currentPolygonOffsetUnits=n)):this.disable(r.POLYGON_OFFSET_FILL)}useProgram(e){return this.currentProgram!==e?(this.gl.useProgram(e),this.currentProgram=e,!0):!1}setVertexState(e,t=null){const n=this.gl;return this.currentVAO!==e||this.currentIndex!==t?(n.bindVertexArray(e),t!==null&&n.bindBuffer(n.ELEMENT_ARRAY_BUFFER,t),this.currentVAO=e,this.currentIndex=t,!0):!1}resetVertexState(){const e=this.gl;e.bindVertexArray(null),e.bindBuffer(e.ELEMENT_ARRAY_BUFFER,null),this.currentVAO=null,this.currentIndex=null}bindFramebuffer(e,t){const{gl:n,currentBoundFramebuffers:r}=this;return r[e]!==t?(n.bindFramebuffer(e,t),r[e]=t,e===n.DRAW_FRAMEBUFFER&&(r[n.FRAMEBUFFER]=t),e===n.FRAMEBUFFER&&(r[n.DRAW_FRAMEBUFFER]=t),!0):!1}drawBuffers(e,t){const{gl:n}=this;let r=[],s=!1;if(e.textures!==null){r=this.currentDrawbuffers.get(t),r===void 0&&(r=[],this.currentDrawbuffers.set(t,r));const o=e.textures;if(r.length!==o.length||r[0]!==n.COLOR_ATTACHMENT0){for(let a=0,l=o.length;a<l;a++)r[a]=n.COLOR_ATTACHMENT0+a;r.length=o.length,s=!0}}else r[0]!==n.BACK&&(r[0]=n.BACK,s=!0);s&&n.drawBuffers(r)}activeTexture(e){const{gl:t,currentTextureSlot:n,maxTextures:r}=this;e===void 0&&(e=t.TEXTURE0+r-1),n!==e&&(t.activeTexture(e),this.currentTextureSlot=e)}bindTexture(e,t,n){const{gl:r,currentTextureSlot:s,currentBoundTextures:o,maxTextures:a}=this;n===void 0&&(s===null?n=r.TEXTURE0+a-1:n=s);let l=o[n];l===void 0&&(l={type:void 0,texture:void 0},o[n]=l),(l.type!==e||l.texture!==t)&&(s!==n&&(r.activeTexture(n),this.currentTextureSlot=n),r.bindTexture(e,t),l.type=e,l.texture=t)}bindBufferBase(e,t,n){const{gl:r}=this,s=`${e}-${t}`;return this.currentBoundBufferBases[s]!==n?(r.bindBufferBase(e,t,n),this.currentBoundBufferBases[s]=n,!0):!1}unbindTexture(){const{gl:e,currentTextureSlot:t,currentBoundTextures:n}=this,r=n[t];r!==void 0&&r.type!==void 0&&(e.bindTexture(r.type,null),r.type=void 0,r.texture=void 0)}}class coe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.extensions=e.extensions}convert(e,t=vo){const{gl:n,extensions:r}=this;let s;const o=Sn.getTransfer(t);if(e===ar)return n.UNSIGNED_BYTE;if(e===z8)return n.UNSIGNED_SHORT_4_4_4_4;if(e===G8)return n.UNSIGNED_SHORT_5_5_5_1;if(e===q8)return n.UNSIGNED_INT_5_9_9_9_REV;if(e===ou)return n.BYTE;if(e===au)return n.SHORT;if(e===qa)return n.UNSIGNED_SHORT;if(e===as)return n.INT;if(e===Oi)return n.UNSIGNED_INT;if(e===nr)return n.FLOAT;if(e===Yr)return n.HALF_FLOAT;if(e===v9)return n.ALPHA;if(e===l5)return n.RGB;if(e===Zi)return n.RGBA;if(e===Wo)return n.DEPTH_COMPONENT;if(e===jo)return n.DEPTH_STENCIL;if(e===Tc)return n.RED;if(e===gu)return n.RED_INTEGER;if(e===nl)return n.RG;if(e===wc)return n.RG_INTEGER;if(e===Mc)return n.RGBA_INTEGER;if(e===lu||e===jl||e===$l||e===Xl)if(o===qt)if(s=r.get("WEBGL_compressed_texture_s3tc_srgb"),s!==null){if(e===lu)return s.COMPRESSED_SRGB_S3TC_DXT1_EXT;if(e===jl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT;if(e===$l)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT;if(e===Xl)return s.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT}else return null;else if(s=r.get("WEBGL_compressed_texture_s3tc"),s!==null){if(e===lu)return s.COMPRESSED_RGB_S3TC_DXT1_EXT;if(e===jl)return s.COMPRESSED_RGBA_S3TC_DXT1_EXT;if(e===$l)return s.COMPRESSED_RGBA_S3TC_DXT3_EXT;if(e===Xl)return s.COMPRESSED_RGBA_S3TC_DXT5_EXT}else return null;if(e===B4||e===F4||e===U4||e===O4)if(s=r.get("WEBGL_compressed_texture_pvrtc"),s!==null){if(e===B4)return s.COMPRESSED_RGB_PVRTC_4BPPV1_IMG;if(e===F4)return s.COMPRESSED_RGB_PVRTC_2BPPV1_IMG;if(e===U4)return s.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG;if(e===O4)return s.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG}else return null;if(e===k4||e===ec||e===tc)if(s=r.get("WEBGL_compressed_texture_etc"),s!==null){if(e===k4||e===ec)return o===qt?s.COMPRESSED_SRGB8_ETC2:s.COMPRESSED_RGB8_ETC2;if(e===tc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC:s.COMPRESSED_RGBA8_ETC2_EAC}else return null;if(e===nc||e===ic||e===rc||e===sc||e===oc||e===ac||e===lc||e===uc||e===cc||e===hc||e===fc||e===dc||e===Ac||e===pc)if(s=r.get("WEBGL_compressed_texture_astc"),s!==null){if(e===nc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_4x4_KHR:s.COMPRESSED_RGBA_ASTC_4x4_KHR;if(e===ic)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x4_KHR:s.COMPRESSED_RGBA_ASTC_5x4_KHR;if(e===rc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_5x5_KHR:s.COMPRESSED_RGBA_ASTC_5x5_KHR;if(e===sc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x5_KHR:s.COMPRESSED_RGBA_ASTC_6x5_KHR;if(e===oc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_6x6_KHR:s.COMPRESSED_RGBA_ASTC_6x6_KHR;if(e===ac)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x5_KHR:s.COMPRESSED_RGBA_ASTC_8x5_KHR;if(e===lc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x6_KHR:s.COMPRESSED_RGBA_ASTC_8x6_KHR;if(e===uc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_8x8_KHR:s.COMPRESSED_RGBA_ASTC_8x8_KHR;if(e===cc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x5_KHR:s.COMPRESSED_RGBA_ASTC_10x5_KHR;if(e===hc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x6_KHR:s.COMPRESSED_RGBA_ASTC_10x6_KHR;if(e===fc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x8_KHR:s.COMPRESSED_RGBA_ASTC_10x8_KHR;if(e===dc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_10x10_KHR:s.COMPRESSED_RGBA_ASTC_10x10_KHR;if(e===Ac)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x10_KHR:s.COMPRESSED_RGBA_ASTC_12x10_KHR;if(e===pc)return o===qt?s.COMPRESSED_SRGB8_ALPHA8_ASTC_12x12_KHR:s.COMPRESSED_RGBA_ASTC_12x12_KHR}else return null;if(e===uu)if(s=r.get("EXT_texture_compression_bptc"),s!==null){if(e===uu)return o===qt?s.COMPRESSED_SRGB_ALPHA_BPTC_UNORM_EXT:s.COMPRESSED_RGBA_BPTC_UNORM_EXT}else return null;if(e===_9||e===V4||e===z4||e===G4)if(s=r.get("EXT_texture_compression_rgtc"),s!==null){if(e===uu)return s.COMPRESSED_RED_RGTC1_EXT;if(e===V4)return s.COMPRESSED_SIGNED_RED_RGTC1_EXT;if(e===z4)return s.COMPRESSED_RED_GREEN_RGTC2_EXT;if(e===G4)return s.COMPRESSED_SIGNED_RED_GREEN_RGTC2_EXT}else return null;return e===Ho?n.UNSIGNED_INT_24_8:n[e]!==void 0?n[e]:null}_clientWaitAsync(){const{gl:e}=this,t=e.fenceSync(e.SYNC_GPU_COMMANDS_COMPLETE,0);return e.flush(),new Promise((n,r)=>{function s(){const o=e.clientWaitSync(t,e.SYNC_FLUSH_COMMANDS_BIT,0);if(o===e.WAIT_FAILED){e.deleteSync(t),r();return}if(o===e.TIMEOUT_EXPIRED){requestAnimationFrame(s);return}e.deleteSync(t),n()}s()})}}let eM=!1,Tf,Wm,tM;class hoe{constructor(e){this.backend=e,this.gl=e.gl,this.extensions=e.extensions,this.defaultTextures={},eM===!1&&(this._init(),eM=!0)}_init(){const e=this.gl;Tf={[n1]:e.REPEAT,[xo]:e.CLAMP_TO_EDGE,[i1]:e.MIRRORED_REPEAT},Wm={[qi]:e.NEAREST,[V8]:e.NEAREST_MIPMAP_NEAREST,[R0]:e.NEAREST_MIPMAP_LINEAR,[Wi]:e.LINEAR,[su]:e.LINEAR_MIPMAP_NEAREST,[Fs]:e.LINEAR_MIPMAP_LINEAR},tM={[b9]:e.NEVER,[E9]:e.ALWAYS,[H8]:e.LESS,[W8]:e.LEQUAL,[S9]:e.EQUAL,[M9]:e.GEQUAL,[T9]:e.GREATER,[w9]:e.NOTEQUAL}}getGLTextureType(e){const{gl:t}=this;let n;return e.isCubeTexture===!0?n=t.TEXTURE_CUBE_MAP:e.isArrayTexture===!0||e.isDataArrayTexture===!0||e.isCompressedArrayTexture===!0?n=t.TEXTURE_2D_ARRAY:e.isData3DTexture===!0?n=t.TEXTURE_3D:n=t.TEXTURE_2D,n}getInternalFormat(e,t,n,r,s=!1){const{gl:o,extensions:a}=this;if(e!==null){if(o[e]!==void 0)return o[e];console.warn("THREE.WebGLRenderer: Attempt to use non-existing WebGL internal format '"+e+"'")}let l=t;if(t===o.RED&&(n===o.FLOAT&&(l=o.R32F),n===o.HALF_FLOAT&&(l=o.R16F),n===o.UNSIGNED_BYTE&&(l=o.R8),n===o.UNSIGNED_SHORT&&(l=o.R16),n===o.UNSIGNED_INT&&(l=o.R32UI),n===o.BYTE&&(l=o.R8I),n===o.SHORT&&(l=o.R16I),n===o.INT&&(l=o.R32I)),t===o.RED_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.R8UI),n===o.UNSIGNED_SHORT&&(l=o.R16UI),n===o.UNSIGNED_INT&&(l=o.R32UI),n===o.BYTE&&(l=o.R8I),n===o.SHORT&&(l=o.R16I),n===o.INT&&(l=o.R32I)),t===o.RG&&(n===o.FLOAT&&(l=o.RG32F),n===o.HALF_FLOAT&&(l=o.RG16F),n===o.UNSIGNED_BYTE&&(l=o.RG8),n===o.UNSIGNED_SHORT&&(l=o.RG16),n===o.UNSIGNED_INT&&(l=o.RG32UI),n===o.BYTE&&(l=o.RG8I),n===o.SHORT&&(l=o.RG16I),n===o.INT&&(l=o.RG32I)),t===o.RG_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RG8UI),n===o.UNSIGNED_SHORT&&(l=o.RG16UI),n===o.UNSIGNED_INT&&(l=o.RG32UI),n===o.BYTE&&(l=o.RG8I),n===o.SHORT&&(l=o.RG16I),n===o.INT&&(l=o.RG32I)),t===o.RGB){const u=s?mc:Sn.getTransfer(r);n===o.FLOAT&&(l=o.RGB32F),n===o.HALF_FLOAT&&(l=o.RGB16F),n===o.UNSIGNED_BYTE&&(l=o.RGB8),n===o.UNSIGNED_SHORT&&(l=o.RGB16),n===o.UNSIGNED_INT&&(l=o.RGB32UI),n===o.BYTE&&(l=o.RGB8I),n===o.SHORT&&(l=o.RGB16I),n===o.INT&&(l=o.RGB32I),n===o.UNSIGNED_BYTE&&(l=u===qt?o.SRGB8:o.RGB8),n===o.UNSIGNED_SHORT_5_6_5&&(l=o.RGB565),n===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1),n===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGB4),n===o.UNSIGNED_INT_5_9_9_9_REV&&(l=o.RGB9_E5)}if(t===o.RGB_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RGB8UI),n===o.UNSIGNED_SHORT&&(l=o.RGB16UI),n===o.UNSIGNED_INT&&(l=o.RGB32UI),n===o.BYTE&&(l=o.RGB8I),n===o.SHORT&&(l=o.RGB16I),n===o.INT&&(l=o.RGB32I)),t===o.RGBA){const u=s?mc:Sn.getTransfer(r);n===o.FLOAT&&(l=o.RGBA32F),n===o.HALF_FLOAT&&(l=o.RGBA16F),n===o.UNSIGNED_BYTE&&(l=o.RGBA8),n===o.UNSIGNED_SHORT&&(l=o.RGBA16),n===o.UNSIGNED_INT&&(l=o.RGBA32UI),n===o.BYTE&&(l=o.RGBA8I),n===o.SHORT&&(l=o.RGBA16I),n===o.INT&&(l=o.RGBA32I),n===o.UNSIGNED_BYTE&&(l=u===qt?o.SRGB8_ALPHA8:o.RGBA8),n===o.UNSIGNED_SHORT_4_4_4_4&&(l=o.RGBA4),n===o.UNSIGNED_SHORT_5_5_5_1&&(l=o.RGB5_A1)}return t===o.RGBA_INTEGER&&(n===o.UNSIGNED_BYTE&&(l=o.RGBA8UI),n===o.UNSIGNED_SHORT&&(l=o.RGBA16UI),n===o.UNSIGNED_INT&&(l=o.RGBA32UI),n===o.BYTE&&(l=o.RGBA8I),n===o.SHORT&&(l=o.RGBA16I),n===o.INT&&(l=o.RGBA32I)),t===o.DEPTH_COMPONENT&&(n===o.UNSIGNED_SHORT&&(l=o.DEPTH_COMPONENT16),n===o.UNSIGNED_INT&&(l=o.DEPTH_COMPONENT24),n===o.FLOAT&&(l=o.DEPTH_COMPONENT32F)),t===o.DEPTH_STENCIL&&n===o.UNSIGNED_INT_24_8&&(l=o.DEPTH24_STENCIL8),(l===o.R16F||l===o.R32F||l===o.RG16F||l===o.RG32F||l===o.RGBA16F||l===o.RGBA32F)&&a.get("EXT_color_buffer_float"),l}setTextureParameters(e,t){const{gl:n,extensions:r,backend:s}=this,o=Sn.getPrimaries(Sn.workingColorSpace),a=t.colorSpace===vo?null:Sn.getPrimaries(t.colorSpace),l=t.colorSpace===vo||o===a?n.NONE:n.BROWSER_DEFAULT_WEBGL;n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,t.flipY),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),n.pixelStorei(n.UNPACK_ALIGNMENT,t.unpackAlignment),n.pixelStorei(n.UNPACK_COLORSPACE_CONVERSION_WEBGL,l),n.texParameteri(e,n.TEXTURE_WRAP_S,Tf[t.wrapS]),n.texParameteri(e,n.TEXTURE_WRAP_T,Tf[t.wrapT]),(e===n.TEXTURE_3D||e===n.TEXTURE_2D_ARRAY)&&(t.isArrayTexture||n.texParameteri(e,n.TEXTURE_WRAP_R,Tf[t.wrapR])),n.texParameteri(e,n.TEXTURE_MAG_FILTER,Wm[t.magFilter]);const u=t.mipmaps!==void 0&&t.mipmaps.length>0,c=t.minFilter===Wi&&u?Fs:t.minFilter;if(n.texParameteri(e,n.TEXTURE_MIN_FILTER,Wm[c]),t.compareFunction&&(n.texParameteri(e,n.TEXTURE_COMPARE_MODE,n.COMPARE_REF_TO_TEXTURE),n.texParameteri(e,n.TEXTURE_COMPARE_FUNC,tM[t.compareFunction])),r.has("EXT_texture_filter_anisotropic")===!0){if(t.magFilter===qi||t.minFilter!==R0&&t.minFilter!==Fs||t.type===nr&&r.has("OES_texture_float_linear")===!1)return;if(t.anisotropy>1){const A=r.get("EXT_texture_filter_anisotropic");n.texParameterf(e,A.TEXTURE_MAX_ANISOTROPY_EXT,Math.min(t.anisotropy,s.getMaxAnisotropy()))}}}createDefaultTexture(e){const{gl:t,backend:n,defaultTextures:r}=this,s=this.getGLTextureType(e);let o=r[s];o===void 0&&(o=t.createTexture(),n.state.bindTexture(s,o),t.texParameteri(s,t.TEXTURE_MIN_FILTER,t.NEAREST),t.texParameteri(s,t.TEXTURE_MAG_FILTER,t.NEAREST),r[s]=o),n.set(e,{textureGPU:o,glTextureType:s,isDefault:!0})}createTexture(e,t){const{gl:n,backend:r}=this,{levels:s,width:o,height:a,depth:l}=t,u=r.utils.convert(e.format,e.colorSpace),c=r.utils.convert(e.type),A=this.getInternalFormat(e.internalFormat,u,c,e.colorSpace,e.isVideoTexture),m=n.createTexture(),_=this.getGLTextureType(e);r.state.bindTexture(_,m),this.setTextureParameters(_,e),e.isArrayTexture||e.isDataArrayTexture||e.isCompressedArrayTexture?n.texStorage3D(n.TEXTURE_2D_ARRAY,s,A,o,a,l):e.isData3DTexture?n.texStorage3D(n.TEXTURE_3D,s,A,o,a,l):e.isVideoTexture||n.texStorage2D(_,s,A,o,a),r.set(e,{textureGPU:m,glTextureType:_,glFormat:u,glType:c,glInternalFormat:A})}copyBufferToTexture(e,t){const{gl:n,backend:r}=this,{textureGPU:s,glTextureType:o,glFormat:a,glType:l}=r.get(t),{width:u,height:c}=t.source.data;n.bindBuffer(n.PIXEL_UNPACK_BUFFER,e),r.state.bindTexture(o,s),n.pixelStorei(n.UNPACK_FLIP_Y_WEBGL,!1),n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),n.texSubImage2D(o,0,0,0,u,c,a,l,0),n.bindBuffer(n.PIXEL_UNPACK_BUFFER,null),r.state.unbindTexture()}updateTexture(e,t){const{gl:n}=this,{width:r,height:s}=t,{textureGPU:o,glTextureType:a,glFormat:l,glType:u,glInternalFormat:c}=this.backend.get(e);if(!(e.isRenderTargetTexture||o===void 0))if(this.backend.state.bindTexture(a,o),this.setTextureParameters(a,e),e.isCompressedTexture){const A=e.mipmaps,m=t.image;for(let _=0;_<A.length;_++){const b=A[_];e.isCompressedArrayTexture?e.format!==n.RGBA?l!==null?n.compressedTexSubImage3D(n.TEXTURE_2D_ARRAY,_,0,0,0,b.width,b.height,m.depth,l,b.data):console.warn("THREE.WebGLRenderer: Attempt to load unsupported compressed texture format in .uploadTexture()"):n.texSubImage3D(n.TEXTURE_2D_ARRAY,_,0,0,0,b.width,b.height,m.depth,l,u,b.data):l!==null?n.compressedTexSubImage2D(n.TEXTURE_2D,_,0,0,b.width,b.height,l,b.data):console.warn("Unsupported compressed texture format")}}else if(e.isCubeTexture){const A=t.images;for(let m=0;m<6;m++){const _=nM(A[m]);n.texSubImage2D(n.TEXTURE_CUBE_MAP_POSITIVE_X+m,0,0,0,r,s,l,u,_)}}else if(e.isDataArrayTexture||e.isArrayTexture){const A=t.image;n.texSubImage3D(n.TEXTURE_2D_ARRAY,0,0,0,0,A.width,A.height,A.depth,l,u,A.data)}else if(e.isData3DTexture){const A=t.image;n.texSubImage3D(n.TEXTURE_3D,0,0,0,0,A.width,A.height,A.depth,l,u,A.data)}else if(e.isVideoTexture)e.update(),n.texImage2D(a,0,c,l,u,t.image);else{const A=nM(t.image);n.texSubImage2D(a,0,0,0,r,s,l,u,A)}}generateMipmaps(e){const{gl:t,backend:n}=this,{textureGPU:r,glTextureType:s}=n.get(e);n.state.bindTexture(s,r),t.generateMipmap(s)}deallocateRenderBuffers(e){const{gl:t,backend:n}=this;if(e){const r=n.get(e);if(r.renderBufferStorageSetup=void 0,r.framebuffers){for(const s in r.framebuffers)t.deleteFramebuffer(r.framebuffers[s]);delete r.framebuffers}if(r.depthRenderbuffer&&(t.deleteRenderbuffer(r.depthRenderbuffer),delete r.depthRenderbuffer),r.stencilRenderbuffer&&(t.deleteRenderbuffer(r.stencilRenderbuffer),delete r.stencilRenderbuffer),r.msaaFrameBuffer&&(t.deleteFramebuffer(r.msaaFrameBuffer),delete r.msaaFrameBuffer),r.msaaRenderbuffers){for(let s=0;s<r.msaaRenderbuffers.length;s++)t.deleteRenderbuffer(r.msaaRenderbuffers[s]);delete r.msaaRenderbuffers}}}destroyTexture(e){const{gl:t,backend:n}=this,{textureGPU:r,renderTarget:s}=n.get(e);this.deallocateRenderBuffers(s),t.deleteTexture(r),n.delete(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,o=0){const{gl:a,backend:l}=this,{state:u}=this.backend,{textureGPU:c,glTextureType:A,glType:m,glFormat:_}=l.get(t);u.bindTexture(A,c);let b,M,w,T,N,P,I,B,F;const O=e.isCompressedTexture?e.mipmaps[o]:e.image;if(n!==null)b=n.max.x-n.min.x,M=n.max.y-n.min.y,w=n.isBox3?n.max.z-n.min.z:1,T=n.min.x,N=n.min.y,P=n.isBox3?n.min.z:0;else{const ne=Math.pow(2,-s);b=Math.floor(O.width*ne),M=Math.floor(O.height*ne),e.isDataArrayTexture||e.isArrayTexture?w=O.depth:e.isData3DTexture?w=Math.floor(O.depth*ne):w=1,T=0,N=0,P=0}r!==null?(I=r.x,B=r.y,F=r.z):(I=0,B=0,F=0),a.pixelStorei(a.UNPACK_FLIP_Y_WEBGL,t.flipY),a.pixelStorei(a.UNPACK_PREMULTIPLY_ALPHA_WEBGL,t.premultiplyAlpha),a.pixelStorei(a.UNPACK_ALIGNMENT,t.unpackAlignment);const V=a.getParameter(a.UNPACK_ROW_LENGTH),U=a.getParameter(a.UNPACK_IMAGE_HEIGHT),z=a.getParameter(a.UNPACK_SKIP_PIXELS),H=a.getParameter(a.UNPACK_SKIP_ROWS),Q=a.getParameter(a.UNPACK_SKIP_IMAGES);a.pixelStorei(a.UNPACK_ROW_LENGTH,O.width),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,O.height),a.pixelStorei(a.UNPACK_SKIP_PIXELS,T),a.pixelStorei(a.UNPACK_SKIP_ROWS,N),a.pixelStorei(a.UNPACK_SKIP_IMAGES,P);const Y=t.isDataArrayTexture||t.isData3DTexture||t.isArrayTexture;if(e.isRenderTargetTexture||e.isDepthTexture){const ne=l.get(e),ee=l.get(t),se=l.get(ne.renderTarget),pe=l.get(ee.renderTarget),re=se.framebuffers[ne.cacheKey],de=pe.framebuffers[ee.cacheKey];u.bindFramebuffer(a.READ_FRAMEBUFFER,re),u.bindFramebuffer(a.DRAW_FRAMEBUFFER,de);let ye=a.COLOR_BUFFER_BIT;e.isDepthTexture&&(ye=a.DEPTH_BUFFER_BIT),a.blitFramebuffer(T,N,b,M,I,B,b,M,ye,a.NEAREST),u.bindFramebuffer(a.READ_FRAMEBUFFER,null),u.bindFramebuffer(a.DRAW_FRAMEBUFFER,null)}else Y?e.isDataTexture||e.isData3DTexture?a.texSubImage3D(A,o,I,B,F,b,M,w,_,m,O.data):t.isCompressedArrayTexture?a.compressedTexSubImage3D(A,o,I,B,F,b,M,w,_,O.data):a.texSubImage3D(A,o,I,B,F,b,M,w,_,m,O):e.isDataTexture?a.texSubImage2D(A,o,I,B,b,M,_,m,O.data):e.isCompressedTexture?a.compressedTexSubImage2D(A,o,I,B,O.width,O.height,_,O.data):a.texSubImage2D(A,o,I,B,b,M,_,m,O);a.pixelStorei(a.UNPACK_ROW_LENGTH,V),a.pixelStorei(a.UNPACK_IMAGE_HEIGHT,U),a.pixelStorei(a.UNPACK_SKIP_PIXELS,z),a.pixelStorei(a.UNPACK_SKIP_ROWS,H),a.pixelStorei(a.UNPACK_SKIP_IMAGES,Q),o===0&&t.generateMipmaps&&a.generateMipmap(A),u.unbindTexture()}copyFramebufferToTexture(e,t,n){const{gl:r}=this,{state:s}=this.backend,{textureGPU:o}=this.backend.get(e),{x:a,y:l,z:u,w:c}=n,A=e.isDepthTexture===!0||t.renderTarget&&t.renderTarget.samples>0,m=t.renderTarget?t.renderTarget.height:this.backend.getDrawingBufferSize().y;if(A){const _=a!==0||l!==0;let b,M;if(e.isDepthTexture===!0?(b=r.DEPTH_BUFFER_BIT,M=r.DEPTH_ATTACHMENT,t.stencil&&(b|=r.STENCIL_BUFFER_BIT)):(b=r.COLOR_BUFFER_BIT,M=r.COLOR_ATTACHMENT0),_){const w=this.backend.get(t.renderTarget),T=w.framebuffers[t.getCacheKey()],N=w.msaaFrameBuffer;s.bindFramebuffer(r.DRAW_FRAMEBUFFER,T),s.bindFramebuffer(r.READ_FRAMEBUFFER,N);const P=m-l-c;r.blitFramebuffer(a,P,a+u,P+c,a,P,a+u,P+c,b,r.NEAREST),s.bindFramebuffer(r.READ_FRAMEBUFFER,T),s.bindTexture(r.TEXTURE_2D,o),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,a,P,u,c),s.unbindTexture()}else{const w=r.createFramebuffer();s.bindFramebuffer(r.DRAW_FRAMEBUFFER,w),r.framebufferTexture2D(r.DRAW_FRAMEBUFFER,M,r.TEXTURE_2D,o,0),r.blitFramebuffer(0,0,u,c,0,0,u,c,b,r.NEAREST),r.deleteFramebuffer(w)}}else s.bindTexture(r.TEXTURE_2D,o),r.copyTexSubImage2D(r.TEXTURE_2D,0,0,0,a,m-c-l,u,c),s.unbindTexture();e.generateMipmaps&&this.generateMipmaps(e),this.backend._setFramebuffer(t)}setupRenderBufferStorage(e,t,n,r=!1){const{gl:s}=this,o=t.renderTarget,{depthTexture:a,depthBuffer:l,stencilBuffer:u,width:c,height:A}=o;if(s.bindRenderbuffer(s.RENDERBUFFER,e),l&&!u){let m=s.DEPTH_COMPONENT24;r===!0?this.extensions.get("WEBGL_multisampled_render_to_texture").renderbufferStorageMultisampleEXT(s.RENDERBUFFER,o.samples,m,c,A):n>0?(a&&a.isDepthTexture&&a.type===s.FLOAT&&(m=s.DEPTH_COMPONENT32F),s.renderbufferStorageMultisample(s.RENDERBUFFER,n,m,c,A)):s.renderbufferStorage(s.RENDERBUFFER,m,c,A),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_ATTACHMENT,s.RENDERBUFFER,e)}else l&&u&&(n>0?s.renderbufferStorageMultisample(s.RENDERBUFFER,n,s.DEPTH24_STENCIL8,c,A):s.renderbufferStorage(s.RENDERBUFFER,s.DEPTH_STENCIL,c,A),s.framebufferRenderbuffer(s.FRAMEBUFFER,s.DEPTH_STENCIL_ATTACHMENT,s.RENDERBUFFER,e));s.bindRenderbuffer(s.RENDERBUFFER,null)}async copyTextureToBuffer(e,t,n,r,s,o){const{backend:a,gl:l}=this,{textureGPU:u,glFormat:c,glType:A}=this.backend.get(e),m=l.createFramebuffer();l.bindFramebuffer(l.READ_FRAMEBUFFER,m);const _=e.isCubeTexture?l.TEXTURE_CUBE_MAP_POSITIVE_X+o:l.TEXTURE_2D;l.framebufferTexture2D(l.READ_FRAMEBUFFER,l.COLOR_ATTACHMENT0,_,u,0);const b=this._getTypedArrayType(A),M=this._getBytesPerTexel(A,c),T=r*s*M,N=l.createBuffer();l.bindBuffer(l.PIXEL_PACK_BUFFER,N),l.bufferData(l.PIXEL_PACK_BUFFER,T,l.STREAM_READ),l.readPixels(t,n,r,s,c,A,0),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),await a.utils._clientWaitAsync();const P=new b(T/b.BYTES_PER_ELEMENT);return l.bindBuffer(l.PIXEL_PACK_BUFFER,N),l.getBufferSubData(l.PIXEL_PACK_BUFFER,0,P),l.bindBuffer(l.PIXEL_PACK_BUFFER,null),l.deleteFramebuffer(m),P}_getTypedArrayType(e){const{gl:t}=this;if(e===t.UNSIGNED_BYTE)return Uint8Array;if(e===t.UNSIGNED_SHORT_4_4_4_4||e===t.UNSIGNED_SHORT_5_5_5_1||e===t.UNSIGNED_SHORT_5_6_5||e===t.UNSIGNED_SHORT)return Uint16Array;if(e===t.UNSIGNED_INT)return Uint32Array;if(e===t.HALF_FLOAT)return Uint16Array;if(e===t.FLOAT)return Float32Array;throw new Error(`Unsupported WebGL type: ${e}`)}_getBytesPerTexel(e,t){const{gl:n}=this;let r=0;if(e===n.UNSIGNED_BYTE&&(r=1),(e===n.UNSIGNED_SHORT_4_4_4_4||e===n.UNSIGNED_SHORT_5_5_5_1||e===n.UNSIGNED_SHORT_5_6_5||e===n.UNSIGNED_SHORT||e===n.HALF_FLOAT)&&(r=2),(e===n.UNSIGNED_INT||e===n.FLOAT)&&(r=4),t===n.RGBA)return r*4;if(t===n.RGB)return r*3;if(t===n.ALPHA)return r}}function nM(i){return i.isDataTexture?i.image.data:typeof HTMLImageElement<"u"&&i instanceof HTMLImageElement||typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement||typeof ImageBitmap<"u"&&i instanceof ImageBitmap||typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas?i:i.data}class foe{constructor(e){this.backend=e,this.gl=this.backend.gl,this.availableExtensions=this.gl.getSupportedExtensions(),this.extensions={}}get(e){let t=this.extensions[e];return t===void 0&&(t=this.gl.getExtension(e),this.extensions[e]=t),t}has(e){return this.availableExtensions.includes(e)}}class doe{constructor(e){this.backend=e,this.maxAnisotropy=null}getMaxAnisotropy(){if(this.maxAnisotropy!==null)return this.maxAnisotropy;const e=this.backend.gl,t=this.backend.extensions;if(t.has("EXT_texture_filter_anisotropic")===!0){const n=t.get("EXT_texture_filter_anisotropic");this.maxAnisotropy=e.getParameter(n.MAX_TEXTURE_MAX_ANISOTROPY_EXT)}else this.maxAnisotropy=0;return this.maxAnisotropy}}const iM={WEBGL_multi_draw:"WEBGL_multi_draw",WEBGL_compressed_texture_astc:"texture-compression-astc",WEBGL_compressed_texture_etc:"texture-compression-etc2",WEBGL_compressed_texture_etc1:"texture-compression-etc1",WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBKIT_WEBGL_compressed_texture_pvrtc:"texture-compression-pvrtc",WEBGL_compressed_texture_s3tc:"texture-compression-bc",EXT_texture_compression_bptc:"texture-compression-bptc",EXT_disjoint_timer_query_webgl2:"timestamp-query",OVR_multiview2:"OVR_multiview2"};class Aoe{constructor(e){this.gl=e.gl,this.extensions=e.extensions,this.info=e.renderer.info,this.mode=null,this.index=0,this.type=null,this.object=null}render(e,t){const{gl:n,mode:r,object:s,type:o,info:a,index:l}=this;l!==0?n.drawElements(r,t,o,e):n.drawArrays(r,e,t),a.update(s,t,1)}renderInstances(e,t,n){const{gl:r,mode:s,type:o,index:a,object:l,info:u}=this;n!==0&&(a!==0?r.drawElementsInstanced(s,t,o,e,n):r.drawArraysInstanced(s,e,t,n),u.update(l,t,n))}renderMultiDraw(e,t,n){const{extensions:r,mode:s,object:o,info:a}=this;if(n===0)return;const l=r.get("WEBGL_multi_draw");if(l===null)for(let u=0;u<n;u++)this.render(e[u],t[u]);else{this.index!==0?l.multiDrawElementsWEBGL(s,t,0,this.type,e,0,n):l.multiDrawArraysWEBGL(s,e,0,t,0,n);let u=0;for(let c=0;c<n;c++)u+=t[c];a.update(o,u,1)}}renderMultiDrawInstances(e,t,n,r){const{extensions:s,mode:o,object:a,info:l}=this;if(n===0)return;const u=s.get("WEBGL_multi_draw");if(u===null)for(let c=0;c<n;c++)this.renderInstances(e[c],t[c],r[c]);else{this.index!==0?u.multiDrawElementsInstancedWEBGL(o,t,0,this.type,e,0,r,0,n):u.multiDrawArraysInstancedWEBGL(o,e,0,t,0,r,0,n);let c=0;for(let A=0;A<n;A++)c+=t[A]*r[A];l.update(a,c,1)}}}class ED{constructor(e=256){this.trackTimestamp=!0,this.maxQueries=e,this.currentQueryIndex=0,this.queryOffsets=new Map,this.isDisposed=!1,this.lastValue=0,this.pendingResolve=!1}allocateQueriesForContext(){}async resolveQueriesAsync(){}dispose(){}}class poe extends ED{constructor(e,t,n=2048){if(super(n),this.gl=e,this.type=t,this.ext=e.getExtension("EXT_disjoint_timer_query_webgl2")||e.getExtension("EXT_disjoint_timer_query"),!this.ext){console.warn("EXT_disjoint_timer_query not supported; timestamps will be disabled."),this.trackTimestamp=!1;return}this.queries=[];for(let r=0;r<this.maxQueries;r++)this.queries.push(e.createQuery());this.activeQuery=null,this.queryStates=new Map}allocateQueriesForContext(e){if(!this.trackTimestamp)return null;if(this.currentQueryIndex+2>this.maxQueries)return $o(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryStates.set(t,"inactive"),this.queryOffsets.set(e.id,t),t}beginQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t==null||this.activeQuery!==null)return;const n=this.queries[t];if(n)try{this.queryStates.get(t)==="inactive"&&(this.gl.beginQuery(this.ext.TIME_ELAPSED_EXT,n),this.activeQuery=t,this.queryStates.set(t,"started"))}catch(r){console.error("Error in beginQuery:",r),this.activeQuery=null,this.queryStates.set(t,"inactive")}}endQuery(e){if(!this.trackTimestamp||this.isDisposed)return;const t=this.queryOffsets.get(e.id);if(t!=null&&this.activeQuery===t)try{this.gl.endQuery(this.ext.TIME_ELAPSED_EXT),this.queryStates.set(t,"ended"),this.activeQuery=null}catch(n){console.error("Error in endQuery:",n),this.queryStates.set(t,"inactive"),this.activeQuery=null}}async resolveQueriesAsync(){if(!this.trackTimestamp||this.pendingResolve)return this.lastValue;this.pendingResolve=!0;try{const e=[];for(const[r,s]of this.queryStates)if(s==="ended"){const o=this.queries[r];e.push(this.resolveQuery(o))}if(e.length===0)return this.lastValue;const n=(await Promise.all(e)).reduce((r,s)=>r+s,0);return this.lastValue=n,this.currentQueryIndex=0,this.queryOffsets.clear(),this.queryStates.clear(),this.activeQuery=null,n}catch(e){return console.error("Error resolving queries:",e),this.lastValue}finally{this.pendingResolve=!1}}async resolveQuery(e){return new Promise(t=>{if(this.isDisposed){t(this.lastValue);return}let n,r=!1;const s=()=>{n&&(clearTimeout(n),n=null)},o=l=>{r||(r=!0,s(),t(l))},a=()=>{if(this.isDisposed){o(this.lastValue);return}try{if(this.gl.getParameter(this.ext.GPU_DISJOINT_EXT)){o(this.lastValue);return}if(!this.gl.getQueryParameter(e,this.gl.QUERY_RESULT_AVAILABLE)){n=setTimeout(a,1);return}const c=this.gl.getQueryParameter(e,this.gl.QUERY_RESULT);t(Number(c)/1e6)}catch(l){console.error("Error checking query:",l),t(this.lastValue)}};a()})}dispose(){if(!this.isDisposed&&(this.isDisposed=!0,!!this.trackTimestamp)){for(const e of this.queries)this.gl.deleteQuery(e);this.queries=[],this.queryStates.clear(),this.queryOffsets.clear(),this.lastValue=0,this.activeQuery=null}}}class rM extends MD{constructor(e={}){super(e),this.isWebGLBackend=!0,this.attributeUtils=null,this.extensions=null,this.capabilities=null,this.textureUtils=null,this.bufferRenderer=null,this.gl=null,this.state=null,this.utils=null,this.vaoCache={},this.transformFeedbackCache={},this.discard=!1,this.disjoint=null,this.parallel=null,this._currentContext=null,this._knownBindings=new WeakSet,this._supportsInvalidateFramebuffer=typeof navigator>"u"?!1:/OculusBrowser/g.test(navigator.userAgent),this._xrFramebuffer=null}init(e){super.init(e);const t=this.parameters,n={antialias:e.samples>0,alpha:!0,depth:e.depth,stencil:e.stencil},r=t.context!==void 0?t.context:e.domElement.getContext("webgl2",n);function s(o){o.preventDefault();const a={api:"WebGL",message:o.statusMessage||"Unknown reason",reason:null,originalEvent:o};e.onDeviceLost(a)}this._onContextLost=s,e.domElement.addEventListener("webglcontextlost",s,!1),this.gl=r,this.extensions=new foe(this),this.capabilities=new doe(this),this.attributeUtils=new loe(this),this.textureUtils=new hoe(this),this.bufferRenderer=new Aoe(this),this.state=new uoe(this),this.utils=new coe(this),this.extensions.get("EXT_color_buffer_float"),this.extensions.get("WEBGL_clip_cull_distance"),this.extensions.get("OES_texture_float_linear"),this.extensions.get("EXT_color_buffer_half_float"),this.extensions.get("WEBGL_multisampled_render_to_texture"),this.extensions.get("WEBGL_render_shared_exponent"),this.extensions.get("WEBGL_multi_draw"),this.extensions.get("OVR_multiview2"),this.disjoint=this.extensions.get("EXT_disjoint_timer_query_webgl2"),this.parallel=this.extensions.get("KHR_parallel_shader_compile")}get coordinateSystem(){return bs}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}async waitForGPU(){await this.utils._clientWaitAsync()}async makeXRCompatible(){this.gl.getContextAttributes().xrCompatible!==!0&&await this.gl.makeXRCompatible()}setXRTarget(e){this._xrFramebuffer=e}setXRRenderTargetTextures(e,t,n=null){const r=this.gl;if(this.set(e.texture,{textureGPU:t,glInternalFormat:r.RGBA8}),n!==null){const s=e.stencilBuffer?r.DEPTH24_STENCIL8:r.DEPTH_COMPONENT24;this.set(e.depthTexture,{textureGPU:n,glInternalFormat:s}),this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer===!0&&e.multiview===!1&&console.warn("THREE.WebGLBackend: Render-to-texture extension was disabled because an external texture was provided"),e._autoAllocateDepthBuffer=!1}}initTimestampQuery(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t]||(this.timestampQueryPool[t]=new poe(this.gl,t,2048));const n=this.timestampQueryPool[t];n.allocateQueriesForContext(e)!==null&&n.beginQuery(e)}prepareTimestampBuffer(e){if(!this.disjoint||!this.trackTimestamp)return;const t=e.isComputeNode?"compute":"render";this.timestampQueryPool[t].endQuery(e)}getContext(){return this.gl}beginRender(e){const{state:t}=this,n=this.get(e);if(e.viewport)this.updateViewport(e);else{const{width:s,height:o}=this.getDrawingBufferSize();t.viewport(0,0,s,o)}if(e.scissor){const{x:s,y:o,width:a,height:l}=e.scissorValue;t.scissor(s,e.height-l-o,a,l)}this.initTimestampQuery(e),n.previousContext=this._currentContext,this._currentContext=e,this._setFramebuffer(e),this.clear(e.clearColor,e.clearDepth,e.clearStencil,e,!1);const r=e.occlusionQueryCount;r>0&&(n.currentOcclusionQueries=n.occlusionQueries,n.currentOcclusionQueryObjects=n.occlusionQueryObjects,n.lastOcclusionObject=null,n.occlusionQueries=new Array(r),n.occlusionQueryObjects=new Array(r),n.occlusionQueryIndex=0)}finishRender(e){const{gl:t,state:n}=this,r=this.get(e),s=r.previousContext;n.resetVertexState();const o=e.occlusionQueryCount;o>0&&(o>r.occlusionQueryIndex&&t.endQuery(t.ANY_SAMPLES_PASSED),this.resolveOccludedAsync(e));const a=e.textures;if(a!==null)for(let u=0;u<a.length;u++){const c=a[u];c.generateMipmaps&&this.generateMipmaps(c)}this._currentContext=s;const l=e.renderTarget;if(e.textures!==null&&l){const u=this.get(l);if(l.samples>0&&this._useMultisampledExtension(l)===!1){const c=u.framebuffers[e.getCacheKey()];let A=t.COLOR_BUFFER_BIT;l.resolveDepthBuffer&&(l.depthBuffer&&(A|=t.DEPTH_BUFFER_BIT),l.stencilBuffer&&l.resolveStencilBuffer&&(A|=t.STENCIL_BUFFER_BIT));const m=u.msaaFrameBuffer,_=u.msaaRenderbuffers,b=e.textures,M=b.length>1;if(n.bindFramebuffer(t.READ_FRAMEBUFFER,m),n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c),M)for(let w=0;w<b.length;w++)t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+w,t.RENDERBUFFER,null),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+w,t.TEXTURE_2D,null,0);for(let w=0;w<b.length;w++){if(M){const{textureGPU:T}=this.get(b[w]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.RENDERBUFFER,_[w]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,T,0)}if(e.scissor){const{x:T,y:N,width:P,height:I}=e.scissorValue,B=e.height-I-N;t.blitFramebuffer(T,B,T+P,B+I,T,B,T+P,B+I,A,t.NEAREST)}else t.blitFramebuffer(0,0,e.width,e.height,0,0,e.width,e.height,A,t.NEAREST)}if(M)for(let w=0;w<b.length;w++){const{textureGPU:T}=this.get(b[w]);t.framebufferRenderbuffer(t.READ_FRAMEBUFFER,t.COLOR_ATTACHMENT0+w,t.RENDERBUFFER,_[w]),t.framebufferTexture2D(t.DRAW_FRAMEBUFFER,t.COLOR_ATTACHMENT0+w,t.TEXTURE_2D,T,0)}this._supportsInvalidateFramebuffer===!0&&t.invalidateFramebuffer(t.READ_FRAMEBUFFER,u.invalidationArray)}else if(l.resolveDepthBuffer===!1&&u.framebuffers){const c=u.framebuffers[e.getCacheKey()];n.bindFramebuffer(t.DRAW_FRAMEBUFFER,c),t.invalidateFramebuffer(t.DRAW_FRAMEBUFFER,u.depthInvalidationArray)}}if(s!==null)if(this._setFramebuffer(s),s.viewport)this.updateViewport(s);else{const{width:u,height:c}=this.getDrawingBufferSize();n.viewport(0,0,u,c)}this.prepareTimestampBuffer(e)}resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueries:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet,{gl:o}=this;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueries=null;const a=()=>{let l=0;for(let u=0;u<n.length;u++){const c=n[u];c!==null&&o.getQueryParameter(c,o.QUERY_RESULT_AVAILABLE)&&(o.getQueryParameter(c,o.QUERY_RESULT)===0&&s.add(r[u]),n[u]=null,o.deleteQuery(c),l++)}l<n.length?requestAnimationFrame(a):t.occluded=s};a()}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}updateViewport(e){const{state:t}=this,{x:n,y:r,width:s,height:o}=e.viewportValue;t.viewport(n,e.height-o-r,s,o)}setScissorTest(e){this.state.setScissorTest(e)}getClearColor(){const e=super.getClearColor();return e.r*=e.a,e.g*=e.a,e.b*=e.a,e}clear(e,t,n,r=null,s=!0){const{gl:o,renderer:a}=this;r===null&&(r={textures:null,clearColorValue:this.getClearColor()});let l=0;if(e&&(l|=o.COLOR_BUFFER_BIT),t&&(l|=o.DEPTH_BUFFER_BIT),n&&(l|=o.STENCIL_BUFFER_BIT),l!==0){let u;r.clearColorValue?u=r.clearColorValue:u=this.getClearColor();const c=a.getClearDepth(),A=a.getClearStencil();if(t&&this.state.setDepthMask(!0),r.textures===null)o.clearColor(u.r,u.g,u.b,u.a),o.clear(l);else{if(s&&this._setFramebuffer(r),e)for(let m=0;m<r.textures.length;m++)m===0?o.clearBufferfv(o.COLOR,m,[u.r,u.g,u.b,u.a]):o.clearBufferfv(o.COLOR,m,[0,0,0,1]);t&&n?o.clearBufferfi(o.DEPTH_STENCIL,0,c,A):t?o.clearBufferfv(o.DEPTH,0,[c]):n&&o.clearBufferiv(o.STENCIL,0,[A])}}}beginCompute(e){const{state:t,gl:n}=this;t.bindFramebuffer(n.FRAMEBUFFER,null),this.initTimestampQuery(e)}compute(e,t,n,r,s=null){const{state:o,gl:a}=this;this.discard===!1&&(a.enable(a.RASTERIZER_DISCARD),this.discard=!0);const{programGPU:l,transformBuffers:u,attributes:c}=this.get(r),A=this._getVaoKey(c),m=this.vaoCache[A];m===void 0?this.vaoCache[A]=this._createVao(c):o.setVertexState(m),o.useProgram(l),this._bindUniforms(n);const _=this._getTransformFeedback(u);a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,_),a.beginTransformFeedback(a.POINTS),s=s!==null?s:t.count,Array.isArray(s)&&($o("WebGLBackend.compute(): The count parameter must be a single number, not an array."),s=s[0]),c[0].isStorageInstancedBufferAttribute?a.drawArraysInstanced(a.POINTS,0,1,s):a.drawArrays(a.POINTS,0,s),a.endTransformFeedback(),a.bindTransformFeedback(a.TRANSFORM_FEEDBACK,null);for(let b=0;b<u.length;b++){const M=u[b];M.pbo&&this.has(M.pbo)&&this.textureUtils.copyBufferToTexture(M.transformBuffer,M.pbo),M.switchBuffers()}}finishCompute(e){const t=this.gl;this.discard=!1,t.disable(t.RASTERIZER_DISCARD),this.prepareTimestampBuffer(e),this._currentContext&&this._setFramebuffer(this._currentContext)}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.isArrayTexture&&e.camera.isArrayCamera}draw(e){const{object:t,pipeline:n,material:r,context:s,hardwareClippingPlanes:o}=e,{programGPU:a}=this.get(n),{gl:l,state:u}=this,c=this.get(s),A=e.getDrawParameters();if(A===null)return;this._bindUniforms(e.getBindings());const m=t.isMesh&&t.matrixWorld.determinant()<0;u.setMaterial(r,m,o),u.useProgram(a);const _=e.getAttributes(),b=this.get(_);let M=b.vaoGPU;if(M===void 0){const V=this._getVaoKey(_);M=this.vaoCache[V],M===void 0&&(M=this._createVao(_),this.vaoCache[V]=M,b.vaoGPU=M)}const w=e.getIndex(),T=w!==null?this.get(w).bufferGPU:null;u.setVertexState(M,T);const N=c.lastOcclusionObject;if(N!==t&&N!==void 0){if(N!==null&&N.occlusionTest===!0&&(l.endQuery(l.ANY_SAMPLES_PASSED),c.occlusionQueryIndex++),t.occlusionTest===!0){const V=l.createQuery();l.beginQuery(l.ANY_SAMPLES_PASSED,V),c.occlusionQueries[c.occlusionQueryIndex]=V,c.occlusionQueryObjects[c.occlusionQueryIndex]=t}c.lastOcclusionObject=t}const P=this.bufferRenderer;t.isPoints?P.mode=l.POINTS:t.isLineSegments?P.mode=l.LINES:t.isLine?P.mode=l.LINE_STRIP:t.isLineLoop?P.mode=l.LINE_LOOP:r.wireframe===!0?(u.setLineWidth(r.wireframeLinewidth*this.renderer.getPixelRatio()),P.mode=l.LINES):P.mode=l.TRIANGLES;const{vertexCount:I,instanceCount:B}=A;let{firstVertex:F}=A;if(P.object=t,w!==null){F*=w.array.BYTES_PER_ELEMENT;const V=this.get(w);P.index=w.count,P.type=V.type}else P.index=0;const O=()=>{t.isBatchedMesh?t._multiDrawInstances!==null?($o("THREE.WebGLBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection."),P.renderMultiDrawInstances(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount,t._multiDrawInstances)):this.hasFeature("WEBGL_multi_draw")?P.renderMultiDraw(t._multiDrawStarts,t._multiDrawCounts,t._multiDrawCount):$o("THREE.WebGLRenderer: WEBGL_multi_draw not supported."):B>1?P.renderInstances(F,I,B):P.render(F,I)};if(e.camera.isArrayCamera===!0&&e.camera.cameras.length>0&&e.camera.isMultiViewCamera===!1){const V=this.get(e.camera),U=e.camera.cameras,z=e.getBindingGroup("cameraIndex").bindings[0];if(V.indexesGPU===void 0||V.indexesGPU.length!==U.length){const se=new Uint32Array([0,0,0,0]),pe=[];for(let re=0,de=U.length;re<de;re++){const ye=l.createBuffer();se[0]=re,l.bindBuffer(l.UNIFORM_BUFFER,ye),l.bufferData(l.UNIFORM_BUFFER,se,l.STATIC_DRAW),pe.push(ye)}V.indexesGPU=pe}const H=this.get(z),Q=this.renderer.getPixelRatio(),Y=this._currentContext.renderTarget,ne=this._isRenderCameraDepthArray(this._currentContext),ee=this._currentContext.activeCubeFace;if(ne){const se=this.get(Y.depthTexture);if(se.clearedRenderId!==this.renderer._nodes.nodeFrame.renderId){se.clearedRenderId=this.renderer._nodes.nodeFrame.renderId;const{stencilBuffer:pe}=Y;for(let re=0,de=U.length;re<de;re++)this.renderer._activeCubeFace=re,this._currentContext.activeCubeFace=re,this._setFramebuffer(this._currentContext),this.clear(!1,!0,pe,this._currentContext,!1);this.renderer._activeCubeFace=ee,this._currentContext.activeCubeFace=ee}}for(let se=0,pe=U.length;se<pe;se++){const re=U[se];if(t.layers.test(re.layers)){ne&&(this.renderer._activeCubeFace=se,this._currentContext.activeCubeFace=se,this._setFramebuffer(this._currentContext));const de=re.viewport;if(de!==void 0){const ye=de.x*Q,Pe=de.y*Q,Qe=de.width*Q,et=de.height*Q;u.viewport(Math.floor(ye),Math.floor(e.context.height-et-Pe),Math.floor(Qe),Math.floor(et))}u.bindBufferBase(l.UNIFORM_BUFFER,H.index,V.indexesGPU[se]),O()}this._currentContext.activeCubeFace=ee,this.renderer._activeCubeFace=ee}}else O()}needsRenderUpdate(){return!1}getRenderCacheKey(){return""}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,o)}createSampler(){}destroySampler(){}createNodeBuilder(e,t){return new soe(e,t)}createProgram(e){const t=this.gl,{stage:n,code:r}=e,s=n==="fragment"?t.createShader(t.FRAGMENT_SHADER):t.createShader(t.VERTEX_SHADER);t.shaderSource(s,r),t.compileShader(s),this.set(e,{shaderGPU:s})}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){const n=this.gl,r=e.pipeline,{fragmentProgram:s,vertexProgram:o}=r,a=n.createProgram(),l=this.get(s).shaderGPU,u=this.get(o).shaderGPU;if(n.attachShader(a,l),n.attachShader(a,u),n.linkProgram(a),this.set(r,{programGPU:a,fragmentShader:l,vertexShader:u}),t!==null&&this.parallel){const c=new Promise(A=>{const m=this.parallel,_=()=>{n.getProgramParameter(a,m.COMPLETION_STATUS_KHR)?(this._completeCompile(e,r),A()):requestAnimationFrame(_)};_()});t.push(c);return}this._completeCompile(e,r)}_handleSource(e,t){const n=e.split(`
`),r=[],s=Math.max(t-6,0),o=Math.min(t+6,n.length);for(let a=s;a<o;a++){const l=a+1;r.push(`${l===t?">":" "} ${l}: ${n[a]}`)}return r.join(`
`)}_getShaderErrors(e,t,n){const r=e.getShaderParameter(t,e.COMPILE_STATUS),o=(e.getShaderInfoLog(t)||"").trim();if(r&&o==="")return"";const a=/ERROR: 0:(\d+)/.exec(o);if(a){const l=parseInt(a[1]);return n.toUpperCase()+`

`+o+`

`+this._handleSource(e.getShaderSource(t),l)}else return o}_logProgramError(e,t,n){if(this.renderer.debug.checkShaderErrors){const r=this.gl,o=(r.getProgramInfoLog(e)||"").trim();if(r.getProgramParameter(e,r.LINK_STATUS)===!1)if(typeof this.renderer.debug.onShaderError=="function")this.renderer.debug.onShaderError(r,e,n,t);else{const a=this._getShaderErrors(r,n,"vertex"),l=this._getShaderErrors(r,t,"fragment");console.error("THREE.WebGLProgram: Shader Error "+r.getError()+" - VALIDATE_STATUS "+r.getProgramParameter(e,r.VALIDATE_STATUS)+`

Program Info Log: `+o+`
`+a+`
`+l)}else o!==""&&console.warn("THREE.WebGLProgram: Program Info Log:",o)}}_completeCompile(e,t){const{state:n,gl:r}=this,s=this.get(t),{programGPU:o,fragmentShader:a,vertexShader:l}=s;r.getProgramParameter(o,r.LINK_STATUS)===!1&&this._logProgramError(o,a,l),n.useProgram(o);const u=e.getBindings();this._setupBindings(u,o),this.set(t,{programGPU:o})}createComputePipeline(e,t){const{state:n,gl:r}=this,s={stage:"fragment",code:`#version 300 es
precision highp float;
void main() {}`};this.createProgram(s);const{computeProgram:o}=e,a=r.createProgram(),l=this.get(s).shaderGPU,u=this.get(o).shaderGPU,c=o.transforms,A=[],m=[];for(let w=0;w<c.length;w++){const T=c[w];A.push(T.varyingName),m.push(T.attributeNode)}r.attachShader(a,l),r.attachShader(a,u),r.transformFeedbackVaryings(a,A,r.SEPARATE_ATTRIBS),r.linkProgram(a),r.getProgramParameter(a,r.LINK_STATUS)===!1&&this._logProgramError(a,l,u),n.useProgram(a),this._setupBindings(t,a);const _=o.attributes,b=[],M=[];for(let w=0;w<_.length;w++){const T=_[w].node.attribute;b.push(T),this.has(T)||this.attributeUtils.createAttribute(T,r.ARRAY_BUFFER)}for(let w=0;w<m.length;w++){const T=m[w].attribute;this.has(T)||this.attributeUtils.createAttribute(T,r.ARRAY_BUFFER);const N=this.get(T);M.push(N)}this.set(e,{programGPU:a,transformBuffers:M,attributes:b})}createBindings(e,t){if(this._knownBindings.has(t)===!1){this._knownBindings.add(t);let n=0,r=0;for(const s of t){this.set(s,{textures:r,uniformBuffers:n});for(const o of s.bindings)o.isUniformBuffer&&n++,o.isSampledTexture&&r++}}this.updateBindings(e,t)}updateBindings(e){const{gl:t}=this,n=this.get(e);let r=n.uniformBuffers,s=n.textures;for(const o of e.bindings)if(o.isUniformsGroup||o.isUniformBuffer){const a=o.buffer,l=t.createBuffer();t.bindBuffer(t.UNIFORM_BUFFER,l),t.bufferData(t.UNIFORM_BUFFER,a,t.DYNAMIC_DRAW),this.set(o,{index:r++,bufferGPU:l})}else if(o.isSampledTexture){const{textureGPU:a,glTextureType:l}=this.get(o.texture);this.set(o,{index:s++,textureGPU:a,glTextureType:l})}}updateBinding(e){const t=this.gl;if(e.isUniformsGroup||e.isUniformBuffer){const r=this.get(e).bufferGPU,s=e.buffer;t.bindBuffer(t.UNIFORM_BUFFER,r),t.bufferData(t.UNIFORM_BUFFER,s,t.DYNAMIC_DRAW)}}createIndexAttribute(e){const t=this.gl;this.attributeUtils.createAttribute(e,t.ELEMENT_ARRAY_BUFFER)}createAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}createStorageAttribute(e){if(this.has(e))return;const t=this.gl;this.attributeUtils.createAttribute(e,t.ARRAY_BUFFER)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}hasFeature(e){const t=Object.keys(iM).filter(r=>iM[r]===e),n=this.extensions;for(let r=0;r<t.length;r++)if(n.has(t[r]))return!0;return!1}getMaxAnisotropy(){return this.capabilities.getMaxAnisotropy()}copyTextureToTexture(e,t,n=null,r=null,s=0,o=0){this.textureUtils.copyTextureToTexture(e,t,n,r,s,o)}copyFramebufferToTexture(e,t,n){this.textureUtils.copyFramebufferToTexture(e,t,n)}_setFramebuffer(e){const{gl:t,state:n}=this;let r=null;if(e.textures!==null){const s=e.renderTarget,o=this.get(s),{samples:a,depthBuffer:l,stencilBuffer:u}=s,c=s.isWebGLCubeRenderTarget===!0,A=s.isRenderTarget3D===!0,m=s.depth>1,_=s.isXRRenderTarget===!0,b=_===!0&&s._hasExternalTextures===!0;let M=o.msaaFrameBuffer,w=o.depthRenderbuffer;const T=this.extensions.get("WEBGL_multisampled_render_to_texture"),N=this.extensions.get("OVR_multiview2"),P=this._useMultisampledExtension(s),I=_L(e);let B;if(c?(o.cubeFramebuffers||(o.cubeFramebuffers={}),B=o.cubeFramebuffers[I]):_&&b===!1?B=this._xrFramebuffer:(o.framebuffers||(o.framebuffers={}),B=o.framebuffers[I]),B===void 0){B=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,B);const F=e.textures,O=[];if(c){o.cubeFramebuffers[I]=B;const{textureGPU:U}=this.get(F[0]),z=this.renderer._activeCubeFace;t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_CUBE_MAP_POSITIVE_X+z,U,0)}else{o.framebuffers[I]=B;for(let U=0;U<F.length;U++){const z=F[U],H=this.get(z);H.renderTarget=e.renderTarget,H.cacheKey=I;const Q=t.COLOR_ATTACHMENT0+U;if(s.multiview)N.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,Q,H.textureGPU,0,a,0,2);else if(A||m){const Y=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,Q,H.textureGPU,0,Y)}else P?T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,Q,t.TEXTURE_2D,H.textureGPU,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,Q,t.TEXTURE_2D,H.textureGPU,0)}}const V=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const U=t.createRenderbuffer();this.textureUtils.setupRenderBufferStorage(U,e,0,P),o.xrDepthRenderbuffer=U,O.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT),t.bindRenderbuffer(t.RENDERBUFFER,U),t.framebufferRenderbuffer(t.FRAMEBUFFER,V,t.RENDERBUFFER,U)}else if(e.depthTexture!==null){O.push(u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT);const U=this.get(e.depthTexture);if(U.renderTarget=e.renderTarget,U.cacheKey=I,s.multiview)N.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,V,U.textureGPU,0,a,0,2);else if(b&&P)T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,V,t.TEXTURE_2D,U.textureGPU,0,a);else if(e.depthTexture.isArrayTexture){const z=this.renderer._activeCubeFace;t.framebufferTextureLayer(t.FRAMEBUFFER,V,U.textureGPU,0,z)}else t.framebufferTexture2D(t.FRAMEBUFFER,V,t.TEXTURE_2D,U.textureGPU,0)}o.depthInvalidationArray=O}else{if(this._isRenderCameraDepthArray(e)){n.bindFramebuffer(t.FRAMEBUFFER,B);const O=this.renderer._activeCubeFace,V=this.get(e.depthTexture),U=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;t.framebufferTextureLayer(t.FRAMEBUFFER,U,V.textureGPU,0,O)}if((_||P||s.multiview)&&s._isOpaqueFramebuffer!==!0){n.bindFramebuffer(t.FRAMEBUFFER,B);const O=this.get(e.textures[0]);s.multiview?N.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,O.textureGPU,0,a,0,2):P?T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,O.textureGPU,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0,t.TEXTURE_2D,O.textureGPU,0);const V=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;if(s._autoAllocateDepthBuffer===!0){const U=o.xrDepthRenderbuffer;t.bindRenderbuffer(t.RENDERBUFFER,U),t.framebufferRenderbuffer(t.FRAMEBUFFER,V,t.RENDERBUFFER,U)}else{const U=this.get(e.depthTexture);s.multiview?N.framebufferTextureMultisampleMultiviewOVR(t.FRAMEBUFFER,V,U.textureGPU,0,a,0,2):P?T.framebufferTexture2DMultisampleEXT(t.FRAMEBUFFER,V,t.TEXTURE_2D,U.textureGPU,0,a):t.framebufferTexture2D(t.FRAMEBUFFER,V,t.TEXTURE_2D,U.textureGPU,0)}}}if(a>0&&P===!1&&!s.multiview){if(M===void 0){const F=[];M=t.createFramebuffer(),n.bindFramebuffer(t.FRAMEBUFFER,M);const O=[],V=e.textures;for(let U=0;U<V.length;U++){O[U]=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,O[U]),F.push(t.COLOR_ATTACHMENT0+U);const z=e.textures[U],H=this.get(z);t.renderbufferStorageMultisample(t.RENDERBUFFER,a,H.glInternalFormat,e.width,e.height),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.COLOR_ATTACHMENT0+U,t.RENDERBUFFER,O[U])}if(t.bindRenderbuffer(t.RENDERBUFFER,null),o.msaaFrameBuffer=M,o.msaaRenderbuffers=O,l&&w===void 0){w=t.createRenderbuffer(),this.textureUtils.setupRenderBufferStorage(w,e,a),o.depthRenderbuffer=w;const U=u?t.DEPTH_STENCIL_ATTACHMENT:t.DEPTH_ATTACHMENT;F.push(U)}o.invalidationArray=F}r=o.msaaFrameBuffer}else r=B;n.drawBuffers(e,B)}n.bindFramebuffer(t.FRAMEBUFFER,r)}_getVaoKey(e){let t="";for(let n=0;n<e.length;n++){const r=this.get(e[n]);t+=":"+r.id}return t}_createVao(e){const{gl:t}=this,n=t.createVertexArray();t.bindVertexArray(n);for(let r=0;r<e.length;r++){const s=e[r],o=this.get(s);t.bindBuffer(t.ARRAY_BUFFER,o.bufferGPU),t.enableVertexAttribArray(r);let a,l;s.isInterleavedBufferAttribute===!0?(a=s.data.stride*o.bytesPerElement,l=s.offset*o.bytesPerElement):(a=0,l=0),o.isInteger?t.vertexAttribIPointer(r,s.itemSize,o.type,a,l):t.vertexAttribPointer(r,s.itemSize,o.type,s.normalized,a,l),s.isInstancedBufferAttribute&&!s.isInterleavedBufferAttribute?t.vertexAttribDivisor(r,s.meshPerAttribute):s.isInterleavedBufferAttribute&&s.data.isInstancedInterleavedBuffer&&t.vertexAttribDivisor(r,s.data.meshPerAttribute)}return t.bindBuffer(t.ARRAY_BUFFER,null),n}_getTransformFeedback(e){let t="";for(let s=0;s<e.length;s++)t+=":"+e[s].id;let n=this.transformFeedbackCache[t];if(n!==void 0)return n;const{gl:r}=this;n=r.createTransformFeedback(),r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,n);for(let s=0;s<e.length;s++){const o=e[s];r.bindBufferBase(r.TRANSFORM_FEEDBACK_BUFFER,s,o.transformBuffer)}return r.bindTransformFeedback(r.TRANSFORM_FEEDBACK,null),this.transformFeedbackCache[t]=n,n}_setupBindings(e,t){const n=this.gl;for(const r of e)for(const s of r.bindings){const a=this.get(s).index;if(s.isUniformsGroup||s.isUniformBuffer){const l=n.getUniformBlockIndex(t,s.name);n.uniformBlockBinding(t,l,a)}else if(s.isSampledTexture){const l=n.getUniformLocation(t,s.name);n.uniform1i(l,a)}}}_bindUniforms(e){const{gl:t,state:n}=this;for(const r of e)for(const s of r.bindings){const o=this.get(s),a=o.index;s.isUniformsGroup||s.isUniformBuffer?n.bindBufferBase(t.UNIFORM_BUFFER,a,o.bufferGPU):s.isSampledTexture&&n.bindTexture(o.glTextureType,o.textureGPU,t.TEXTURE0+a)}}_useMultisampledExtension(e){return e.multiview===!0?!0:e.samples>0&&this.extensions.has("WEBGL_multisampled_render_to_texture")===!0&&e._autoAllocateDepthBuffer!==!1}dispose(){const e=this.extensions.get("WEBGL_lose_context");e&&e.loseContext(),this.renderer.domElement.removeEventListener("webglcontextlost",this._onContextLost)}}const m4={PointList:"point-list",LineList:"line-list",LineStrip:"line-strip",TriangleList:"triangle-list",TriangleStrip:"triangle-strip"},Ps={Never:"never",Less:"less",Equal:"equal",LessEqual:"less-equal",Greater:"greater",NotEqual:"not-equal",GreaterEqual:"greater-equal",Always:"always"},fo={Store:"store"},Ci={Load:"load",Clear:"clear"},jm={CCW:"ccw"},$m={None:"none",Front:"front",Back:"back"},i5={Uint16:"uint16",Uint32:"uint32"},xe={R8Unorm:"r8unorm",R8Snorm:"r8snorm",R8Uint:"r8uint",R8Sint:"r8sint",R16Uint:"r16uint",R16Sint:"r16sint",R16Float:"r16float",RG8Unorm:"rg8unorm",RG8Snorm:"rg8snorm",RG8Uint:"rg8uint",RG8Sint:"rg8sint",R32Uint:"r32uint",R32Sint:"r32sint",R32Float:"r32float",RG16Uint:"rg16uint",RG16Sint:"rg16sint",RG16Float:"rg16float",RGBA8Unorm:"rgba8unorm",RGBA8UnormSRGB:"rgba8unorm-srgb",RGBA8Snorm:"rgba8snorm",RGBA8Uint:"rgba8uint",RGBA8Sint:"rgba8sint",BGRA8Unorm:"bgra8unorm",BGRA8UnormSRGB:"bgra8unorm-srgb",RGB9E5UFloat:"rgb9e5ufloat",RGB10A2Unorm:"rgb10a2unorm",RG11B10UFloat:"rgb10a2unorm",RG32Uint:"rg32uint",RG32Sint:"rg32sint",RG32Float:"rg32float",RGBA16Uint:"rgba16uint",RGBA16Sint:"rgba16sint",RGBA16Float:"rgba16float",RGBA32Uint:"rgba32uint",RGBA32Sint:"rgba32sint",RGBA32Float:"rgba32float",Depth16Unorm:"depth16unorm",Depth24Plus:"depth24plus",Depth24PlusStencil8:"depth24plus-stencil8",Depth32Float:"depth32float",Depth32FloatStencil8:"depth32float-stencil8",BC1RGBAUnorm:"bc1-rgba-unorm",BC1RGBAUnormSRGB:"bc1-rgba-unorm-srgb",BC2RGBAUnorm:"bc2-rgba-unorm",BC2RGBAUnormSRGB:"bc2-rgba-unorm-srgb",BC3RGBAUnorm:"bc3-rgba-unorm",BC3RGBAUnormSRGB:"bc3-rgba-unorm-srgb",BC4RUnorm:"bc4-r-unorm",BC4RSnorm:"bc4-r-snorm",BC5RGUnorm:"bc5-rg-unorm",BC5RGSnorm:"bc5-rg-snorm",BC6HRGBUFloat:"bc6h-rgb-ufloat",BC6HRGBFloat:"bc6h-rgb-float",BC7RGBAUnorm:"bc7-rgba-unorm",BC7RGBAUnormSRGB:"bc7-rgba-srgb",ETC2RGB8Unorm:"etc2-rgb8unorm",ETC2RGB8UnormSRGB:"etc2-rgb8unorm-srgb",ETC2RGB8A1Unorm:"etc2-rgb8a1unorm",ETC2RGB8A1UnormSRGB:"etc2-rgb8a1unorm-srgb",ETC2RGBA8Unorm:"etc2-rgba8unorm",ETC2RGBA8UnormSRGB:"etc2-rgba8unorm-srgb",EACR11Unorm:"eac-r11unorm",EACR11Snorm:"eac-r11snorm",EACRG11Unorm:"eac-rg11unorm",EACRG11Snorm:"eac-rg11snorm",ASTC4x4Unorm:"astc-4x4-unorm",ASTC4x4UnormSRGB:"astc-4x4-unorm-srgb",ASTC5x4Unorm:"astc-5x4-unorm",ASTC5x4UnormSRGB:"astc-5x4-unorm-srgb",ASTC5x5Unorm:"astc-5x5-unorm",ASTC5x5UnormSRGB:"astc-5x5-unorm-srgb",ASTC6x5Unorm:"astc-6x5-unorm",ASTC6x5UnormSRGB:"astc-6x5-unorm-srgb",ASTC6x6Unorm:"astc-6x6-unorm",ASTC6x6UnormSRGB:"astc-6x6-unorm-srgb",ASTC8x5Unorm:"astc-8x5-unorm",ASTC8x5UnormSRGB:"astc-8x5-unorm-srgb",ASTC8x6Unorm:"astc-8x6-unorm",ASTC8x6UnormSRGB:"astc-8x6-unorm-srgb",ASTC8x8Unorm:"astc-8x8-unorm",ASTC8x8UnormSRGB:"astc-8x8-unorm-srgb",ASTC10x5Unorm:"astc-10x5-unorm",ASTC10x5UnormSRGB:"astc-10x5-unorm-srgb",ASTC10x6Unorm:"astc-10x6-unorm",ASTC10x6UnormSRGB:"astc-10x6-unorm-srgb",ASTC10x8Unorm:"astc-10x8-unorm",ASTC10x8UnormSRGB:"astc-10x8-unorm-srgb",ASTC10x10Unorm:"astc-10x10-unorm",ASTC10x10UnormSRGB:"astc-10x10-unorm-srgb",ASTC12x10Unorm:"astc-12x10-unorm",ASTC12x10UnormSRGB:"astc-12x10-unorm-srgb",ASTC12x12Unorm:"astc-12x12-unorm",ASTC12x12UnormSRGB:"astc-12x12-unorm-srgb"},Xm={ClampToEdge:"clamp-to-edge",Repeat:"repeat",MirrorRepeat:"mirror-repeat"},P2={Linear:"linear",Nearest:"nearest"},di={Zero:"zero",One:"one",Src:"src",OneMinusSrc:"one-minus-src",SrcAlpha:"src-alpha",OneMinusSrcAlpha:"one-minus-src-alpha",Dst:"dst",OneMinusDst:"one-minus-dst",DstAlpha:"dst-alpha",OneMinusDstAlpha:"one-minus-dst-alpha",SrcAlphaSaturated:"src-alpha-saturated",Constant:"constant",OneMinusConstant:"one-minus-constant"},_2={Add:"add",Subtract:"subtract",ReverseSubtract:"reverse-subtract",Min:"min",Max:"max"},sM={None:0,All:15},$1={Keep:"keep",Zero:"zero",Replace:"replace",Invert:"invert",IncrementClamp:"increment-clamp",DecrementClamp:"decrement-clamp",IncrementWrap:"increment-wrap",DecrementWrap:"decrement-wrap"},Qm={Storage:"storage",ReadOnlyStorage:"read-only-storage"},Ym={WriteOnly:"write-only",ReadOnly:"read-only",ReadWrite:"read-write"},oM={NonFiltering:"non-filtering",Comparison:"comparison"},x2={Float:"float",UnfilterableFloat:"unfilterable-float",Depth:"depth",SInt:"sint",UInt:"uint"},aM={TwoD:"2d",ThreeD:"3d"},$r={TwoD:"2d",TwoDArray:"2d-array",Cube:"cube",ThreeD:"3d"},moe={All:"all"},wf={Vertex:"vertex",Instance:"instance"},Iy={CoreFeaturesAndLimits:"core-features-and-limits",DepthClipControl:"depth-clip-control",Depth32FloatStencil8:"depth32float-stencil8",TextureCompressionBC:"texture-compression-bc",TextureCompressionBCSliced3D:"texture-compression-bc-sliced-3d",TextureCompressionETC2:"texture-compression-etc2",TextureCompressionASTC:"texture-compression-astc",TextureCompressionASTCSliced3D:"texture-compression-astc-sliced-3d",TimestampQuery:"timestamp-query",IndirectFirstInstance:"indirect-first-instance",ShaderF16:"shader-f16",RG11B10UFloat:"rg11b10ufloat-renderable",BGRA8UNormStorage:"bgra8unorm-storage",Float32Filterable:"float32-filterable",Float32Blendable:"float32-blendable",ClipDistances:"clip-distances",DualSourceBlending:"dual-source-blending",Subgroups:"subgroups",TextureFormatsTier1:"texture-formats-tier1",TextureFormatsTier2:"texture-formats-tier2"};class goe extends TD{constructor(e,t,n){super(e,t?t.value:null),this.textureNode=t,this.groupNode=n}update(){this.texture=this.textureNode.value}}class yoe extends _D{constructor(e,t){super(e,t?t.array:null),this.attribute=t,this.isStorageBuffer=!0}}let voe=0;class _oe extends yoe{constructor(e,t){super("StorageBuffer_"+voe++,e?e.value:null),this.nodeUniform=e,this.access=e?e.access:Us.READ_WRITE,this.groupNode=t}get buffer(){return this.nodeUniform.value}}class xoe extends wu{constructor(e){super(),this.device=e;const t=`
struct VarysStruct {
	@builtin( position ) Position: vec4<f32>,
	@location( 0 ) vTex : vec2<f32>
};

@vertex
fn main( @builtin( vertex_index ) vertexIndex : u32 ) -> VarysStruct {

	var Varys : VarysStruct;

	var pos = array< vec2<f32>, 4 >(
		vec2<f32>( -1.0,  1.0 ),
		vec2<f32>(  1.0,  1.0 ),
		vec2<f32>( -1.0, -1.0 ),
		vec2<f32>(  1.0, -1.0 )
	);

	var tex = array< vec2<f32>, 4 >(
		vec2<f32>( 0.0, 0.0 ),
		vec2<f32>( 1.0, 0.0 ),
		vec2<f32>( 0.0, 1.0 ),
		vec2<f32>( 1.0, 1.0 )
	);

	Varys.vTex = tex[ vertexIndex ];
	Varys.Position = vec4<f32>( pos[ vertexIndex ], 0.0, 1.0 );

	return Varys;

}
`,n=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vTex );

}
`,r=`
@group( 0 ) @binding( 0 )
var imgSampler : sampler;

@group( 0 ) @binding( 1 )
var img : texture_2d<f32>;

@fragment
fn main( @location( 0 ) vTex : vec2<f32> ) -> @location( 0 ) vec4<f32> {

	return textureSample( img, imgSampler, vec2( vTex.x, 1.0 - vTex.y ) );

}
`;this.mipmapSampler=e.createSampler({minFilter:P2.Linear}),this.flipYSampler=e.createSampler({minFilter:P2.Nearest}),this.transferPipelines={},this.flipYPipelines={},this.mipmapVertexShaderModule=e.createShaderModule({label:"mipmapVertex",code:t}),this.mipmapFragmentShaderModule=e.createShaderModule({label:"mipmapFragment",code:n}),this.flipYFragmentShaderModule=e.createShaderModule({label:"flipYFragment",code:r})}getTransferPipeline(e){let t=this.transferPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`mipmap-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.mipmapFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:m4.TriangleStrip,stripIndexFormat:i5.Uint32},layout:"auto"}),this.transferPipelines[e]=t),t}getFlipYPipeline(e){let t=this.flipYPipelines[e];return t===void 0&&(t=this.device.createRenderPipeline({label:`flipY-${e}`,vertex:{module:this.mipmapVertexShaderModule,entryPoint:"main"},fragment:{module:this.flipYFragmentShaderModule,entryPoint:"main",targets:[{format:e}]},primitive:{topology:m4.TriangleStrip,stripIndexFormat:i5.Uint32},layout:"auto"}),this.flipYPipelines[e]=t),t}flipY(e,t,n=0){const r=t.format,{width:s,height:o}=t.size,a=this.getTransferPipeline(r),l=this.getFlipYPipeline(r),u=this.device.createTexture({size:{width:s,height:o,depthOrArrayLayers:1},format:r,usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.TEXTURE_BINDING}),c=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:$r.TwoD,baseArrayLayer:n}),A=u.createView({baseMipLevel:0,mipLevelCount:1,dimension:$r.TwoD,baseArrayLayer:0}),m=this.device.createCommandEncoder({}),_=(b,M,w)=>{const T=b.getBindGroupLayout(0),N=this.device.createBindGroup({layout:T,entries:[{binding:0,resource:this.flipYSampler},{binding:1,resource:M}]}),P=m.beginRenderPass({colorAttachments:[{view:w,loadOp:Ci.Clear,storeOp:fo.Store,clearValue:[0,0,0,0]}]});P.setPipeline(b),P.setBindGroup(0,N),P.draw(4,1,0,0),P.end()};_(a,c,A),_(l,A,c),this.device.queue.submit([m.finish()]),u.destroy()}generateMipmaps(e,t,n=0){const r=this.get(e);r.useCount===void 0&&(r.useCount=0,r.layers=[]);const s=r.layers[n]||this._mipmapCreateBundles(e,t,n),o=this.device.createCommandEncoder({});this._mipmapRunBundles(o,s),this.device.queue.submit([o.finish()]),r.useCount!==0&&(r.layers[n]=s),r.useCount++}_mipmapCreateBundles(e,t,n){const r=this.getTransferPipeline(t.format),s=r.getBindGroupLayout(0);let o=e.createView({baseMipLevel:0,mipLevelCount:1,dimension:$r.TwoD,baseArrayLayer:n});const a=[];for(let l=1;l<t.mipLevelCount;l++){const u=this.device.createBindGroup({layout:s,entries:[{binding:0,resource:this.mipmapSampler},{binding:1,resource:o}]}),c=e.createView({baseMipLevel:l,mipLevelCount:1,dimension:$r.TwoD,baseArrayLayer:n}),A={colorAttachments:[{view:c,loadOp:Ci.Clear,storeOp:fo.Store,clearValue:[0,0,0,0]}]},m=this.device.createRenderBundleEncoder({colorFormats:[t.format]});m.setPipeline(r),m.setBindGroup(0,u),m.draw(4,1,0,0),a.push({renderBundles:[m.finish()],passDescriptor:A}),o=c}return a}_mipmapRunBundles(e,t){const n=t.length;for(let r=0;r<n;r++){const s=t[r],o=e.beginRenderPass(s.passDescriptor);o.executeBundles(s.renderBundles),o.end()}}}const boe={[b9]:"never",[H8]:"less",[S9]:"equal",[W8]:"less-equal",[T9]:"greater",[M9]:"greater-equal",[E9]:"always",[w9]:"not-equal"},Soe=[0,1,3,2,4,5];class Toe{constructor(e){this.backend=e,this._passUtils=null,this.defaultTexture={},this.defaultCubeTexture={},this.defaultVideoFrame=null,this.colorBuffer=null,this.depthTexture=new Qo,this.depthTexture.name="depthBuffer"}createSampler(e){const t=this.backend,n=t.device,r=t.get(e),s={addressModeU:this._convertAddressMode(e.wrapS),addressModeV:this._convertAddressMode(e.wrapT),addressModeW:this._convertAddressMode(e.wrapR),magFilter:this._convertFilterMode(e.magFilter),minFilter:this._convertFilterMode(e.minFilter),mipmapFilter:this._convertFilterMode(e.minFilter),maxAnisotropy:1};s.magFilter===P2.Linear&&s.minFilter===P2.Linear&&s.mipmapFilter===P2.Linear&&(s.maxAnisotropy=e.anisotropy),e.isDepthTexture&&e.compareFunction!==null&&(s.compare=boe[e.compareFunction]),r.sampler=n.createSampler(s)}createDefaultTexture(e){let t;const n=Ly(e);e.isCubeTexture?t=this._getDefaultCubeTextureGPU(n):t=this._getDefaultTextureGPU(n),this.backend.get(e).texture=t}createTexture(e,t={}){const n=this.backend,r=n.get(e);if(r.initialized)throw new Error("WebGPUTextureUtils: Texture already initialized.");t.needsMipmaps===void 0&&(t.needsMipmaps=!1),t.levels===void 0&&(t.levels=1),t.depth===void 0&&(t.depth=1);const{width:s,height:o,depth:a,levels:l}=t;e.isFramebufferTexture&&(t.renderTarget?t.format=this.backend.utils.getCurrentColorFormat(t.renderTarget):t.format=this.backend.utils.getPreferredCanvasFormat());const u=this._getDimension(e),c=e.internalFormat||t.format||Ly(e,n.device);r.format=c;const{samples:A,primarySamples:m,isMSAA:_}=n.utils.getTextureSampleData(e);let b=GPUTextureUsage.TEXTURE_BINDING|GPUTextureUsage.COPY_DST|GPUTextureUsage.COPY_SRC;e.isStorageTexture===!0&&(b|=GPUTextureUsage.STORAGE_BINDING),e.isCompressedTexture!==!0&&e.isCompressedArrayTexture!==!0&&(b|=GPUTextureUsage.RENDER_ATTACHMENT);const M={label:e.name,size:{width:s,height:o,depthOrArrayLayers:a},mipLevelCount:l,sampleCount:m,dimension:u,format:c,usage:b};if(c===void 0){console.warn("WebGPURenderer: Texture format not supported."),this.createDefaultTexture(e);return}if(e.isCubeTexture&&(M.textureBindingViewDimension=$r.Cube),r.texture=n.device.createTexture(M),_){const w=Object.assign({},M);w.label=w.label+"-msaa",w.sampleCount=A,r.msaaTexture=n.device.createTexture(w)}r.initialized=!0,r.textureDescriptorGPU=M}destroyTexture(e){const t=this.backend,n=t.get(e);n.texture!==void 0&&n.texture.destroy(),n.msaaTexture!==void 0&&n.msaaTexture.destroy(),t.delete(e)}destroySampler(e){const n=this.backend.get(e);delete n.sampler}generateMipmaps(e){const t=this.backend.get(e);if(e.isCubeTexture)for(let n=0;n<6;n++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,n);else{const n=e.image.depth||1;for(let r=0;r<n;r++)this._generateMipmaps(t.texture,t.textureDescriptorGPU,r)}}getColorBuffer(){this.colorBuffer&&this.colorBuffer.destroy();const e=this.backend,{width:t,height:n}=e.getDrawingBufferSize();return this.colorBuffer=e.device.createTexture({label:"colorBuffer",size:{width:t,height:n,depthOrArrayLayers:1},sampleCount:e.utils.getSampleCount(e.renderer.samples),format:e.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC}),this.colorBuffer}getDepthBuffer(e=!0,t=!1){const n=this.backend,{width:r,height:s}=n.getDrawingBufferSize(),o=this.depthTexture,a=n.get(o).texture;let l,u;if(t?(l=jo,u=Ho):e&&(l=Wo,u=Oi),a!==void 0){if(o.image.width===r&&o.image.height===s&&o.format===l&&o.type===u)return a;this.destroyTexture(o)}return o.name="depthBuffer",o.format=l,o.type=u,o.image.width=r,o.image.height=s,this.createTexture(o,{width:r,height:s}),n.get(o).texture}updateTexture(e,t){const n=this.backend.get(e),{textureDescriptorGPU:r}=n;if(!(e.isRenderTargetTexture||r===void 0)){if(e.isDataTexture)this._copyBufferToTexture(t.image,n.texture,r,0,e.flipY);else if(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)for(let s=0;s<t.image.depth;s++)this._copyBufferToTexture(t.image,n.texture,r,s,e.flipY,s);else e.isCompressedTexture||e.isCompressedArrayTexture?this._copyCompressedBufferToTexture(e.mipmaps,n.texture,r):e.isCubeTexture?this._copyCubeMapToTexture(t.images,n.texture,r,e.flipY,e.premultiplyAlpha):this._copyImageToTexture(t.image,n.texture,r,0,e.flipY,e.premultiplyAlpha);n.version=e.version,e.onUpdate&&e.onUpdate(e)}}async copyTextureToBuffer(e,t,n,r,s,o){const a=this.backend.device,l=this.backend.get(e),u=l.texture,c=l.textureDescriptorGPU.format,A=this._getBytesPerTexel(c);let m=r*A;m=Math.ceil(m/256)*256;const _=a.createBuffer({size:r*s*A,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),b=a.createCommandEncoder();b.copyTextureToBuffer({texture:u,origin:{x:t,y:n,z:o}},{buffer:_,bytesPerRow:m},{width:r,height:s});const M=this._getTypedArrayType(c);a.queue.submit([b.finish()]),await _.mapAsync(GPUMapMode.READ);const w=_.getMappedRange();return new M(w)}_getDefaultTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new ur;n.minFilter=qi,n.magFilter=qi,this.createTexture(n,{width:1,height:1,format:e}),this.defaultTexture[e]=t=n}return this.backend.get(t).texture}_getDefaultCubeTextureGPU(e){let t=this.defaultTexture[e];if(t===void 0){const n=new vu;n.minFilter=qi,n.magFilter=qi,this.createTexture(n,{width:1,height:1,depth:6}),this.defaultCubeTexture[e]=t=n}return this.backend.get(t).texture}_copyCubeMapToTexture(e,t,n,r,s){for(let o=0;o<6;o++){const a=e[o],l=r===!0?Soe[o]:o;a.isDataTexture?this._copyBufferToTexture(a.image,t,n,l,r):this._copyImageToTexture(a,t,n,l,r,s)}}_copyImageToTexture(e,t,n,r,s,o){this.backend.device.queue.copyExternalImageToTexture({source:e,flipY:s},{texture:t,mipLevel:0,origin:{x:0,y:0,z:r},premultipliedAlpha:o},{width:n.size.width,height:n.size.height,depthOrArrayLayers:1})}_getPassUtils(){let e=this._passUtils;return e===null&&(this._passUtils=e=new xoe(this.backend.device)),e}_generateMipmaps(e,t,n=0){this._getPassUtils().generateMipmaps(e,t,n)}_flipY(e,t,n=0){this._getPassUtils().flipY(e,t,n)}_copyBufferToTexture(e,t,n,r,s,o=0){const a=this.backend.device,l=e.data,u=this._getBytesPerTexel(n.format),c=e.width*u;a.queue.writeTexture({texture:t,mipLevel:0,origin:{x:0,y:0,z:r}},l,{offset:e.width*e.height*u*o,bytesPerRow:c},{width:e.width,height:e.height,depthOrArrayLayers:1}),s===!0&&this._flipY(t,n,r)}_copyCompressedBufferToTexture(e,t,n){const r=this.backend.device,s=this._getBlockData(n.format),o=n.size.depthOrArrayLayers>1;for(let a=0;a<e.length;a++){const l=e[a],u=l.width,c=l.height,A=o?n.size.depthOrArrayLayers:1,m=Math.ceil(u/s.width)*s.byteLength,_=m*Math.ceil(c/s.height);for(let b=0;b<A;b++)r.queue.writeTexture({texture:t,mipLevel:a,origin:{x:0,y:0,z:b}},l.data,{offset:b*_,bytesPerRow:m,rowsPerImage:Math.ceil(c/s.height)},{width:Math.ceil(u/s.width)*s.width,height:Math.ceil(c/s.height)*s.height,depthOrArrayLayers:1})}}_getBlockData(e){if(e===xe.BC1RGBAUnorm||e===xe.BC1RGBAUnormSRGB)return{byteLength:8,width:4,height:4};if(e===xe.BC2RGBAUnorm||e===xe.BC2RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.BC3RGBAUnorm||e===xe.BC3RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.BC4RUnorm||e===xe.BC4RSnorm)return{byteLength:8,width:4,height:4};if(e===xe.BC5RGUnorm||e===xe.BC5RGSnorm)return{byteLength:16,width:4,height:4};if(e===xe.BC6HRGBUFloat||e===xe.BC6HRGBFloat)return{byteLength:16,width:4,height:4};if(e===xe.BC7RGBAUnorm||e===xe.BC7RGBAUnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.ETC2RGB8Unorm||e===xe.ETC2RGB8UnormSRGB)return{byteLength:8,width:4,height:4};if(e===xe.ETC2RGB8A1Unorm||e===xe.ETC2RGB8A1UnormSRGB)return{byteLength:8,width:4,height:4};if(e===xe.ETC2RGBA8Unorm||e===xe.ETC2RGBA8UnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.EACR11Unorm)return{byteLength:8,width:4,height:4};if(e===xe.EACR11Snorm)return{byteLength:8,width:4,height:4};if(e===xe.EACRG11Unorm)return{byteLength:16,width:4,height:4};if(e===xe.EACRG11Snorm)return{byteLength:16,width:4,height:4};if(e===xe.ASTC4x4Unorm||e===xe.ASTC4x4UnormSRGB)return{byteLength:16,width:4,height:4};if(e===xe.ASTC5x4Unorm||e===xe.ASTC5x4UnormSRGB)return{byteLength:16,width:5,height:4};if(e===xe.ASTC5x5Unorm||e===xe.ASTC5x5UnormSRGB)return{byteLength:16,width:5,height:5};if(e===xe.ASTC6x5Unorm||e===xe.ASTC6x5UnormSRGB)return{byteLength:16,width:6,height:5};if(e===xe.ASTC6x6Unorm||e===xe.ASTC6x6UnormSRGB)return{byteLength:16,width:6,height:6};if(e===xe.ASTC8x5Unorm||e===xe.ASTC8x5UnormSRGB)return{byteLength:16,width:8,height:5};if(e===xe.ASTC8x6Unorm||e===xe.ASTC8x6UnormSRGB)return{byteLength:16,width:8,height:6};if(e===xe.ASTC8x8Unorm||e===xe.ASTC8x8UnormSRGB)return{byteLength:16,width:8,height:8};if(e===xe.ASTC10x5Unorm||e===xe.ASTC10x5UnormSRGB)return{byteLength:16,width:10,height:5};if(e===xe.ASTC10x6Unorm||e===xe.ASTC10x6UnormSRGB)return{byteLength:16,width:10,height:6};if(e===xe.ASTC10x8Unorm||e===xe.ASTC10x8UnormSRGB)return{byteLength:16,width:10,height:8};if(e===xe.ASTC10x10Unorm||e===xe.ASTC10x10UnormSRGB)return{byteLength:16,width:10,height:10};if(e===xe.ASTC12x10Unorm||e===xe.ASTC12x10UnormSRGB)return{byteLength:16,width:12,height:10};if(e===xe.ASTC12x12Unorm||e===xe.ASTC12x12UnormSRGB)return{byteLength:16,width:12,height:12}}_convertAddressMode(e){let t=Xm.ClampToEdge;return e===n1?t=Xm.Repeat:e===i1&&(t=Xm.MirrorRepeat),t}_convertFilterMode(e){let t=P2.Linear;return(e===qi||e===V8||e===R0)&&(t=P2.Nearest),t}_getBytesPerTexel(e){if(e===xe.R8Unorm||e===xe.R8Snorm||e===xe.R8Uint||e===xe.R8Sint)return 1;if(e===xe.R16Uint||e===xe.R16Sint||e===xe.R16Float||e===xe.RG8Unorm||e===xe.RG8Snorm||e===xe.RG8Uint||e===xe.RG8Sint)return 2;if(e===xe.R32Uint||e===xe.R32Sint||e===xe.R32Float||e===xe.RG16Uint||e===xe.RG16Sint||e===xe.RG16Float||e===xe.RGBA8Unorm||e===xe.RGBA8UnormSRGB||e===xe.RGBA8Snorm||e===xe.RGBA8Uint||e===xe.RGBA8Sint||e===xe.BGRA8Unorm||e===xe.BGRA8UnormSRGB||e===xe.RGB9E5UFloat||e===xe.RGB10A2Unorm||e===xe.RG11B10UFloat||e===xe.Depth32Float||e===xe.Depth24Plus||e===xe.Depth24PlusStencil8||e===xe.Depth32FloatStencil8)return 4;if(e===xe.RG32Uint||e===xe.RG32Sint||e===xe.RG32Float||e===xe.RGBA16Uint||e===xe.RGBA16Sint||e===xe.RGBA16Float)return 8;if(e===xe.RGBA32Uint||e===xe.RGBA32Sint||e===xe.RGBA32Float)return 16}_getTypedArrayType(e){if(e===xe.R8Uint)return Uint8Array;if(e===xe.R8Sint)return Int8Array;if(e===xe.R8Unorm)return Uint8Array;if(e===xe.R8Snorm)return Int8Array;if(e===xe.RG8Uint)return Uint8Array;if(e===xe.RG8Sint)return Int8Array;if(e===xe.RG8Unorm)return Uint8Array;if(e===xe.RG8Snorm)return Int8Array;if(e===xe.RGBA8Uint)return Uint8Array;if(e===xe.RGBA8Sint)return Int8Array;if(e===xe.RGBA8Unorm)return Uint8Array;if(e===xe.RGBA8Snorm)return Int8Array;if(e===xe.R16Uint)return Uint16Array;if(e===xe.R16Sint)return Int16Array;if(e===xe.RG16Uint)return Uint16Array;if(e===xe.RG16Sint)return Int16Array;if(e===xe.RGBA16Uint)return Uint16Array;if(e===xe.RGBA16Sint)return Int16Array;if(e===xe.R16Float||e===xe.RG16Float||e===xe.RGBA16Float)return Uint16Array;if(e===xe.R32Uint)return Uint32Array;if(e===xe.R32Sint)return Int32Array;if(e===xe.R32Float)return Float32Array;if(e===xe.RG32Uint)return Uint32Array;if(e===xe.RG32Sint)return Int32Array;if(e===xe.RG32Float)return Float32Array;if(e===xe.RGBA32Uint)return Uint32Array;if(e===xe.RGBA32Sint)return Int32Array;if(e===xe.RGBA32Float)return Float32Array;if(e===xe.BGRA8Unorm||e===xe.BGRA8UnormSRGB)return Uint8Array;if(e===xe.RGB10A2Unorm||e===xe.RGB9E5UFloat||e===xe.RG11B10UFloat)return Uint32Array;if(e===xe.Depth32Float)return Float32Array;if(e===xe.Depth24Plus||e===xe.Depth24PlusStencil8)return Uint32Array;if(e===xe.Depth32FloatStencil8)return Float32Array}_getDimension(e){let t;return e.is3DTexture||e.isData3DTexture?t=aM.ThreeD:t=aM.TwoD,t}}function Ly(i,e=null){const t=i.format,n=i.type,r=i.colorSpace,s=Sn.getTransfer(r);let o;if(i.isCompressedTexture===!0||i.isCompressedArrayTexture===!0)switch(t){case jl:o=s===qt?xe.BC1RGBAUnormSRGB:xe.BC1RGBAUnorm;break;case $l:o=s===qt?xe.BC2RGBAUnormSRGB:xe.BC2RGBAUnorm;break;case Xl:o=s===qt?xe.BC3RGBAUnormSRGB:xe.BC3RGBAUnorm;break;case ec:o=s===qt?xe.ETC2RGB8UnormSRGB:xe.ETC2RGB8Unorm;break;case tc:o=s===qt?xe.ETC2RGBA8UnormSRGB:xe.ETC2RGBA8Unorm;break;case nc:o=s===qt?xe.ASTC4x4UnormSRGB:xe.ASTC4x4Unorm;break;case ic:o=s===qt?xe.ASTC5x4UnormSRGB:xe.ASTC5x4Unorm;break;case rc:o=s===qt?xe.ASTC5x5UnormSRGB:xe.ASTC5x5Unorm;break;case sc:o=s===qt?xe.ASTC6x5UnormSRGB:xe.ASTC6x5Unorm;break;case oc:o=s===qt?xe.ASTC6x6UnormSRGB:xe.ASTC6x6Unorm;break;case ac:o=s===qt?xe.ASTC8x5UnormSRGB:xe.ASTC8x5Unorm;break;case lc:o=s===qt?xe.ASTC8x6UnormSRGB:xe.ASTC8x6Unorm;break;case uc:o=s===qt?xe.ASTC8x8UnormSRGB:xe.ASTC8x8Unorm;break;case cc:o=s===qt?xe.ASTC10x5UnormSRGB:xe.ASTC10x5Unorm;break;case hc:o=s===qt?xe.ASTC10x6UnormSRGB:xe.ASTC10x6Unorm;break;case fc:o=s===qt?xe.ASTC10x8UnormSRGB:xe.ASTC10x8Unorm;break;case dc:o=s===qt?xe.ASTC10x10UnormSRGB:xe.ASTC10x10Unorm;break;case Ac:o=s===qt?xe.ASTC12x10UnormSRGB:xe.ASTC12x10Unorm;break;case pc:o=s===qt?xe.ASTC12x12UnormSRGB:xe.ASTC12x12Unorm;break;case Zi:o=s===qt?xe.RGBA8UnormSRGB:xe.RGBA8Unorm;break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}else switch(t){case Zi:switch(n){case ou:o=xe.RGBA8Snorm;break;case au:o=xe.RGBA16Sint;break;case qa:o=xe.RGBA16Uint;break;case Oi:o=xe.RGBA32Uint;break;case as:o=xe.RGBA32Sint;break;case ar:o=s===qt?xe.RGBA8UnormSRGB:xe.RGBA8Unorm;break;case Yr:o=xe.RGBA16Float;break;case nr:o=xe.RGBA32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAFormat.",n)}break;case l5:switch(n){case q8:o=xe.RGB9E5UFloat;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBFormat.",n)}break;case Tc:switch(n){case ou:o=xe.R8Snorm;break;case au:o=xe.R16Sint;break;case qa:o=xe.R16Uint;break;case Oi:o=xe.R32Uint;break;case as:o=xe.R32Sint;break;case ar:o=xe.R8Unorm;break;case Yr:o=xe.R16Float;break;case nr:o=xe.R32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RedFormat.",n)}break;case nl:switch(n){case ou:o=xe.RG8Snorm;break;case au:o=xe.RG16Sint;break;case qa:o=xe.RG16Uint;break;case Oi:o=xe.RG32Uint;break;case as:o=xe.RG32Sint;break;case ar:o=xe.RG8Unorm;break;case Yr:o=xe.RG16Float;break;case nr:o=xe.RG32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with RGFormat.",n)}break;case Wo:switch(n){case qa:o=xe.Depth16Unorm;break;case Oi:o=xe.Depth24Plus;break;case nr:o=xe.Depth32Float;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthFormat.",n)}break;case jo:switch(n){case Ho:o=xe.Depth24PlusStencil8;break;case nr:e&&e.features.has(Iy.Depth32FloatStencil8)===!1&&console.error('WebGPURenderer: Depth textures with DepthStencilFormat + FloatType can only be used with the "depth32float-stencil8" GPU feature.'),o=xe.Depth32FloatStencil8;break;default:console.error("WebGPURenderer: Unsupported texture type with DepthStencilFormat.",n)}break;case gu:switch(n){case as:o=xe.R32Sint;break;case Oi:o=xe.R32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RedIntegerFormat.",n)}break;case wc:switch(n){case as:o=xe.RG32Sint;break;case Oi:o=xe.RG32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGIntegerFormat.",n)}break;case Mc:switch(n){case as:o=xe.RGBA32Sint;break;case Oi:o=xe.RGBA32Uint;break;default:console.error("WebGPURenderer: Unsupported texture type with RGBAIntegerFormat.",n)}break;default:console.error("WebGPURenderer: Unsupported texture format.",t)}return o}const woe=/^[fn]*\s*([a-z_0-9]+)?\s*\(([\s\S]*?)\)\s*[\-\>]*\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/i,Moe=/([a-z_0-9]+)\s*:\s*([a-z_0-9]+(?:<[\s\S]+?>)?)/ig,lM={f32:"float",i32:"int",u32:"uint",bool:"bool","vec2<f32>":"vec2","vec2<i32>":"ivec2","vec2<u32>":"uvec2","vec2<bool>":"bvec2",vec2f:"vec2",vec2i:"ivec2",vec2u:"uvec2",vec2b:"bvec2","vec3<f32>":"vec3","vec3<i32>":"ivec3","vec3<u32>":"uvec3","vec3<bool>":"bvec3",vec3f:"vec3",vec3i:"ivec3",vec3u:"uvec3",vec3b:"bvec3","vec4<f32>":"vec4","vec4<i32>":"ivec4","vec4<u32>":"uvec4","vec4<bool>":"bvec4",vec4f:"vec4",vec4i:"ivec4",vec4u:"uvec4",vec4b:"bvec4","mat2x2<f32>":"mat2",mat2x2f:"mat2","mat3x3<f32>":"mat3",mat3x3f:"mat3","mat4x4<f32>":"mat4",mat4x4f:"mat4",sampler:"sampler",texture_1d:"texture",texture_2d:"texture",texture_2d_array:"texture",texture_multisampled_2d:"cubeTexture",texture_depth_2d:"depthTexture",texture_depth_2d_array:"depthTexture",texture_depth_multisampled_2d:"depthTexture",texture_depth_cube:"depthTexture",texture_depth_cube_array:"depthTexture",texture_3d:"texture3D",texture_cube:"cubeTexture",texture_cube_array:"cubeTexture",texture_storage_1d:"storageTexture",texture_storage_2d:"storageTexture",texture_storage_2d_array:"storageTexture",texture_storage_3d:"storageTexture"},Eoe=i=>{i=i.trim();const e=i.match(woe);if(e!==null&&e.length===4){const t=e[2],n=[];let r=null;for(;(r=Moe.exec(t))!==null;)n.push({name:r[1],type:r[2]});const s=[];for(let c=0;c<n.length;c++){const{name:A,type:m}=n[c];let _=m;_.startsWith("ptr")?_="pointer":(_.startsWith("texture")&&(_=m.split("<")[0]),_=lM[_]),s.push(new wx(_,A))}const o=i.substring(e[0].length),a=e[3]||"void",l=e[1]!==void 0?e[1]:"";return{type:lM[a]||a,inputs:s,name:l,inputsCode:t,blockCode:o,outputType:a}}else throw new Error("FunctionNode: Function is not a WGSL code.")};class Roe extends Ex{constructor(e){const{type:t,inputs:n,name:r,inputsCode:s,blockCode:o,outputType:a}=Eoe(e);super(t,n,r),this.inputsCode=s,this.blockCode=o,this.outputType=a}getCode(e=this.name){const t=this.outputType!=="void"?"-> "+this.outputType:"";return`fn ${e} ( ${this.inputsCode.trim()} ) ${t}`+this.blockCode}}class Coe extends gD{parseFunction(e){return new Roe(e)}}const K3=typeof self<"u"?self.GPUShaderStage:{VERTEX:1,FRAGMENT:2,COMPUTE:4},Poe={[Us.READ_ONLY]:"read",[Us.WRITE_ONLY]:"write",[Us.READ_WRITE]:"read_write"},uM={[n1]:"repeat",[xo]:"clamp",[i1]:"mirror"},Mf={vertex:K3?K3.VERTEX:1,fragment:K3?K3.FRAGMENT:2,compute:K3?K3.COMPUTE:4},cM={instance:!0,swizzleAssign:!1,storageBuffer:!0},Noe={"^^":"tsl_xor"},Ioe={float:"f32",int:"i32",uint:"u32",bool:"bool",color:"vec3<f32>",vec2:"vec2<f32>",ivec2:"vec2<i32>",uvec2:"vec2<u32>",bvec2:"vec2<bool>",vec3:"vec3<f32>",ivec3:"vec3<i32>",uvec3:"vec3<u32>",bvec3:"vec3<bool>",vec4:"vec4<f32>",ivec4:"vec4<i32>",uvec4:"vec4<u32>",bvec4:"vec4<bool>",mat2:"mat2x2<f32>",mat3:"mat3x3<f32>",mat4:"mat4x4<f32>"},hM={},za={tsl_xor:new jr("fn tsl_xor( a : bool, b : bool ) -> bool { return ( a || b ) && !( a && b ); }"),mod_float:new jr("fn tsl_mod_float( x : f32, y : f32 ) -> f32 { return x - y * floor( x / y ); }"),mod_vec2:new jr("fn tsl_mod_vec2( x : vec2f, y : vec2f ) -> vec2f { return x - y * floor( x / y ); }"),mod_vec3:new jr("fn tsl_mod_vec3( x : vec3f, y : vec3f ) -> vec3f { return x - y * floor( x / y ); }"),mod_vec4:new jr("fn tsl_mod_vec4( x : vec4f, y : vec4f ) -> vec4f { return x - y * floor( x / y ); }"),equals_bool:new jr("fn tsl_equals_bool( a : bool, b : bool ) -> bool { return a == b; }"),equals_bvec2:new jr("fn tsl_equals_bvec2( a : vec2f, b : vec2f ) -> vec2<bool> { return vec2<bool>( a.x == b.x, a.y == b.y ); }"),equals_bvec3:new jr("fn tsl_equals_bvec3( a : vec3f, b : vec3f ) -> vec3<bool> { return vec3<bool>( a.x == b.x, a.y == b.y, a.z == b.z ); }"),equals_bvec4:new jr("fn tsl_equals_bvec4( a : vec4f, b : vec4f ) -> vec4<bool> { return vec4<bool>( a.x == b.x, a.y == b.y, a.z == b.z, a.w == b.w ); }"),repeatWrapping_float:new jr("fn tsl_repeatWrapping_float( coord: f32 ) -> f32 { return fract( coord ); }"),mirrorWrapping_float:new jr("fn tsl_mirrorWrapping_float( coord: f32 ) -> f32 { let mirrored = fract( coord * 0.5 ) * 2.0; return 1.0 - abs( 1.0 - mirrored ); }"),clampWrapping_float:new jr("fn tsl_clampWrapping_float( coord: f32 ) -> f32 { return clamp( coord, 0.0, 1.0 ); }"),biquadraticTexture:new jr(`
fn tsl_biquadraticTexture( map : texture_2d<f32>, coord : vec2f, iRes : vec2u, level : u32 ) -> vec4f {

	let res = vec2f( iRes );

	let uvScaled = coord * res;
	let uvWrapping = ( ( uvScaled % res ) + res ) % res;

	// https://www.shadertoy.com/view/WtyXRy

	let uv = uvWrapping - 0.5;
	let iuv = floor( uv );
	let f = fract( uv );

	let rg1 = textureLoad( map, vec2u( iuv + vec2( 0.5, 0.5 ) ) % iRes, level );
	let rg2 = textureLoad( map, vec2u( iuv + vec2( 1.5, 0.5 ) ) % iRes, level );
	let rg3 = textureLoad( map, vec2u( iuv + vec2( 0.5, 1.5 ) ) % iRes, level );
	let rg4 = textureLoad( map, vec2u( iuv + vec2( 1.5, 1.5 ) ) % iRes, level );

	return mix( mix( rg1, rg2, f.x ), mix( rg3, rg4, f.x ), f.y );

}
`)},Hh={dFdx:"dpdx",dFdy:"- dpdy",mod_float:"tsl_mod_float",mod_vec2:"tsl_mod_vec2",mod_vec3:"tsl_mod_vec3",mod_vec4:"tsl_mod_vec4",equals_bool:"tsl_equals_bool",equals_bvec2:"tsl_equals_bvec2",equals_bvec3:"tsl_equals_bvec3",equals_bvec4:"tsl_equals_bvec4",inversesqrt:"inverseSqrt",bitcast:"bitcast<f32>"};typeof navigator<"u"&&/Windows/g.test(navigator.userAgent)&&(za.pow_float=new jr("fn tsl_pow_float( a : f32, b : f32 ) -> f32 { return select( -pow( -a, b ), pow( a, b ), a > 0.0 ); }"),za.pow_vec2=new jr("fn tsl_pow_vec2( a : vec2f, b : vec2f ) -> vec2f { return vec2f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ) ); }",[za.pow_float]),za.pow_vec3=new jr("fn tsl_pow_vec3( a : vec3f, b : vec3f ) -> vec3f { return vec3f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ) ); }",[za.pow_float]),za.pow_vec4=new jr("fn tsl_pow_vec4( a : vec4f, b : vec4f ) -> vec4f { return vec4f( tsl_pow_float( a.x, b.x ), tsl_pow_float( a.y, b.y ), tsl_pow_float( a.z, b.z ), tsl_pow_float( a.w, b.w ) ); }",[za.pow_float]),Hh.pow_float="tsl_pow_float",Hh.pow_vec2="tsl_pow_vec2",Hh.pow_vec3="tsl_pow_vec3",Hh.pow_vec4="tsl_pow_vec4");let RD="";(typeof navigator<"u"&&/Firefox|Deno/g.test(navigator.userAgent))!==!0&&(RD+=`diagnostic( off, derivative_uniformity );
`);class Loe extends mD{constructor(e,t){super(e,t,new Coe),this.uniformGroups={},this.builtins={},this.directives={},this.scopedArrays=new Map}_generateTextureSample(e,t,n,r,s=this.shaderStage){return s==="fragment"?r?`textureSample( ${t}, ${t}_sampler, ${n}, ${r} )`:`textureSample( ${t}, ${t}_sampler, ${n} )`:this.generateTextureSampleLevel(e,t,n,"0",r)}generateTextureSampleLevel(e,t,n,r,s){return this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,r):this.generateTextureLod(e,t,n,s,r)}generateWrapFunction(e){const t=`tsl_coord_${uM[e.wrapS]}S_${uM[e.wrapT]}_${e.isData3DTexture?"3d":"2d"}T`;let n=hM[t];if(n===void 0){const r=[],s=e.isData3DTexture?"vec3f":"vec2f";let o=`fn ${t}( coord : ${s} ) -> ${s} {

	return ${s}(
`;const a=(l,u)=>{l===n1?(r.push(za.repeatWrapping_float),o+=`		tsl_repeatWrapping_float( coord.${u} )`):l===xo?(r.push(za.clampWrapping_float),o+=`		tsl_clampWrapping_float( coord.${u} )`):l===i1?(r.push(za.mirrorWrapping_float),o+=`		tsl_mirrorWrapping_float( coord.${u} )`):(o+=`		coord.${u}`,console.warn(`WebGPURenderer: Unsupported texture wrap type "${l}" for vertex shader.`))};a(e.wrapS,"x"),o+=`,
`,a(e.wrapT,"y"),e.isData3DTexture&&(o+=`,
`,a(e.wrapR,"z")),o+=`
	);

}
`,hM[t]=n=new jr(o,r)}return n.build(this),t}generateArrayDeclaration(e,t){return`array< ${this.getType(e)}, ${t} >`}generateTextureDimension(e,t,n){const r=this.getDataFromNode(e,this.shaderStage,this.globalCache);r.dimensionsSnippet===void 0&&(r.dimensionsSnippet={});let s=r.dimensionsSnippet[n];if(r.dimensionsSnippet[n]===void 0){let o,a;const{primarySamples:l}=this.renderer.backend.utils.getTextureSampleData(e),u=l>1;e.isData3DTexture?a="vec3<u32>":a="vec2<u32>",u||e.isStorageTexture?o=t:o=`${t}${n?`, u32( ${n} )`:""}`,s=new Xf(new Qf(`textureDimensions( ${o} )`,a)),r.dimensionsSnippet[n]=s,(e.isArrayTexture||e.isDataArrayTexture||e.isData3DTexture)&&(r.arrayLayerCount=new Xf(new Qf(`textureNumLayers(${t})`,"u32"))),e.isTextureCube&&(r.cubeFaceCount=new Xf(new Qf("6u","u32")))}return s.build(this)}generateFilteredTexture(e,t,n,r="0u"){this._include("biquadraticTexture");const s=this.generateWrapFunction(e),o=this.generateTextureDimension(e,t,r);return`tsl_biquadraticTexture( ${t}, ${s}( ${n} ), ${o}, u32( ${r} ) )`}generateTextureLod(e,t,n,r,s="0u"){const o=this.generateWrapFunction(e),a=this.generateTextureDimension(e,t,s),l=e.isData3DTexture?"vec3":"vec2",u=`${l}<u32>( ${o}( ${n} ) * ${l}<f32>( ${a} ) )`;return this.generateTextureLoad(e,t,u,r,s)}generateTextureLoad(e,t,n,r,s="0u"){let o;return r?o=`textureLoad( ${t}, ${n}, ${r}, u32( ${s} ) )`:(o=`textureLoad( ${t}, ${n}, u32( ${s} ) )`,this.renderer.backend.compatibilityMode&&e.isDepthTexture&&(o+=".x")),o}generateTextureStore(e,t,n,r,s){let o;return r?o=`textureStore( ${t}, ${n}, ${r}, ${s} )`:o=`textureStore( ${t}, ${n}, ${s} )`,o}isSampleCompare(e){return e.isDepthTexture===!0&&e.compareFunction!==null}isUnfilterable(e){return this.getComponentTypeFromTexture(e)!=="float"||!this.isAvailable("float32Filterable")&&e.isDataTexture===!0&&e.type===nr||this.isSampleCompare(e)===!1&&e.minFilter===qi&&e.magFilter===qi||this.renderer.backend.utils.getTextureSampleData(e).primarySamples>1}generateTexture(e,t,n,r,s=this.shaderStage){let o=null;return this.isUnfilterable(e)?o=this.generateTextureLod(e,t,n,r,"0",s):o=this._generateTextureSample(e,t,n,r,s),o}generateTextureGrad(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleGrad( ${t}, ${t}_sampler, ${n},  ${r[0]}, ${r[1]} )`;console.error(`WebGPURenderer: THREE.TextureNode.gradient() does not support ${o} shader.`)}generateTextureCompare(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return e.isDepthTexture===!0&&e.isArrayTexture===!0?`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${s}, ${r} )`:`textureSampleCompare( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.DepthTexture.compareFunction() does not support ${o} shader.`)}generateTextureLevel(e,t,n,r,s){return this.isUnfilterable(e)===!1?`textureSampleLevel( ${t}, ${t}_sampler, ${n}, ${r} )`:this.isFilteredTexture(e)?this.generateFilteredTexture(e,t,n,r):this.generateTextureLod(e,t,n,s,r)}generateTextureBias(e,t,n,r,s,o=this.shaderStage){if(o==="fragment")return`textureSampleBias( ${t}, ${t}_sampler, ${n}, ${r} )`;console.error(`WebGPURenderer: THREE.TextureNode.biasNode does not support ${o} shader.`)}getPropertyName(e,t=this.shaderStage){if(e.isNodeVarying===!0&&e.needsInterpolation===!0){if(t==="vertex")return`varyings.${e.name}`}else if(e.isNodeUniform===!0){const n=e.name,r=e.type;return r==="texture"||r==="cubeTexture"||r==="storageTexture"||r==="texture3D"?n:r==="buffer"||r==="storageBuffer"||r==="indirectStorageBuffer"?this.isCustomStruct(e)?n:n+".value":e.groupNode.name+"."+n}return super.getPropertyName(e)}getOutputStructName(){return"output"}getFunctionOperator(e){const t=Noe[e];return t!==void 0?(this._include(t),t):null}getNodeAccess(e,t){return t!=="compute"?e.isAtomic===!0?(console.warn("WebGPURenderer: Atomic operations are only supported in compute shaders."),Us.READ_WRITE):Us.READ_ONLY:e.access}getStorageAccess(e,t){return Poe[this.getNodeAccess(e,t)]}getUniformFromNode(e,t,n,r=null){const s=super.getUniformFromNode(e,t,n,r),o=this.getDataFromNode(e,n,this.globalCache);if(o.uniformGPU===void 0){let a;const l=e.groupNode,u=l.name,c=this.getBindGroupArray(u,n);if(t==="texture"||t==="cubeTexture"||t==="storageTexture"||t==="texture3D"){let A=null;const m=this.getNodeAccess(e,n);if(t==="texture"||t==="storageTexture"?e.value.is3DTexture===!0?A=new Ny(s.name,s.node,l,m):A=new IA(s.name,s.node,l,m):t==="cubeTexture"?A=new wD(s.name,s.node,l,m):t==="texture3D"&&(A=new Ny(s.name,s.node,l,m)),A.store=e.isStorageTextureNode===!0,A.setVisibility(Mf[n]),this.isUnfilterable(e.value)===!1&&A.store===!1){const _=new goe(`${s.name}_sampler`,s.node,l);_.setVisibility(Mf[n]),c.push(_,A),a=[_,A]}else c.push(A),a=[A]}else if(t==="buffer"||t==="storageBuffer"||t==="indirectStorageBuffer"){const A=t==="buffer"?bD:_oe,m=new A(e,l);m.setVisibility(Mf[n]),c.push(m),a=m,s.name=r||"NodeBuffer_"+s.id}else{const A=this.uniformGroups[n]||(this.uniformGroups[n]={});let m=A[u];m===void 0&&(m=new SD(u,l),m.setVisibility(Mf[n]),A[u]=m,c.push(m)),a=this.getNodeUniform(s,t),m.addUniform(a)}o.uniformGPU=a}return s}getBuiltin(e,t,n,r=this.shaderStage){const s=this.builtins[r]||(this.builtins[r]=new Map);return s.has(e)===!1&&s.set(e,{name:e,property:t,type:n}),t}hasBuiltin(e,t=this.shaderStage){return this.builtins[t]!==void 0&&this.builtins[t].has(e)}getVertexIndex(){return this.shaderStage==="vertex"?this.getBuiltin("vertex_index","vertexIndex","u32","attribute"):"vertexIndex"}buildFunctionCode(e){const t=e.layout,n=this.flowShaderNode(e),r=[];for(const o of t.inputs)r.push(o.name+" : "+this.getType(o.type));let s=`fn ${t.name}( ${r.join(", ")} ) -> ${this.getType(t.type)} {
${n.vars}
${n.code}
`;return n.result&&(s+=`	return ${n.result};
`),s+=`
}
`,s}getInstanceIndex(){return this.shaderStage==="vertex"?this.getBuiltin("instance_index","instanceIndex","u32","attribute"):"instanceIndex"}getInvocationLocalIndex(){return this.getBuiltin("local_invocation_index","invocationLocalIndex","u32","attribute")}getSubgroupSize(){return this.enableSubGroups(),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute")}getInvocationSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_invocation_id","invocationSubgroupIndex","u32","attribute")}getSubgroupIndex(){return this.enableSubGroups(),this.getBuiltin("subgroup_id","subgroupIndex","u32","attribute")}getDrawIndex(){return null}getFrontFacing(){return this.getBuiltin("front_facing","isFront","bool")}getFragCoord(){return this.getBuiltin("position","fragCoord","vec4<f32>")+".xy"}getFragDepth(){return"output."+this.getBuiltin("frag_depth","depth","f32","output")}getClipDistance(){return"varyings.hw_clip_distances"}isFlipY(){return!1}enableDirective(e,t=this.shaderStage){(this.directives[t]||(this.directives[t]=new Set)).add(e)}getDirectives(e){const t=[],n=this.directives[e];if(n!==void 0)for(const r of n)t.push(`enable ${r};`);return t.join(`
`)}enableSubGroups(){this.enableDirective("subgroups")}enableSubgroupsF16(){this.enableDirective("subgroups-f16")}enableClipDistances(){this.enableDirective("clip_distances")}enableShaderF16(){this.enableDirective("f16")}enableDualSourceBlending(){this.enableDirective("dual_source_blending")}enableHardwareClipping(e){this.enableClipDistances(),this.getBuiltin("clip_distances","hw_clip_distances",`array<f32, ${e} >`,"vertex")}getBuiltins(e){const t=[],n=this.builtins[e];if(n!==void 0)for(const{name:r,property:s,type:o}of n.values())t.push(`@builtin( ${r} ) ${s} : ${o}`);return t.join(`,
	`)}getScopedArray(e,t,n,r){return this.scopedArrays.has(e)===!1&&this.scopedArrays.set(e,{name:e,scope:t,bufferType:n,bufferCount:r}),e}getScopedArrays(e){if(e!=="compute")return;const t=[];for(const{name:n,scope:r,bufferType:s,bufferCount:o}of this.scopedArrays.values()){const a=this.getType(s);t.push(`var<${r}> ${n}: array< ${a}, ${o} >;`)}return t.join(`
`)}getAttributes(e){const t=[];if(e==="compute"&&(this.getBuiltin("global_invocation_id","globalId","vec3<u32>","attribute"),this.getBuiltin("workgroup_id","workgroupId","vec3<u32>","attribute"),this.getBuiltin("local_invocation_id","localId","vec3<u32>","attribute"),this.getBuiltin("num_workgroups","numWorkgroups","vec3<u32>","attribute"),this.renderer.hasFeature("subgroups")&&(this.enableDirective("subgroups",e),this.getBuiltin("subgroup_size","subgroupSize","u32","attribute"))),e==="vertex"||e==="compute"){const n=this.getBuiltins("attribute");n&&t.push(n);const r=this.getAttributesArray();for(let s=0,o=r.length;s<o;s++){const a=r[s],l=a.name,u=this.getType(a.type);t.push(`@location( ${s} ) ${l} : ${u}`)}}return t.join(`,
	`)}getStructMembers(e){const t=[];for(const n of e.members){const r=e.output?"@location( "+n.index+" ) ":"";let s=this.getType(n.type);n.atomic&&(s="atomic< "+s+" >"),t.push(`	${r+n.name} : ${s}`)}return e.output&&t.push(`	${this.getBuiltins("output")}`),t.join(`,
`)}getStructs(e){let t="";const n=this.structs[e];if(n.length>0){const r=[];for(const s of n){let o=`struct ${s.name} {
`;o+=this.getStructMembers(s),o+=`
};`,r.push(o)}t=`
`+r.join(`

`)+`
`}return t}getVar(e,t,n=null){let r=`var ${t} : `;return n!==null?r+=this.generateArrayDeclaration(e,n):r+=this.getType(e),r}getVars(e){const t=[],n=this.vars[e];if(n!==void 0)for(const r of n)t.push(`	${this.getVar(r.type,r.name,r.count)};`);return`
${t.join(`
`)}
`}getVaryings(e){const t=[];if(e==="vertex"&&this.getBuiltin("position","Vertex","vec4<f32>","vertex"),e==="vertex"||e==="fragment"){const s=this.varyings,o=this.vars[e];for(let a=0;a<s.length;a++){const l=s[a];if(l.needsInterpolation){let u=`@location( ${a} )`;if(l.interpolationType){const c=l.interpolationSampling!==null?`, ${l.interpolationSampling} )`:" )";u+=` @interpolate( ${l.interpolationType}${c}`}else/^(int|uint|ivec|uvec)/.test(l.type)&&(u+=` @interpolate( ${this.renderer.backend.compatibilityMode?"flat, either":"flat"} )`);t.push(`${u} ${l.name} : ${this.getType(l.type)}`)}else e==="vertex"&&o.includes(l)===!1&&o.push(l)}}const n=this.getBuiltins(e);n&&t.push(n);const r=t.join(`,
	`);return e==="vertex"?this._getWGSLStruct("VaryingsStruct","	"+r):r}isCustomStruct(e){const t=e.value,n=e.node,r=(t.isBufferAttribute||t.isInstancedBufferAttribute)&&n.structTypeNode!==null,s=n.value&&n.value.array&&typeof n.value.itemSize=="number"&&n.value.array.length>n.value.itemSize;return r&&!s}getUniforms(e){const t=this.uniforms[e],n=[],r=[],s=[],o={};for(const l of t){const u=l.groupNode.name,c=this.bindingsIndexes[u];if(l.type==="texture"||l.type==="cubeTexture"||l.type==="storageTexture"||l.type==="texture3D"){const A=l.node.value;this.isUnfilterable(A)===!1&&l.node.isStorageTextureNode!==!0&&(this.isSampleCompare(A)?n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler_comparison;`):n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name}_sampler : sampler;`));let m,_="";const{primarySamples:b}=this.renderer.backend.utils.getTextureSampleData(A);if(b>1&&(_="_multisampled"),A.isCubeTexture===!0)m="texture_cube<f32>";else if(A.isDepthTexture===!0)this.renderer.backend.compatibilityMode&&A.compareFunction===null?m=`texture${_}_2d<f32>`:m=`texture_depth${_}_2d${A.isArrayTexture===!0?"_array":""}`;else if(l.node.isStorageTextureNode===!0){const M=Ly(A),w=this.getStorageAccess(l.node,e),T=l.node.value.is3DTexture,N=l.node.value.isArrayTexture;m=`texture_storage_${T?"3d":`2d${N?"_array":""}`}<${M}, ${w}>`}else if(A.isArrayTexture===!0||A.isDataArrayTexture===!0||A.isCompressedArrayTexture===!0)m="texture_2d_array<f32>";else if(A.is3DTexture===!0||A.isData3DTexture===!0)m="texture_3d<f32>";else{const M=this.getComponentTypeFromTexture(A).charAt(0);m=`texture${_}_2d<${M}32>`}n.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var ${l.name} : ${m};`)}else if(l.type==="buffer"||l.type==="storageBuffer"||l.type==="indirectStorageBuffer"){const A=l.node,m=this.getType(A.getNodeType(this)),_=A.bufferCount,b=_>0&&l.type==="buffer"?", "+_:"",M=A.isStorageBufferNode?`storage, ${this.getStorageAccess(A,e)}`:"uniform";if(this.isCustomStruct(l))r.push(`@binding( ${c.binding++} ) @group( ${c.group} ) var<${M}> ${l.name} : ${m};`);else{const T=`	value : array< ${A.isAtomic?`atomic<${m}>`:`${m}`}${b} >`;r.push(this._getWGSLStructBinding(l.name,T,M,c.binding++,c.group))}}else{const A=this.getType(this.getVectorType(l.type)),m=l.groupNode.name;(o[m]||(o[m]={index:c.binding++,id:c.group,snippets:[]})).snippets.push(`	${l.name} : ${A}`)}}for(const l in o){const u=o[l];s.push(this._getWGSLStructBinding(l,u.snippets.join(`,
`),"uniform",u.index,u.id))}let a=n.join(`
`);return a+=r.join(`
`),a+=s.join(`
`),a}buildCode(){const e=this.material!==null?{fragment:{},vertex:{}}:{compute:{}};this.sortBindingGroups();for(const t in e){this.shaderStage=t;const n=e[t];n.uniforms=this.getUniforms(t),n.attributes=this.getAttributes(t),n.varyings=this.getVaryings(t),n.structs=this.getStructs(t),n.vars=this.getVars(t),n.codes=this.getCodes(t),n.directives=this.getDirectives(t),n.scopedArrays=this.getScopedArrays(t);let r=`// code

`;r+=this.flowCode[t];const s=this.flowNodes[t],o=s[s.length-1],a=o.outputNode,l=a!==void 0&&a.isOutputStructNode===!0;for(const u of s){const c=this.getFlowData(u),A=u.name;if(A&&(r.length>0&&(r+=`
`),r+=`	// flow -> ${A}
`),r+=`${c.code}
	`,u===o&&t!=="compute"){if(r+=`// result

	`,t==="vertex")r+=`varyings.Vertex = ${c.result};`;else if(t==="fragment")if(l)n.returnType=a.getNodeType(this),n.structs+="var<private> output : "+n.returnType+";",r+=`return ${c.result};`;else{let m="	@location(0) color: vec4<f32>";const _=this.getBuiltins("output");_&&(m+=`,
	`+_),n.returnType="OutputStruct",n.structs+=this._getWGSLStruct("OutputStruct",m),n.structs+=`
var<private> output : OutputStruct;`,r+=`output.color = ${c.result};

	return output;`}}}n.flow=r}if(this.shaderStage=null,this.material!==null)this.vertexShader=this._getWGSLVertexCode(e.vertex),this.fragmentShader=this._getWGSLFragmentCode(e.fragment);else{const t=this.object.workgroupSize;this.computeShader=this._getWGSLComputeCode(e.compute,t)}}getMethod(e,t=null){let n;return t!==null&&(n=this._getWGSLMethod(e+"_"+t)),n===void 0&&(n=this._getWGSLMethod(e)),n||e}getType(e){return Ioe[e]||e}isAvailable(e){let t=cM[e];return t===void 0&&(e==="float32Filterable"?t=this.renderer.hasFeature("float32-filterable"):e==="clipDistance"&&(t=this.renderer.hasFeature("clip-distances")),cM[e]=t),t}_getWGSLMethod(e){return za[e]!==void 0&&this._include(e),Hh[e]}_include(e){const t=za[e];return t.build(this),this.currentFunctionNode!==null&&this.currentFunctionNode.includes.push(t),t}_getWGSLVertexCode(e){return`${this.getSignature()}
// directives
${e.directives}

// structs
${e.structs}

// uniforms
${e.uniforms}

// varyings
${e.varyings}
var<private> varyings : VaryingsStruct;

// codes
${e.codes}

@vertex
fn main( ${e.attributes} ) -> VaryingsStruct {

	// vars
	${e.vars}

	// flow
	${e.flow}

	return varyings;

}
`}_getWGSLFragmentCode(e){return`${this.getSignature()}
// global
${RD}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@fragment
fn main( ${e.varyings} ) -> ${e.returnType} {

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLComputeCode(e,t){const[n,r,s]=t;return`${this.getSignature()}
// directives
${e.directives}

// system
var<private> instanceIndex : u32;

// locals
${e.scopedArrays}

// structs
${e.structs}

// uniforms
${e.uniforms}

// codes
${e.codes}

@compute @workgroup_size( ${n}, ${r}, ${s} )
fn main( ${e.attributes} ) {

	// system
	instanceIndex = globalId.x
		+ globalId.y * ( ${n} * numWorkgroups.x )
		+ globalId.z * ( ${n} * numWorkgroups.x ) * ( ${r} * numWorkgroups.y );

	// vars
	${e.vars}

	// flow
	${e.flow}

}
`}_getWGSLStruct(e,t){return`
struct ${e} {
${t}
};`}_getWGSLStructBinding(e,t,n,r=0,s=0){const o=e+"Struct";return`${this._getWGSLStruct(o,t)}
@binding( ${r} ) @group( ${s} )
var<${n}> ${e} : ${o};`}}class Doe{constructor(e){this.backend=e}getCurrentDepthStencilFormat(e){let t;return e.depthTexture!==null?t=this.getTextureFormatGPU(e.depthTexture):e.depth&&e.stencil?t=xe.Depth24PlusStencil8:e.depth&&(t=xe.Depth24Plus),t}getTextureFormatGPU(e){return this.backend.get(e).format}getTextureSampleData(e){let t;if(e.isFramebufferTexture)t=1;else if(e.isDepthTexture&&!e.renderTarget){const s=this.backend.renderer,o=s.getRenderTarget();t=o?o.samples:s.samples}else e.renderTarget&&(t=e.renderTarget.samples);t=t||1;const n=t>1&&e.renderTarget!==null&&e.isDepthTexture!==!0&&e.isFramebufferTexture!==!0;return{samples:t,primarySamples:n?1:t,isMSAA:n}}getCurrentColorFormat(e){let t;return e.textures!==null?t=this.getTextureFormatGPU(e.textures[0]):t=this.getPreferredCanvasFormat(),t}getCurrentColorSpace(e){return e.textures!==null?e.textures[0].colorSpace:this.backend.renderer.outputColorSpace}getPrimitiveTopology(e,t){if(e.isPoints)return m4.PointList;if(e.isLineSegments||e.isMesh&&t.wireframe===!0)return m4.LineList;if(e.isLine)return m4.LineStrip;if(e.isMesh)return m4.TriangleList}getSampleCount(e){return e>=4?4:1}getSampleCountRenderContext(e){return e.textures!==null?this.getSampleCount(e.sampleCount):this.getSampleCount(this.backend.renderer.samples)}getPreferredCanvasFormat(){const e=this.backend.parameters.outputType;if(e===void 0)return navigator.gpu.getPreferredCanvasFormat();if(e===ar)return xe.BGRA8Unorm;if(e===Yr)return xe.RGBA16Float;throw new Error("Unsupported outputType")}}const CD=new Map([[Int8Array,["sint8","snorm8"]],[Uint8Array,["uint8","unorm8"]],[Int16Array,["sint16","snorm16"]],[Uint16Array,["uint16","unorm16"]],[Int32Array,["sint32","snorm32"]],[Uint32Array,["uint32","unorm32"]],[Float32Array,["float32"]]]);typeof Float16Array<"u"&&CD.set(Float16Array,["float16"]);const Boe=new Map([[sv,["float16"]]]),Foe=new Map([[Int32Array,"sint32"],[Int16Array,"sint32"],[Uint32Array,"uint32"],[Uint16Array,"uint32"],[Float32Array,"float32"]]);class Uoe{constructor(e){this.backend=e}createAttribute(e,t){const n=this._getBufferAttribute(e),r=this.backend,s=r.get(n);let o=s.buffer;if(o===void 0){const a=r.device;let l=n.array;if(e.normalized===!1){if(l.constructor===Int16Array||l.constructor===Int8Array)l=new Int32Array(l);else if((l.constructor===Uint16Array||l.constructor===Uint8Array)&&(l=new Uint32Array(l),t&GPUBufferUsage.INDEX))for(let A=0;A<l.length;A++)l[A]===65535&&(l[A]=4294967295)}if(n.array=l,(n.isStorageBufferAttribute||n.isStorageInstancedBufferAttribute)&&n.itemSize===3){l=new l.constructor(n.count*4);for(let A=0;A<n.count;A++)l.set(n.array.subarray(A*3,A*3+3),A*4);n.itemSize=4,n.array=l,s._force3to4BytesAlignment=!0}const u=l.byteLength,c=u+(4-u%4)%4;o=a.createBuffer({label:n.name,size:c,usage:t,mappedAtCreation:!0}),new l.constructor(o.getMappedRange()).set(l),o.unmap(),s.buffer=o}}updateAttribute(e){const t=this._getBufferAttribute(e),n=this.backend,r=n.device,s=n.get(t),o=n.get(t).buffer;let a=t.array;if(s._force3to4BytesAlignment===!0){a=new a.constructor(t.count*4);for(let c=0;c<t.count;c++)a.set(t.array.subarray(c*3,c*3+3),c*4);t.array=a}const l=this._isTypedArray(a),u=t.updateRanges;if(u.length===0)r.queue.writeBuffer(o,0,a,0);else{const c=l?1:a.BYTES_PER_ELEMENT;for(let A=0,m=u.length;A<m;A++){const _=u[A];let b,M;if(s._force3to4BytesAlignment===!0){const T=Math.floor(_.start/3),N=Math.ceil(_.count/3);b=T*4*c,M=N*4*c}else b=_.start*c,M=_.count*c;const w=b*(l?a.BYTES_PER_ELEMENT:1);r.queue.writeBuffer(o,w,a,b,M)}t.clearUpdateRanges()}}createShaderVertexBuffers(e){const t=e.getAttributes(),n=new Map;for(let r=0;r<t.length;r++){const s=t[r],o=s.array.BYTES_PER_ELEMENT,a=this._getBufferAttribute(s);let l=n.get(a);if(l===void 0){let A,m;s.isInterleavedBufferAttribute===!0?(A=s.data.stride*o,m=s.data.isInstancedInterleavedBuffer?wf.Instance:wf.Vertex):(A=s.itemSize*o,m=s.isInstancedBufferAttribute?wf.Instance:wf.Vertex),s.normalized===!1&&(s.array.constructor===Int16Array||s.array.constructor===Uint16Array)&&(A=4),l={arrayStride:A,attributes:[],stepMode:m},n.set(a,l)}const u=this._getVertexFormat(s),c=s.isInterleavedBufferAttribute===!0?s.offset*o:0;l.attributes.push({shaderLocation:r,offset:c,format:u})}return Array.from(n.values())}destroyAttribute(e){const t=this.backend;t.get(this._getBufferAttribute(e)).buffer.destroy(),t.delete(e)}async getArrayBufferAsync(e){const t=this.backend,n=t.device,s=t.get(this._getBufferAttribute(e)).buffer,o=s.size,a=n.createBuffer({label:`${e.name}_readback`,size:o,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ}),l=n.createCommandEncoder({label:`readback_encoder_${e.name}`});l.copyBufferToBuffer(s,0,a,0,o);const u=l.finish();n.queue.submit([u]),await a.mapAsync(GPUMapMode.READ);const c=a.getMappedRange(),A=new e.array.constructor(c.slice(0));return a.unmap(),A.buffer}_getVertexFormat(e){const{itemSize:t,normalized:n}=e,r=e.array.constructor,s=e.constructor;let o;if(t===1)o=Foe.get(r);else{const l=(Boe.get(s)||CD.get(r))[n?1:0];if(l){const u=r.BYTES_PER_ELEMENT*t,A=Math.floor((u+3)/4)*4/r.BYTES_PER_ELEMENT;if(A%1)throw new Error("THREE.WebGPUAttributeUtils: Bad vertex format item size.");o=`${l}x${A}`}}return o||console.error("THREE.WebGPUAttributeUtils: Vertex format not supported yet."),o}_isTypedArray(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}_getBufferAttribute(e){return e.isInterleavedBufferAttribute&&(e=e.data),e}}class Ooe{constructor(e){this.backend=e,this.bindGroupLayoutCache=new WeakMap}createBindingsLayout(e){const t=this.backend,n=t.device,r=[];let s=0;for(const o of e.bindings){const a={binding:s++,visibility:o.visibility};if(o.isUniformBuffer||o.isStorageBuffer){const l={};o.isStorageBuffer&&(o.visibility&4&&(o.access===Us.READ_WRITE||o.access===Us.WRITE_ONLY)?l.type=Qm.Storage:l.type=Qm.ReadOnlyStorage),a.buffer=l}else if(o.isSampledTexture&&o.store){const l={};l.format=this.backend.get(o.texture).texture.format;const u=o.access;u===Us.READ_WRITE?l.access=Ym.ReadWrite:u===Us.WRITE_ONLY?l.access=Ym.WriteOnly:l.access=Ym.ReadOnly,o.texture.isArrayTexture?l.viewDimension=$r.TwoDArray:o.texture.is3DTexture&&(l.viewDimension=$r.ThreeD),a.storageTexture=l}else if(o.isSampledTexture){const l={},{primarySamples:u}=t.utils.getTextureSampleData(o.texture);if(u>1&&(l.multisampled=!0,o.texture.isDepthTexture||(l.sampleType=x2.UnfilterableFloat)),o.texture.isDepthTexture)t.compatibilityMode&&o.texture.compareFunction===null?l.sampleType=x2.UnfilterableFloat:l.sampleType=x2.Depth;else if(o.texture.isDataTexture||o.texture.isDataArrayTexture||o.texture.isData3DTexture){const c=o.texture.type;c===as?l.sampleType=x2.SInt:c===Oi?l.sampleType=x2.UInt:c===nr&&(this.backend.hasFeature("float32-filterable")?l.sampleType=x2.Float:l.sampleType=x2.UnfilterableFloat)}o.isSampledCubeTexture?l.viewDimension=$r.Cube:o.texture.isArrayTexture||o.texture.isDataArrayTexture||o.texture.isCompressedArrayTexture?l.viewDimension=$r.TwoDArray:o.isSampledTexture3D&&(l.viewDimension=$r.ThreeD),a.texture=l}else if(o.isSampler){const l={};o.texture.isDepthTexture&&(o.texture.compareFunction!==null?l.type=oM.Comparison:t.compatibilityMode&&(l.type=oM.NonFiltering)),a.sampler=l}else console.error(`WebGPUBindingUtils: Unsupported binding "${o}".`);r.push(a)}return n.createBindGroupLayout({entries:r})}createBindings(e,t,n,r=0){const{backend:s,bindGroupLayoutCache:o}=this,a=s.get(e);let l=o.get(e.bindingsReference);l===void 0&&(l=this.createBindingsLayout(e),o.set(e.bindingsReference,l));let u;n>0&&(a.groups===void 0&&(a.groups=[],a.versions=[]),a.versions[n]===r&&(u=a.groups[n])),u===void 0&&(u=this.createBindGroup(e,l),n>0&&(a.groups[n]=u,a.versions[n]=r)),a.group=u,a.layout=l}updateBinding(e){const t=this.backend,n=t.device,r=e.buffer,s=t.get(e).buffer;n.queue.writeBuffer(s,0,r,0)}createBindGroupIndex(e,t){const r=this.backend.device,s=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,o=e[0],a=r.createBuffer({label:"bindingCameraIndex_"+o,size:16,usage:s});r.queue.writeBuffer(a,0,e,0);const l=[{binding:0,resource:{buffer:a}}];return r.createBindGroup({label:"bindGroupCameraIndex_"+o,layout:t,entries:l})}createBindGroup(e,t){const n=this.backend,r=n.device;let s=0;const o=[];for(const a of e.bindings){if(a.isUniformBuffer){const l=n.get(a);if(l.buffer===void 0){const u=a.byteLength,c=GPUBufferUsage.UNIFORM|GPUBufferUsage.COPY_DST,A=r.createBuffer({label:"bindingBuffer_"+a.name,size:u,usage:c});l.buffer=A}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isStorageBuffer){const l=n.get(a);if(l.buffer===void 0){const u=a.attribute;l.buffer=n.get(u).buffer}o.push({binding:s,resource:{buffer:l.buffer}})}else if(a.isSampledTexture){const l=n.get(a.texture);let u;if(l.externalTexture!==void 0)u=r.importExternalTexture({source:l.externalTexture});else{const c=a.store?1:l.texture.mipLevelCount;let A=`view-${l.texture.width}-${l.texture.height}`;if(l.texture.depthOrArrayLayers>1&&(A+=`-${l.texture.depthOrArrayLayers}`),A+=`-${c}`,u=l[A],u===void 0){const m=moe.All;let _;a.isSampledCubeTexture?_=$r.Cube:a.isSampledTexture3D?_=$r.ThreeD:a.texture.isArrayTexture||a.texture.isDataArrayTexture||a.texture.isCompressedArrayTexture?_=$r.TwoDArray:_=$r.TwoD,u=l[A]=l.texture.createView({aspect:m,dimension:_,mipLevelCount:c})}}o.push({binding:s,resource:u})}else if(a.isSampler){const l=n.get(a.texture);o.push({binding:s,resource:l.sampler})}s++}return r.createBindGroup({label:"bindGroup_"+e.name,layout:t,entries:o})}}class koe{constructor(e){this.backend=e,this._activePipelines=new WeakMap}setPipeline(e,t){this._activePipelines.get(e)!==t&&(e.setPipeline(t),this._activePipelines.set(e,t))}_getSampleCount(e){return this.backend.utils.getSampleCountRenderContext(e)}createRenderPipeline(e,t){const{object:n,material:r,geometry:s,pipeline:o}=e,{vertexProgram:a,fragmentProgram:l}=o,u=this.backend,c=u.device,A=u.utils,m=u.get(o),_=[];for(const Y of e.getBindings()){const ne=u.get(Y);_.push(ne.layout)}const b=u.attributeUtils.createShaderVertexBuffers(e);let M;r.blending!==qo&&(r.blending!==Js||r.transparent!==!1)&&(M=this._getBlending(r));let w={};r.stencilWrite===!0&&(w={compare:this._getStencilCompare(r),failOp:this._getStencilOperation(r.stencilFail),depthFailOp:this._getStencilOperation(r.stencilZFail),passOp:this._getStencilOperation(r.stencilZPass)});const T=this._getColorWriteMask(r),N=[];if(e.context.textures!==null){const Y=e.context.textures;for(let ne=0;ne<Y.length;ne++){const ee=A.getTextureFormatGPU(Y[ne]);N.push({format:ee,blend:M,writeMask:T})}}else{const Y=A.getCurrentColorFormat(e.context);N.push({format:Y,blend:M,writeMask:T})}const P=u.get(a).module,I=u.get(l).module,B=this._getPrimitiveState(n,s,r),F=this._getDepthCompare(r),O=A.getCurrentDepthStencilFormat(e.context),V=this._getSampleCount(e.context),U={label:`renderPipeline_${r.name||r.type}_${r.id}`,vertex:Object.assign({},P,{buffers:b}),fragment:Object.assign({},I,{targets:N}),primitive:B,multisample:{count:V,alphaToCoverageEnabled:r.alphaToCoverage&&V>1},layout:c.createPipelineLayout({bindGroupLayouts:_})},z={},H=e.context.depth,Q=e.context.stencil;if((H===!0||Q===!0)&&(H===!0&&(z.format=O,z.depthWriteEnabled=r.depthWrite,z.depthCompare=F),Q===!0&&(z.stencilFront=w,z.stencilBack={},z.stencilReadMask=r.stencilFuncMask,z.stencilWriteMask=r.stencilWriteMask),r.polygonOffset===!0&&(z.depthBias=r.polygonOffsetUnits,z.depthBiasSlopeScale=r.polygonOffsetFactor,z.depthBiasClamp=0),U.depthStencil=z),t===null)m.pipeline=c.createRenderPipeline(U);else{const Y=new Promise(ne=>{c.createRenderPipelineAsync(U).then(ee=>{m.pipeline=ee,ne()})});t.push(Y)}}createBundleEncoder(e,t="renderBundleEncoder"){const n=this.backend,{utils:r,device:s}=n,o=r.getCurrentDepthStencilFormat(e),a=r.getCurrentColorFormat(e),l=this._getSampleCount(e),u={label:t,colorFormats:[a],depthStencilFormat:o,sampleCount:l};return s.createRenderBundleEncoder(u)}createComputePipeline(e,t){const n=this.backend,r=n.device,s=n.get(e.computeProgram).module,o=n.get(e),a=[];for(const l of t){const u=n.get(l);a.push(u.layout)}o.pipeline=r.createComputePipeline({compute:s,layout:r.createPipelineLayout({bindGroupLayouts:a})})}_getBlending(e){let t,n;const r=e.blending,s=e.blendSrc,o=e.blendDst,a=e.blendEquation;if(r===z2){const l=e.blendSrcAlpha!==null?e.blendSrcAlpha:s,u=e.blendDstAlpha!==null?e.blendDstAlpha:o,c=e.blendEquationAlpha!==null?e.blendEquationAlpha:a;t={srcFactor:this._getBlendFactor(s),dstFactor:this._getBlendFactor(o),operation:this._getBlendOperation(a)},n={srcFactor:this._getBlendFactor(l),dstFactor:this._getBlendFactor(u),operation:this._getBlendOperation(c)}}else{const l=e.premultipliedAlpha,u=(c,A,m,_)=>{t={srcFactor:c,dstFactor:A,operation:_2.Add},n={srcFactor:m,dstFactor:_,operation:_2.Add}};if(l)switch(r){case Js:u(di.One,di.OneMinusSrcAlpha,di.One,di.OneMinusSrcAlpha);break;case K2:u(di.One,di.One,di.One,di.One);break;case Z2:u(di.Zero,di.OneMinusSrc,di.Zero,di.One);break;case J2:u(di.Dst,di.OneMinusSrcAlpha,di.Zero,di.One);break}else switch(r){case Js:u(di.SrcAlpha,di.OneMinusSrcAlpha,di.One,di.OneMinusSrcAlpha);break;case K2:u(di.SrcAlpha,di.One,di.One,di.One);break;case Z2:console.error("THREE.WebGPURenderer: SubtractiveBlending requires material.premultipliedAlpha = true");break;case J2:console.error("THREE.WebGPURenderer: MultiplyBlending requires material.premultipliedAlpha = true");break}}if(t!==void 0&&n!==void 0)return{color:t,alpha:n};console.error("THREE.WebGPURenderer: Invalid blending: ",r)}_getBlendFactor(e){let t;switch(e){case K0:t=di.Zero;break;case c9:t=di.One;break;case h9:t=di.Src;break;case f9:t=di.OneMinusSrc;break;case M4:t=di.SrcAlpha;break;case E4:t=di.OneMinusSrcAlpha;break;case p9:t=di.Dst;break;case m9:t=di.OneMinusDst;break;case d9:t=di.DstAlpha;break;case A9:t=di.OneMinusDstAlpha;break;case g9:t=di.SrcAlphaSaturated;break;case Mee:t=di.Constant;break;case Eee:t=di.OneMinusConstant;break;default:console.error("THREE.WebGPURenderer: Blend factor not supported.",e)}return t}_getStencilCompare(e){let t;const n=e.stencilFunc;switch(n){case mE:t=Ps.Never;break;case ad:t=Ps.Always;break;case gE:t=Ps.Less;break;case vE:t=Ps.LessEqual;break;case yE:t=Ps.Equal;break;case bE:t=Ps.GreaterEqual;break;case _E:t=Ps.Greater;break;case xE:t=Ps.NotEqual;break;default:console.error("THREE.WebGPURenderer: Invalid stencil function.",n)}return t}_getStencilOperation(e){let t;switch(e){case Y1:t=$1.Keep;break;case uE:t=$1.Zero;break;case cE:t=$1.Replace;break;case pE:t=$1.Invert;break;case hE:t=$1.IncrementClamp;break;case fE:t=$1.DecrementClamp;break;case dE:t=$1.IncrementWrap;break;case AE:t=$1.DecrementWrap;break;default:console.error("THREE.WebGPURenderer: Invalid stencil operation.",t)}return t}_getBlendOperation(e){let t;switch(e){case Ds:t=_2.Add;break;case l9:t=_2.Subtract;break;case u9:t=_2.ReverseSubtract;break;case Wy:t=_2.Min;break;case jy:t=_2.Max;break;default:console.error("THREE.WebGPUPipelineUtils: Blend equation not supported.",e)}return t}_getPrimitiveState(e,t,n){const r={},s=this.backend.utils;switch(r.topology=s.getPrimitiveTopology(e,n),t.index!==null&&e.isLine===!0&&e.isLineSegments!==!0&&(r.stripIndexFormat=t.index.array instanceof Uint16Array?i5.Uint16:i5.Uint32),n.side){case So:r.frontFace=jm.CCW,r.cullMode=$m.Back;break;case Bi:r.frontFace=jm.CCW,r.cullMode=$m.Front;break;case Mr:r.frontFace=jm.CCW,r.cullMode=$m.None;break;default:console.error("THREE.WebGPUPipelineUtils: Unknown material.side value.",n.side);break}return r}_getColorWriteMask(e){return e.colorWrite===!0?sM.All:sM.None}_getDepthCompare(e){let t;if(e.depthTest===!1)t=Ps.Always;else{const n=e.depthFunc;switch(n){case R4:t=Ps.Never;break;case C4:t=Ps.Always;break;case P4:t=Ps.Less;break;case e1:t=Ps.LessEqual;break;case N4:t=Ps.Equal;break;case I4:t=Ps.GreaterEqual;break;case L4:t=Ps.Greater;break;case D4:t=Ps.NotEqual;break;default:console.error("THREE.WebGPUPipelineUtils: Invalid depth function.",n)}}return t}}class Voe extends ED{constructor(e,t,n=2048){super(n),this.device=e,this.type=t,this.querySet=this.device.createQuerySet({type:"timestamp",count:this.maxQueries,label:`queryset_global_timestamp_${t}`});const r=this.maxQueries*8;this.resolveBuffer=this.device.createBuffer({label:`buffer_timestamp_resolve_${t}`,size:r,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.resultBuffer=this.device.createBuffer({label:`buffer_timestamp_result_${t}`,size:r,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ})}allocateQueriesForContext(e){if(!this.trackTimestamp||this.isDisposed)return null;if(this.currentQueryIndex+2>this.maxQueries)return $o(`WebGPUTimestampQueryPool [${this.type}]: Maximum number of queries exceeded, when using trackTimestamp it is necessary to resolves the queries via renderer.resolveTimestampsAsync( THREE.TimestampQuery.${this.type.toUpperCase()} ).`),null;const t=this.currentQueryIndex;return this.currentQueryIndex+=2,this.queryOffsets.set(e.id,t),t}async resolveQueriesAsync(){if(!this.trackTimestamp||this.currentQueryIndex===0||this.isDisposed)return this.lastValue;if(this.pendingResolve)return this.pendingResolve;this.pendingResolve=this._resolveQueries();try{return await this.pendingResolve}finally{this.pendingResolve=null}}async _resolveQueries(){if(this.isDisposed)return this.lastValue;try{if(this.resultBuffer.mapState!=="unmapped")return this.lastValue;const e=new Map(this.queryOffsets),t=this.currentQueryIndex,n=t*8;this.currentQueryIndex=0,this.queryOffsets.clear();const r=this.device.createCommandEncoder();r.resolveQuerySet(this.querySet,0,t,this.resolveBuffer,0),r.copyBufferToBuffer(this.resolveBuffer,0,this.resultBuffer,0,n);const s=r.finish();if(this.device.queue.submit([s]),this.resultBuffer.mapState!=="unmapped")return this.lastValue;if(await this.resultBuffer.mapAsync(GPUMapMode.READ,0,n),this.isDisposed)return this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue;const o=new BigUint64Array(this.resultBuffer.getMappedRange(0,n));let a=0;for(const[,l]of e){const u=o[l],c=o[l+1],A=Number(c-u)/1e6;a+=A}return this.resultBuffer.unmap(),this.lastValue=a,a}catch(e){return console.error("Error resolving queries:",e),this.resultBuffer.mapState==="mapped"&&this.resultBuffer.unmap(),this.lastValue}}async dispose(){if(!this.isDisposed){if(this.isDisposed=!0,this.pendingResolve)try{await this.pendingResolve}catch(e){console.error("Error waiting for pending resolve:",e)}if(this.resultBuffer&&this.resultBuffer.mapState==="mapped")try{this.resultBuffer.unmap()}catch(e){console.error("Error unmapping buffer:",e)}this.querySet&&(this.querySet.destroy(),this.querySet=null),this.resolveBuffer&&(this.resolveBuffer.destroy(),this.resolveBuffer=null),this.resultBuffer&&(this.resultBuffer.destroy(),this.resultBuffer=null),this.queryOffsets.clear(),this.pendingResolve=null}}}class zoe extends MD{constructor(e={}){super(e),this.isWebGPUBackend=!0,this.parameters.alpha=e.alpha===void 0?!0:e.alpha,this.parameters.compatibilityMode=e.compatibilityMode===void 0?!1:e.compatibilityMode,this.parameters.requiredLimits=e.requiredLimits===void 0?{}:e.requiredLimits,this.compatibilityMode=this.parameters.compatibilityMode,this.device=null,this.context=null,this.colorBuffer=null,this.defaultRenderPassdescriptor=null,this.utils=new Doe(this),this.attributeUtils=new Uoe(this),this.bindingUtils=new Ooe(this),this.pipelineUtils=new koe(this),this.textureUtils=new Toe(this),this.occludedResolveCache=new Map}async init(e){await super.init(e);const t=this.parameters;let n;if(t.device===void 0){const o={powerPreference:t.powerPreference,featureLevel:t.compatibilityMode?"compatibility":void 0},a=typeof navigator<"u"?await navigator.gpu.requestAdapter(o):null;if(a===null)throw new Error("WebGPUBackend: Unable to create WebGPU adapter.");const l=Object.values(Iy),u=[];for(const A of l)a.features.has(A)&&u.push(A);const c={requiredFeatures:u,requiredLimits:t.requiredLimits};n=await a.requestDevice(c)}else n=t.device;n.lost.then(o=>{const a={api:"WebGPU",message:o.message||"Unknown reason",reason:o.reason||null,originalEvent:o};e.onDeviceLost(a)});const r=t.context!==void 0?t.context:e.domElement.getContext("webgpu");this.device=n,this.context=r;const s=t.alpha?"premultiplied":"opaque";this.trackTimestamp=this.trackTimestamp&&this.hasFeature(Iy.TimestampQuery),this.context.configure({device:this.device,format:this.utils.getPreferredCanvasFormat(),usage:GPUTextureUsage.RENDER_ATTACHMENT|GPUTextureUsage.COPY_SRC,alphaMode:s}),this.updateSize()}get coordinateSystem(){return Qa}async getArrayBufferAsync(e){return await this.attributeUtils.getArrayBufferAsync(e)}getContext(){return this.context}_getDefaultRenderPassDescriptor(){let e=this.defaultRenderPassdescriptor;if(e===null){const n=this.renderer;e={colorAttachments:[{view:null}]},(this.renderer.depth===!0||this.renderer.stencil===!0)&&(e.depthStencilAttachment={view:this.textureUtils.getDepthBuffer(n.depth,n.stencil).createView()});const r=e.colorAttachments[0];this.renderer.samples>0?r.view=this.colorBuffer.createView():r.resolveTarget=void 0,this.defaultRenderPassdescriptor=e}const t=e.colorAttachments[0];return this.renderer.samples>0?t.resolveTarget=this.context.getCurrentTexture().createView():t.view=this.context.getCurrentTexture().createView(),e}_isRenderCameraDepthArray(e){return e.depthTexture&&e.depthTexture.image.depth>1&&e.camera.isArrayCamera}_getRenderPassDescriptor(e,t={}){const n=e.renderTarget,r=this.get(n);let s=r.descriptors;if(s===void 0||r.width!==n.width||r.height!==n.height||r.dimensions!==n.dimensions||r.activeMipmapLevel!==e.activeMipmapLevel||r.activeCubeFace!==e.activeCubeFace||r.samples!==n.samples){s={},r.descriptors=s;const u=()=>{n.removeEventListener("dispose",u),this.delete(n)};n.hasEventListener("dispose",u)===!1&&n.addEventListener("dispose",u)}const o=e.getCacheKey();let a=s[o];if(a===void 0){const u=e.textures,c=[];let A;const m=this._isRenderCameraDepthArray(e);for(let _=0;_<u.length;_++){const b=this.get(u[_]),M={label:`colorAttachment_${_}`,baseMipLevel:e.activeMipmapLevel,mipLevelCount:1,baseArrayLayer:e.activeCubeFace,arrayLayerCount:1,dimension:$r.TwoD};if(n.isRenderTarget3D)A=e.activeCubeFace,M.baseArrayLayer=0,M.dimension=$r.ThreeD,M.depthOrArrayLayers=u[_].image.depth;else if(n.isRenderTarget&&u[_].image.depth>1)if(m===!0){const w=e.camera.cameras;for(let T=0;T<w.length;T++){const N={...M,baseArrayLayer:T,arrayLayerCount:1,dimension:$r.TwoD},P=b.texture.createView(N);c.push({view:P,resolveTarget:void 0,depthSlice:void 0})}}else M.dimension=$r.TwoDArray,M.depthOrArrayLayers=u[_].image.depth;if(m!==!0){const w=b.texture.createView(M);let T,N;b.msaaTexture!==void 0?(T=b.msaaTexture.createView(),N=w):(T=w,N=void 0),c.push({view:T,resolveTarget:N,depthSlice:A})}}if(a={textureViews:c},e.depth){const _=this.get(e.depthTexture),b={};e.depthTexture.isArrayTexture&&(b.dimension=$r.TwoD,b.arrayLayerCount=1,b.baseArrayLayer=e.activeCubeFace),a.depthStencilView=_.texture.createView(b)}s[o]=a,r.width=n.width,r.height=n.height,r.samples=n.samples,r.activeMipmapLevel=e.activeMipmapLevel,r.activeCubeFace=e.activeCubeFace,r.dimensions=n.dimensions}const l={colorAttachments:[]};for(let u=0;u<a.textureViews.length;u++){const c=a.textureViews[u];let A={r:0,g:0,b:0,a:1};u===0&&t.clearValue&&(A=t.clearValue),l.colorAttachments.push({view:c.view,depthSlice:c.depthSlice,resolveTarget:c.resolveTarget,loadOp:t.loadOp||Ci.Load,storeOp:t.storeOp||fo.Store,clearValue:A})}return a.depthStencilView&&(l.depthStencilAttachment={view:a.depthStencilView}),l}beginRender(e){const t=this.get(e),n=this.device,r=e.occlusionQueryCount;let s;r>0&&(t.currentOcclusionQuerySet&&t.currentOcclusionQuerySet.destroy(),t.currentOcclusionQueryBuffer&&t.currentOcclusionQueryBuffer.destroy(),t.currentOcclusionQuerySet=t.occlusionQuerySet,t.currentOcclusionQueryBuffer=t.occlusionQueryBuffer,t.currentOcclusionQueryObjects=t.occlusionQueryObjects,s=n.createQuerySet({type:"occlusion",count:r,label:`occlusionQuerySet_${e.id}`}),t.occlusionQuerySet=s,t.occlusionQueryIndex=0,t.occlusionQueryObjects=new Array(r),t.lastOcclusionObject=null);let o;e.textures===null?o=this._getDefaultRenderPassDescriptor():o=this._getRenderPassDescriptor(e,{loadOp:Ci.Load}),this.initTimestampQuery(e,o),o.occlusionQuerySet=s;const a=o.depthStencilAttachment;if(e.textures!==null){const u=o.colorAttachments;for(let c=0;c<u.length;c++){const A=u[c];e.clearColor?(A.clearValue=c===0?e.clearColorValue:{r:0,g:0,b:0,a:1},A.loadOp=Ci.Clear):A.loadOp=Ci.Load,A.storeOp=fo.Store}}else{const u=o.colorAttachments[0];e.clearColor?(u.clearValue=e.clearColorValue,u.loadOp=Ci.Clear):u.loadOp=Ci.Load,u.storeOp=fo.Store}e.depth&&(e.clearDepth?(a.depthClearValue=e.clearDepthValue,a.depthLoadOp=Ci.Clear):a.depthLoadOp=Ci.Load,a.depthStoreOp=fo.Store),e.stencil&&(e.clearStencil?(a.stencilClearValue=e.clearStencilValue,a.stencilLoadOp=Ci.Clear):a.stencilLoadOp=Ci.Load,a.stencilStoreOp=fo.Store);const l=n.createCommandEncoder({label:"renderContext_"+e.id});if(this._isRenderCameraDepthArray(e)===!0){const u=e.camera.cameras;!t.layerDescriptors||t.layerDescriptors.length!==u.length?this._createDepthLayerDescriptors(e,t,o,u):this._updateDepthLayerDescriptors(e,t,u),t.bundleEncoders=[],t.bundleSets=[];for(let c=0;c<u.length;c++){const A=this.pipelineUtils.createBundleEncoder(e,"renderBundleArrayCamera_"+c),m={attributes:{},bindingGroups:[],pipeline:null,index:null};t.bundleEncoders.push(A),t.bundleSets.push(m)}t.currentPass=null}else{const u=l.beginRenderPass(o);if(t.currentPass=u,e.viewport&&this.updateViewport(e),e.scissor){const{x:c,y:A,width:m,height:_}=e.scissorValue;u.setScissorRect(c,A,m,_)}}t.descriptor=o,t.encoder=l,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.renderBundles=[]}_createDepthLayerDescriptors(e,t,n,r){const s=n.depthStencilAttachment;t.layerDescriptors=[];const o=this.get(e.depthTexture);o.viewCache||(o.viewCache=[]);for(let a=0;a<r.length;a++){const l={...n,colorAttachments:[{...n.colorAttachments[0],view:n.colorAttachments[a].view}]};if(n.depthStencilAttachment){const u=a;o.viewCache[u]||(o.viewCache[u]=o.texture.createView({dimension:$r.TwoD,baseArrayLayer:a,arrayLayerCount:1})),l.depthStencilAttachment={view:o.viewCache[u],depthLoadOp:s.depthLoadOp||Ci.Clear,depthStoreOp:s.depthStoreOp||fo.Store,depthClearValue:s.depthClearValue||1},e.stencil&&(l.depthStencilAttachment.stencilLoadOp=s.stencilLoadOp,l.depthStencilAttachment.stencilStoreOp=s.stencilStoreOp,l.depthStencilAttachment.stencilClearValue=s.stencilClearValue)}else l.depthStencilAttachment={...s};t.layerDescriptors.push(l)}}_updateDepthLayerDescriptors(e,t,n){for(let r=0;r<n.length;r++){const s=t.layerDescriptors[r];if(s.depthStencilAttachment){const o=s.depthStencilAttachment;e.depth&&(e.clearDepth?(o.depthClearValue=e.clearDepthValue,o.depthLoadOp=Ci.Clear):o.depthLoadOp=Ci.Load),e.stencil&&(e.clearStencil?(o.stencilClearValue=e.clearStencilValue,o.stencilLoadOp=Ci.Clear):o.stencilLoadOp=Ci.Load)}}}finishRender(e){const t=this.get(e),n=e.occlusionQueryCount;t.renderBundles.length>0&&t.currentPass.executeBundles(t.renderBundles),n>t.occlusionQueryIndex&&t.currentPass.endOcclusionQuery();const r=t.encoder;if(this._isRenderCameraDepthArray(e)===!0){const s=[];for(let o=0;o<t.bundleEncoders.length;o++){const a=t.bundleEncoders[o];s.push(a.finish())}for(let o=0;o<t.layerDescriptors.length;o++)if(o<s.length){const a=t.layerDescriptors[o],l=r.beginRenderPass(a);if(e.viewport){const{x:u,y:c,width:A,height:m,minDepth:_,maxDepth:b}=e.viewportValue;l.setViewport(u,c,A,m,_,b)}if(e.scissor){const{x:u,y:c,width:A,height:m}=e.scissorValue;l.setScissorRect(u,c,A,m)}l.executeBundles([s[o]]),l.end()}}else t.currentPass&&t.currentPass.end();if(n>0){const s=n*8;let o=this.occludedResolveCache.get(s);o===void 0&&(o=this.device.createBuffer({size:s,usage:GPUBufferUsage.QUERY_RESOLVE|GPUBufferUsage.COPY_SRC}),this.occludedResolveCache.set(s,o));const a=this.device.createBuffer({size:s,usage:GPUBufferUsage.COPY_DST|GPUBufferUsage.MAP_READ});t.encoder.resolveQuerySet(t.occlusionQuerySet,0,n,o,0),t.encoder.copyBufferToBuffer(o,0,a,0,s),t.occlusionQueryBuffer=a,this.resolveOccludedAsync(e)}if(this.device.queue.submit([t.encoder.finish()]),e.textures!==null){const s=e.textures;for(let o=0;o<s.length;o++){const a=s[o];a.generateMipmaps===!0&&this.textureUtils.generateMipmaps(a)}}}isOccluded(e,t){const n=this.get(e);return n.occluded&&n.occluded.has(t)}async resolveOccludedAsync(e){const t=this.get(e),{currentOcclusionQueryBuffer:n,currentOcclusionQueryObjects:r}=t;if(n&&r){const s=new WeakSet;t.currentOcclusionQueryObjects=null,t.currentOcclusionQueryBuffer=null,await n.mapAsync(GPUMapMode.READ);const o=n.getMappedRange(),a=new BigUint64Array(o);for(let l=0;l<r.length;l++)a[l]===BigInt(0)&&s.add(r[l]);n.destroy(),t.occluded=s}}updateViewport(e){const{currentPass:t}=this.get(e),{x:n,y:r,width:s,height:o,minDepth:a,maxDepth:l}=e.viewportValue;t.setViewport(n,r,s,o,a,l)}getClearColor(){const e=super.getClearColor();return this.renderer.alpha===!0&&(e.r*=e.a,e.g*=e.a,e.b*=e.a),e}clear(e,t,n,r=null){const s=this.device,o=this.renderer;let a=[],l,u,c,A;if(e){const b=this.getClearColor();u={r:b.r,g:b.g,b:b.b,a:b.a}}if(r===null){c=o.depth,A=o.stencil;const b=this._getDefaultRenderPassDescriptor();if(e){a=b.colorAttachments;const M=a[0];M.clearValue=u,M.loadOp=Ci.Clear,M.storeOp=fo.Store}(c||A)&&(l=b.depthStencilAttachment)}else{c=r.depth,A=r.stencil;const b={loadOp:e?Ci.Clear:Ci.Load,clearValue:e?u:void 0};c&&(b.depthLoadOp=t?Ci.Clear:Ci.Load,b.depthClearValue=t?o.getClearDepth():void 0,b.depthStoreOp=fo.Store),A&&(b.stencilLoadOp=n?Ci.Clear:Ci.Load,b.stencilClearValue=n?o.getClearStencil():void 0,b.stencilStoreOp=fo.Store);const M=this._getRenderPassDescriptor(r,b);a=M.colorAttachments,l=M.depthStencilAttachment}c&&l&&(t?(l.depthLoadOp=Ci.Clear,l.depthClearValue=o.getClearDepth(),l.depthStoreOp=fo.Store):(l.depthLoadOp=Ci.Load,l.depthStoreOp=fo.Store)),A&&l&&(n?(l.stencilLoadOp=Ci.Clear,l.stencilClearValue=o.getClearStencil(),l.stencilStoreOp=fo.Store):(l.stencilLoadOp=Ci.Load,l.stencilStoreOp=fo.Store));const m=s.createCommandEncoder({label:"clear"});m.beginRenderPass({colorAttachments:a,depthStencilAttachment:l}).end(),s.queue.submit([m.finish()])}beginCompute(e){const t=this.get(e),n={label:"computeGroup_"+e.id};this.initTimestampQuery(e,n),t.cmdEncoderGPU=this.device.createCommandEncoder({label:"computeGroup_"+e.id}),t.passEncoderGPU=t.cmdEncoderGPU.beginComputePass(n)}compute(e,t,n,r,s=null){const o=this.get(t),{passEncoderGPU:a}=this.get(e),l=this.get(r).pipeline;this.pipelineUtils.setPipeline(a,l);for(let c=0,A=n.length;c<A;c++){const m=n[c],_=this.get(m);a.setBindGroup(c,_.group)}let u;if(s===null&&(s=t.count),typeof s=="number"){const c=s;if(o.dispatchSize===void 0||o.count!==c){o.dispatchSize=[0,1,1],o.count=c;const A=t.workgroupSize;let m=A[0];for(let M=1;M<A.length;M++)m*=A[M];const _=Math.ceil(c/m),b=this.device.limits.maxComputeWorkgroupsPerDimension;u=[_,1,1],_>b&&(u[0]=Math.min(_,b),u[1]=Math.ceil(_/b)),o.dispatchSize=u}u=o.dispatchSize}else u=s;a.dispatchWorkgroups(u[0],u[1]||1,u[2]||1)}finishCompute(e){const t=this.get(e);t.passEncoderGPU.end(),this.device.queue.submit([t.cmdEncoderGPU.finish()])}async waitForGPU(){await this.device.queue.onSubmittedWorkDone()}draw(e,t){const{object:n,material:r,context:s,pipeline:o}=e,a=e.getBindings(),l=this.get(s),u=this.get(o).pipeline,c=e.getIndex(),A=c!==null,m=e.getDrawParameters();if(m===null)return;const _=(M,w)=>{this.pipelineUtils.setPipeline(M,u),w.pipeline=u;const T=w.bindingGroups;for(let P=0,I=a.length;P<I;P++){const B=a[P],F=this.get(B);T[B.index]!==B.id&&(M.setBindGroup(B.index,F.group),T[B.index]=B.id)}if(A===!0&&w.index!==c){const P=this.get(c).buffer,I=c.array instanceof Uint16Array?i5.Uint16:i5.Uint32;M.setIndexBuffer(P,I),w.index=c}const N=e.getVertexBuffers();for(let P=0,I=N.length;P<I;P++){const B=N[P];if(w.attributes[P]!==B){const F=this.get(B).buffer;M.setVertexBuffer(P,F),w.attributes[P]=B}}s.stencil===!0&&r.stencilWrite===!0&&l.currentStencilRef!==r.stencilRef&&(M.setStencilReference(r.stencilRef),l.currentStencilRef=r.stencilRef)},b=(M,w)=>{if(_(M,w),n.isBatchedMesh===!0){const T=n._multiDrawStarts,N=n._multiDrawCounts,P=n._multiDrawCount,I=n._multiDrawInstances;I!==null&&$o("THREE.WebGPUBackend: renderMultiDrawInstances has been deprecated and will be removed in r184. Append to renderMultiDraw arguments and use indirection.");for(let B=0;B<P;B++){const F=I?I[B]:1,O=F>1?0:B;A===!0?M.drawIndexed(N[B],F,T[B]/c.array.BYTES_PER_ELEMENT,0,O):M.draw(N[B],F,T[B],O),t.update(n,N[B],F)}}else if(A===!0){const{vertexCount:T,instanceCount:N,firstVertex:P}=m,I=e.getIndirect();if(I!==null){const B=this.get(I).buffer;M.drawIndexedIndirect(B,0)}else M.drawIndexed(T,N,P,0,0);t.update(n,T,N)}else{const{vertexCount:T,instanceCount:N,firstVertex:P}=m,I=e.getIndirect();if(I!==null){const B=this.get(I).buffer;M.drawIndirect(B,0)}else M.draw(T,N,P,0);t.update(n,T,N)}};if(e.camera.isArrayCamera&&e.camera.cameras.length>0){const M=this.get(e.camera),w=e.camera.cameras,T=e.getBindingGroup("cameraIndex");if(M.indexesGPU===void 0||M.indexesGPU.length!==w.length){const P=this.get(T),I=[],B=new Uint32Array([0,0,0,0]);for(let F=0,O=w.length;F<O;F++){B[0]=F;const V=this.bindingUtils.createBindGroupIndex(B,P.layout);I.push(V)}M.indexesGPU=I}const N=this.renderer.getPixelRatio();for(let P=0,I=w.length;P<I;P++){const B=w[P];if(n.layers.test(B.layers)){const F=B.viewport;let O=l.currentPass,V=l.currentSets;if(l.bundleEncoders){const U=l.bundleEncoders[P],z=l.bundleSets[P];O=U,V=z}F&&O.setViewport(Math.floor(F.x*N),Math.floor(F.y*N),Math.floor(F.width*N),Math.floor(F.height*N),s.viewportValue.minDepth,s.viewportValue.maxDepth),T&&M.indexesGPU&&(O.setBindGroup(T.index,M.indexesGPU[P]),V.bindingGroups[T.index]=T.id),b(O,V)}}}else if(l.currentPass){if(l.occlusionQuerySet!==void 0){const M=l.lastOcclusionObject;M!==n&&(M!==null&&M.occlusionTest===!0&&(l.currentPass.endOcclusionQuery(),l.occlusionQueryIndex++),n.occlusionTest===!0&&(l.currentPass.beginOcclusionQuery(l.occlusionQueryIndex),l.occlusionQueryObjects[l.occlusionQueryIndex]=n),l.lastOcclusionObject=n)}b(l.currentPass,l.currentSets)}}needsRenderUpdate(e){const t=this.get(e),{object:n,material:r}=e,s=this.utils,o=s.getSampleCountRenderContext(e.context),a=s.getCurrentColorSpace(e.context),l=s.getCurrentColorFormat(e.context),u=s.getCurrentDepthStencilFormat(e.context),c=s.getPrimitiveTopology(n,r);let A=!1;return(t.material!==r||t.materialVersion!==r.version||t.transparent!==r.transparent||t.blending!==r.blending||t.premultipliedAlpha!==r.premultipliedAlpha||t.blendSrc!==r.blendSrc||t.blendDst!==r.blendDst||t.blendEquation!==r.blendEquation||t.blendSrcAlpha!==r.blendSrcAlpha||t.blendDstAlpha!==r.blendDstAlpha||t.blendEquationAlpha!==r.blendEquationAlpha||t.colorWrite!==r.colorWrite||t.depthWrite!==r.depthWrite||t.depthTest!==r.depthTest||t.depthFunc!==r.depthFunc||t.stencilWrite!==r.stencilWrite||t.stencilFunc!==r.stencilFunc||t.stencilFail!==r.stencilFail||t.stencilZFail!==r.stencilZFail||t.stencilZPass!==r.stencilZPass||t.stencilFuncMask!==r.stencilFuncMask||t.stencilWriteMask!==r.stencilWriteMask||t.side!==r.side||t.alphaToCoverage!==r.alphaToCoverage||t.sampleCount!==o||t.colorSpace!==a||t.colorFormat!==l||t.depthStencilFormat!==u||t.primitiveTopology!==c||t.clippingContextCacheKey!==e.clippingContextCacheKey)&&(t.material=r,t.materialVersion=r.version,t.transparent=r.transparent,t.blending=r.blending,t.premultipliedAlpha=r.premultipliedAlpha,t.blendSrc=r.blendSrc,t.blendDst=r.blendDst,t.blendEquation=r.blendEquation,t.blendSrcAlpha=r.blendSrcAlpha,t.blendDstAlpha=r.blendDstAlpha,t.blendEquationAlpha=r.blendEquationAlpha,t.colorWrite=r.colorWrite,t.depthWrite=r.depthWrite,t.depthTest=r.depthTest,t.depthFunc=r.depthFunc,t.stencilWrite=r.stencilWrite,t.stencilFunc=r.stencilFunc,t.stencilFail=r.stencilFail,t.stencilZFail=r.stencilZFail,t.stencilZPass=r.stencilZPass,t.stencilFuncMask=r.stencilFuncMask,t.stencilWriteMask=r.stencilWriteMask,t.side=r.side,t.alphaToCoverage=r.alphaToCoverage,t.sampleCount=o,t.colorSpace=a,t.colorFormat=l,t.depthStencilFormat=u,t.primitiveTopology=c,t.clippingContextCacheKey=e.clippingContextCacheKey,A=!0),A}getRenderCacheKey(e){const{object:t,material:n}=e,r=this.utils,s=e.context;return[n.transparent,n.blending,n.premultipliedAlpha,n.blendSrc,n.blendDst,n.blendEquation,n.blendSrcAlpha,n.blendDstAlpha,n.blendEquationAlpha,n.colorWrite,n.depthWrite,n.depthTest,n.depthFunc,n.stencilWrite,n.stencilFunc,n.stencilFail,n.stencilZFail,n.stencilZPass,n.stencilFuncMask,n.stencilWriteMask,n.side,r.getSampleCountRenderContext(s),r.getCurrentColorSpace(s),r.getCurrentColorFormat(s),r.getCurrentDepthStencilFormat(s),r.getPrimitiveTopology(t,n),e.getGeometryCacheKey(),e.clippingContextCacheKey].join()}createSampler(e){this.textureUtils.createSampler(e)}destroySampler(e){this.textureUtils.destroySampler(e)}createDefaultTexture(e){this.textureUtils.createDefaultTexture(e)}createTexture(e,t){this.textureUtils.createTexture(e,t)}updateTexture(e,t){this.textureUtils.updateTexture(e,t)}generateMipmaps(e){this.textureUtils.generateMipmaps(e)}destroyTexture(e){this.textureUtils.destroyTexture(e)}async copyTextureToBuffer(e,t,n,r,s,o){return this.textureUtils.copyTextureToBuffer(e,t,n,r,s,o)}initTimestampQuery(e,t){if(!this.trackTimestamp)return;const n=e.isComputeNode?"compute":"render";this.timestampQueryPool[n]||(this.timestampQueryPool[n]=new Voe(this.device,n,2048));const r=this.timestampQueryPool[n],s=r.allocateQueriesForContext(e);t.timestampWrites={querySet:r.querySet,beginningOfPassWriteIndex:s,endOfPassWriteIndex:s+1}}createNodeBuilder(e,t){return new Loe(e,t)}createProgram(e){const t=this.get(e);t.module={module:this.device.createShaderModule({code:e.code,label:e.stage+(e.name!==""?`_${e.name}`:"")}),entryPoint:"main"}}destroyProgram(e){this.delete(e)}createRenderPipeline(e,t){this.pipelineUtils.createRenderPipeline(e,t)}createComputePipeline(e,t){this.pipelineUtils.createComputePipeline(e,t)}beginBundle(e){const t=this.get(e);t._currentPass=t.currentPass,t._currentSets=t.currentSets,t.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.currentPass=this.pipelineUtils.createBundleEncoder(e)}finishBundle(e,t){const n=this.get(e),s=n.currentPass.finish();this.get(t).bundleGPU=s,n.currentSets=n._currentSets,n.currentPass=n._currentPass}addBundle(e,t){this.get(e).renderBundles.push(this.get(t).bundleGPU)}createBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBindings(e,t,n,r){this.bindingUtils.createBindings(e,t,n,r)}updateBinding(e){this.bindingUtils.updateBinding(e)}createIndexAttribute(e){let t=GPUBufferUsage.INDEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST;(e.isStorageBufferAttribute||e.isStorageInstancedBufferAttribute)&&(t|=GPUBufferUsage.STORAGE),this.attributeUtils.createAttribute(e,t)}createAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.VERTEX|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}createIndirectStorageAttribute(e){this.attributeUtils.createAttribute(e,GPUBufferUsage.STORAGE|GPUBufferUsage.INDIRECT|GPUBufferUsage.COPY_SRC|GPUBufferUsage.COPY_DST)}updateAttribute(e){this.attributeUtils.updateAttribute(e)}destroyAttribute(e){this.attributeUtils.destroyAttribute(e)}updateSize(){this.colorBuffer=this.textureUtils.getColorBuffer(),this.defaultRenderPassdescriptor=null}getMaxAnisotropy(){return 16}hasFeature(e){return this.device.features.has(e)}copyTextureToTexture(e,t,n=null,r=null,s=0,o=0){let a=0,l=0,u=0,c=0,A=0,m=0,_=e.image.width,b=e.image.height,M=1;n!==null&&(n.isBox3===!0?(c=n.min.x,A=n.min.y,m=n.min.z,_=n.max.x-n.min.x,b=n.max.y-n.min.y,M=n.max.z-n.min.z):(c=n.min.x,A=n.min.y,_=n.max.x-n.min.x,b=n.max.y-n.min.y,M=1)),r!==null&&(a=r.x,l=r.y,u=r.z||0);const w=this.device.createCommandEncoder({label:"copyTextureToTexture_"+e.id+"_"+t.id}),T=this.get(e).texture,N=this.get(t).texture;w.copyTextureToTexture({texture:T,mipLevel:s,origin:{x:c,y:A,z:m}},{texture:N,mipLevel:o,origin:{x:a,y:l,z:u}},[_,b,M]),this.device.queue.submit([w.finish()]),o===0&&t.generateMipmaps&&this.textureUtils.generateMipmaps(t)}copyFramebufferToTexture(e,t,n){const r=this.get(t);let s=null;t.renderTarget?e.isDepthTexture?s=this.get(t.depthTexture).texture:s=this.get(t.textures[0]).texture:e.isDepthTexture?s=this.textureUtils.getDepthBuffer(t.depth,t.stencil):s=this.context.getCurrentTexture();const o=this.get(e).texture;if(s.format!==o.format){console.error("WebGPUBackend: copyFramebufferToTexture: Source and destination formats do not match.",s.format,o.format);return}let a;if(r.currentPass?(r.currentPass.end(),a=r.encoder):a=this.device.createCommandEncoder({label:"copyFramebufferToTexture_"+e.id}),a.copyTextureToTexture({texture:s,origin:[n.x,n.y,0]},{texture:o},[n.z,n.w]),r.currentPass){const{descriptor:l}=r;for(let u=0;u<l.colorAttachments.length;u++)l.colorAttachments[u].loadOp=Ci.Load;if(t.depth&&(l.depthStencilAttachment.depthLoadOp=Ci.Load),t.stencil&&(l.depthStencilAttachment.stencilLoadOp=Ci.Load),r.currentPass=a.beginRenderPass(l),r.currentSets={attributes:{},bindingGroups:[],pipeline:null,index:null},t.viewport&&this.updateViewport(t),t.scissor){const{x:u,y:c,width:A,height:m}=t.scissorValue;r.currentPass.setScissorRect(u,c,A,m)}}else this.device.queue.submit([a.finish()]);e.generateMipmaps&&this.textureUtils.generateMipmaps(e)}}class Goe extends n6{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o),this.iesMap=null}copy(e,t){return super.copy(e,t),this.iesMap=e.iesMap,this}}class qoe extends n6{constructor(e,t,n,r,s,o){super(e,t,n,r,s,o),this.aspect=null}copy(e,t){return super.copy(e,t),this.aspect=e.aspect,this}}class Hoe extends yD{constructor(){super(),this.addMaterial(xJ,"MeshPhongMaterial"),this.addMaterial(pL,"MeshStandardMaterial"),this.addMaterial(aee,"MeshPhysicalMaterial"),this.addMaterial(hee,"MeshToonMaterial"),this.addMaterial(AJ,"MeshBasicMaterial"),this.addMaterial(vJ,"MeshLambertMaterial"),this.addMaterial(uJ,"MeshNormalMaterial"),this.addMaterial(dee,"MeshMatcapMaterial"),this.addMaterial(nJ,"LineBasicMaterial"),this.addMaterial(rJ,"LineDashedMaterial"),this.addMaterial(gee,"PointsMaterial"),this.addMaterial(gL,"SpriteMaterial"),this.addMaterial(_ee,"ShadowMaterial"),this.addLight(die,Dv),this.addLight(bse,Bv),this.addLight(Sse,Uv),this.addLight(Mx,n6),this.addLight(Ese,Fv),this.addLight(Rse,Iv),this.addLight(Cse,Ov),this.addLight(Tse,Goe),this.addLight(Mse,qoe),this.addToneMapping(FL,Qy),this.addToneMapping(UL,Yy),this.addToneMapping(OL,Ky),this.addToneMapping(kL,y9),this.addToneMapping(VL,Zy),this.addToneMapping(zL,Jy)}}class Woe extends Xse{constructor(e={}){let t;e.forceWebGL?t=rM:(t=zoe,e.getFallback=()=>(console.warn("THREE.WebGPURenderer: WebGPU is not available, running under WebGL2 backend."),new rM(e)));const n=new t(e);super(n,e),this.library=new Hoe,this.isWebGPURenderer=!0,typeof __THREE_DEVTOOLS__<"u"&&__THREE_DEVTOOLS__.dispatchEvent(new CustomEvent("observe",{detail:this}))}}/**
 * @license
 * Copyright 2010-2025 Three.js Authors
 * SPDX-License-Identifier: MIT
 */q.BRDF_GGX;q.BRDF_Lambert;q.BasicPointShadowFilter;q.BasicShadowFilter;q.Break;q.Const;q.Continue;q.DFGApprox;q.D_GGX;q.Discard;q.EPSILON;q.F_Schlick;const joe=q.Fn;q.INFINITY;const $oe=q.If,Xoe=q.Loop;q.NodeAccess;q.NodeShaderStage;q.NodeType;q.NodeUpdateType;q.PCFShadowFilter;q.PCFSoftShadowFilter;q.PI;q.PI2;q.PointShadowFilter;q.Return;q.Schlick_to_F0;q.ScriptableNodeResources;q.ShaderNode;q.Stack;q.Switch;q.TBNViewMatrix;q.VSMShadowFilter;q.V_GGX_SmithCorrelated;q.Var;q.VarIntent;q.abs;q.acesFilmicToneMapping;q.acos;q.add;q.addMethodChaining;q.addNodeElement;q.agxToneMapping;q.all;q.alphaT;q.and;q.anisotropy;q.anisotropyB;q.anisotropyT;q.any;q.append;q.array;q.arrayBuffer;const Qoe=q.asin;q.assign;q.atan;q.atan2;q.atomicAdd;q.atomicAnd;q.atomicFunc;q.atomicLoad;q.atomicMax;q.atomicMin;q.atomicOr;q.atomicStore;q.atomicSub;q.atomicXor;q.attenuationColor;q.attenuationDistance;q.attribute;q.attributeArray;q.backgroundBlurriness;q.backgroundIntensity;q.backgroundRotation;q.batch;q.bentNormalView;q.billboarding;q.bitAnd;q.bitNot;q.bitOr;q.bitXor;q.bitangentGeometry;q.bitangentLocal;q.bitangentView;q.bitangentWorld;q.bitcast;q.blendBurn;q.blendColor;q.blendDodge;q.blendOverlay;q.blendScreen;q.blur;q.bool;q.buffer;q.bufferAttribute;q.bumpMap;q.burn;q.bvec2;q.bvec3;q.bvec4;q.bypass;q.cache;q.call;q.cameraFar;q.cameraIndex;q.cameraNear;q.cameraNormalMatrix;q.cameraPosition;q.cameraProjectionMatrix;q.cameraProjectionMatrixInverse;q.cameraViewMatrix;q.cameraWorldMatrix;q.cbrt;q.cdl;q.ceil;q.checker;q.cineonToneMapping;q.clamp;q.clearcoat;q.clearcoatNormalView;q.clearcoatRoughness;q.code;q.color;q.colorSpaceToWorking;q.colorToDirection;q.compute;q.computeKernel;q.computeSkinning;q.context;q.convert;q.convertColorSpace;q.convertToTexture;const Yoe=q.cos;q.cross;q.cubeTexture;q.cubeTextureBase;q.cubeToUV;q.dFdx;q.dFdy;q.dashSize;q.debug;q.decrement;q.decrementBefore;q.defaultBuildStages;q.defaultShaderStages;q.defined;q.degrees;q.deltaTime;q.densityFog;q.densityFogFactor;q.depth;q.depthPass;q.determinant;q.difference;q.diffuseColor;q.directPointLight;q.directionToColor;q.directionToFaceDirection;q.dispersion;q.distance;q.div;q.dodge;q.dot;q.drawIndex;q.dynamicBufferAttribute;q.element;q.emissive;q.equal;q.equals;q.equirectUV;const Koe=q.exp;q.exp2;q.expression;q.faceDirection;q.faceForward;q.faceforward;const Zoe=q.float;q.floor;q.fog;q.fract;q.frameGroup;q.frameId;q.frontFacing;q.fwidth;q.gain;q.gapSize;q.getConstNodeType;q.getCurrentStack;q.getDirection;q.getDistanceAttenuation;q.getGeometryRoughness;q.getNormalFromDepth;q.getParallaxCorrectNormal;q.getRoughness;q.getScreenPosition;q.getShIrradianceAt;q.getShadowMaterial;q.getShadowRenderObjectFunction;q.getTextureIndex;q.getViewPosition;q.globalId;q.glsl;q.glslFn;q.grayscale;q.greaterThan;q.greaterThanEqual;q.hash;q.highpModelNormalViewMatrix;q.highpModelViewMatrix;q.hue;q.increment;q.incrementBefore;q.instance;const Joe=q.instanceIndex;q.instancedArray;q.instancedBufferAttribute;q.instancedDynamicBufferAttribute;q.instancedMesh;q.int;q.inverse;q.inverseSqrt;q.inversesqrt;q.invocationLocalIndex;q.invocationSubgroupIndex;q.ior;q.iridescence;q.iridescenceIOR;q.iridescenceThickness;q.ivec2;q.ivec3;q.ivec4;q.js;q.label;q.length;q.lengthSq;q.lessThan;q.lessThanEqual;q.lightPosition;q.lightProjectionUV;q.lightShadowMatrix;q.lightTargetDirection;q.lightTargetPosition;q.lightViewPosition;q.lightingContext;q.lights;q.linearDepth;q.linearToneMapping;q.localId;q.log;q.log2;q.logarithmicDepthToViewZ;q.luminance;q.mat2;q.mat3;q.mat4;q.matcapUV;q.materialAO;q.materialAlphaTest;q.materialAnisotropy;q.materialAnisotropyVector;q.materialAttenuationColor;q.materialAttenuationDistance;q.materialClearcoat;q.materialClearcoatNormal;q.materialClearcoatRoughness;q.materialColor;q.materialDispersion;q.materialEmissive;q.materialEnvIntensity;q.materialEnvRotation;q.materialIOR;q.materialIridescence;q.materialIridescenceIOR;q.materialIridescenceThickness;q.materialLightMap;q.materialLineDashOffset;q.materialLineDashSize;q.materialLineGapSize;q.materialLineScale;q.materialLineWidth;q.materialMetalness;q.materialNormal;q.materialOpacity;q.materialPointSize;q.materialReference;q.materialReflectivity;q.materialRefractionRatio;q.materialRotation;q.materialRoughness;q.materialSheen;q.materialSheenRoughness;q.materialShininess;q.materialSpecular;q.materialSpecularColor;q.materialSpecularIntensity;q.materialSpecularStrength;q.materialThickness;q.materialTransmission;q.max;q.maxMipLevel;q.mediumpModelViewMatrix;q.metalness;q.min;q.mix;q.mixElement;q.mod;q.modInt;q.modelDirection;q.modelNormalMatrix;q.modelPosition;q.modelRadius;q.modelScale;q.modelViewMatrix;q.modelViewPosition;q.modelViewProjection;q.modelWorldMatrix;q.modelWorldMatrixInverse;q.morphReference;q.mrt;q.mul;q.mx_aastep;q.mx_add;q.mx_atan2;q.mx_cell_noise_float;q.mx_contrast;q.mx_divide;q.mx_fractal_noise_float;q.mx_fractal_noise_vec2;q.mx_fractal_noise_vec3;q.mx_fractal_noise_vec4;q.mx_frame;q.mx_heighttonormal;q.mx_hsvtorgb;q.mx_ifequal;q.mx_ifgreater;q.mx_ifgreatereq;q.mx_invert;q.mx_modulo;q.mx_multiply;q.mx_noise_float;q.mx_noise_vec3;q.mx_noise_vec4;q.mx_place2d;q.mx_power;q.mx_ramp4;q.mx_ramplr;q.mx_ramptb;q.mx_rgbtohsv;q.mx_rotate2d;q.mx_rotate3d;q.mx_safepower;q.mx_separate;q.mx_splitlr;q.mx_splittb;q.mx_srgb_texture_to_lin_rec709;q.mx_subtract;q.mx_timer;q.mx_transform_uv;q.mx_unifiednoise2d;q.mx_unifiednoise3d;q.mx_worley_noise_float;q.mx_worley_noise_vec2;q.mx_worley_noise_vec3;const eae=q.negate;q.neutralToneMapping;q.nodeArray;q.nodeImmutable;q.nodeObject;q.nodeObjectIntent;q.nodeObjects;q.nodeProxy;q.nodeProxyIntent;q.normalFlat;q.normalGeometry;q.normalLocal;q.normalMap;q.normalView;q.normalViewGeometry;q.normalWorld;q.normalWorldGeometry;q.normalize;q.not;q.notEqual;q.numWorkgroups;q.objectDirection;q.objectGroup;q.objectPosition;q.objectRadius;q.objectScale;q.objectViewPosition;q.objectWorldMatrix;q.OnObjectUpdate;q.OnMaterialUpdate;q.oneMinus;q.or;q.orthographicDepthToViewZ;q.oscSawtooth;q.oscSine;q.oscSquare;q.oscTriangle;q.output;q.outputStruct;q.overlay;q.overloadingFn;q.parabola;q.parallaxDirection;q.parallaxUV;q.parameter;q.pass;q.passTexture;q.pcurve;q.perspectiveDepthToViewZ;q.pmremTexture;q.pointShadow;q.pointUV;q.pointWidth;q.positionGeometry;q.positionLocal;q.positionPrevious;q.positionView;q.positionViewDirection;q.positionWorld;q.positionWorldDirection;q.posterize;q.pow;q.pow2;q.pow3;q.pow4;q.premultiplyAlpha;q.property;q.radians;q.rand;q.range;q.rangeFog;q.rangeFogFactor;q.reciprocal;q.reference;q.referenceBuffer;q.reflect;q.reflectVector;q.reflectView;q.reflector;q.refract;q.refractVector;q.refractView;q.reinhardToneMapping;q.remap;q.remapClamp;q.renderGroup;q.renderOutput;q.rendererReference;q.rotate;q.rotateUV;q.roughness;q.round;q.rtt;q.sRGBTransferEOTF;q.sRGBTransferOETF;q.sample;q.sampler;q.samplerComparison;q.saturate;q.saturation;q.screen;q.screenCoordinate;q.screenSize;q.screenUV;q.scriptable;q.scriptableValue;q.select;q.setCurrentStack;q.setName;q.shaderStages;q.shadow;q.shadowPositionWorld;q.shapeCircle;q.sharedUniformGroup;q.sheen;q.sheenRoughness;q.shiftLeft;q.shiftRight;q.shininess;q.sign;const tae=q.sin;q.sinc;q.skinning;q.smoothstep;q.smoothstepElement;q.specularColor;q.specularF90;q.spherizeUV;q.split;q.spritesheetUV;const nae=q.sqrt;q.stack;q.step;q.stepElement;const iae=q.storage;q.storageBarrier;q.storageObject;q.storageTexture;q.string;q.struct;q.sub;q.subBuild;q.subgroupIndex;q.subgroupSize;q.tan;q.tangentGeometry;q.tangentLocal;q.tangentView;q.tangentWorld;q.temp;q.texture;q.texture3D;q.textureBarrier;q.textureBicubic;q.textureBicubicLevel;q.textureCubeUV;q.textureLoad;q.textureSize;q.textureStore;q.thickness;q.time;q.timerDelta;q.timerGlobal;q.timerLocal;q.toneMapping;q.toneMappingExposure;q.toonOutlinePass;q.transformDirection;q.transformNormal;q.transformNormalToView;q.transformedClearcoatNormalView;q.transformedNormalView;q.transformedNormalWorld;q.transmission;q.transpose;q.triNoise3D;q.triplanarTexture;q.triplanarTextures;q.trunc;q.uint;const rae=q.uniform;q.uniformArray;q.uniformCubeTexture;q.uniformGroup;q.uniformTexture;q.unpremultiplyAlpha;q.userData;q.uv;q.uvec2;q.uvec3;q.uvec4;q.varying;q.varyingProperty;q.vec2;q.vec3;q.vec4;q.vectorComponents;q.velocity;q.vertexColor;q.vertexIndex;q.vertexStage;q.vibrance;q.viewZToLogarithmicDepth;q.viewZToOrthographicDepth;q.viewZToPerspectiveDepth;q.viewport;q.viewportCoordinate;q.viewportDepthTexture;q.viewportLinearDepth;q.viewportMipTexture;q.viewportResolution;q.viewportSafeUV;q.viewportSharedTexture;q.viewportSize;q.viewportTexture;q.viewportUV;q.wgsl;q.wgslFn;q.workgroupArray;q.workgroupBarrier;q.workgroupId;q.workingToColorSpace;q.xor;const fM=new ls,Ef=new J;class PD extends kv{constructor(){super(),this.isLineSegmentsGeometry=!0,this.type="LineSegmentsGeometry";const e=[-1,2,0,1,2,0,-1,1,0,1,1,0,-1,0,0,1,0,0,-1,-1,0,1,-1,0],t=[-1,2,1,2,-1,1,1,1,-1,-1,1,-1,-1,-2,1,-2],n=[0,2,1,2,3,1,2,4,3,4,5,3,4,6,5,6,7,5];this.setIndex(n),this.setAttribute("position",new Ht(e,3)),this.setAttribute("uv",new Ht(t,2))}applyMatrix4(e){const t=this.attributes.instanceStart,n=this.attributes.instanceEnd;return t!==void 0&&(t.applyMatrix4(e),n.applyMatrix4(e),t.needsUpdate=!0),this.boundingBox!==null&&this.computeBoundingBox(),this.boundingSphere!==null&&this.computeBoundingSphere(),this}setPositions(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new p8(t,6,1);return this.setAttribute("instanceStart",new bo(n,3,0)),this.setAttribute("instanceEnd",new bo(n,3,3)),this.instanceCount=this.attributes.instanceStart.count,this.computeBoundingBox(),this.computeBoundingSphere(),this}setColors(e){let t;e instanceof Float32Array?t=e:Array.isArray(e)&&(t=new Float32Array(e));const n=new p8(t,6,1);return this.setAttribute("instanceColorStart",new bo(n,3,0)),this.setAttribute("instanceColorEnd",new bo(n,3,3)),this}fromWireframeGeometry(e){return this.setPositions(e.attributes.position.array),this}fromEdgesGeometry(e){return this.setPositions(e.attributes.position.array),this}fromMesh(e){return this.fromWireframeGeometry(new yv(e.geometry)),this}fromLineSegments(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}computeBoundingBox(){this.boundingBox===null&&(this.boundingBox=new ls);const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;e!==void 0&&t!==void 0&&(this.boundingBox.setFromBufferAttribute(e),fM.setFromBufferAttribute(t),this.boundingBox.union(fM))}computeBoundingSphere(){this.boundingSphere===null&&(this.boundingSphere=new Kr),this.boundingBox===null&&this.computeBoundingBox();const e=this.attributes.instanceStart,t=this.attributes.instanceEnd;if(e!==void 0&&t!==void 0){const n=this.boundingSphere.center;this.boundingBox.getCenter(n);let r=0;for(let s=0,o=e.count;s<o;s++)Ef.fromBufferAttribute(e,s),r=Math.max(r,n.distanceToSquared(Ef)),Ef.fromBufferAttribute(t,s),r=Math.max(r,n.distanceToSquared(Ef));this.boundingSphere.radius=Math.sqrt(r),isNaN(this.boundingSphere.radius)&&console.error("THREE.LineSegmentsGeometry.computeBoundingSphere(): Computed radius is NaN. The instanced position data is likely to have NaN values.",this)}}toJSON(){}}Nt.line={worldUnits:{value:1},linewidth:{value:1},resolution:{value:new Ge(1,1)},dashOffset:{value:0},dashScale:{value:1},dashSize:{value:1},gapSize:{value:1}};po.line={uniforms:I9.merge([Nt.common,Nt.fog,Nt.line]),vertexShader:`
		#include <common>
		#include <color_pars_vertex>
		#include <fog_pars_vertex>
		#include <logdepthbuf_pars_vertex>
		#include <clipping_planes_pars_vertex>

		uniform float linewidth;
		uniform vec2 resolution;

		attribute vec3 instanceStart;
		attribute vec3 instanceEnd;

		attribute vec3 instanceColorStart;
		attribute vec3 instanceColorEnd;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#ifdef USE_DASH

			uniform float dashScale;
			attribute float instanceDistanceStart;
			attribute float instanceDistanceEnd;
			varying float vLineDistance;

		#endif

		void trimSegment( const in vec4 start, inout vec4 end ) {

			// trim end segment so it terminates between the camera plane and the near plane

			// conservative estimate of the near plane
			float a = projectionMatrix[ 2 ][ 2 ]; // 3nd entry in 3th column
			float b = projectionMatrix[ 3 ][ 2 ]; // 3nd entry in 4th column
			float nearEstimate = - 0.5 * b / a;

			float alpha = ( nearEstimate - start.z ) / ( end.z - start.z );

			end.xyz = mix( start.xyz, end.xyz, alpha );

		}

		void main() {

			#ifdef USE_COLOR

				vColor.xyz = ( position.y < 0.5 ) ? instanceColorStart : instanceColorEnd;

			#endif

			#ifdef USE_DASH

				vLineDistance = ( position.y < 0.5 ) ? dashScale * instanceDistanceStart : dashScale * instanceDistanceEnd;
				vUv = uv;

			#endif

			float aspect = resolution.x / resolution.y;

			// camera space
			vec4 start = modelViewMatrix * vec4( instanceStart, 1.0 );
			vec4 end = modelViewMatrix * vec4( instanceEnd, 1.0 );

			#ifdef WORLD_UNITS

				worldStart = start.xyz;
				worldEnd = end.xyz;

			#else

				vUv = uv;

			#endif

			// special case for perspective projection, and segments that terminate either in, or behind, the camera plane
			// clearly the gpu firmware has a way of addressing this issue when projecting into ndc space
			// but we need to perform ndc-space calculations in the shader, so we must address this issue directly
			// perhaps there is a more elegant solution -- WestLangley

			bool perspective = ( projectionMatrix[ 2 ][ 3 ] == - 1.0 ); // 4th entry in the 3rd column

			if ( perspective ) {

				if ( start.z < 0.0 && end.z >= 0.0 ) {

					trimSegment( start, end );

				} else if ( end.z < 0.0 && start.z >= 0.0 ) {

					trimSegment( end, start );

				}

			}

			// clip space
			vec4 clipStart = projectionMatrix * start;
			vec4 clipEnd = projectionMatrix * end;

			// ndc space
			vec3 ndcStart = clipStart.xyz / clipStart.w;
			vec3 ndcEnd = clipEnd.xyz / clipEnd.w;

			// direction
			vec2 dir = ndcEnd.xy - ndcStart.xy;

			// account for clip-space aspect ratio
			dir.x *= aspect;
			dir = normalize( dir );

			#ifdef WORLD_UNITS

				vec3 worldDir = normalize( end.xyz - start.xyz );
				vec3 tmpFwd = normalize( mix( start.xyz, end.xyz, 0.5 ) );
				vec3 worldUp = normalize( cross( worldDir, tmpFwd ) );
				vec3 worldFwd = cross( worldDir, worldUp );
				worldPos = position.y < 0.5 ? start: end;

				// height offset
				float hw = linewidth * 0.5;
				worldPos.xyz += position.x < 0.0 ? hw * worldUp : - hw * worldUp;

				// don't extend the line if we're rendering dashes because we
				// won't be rendering the endcaps
				#ifndef USE_DASH

					// cap extension
					worldPos.xyz += position.y < 0.5 ? - hw * worldDir : hw * worldDir;

					// add width to the box
					worldPos.xyz += worldFwd * hw;

					// endcaps
					if ( position.y > 1.0 || position.y < 0.0 ) {

						worldPos.xyz -= worldFwd * 2.0 * hw;

					}

				#endif

				// project the worldpos
				vec4 clip = projectionMatrix * worldPos;

				// shift the depth of the projected points so the line
				// segments overlap neatly
				vec3 clipPose = ( position.y < 0.5 ) ? ndcStart : ndcEnd;
				clip.z = clipPose.z * clip.w;

			#else

				vec2 offset = vec2( dir.y, - dir.x );
				// undo aspect ratio adjustment
				dir.x /= aspect;
				offset.x /= aspect;

				// sign flip
				if ( position.x < 0.0 ) offset *= - 1.0;

				// endcaps
				if ( position.y < 0.0 ) {

					offset += - dir;

				} else if ( position.y > 1.0 ) {

					offset += dir;

				}

				// adjust for linewidth
				offset *= linewidth;

				// adjust for clip-space to screen-space conversion // maybe resolution should be based on viewport ...
				offset /= resolution.y;

				// select end
				vec4 clip = ( position.y < 0.5 ) ? clipStart : clipEnd;

				// back to clip space
				offset *= clip.w;

				clip.xy += offset;

			#endif

			gl_Position = clip;

			vec4 mvPosition = ( position.y < 0.5 ) ? start : end; // this is an approximation

			#include <logdepthbuf_vertex>
			#include <clipping_planes_vertex>
			#include <fog_vertex>

		}
		`,fragmentShader:`
		uniform vec3 diffuse;
		uniform float opacity;
		uniform float linewidth;

		#ifdef USE_DASH

			uniform float dashOffset;
			uniform float dashSize;
			uniform float gapSize;

		#endif

		varying float vLineDistance;

		#ifdef WORLD_UNITS

			varying vec4 worldPos;
			varying vec3 worldStart;
			varying vec3 worldEnd;

			#ifdef USE_DASH

				varying vec2 vUv;

			#endif

		#else

			varying vec2 vUv;

		#endif

		#include <common>
		#include <color_pars_fragment>
		#include <fog_pars_fragment>
		#include <logdepthbuf_pars_fragment>
		#include <clipping_planes_pars_fragment>

		vec2 closestLineToLine(vec3 p1, vec3 p2, vec3 p3, vec3 p4) {

			float mua;
			float mub;

			vec3 p13 = p1 - p3;
			vec3 p43 = p4 - p3;

			vec3 p21 = p2 - p1;

			float d1343 = dot( p13, p43 );
			float d4321 = dot( p43, p21 );
			float d1321 = dot( p13, p21 );
			float d4343 = dot( p43, p43 );
			float d2121 = dot( p21, p21 );

			float denom = d2121 * d4343 - d4321 * d4321;

			float numer = d1343 * d4321 - d1321 * d4343;

			mua = numer / denom;
			mua = clamp( mua, 0.0, 1.0 );
			mub = ( d1343 + d4321 * ( mua ) ) / d4343;
			mub = clamp( mub, 0.0, 1.0 );

			return vec2( mua, mub );

		}

		void main() {

			float alpha = opacity;
			vec4 diffuseColor = vec4( diffuse, alpha );

			#include <clipping_planes_fragment>

			#ifdef USE_DASH

				if ( vUv.y < - 1.0 || vUv.y > 1.0 ) discard; // discard endcaps

				if ( mod( vLineDistance + dashOffset, dashSize + gapSize ) > dashSize ) discard; // todo - FIX

			#endif

			#ifdef WORLD_UNITS

				// Find the closest points on the view ray and the line segment
				vec3 rayEnd = normalize( worldPos.xyz ) * 1e5;
				vec3 lineDir = worldEnd - worldStart;
				vec2 params = closestLineToLine( worldStart, worldEnd, vec3( 0.0, 0.0, 0.0 ), rayEnd );

				vec3 p1 = worldStart + lineDir * params.x;
				vec3 p2 = rayEnd * params.y;
				vec3 delta = p1 - p2;
				float len = length( delta );
				float norm = len / linewidth;

				#ifndef USE_DASH

					#ifdef USE_ALPHA_TO_COVERAGE

						float dnorm = fwidth( norm );
						alpha = 1.0 - smoothstep( 0.5 - dnorm, 0.5 + dnorm, norm );

					#else

						if ( norm > 0.5 ) {

							discard;

						}

					#endif

				#endif

			#else

				#ifdef USE_ALPHA_TO_COVERAGE

					// artifacts appear on some hardware if a derivative is taken within a conditional
					float a = vUv.x;
					float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
					float len2 = a * a + b * b;
					float dlen = fwidth( len2 );

					if ( abs( vUv.y ) > 1.0 ) {

						alpha = 1.0 - smoothstep( 1.0 - dlen, 1.0 + dlen, len2 );

					}

				#else

					if ( abs( vUv.y ) > 1.0 ) {

						float a = vUv.x;
						float b = ( vUv.y > 0.0 ) ? vUv.y - 1.0 : vUv.y + 1.0;
						float len2 = a * a + b * b;

						if ( len2 > 1.0 ) discard;

					}

				#endif

			#endif

			#include <logdepthbuf_fragment>
			#include <color_fragment>

			gl_FragColor = vec4( diffuseColor.rgb, alpha );

			#include <tonemapping_fragment>
			#include <colorspace_fragment>
			#include <fog_fragment>
			#include <premultiplied_alpha_fragment>

		}
		`};class Rx extends To{constructor(e){super({type:"LineMaterial",uniforms:I9.clone(po.line.uniforms),vertexShader:po.line.vertexShader,fragmentShader:po.line.fragmentShader,clipping:!0}),this.isLineMaterial=!0,this.setValues(e)}get color(){return this.uniforms.diffuse.value}set color(e){this.uniforms.diffuse.value=e}get worldUnits(){return"WORLD_UNITS"in this.defines}set worldUnits(e){e===!0?this.defines.WORLD_UNITS="":delete this.defines.WORLD_UNITS}get linewidth(){return this.uniforms.linewidth.value}set linewidth(e){this.uniforms.linewidth&&(this.uniforms.linewidth.value=e)}get dashed(){return"USE_DASH"in this.defines}set dashed(e){e===!0!==this.dashed&&(this.needsUpdate=!0),e===!0?this.defines.USE_DASH="":delete this.defines.USE_DASH}get dashScale(){return this.uniforms.dashScale.value}set dashScale(e){this.uniforms.dashScale.value=e}get dashSize(){return this.uniforms.dashSize.value}set dashSize(e){this.uniforms.dashSize.value=e}get dashOffset(){return this.uniforms.dashOffset.value}set dashOffset(e){this.uniforms.dashOffset.value=e}get gapSize(){return this.uniforms.gapSize.value}set gapSize(e){this.uniforms.gapSize.value=e}get opacity(){return this.uniforms.opacity.value}set opacity(e){this.uniforms&&(this.uniforms.opacity.value=e)}get resolution(){return this.uniforms.resolution.value}set resolution(e){this.uniforms.resolution.value.copy(e)}get alphaToCoverage(){return"USE_ALPHA_TO_COVERAGE"in this.defines}set alphaToCoverage(e){this.defines&&(e===!0!==this.alphaToCoverage&&(this.needsUpdate=!0),e===!0?this.defines.USE_ALPHA_TO_COVERAGE="":delete this.defines.USE_ALPHA_TO_COVERAGE)}}const Km=new rn,dM=new J,AM=new J,Ns=new rn,Is=new rn,X0=new rn,Zm=new J,Jm=new Wt,Ls=new iR,pM=new J,Rf=new ls,Cf=new Kr,Q0=new rn;let tl,Y2;function mM(i,e,t){return Q0.set(0,0,-e,1).applyMatrix4(i.projectionMatrix),Q0.multiplyScalar(1/Q0.w),Q0.x=Y2/t.width,Q0.y=Y2/t.height,Q0.applyMatrix4(i.projectionMatrixInverse),Q0.multiplyScalar(1/Q0.w),Math.abs(Math.max(Q0.x,Q0.y))}function sae(i,e){const t=i.matrixWorld,n=i.geometry,r=n.attributes.instanceStart,s=n.attributes.instanceEnd,o=Math.min(n.instanceCount,r.count);for(let a=0,l=o;a<l;a++){Ls.start.fromBufferAttribute(r,a),Ls.end.fromBufferAttribute(s,a),Ls.applyMatrix4(t);const u=new J,c=new J;tl.distanceSqToSegment(Ls.start,Ls.end,c,u),c.distanceTo(u)<Y2*.5&&e.push({point:c,pointOnLine:u,distance:tl.origin.distanceTo(c),object:i,face:null,faceIndex:a,uv:null,uv1:null})}}function oae(i,e,t){const n=e.projectionMatrix,s=i.material.resolution,o=i.matrixWorld,a=i.geometry,l=a.attributes.instanceStart,u=a.attributes.instanceEnd,c=Math.min(a.instanceCount,l.count),A=-e.near;tl.at(1,X0),X0.w=1,X0.applyMatrix4(e.matrixWorldInverse),X0.applyMatrix4(n),X0.multiplyScalar(1/X0.w),X0.x*=s.x/2,X0.y*=s.y/2,X0.z=0,Zm.copy(X0),Jm.multiplyMatrices(e.matrixWorldInverse,o);for(let m=0,_=c;m<_;m++){if(Ns.fromBufferAttribute(l,m),Is.fromBufferAttribute(u,m),Ns.w=1,Is.w=1,Ns.applyMatrix4(Jm),Is.applyMatrix4(Jm),Ns.z>A&&Is.z>A)continue;if(Ns.z>A){const P=Ns.z-Is.z,I=(Ns.z-A)/P;Ns.lerp(Is,I)}else if(Is.z>A){const P=Is.z-Ns.z,I=(Is.z-A)/P;Is.lerp(Ns,I)}Ns.applyMatrix4(n),Is.applyMatrix4(n),Ns.multiplyScalar(1/Ns.w),Is.multiplyScalar(1/Is.w),Ns.x*=s.x/2,Ns.y*=s.y/2,Is.x*=s.x/2,Is.y*=s.y/2,Ls.start.copy(Ns),Ls.start.z=0,Ls.end.copy(Is),Ls.end.z=0;const M=Ls.closestPointToPointParameter(Zm,!0);Ls.at(M,pM);const w=R9.lerp(Ns.z,Is.z,M),T=w>=-1&&w<=1,N=Zm.distanceTo(pM)<Y2*.5;if(T&&N){Ls.start.fromBufferAttribute(l,m),Ls.end.fromBufferAttribute(u,m),Ls.start.applyMatrix4(o),Ls.end.applyMatrix4(o);const P=new J,I=new J;tl.distanceSqToSegment(Ls.start,Ls.end,I,P),t.push({point:I,pointOnLine:P,distance:tl.origin.distanceTo(I),object:i,face:null,faceIndex:m,uv:null,uv1:null})}}}class aae extends ei{constructor(e=new PD,t=new Rx({color:Math.random()*16777215})){super(e,t),this.isLineSegments2=!0,this.type="LineSegments2"}computeLineDistances(){const e=this.geometry,t=e.attributes.instanceStart,n=e.attributes.instanceEnd,r=new Float32Array(2*t.count);for(let o=0,a=0,l=t.count;o<l;o++,a+=2)dM.fromBufferAttribute(t,o),AM.fromBufferAttribute(n,o),r[a]=a===0?0:r[a-1],r[a+1]=r[a]+dM.distanceTo(AM);const s=new p8(r,2,1);return e.setAttribute("instanceDistanceStart",new bo(s,1,0)),e.setAttribute("instanceDistanceEnd",new bo(s,1,1)),this}raycast(e,t){const n=this.material.worldUnits,r=e.camera;r===null&&!n&&console.error('LineSegments2: "Raycaster.camera" needs to be set in order to raycast against LineSegments2 while worldUnits is set to false.');const s=e.params.Line2!==void 0&&e.params.Line2.threshold||0;tl=e.ray;const o=this.matrixWorld,a=this.geometry,l=this.material;Y2=l.linewidth+s,a.boundingSphere===null&&a.computeBoundingSphere(),Cf.copy(a.boundingSphere).applyMatrix4(o);let u;if(n)u=Y2*.5;else{const A=Math.max(r.near,Cf.distanceToPoint(tl.origin));u=mM(r,A,l.resolution)}if(Cf.radius+=u,tl.intersectsSphere(Cf)===!1)return;a.boundingBox===null&&a.computeBoundingBox(),Rf.copy(a.boundingBox).applyMatrix4(o);let c;if(n)c=Y2*.5;else{const A=Math.max(r.near,Rf.distanceToPoint(tl.origin));c=mM(r,A,l.resolution)}Rf.expandByScalar(c),tl.intersectsBox(Rf)!==!1&&(n?sae(this,t):oae(this,r,t))}onBeforeRender(e){const t=this.material.uniforms;t&&t.resolution&&(e.getViewport(Km),this.material.uniforms.resolution.value.set(Km.z,Km.w))}}class ND extends PD{constructor(){super(),this.isLineGeometry=!0,this.type="LineGeometry"}setPositions(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setPositions(n),this}setColors(e){const t=e.length-3,n=new Float32Array(2*t);for(let r=0;r<t;r+=3)n[2*r]=e[r],n[2*r+1]=e[r+1],n[2*r+2]=e[r+2],n[2*r+3]=e[r+3],n[2*r+4]=e[r+4],n[2*r+5]=e[r+5];return super.setColors(n),this}setFromPoints(e){const t=e.length-1,n=new Float32Array(6*t);for(let r=0;r<t;r++)n[6*r]=e[r].x,n[6*r+1]=e[r].y,n[6*r+2]=e[r].z||0,n[6*r+3]=e[r+1].x,n[6*r+4]=e[r+1].y,n[6*r+5]=e[r+1].z||0;return super.setPositions(n),this}fromLine(e){const t=e.geometry;return this.setPositions(t.attributes.position.array),this}}class lae extends aae{constructor(e=new ND,t=new Rx({color:Math.random()*16777215})){super(e,t),this.isLine2=!0,this.type="Line2"}}class gM extends K8{constructor(e,t={}){const n=t.font;if(n===void 0)super();else{const r=n.generateShapes(e,t.size);t.depth===void 0&&(t.depth=50),t.bevelThickness===void 0&&(t.bevelThickness=10),t.bevelSize===void 0&&(t.bevelSize=8),t.bevelEnabled===void 0&&(t.bevelEnabled=!1),super(r,t)}this.type="TextGeometry"}}class uae{constructor(e){this.isFont=!0,this.type="Font",this.data=e}generateShapes(e,t=100){const n=[],r=cae(e,t,this.data);for(let s=0,o=r.length;s<o;s++)n.push(...r[s].toShapes());return n}}function cae(i,e,t){const n=Array.from(i),r=e/t.resolution,s=(t.boundingBox.yMax-t.boundingBox.yMin+t.underlineThickness)*r,o=[];let a=0,l=0;for(let u=0;u<n.length;u++){const c=n[u];if(c===`
`)a=0,l-=s;else{const A=hae(c,r,a,l,t);a+=A.offsetX,o.push(A.path)}}return o}function hae(i,e,t,n,r){const s=r.glyphs[i]||r.glyphs["?"];if(!s){console.error('THREE.Font: character "'+i+'" does not exists in font family '+r.familyName+".");return}const o=new sR;let a,l,u,c,A,m,_,b;if(s.o){const M=s._cachedOutline||(s._cachedOutline=s.o.split(" "));for(let w=0,T=M.length;w<T;)switch(M[w++]){case"m":a=M[w++]*e+t,l=M[w++]*e+n,o.moveTo(a,l);break;case"l":a=M[w++]*e+t,l=M[w++]*e+n,o.lineTo(a,l);break;case"q":u=M[w++]*e+t,c=M[w++]*e+n,A=M[w++]*e+t,m=M[w++]*e+n,o.quadraticCurveTo(A,m,u,c);break;case"b":u=M[w++]*e+t,c=M[w++]*e+n,A=M[w++]*e+t,m=M[w++]*e+n,_=M[w++]*e+t,b=M[w++]*e+n,o.bezierCurveTo(A,m,_,b,u,c);break}}return{offsetX:s.ha*e,path:o}}class fae extends Ai{constructor(e=document.createElement("div")){super(),this.isCSS2DObject=!0,this.element=e,this.element.style.position="absolute",this.element.style.userSelect="none",this.element.setAttribute("draggable",!1),this.center=new Ge(.5,.5),this.addEventListener("removed",function(){this.traverse(function(t){t.element instanceof t.element.ownerDocument.defaultView.Element&&t.element.parentNode!==null&&t.element.remove()})})}copy(e,t){return super.copy(e,t),this.element=e.element.cloneNode(!0),this.center=e.center,this}}new J;new Wt;new Wt;new J;new J;function Dy(i,e){(e==null||e>i.length)&&(e=i.length);for(var t=0,n=Array(e);t<e;t++)n[t]=i[t];return n}function dae(i){if(Array.isArray(i))return i}function Aae(i){if(Array.isArray(i))return Dy(i)}function ID(i,e,t){if(typeof i=="function"?i===e:i.has(e))return arguments.length<3?e:t;throw new TypeError("Private element is not present on this object")}function pae(i){if(i===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return i}function yM(i,e,t,n,r,s,o){try{var a=i[s](o),l=a.value}catch(u){return void t(u)}a.done?e(l):Promise.resolve(l).then(n,r)}function mae(i){return function(){var e=this,t=arguments;return new Promise(function(n,r){var s=i.apply(e,t);function o(l){yM(s,n,r,o,a,"next",l)}function a(l){yM(s,n,r,o,a,"throw",l)}o(void 0)})}}function LA(i,e,t){return e=r5(e),wae(i,Px()?Reflect.construct(e,t||[],r5(i).constructor):e.apply(i,t))}function gae(i,e){if(e.has(i))throw new TypeError("Cannot initialize the same private elements twice on an object")}function DA(i,e){if(!(i instanceof e))throw new TypeError("Cannot call a class as a function")}function Rh(i,e){return i.get(ID(i,e))}function eg(i,e,t){gae(i,e),e.set(i,t)}function tg(i,e,t){return i.set(ID(i,e),t),t}function Cx(i,e,t){if(Px())return Reflect.construct.apply(null,arguments);var n=[null];n.push.apply(n,e);var r=new(i.bind.apply(i,n));return r}function yae(i,e){for(var t=0;t<e.length;t++){var n=e[t];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(i,LD(n.key),n)}}function BA(i,e,t){return e&&yae(i.prototype,e),Object.defineProperty(i,"prototype",{writable:!1}),i}function Ms(i,e,t){return(e=LD(e))in i?Object.defineProperty(i,e,{value:t,enumerable:!0,configurable:!0,writable:!0}):i[e]=t,i}function By(){return By=typeof Reflect<"u"&&Reflect.get?Reflect.get.bind():function(i,e,t){var n=Mae(i,e);if(n){var r=Object.getOwnPropertyDescriptor(n,e);return r.get?r.get.call(arguments.length<3?i:t):r.value}},By.apply(null,arguments)}function r5(i){return r5=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(e){return e.__proto__||Object.getPrototypeOf(e)},r5(i)}function FA(i,e){if(typeof e!="function"&&e!==null)throw new TypeError("Super expression must either be null or a function");i.prototype=Object.create(e&&e.prototype,{constructor:{value:i,writable:!0,configurable:!0}}),Object.defineProperty(i,"prototype",{writable:!1}),e&&Uy(i,e)}function Px(){try{var i=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Px=function(){return!!i})()}function vae(i){if(typeof Symbol<"u"&&i[Symbol.iterator]!=null||i["@@iterator"]!=null)return Array.from(i)}function _ae(i,e){var t=i==null?null:typeof Symbol<"u"&&i[Symbol.iterator]||i["@@iterator"];if(t!=null){var n,r,s,o,a=[],l=!0,u=!1;try{if(s=(t=t.call(i)).next,e===0){if(Object(t)!==t)return;l=!1}else for(;!(l=(n=s.call(t)).done)&&(a.push(n.value),a.length!==e);l=!0);}catch(c){u=!0,r=c}finally{try{if(!l&&t.return!=null&&(o=t.return(),Object(o)!==o))return}finally{if(u)throw r}}return a}}function xae(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bae(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vM(i,e){var t=Object.keys(i);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(i);e&&(n=n.filter(function(r){return Object.getOwnPropertyDescriptor(i,r).enumerable})),t.push.apply(t,n)}return t}function Ni(i){for(var e=1;e<arguments.length;e++){var t=arguments[e]!=null?arguments[e]:{};e%2?vM(Object(t),!0).forEach(function(n){Ms(i,n,t[n])}):Object.getOwnPropertyDescriptors?Object.defineProperties(i,Object.getOwnPropertyDescriptors(t)):vM(Object(t)).forEach(function(n){Object.defineProperty(i,n,Object.getOwnPropertyDescriptor(t,n))})}return i}function Sae(i,e){if(i==null)return{};var t,n,r=Tae(i,e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(i);for(n=0;n<s.length;n++)t=s[n],e.indexOf(t)===-1&&{}.propertyIsEnumerable.call(i,t)&&(r[t]=i[t])}return r}function Tae(i,e){if(i==null)return{};var t={};for(var n in i)if({}.hasOwnProperty.call(i,n)){if(e.indexOf(n)!==-1)continue;t[n]=i[n]}return t}function wae(i,e){if(e&&(typeof e=="object"||typeof e=="function"))return e;if(e!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pae(i)}function Fy(){/*! regenerator-runtime -- Copyright (c) 2014-present, Facebook, Inc. -- license (MIT): https://github.com/babel/babel/blob/main/packages/babel-helpers/LICENSE */var i,e,t=typeof Symbol=="function"?Symbol:{},n=t.iterator||"@@iterator",r=t.toStringTag||"@@toStringTag";function s(_,b,M,w){var T=b&&b.prototype instanceof a?b:a,N=Object.create(T.prototype);return da(N,"_invoke",function(P,I,B){var F,O,V,U=0,z=B||[],H=!1,Q={p:0,n:0,v:i,a:Y,f:Y.bind(i,4),d:function(ne,ee){return F=ne,O=0,V=i,Q.n=ee,o}};function Y(ne,ee){for(O=ne,V=ee,e=0;!H&&U&&!se&&e<z.length;e++){var se,pe=z[e],re=Q.p,de=pe[2];ne>3?(se=de===ee)&&(V=pe[(O=pe[4])?5:(O=3,3)],pe[4]=pe[5]=i):pe[0]<=re&&((se=ne<2&&re<pe[1])?(O=0,Q.v=ee,Q.n=pe[1]):re<de&&(se=ne<3||pe[0]>ee||ee>de)&&(pe[4]=ne,pe[5]=ee,Q.n=de,O=0))}if(se||ne>1)return o;throw H=!0,ee}return function(ne,ee,se){if(U>1)throw TypeError("Generator is already running");for(H&&ee===1&&Y(ee,se),O=ee,V=se;(e=O<2?i:V)||!H;){F||(O?O<3?(O>1&&(Q.n=-1),Y(O,V)):Q.n=V:Q.v=V);try{if(U=2,F){if(O||(ne="next"),e=F[ne]){if(!(e=e.call(F,V)))throw TypeError("iterator result is not an object");if(!e.done)return e;V=e.value,O<2&&(O=0)}else O===1&&(e=F.return)&&e.call(F),O<2&&(V=TypeError("The iterator does not provide a '"+ne+"' method"),O=1);F=i}else if((e=(H=Q.n<0)?V:P.call(I,Q))!==o)break}catch(pe){F=i,O=1,V=pe}finally{U=1}}return{value:e,done:H}}}(_,M,w),!0),N}var o={};function a(){}function l(){}function u(){}e=Object.getPrototypeOf;var c=[][n]?e(e([][n]())):(da(e={},n,function(){return this}),e),A=u.prototype=a.prototype=Object.create(c);function m(_){return Object.setPrototypeOf?Object.setPrototypeOf(_,u):(_.__proto__=u,da(_,r,"GeneratorFunction")),_.prototype=Object.create(A),_}return l.prototype=u,da(A,"constructor",u),da(u,"constructor",l),l.displayName="GeneratorFunction",da(u,r,"GeneratorFunction"),da(A),da(A,r,"Generator"),da(A,n,function(){return this}),da(A,"toString",function(){return"[object Generator]"}),(Fy=function(){return{w:s,m}})()}function da(i,e,t,n){var r=Object.defineProperty;try{r({},"",{})}catch{r=0}da=function(s,o,a,l){function u(c,A){da(s,c,function(m){return this._invoke(c,A,m)})}o?r?r(s,o,{value:a,enumerable:!l,configurable:!l,writable:!l}):s[o]=a:(u("next",0),u("throw",1),u("return",2))},da(i,e,t,n)}function Uy(i,e){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,n){return t.__proto__=n,t},Uy(i,e)}function lr(i,e){return dae(i)||_ae(i,e)||DD(i,e)||xae()}function Mae(i,e){for(;!{}.hasOwnProperty.call(i,e)&&(i=r5(i))!==null;);return i}function ng(i,e,t,n){var r=By(r5(i.prototype),e,t);return typeof r=="function"?function(s){return r.apply(t,s)}:r}function ki(i){return Aae(i)||vae(i)||DD(i)||bae()}function Eae(i,e){if(typeof i!="object"||!i)return i;var t=i[Symbol.toPrimitive];if(t!==void 0){var n=t.call(i,e);if(typeof n!="object")return n;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(i)}function LD(i){var e=Eae(i,"string");return typeof e=="symbol"?e:e+""}function DD(i,e){if(i){if(typeof i=="string")return Dy(i,e);var t={}.toString.call(i).slice(8,-1);return t==="Object"&&i.constructor&&(t=i.constructor.name),t==="Map"||t==="Set"?Array.from(i):t==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?Dy(i,e):void 0}}var BD=function(e){e instanceof Array?e.forEach(BD):(e.map&&e.map.dispose(),e.dispose())},Nx=function(e){e.geometry&&e.geometry.dispose(),e.material&&BD(e.material),e.texture&&e.texture.dispose(),e.children&&e.children.forEach(Nx)},Hi=function(e){if(e&&e.children)for(;e.children.length;){var t=e.children[0];e.remove(t),Nx(t)}};function wo(i,e){var t=new e;return{linkProp:function(r){return{default:t[r](),onChange:function(o,a){a[i][r](o)},triggerUpdate:!1}},linkMethod:function(r){return function(s){for(var o=s[i],a=arguments.length,l=new Array(a>1?a-1:0),u=1;u<a;u++)l[u-1]=arguments[u];var c=o[r].apply(o,l);return c===o?this:c}}}}var ir=100;function _M(){return ir}function e0(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,n=(90-i)*Math.PI/180,r=(90-e)*Math.PI/180,s=ir*(1+t),o=Math.sin(n);return{x:s*o*Math.cos(r),y:s*Math.cos(n),z:s*o*Math.sin(r)}}function FD(i){var e=i.x,t=i.y,n=i.z,r=Math.sqrt(e*e+t*t+n*n),s=Math.acos(t/r),o=Math.atan2(n,e);return{lat:90-s*180/Math.PI,lng:90-o*180/Math.PI-(o<-Math.PI/2?360:0),altitude:r/ir-1}}function N2(i){return i*Math.PI/180}var U8=window.THREE?window.THREE:{BackSide:Bi,BufferAttribute:oi,Color:Et,Mesh:ei,ShaderMaterial:To},Rae=`
uniform float hollowRadius;

varying vec3 vVertexWorldPosition;
varying vec3 vVertexNormal;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {    
  vVertexNormal	= normalize(normalMatrix * normal);
  vVertexWorldPosition = (modelMatrix * vec4(position, 1.0)).xyz;
  
  vec4 objCenterViewPosition = modelViewMatrix * vec4(0.0, 0.0, 0.0, 1.0);
  vCameraDistanceToObjCenter = length(objCenterViewPosition);
  
  float edgeAngle = atan(hollowRadius / vCameraDistanceToObjCenter);
  float vertexAngle = acos(dot(normalize(modelViewMatrix * vec4(position, 1.0)), normalize(objCenterViewPosition)));
  vVertexAngularDistanceToHollowRadius = vertexAngle - edgeAngle;

  gl_Position	= projectionMatrix * modelViewMatrix * vec4(position, 1.0);
}`,Cae=`
uniform vec3 color;
uniform float coefficient;
uniform float power;
uniform float hollowRadius;

varying vec3 vVertexNormal;
varying vec3 vVertexWorldPosition;
varying float vCameraDistanceToObjCenter;
varying float vVertexAngularDistanceToHollowRadius;

void main() {
  if (vCameraDistanceToObjCenter < hollowRadius) discard; // inside the hollowRadius
  if (vVertexAngularDistanceToHollowRadius < 0.0) discard; // frag position is within the hollow radius

  vec3 worldCameraToVertex = vVertexWorldPosition - cameraPosition;
  vec3 viewCameraToVertex	= (viewMatrix * vec4(worldCameraToVertex, 0.0)).xyz;
  viewCameraToVertex = normalize(viewCameraToVertex);
  float intensity	= pow(
    coefficient + dot(vVertexNormal, viewCameraToVertex),
    power
  );
  gl_FragColor = vec4(color, intensity);
}`;function Pae(i,e,t,n){return new U8.ShaderMaterial({depthWrite:!1,transparent:!0,vertexShader:Rae,fragmentShader:Cae,uniforms:{coefficient:{value:i},color:{value:new U8.Color(e)},power:{value:t},hollowRadius:{value:n}}})}function Nae(i,e){for(var t=i.clone(),n=new Float32Array(i.attributes.position.count*3),r=0,s=n.length;r<s;r++){var o=i.attributes.normal.array[r],a=i.attributes.position.array[r];n[r]=a+o*e}return t.setAttribute("position",new U8.BufferAttribute(n,3)),t}var Iae=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.color,o=s===void 0?"gold":s,a=r.size,l=a===void 0?2:a,u=r.coefficient,c=u===void 0?.5:u,A=r.power,m=A===void 0?1:A,_=r.hollowRadius,b=_===void 0?0:_,M=r.backside,w=M===void 0?!0:M;DA(this,e),n=LA(this,e);var T=Nae(t,l),N=Pae(c,o,m,b);return w&&(N.side=U8.BackSide),n.geometry=T,n.material=N,n}return FA(e,i),BA(e)}(U8.Mesh),Y0=window.THREE?window.THREE:{Color:Et,Group:Zs,LineBasicMaterial:hs,LineSegments:t0,Mesh:ei,MeshPhongMaterial:X9,SphereGeometry:i0,SRGBColorSpace:xs,TextureLoader:Nv},UD=io({props:{globeImageUrl:{},bumpImageUrl:{},showGlobe:{default:!0,onChange:function(e,t){t.globeGroup.visible=!!e},triggerUpdate:!1},showGraticules:{default:!1,onChange:function(e,t){t.graticulesObj.visible=!!e},triggerUpdate:!1},showAtmosphere:{default:!0,onChange:function(e,t){t.atmosphereObj&&(t.atmosphereObj.visible=!!e)},triggerUpdate:!1},atmosphereColor:{default:"lightskyblue"},atmosphereAltitude:{default:.15},globeCurvatureResolution:{default:4},globeTileEngineUrl:{onChange:function(e,t){t.tileEngine.tileUrl=e}},globeTileEngineMaxLevel:{default:17,onChange:function(e,t){t.tileEngine.maxLevel=e},triggerUpdate:!1},updatePov:{onChange:function(e,t){t.tileEngine.updatePov(e)},triggerUpdate:!1},onReady:{default:function(){},triggerUpdate:!1}},methods:{globeMaterial:function(e,t){return t!==void 0?(e.globeObj.material=t||e.defaultGlobeMaterial,this):e.globeObj.material},_destructor:function(e){Hi(e.globeObj),Hi(e.tileEngine),Hi(e.graticulesObj)}},stateInit:function(){var e=new Y0.MeshPhongMaterial({color:0}),t=new Y0.Mesh(void 0,e);t.rotation.y=-Math.PI/2;var n=new Qj(ir),r=new Y0.Group;r.__globeObjType="globe",r.add(t),r.add(n);var s=new Y0.LineSegments(new dC(dj(),ir,2),new Y0.LineBasicMaterial({color:"lightgrey",transparent:!0,opacity:.1}));return{globeGroup:r,globeObj:t,graticulesObj:s,defaultGlobeMaterial:e,tileEngine:n}},init:function(e,t){Hi(e),t.scene=e,t.scene.add(t.globeGroup),t.scene.add(t.graticulesObj),t.ready=!1},update:function(e,t){var n=e.globeObj.material;if(e.tileEngine.visible=!(e.globeObj.visible=!e.globeTileEngineUrl),t.hasOwnProperty("globeCurvatureResolution")){var r;(r=e.globeObj.geometry)===null||r===void 0||r.dispose();var s=Math.max(4,Math.round(360/e.globeCurvatureResolution));e.globeObj.geometry=new Y0.SphereGeometry(ir,s,s/2),e.tileEngine.curvatureResolution=e.globeCurvatureResolution}if(t.hasOwnProperty("globeImageUrl")&&(e.globeImageUrl?new Y0.TextureLoader().load(e.globeImageUrl,function(a){a.colorSpace=Y0.SRGBColorSpace,n.map=a,n.color=null,n.needsUpdate=!0,!e.ready&&(e.ready=!0)&&setTimeout(e.onReady)}):!n.color&&(n.color=new Y0.Color(0))),t.hasOwnProperty("bumpImageUrl")&&(e.bumpImageUrl?e.bumpImageUrl&&new Y0.TextureLoader().load(e.bumpImageUrl,function(a){n.bumpMap=a,n.needsUpdate=!0}):(n.bumpMap=null,n.needsUpdate=!0)),(t.hasOwnProperty("atmosphereColor")||t.hasOwnProperty("atmosphereAltitude"))&&(e.atmosphereObj&&(e.scene.remove(e.atmosphereObj),Hi(e.atmosphereObj)),e.atmosphereColor&&e.atmosphereAltitude)){var o=e.atmosphereObj=new Iae(e.globeObj.geometry,{color:e.atmosphereColor,size:ir*e.atmosphereAltitude,hollowRadius:ir,coefficient:.1,power:3.5});o.visible=!!e.showAtmosphere,o.__globeObjType="atmosphere",e.scene.add(o)}!e.ready&&(!e.globeImageUrl||e.globeTileEngineUrl)&&(e.ready=!0,e.onReady())}}),yl=function(e){return isNaN(e)?parseInt(mn(e).toHex(),16):e},L0=function(e){return e&&isNaN(e)?vc(e).opacity:1},mu=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:!0,n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,r,s=1,o=/^rgba\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.eE+-]+)\s*\)$/.exec(e.trim().toLowerCase());if(o){var a=o.slice(1),l=lr(a,4),u=l[0],c=l[1],A=l[2],m=l[3];r=new Et("rgb(".concat(+u,",").concat(+c,",").concat(+A,")")),s=Math.min(+m,1)}else r=new Et(e);n&&r.convertLinearToSRGB();var _=r.toArray();return t?[].concat(ki(_),[s]):_};function Lae(i,e,t){return i.opacity=e,i.transparent=e<1,i.depthWrite=e>=1,i}var xM=window.THREE?window.THREE:{BufferAttribute:oi};function vl(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:Float32Array;if(e===1)return new xM.BufferAttribute(new t(i),e);for(var n=new xM.BufferAttribute(new t(i.length*e),e),r=0,s=i.length;r<s;r++)n.set(i[r],r*e);return n}function Dae(i){for(var e=i.itemSize,t=[],n=0;n<i.count;n++)t.push(i.array.slice(n*e,(n+1)*e));return t}var ig=new WeakMap,Pf=new WeakMap,Nf=new WeakMap,ea=function(i){function e(t){var n,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},s=r.dataBindAttr,o=s===void 0?"__data":s,a=r.objBindAttr,l=a===void 0?"__threeObj":a,u=r.removeDelay,c=u===void 0?0:u;return DA(this,e),n=LA(this,e),Ms(n,"scene",void 0),eg(n,ig,void 0),eg(n,Pf,void 0),eg(n,Nf,void 0),n.scene=t,tg(ig,n,o),tg(Pf,n,l),tg(Nf,n,c),n.onRemoveObj(function(){}),n}return FA(e,i),BA(e,[{key:"onCreateObj",value:function(n){var r=this;return ng(e,"onCreateObj",this)([function(s){var o=n(s);return s[Rh(Pf,r)]=o,o[Rh(ig,r)]=s,r.scene.add(o),o}]),this}},{key:"onRemoveObj",value:function(n){var r=this;return ng(e,"onRemoveObj",this)([function(s,o){var a=ng(e,"getData",r)([s]);n(s,o);var l=function(){r.scene.remove(s),Hi(s),delete a[Rh(Pf,r)]};Rh(Nf,r)?setTimeout(l,Rh(Nf,r)):l()}]),this}}])}(TX),x0=window.THREE?window.THREE:{BufferGeometry:Tn,CylinderGeometry:Cc,Matrix4:Wt,Mesh:ei,MeshLambertMaterial:U0,Object3D:Ai,Vector3:J},bM=Object.assign({},r_),SM=bM.BufferGeometryUtils||bM,OD=io({props:{pointsData:{default:[]},pointLat:{default:"lat"},pointLng:{default:"lng"},pointColor:{default:function(){return"#ffffaa"}},pointAltitude:{default:.1},pointRadius:{default:.25},pointResolution:{default:12,triggerUpdate:!1},pointsMerge:{default:!1},pointsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjPoint"})},update:function(e,t){var n=ct(e.pointLat),r=ct(e.pointLng),s=ct(e.pointAltitude),o=ct(e.pointRadius),a=ct(e.pointColor),l=new x0.CylinderGeometry(1,1,1,e.pointResolution);l.applyMatrix4(new x0.Matrix4().makeRotationX(Math.PI/2)),l.applyMatrix4(new x0.Matrix4().makeTranslation(0,0,-.5));var u=2*Math.PI*ir/360,c={};if(!e.pointsMerge&&t.hasOwnProperty("pointsMerge")&&Hi(e.scene),e.dataMapper.scene=e.pointsMerge?new x0.Object3D:e.scene,e.dataMapper.onCreateObj(_).onUpdateObj(b).digest(e.pointsData),e.pointsMerge){var A=e.pointsData.length?(SM.mergeGeometries||SM.mergeBufferGeometries)(e.pointsData.map(function(M){var w=e.dataMapper.getObj(M),T=w.geometry.clone();w.updateMatrix(),T.applyMatrix4(w.matrix);var N=mu(a(M));return T.setAttribute("color",vl(Array(T.getAttribute("position").count).fill(N),4)),T})):new x0.BufferGeometry,m=new x0.Mesh(A,new x0.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0}));m.__globeObjType="points",m.__data=e.pointsData,e.dataMapper.clear(),Hi(e.scene),e.scene.add(m)}function _(){var M=new x0.Mesh(l);return M.__globeObjType="point",M}function b(M,w){var T=function(V){var U=M.__currentTargetD=V,z=U.r,H=U.alt,Q=U.lat,Y=U.lng;Object.assign(M.position,e0(Q,Y));var ne=e.pointsMerge?new x0.Vector3(0,0,0):e.scene.localToWorld(new x0.Vector3(0,0,0));M.lookAt(ne),M.scale.x=M.scale.y=Math.min(30,z)*u,M.scale.z=Math.max(H*ir,.1)},N={alt:+s(w),r:+o(w),lat:+n(w),lng:+r(w)},P=M.__currentTargetD||Object.assign({},N,{alt:-.001});if(Object.keys(N).some(function(O){return P[O]!==N[O]})&&(e.pointsMerge||!e.pointsTransitionDuration||e.pointsTransitionDuration<0?T(N):e.tweenGroup.add(new xa(P).to(N,e.pointsTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(T).start())),!e.pointsMerge){var I=a(w),B=I?L0(I):0,F=!!B;M.visible=F,F&&(c.hasOwnProperty(I)||(c[I]=new x0.MeshLambertMaterial({color:yl(I),transparent:B<1,opacity:B})),M.material=c[I])}}}}),kD=function(){return{uniforms:{dashOffset:{value:0},dashSize:{value:1},gapSize:{value:0},dashTranslate:{value:0}},vertexShader:`
    `.concat(Wn.common,`
    `).concat(Wn.logdepthbuf_pars_vertex,`
  
    uniform float dashTranslate; 

    attribute vec4 color;
    varying vec4 vColor;
    
    attribute float relDistance;
    varying float vRelDistance;

    void main() {
      // pass through colors and distances
      vColor = color;
      vRelDistance = relDistance + dashTranslate;
      gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);
  
      `).concat(Wn.logdepthbuf_vertex,`
    }
  `),fragmentShader:`
    `.concat(Wn.logdepthbuf_pars_fragment,`

    uniform float dashOffset; 
    uniform float dashSize;
    uniform float gapSize; 
    
    varying vec4 vColor;
    varying float vRelDistance;
    
    void main() {
      // ignore pixels in the gap
      if (vRelDistance < dashOffset) discard;
      if (mod(vRelDistance - dashOffset, dashSize + gapSize) > dashSize) discard;
    
      // set px color: [r, g, b, a], interpolated between vertices 
      gl_FragColor = vColor; 
  
      `).concat(Wn.logdepthbuf_fragment,`
    }
  `)}},Oy=function(e){return e.uniforms.surfaceRadius={type:"float",value:0},e.vertexShader=(`attribute float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.vertexShader).replace("void main() {",["void main() {","vSurfaceRadius = surfaceRadius;","vPos = position;"].join(`
`)),e.fragmentShader=(`uniform float surfaceRadius;
varying float vSurfaceRadius;
varying vec3 vPos;
`+e.fragmentShader).replace("void main() {",["void main() {","if (length(vPos) < max(surfaceRadius, vSurfaceRadius)) discard;"].join(`
`)),e},Bae=function(e){return e.vertexShader=`
    attribute float r;
    
    const float PI = 3.1415926535897932384626433832795;
    float toRad(in float a) {
      return a * PI / 180.0;
    }
    
    vec3 Polar2Cartesian(in vec3 c) { // [lat, lng, r]
      float phi = toRad(90.0 - c.x);
      float theta = toRad(90.0 - c.y);
      float r = c.z;
      return vec3( // x,y,z
        r * sin(phi) * cos(theta),
        r * cos(phi),
        r * sin(phi) * sin(theta)
      );
    }
    
    vec2 Cartesian2Polar(in vec3 p) {
      float r = sqrt(p.x * p.x + p.y * p.y + p.z * p.z);
      float phi = acos(p.y / r);
      float theta = atan(p.z, p.x);
      return vec2( // lat,lng
        90.0 - phi * 180.0 / PI,
        90.0 - theta * 180.0 / PI - (theta < -PI / 2.0 ? 360.0 : 0.0)
      );
    }
    `.concat(e.vertexShader.replace("}",`                  
        vec3 pos = Polar2Cartesian(vec3(Cartesian2Polar(position), r));
        gl_Position = projectionMatrix * modelViewMatrix * vec4(pos, 1.0);
      }
    `),`
  `),e},Ix=function(e,t){return e.onBeforeCompile=function(n){e.userData.shader=t(n)},e},Fae=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:function(r){return r};if(e.userData.shader)t(e.userData.shader.uniforms);else{var n=e.onBeforeCompile;e.onBeforeCompile=function(r){n(r),t(r.uniforms)}}},Uae=["stroke"],b0=window.THREE?window.THREE:{BufferGeometry:Tn,CubicBezierCurve3:dv,Curve:n0,Group:Zs,Line:D0,Mesh:ei,NormalBlending:Js,ShaderMaterial:To,TubeGeometry:J8,Vector3:J},Oae=K4.default||K4,VD=io({props:{arcsData:{default:[]},arcStartLat:{default:"startLat"},arcStartLng:{default:"startLng"},arcStartAltitude:{default:0},arcEndLat:{default:"endLat"},arcEndLng:{default:"endLng"},arcEndAltitude:{default:0},arcColor:{default:function(){return"#ffffaa"}},arcAltitude:{},arcAltitudeAutoScale:{default:.5},arcStroke:{},arcCurveResolution:{default:64,triggerUpdate:!1},arcCircularResolution:{default:6,triggerUpdate:!1},arcDashLength:{default:1},arcDashGap:{default:0},arcDashInitialGap:{default:0},arcDashAnimateTime:{default:0},arcsTransitionDuration:{default:1e3,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;e.sharedMaterial.dispose(),(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new Oae,sharedMaterial:new b0.ShaderMaterial(Ni(Ni({},kD()),{},{transparent:!0,blending:b0.NormalBlending}))}},init:function(e,t){Hi(e),t.scene=e,t.dataMapper=new ea(e,{objBindAttr:"__threeObjArc"}).onCreateObj(function(){var n=new b0.Group;return n.__globeObjType="arc",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var o=lr(s,2),a=o[1];return a}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var o=s.children[0],a=o.__dashAnimateStep*r,l=o.material.uniforms.dashTranslate.value%1e9;o.material.uniforms.dashTranslate.value=l+a})})},update:function(e){var t=ct(e.arcStartLat),n=ct(e.arcStartLng),r=ct(e.arcStartAltitude),s=ct(e.arcEndLat),o=ct(e.arcEndLng),a=ct(e.arcEndAltitude),l=ct(e.arcAltitude),u=ct(e.arcAltitudeAutoScale),c=ct(e.arcStroke),A=ct(e.arcColor),m=ct(e.arcDashLength),_=ct(e.arcDashGap),b=ct(e.arcDashInitialGap),M=ct(e.arcDashAnimateTime);e.dataMapper.onUpdateObj(function(P,I){var B=c(I),F=B!=null;if(!P.children.length||F!==(P.children[0].type==="Mesh")){Hi(P);var O=F?new b0.Mesh:new b0.Line(new b0.BufferGeometry);O.material=e.sharedMaterial.clone(),P.add(O)}var V=P.children[0];Object.assign(V.material.uniforms,{dashSize:{value:m(I)},gapSize:{value:_(I)},dashOffset:{value:b(I)}});var U=M(I);V.__dashAnimateStep=U>0?1e3/U:0;var z=T(A(I),e.arcCurveResolution,F?e.arcCircularResolution+1:1),H=N(e.arcCurveResolution,F?e.arcCircularResolution+1:1,!0);V.geometry.setAttribute("color",z),V.geometry.setAttribute("relDistance",H);var Q=function(se){var pe=P.__currentTargetD=se,re=pe.stroke,de=Sae(pe,Uae),ye=w(de);F?(V.geometry&&V.geometry.dispose(),V.geometry=new b0.TubeGeometry(ye,e.arcCurveResolution,re/2,e.arcCircularResolution),V.geometry.setAttribute("color",z),V.geometry.setAttribute("relDistance",H)):V.geometry.setFromPoints(ye.getPoints(e.arcCurveResolution))},Y={stroke:B,alt:l(I),altAutoScale:+u(I),startLat:+t(I),startLng:+n(I),startAlt:+r(I),endLat:+s(I),endLng:+o(I),endAlt:+a(I)},ne=P.__currentTargetD||Object.assign({},Y,{altAutoScale:-.001});Object.keys(Y).some(function(ee){return ne[ee]!==Y[ee]})&&(!e.arcsTransitionDuration||e.arcsTransitionDuration<0?Q(Y):e.tweenGroup.add(new xa(ne).to(Y,e.arcsTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(Q).start()))}).digest(e.arcsData);function w(P){var I=P.alt,B=P.altAutoScale,F=P.startLat,O=P.startLng,V=P.startAlt,U=P.endLat,z=P.endLng,H=P.endAlt,Q=function(nt){var tt=lr(nt,3),Dt=tt[0],Rt=tt[1],It=tt[2],yn=e0(Rt,Dt,It),Kt=yn.x,Ae=yn.y,Je=yn.z;return new b0.Vector3(Kt,Ae,Je)},Y=[O,F],ne=[z,U],ee=I;if(ee==null&&(ee=Au(Y,ne)/2*B+Math.max(V,H)),ee||V||H){var se=Jv(Y,ne),pe=function(nt,tt){return tt+(tt-nt)*(nt<tt?.5:.25)},re=[.25,.75].map(function(Ne){return[].concat(ki(se(Ne)),[pe(Ne<.5?V:H,ee)])}),de=lr(re,2),ye=de[0],Pe=de[1],Qe=Cx(b0.CubicBezierCurve3,ki([[].concat(Y,[V]),ye,Pe,[].concat(ne,[H])].map(Q)));return Qe}else{var et=.001;return Pt.apply(void 0,ki([[].concat(Y,[et]),[].concat(ne,[et])].map(Q)))}function Pt(Ne,nt){var tt=Ne.angleTo(nt),Dt=tt===0?function(){return Ne.clone()}:function(It){return new b0.Vector3().addVectors(Ne.clone().multiplyScalar(Math.sin((1-It)*tt)),nt.clone().multiplyScalar(Math.sin(It*tt))).divideScalar(Math.sin(tt))},Rt=new b0.Curve;return Rt.getPoint=Dt,Rt}}function T(P,I){var B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,F=I+1,O;if(P instanceof Array||P instanceof Function){var V=P instanceof Array?o1().domain(P.map(function(ee,se){return se/(P.length-1)})).range(P):P;O=function(se){return mu(V(se),!0,!0)}}else{var U=mu(P,!0,!0);O=function(){return U}}for(var z=[],H=0,Q=F;H<Q;H++)for(var Y=O(H/(Q-1)),ne=0;ne<B;ne++)z.push(Y);return vl(z,4)}function N(P){for(var I=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,B=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,F=P+1,O=[],V=0,U=F;V<U;V++)for(var z=V/(U-1),H=0;H<I;H++)O.push(z);return B&&O.reverse(),vl(O,1)}}}),X1=window.THREE?window.THREE:{BufferGeometry:Tn,DoubleSide:Mr,Mesh:ei,MeshLambertMaterial:U0,Object3D:Ai},TM=Object.assign({},r_),wM=TM.BufferGeometryUtils||TM,zD=io({props:{hexBinPointsData:{default:[]},hexBinPointLat:{default:"lat"},hexBinPointLng:{default:"lng"},hexBinPointWeight:{default:1},hexBinResolution:{default:4},hexMargin:{default:.2},hexTopCurvatureResolution:{default:5},hexTopColor:{default:function(){return"#ffffaa"}},hexSideColor:{default:function(){return"#ffffaa"}},hexAltitude:{default:function(e){var t=e.sumWeight;return t*.01}},hexBinMerge:{default:!1},hexTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjHexbin"})},update:function(e,t){var n=ct(e.hexBinPointLat),r=ct(e.hexBinPointLng),s=ct(e.hexBinPointWeight),o=ct(e.hexAltitude),a=ct(e.hexTopColor),l=ct(e.hexSideColor),u=ct(e.hexMargin),c=HQ(e.hexBinPointsData.map(function(N){return Ni(Ni({},N),{},{h3Idx:wY(n(N),r(N),e.hexBinResolution)})}),"h3Idx"),A=Object.entries(c).map(function(N){var P=lr(N,2),I=P[0],B=P[1];return{h3Idx:I,points:B,sumWeight:B.reduce(function(F,O){return F+ +s(O)},0)}}),m={};if(!e.hexBinMerge&&t.hasOwnProperty("hexBinMerge")&&Hi(e.scene),e.dataMapper.scene=e.hexBinMerge?new X1.Object3D:e.scene,e.dataMapper.id(function(N){return N.h3Idx}).onCreateObj(w).onUpdateObj(T).digest(A),e.hexBinMerge){var _=A.length?(wM.mergeGeometries||wM.mergeBufferGeometries)(A.map(function(N){var P=e.dataMapper.getObj(N),I=P.geometry.toNonIndexed();P.updateMatrix(),I.applyMatrix4(P.matrix);var B=mu(a(N)),F=mu(l(N)),O=I.getAttribute("position").count,V=I.groups[0].count;return I.setAttribute("color",vl(ki(new Array(O)).map(function(U,z){return z>=V?B:F}),4)),I})):new X1.BufferGeometry,b=new X1.MeshLambertMaterial({color:16777215,transparent:!0,vertexColors:!0,side:X1.DoubleSide});b.onBeforeCompile=function(N){b.userData.shader=Oy(N)};var M=new X1.Mesh(_,b);M.__globeObjType="hexBinPoints",M.__data=A,e.dataMapper.clear(),Hi(e.scene),e.scene.add(M)}function w(N){var P=new X1.Mesh;P.__hexCenter=LC(N.h3Idx),P.__hexGeoJson=DC(N.h3Idx,!0).reverse();var I=P.__hexCenter[1];return P.__hexGeoJson.forEach(function(B){var F=B[0];Math.abs(I-F)>170&&(B[0]+=I>F?360:-360)}),P.__globeObjType="hexbin",P}function T(N,P){var I=function(pe,re,de){return pe-(pe-re)*de},B=Math.max(0,Math.min(1,+u(P))),F=lr(N.__hexCenter,2),O=F[0],V=F[1],U=B===0?N.__hexGeoJson:N.__hexGeoJson.map(function(se){var pe=lr(se,2),re=pe[0],de=pe[1];return[[re,V],[de,O]].map(function(ye){var Pe=lr(ye,2),Qe=Pe[0],et=Pe[1];return I(Qe,et,B)})}),z=e.hexTopCurvatureResolution;N.geometry&&N.geometry.dispose(),N.geometry=new u_([U],0,ir,!1,!0,!0,z);var H={alt:+o(P)},Q=function(pe){var re=N.__currentTargetD=pe,de=re.alt;N.scale.x=N.scale.y=N.scale.z=1+de;var ye=ir/(de+1);N.geometry.setAttribute("surfaceRadius",vl(Array(N.geometry.getAttribute("position").count).fill(ye),1))},Y=N.__currentTargetD||Object.assign({},H,{alt:-.001});if(Object.keys(H).some(function(se){return Y[se]!==H[se]})&&(e.hexBinMerge||!e.hexTransitionDuration||e.hexTransitionDuration<0?Q(H):e.tweenGroup.add(new xa(Y).to(H,e.hexTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(Q).start())),!e.hexBinMerge){var ne=l(P),ee=a(P);[ne,ee].forEach(function(se){if(!m.hasOwnProperty(se)){var pe=L0(se);m[se]=Ix(new X1.MeshLambertMaterial({color:yl(se),transparent:pe<1,opacity:pe,side:X1.DoubleSide}),Oy)}}),N.material=[ne,ee].map(function(se){return m[se]})}}}}),GD=function(e){return e*e},Wl=function(e){return e*Math.PI/180};function kae(i,e){var t=Math.sqrt,n=Math.cos,r=function(c){return GD(Math.sin(c/2))},s=Wl(i[1]),o=Wl(e[1]),a=Wl(i[0]),l=Wl(e[0]);return 2*Math.asin(t(r(o-s)+n(s)*n(o)*r(l-a)))}var Vae=Math.sqrt(2*Math.PI);function zae(i,e){return Math.exp(-GD(i/e)/2)/(e*Vae)}var Gae=function(e){var t=lr(e,2),n=t[0],r=t[1],s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],o=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{},a=o.lngAccessor,l=a===void 0?function(w){return w[0]}:a,u=o.latAccessor,c=u===void 0?function(w){return w[1]}:u,A=o.weightAccessor,m=A===void 0?function(){return 1}:A,_=o.bandwidth,b=[n,r],M=_*Math.PI/180;return qH(s.map(function(w){var T=m(w);if(!T)return 0;var N=kae(b,[l(w),c(w)]);return zae(N,M)*T}))},qae=function(){var i=mae(Fy().m(function e(t){var n,r,s,o,a,l,u,c,A,m,_,b,M,w,T,N,P,I,B,F,O,V,U,z,H,Q,Y,ne,ee,se,pe,re,de,ye,Pe,Qe,et,Pt,Ne,nt,tt=arguments,Dt,Rt,It,yn;return Fy().w(function(Kt){for(;;)switch(Kt.n){case 0:if(r=tt.length>1&&tt[1]!==void 0?tt[1]:[],s=tt.length>2&&tt[2]!==void 0?tt[2]:{},o=s.lngAccessor,a=o===void 0?function(Ae){return Ae[0]}:o,l=s.latAccessor,u=l===void 0?function(Ae){return Ae[1]}:l,c=s.weightAccessor,A=c===void 0?function(){return 1}:c,m=s.bandwidth,(n=navigator)!==null&&n!==void 0&&n.gpu){Kt.n=1;break}return console.warn("WebGPU not enabled in browser. Please consider enabling it to improve performance."),Kt.a(2,t.map(function(Ae){return Gae(Ae,r,{lngAccessor:a,latAccessor:u,weightAccessor:A,bandwidth:m})}));case 1:return _=4,b=joe,M=$oe,w=rae,T=iae,N=Zoe,P=Joe,I=Xoe,B=nae,F=tae,O=Yoe,V=Qoe,U=Koe,z=eae,H=T(new Jf(new Float32Array(t.flat().map(Wl)),2),"vec2",t.length),Q=T(new Jf(new Float32Array(r.map(function(Ae){return[Wl(a(Ae)),Wl(u(Ae)),A(Ae)]}).flat()),3),"vec3",r.length),Y=new Jf(t.length,1),ne=T(Y,"float",t.length),ee=N(Math.PI),se=B(ee.mul(2)),pe=function(Je){return Je.mul(Je)},re=function(Je){return pe(F(Je.div(2)))},de=function(Je,Xe){var ht=N(Je[1]),Ze=N(Xe[1]),vt=N(Je[0]),ut=N(Xe[0]);return N(2).mul(V(B(re(Ze.sub(ht)).add(O(ht).mul(O(Ze)).mul(re(ut.sub(vt)))))))},ye=function(Je,Xe){return U(z(pe(Je.div(Xe)).div(2))).div(Xe.mul(se))},Pe=w(Wl(m)),Qe=w(Wl(m*_)),et=w(r.length),Pt=b(function(){var Ae=H.element(P),Je=ne.element(P);Je.assign(0),I(et,function(Xe){var ht=Xe.i,Ze=Q.element(ht),vt=Ze.z;M(vt,function(){var ut=de(Ze.xy,Ae.xy);M(ut&&ut.lessThan(Qe),function(){Je.addAssign(ye(ut,Pe).mul(vt))})})})}),Ne=Pt().compute(t.length),nt=new Woe,Kt.n=2,nt.computeAsync(Ne);case 2:return Dt=Array,Rt=Float32Array,Kt.n=3,nt.getArrayBufferAsync(Y);case 3:return It=Kt.v,yn=new Rt(It),Kt.a(2,Dt.from.call(Dt,yn))}},e)}));return function(t){return i.apply(this,arguments)}}(),If=window.THREE?window.THREE:{Mesh:ei,MeshLambertMaterial:U0,SphereGeometry:i0},Hae=3.5,Wae=.1,MM=100,jae=function(e){var t=vc(EY(e));return t.opacity=Math.cbrt(e),t.formatRgb()},qD=io({props:{heatmapsData:{default:[]},heatmapPoints:{default:function(e){return e}},heatmapPointLat:{default:function(e){return e[0]}},heatmapPointLng:{default:function(e){return e[1]}},heatmapPointWeight:{default:1},heatmapBandwidth:{default:2.5},heatmapColorFn:{default:function(){return jae}},heatmapColorSaturation:{default:1.5},heatmapBaseAltitude:{default:.01},heatmapTopAltitude:{},heatmapsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjHeatmap"}).onCreateObj(function(){var s=new If.Mesh(new If.SphereGeometry(ir),Ix(new If.MeshLambertMaterial({vertexColors:!0,transparent:!0}),Bae));return s.__globeObjType="heatmap",s})},update:function(e){var t=ct(e.heatmapPoints),n=ct(e.heatmapPointLat),r=ct(e.heatmapPointLng),s=ct(e.heatmapPointWeight),o=ct(e.heatmapBandwidth),a=ct(e.heatmapColorFn),l=ct(e.heatmapColorSaturation),u=ct(e.heatmapBaseAltitude),c=ct(e.heatmapTopAltitude);e.dataMapper.onUpdateObj(function(A,m){var _=o(m),b=a(m),M=l(m),w=u(m),T=c(m),N=t(m).map(function(O){var V=n(O),U=r(O),z=e0(V,U),H=z.x,Q=z.y,Y=z.z;return{x:H,y:Q,z:Y,lat:V,lng:U,weight:s(O)}}),P=Math.max(Wae,_/Hae),I=Math.ceil(360/(P||-1));A.geometry.parameters.widthSegments!==I&&(A.geometry.dispose(),A.geometry=new If.SphereGeometry(ir,I,I/2));var B=Dae(A.geometry.getAttribute("position")),F=B.map(function(O){var V=lr(O,3),U=V[0],z=V[1],H=V[2],Q=FD({x:U,y:z,z:H}),Y=Q.lng,ne=Q.lat;return[Y,ne]});qae(F,N,{latAccessor:function(V){return V.lat},lngAccessor:function(V){return V.lng},weightAccessor:function(V){return V.weight},bandwidth:_}).then(function(O){var V=ki(new Array(MM)).map(function(Q,Y){return mu(b(Y/(MM-1)))}),U=function(Y){var ne=A.__currentTargetD=Y,ee=ne.kdeVals,se=ne.topAlt,pe=ne.saturation,re=VH(ee.map(Math.abs))||1e-15,de=LR([0,re/pe],V);A.geometry.setAttribute("color",vl(ee.map(function(Pe){return de(Math.abs(Pe))}),4));var ye=o1([0,re],[ir*(1+w),ir*(1+(se||w))]);A.geometry.setAttribute("r",vl(ee.map(ye)))},z={kdeVals:O,topAlt:T,saturation:M},H=A.__currentTargetD||Object.assign({},z,{kdeVals:O.map(function(){return 0}),topAlt:T&&w,saturation:.5});H.kdeVals.length!==O.length&&(H.kdeVals=O.slice()),Object.keys(z).some(function(Q){return H[Q]!==z[Q]})&&(!e.heatmapsTransitionDuration||e.heatmapsTransitionDuration<0?U(z):e.tweenGroup.add(new xa(H).to(z,e.heatmapsTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(U).start()))})}).digest(e.heatmapsData)}}),Q1=window.THREE?window.THREE:{DoubleSide:Mr,Group:Zs,LineBasicMaterial:hs,LineSegments:t0,Mesh:ei,MeshBasicMaterial:Bs},HD=io({props:{polygonsData:{default:[]},polygonGeoJsonGeometry:{default:"geometry"},polygonSideColor:{default:function(){return"#ffffaa"}},polygonSideMaterial:{},polygonCapColor:{default:function(){return"#ffffaa"}},polygonCapMaterial:{},polygonStrokeColor:{},polygonAltitude:{default:.01},polygonCapCurvatureResolution:{default:5},polygonsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjPolygon"}).id(function(s){return s.id}).onCreateObj(function(){var s=new Q1.Group;return s.__defaultSideMaterial=Ix(new Q1.MeshBasicMaterial({side:Q1.DoubleSide,depthWrite:!0}),Oy),s.__defaultCapMaterial=new Q1.MeshBasicMaterial({side:Q1.DoubleSide,depthWrite:!0}),s.add(new Q1.Mesh(void 0,[s.__defaultSideMaterial,s.__defaultCapMaterial])),s.add(new Q1.LineSegments(void 0,new Q1.LineBasicMaterial)),s.__globeObjType="polygon",s})},update:function(e){var t=ct(e.polygonGeoJsonGeometry),n=ct(e.polygonAltitude),r=ct(e.polygonCapCurvatureResolution),s=ct(e.polygonCapColor),o=ct(e.polygonCapMaterial),a=ct(e.polygonSideColor),l=ct(e.polygonSideMaterial),u=ct(e.polygonStrokeColor),c=[];e.polygonsData.forEach(function(A){var m={data:A,capColor:s(A),capMaterial:o(A),sideColor:a(A),sideMaterial:l(A),strokeColor:u(A),altitude:+n(A),capCurvatureResolution:+r(A)},_=t(A),b=A.__id||"".concat(Math.round(Math.random()*1e9));A.__id=b,_.type==="Polygon"?c.push(Ni({id:"".concat(b,"_0"),coords:_.coordinates},m)):_.type==="MultiPolygon"?c.push.apply(c,ki(_.coordinates.map(function(M,w){return Ni({id:"".concat(b,"_").concat(w),coords:M},m)}))):console.warn("Unsupported GeoJson geometry type: ".concat(_.type,". Skipping geometry..."))}),e.dataMapper.onUpdateObj(function(A,m){var _=m.coords,b=m.capColor,M=m.capMaterial,w=m.sideColor,T=m.sideMaterial,N=m.strokeColor,P=m.altitude,I=m.capCurvatureResolution,B=lr(A.children,2),F=B[0],O=B[1],V=!!N;O.visible=V;var U=!!(b||M),z=!!(w||T);$ae(F.geometry.parameters||{},{polygonGeoJson:_,curvatureResolution:I,closedTop:U,includeSides:z})||(F.geometry&&F.geometry.dispose(),F.geometry=new u_(_,0,ir,!1,U,z,I)),V&&(!O.geometry.parameters||O.geometry.parameters.geoJson.coordinates!==_||O.geometry.parameters.resolution!==I)&&(O.geometry&&O.geometry.dispose(),O.geometry=new dC({type:"Polygon",coordinates:_},ir,I));var H=z?0:-1,Q=U?z?1:0:-1;if(H>=0&&(F.material[H]=T||A.__defaultSideMaterial),Q>=0&&(F.material[Q]=M||A.__defaultCapMaterial),[[!T&&w,H],[!M&&b,Q]].forEach(function(re){var de=lr(re,2),ye=de[0],Pe=de[1];if(!(!ye||Pe<0)){var Qe=F.material[Pe],et=L0(ye);Qe.color.set(yl(ye)),Qe.transparent=et<1,Qe.opacity=et}}),V){var Y=O.material,ne=L0(N);Y.color.set(yl(N)),Y.transparent=ne<1,Y.opacity=ne}var ee={alt:P},se=function(de){var ye=A.__currentTargetD=de,Pe=ye.alt;F.scale.x=F.scale.y=F.scale.z=1+Pe,V&&(O.scale.x=O.scale.y=O.scale.z=1+Pe+1e-4),Fae(A.__defaultSideMaterial,function(Qe){return Qe.surfaceRadius.value=ir/(Pe+1)})},pe=A.__currentTargetD||Object.assign({},ee,{alt:-.001});Object.keys(ee).some(function(re){return pe[re]!==ee[re]})&&(!e.polygonsTransitionDuration||e.polygonsTransitionDuration<0||pe.alt===ee.alt?se(ee):e.tweenGroup.add(new xa(pe).to(ee,e.polygonsTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(se).start()))}).digest(c)}});function $ae(i,e){var t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:function(){return function(n,r){return n===r}};return Object.entries(e).every(function(n){var r=lr(n,2),s=r[0],o=r[1];return i.hasOwnProperty(s)&&t(s)(i[s],o)})}var Z3=window.THREE?window.THREE:{BufferGeometry:Tn,DoubleSide:Mr,Mesh:ei,MeshLambertMaterial:U0,Vector3:J},EM=Object.assign({},r_),RM=EM.BufferGeometryUtils||EM,WD=io({props:{hexPolygonsData:{default:[]},hexPolygonGeoJsonGeometry:{default:"geometry"},hexPolygonColor:{default:function(){return"#ffffaa"}},hexPolygonAltitude:{default:.001},hexPolygonResolution:{default:3},hexPolygonMargin:{default:.2},hexPolygonUseDots:{default:!1},hexPolygonCurvatureResolution:{default:5},hexPolygonDotResolution:{default:12},hexPolygonsTransitionDuration:{default:0,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjHexPolygon"}).onCreateObj(function(){var s=new Z3.Mesh(void 0,new Z3.MeshLambertMaterial({side:Z3.DoubleSide}));return s.__globeObjType="hexPolygon",s})},update:function(e){var t=ct(e.hexPolygonGeoJsonGeometry),n=ct(e.hexPolygonColor),r=ct(e.hexPolygonAltitude),s=ct(e.hexPolygonResolution),o=ct(e.hexPolygonMargin),a=ct(e.hexPolygonUseDots),l=ct(e.hexPolygonCurvatureResolution),u=ct(e.hexPolygonDotResolution);e.dataMapper.onUpdateObj(function(c,A){var m=t(A),_=s(A),b=r(A),M=Math.max(0,Math.min(1,+o(A))),w=a(A),T=l(A),N=u(A),P=n(A),I=L0(P);c.material.color.set(yl(P)),c.material.transparent=I<1,c.material.opacity=I;var B={alt:b,margin:M,curvatureResolution:T},F={geoJson:m,h3Res:_},O=c.__currentTargetD||Object.assign({},B,{alt:-.001}),V=c.__currentMemD||F;if(Object.keys(B).some(function(Q){return O[Q]!==B[Q]})||Object.keys(F).some(function(Q){return V[Q]!==F[Q]})){c.__currentMemD=F;var U=[];m.type==="Polygon"?XT(m.coordinates,_,!0).forEach(function(Q){return U.push(Q)}):m.type==="MultiPolygon"?m.coordinates.forEach(function(Q){return XT(Q,_,!0).forEach(function(Y){return U.push(Y)})}):console.warn("Unsupported GeoJson geometry type: ".concat(m.type,". Skipping geometry..."));var z=U.map(function(Q){var Y=LC(Q),ne=DC(Q,!0).reverse(),ee=Y[1];return ne.forEach(function(se){var pe=se[0];Math.abs(ee-pe)>170&&(se[0]+=ee>pe?360:-360)}),{h3Idx:Q,hexCenter:Y,hexGeoJson:ne}}),H=function(Y){var ne=c.__currentTargetD=Y,ee=ne.alt,se=ne.margin,pe=ne.curvatureResolution;c.geometry&&c.geometry.dispose(),c.geometry=z.length?(RM.mergeGeometries||RM.mergeBufferGeometries)(z.map(function(re){var de=lr(re.hexCenter,2),ye=de[0],Pe=de[1];if(w){var Qe=e0(ye,Pe,ee),et=e0(re.hexGeoJson[0][1],re.hexGeoJson[0][0],ee),Pt=.85*(1-se)*new Z3.Vector3(Qe.x,Qe.y,Qe.z).distanceTo(new Z3.Vector3(et.x,et.y,et.z)),Ne=new c5(Pt,N);return Ne.rotateX(N2(-ye)),Ne.rotateY(N2(Pe)),Ne.translate(Qe.x,Qe.y,Qe.z),Ne}else{var nt=function(Rt,It,yn){return Rt-(Rt-It)*yn},tt=se===0?re.hexGeoJson:re.hexGeoJson.map(function(Dt){var Rt=lr(Dt,2),It=Rt[0],yn=Rt[1];return[[It,Pe],[yn,ye]].map(function(Kt){var Ae=lr(Kt,2),Je=Ae[0],Xe=Ae[1];return nt(Je,Xe,se)})});return new u_([tt],ir,ir*(1+ee),!1,!0,!1,pe)}})):new Z3.BufferGeometry};!e.hexPolygonsTransitionDuration||e.hexPolygonsTransitionDuration<0?H(B):e.tweenGroup.add(new xa(O).to(B,e.hexPolygonsTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(H).start())}}).digest(e.hexPolygonsData)}}),Xae=window.THREE?window.THREE:{Vector3:J};function Qae(i,e){var t=function(o,a){var l=o[o.length-1];return[].concat(ki(o),ki(Array(a-o.length).fill(l)))},n=Math.max(i.length,e.length),r=sW.apply(void 0,ki([i,e].map(function(s){return s.map(function(o){var a=o.x,l=o.y,u=o.z;return[a,l,u]})}).map(function(s){return t(s,n)})));return function(s){return s===0?i:s===1?e:r(s).map(function(o){var a=lr(o,3),l=a[0],u=a[1],c=a[2];return new Xae.Vector3(l,u,c)})}}var b2=window.THREE?window.THREE:{BufferGeometry:Tn,Color:Et,Group:Zs,Line:D0,NormalBlending:Js,ShaderMaterial:To,Vector3:J},Yae=K4.default||K4,jD=io({props:{pathsData:{default:[]},pathPoints:{default:function(e){return e}},pathPointLat:{default:function(e){return e[0]}},pathPointLng:{default:function(e){return e[1]}},pathPointAlt:{default:.001},pathResolution:{default:2},pathColor:{default:function(){return"#ffffaa"}},pathStroke:{},pathDashLength:{default:1},pathDashGap:{default:0},pathDashInitialGap:{default:0},pathDashAnimateTime:{default:0},pathTransitionDuration:{default:1e3,triggerUpdate:!1},rendererSize:{}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},stateInit:function(e){var t=e.tweenGroup;return{tweenGroup:t,ticker:new Yae,sharedMaterial:new b2.ShaderMaterial(Ni(Ni({},kD()),{},{transparent:!0,blending:b2.NormalBlending}))}},init:function(e,t){Hi(e),t.scene=e,t.dataMapper=new ea(e,{objBindAttr:"__threeObjPath"}).onCreateObj(function(){var n=new b2.Group;return n.__globeObjType="path",n}),t.ticker.onTick.add(function(n,r){t.dataMapper.entries().map(function(s){var o=lr(s,2),a=o[1];return a}).filter(function(s){return s.children.length&&s.children[0].material&&s.children[0].__dashAnimateStep}).forEach(function(s){var o=s.children[0],a=o.__dashAnimateStep*r;if(o.type==="Line"){var l=o.material.uniforms.dashTranslate.value%1e9;o.material.uniforms.dashTranslate.value=l+a}else if(o.type==="Line2"){for(var u=o.material.dashOffset-a,c=o.material.dashSize+o.material.gapSize;u<=-c;)u+=c;o.material.dashOffset=u}})})},update:function(e){var t=ct(e.pathPoints),n=ct(e.pathPointLat),r=ct(e.pathPointLng),s=ct(e.pathPointAlt),o=ct(e.pathStroke),a=ct(e.pathColor),l=ct(e.pathDashLength),u=ct(e.pathDashGap),c=ct(e.pathDashInitialGap),A=ct(e.pathDashAnimateTime);e.dataMapper.onUpdateObj(function(w,T){var N=o(T),P=N!=null;if(!w.children.length||P===(w.children[0].type==="Line")){Hi(w);var I=P?new lae(new ND,new Rx):new b2.Line(new b2.BufferGeometry,e.sharedMaterial.clone());w.add(I)}var B=w.children[0],F=_(t(T),n,r,s,e.pathResolution),O=A(T);if(B.__dashAnimateStep=O>0?1e3/O:0,P){B.material.resolution=e.rendererSize;{var z=l(T),H=u(T),Q=c(T);B.material.dashed=H>0,B.material.dashed?B.material.defines.USE_DASH="":delete B.material.defines.USE_DASH,B.material.dashed&&(B.material.dashScale=1/m(F),B.material.dashSize=z,B.material.gapSize=H,B.material.dashOffset=-Q)}{var Y=a(T);if(Y instanceof Array){var ne=b(a(T),F.length-1,1,!1);B.geometry.setColors(ne.array),B.material.vertexColors=!0}else{var ee=Y,se=L0(ee);B.material.color=new b2.Color(yl(ee)),B.material.transparent=se<1,B.material.opacity=se,B.material.vertexColors=!1}}B.material.needsUpdate=!0}else{Object.assign(B.material.uniforms,{dashSize:{value:l(T)},gapSize:{value:u(T)},dashOffset:{value:c(T)}});var V=b(a(T),F.length),U=M(F.length,1,!0);B.geometry.setAttribute("color",V),B.geometry.setAttribute("relDistance",U)}var pe=Qae(w.__currentTargetD&&w.__currentTargetD.points||[F[0]],F),re=function(Qe){var et=w.__currentTargetD=Qe,Pt=et.stroke,Ne=et.interpolK,nt=w.__currentTargetD.points=pe(Ne);if(P){var tt;B.geometry.setPositions((tt=[]).concat.apply(tt,ki(nt.map(function(Dt){var Rt=Dt.x,It=Dt.y,yn=Dt.z;return[Rt,It,yn]})))),B.material.linewidth=Pt,B.material.dashed&&B.computeLineDistances()}else B.geometry.setFromPoints(nt),B.geometry.computeBoundingSphere()},de={stroke:N,interpolK:1},ye=Object.assign({},w.__currentTargetD||de,{interpolK:0});Object.keys(de).some(function(Pe){return ye[Pe]!==de[Pe]})&&(!e.pathTransitionDuration||e.pathTransitionDuration<0?re(de):e.tweenGroup.add(new xa(ye).to(de,e.pathTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(re).start()))}).digest(e.pathsData);function m(w){var T=0,N;return w.forEach(function(P){N&&(T+=N.distanceTo(P)),N=P}),T}function _(w,T,N,P,I){var B=function(U,z,H){for(var Q=[],Y=1;Y<=H;Y++)Q.push(U+(z-U)*Y/(H+1));return Q},F=function(){var U=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],z=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,H=[],Q=null;return U.forEach(function(Y){if(Q){for(;Math.abs(Q[1]-Y[1])>180;)Q[1]+=360*(Q[1]<Y[1]?1:-1);var ne=Math.sqrt(Math.pow(Y[0]-Q[0],2)+Math.pow(Y[1]-Q[1],2));if(ne>z)for(var ee=Math.floor(ne/z),se=B(Q[0],Y[0],ee),pe=B(Q[1],Y[1],ee),re=B(Q[2],Y[2],ee),de=0,ye=se.length;de<ye;de++)H.push([se[de],pe[de],re[de]])}H.push(Q=Y)}),H},O=function(U){var z=lr(U,3),H=z[0],Q=z[1],Y=z[2],ne=e0(H,Q,Y),ee=ne.x,se=ne.y,pe=ne.z;return new b2.Vector3(ee,se,pe)};return F(w.map(function(V){return[T(V),N(V),P(V)]}),I).map(O)}function b(w,T){var N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,P=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!0,I=T+1,B;if(w instanceof Array||w instanceof Function){var F=w instanceof Array?o1().domain(w.map(function(Y,ne){return ne/(w.length-1)})).range(w):w;B=function(ne){return mu(F(ne),P,!0)}}else{var O=mu(w,P,!0);B=function(){return O}}for(var V=[],U=0,z=I;U<z;U++)for(var H=B(U/(z-1)),Q=0;Q<N;Q++)V.push(H);return vl(V,P?4:3)}function M(w){for(var T=arguments.length>1&&arguments[1]!==void 0?arguments[1]:1,N=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,P=w+1,I=[],B=0,F=P;B<F;B++)for(var O=B/(F-1),V=0;V<T;V++)I.push(O);return N&&I.reverse(),vl(I,1)}}}),Lf=window.THREE?window.THREE:{Euler:Ts,Mesh:ei,MeshLambertMaterial:U0,SphereGeometry:i0},$D=io({props:{tilesData:{default:[]},tileLat:{default:"lat"},tileLng:{default:"lng"},tileAltitude:{default:.01},tileWidth:{default:1},tileHeight:{default:1},tileUseGlobeProjection:{default:!0},tileMaterial:{default:function(){return new Lf.MeshLambertMaterial({color:"#ffbb88",opacity:.4,transparent:!0})}},tileCurvatureResolution:{default:5},tilesTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjTile"}).onCreateObj(function(){var s=new Lf.Mesh;return s.__globeObjType="tile",s})},update:function(e){var t=ct(e.tileLat),n=ct(e.tileLng),r=ct(e.tileAltitude),s=ct(e.tileWidth),o=ct(e.tileHeight),a=ct(e.tileUseGlobeProjection),l=ct(e.tileMaterial),u=ct(e.tileCurvatureResolution);e.dataMapper.onUpdateObj(function(c,A){c.material=l(A);var m=a(A),_=u(A),b=function(N){var P=c.__currentTargetD=N,I=P.lat,B=P.lng,F=P.alt,O=P.width,V=P.height,U=J3(B),z=J3(-I);c.geometry&&c.geometry.dispose(),c.geometry=new Lf.SphereGeometry(ir*(1+F),Math.ceil(O/(_||-1)),Math.ceil(V/(_||-1)),J3(90-O/2)+(m?U:0),J3(O),J3(90-V/2)+(m?z:0),J3(V)),m||c.setRotationFromEuler(new Lf.Euler(z,U,0,"YXZ"))},M={lat:+t(A),lng:+n(A),alt:+r(A),width:+s(A),height:+o(A)},w=c.__currentTargetD||Object.assign({},M,{width:0,height:0});Object.keys(M).some(function(T){return w[T]!==M[T]})&&(!e.tilesTransitionDuration||e.tilesTransitionDuration<0?b(M):e.tweenGroup.add(new xa(w).to(M,e.tilesTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(b).start()))}).digest(e.tilesData)}}),J3=function(e){return e*Math.PI/180},Ch=window.THREE?window.THREE:{BufferGeometry:Tn,Color:Et,Points:uv,PointsMaterial:Q8},XD=io({props:{particlesData:{default:[]},particlesList:{default:function(e){return e}},particleLat:{default:"lat"},particleLng:{default:"lng"},particleAltitude:{default:.01},particlesSize:{default:.5},particlesSizeAttenuation:{default:!0},particlesColor:{default:function(){return"white"}},particlesTexture:{}},init:function(e,t){Hi(e),t.scene=e,t.dataMapper=new ea(e,{objBindAttr:"__threeObjParticles"}).onCreateObj(function(){var n=new Ch.Points(new Ch.BufferGeometry,new Ch.PointsMaterial);return n.__globeObjType="particles",n}).onUpdateObj(function(n,r){var s=ct(t.particlesList),o=ct(t.particleLat),a=ct(t.particleLng),l=ct(t.particleAltitude);n.geometry.setAttribute("position",vl(s(r).map(function(u){return Object.values(e0(o(u),a(u),l(u)))}),3))})},update:function(e,t){["particlesData","particlesList","particleLat","particleLng","particleAltitude"].some(function(a){return t.hasOwnProperty(a)})&&e.dataMapper.digest(e.particlesData);var n=ct(e.particlesColor),r=ct(e.particlesSize),s=ct(e.particlesSizeAttenuation),o=ct(e.particlesTexture);e.dataMapper.entries().forEach(function(a){var l=lr(a,2),u=l[0],c=l[1];if(c.material.size=r(u),c.material.sizeAttenuation=s(u),e.particlesTexture)c.material.color=new Ch.Color(16777215),c.material.transparent=!1,c.material.alphaTest=.5,c.material.map=o(u);else{var A=n(u),m=L0(A);c.material.color=new Ch.Color(yl(A)),c.material.transparent=m<1,c.material.opacity=m,c.material.alphaTest=0}})}}),Kae=window.THREE?window.THREE:{BufferGeometry:Tn},Zae=function(i){function e(){var t,n=arguments.length>0&&arguments[0]!==void 0?arguments[0]:1,r=arguments.length>1&&arguments[1]!==void 0?arguments[1]:32;DA(this,e),t=LA(this,e),t.type="CircleLineGeometry",t.parameters={radius:n,segmentCount:r};for(var s=[],o=0;o<=r;o++){var a=(o/r-.25)*Math.PI*2;s.push({x:Math.cos(a)*n,y:Math.sin(a)*n,z:0})}return t.setFromPoints(s),t}return FA(e,i),BA(e)}(Kae.BufferGeometry),e4=window.THREE?window.THREE:{Color:Et,Group:Zs,Line:D0,LineBasicMaterial:hs,Vector3:J},Jae=K4.default||K4,QD=io({props:{ringsData:{default:[]},ringLat:{default:"lat"},ringLng:{default:"lng"},ringAltitude:{default:.0015},ringColor:{default:function(){return"#ffffaa"},triggerUpdate:!1},ringResolution:{default:64,triggerUpdate:!1},ringMaxRadius:{default:2,triggerUpdate:!1},ringPropagationSpeed:{default:1,triggerUpdate:!1},ringRepeatPeriod:{default:700,triggerUpdate:!1}},methods:{pauseAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.pause()},resumeAnimation:function(e){var t;(t=e.ticker)===null||t===void 0||t.resume()},_destructor:function(e){var t;(t=e.ticker)===null||t===void 0||t.dispose()}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjRing",removeDelay:3e4}).onCreateObj(function(){var s=new e4.Group;return s.__globeObjType="ring",s}),t.ticker=new Jae,t.ticker.onTick.add(function(s){if(t.ringsData.length){var o=ct(t.ringColor),a=ct(t.ringAltitude),l=ct(t.ringMaxRadius),u=ct(t.ringPropagationSpeed),c=ct(t.ringRepeatPeriod);t.dataMapper.entries().filter(function(A){var m=lr(A,2),_=m[1];return _}).forEach(function(A){var m=lr(A,2),_=m[0],b=m[1];if((b.__nextRingTime||0)<=s){var M=c(_)/1e3;b.__nextRingTime=s+(M<=0?1/0:M);var w=new e4.Line(new Zae(1,t.ringResolution),new e4.LineBasicMaterial),T=o(_),N=T instanceof Array||T instanceof Function,P;N?T instanceof Array?(P=o1().domain(T.map(function(H,Q){return Q/(T.length-1)})).range(T),w.material.transparent=T.some(function(H){return L0(H)<1})):(P=T,w.material.transparent=!0):(w.material.color=new e4.Color(yl(T)),Lae(w.material,L0(T)));var I=ir*(1+a(_)),B=l(_),F=B*Math.PI/180,O=u(_),V=O<=0,U=function(Q){var Y=Q.t,ne=(V?1-Y:Y)*F;if(w.scale.x=w.scale.y=I*Math.sin(ne),w.position.z=I*(1-Math.cos(ne)),N){var ee=P(Y);w.material.color=new e4.Color(yl(ee)),w.material.transparent&&(w.material.opacity=L0(ee))}};if(O===0)U({t:0}),b.add(w);else{var z=Math.abs(B/O)*1e3;t.tweenGroup.add(new xa({t:0}).to({t:1},z).onUpdate(U).onStart(function(){return b.add(w)}).onComplete(function(){b.remove(w),Nx(w)}).start())}}})}})},update:function(e){var t=ct(e.ringLat),n=ct(e.ringLng),r=ct(e.ringAltitude),s=e.scene.localToWorld(new e4.Vector3(0,0,0));e.dataMapper.onUpdateObj(function(o,a){var l=t(a),u=n(a),c=r(a);Object.assign(o.position,e0(l,u,c)),o.lookAt(s)}).digest(e.ringsData)}}),e0e={0:{x_min:73,x_max:715,ha:792,o:"m 394 -29 q 153 129 242 -29 q 73 479 73 272 q 152 829 73 687 q 394 989 241 989 q 634 829 545 989 q 715 479 715 684 q 635 129 715 270 q 394 -29 546 -29 m 394 89 q 546 211 489 89 q 598 479 598 322 q 548 748 598 640 q 394 871 491 871 q 241 748 298 871 q 190 479 190 637 q 239 211 190 319 q 394 89 296 89 "},1:{x_min:215.671875,x_max:574,ha:792,o:"m 574 0 l 442 0 l 442 697 l 215 697 l 215 796 q 386 833 330 796 q 475 986 447 875 l 574 986 l 574 0 "},2:{x_min:59,x_max:731,ha:792,o:"m 731 0 l 59 0 q 197 314 59 188 q 457 487 199 315 q 598 691 598 580 q 543 819 598 772 q 411 867 488 867 q 272 811 328 867 q 209 630 209 747 l 81 630 q 182 901 81 805 q 408 986 271 986 q 629 909 536 986 q 731 694 731 826 q 613 449 731 541 q 378 316 495 383 q 201 122 235 234 l 731 122 l 731 0 "},3:{x_min:54,x_max:737,ha:792,o:"m 737 284 q 635 55 737 141 q 399 -25 541 -25 q 156 52 248 -25 q 54 308 54 140 l 185 308 q 245 147 185 202 q 395 96 302 96 q 539 140 484 96 q 602 280 602 190 q 510 429 602 390 q 324 454 451 454 l 324 565 q 487 584 441 565 q 565 719 565 617 q 515 835 565 791 q 395 879 466 879 q 255 824 307 879 q 203 661 203 769 l 78 661 q 166 909 78 822 q 387 992 250 992 q 603 921 513 992 q 701 723 701 844 q 669 607 701 656 q 578 524 637 558 q 696 434 655 499 q 737 284 737 369 "},4:{x_min:48,x_max:742.453125,ha:792,o:"m 742 243 l 602 243 l 602 0 l 476 0 l 476 243 l 48 243 l 48 368 l 476 958 l 602 958 l 602 354 l 742 354 l 742 243 m 476 354 l 476 792 l 162 354 l 476 354 "},5:{x_min:54.171875,x_max:738,ha:792,o:"m 738 314 q 626 60 738 153 q 382 -23 526 -23 q 155 47 248 -23 q 54 256 54 125 l 183 256 q 259 132 204 174 q 382 91 314 91 q 533 149 471 91 q 602 314 602 213 q 538 469 602 411 q 386 528 475 528 q 284 506 332 528 q 197 439 237 484 l 81 439 l 159 958 l 684 958 l 684 840 l 254 840 l 214 579 q 306 627 258 612 q 407 643 354 643 q 636 552 540 643 q 738 314 738 457 "},6:{x_min:53,x_max:739,ha:792,o:"m 739 312 q 633 62 739 162 q 400 -31 534 -31 q 162 78 257 -31 q 53 439 53 206 q 178 859 53 712 q 441 986 284 986 q 643 912 559 986 q 732 713 732 833 l 601 713 q 544 830 594 786 q 426 875 494 875 q 268 793 331 875 q 193 517 193 697 q 301 597 240 570 q 427 624 362 624 q 643 540 552 624 q 739 312 739 451 m 603 298 q 540 461 603 400 q 404 516 484 516 q 268 461 323 516 q 207 300 207 401 q 269 137 207 198 q 405 83 325 83 q 541 137 486 83 q 603 298 603 197 "},7:{x_min:58.71875,x_max:730.953125,ha:792,o:"m 730 839 q 469 448 560 641 q 335 0 378 255 l 192 0 q 328 441 235 252 q 593 830 421 630 l 58 830 l 58 958 l 730 958 l 730 839 "},8:{x_min:55,x_max:736,ha:792,o:"m 571 527 q 694 424 652 491 q 736 280 736 358 q 648 71 736 158 q 395 -26 551 -26 q 142 69 238 -26 q 55 279 55 157 q 96 425 55 359 q 220 527 138 491 q 120 615 153 562 q 88 726 88 668 q 171 904 88 827 q 395 986 261 986 q 618 905 529 986 q 702 727 702 830 q 670 616 702 667 q 571 527 638 565 m 394 565 q 519 610 475 565 q 563 717 563 655 q 521 823 563 781 q 392 872 474 872 q 265 824 312 872 q 224 720 224 783 q 265 613 224 656 q 394 565 312 565 m 395 91 q 545 150 488 91 q 597 280 597 204 q 546 408 597 355 q 395 465 492 465 q 244 408 299 465 q 194 280 194 356 q 244 150 194 203 q 395 91 299 91 "},9:{x_min:53,x_max:739,ha:792,o:"m 739 524 q 619 94 739 241 q 362 -32 516 -32 q 150 47 242 -32 q 59 244 59 126 l 191 244 q 246 129 191 176 q 373 82 301 82 q 526 161 466 82 q 597 440 597 255 q 363 334 501 334 q 130 432 216 334 q 53 650 53 521 q 134 880 53 786 q 383 986 226 986 q 659 841 566 986 q 739 524 739 719 m 388 449 q 535 514 480 449 q 585 658 585 573 q 535 805 585 744 q 388 873 480 873 q 242 809 294 873 q 191 658 191 745 q 239 514 191 572 q 388 449 292 449 "},:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 96 88 192 -25 q 0 368 0 201 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 "},S:{x_min:0,x_max:788,ha:890,o:"m 788 291 q 662 54 788 144 q 397 -26 550 -26 q 116 68 226 -26 q 0 337 0 168 l 131 337 q 200 152 131 220 q 384 85 269 85 q 557 129 479 85 q 650 270 650 183 q 490 429 650 379 q 194 513 341 470 q 33 739 33 584 q 142 964 33 881 q 388 1041 242 1041 q 644 957 543 1041 q 756 716 756 867 l 625 716 q 561 874 625 816 q 395 933 497 933 q 243 891 309 933 q 164 759 164 841 q 325 609 164 656 q 625 526 475 568 q 788 291 788 454 "},"":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},"/":{x_min:183.25,x_max:608.328125,ha:792,o:"m 608 1041 l 266 -129 l 183 -129 l 520 1041 l 608 1041 "},:{x_min:-.4375,x_max:777.453125,ha:839,o:"m 777 893 l 458 893 l 458 0 l 319 0 l 319 892 l 0 892 l 0 1013 l 777 1013 l 777 893 "},y:{x_min:0,x_max:684.78125,ha:771,o:"m 684 738 l 388 -83 q 311 -216 356 -167 q 173 -279 252 -279 q 97 -266 133 -279 l 97 -149 q 132 -155 109 -151 q 168 -160 155 -160 q 240 -114 213 -160 q 274 -26 248 -98 l 0 738 l 137 737 l 341 139 l 548 737 l 684 738 "},:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 803 1012 l 803 0 "},:{x_min:-111,x_max:339,ha:361,o:"m 339 800 l 229 800 l 229 925 l 339 925 l 339 800 m -1 800 l -111 800 l -111 925 l -1 925 l -1 800 m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 m 302 1040 l 113 819 l 30 819 l 165 1040 l 302 1040 "},g:{x_min:0,x_max:686,ha:838,o:"m 686 34 q 586 -213 686 -121 q 331 -306 487 -306 q 131 -252 216 -306 q 31 -84 31 -190 l 155 -84 q 228 -174 166 -138 q 345 -207 284 -207 q 514 -109 454 -207 q 564 89 564 -27 q 461 6 521 36 q 335 -23 401 -23 q 88 100 184 -23 q 0 370 0 215 q 87 634 0 522 q 330 758 183 758 q 457 728 398 758 q 564 644 515 699 l 564 737 l 686 737 l 686 34 m 582 367 q 529 560 582 481 q 358 652 468 652 q 189 561 250 652 q 135 369 135 482 q 189 176 135 255 q 361 85 251 85 q 529 176 468 85 q 582 367 582 255 "},"":{x_min:0,x_max:442,ha:539,o:"m 442 383 l 0 383 q 91 566 0 492 q 260 668 176 617 q 354 798 354 727 q 315 875 354 845 q 227 905 277 905 q 136 869 173 905 q 99 761 99 833 l 14 761 q 82 922 14 864 q 232 974 141 974 q 379 926 316 974 q 442 797 442 878 q 351 635 442 704 q 183 539 321 611 q 92 455 92 491 l 442 455 l 442 383 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},:{x_min:0,x_max:819.5625,ha:893,o:"m 819 0 l 650 0 l 294 509 l 139 356 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},:{x_min:-46.265625,x_max:392,ha:513,o:"m 392 651 l 259 651 l 79 -279 l -46 -278 l 134 651 l 14 651 l 14 751 l 135 751 q 151 948 135 900 q 304 1041 185 1041 q 334 1040 319 1041 q 392 1034 348 1039 l 392 922 q 337 931 360 931 q 271 883 287 931 q 260 793 260 853 l 260 751 l 392 751 l 392 651 "},e:{x_min:0,x_max:714,ha:813,o:"m 714 326 l 140 326 q 200 157 140 227 q 359 87 260 87 q 488 130 431 87 q 561 245 545 174 l 697 245 q 577 48 670 123 q 358 -26 484 -26 q 97 85 195 -26 q 0 363 0 197 q 94 642 0 529 q 358 765 195 765 q 626 627 529 765 q 714 326 714 503 m 576 429 q 507 583 564 522 q 355 650 445 650 q 206 583 266 650 q 140 429 152 522 l 576 429 "},:{x_min:0,x_max:712,ha:815,o:"m 356 -25 q 94 91 194 -25 q 0 368 0 202 q 92 642 0 533 q 356 761 192 761 q 617 644 517 761 q 712 368 712 533 q 619 91 712 201 q 356 -25 520 -25 m 356 85 q 527 175 465 85 q 583 369 583 255 q 528 562 583 484 q 356 651 466 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 356 85 250 85 m 576 1040 l 387 819 l 303 819 l 438 1040 l 576 1040 "},J:{x_min:0,x_max:588,ha:699,o:"m 588 279 q 287 -26 588 -26 q 58 73 126 -26 q 0 327 0 158 l 133 327 q 160 172 133 227 q 288 96 198 96 q 426 171 391 96 q 449 336 449 219 l 449 1013 l 588 1013 l 588 279 "},"":{x_min:-1,x_max:503,ha:601,o:"m 503 302 l 280 136 l 281 256 l 429 373 l 281 486 l 280 608 l 503 440 l 503 302 m 221 302 l 0 136 l 0 255 l 145 372 l 0 486 l -1 608 l 221 440 l 221 302 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 741 394 q 661 246 731 302 q 496 190 591 190 q 294 285 369 190 q 228 497 228 370 q 295 714 228 625 q 499 813 370 813 q 656 762 588 813 q 733 625 724 711 l 634 625 q 589 704 629 673 q 498 735 550 735 q 377 666 421 735 q 334 504 334 597 q 374 340 334 408 q 490 272 415 272 q 589 304 549 272 q 638 394 628 337 l 741 394 "},:{x_min:0,x_max:922,ha:1030,o:"m 687 1040 l 498 819 l 415 819 l 549 1040 l 687 1040 m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 338 0 202 q 45 551 0 444 q 161 737 84 643 l 302 737 q 175 552 219 647 q 124 336 124 446 q 155 179 124 248 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 341 797 257 q 745 555 797 450 q 619 737 705 637 l 760 737 q 874 551 835 640 q 922 339 922 444 "},"^":{x_min:193.0625,x_max:598.609375,ha:792,o:"m 598 772 l 515 772 l 395 931 l 277 772 l 193 772 l 326 1013 l 462 1013 l 598 772 "},"":{x_min:0,x_max:507.203125,ha:604,o:"m 506 136 l 284 302 l 284 440 l 506 608 l 507 485 l 360 371 l 506 255 l 506 136 m 222 136 l 0 302 l 0 440 l 222 608 l 221 486 l 73 373 l 222 256 l 222 136 "},D:{x_min:0,x_max:828,ha:935,o:"m 389 1013 q 714 867 593 1013 q 828 521 828 729 q 712 161 828 309 q 382 0 587 0 l 0 0 l 0 1013 l 389 1013 m 376 124 q 607 247 523 124 q 681 510 681 355 q 607 771 681 662 q 376 896 522 896 l 139 896 l 139 124 l 376 124 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},:{x_min:0,x_max:47,ha:125,o:"m 47 3 q 37 -7 47 -7 q 28 0 30 -7 q 39 -4 32 -4 q 45 3 45 -1 l 37 0 q 28 9 28 0 q 39 19 28 19 l 47 16 l 47 19 l 47 3 m 37 1 q 44 8 44 1 q 37 16 44 16 q 30 8 30 16 q 37 1 30 1 m 26 1 l 23 22 l 14 0 l 3 22 l 3 3 l 0 25 l 13 1 l 22 25 l 26 1 "},w:{x_min:0,x_max:1009.71875,ha:1100,o:"m 1009 738 l 783 0 l 658 0 l 501 567 l 345 0 l 222 0 l 0 738 l 130 738 l 284 174 l 432 737 l 576 738 l 721 173 l 881 737 l 1009 738 "},$:{x_min:0,x_max:700,ha:793,o:"m 664 717 l 542 717 q 490 825 531 785 q 381 872 450 865 l 381 551 q 620 446 540 522 q 700 241 700 370 q 618 45 700 116 q 381 -25 536 -25 l 381 -152 l 307 -152 l 307 -25 q 81 62 162 -25 q 0 297 0 149 l 124 297 q 169 146 124 204 q 307 81 215 89 l 307 441 q 80 536 148 469 q 13 725 13 603 q 96 910 13 839 q 307 982 180 982 l 307 1077 l 381 1077 l 381 982 q 574 917 494 982 q 664 717 664 845 m 307 565 l 307 872 q 187 831 233 872 q 142 724 142 791 q 180 618 142 656 q 307 565 218 580 m 381 76 q 562 237 562 96 q 517 361 562 313 q 381 423 472 409 l 381 76 "},"\\":{x_min:-.015625,x_max:425.0625,ha:522,o:"m 425 -129 l 337 -129 l 0 1041 l 83 1041 l 425 -129 "},:{x_min:0,x_max:697.21875,ha:747,o:"m 697 -4 q 629 -14 658 -14 q 498 97 513 -14 q 422 9 470 41 q 313 -23 374 -23 q 207 4 258 -23 q 119 81 156 32 l 119 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 173 124 246 q 308 83 216 83 q 452 178 402 83 q 493 359 493 255 l 493 738 l 617 738 l 617 214 q 623 136 617 160 q 673 92 637 92 q 697 96 684 92 l 697 -4 "},:{x_min:42,x_max:181,ha:297,o:"m 181 0 l 42 0 l 42 1013 l 181 1013 l 181 0 "},:{x_min:0,x_max:1144.5,ha:1214,o:"m 1144 1012 l 807 416 l 807 0 l 667 0 l 667 416 l 325 1012 l 465 1012 l 736 533 l 1004 1012 l 1144 1012 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},:{x_min:0,x_max:801,ha:915,o:"m 801 0 l 651 0 l 131 822 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 191 l 670 1013 l 801 1013 l 801 0 "},"-":{x_min:8.71875,x_max:350.390625,ha:478,o:"m 350 317 l 8 317 l 8 428 l 350 428 l 350 317 "},Q:{x_min:0,x_max:968,ha:1072,o:"m 954 5 l 887 -79 l 744 35 q 622 -11 687 2 q 483 -26 556 -26 q 127 130 262 -26 q 0 504 0 279 q 127 880 0 728 q 484 1041 262 1041 q 841 884 708 1041 q 968 507 968 735 q 933 293 968 398 q 832 104 899 188 l 954 5 m 723 191 q 802 330 777 248 q 828 499 828 412 q 744 790 828 673 q 483 922 650 922 q 228 791 322 922 q 142 505 142 673 q 227 221 142 337 q 487 91 323 91 q 632 123 566 91 l 520 215 l 587 301 l 723 191 "},:{x_min:1,x_max:676.28125,ha:740,o:"m 676 460 l 551 460 q 498 595 542 546 q 365 651 448 651 q 199 578 263 651 q 136 401 136 505 q 266 178 136 241 q 508 106 387 142 q 640 -50 640 62 q 625 -158 640 -105 q 583 -278 611 -211 l 465 -278 q 498 -182 490 -211 q 515 -80 515 -126 q 381 12 515 -15 q 134 91 197 51 q 1 388 1 179 q 100 651 1 542 q 354 761 199 761 q 587 680 498 761 q 676 460 676 599 "},M:{x_min:0,x_max:954,ha:1067,o:"m 954 0 l 819 0 l 819 869 l 537 0 l 405 0 l 128 866 l 128 0 l 0 0 l 0 1013 l 200 1013 l 472 160 l 757 1013 l 954 1013 l 954 0 "},:{x_min:0,x_max:1006,ha:1094,o:"m 1006 678 q 914 319 1006 429 q 571 200 814 200 l 571 0 l 433 0 l 433 200 q 92 319 194 200 q 0 678 0 429 l 0 1013 l 139 1013 l 139 679 q 191 417 139 492 q 433 326 255 326 l 433 1013 l 571 1013 l 571 326 l 580 326 q 813 423 747 326 q 868 679 868 502 l 868 1013 l 1006 1013 l 1006 678 "},C:{x_min:0,x_max:886,ha:944,o:"m 886 379 q 760 87 886 201 q 455 -26 634 -26 q 112 136 236 -26 q 0 509 0 283 q 118 882 0 737 q 469 1041 245 1041 q 748 955 630 1041 q 879 708 879 859 l 745 708 q 649 862 724 805 q 473 920 573 920 q 219 791 312 920 q 136 509 136 675 q 217 229 136 344 q 470 99 311 99 q 672 179 591 99 q 753 379 753 259 l 886 379 "},"!":{x_min:0,x_max:138,ha:236,o:"m 138 684 q 116 409 138 629 q 105 244 105 299 l 33 244 q 16 465 33 313 q 0 684 0 616 l 0 1013 l 138 1013 l 138 684 m 138 0 l 0 0 l 0 151 l 138 151 l 138 0 "},"{":{x_min:0,x_max:480.5625,ha:578,o:"m 480 -286 q 237 -213 303 -286 q 187 -45 187 -159 q 194 48 187 -15 q 201 141 201 112 q 164 264 201 225 q 0 314 118 314 l 0 417 q 164 471 119 417 q 201 605 201 514 q 199 665 201 644 q 193 772 193 769 q 241 941 193 887 q 480 1015 308 1015 l 480 915 q 336 866 375 915 q 306 742 306 828 q 310 662 306 717 q 314 577 314 606 q 288 452 314 500 q 176 365 256 391 q 289 275 257 337 q 314 143 314 226 q 313 84 314 107 q 310 -11 310 -5 q 339 -131 310 -94 q 480 -182 377 -182 l 480 -286 "},X:{x_min:-.015625,x_max:854.15625,ha:940,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 428 637 l 675 1013 l 836 1013 l 504 520 l 854 0 "},"#":{x_min:0,x_max:963.890625,ha:1061,o:"m 963 690 l 927 590 l 719 590 l 655 410 l 876 410 l 840 310 l 618 310 l 508 -3 l 393 -2 l 506 309 l 329 310 l 215 -2 l 102 -3 l 212 310 l 0 310 l 36 410 l 248 409 l 312 590 l 86 590 l 120 690 l 347 690 l 459 1006 l 573 1006 l 462 690 l 640 690 l 751 1006 l 865 1006 l 754 690 l 963 690 m 606 590 l 425 590 l 362 410 l 543 410 l 606 590 "},:{x_min:42,x_max:284,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 738 l 167 738 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 103 239 101 q 284 112 257 104 l 284 3 "},:{x_min:0,x_max:906.953125,ha:982,o:"m 283 1040 l 88 799 l 5 799 l 145 1040 l 283 1040 m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1012 l 529 1012 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},")":{x_min:0,x_max:318,ha:415,o:"m 318 365 q 257 25 318 191 q 87 -290 197 -141 l 0 -290 q 140 21 93 -128 q 193 360 193 189 q 141 704 193 537 q 0 1024 97 850 l 87 1024 q 257 706 197 871 q 318 365 318 542 "},:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 314 0 265 q 128 390 67 353 q 56 460 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 "},:{x_min:0,x_max:952.78125,ha:1028,o:"m 952 0 l 0 0 l 400 1013 l 551 1013 l 952 0 m 762 124 l 476 867 l 187 124 l 762 124 "},"}":{x_min:0,x_max:481,ha:578,o:"m 481 314 q 318 262 364 314 q 282 136 282 222 q 284 65 282 97 q 293 -58 293 -48 q 241 -217 293 -166 q 0 -286 174 -286 l 0 -182 q 143 -130 105 -182 q 171 -2 171 -93 q 168 81 171 22 q 165 144 165 140 q 188 275 165 229 q 306 365 220 339 q 191 455 224 391 q 165 588 165 505 q 168 681 165 624 q 171 742 171 737 q 141 865 171 827 q 0 915 102 915 l 0 1015 q 243 942 176 1015 q 293 773 293 888 q 287 675 293 741 q 282 590 282 608 q 318 466 282 505 q 481 417 364 417 l 481 314 "},"":{x_min:-3,x_max:1672,ha:1821,o:"m 846 0 q 664 76 732 0 q 603 244 603 145 q 662 412 603 344 q 846 489 729 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 846 0 962 0 m 845 103 q 945 143 910 103 q 981 243 981 184 q 947 340 981 301 q 845 385 910 385 q 745 342 782 385 q 709 243 709 300 q 742 147 709 186 q 845 103 781 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 m 1428 0 q 1246 76 1314 0 q 1185 244 1185 145 q 1244 412 1185 344 q 1428 489 1311 489 q 1610 412 1542 489 q 1672 244 1672 343 q 1612 76 1672 144 q 1428 0 1545 0 m 1427 103 q 1528 143 1492 103 q 1564 243 1564 184 q 1530 340 1564 301 q 1427 385 1492 385 q 1327 342 1364 385 q 1291 243 1291 300 q 1324 147 1291 186 q 1427 103 1363 103 "},a:{x_min:0,x_max:698.609375,ha:794,o:"m 698 0 q 661 -12 679 -7 q 615 -17 643 -17 q 536 12 564 -17 q 500 96 508 41 q 384 6 456 37 q 236 -25 312 -25 q 65 31 130 -25 q 0 194 0 88 q 118 390 0 334 q 328 435 180 420 q 488 483 476 451 q 495 523 495 504 q 442 619 495 584 q 325 654 389 654 q 209 617 257 654 q 152 513 161 580 l 33 513 q 123 705 33 633 q 332 772 207 772 q 528 712 448 772 q 617 531 617 645 l 617 163 q 624 108 617 126 q 664 90 632 90 l 698 94 l 698 0 m 491 262 l 491 372 q 272 329 350 347 q 128 201 128 294 q 166 113 128 144 q 264 83 205 83 q 414 130 346 83 q 491 262 491 183 "},"":{x_min:0,x_max:941.671875,ha:1039,o:"m 941 334 l 0 334 l 0 410 l 941 410 l 941 334 "},"=":{x_min:8.71875,x_max:780.953125,ha:792,o:"m 780 510 l 8 510 l 8 606 l 780 606 l 780 510 m 780 235 l 8 235 l 8 332 l 780 332 l 780 235 "},N:{x_min:0,x_max:801,ha:914,o:"m 801 0 l 651 0 l 131 823 l 131 0 l 0 0 l 0 1013 l 151 1013 l 670 193 l 670 1013 l 801 1013 l 801 0 "},:{x_min:0,x_max:712,ha:797,o:"m 712 369 q 620 94 712 207 q 362 -26 521 -26 q 230 2 292 -26 q 119 83 167 30 l 119 -278 l 0 -278 l 0 362 q 91 643 0 531 q 355 764 190 764 q 617 647 517 764 q 712 369 712 536 m 583 366 q 530 559 583 480 q 359 651 469 651 q 190 562 252 651 q 135 370 135 483 q 189 176 135 257 q 359 85 250 85 q 528 175 466 85 q 583 366 583 254 "},"":{x_min:0,x_max:941.671875,ha:938,o:"m 941 1033 l 0 1033 l 0 1109 l 941 1109 l 941 1033 "},Z:{x_min:0,x_max:779,ha:849,o:"m 779 0 l 0 0 l 0 113 l 621 896 l 40 896 l 40 1013 l 779 1013 l 778 887 l 171 124 l 779 124 l 779 0 "},u:{x_min:0,x_max:617,ha:729,o:"m 617 0 l 499 0 l 499 110 q 391 10 460 45 q 246 -25 322 -25 q 61 58 127 -25 q 0 258 0 136 l 0 738 l 125 738 l 125 284 q 156 148 125 202 q 273 82 197 82 q 433 165 369 82 q 493 340 493 243 l 493 738 l 617 738 l 617 0 "},k:{x_min:0,x_max:612.484375,ha:697,o:"m 612 738 l 338 465 l 608 0 l 469 0 l 251 382 l 121 251 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 402 l 456 738 l 612 738 "},:{x_min:0,x_max:803,ha:917,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},:{x_min:0,x_max:906.953125,ha:985,o:"m 906 0 l 756 0 l 650 303 l 251 303 l 143 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 609 421 l 452 866 l 293 421 l 609 421 "},s:{x_min:0,x_max:604,ha:697,o:"m 604 217 q 501 36 604 104 q 292 -23 411 -23 q 86 43 166 -23 q 0 238 0 114 l 121 237 q 175 122 121 164 q 300 85 223 85 q 415 112 363 85 q 479 207 479 147 q 361 309 479 276 q 140 372 141 370 q 21 544 21 426 q 111 708 21 647 q 298 761 190 761 q 492 705 413 761 q 583 531 583 643 l 462 531 q 412 625 462 594 q 298 657 363 657 q 199 636 242 657 q 143 558 143 608 q 262 454 143 486 q 484 394 479 397 q 604 217 604 341 "},B:{x_min:0,x_max:778,ha:876,o:"m 580 546 q 724 469 670 535 q 778 311 778 403 q 673 83 778 171 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 892 q 691 633 732 693 q 580 546 650 572 m 393 899 l 139 899 l 139 588 l 379 588 q 521 624 462 588 q 592 744 592 667 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 303 635 219 q 559 436 635 389 q 402 477 494 477 l 139 477 l 139 124 l 419 124 "},"":{x_min:0,x_max:614,ha:708,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 m 378 0 l 236 0 l 236 151 l 378 151 l 378 0 m 614 0 l 472 0 l 472 151 l 614 151 l 614 0 "},"?":{x_min:0,x_max:607,ha:704,o:"m 607 777 q 543 599 607 674 q 422 474 482 537 q 357 272 357 391 l 236 272 q 297 487 236 395 q 411 619 298 490 q 474 762 474 691 q 422 885 474 838 q 301 933 371 933 q 179 880 228 933 q 124 706 124 819 l 0 706 q 94 963 0 872 q 302 1044 177 1044 q 511 973 423 1044 q 607 777 607 895 m 370 0 l 230 0 l 230 151 l 370 151 l 370 0 "},H:{x_min:0,x_max:803,ha:915,o:"m 803 0 l 667 0 l 667 475 l 140 475 l 140 0 l 0 0 l 0 1013 l 140 1013 l 140 599 l 667 599 l 667 1013 l 803 1013 l 803 0 "},:{x_min:0,x_max:675,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 738 l 340 147 l 541 738 l 675 738 "},c:{x_min:1,x_max:701.390625,ha:775,o:"m 701 264 q 584 53 681 133 q 353 -26 487 -26 q 91 91 188 -26 q 1 370 1 201 q 92 645 1 537 q 353 761 190 761 q 572 688 479 761 q 690 493 666 615 l 556 493 q 487 606 545 562 q 356 650 428 650 q 186 563 246 650 q 134 372 134 487 q 188 179 134 258 q 359 88 250 88 q 492 136 437 88 q 566 264 548 185 l 701 264 "},"":{x_min:0,x_max:566.671875,ha:678,o:"m 21 892 l 52 892 l 98 761 l 145 892 l 176 892 l 178 741 l 157 741 l 157 867 l 108 741 l 88 741 l 40 871 l 40 741 l 21 741 l 21 892 m 308 854 l 308 731 q 252 691 308 691 q 227 691 240 691 q 207 696 213 695 l 207 712 l 253 706 q 288 733 288 706 l 288 763 q 244 741 279 741 q 193 797 193 741 q 261 860 193 860 q 287 860 273 860 q 308 854 302 855 m 288 842 l 263 843 q 213 796 213 843 q 248 756 213 756 q 288 796 288 756 l 288 842 m 566 988 l 502 988 l 502 -1 l 439 -1 l 439 988 l 317 988 l 317 -1 l 252 -1 l 252 602 q 81 653 155 602 q 0 805 0 711 q 101 989 0 918 q 309 1053 194 1053 l 566 1053 l 566 988 "},:{x_min:0,x_max:660,ha:745,o:"m 471 550 q 610 450 561 522 q 660 280 660 378 q 578 64 660 151 q 367 -22 497 -22 q 239 5 299 -22 q 126 82 178 32 l 126 -278 l 0 -278 l 0 593 q 54 903 0 801 q 318 1042 127 1042 q 519 964 436 1042 q 603 771 603 887 q 567 644 603 701 q 471 550 532 586 m 337 79 q 476 138 418 79 q 535 279 535 198 q 427 437 535 386 q 226 477 344 477 l 226 583 q 398 620 329 583 q 486 762 486 668 q 435 884 486 833 q 312 935 384 935 q 169 861 219 935 q 126 698 126 797 l 126 362 q 170 169 126 242 q 337 79 224 79 "},:{x_min:0,x_max:954,ha:1068,o:"m 954 0 l 819 0 l 819 868 l 537 0 l 405 0 l 128 865 l 128 0 l 0 0 l 0 1013 l 199 1013 l 472 158 l 758 1013 l 954 1013 l 954 0 "},:{x_min:.109375,x_max:1120,ha:1217,o:"m 1120 505 q 994 132 1120 282 q 642 -29 861 -29 q 290 130 422 -29 q 167 505 167 280 q 294 883 167 730 q 650 1046 430 1046 q 999 882 868 1046 q 1120 505 1120 730 m 977 504 q 896 784 977 669 q 644 915 804 915 q 391 785 484 915 q 307 504 307 669 q 391 224 307 339 q 644 95 486 95 q 894 224 803 95 q 977 504 977 339 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},:{x_min:0,x_max:1158,ha:1275,o:"m 1158 0 l 1022 0 l 1022 475 l 496 475 l 496 0 l 356 0 l 356 1012 l 496 1012 l 496 599 l 1022 599 l 1022 1012 l 1158 1012 l 1158 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},"":{x_min:0,x_max:663.890625,ha:775,o:"m 663 529 q 566 293 663 391 q 331 196 469 196 q 97 294 194 196 q 0 529 0 393 q 96 763 0 665 q 331 861 193 861 q 566 763 469 861 q 663 529 663 665 "},"":{x_min:.1875,x_max:819.546875,ha:886,o:"m 563 561 l 697 561 l 696 487 l 520 487 l 482 416 l 482 380 l 697 380 l 695 308 l 482 308 l 482 0 l 342 0 l 342 308 l 125 308 l 125 380 l 342 380 l 342 417 l 303 487 l 125 487 l 125 561 l 258 561 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 l 563 561 "},"(":{x_min:0,x_max:318.0625,ha:415,o:"m 318 -290 l 230 -290 q 61 23 122 -142 q 0 365 0 190 q 62 712 0 540 q 230 1024 119 869 l 318 1024 q 175 705 219 853 q 125 360 125 542 q 176 22 125 187 q 318 -290 223 -127 "},U:{x_min:0,x_max:796,ha:904,o:"m 796 393 q 681 93 796 212 q 386 -25 566 -25 q 101 95 208 -25 q 0 393 0 211 l 0 1013 l 138 1013 l 138 391 q 204 191 138 270 q 394 107 276 107 q 586 191 512 107 q 656 391 656 270 l 656 1013 l 796 1013 l 796 393 "},:{x_min:.5,x_max:744.953125,ha:822,o:"m 744 737 l 463 54 l 463 -278 l 338 -278 l 338 54 l 154 495 q 104 597 124 569 q 13 651 67 651 l 0 651 l 0 751 l 39 753 q 168 711 121 753 q 242 594 207 676 l 403 208 l 617 737 l 744 737 "},:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 728 407 760 q 563 637 524 696 l 563 739 l 685 739 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 96 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 "},F:{x_min:0,x_max:683.328125,ha:717,o:"m 683 888 l 140 888 l 140 583 l 613 583 l 613 458 l 140 458 l 140 0 l 0 0 l 0 1013 l 683 1013 l 683 888 "},"":{x_min:0,x_max:705.5625,ha:803,o:"m 705 334 l 0 334 l 0 410 l 705 410 l 705 334 "},":":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},:{x_min:0,x_max:854.171875,ha:935,o:"m 854 0 l 683 0 l 423 409 l 166 0 l 0 0 l 347 519 l 18 1013 l 186 1013 l 427 637 l 675 1013 l 836 1013 l 504 521 l 854 0 "},"*":{x_min:116,x_max:674,ha:792,o:"m 674 768 l 475 713 l 610 544 l 517 477 l 394 652 l 272 478 l 178 544 l 314 713 l 116 766 l 153 876 l 341 812 l 342 1013 l 446 1013 l 446 811 l 635 874 l 674 768 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 804 l 777 804 l 777 683 l 458 683 l 458 0 l 319 0 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 "},"":{x_min:0,x_max:347,ha:444,o:"m 173 802 q 43 856 91 802 q 0 977 0 905 q 45 1101 0 1049 q 173 1153 90 1153 q 303 1098 255 1153 q 347 977 347 1049 q 303 856 347 905 q 173 802 256 802 m 173 884 q 238 910 214 884 q 262 973 262 937 q 239 1038 262 1012 q 173 1064 217 1064 q 108 1037 132 1064 q 85 973 85 1010 q 108 910 85 937 q 173 884 132 884 "},V:{x_min:0,x_max:862.71875,ha:940,o:"m 862 1013 l 505 0 l 361 0 l 0 1013 l 143 1013 l 434 165 l 718 1012 l 862 1013 "},:{x_min:0,x_max:734.71875,ha:763,o:"m 723 889 l 9 889 l 9 1013 l 723 1013 l 723 889 m 673 463 l 61 463 l 61 589 l 673 589 l 673 463 m 734 0 l 0 0 l 0 124 l 734 124 l 734 0 "},"":{x_min:0,x_max:0,ha:853},:{x_min:.328125,x_max:819.515625,ha:889,o:"m 588 1046 l 460 1046 l 460 1189 l 588 1189 l 588 1046 m 360 1046 l 232 1046 l 232 1189 l 360 1189 l 360 1046 m 819 1012 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1012 l 140 1012 l 411 533 l 679 1012 l 819 1012 "},"":{x_min:0,x_max:347,ha:454,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 m 347 851 q 310 737 347 784 q 208 669 273 690 l 208 734 q 267 787 250 741 q 280 873 280 821 l 208 873 l 208 1013 l 347 1013 l 347 851 "},"@":{x_min:0,x_max:1260,ha:1357,o:"m 1098 -45 q 877 -160 1001 -117 q 633 -203 752 -203 q 155 -29 327 -203 q 0 360 0 127 q 176 802 0 616 q 687 1008 372 1008 q 1123 854 969 1008 q 1260 517 1260 718 q 1155 216 1260 341 q 868 82 1044 82 q 772 106 801 82 q 737 202 737 135 q 647 113 700 144 q 527 82 594 82 q 367 147 420 82 q 314 312 314 212 q 401 565 314 452 q 639 690 498 690 q 810 588 760 690 l 849 668 l 938 668 q 877 441 900 532 q 833 226 833 268 q 853 182 833 198 q 902 167 873 167 q 1088 272 1012 167 q 1159 512 1159 372 q 1051 793 1159 681 q 687 925 925 925 q 248 747 415 925 q 97 361 97 586 q 226 26 97 159 q 627 -122 370 -122 q 856 -87 737 -122 q 1061 8 976 -53 l 1098 -45 m 786 488 q 738 580 777 545 q 643 615 700 615 q 483 517 548 615 q 425 322 425 430 q 457 203 425 250 q 552 156 490 156 q 722 273 665 156 q 786 488 738 309 "},:{x_min:0,x_max:499,ha:613,o:"m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 m 499 0 l 360 0 l 360 1012 l 499 1012 l 499 0 "},i:{x_min:14,x_max:136,ha:275,o:"m 136 873 l 14 873 l 14 1013 l 136 1013 l 136 873 m 136 0 l 14 0 l 14 737 l 136 737 l 136 0 "},:{x_min:0,x_max:778,ha:877,o:"m 580 545 q 724 468 671 534 q 778 310 778 402 q 673 83 778 170 q 432 0 575 0 l 0 0 l 0 1013 l 411 1013 q 629 957 541 1013 q 732 768 732 891 q 691 632 732 692 q 580 545 650 571 m 393 899 l 139 899 l 139 587 l 379 587 q 521 623 462 587 q 592 744 592 666 q 531 859 592 819 q 393 899 471 899 m 419 124 q 566 169 504 124 q 635 302 635 219 q 559 435 635 388 q 402 476 494 476 l 139 476 l 139 124 l 419 124 "},:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 94 617 199 q 308 -24 455 -24 q 76 94 161 -24 q 0 352 0 199 l 0 739 l 126 739 l 126 355 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 355 492 257 l 492 739 l 617 739 l 617 352 "},"]":{x_min:0,x_max:275,ha:372,o:"m 275 -281 l 0 -281 l 0 -187 l 151 -187 l 151 920 l 0 920 l 0 1013 l 275 1013 l 275 -281 "},m:{x_min:0,x_max:1019,ha:1128,o:"m 1019 0 l 897 0 l 897 454 q 860 591 897 536 q 739 660 816 660 q 613 586 659 660 q 573 436 573 522 l 573 0 l 447 0 l 447 455 q 412 591 447 535 q 294 657 372 657 q 165 586 213 657 q 122 437 122 521 l 122 0 l 0 0 l 0 738 l 117 738 l 117 640 q 202 730 150 697 q 316 763 254 763 q 437 730 381 763 q 525 642 494 697 q 621 731 559 700 q 753 763 682 763 q 943 694 867 763 q 1019 512 1019 625 l 1019 0 "},:{x_min:8.328125,x_max:780.5625,ha:815,o:"m 780 -278 q 715 -294 747 -294 q 616 -257 663 -294 q 548 -175 576 -227 l 379 133 l 143 -277 l 9 -277 l 313 254 l 163 522 q 127 586 131 580 q 36 640 91 640 q 8 637 27 640 l 8 752 l 52 757 q 162 719 113 757 q 236 627 200 690 l 383 372 l 594 737 l 726 737 l 448 250 l 625 -69 q 670 -153 647 -110 q 743 -188 695 -188 q 780 -184 759 -188 l 780 -278 "},:{x_min:42,x_max:326.71875,ha:361,o:"m 284 3 q 233 -10 258 -5 q 182 -15 207 -15 q 85 26 119 -15 q 42 200 42 79 l 42 737 l 167 737 l 168 215 q 172 141 168 157 q 226 101 183 101 q 248 102 239 101 q 284 112 257 104 l 284 3 m 326 1040 l 137 819 l 54 819 l 189 1040 l 326 1040 "},:{x_min:0,x_max:779.171875,ha:850,o:"m 779 0 l 0 0 l 0 113 l 620 896 l 40 896 l 40 1013 l 779 1013 l 779 887 l 170 124 l 779 124 l 779 0 "},R:{x_min:0,x_max:781.953125,ha:907,o:"m 781 0 l 623 0 q 587 242 590 52 q 407 433 585 433 l 138 433 l 138 0 l 0 0 l 0 1013 l 396 1013 q 636 946 539 1013 q 749 731 749 868 q 711 597 749 659 q 608 502 674 534 q 718 370 696 474 q 729 207 722 352 q 781 26 736 62 l 781 0 m 373 551 q 533 594 465 551 q 614 731 614 645 q 532 859 614 815 q 373 896 465 896 l 138 896 l 138 551 l 373 551 "},o:{x_min:0,x_max:713,ha:821,o:"m 357 -25 q 94 91 194 -25 q 0 368 0 202 q 93 642 0 533 q 357 761 193 761 q 618 644 518 761 q 713 368 713 533 q 619 91 713 201 q 357 -25 521 -25 m 357 85 q 528 175 465 85 q 584 369 584 255 q 529 562 584 484 q 357 651 467 651 q 189 560 250 651 q 135 369 135 481 q 187 177 135 257 q 357 85 250 85 "},K:{x_min:0,x_max:819.46875,ha:906,o:"m 819 0 l 649 0 l 294 509 l 139 355 l 139 0 l 0 0 l 0 1013 l 139 1013 l 139 526 l 626 1013 l 809 1013 l 395 600 l 819 0 "},",":{x_min:0,x_max:142,ha:239,o:"m 142 -12 q 105 -132 142 -82 q 0 -205 68 -182 l 0 -138 q 57 -82 40 -124 q 70 0 70 -51 l 0 0 l 0 151 l 142 151 l 142 -12 "},d:{x_min:0,x_max:683,ha:796,o:"m 683 0 l 564 0 l 564 93 q 456 6 516 38 q 327 -25 395 -25 q 87 100 181 -25 q 0 365 0 215 q 90 639 0 525 q 343 763 187 763 q 564 647 486 763 l 564 1013 l 683 1013 l 683 0 m 582 373 q 529 562 582 484 q 361 653 468 653 q 190 561 253 653 q 135 365 135 479 q 189 175 135 254 q 358 85 251 85 q 529 178 468 85 q 582 373 582 258 "},"":{x_min:-109,x_max:247,ha:232,o:"m 247 1046 l 119 1046 l 119 1189 l 247 1189 l 247 1046 m 19 1046 l -109 1046 l -109 1189 l 19 1189 l 19 1046 "},E:{x_min:0,x_max:736.109375,ha:789,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},Y:{x_min:0,x_max:820,ha:886,o:"m 820 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 534 l 679 1012 l 820 1013 "},'"':{x_min:0,x_max:299,ha:396,o:"m 299 606 l 203 606 l 203 988 l 299 988 l 299 606 m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:364,ha:467,o:"m 141 -12 q 104 -132 141 -82 q 0 -205 67 -182 l 0 -138 q 56 -82 40 -124 q 69 0 69 -51 l 0 0 l 0 151 l 141 151 l 141 -12 m 364 -12 q 327 -132 364 -82 q 222 -205 290 -182 l 222 -138 q 279 -82 262 -124 q 292 0 292 -51 l 222 0 l 222 151 l 364 151 l 364 -12 "},:{x_min:1,x_max:710,ha:810,o:"m 710 360 q 616 87 710 196 q 356 -28 518 -28 q 99 82 197 -28 q 1 356 1 192 q 100 606 1 509 q 355 703 199 703 q 180 829 288 754 q 70 903 124 866 l 70 1012 l 643 1012 l 643 901 l 258 901 q 462 763 422 794 q 636 592 577 677 q 710 360 710 485 m 584 365 q 552 501 584 447 q 451 602 521 555 q 372 611 411 611 q 197 541 258 611 q 136 355 136 472 q 190 171 136 245 q 358 85 252 85 q 528 173 465 85 q 584 365 584 252 "},:{x_min:0,x_max:634.71875,ha:714,o:"m 634 234 q 527 38 634 110 q 300 -25 433 -25 q 98 29 183 -25 q 0 204 0 93 q 37 313 0 265 q 128 390 67 352 q 56 459 82 419 q 26 555 26 505 q 114 712 26 654 q 295 763 191 763 q 499 700 416 763 q 589 515 589 631 l 478 515 q 419 618 464 580 q 307 657 374 657 q 207 630 253 657 q 151 547 151 598 q 238 445 151 469 q 389 434 280 434 l 389 331 l 349 331 q 206 315 255 331 q 125 210 125 287 q 183 107 125 145 q 302 76 233 76 q 436 117 379 76 q 509 234 493 159 l 634 234 m 520 1040 l 331 819 l 248 819 l 383 1040 l 520 1040 "},:{x_min:0,x_max:922,ha:1031,o:"m 922 339 q 856 97 922 203 q 650 -26 780 -26 q 538 9 587 -26 q 461 103 489 44 q 387 12 436 46 q 277 -22 339 -22 q 69 97 147 -22 q 0 339 0 203 q 45 551 0 444 q 161 738 84 643 l 302 738 q 175 553 219 647 q 124 336 124 446 q 155 179 124 249 q 275 88 197 88 q 375 163 341 88 q 400 294 400 219 l 400 572 l 524 572 l 524 294 q 561 135 524 192 q 643 88 591 88 q 762 182 719 88 q 797 342 797 257 q 745 556 797 450 q 619 738 705 638 l 760 738 q 874 551 835 640 q 922 339 922 444 "},"":{x_min:0,x_max:96,ha:251,o:"m 96 606 l 0 606 l 0 988 l 96 988 l 96 606 "},"":{x_min:11,x_max:781,ha:792,o:"m 781 490 l 446 490 l 446 255 l 349 255 l 349 490 l 11 490 l 11 586 l 349 586 l 349 819 l 446 819 l 446 586 l 781 586 l 781 490 m 781 21 l 11 21 l 11 115 l 781 115 l 781 21 "},"|":{x_min:343,x_max:449,ha:792,o:"m 449 462 l 343 462 l 343 986 l 449 986 l 449 462 m 449 -242 l 343 -242 l 343 280 l 449 280 l 449 -242 "},:{x_min:0,x_max:617,ha:725,o:"m 482 800 l 372 800 l 372 925 l 482 925 l 482 800 m 239 800 l 129 800 l 129 925 l 239 925 l 239 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 "},"":{x_min:0,x_max:593,ha:690,o:"m 593 425 q 554 312 593 369 q 467 233 516 254 q 537 83 537 172 q 459 -74 537 -12 q 288 -133 387 -133 q 115 -69 184 -133 q 47 96 47 -6 l 166 96 q 199 7 166 40 q 288 -26 232 -26 q 371 -5 332 -26 q 420 60 420 21 q 311 201 420 139 q 108 309 210 255 q 0 490 0 383 q 33 602 0 551 q 124 687 66 654 q 75 743 93 712 q 58 812 58 773 q 133 984 58 920 q 300 1043 201 1043 q 458 987 394 1043 q 529 814 529 925 l 411 814 q 370 908 404 877 q 289 939 336 939 q 213 911 246 939 q 180 841 180 883 q 286 720 180 779 q 484 612 480 615 q 593 425 593 534 m 467 409 q 355 544 467 473 q 196 630 228 612 q 146 587 162 609 q 124 525 124 558 q 239 387 124 462 q 398 298 369 315 q 448 345 429 316 q 467 409 467 375 "},b:{x_min:0,x_max:685,ha:783,o:"m 685 372 q 597 99 685 213 q 347 -25 501 -25 q 219 5 277 -25 q 121 93 161 36 l 121 0 l 0 0 l 0 1013 l 121 1013 l 121 634 q 214 723 157 692 q 341 754 272 754 q 591 637 493 754 q 685 372 685 526 m 554 356 q 499 550 554 470 q 328 644 437 644 q 162 556 223 644 q 108 369 108 478 q 160 176 108 256 q 330 83 221 83 q 498 169 435 83 q 554 356 554 245 "},q:{x_min:0,x_max:683,ha:876,o:"m 683 -278 l 564 -278 l 564 97 q 474 8 533 39 q 345 -23 415 -23 q 91 93 188 -23 q 0 364 0 203 q 87 635 0 522 q 337 760 184 760 q 466 727 408 760 q 564 637 523 695 l 564 737 l 683 737 l 683 -278 m 582 375 q 527 564 582 488 q 358 652 466 652 q 190 565 253 652 q 135 377 135 488 q 189 179 135 261 q 361 84 251 84 q 530 179 469 84 q 582 375 582 260 "},:{x_min:-.171875,x_max:969.5625,ha:1068,o:"m 969 0 l 555 0 l 555 123 q 744 308 675 194 q 814 558 814 423 q 726 812 814 709 q 484 922 633 922 q 244 820 334 922 q 154 567 154 719 q 223 316 154 433 q 412 123 292 199 l 412 0 l 0 0 l 0 124 l 217 124 q 68 327 122 210 q 15 572 15 444 q 144 911 15 781 q 484 1041 274 1041 q 822 909 691 1041 q 953 569 953 777 q 899 326 953 443 q 750 124 846 210 l 969 124 l 969 0 "},:{x_min:0,x_max:617,ha:725,o:"m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 535 1040 l 346 819 l 262 819 l 397 1040 l 535 1040 "},z:{x_min:-.015625,x_max:613.890625,ha:697,o:"m 613 0 l 0 0 l 0 100 l 433 630 l 20 630 l 20 738 l 594 738 l 593 636 l 163 110 l 613 110 l 613 0 "},"":{x_min:0,x_max:894,ha:1e3,o:"m 389 951 l 229 951 l 229 503 l 160 503 l 160 951 l 0 951 l 0 1011 l 389 1011 l 389 951 m 894 503 l 827 503 l 827 939 l 685 503 l 620 503 l 481 937 l 481 503 l 417 503 l 417 1011 l 517 1011 l 653 580 l 796 1010 l 894 1011 l 894 503 "},:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 721 124 755 q 200 630 193 687 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 m 479 1040 l 290 819 l 207 819 l 341 1040 l 479 1040 "},:{x_min:0,x_max:960,ha:1056,o:"m 960 507 q 833 129 960 280 q 476 -32 698 -32 q 123 129 255 -32 q 0 507 0 280 q 123 883 0 732 q 476 1045 255 1045 q 832 883 696 1045 q 960 507 960 732 m 817 500 q 733 789 817 669 q 476 924 639 924 q 223 792 317 924 q 142 507 142 675 q 222 222 142 339 q 476 89 315 89 q 730 218 636 89 q 817 500 817 334 m 716 449 l 243 449 l 243 571 l 716 571 l 716 449 "},"":{x_min:-3,x_max:1008,ha:1106,o:"m 503 532 q 614 562 566 532 q 672 658 672 598 q 614 747 672 716 q 503 772 569 772 l 338 772 l 338 532 l 503 532 m 502 -7 q 123 151 263 -7 q -3 501 -3 294 q 123 851 -3 706 q 502 1011 263 1011 q 881 851 739 1011 q 1008 501 1008 708 q 883 151 1008 292 q 502 -7 744 -7 m 502 60 q 830 197 709 60 q 940 501 940 322 q 831 805 940 681 q 502 944 709 944 q 174 805 296 944 q 65 501 65 680 q 173 197 65 320 q 502 60 294 60 m 788 146 l 678 146 q 653 316 655 183 q 527 449 652 449 l 338 449 l 338 146 l 241 146 l 241 854 l 518 854 q 688 808 621 854 q 766 658 766 755 q 739 563 766 607 q 668 497 713 519 q 751 331 747 472 q 788 164 756 190 l 788 146 "},"~":{x_min:0,x_max:833,ha:931,o:"m 833 958 q 778 753 833 831 q 594 665 716 665 q 402 761 502 665 q 240 857 302 857 q 131 795 166 857 q 104 665 104 745 l 0 665 q 54 867 0 789 q 237 958 116 958 q 429 861 331 958 q 594 765 527 765 q 704 827 670 765 q 729 958 729 874 l 833 958 "},:{x_min:0,x_max:736.21875,ha:778,o:"m 736 0 l 0 0 l 0 1013 l 725 1013 l 725 889 l 139 889 l 139 585 l 677 585 l 677 467 l 139 467 l 139 125 l 736 125 l 736 0 "},"":{x_min:0,x_max:450,ha:547,o:"m 450 552 q 379 413 450 464 q 220 366 313 366 q 69 414 130 366 q 0 567 0 470 l 85 567 q 126 470 85 504 q 225 437 168 437 q 320 467 280 437 q 360 552 360 498 q 318 632 360 608 q 213 657 276 657 q 195 657 203 657 q 176 657 181 657 l 176 722 q 279 733 249 722 q 334 815 334 752 q 300 881 334 856 q 220 907 267 907 q 133 875 169 907 q 97 781 97 844 l 15 781 q 78 926 15 875 q 220 972 135 972 q 364 930 303 972 q 426 817 426 888 q 344 697 426 733 q 421 642 392 681 q 450 552 450 603 "},"[":{x_min:0,x_max:273.609375,ha:371,o:"m 273 -281 l 0 -281 l 0 1013 l 273 1013 l 273 920 l 124 920 l 124 -187 l 273 -187 l 273 -281 "},L:{x_min:0,x_max:645.828125,ha:696,o:"m 645 0 l 0 0 l 0 1013 l 140 1013 l 140 126 l 645 126 l 645 0 "},:{x_min:0,x_max:803.390625,ha:894,o:"m 803 628 l 633 628 q 713 368 713 512 q 618 93 713 204 q 357 -25 518 -25 q 94 91 194 -25 q 0 368 0 201 q 94 644 0 533 q 356 761 194 761 q 481 750 398 761 q 608 739 564 739 l 803 739 l 803 628 m 360 85 q 529 180 467 85 q 584 374 584 262 q 527 566 584 490 q 352 651 463 651 q 187 559 247 651 q 135 368 135 478 q 189 175 135 254 q 360 85 251 85 "},:{x_min:0,x_max:573,ha:642,o:"m 573 -40 q 553 -162 573 -97 q 510 -278 543 -193 l 400 -278 q 441 -187 428 -219 q 462 -90 462 -132 q 378 -14 462 -14 q 108 45 197 -14 q 0 290 0 117 q 108 631 0 462 q 353 901 194 767 l 55 901 l 55 1012 l 561 1012 l 561 924 q 261 669 382 831 q 128 301 128 489 q 243 117 128 149 q 458 98 350 108 q 573 -40 573 80 "},:{x_min:0,x_max:674,ha:778,o:"m 674 496 q 601 160 674 304 q 336 -26 508 -26 q 73 153 165 -26 q 0 485 0 296 q 72 840 0 683 q 343 1045 166 1045 q 605 844 516 1045 q 674 496 674 692 m 546 579 q 498 798 546 691 q 336 935 437 935 q 178 798 237 935 q 126 579 137 701 l 546 579 m 546 475 l 126 475 q 170 233 126 348 q 338 80 230 80 q 504 233 447 80 q 546 475 546 346 "},:{x_min:0,x_max:958,ha:1054,o:"m 485 1042 q 834 883 703 1042 q 958 511 958 735 q 834 136 958 287 q 481 -26 701 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 729 q 485 1042 263 1042 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 670 q 480 913 640 913 q 226 785 321 913 q 142 504 142 671 q 226 224 142 339 q 480 98 319 98 "},:{x_min:0,x_max:705.28125,ha:749,o:"m 705 886 l 140 886 l 140 0 l 0 0 l 0 1012 l 705 1012 l 705 886 "}," ":{x_min:0,x_max:0,ha:375},"%":{x_min:-3,x_max:1089,ha:1186,o:"m 845 0 q 663 76 731 0 q 602 244 602 145 q 661 412 602 344 q 845 489 728 489 q 1027 412 959 489 q 1089 244 1089 343 q 1029 76 1089 144 q 845 0 962 0 m 844 103 q 945 143 909 103 q 981 243 981 184 q 947 340 981 301 q 844 385 909 385 q 744 342 781 385 q 708 243 708 300 q 741 147 708 186 q 844 103 780 103 m 888 986 l 284 -25 l 199 -25 l 803 986 l 888 986 m 241 468 q 58 545 126 468 q -3 715 -3 615 q 56 881 -3 813 q 238 958 124 958 q 421 881 353 958 q 483 712 483 813 q 423 544 483 612 q 241 468 356 468 m 241 855 q 137 811 175 855 q 100 710 100 768 q 136 612 100 653 q 240 572 172 572 q 344 614 306 572 q 382 713 382 656 q 347 810 382 771 q 241 855 308 855 "},P:{x_min:0,x_max:726,ha:806,o:"m 424 1013 q 640 931 555 1013 q 726 719 726 850 q 637 506 726 587 q 413 426 548 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 379 889 l 140 889 l 140 548 l 372 548 q 522 589 459 548 q 593 720 593 637 q 528 845 593 801 q 379 889 463 889 "},:{x_min:0,x_max:1078.21875,ha:1118,o:"m 1078 0 l 342 0 l 342 1013 l 1067 1013 l 1067 889 l 481 889 l 481 585 l 1019 585 l 1019 467 l 481 467 l 481 125 l 1078 125 l 1078 0 m 277 1040 l 83 799 l 0 799 l 140 1040 l 277 1040 "},:{x_min:.125,x_max:1136.546875,ha:1235,o:"m 1136 0 l 722 0 l 722 123 q 911 309 842 194 q 981 558 981 423 q 893 813 981 710 q 651 923 800 923 q 411 821 501 923 q 321 568 321 720 q 390 316 321 433 q 579 123 459 200 l 579 0 l 166 0 l 166 124 l 384 124 q 235 327 289 210 q 182 572 182 444 q 311 912 182 782 q 651 1042 441 1042 q 989 910 858 1042 q 1120 569 1120 778 q 1066 326 1120 443 q 917 124 1013 210 l 1136 124 l 1136 0 m 277 1040 l 83 800 l 0 800 l 140 1041 l 277 1040 "},_:{x_min:0,x_max:705.5625,ha:803,o:"m 705 -334 l 0 -334 l 0 -234 l 705 -234 l 705 -334 "},:{x_min:-110,x_max:246,ha:275,o:"m 246 1046 l 118 1046 l 118 1189 l 246 1189 l 246 1046 m 18 1046 l -110 1046 l -110 1189 l 18 1189 l 18 1046 m 136 0 l 0 0 l 0 1012 l 136 1012 l 136 0 "},"+":{x_min:23,x_max:768,ha:792,o:"m 768 372 l 444 372 l 444 0 l 347 0 l 347 372 l 23 372 l 23 468 l 347 468 l 347 840 l 444 840 l 444 468 l 768 468 l 768 372 "},"":{x_min:0,x_max:1050,ha:1149,o:"m 1050 0 l 625 0 q 712 178 625 108 q 878 277 722 187 q 967 385 967 328 q 932 456 967 429 q 850 484 897 484 q 759 450 798 484 q 721 352 721 416 l 640 352 q 706 502 640 448 q 851 551 766 551 q 987 509 931 551 q 1050 385 1050 462 q 976 251 1050 301 q 829 179 902 215 q 717 68 740 133 l 1050 68 l 1050 0 m 834 985 l 215 -28 l 130 -28 l 750 984 l 834 985 m 224 422 l 142 422 l 142 811 l 0 811 l 0 867 q 104 889 62 867 q 164 973 157 916 l 224 973 l 224 422 "},:{x_min:0,x_max:720,ha:783,o:"m 424 1013 q 637 933 554 1013 q 720 723 720 853 q 633 508 720 591 q 413 426 546 426 l 140 426 l 140 0 l 0 0 l 0 1013 l 424 1013 m 378 889 l 140 889 l 140 548 l 371 548 q 521 589 458 548 q 592 720 592 637 q 527 845 592 801 q 378 889 463 889 "},"'":{x_min:0,x_max:139,ha:236,o:"m 139 851 q 102 737 139 784 q 0 669 65 690 l 0 734 q 59 787 42 741 q 72 873 72 821 l 0 873 l 0 1013 l 139 1013 l 139 851 "},:{x_min:0,x_max:350,ha:397,o:"m 350 625 q 307 616 328 616 q 266 631 281 616 q 247 673 251 645 q 190 628 225 644 q 116 613 156 613 q 32 641 64 613 q 0 722 0 669 q 72 826 0 800 q 247 866 159 846 l 247 887 q 220 934 247 916 q 162 953 194 953 q 104 934 129 953 q 76 882 80 915 l 16 882 q 60 976 16 941 q 166 1011 104 1011 q 266 979 224 1011 q 308 891 308 948 l 308 706 q 311 679 308 688 q 331 670 315 670 l 350 672 l 350 625 m 247 757 l 247 811 q 136 790 175 798 q 64 726 64 773 q 83 682 64 697 q 132 667 103 667 q 207 690 174 667 q 247 757 247 718 "},"":{x_min:0,x_max:450,ha:553,o:"m 450 800 l 340 800 l 340 925 l 450 925 l 450 800 m 406 1040 l 212 800 l 129 800 l 269 1040 l 406 1040 m 110 800 l 0 800 l 0 925 l 110 925 l 110 800 "},T:{x_min:0,x_max:777,ha:835,o:"m 777 894 l 458 894 l 458 0 l 319 0 l 319 894 l 0 894 l 0 1013 l 777 1013 l 777 894 "},:{x_min:0,x_max:915,ha:997,o:"m 527 0 l 389 0 l 389 122 q 110 231 220 122 q 0 509 0 340 q 110 785 0 677 q 389 893 220 893 l 389 1013 l 527 1013 l 527 893 q 804 786 693 893 q 915 509 915 679 q 805 231 915 341 q 527 122 696 122 l 527 0 m 527 226 q 712 310 641 226 q 779 507 779 389 q 712 705 779 627 q 527 787 641 787 l 527 226 m 389 226 l 389 787 q 205 698 275 775 q 136 505 136 620 q 206 308 136 391 q 389 226 276 226 "},"":{x_min:0,x_max:0,ha:694},j:{x_min:-77.78125,x_max:167,ha:349,o:"m 167 871 l 42 871 l 42 1013 l 167 1013 l 167 871 m 167 -80 q 121 -231 167 -184 q -26 -278 76 -278 l -77 -278 l -77 -164 l -41 -164 q 26 -143 11 -164 q 42 -65 42 -122 l 42 737 l 167 737 l 167 -80 "},:{x_min:0,x_max:756.953125,ha:819,o:"m 756 0 l 0 0 l 0 107 l 395 523 l 22 904 l 22 1013 l 745 1013 l 745 889 l 209 889 l 566 523 l 187 125 l 756 125 l 756 0 "},"":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},"<":{x_min:17.984375,x_max:773.609375,ha:792,o:"m 773 40 l 18 376 l 17 465 l 773 799 l 773 692 l 159 420 l 773 149 l 773 40 "},"":{x_min:0,x_max:704.484375,ha:801,o:"m 704 41 q 623 -10 664 5 q 543 -26 583 -26 q 359 15 501 -26 q 243 36 288 36 q 158 23 197 36 q 73 -21 119 10 l 6 76 q 125 195 90 150 q 175 331 175 262 q 147 443 175 383 l 0 443 l 0 512 l 108 512 q 43 734 43 623 q 120 929 43 854 q 358 1010 204 1010 q 579 936 487 1010 q 678 729 678 857 l 678 684 l 552 684 q 504 838 552 780 q 362 896 457 896 q 216 852 263 896 q 176 747 176 815 q 199 627 176 697 q 248 512 217 574 l 468 512 l 468 443 l 279 443 q 297 356 297 398 q 230 194 297 279 q 153 107 211 170 q 227 133 190 125 q 293 142 264 142 q 410 119 339 142 q 516 96 482 96 q 579 105 550 96 q 648 142 608 115 l 704 41 "},t:{x_min:0,x_max:367,ha:458,o:"m 367 0 q 312 -5 339 -2 q 262 -8 284 -8 q 145 28 183 -8 q 108 143 108 64 l 108 638 l 0 638 l 0 738 l 108 738 l 108 944 l 232 944 l 232 738 l 367 738 l 367 638 l 232 638 l 232 185 q 248 121 232 140 q 307 102 264 102 q 345 104 330 102 q 367 107 360 107 l 367 0 "},"":{x_min:0,x_max:706,ha:803,o:"m 706 411 l 706 158 l 630 158 l 630 335 l 0 335 l 0 411 l 706 411 "},:{x_min:0,x_max:750,ha:803,o:"m 750 -7 q 679 -15 716 -15 q 538 59 591 -15 q 466 214 512 97 l 336 551 l 126 0 l 0 0 l 270 705 q 223 837 247 770 q 116 899 190 899 q 90 898 100 899 l 90 1004 q 152 1011 125 1011 q 298 938 244 1011 q 373 783 326 901 l 605 192 q 649 115 629 136 q 716 95 669 95 l 736 95 q 750 97 745 97 l 750 -7 "},W:{x_min:0,x_max:1263.890625,ha:1351,o:"m 1263 1013 l 995 0 l 859 0 l 627 837 l 405 0 l 265 0 l 0 1013 l 136 1013 l 342 202 l 556 1013 l 701 1013 l 921 207 l 1133 1012 l 1263 1013 "},">":{x_min:18.0625,x_max:774,ha:792,o:"m 774 376 l 18 40 l 18 149 l 631 421 l 18 692 l 18 799 l 774 465 l 774 376 "},v:{x_min:0,x_max:675.15625,ha:761,o:"m 675 738 l 404 0 l 272 0 l 0 738 l 133 737 l 340 147 l 541 737 l 675 738 "},:{x_min:.28125,x_max:644.5,ha:703,o:"m 644 628 l 382 628 l 382 179 q 388 120 382 137 q 436 91 401 91 q 474 94 447 91 q 504 97 501 97 l 504 0 q 454 -9 482 -5 q 401 -14 426 -14 q 278 67 308 -14 q 260 233 260 118 l 260 628 l 0 628 l 0 739 l 644 739 l 644 628 "},:{x_min:0,x_max:624.9375,ha:699,o:"m 624 -37 q 608 -153 624 -96 q 563 -278 593 -211 l 454 -278 q 491 -183 486 -200 q 511 -83 511 -126 q 484 -23 511 -44 q 370 1 452 1 q 323 0 354 1 q 283 -1 293 -1 q 84 76 169 -1 q 0 266 0 154 q 56 431 0 358 q 197 538 108 498 q 94 613 134 562 q 54 730 54 665 q 77 823 54 780 q 143 901 101 867 l 27 901 l 27 1012 l 576 1012 l 576 901 l 380 901 q 244 863 303 901 q 178 745 178 820 q 312 600 178 636 q 532 582 380 582 l 532 479 q 276 455 361 479 q 118 281 118 410 q 165 173 118 217 q 274 120 208 133 q 494 101 384 110 q 624 -37 624 76 "},"&":{x_min:-3,x_max:894.25,ha:992,o:"m 894 0 l 725 0 l 624 123 q 471 0 553 40 q 306 -41 390 -41 q 168 -7 231 -41 q 62 92 105 26 q 14 187 31 139 q -3 276 -3 235 q 55 433 -3 358 q 248 581 114 508 q 170 689 196 640 q 137 817 137 751 q 214 985 137 922 q 384 1041 284 1041 q 548 988 483 1041 q 622 824 622 928 q 563 666 622 739 q 431 556 516 608 l 621 326 q 649 407 639 361 q 663 493 653 426 l 781 493 q 703 229 781 352 l 894 0 m 504 818 q 468 908 504 877 q 384 940 433 940 q 293 907 331 940 q 255 818 255 875 q 289 714 255 767 q 363 628 313 678 q 477 729 446 682 q 504 818 504 771 m 556 209 l 314 499 q 179 395 223 449 q 135 283 135 341 q 146 222 135 253 q 183 158 158 192 q 333 80 241 80 q 556 209 448 80 "},:{x_min:0,x_max:862.5,ha:942,o:"m 862 0 l 719 0 l 426 847 l 143 0 l 0 0 l 356 1013 l 501 1013 l 862 0 "},I:{x_min:41,x_max:180,ha:293,o:"m 180 0 l 41 0 l 41 1013 l 180 1013 l 180 0 "},G:{x_min:0,x_max:921,ha:1011,o:"m 921 0 l 832 0 l 801 136 q 655 15 741 58 q 470 -28 568 -28 q 126 133 259 -28 q 0 499 0 284 q 125 881 0 731 q 486 1043 259 1043 q 763 957 647 1043 q 905 709 890 864 l 772 709 q 668 866 747 807 q 486 926 589 926 q 228 795 322 926 q 142 507 142 677 q 228 224 142 342 q 483 94 323 94 q 712 195 625 94 q 796 435 796 291 l 477 435 l 477 549 l 921 549 l 921 0 "},:{x_min:0,x_max:617,ha:725,o:"m 524 800 l 414 800 l 414 925 l 524 925 l 524 800 m 183 800 l 73 800 l 73 925 l 183 925 l 183 800 m 617 352 q 540 93 617 199 q 308 -24 455 -24 q 76 93 161 -24 q 0 352 0 199 l 0 738 l 126 738 l 126 354 q 169 185 126 257 q 312 98 220 98 q 451 185 402 98 q 492 354 492 257 l 492 738 l 617 738 l 617 352 m 489 1040 l 300 819 l 216 819 l 351 1040 l 489 1040 "},"`":{x_min:0,x_max:138.890625,ha:236,o:"m 138 699 l 0 699 l 0 861 q 36 974 0 929 q 138 1041 72 1020 l 138 977 q 82 931 95 969 q 69 839 69 893 l 138 839 l 138 699 "},"":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 "},:{x_min:.328125,x_max:819.515625,ha:889,o:"m 819 1013 l 482 416 l 482 0 l 342 0 l 342 416 l 0 1013 l 140 1013 l 411 533 l 679 1013 l 819 1013 "},r:{x_min:0,x_max:355.5625,ha:432,o:"m 355 621 l 343 621 q 179 569 236 621 q 122 411 122 518 l 122 0 l 0 0 l 0 737 l 117 737 l 117 604 q 204 719 146 686 q 355 753 262 753 l 355 621 "},x:{x_min:0,x_max:675,ha:764,o:"m 675 0 l 525 0 l 331 286 l 144 0 l 0 0 l 256 379 l 12 738 l 157 737 l 336 473 l 516 738 l 661 738 l 412 380 l 675 0 "},:{x_min:0,x_max:696.609375,ha:747,o:"m 696 -4 q 628 -14 657 -14 q 498 97 513 -14 q 422 8 470 41 q 313 -24 374 -24 q 207 3 258 -24 q 120 80 157 31 l 120 -278 l 0 -278 l 0 738 l 124 738 l 124 343 q 165 172 124 246 q 308 82 216 82 q 451 177 402 82 q 492 358 492 254 l 492 738 l 616 738 l 616 214 q 623 136 616 160 q 673 92 636 92 q 696 95 684 92 l 696 -4 "},h:{x_min:0,x_max:615,ha:724,o:"m 615 472 l 615 0 l 490 0 l 490 454 q 456 590 490 535 q 338 654 416 654 q 186 588 251 654 q 122 436 122 522 l 122 0 l 0 0 l 0 1013 l 122 1013 l 122 633 q 218 727 149 694 q 362 760 287 760 q 552 676 484 760 q 615 472 615 600 "},".":{x_min:0,x_max:142,ha:239,o:"m 142 0 l 0 0 l 0 151 l 142 151 l 142 0 "},:{x_min:-2,x_max:878,ha:974,o:"m 496 -279 l 378 -279 l 378 -17 q 101 88 204 -17 q -2 367 -2 194 q 68 626 -2 510 q 283 758 151 758 l 283 646 q 167 537 209 626 q 133 373 133 462 q 192 177 133 254 q 378 93 259 93 l 378 758 q 445 764 426 763 q 476 765 464 765 q 765 659 653 765 q 878 377 878 553 q 771 96 878 209 q 496 -17 665 -17 l 496 -279 m 496 93 l 514 93 q 687 183 623 93 q 746 380 746 265 q 691 569 746 491 q 522 658 629 658 l 496 656 l 496 93 "},";":{x_min:0,x_max:142,ha:239,o:"m 142 585 l 0 585 l 0 738 l 142 738 l 142 585 m 142 -12 q 105 -132 142 -82 q 0 -206 68 -182 l 0 -138 q 58 -82 43 -123 q 68 0 68 -56 l 0 0 l 0 151 l 142 151 l 142 -12 "},f:{x_min:0,x_max:378,ha:472,o:"m 378 638 l 246 638 l 246 0 l 121 0 l 121 638 l 0 638 l 0 738 l 121 738 q 137 935 121 887 q 290 1028 171 1028 q 320 1027 305 1028 q 378 1021 334 1026 l 378 908 q 323 918 346 918 q 257 870 273 918 q 246 780 246 840 l 246 738 l 378 738 l 378 638 "},"":{x_min:1,x_max:348.21875,ha:454,o:"m 140 670 l 1 670 l 1 830 q 37 943 1 897 q 140 1011 74 990 l 140 947 q 82 900 97 940 q 68 810 68 861 l 140 810 l 140 670 m 348 670 l 209 670 l 209 830 q 245 943 209 897 q 348 1011 282 990 l 348 947 q 290 900 305 940 q 276 810 276 861 l 348 810 l 348 670 "},A:{x_min:.03125,x_max:906.953125,ha:1008,o:"m 906 0 l 756 0 l 648 303 l 251 303 l 142 0 l 0 0 l 376 1013 l 529 1013 l 906 0 m 610 421 l 452 867 l 293 421 l 610 421 "},"":{x_min:1,x_max:139.890625,ha:236,o:"m 139 670 l 1 670 l 1 830 q 37 943 1 897 q 139 1011 74 990 l 139 947 q 82 900 97 940 q 68 810 68 861 l 139 810 l 139 670 "},:{x_min:-70,x_max:283,ha:361,o:"m 283 800 l 173 800 l 173 925 l 283 925 l 283 800 m 40 800 l -70 800 l -70 925 l 40 925 l 40 800 m 283 3 q 232 -10 257 -5 q 181 -15 206 -15 q 84 26 118 -15 q 41 200 41 79 l 41 737 l 166 737 l 167 215 q 171 141 167 157 q 225 101 182 101 q 247 103 238 101 q 283 112 256 104 l 283 3 "},:{x_min:-.21875,x_max:773.21875,ha:857,o:"m 773 -7 l 707 -11 q 575 40 607 -11 q 552 174 552 77 l 552 226 l 552 626 l 222 626 l 222 0 l 97 0 l 97 626 l 0 626 l 0 737 l 773 737 l 773 626 l 676 626 l 676 171 q 695 103 676 117 q 773 90 714 90 l 773 -7 "},:{x_min:0,x_max:765.5625,ha:809,o:"m 765 -4 q 698 -14 726 -14 q 564 97 586 -14 q 466 7 525 40 q 337 -26 407 -26 q 88 98 186 -26 q 0 369 0 212 q 88 637 0 525 q 337 760 184 760 q 465 727 407 760 q 563 637 524 695 l 563 738 l 685 738 l 685 222 q 693 141 685 168 q 748 94 708 94 q 765 95 760 94 l 765 -4 m 584 371 q 531 562 584 485 q 360 653 470 653 q 192 566 254 653 q 135 379 135 489 q 186 181 135 261 q 358 84 247 84 q 528 176 465 84 q 584 371 584 260 m 604 1040 l 415 819 l 332 819 l 466 1040 l 604 1040 "},O:{x_min:0,x_max:958,ha:1057,o:"m 485 1041 q 834 882 702 1041 q 958 512 958 734 q 834 136 958 287 q 481 -26 702 -26 q 126 130 261 -26 q 0 504 0 279 q 127 880 0 728 q 485 1041 263 1041 m 480 98 q 731 225 638 98 q 815 504 815 340 q 733 783 815 669 q 480 912 640 912 q 226 784 321 912 q 142 504 142 670 q 226 224 142 339 q 480 98 319 98 "},n:{x_min:0,x_max:615,ha:724,o:"m 615 463 l 615 0 l 490 0 l 490 454 q 453 592 490 537 q 331 656 410 656 q 178 585 240 656 q 117 421 117 514 l 117 0 l 0 0 l 0 738 l 117 738 l 117 630 q 218 728 150 693 q 359 764 286 764 q 552 675 484 764 q 615 463 615 593 "},l:{x_min:41,x_max:166,ha:279,o:"m 166 0 l 41 0 l 41 1013 l 166 1013 l 166 0 "},"":{x_min:40.09375,x_max:728.796875,ha:825,o:"m 728 304 l 649 224 l 512 363 q 383 331 458 331 q 256 363 310 331 l 119 224 l 40 304 l 177 441 q 150 553 150 493 q 184 673 150 621 l 40 818 l 119 898 l 267 749 q 321 766 291 759 q 384 773 351 773 q 447 766 417 773 q 501 749 477 759 l 649 898 l 728 818 l 585 675 q 612 618 604 648 q 621 553 621 587 q 591 441 621 491 l 728 304 m 384 682 q 280 643 318 682 q 243 551 243 604 q 279 461 243 499 q 383 423 316 423 q 487 461 449 423 q 525 553 525 500 q 490 641 525 605 q 384 682 451 682 "},:{x_min:0,x_max:632.328125,ha:679,o:"m 632 0 l 482 0 l 225 384 l 124 288 l 124 0 l 0 0 l 0 738 l 124 738 l 124 446 l 433 738 l 596 738 l 312 466 l 632 0 "},p:{x_min:0,x_max:685,ha:786,o:"m 685 364 q 598 96 685 205 q 350 -23 504 -23 q 121 89 205 -23 l 121 -278 l 0 -278 l 0 738 l 121 738 l 121 633 q 220 726 159 691 q 351 761 280 761 q 598 636 504 761 q 685 364 685 522 m 557 371 q 501 560 557 481 q 330 651 437 651 q 162 559 223 651 q 108 366 108 479 q 162 177 108 254 q 333 87 224 87 q 502 178 441 87 q 557 371 557 258 "},"":{x_min:0,x_max:777,ha:835,o:"m 458 238 l 458 0 l 319 0 l 319 238 l 0 238 l 0 360 l 319 360 l 319 681 l 0 683 l 0 804 l 319 804 l 319 1015 l 458 1013 l 458 804 l 777 804 l 777 683 l 458 683 l 458 360 l 777 360 l 777 238 l 458 238 "},:{x_min:0,x_max:808,ha:907,o:"m 465 -278 l 341 -278 l 341 -15 q 87 102 180 -15 q 0 378 0 210 l 0 739 l 133 739 l 133 379 q 182 195 133 275 q 341 98 242 98 l 341 922 l 465 922 l 465 98 q 623 195 563 98 q 675 382 675 278 l 675 742 l 808 742 l 808 381 q 720 104 808 213 q 466 -13 627 -13 l 465 -278 "},:{x_min:.78125,x_max:697,ha:810,o:"m 697 -278 l 572 -278 l 572 454 q 540 587 572 536 q 425 650 501 650 q 271 579 337 650 q 206 420 206 509 l 206 0 l 81 0 l 81 489 q 73 588 81 562 q 0 644 56 644 l 0 741 q 68 755 38 755 q 158 720 124 755 q 200 630 193 686 q 297 726 234 692 q 434 761 359 761 q 620 692 544 761 q 697 516 697 624 l 697 -278 "}},t0e="normal",n0e=1189,i0e=-100,r0e="normal",s0e={yMin:-334,xMin:-111,yMax:1189,xMax:1672},o0e=1e3,a0e={postscript_name:"Helvetiker-Regular",version_string:"Version 1.00 2004 initial release",vendor_url:"http://www.magenta.gr/",full_font_name:"Helvetiker",font_family_name:"Helvetiker",copyright:"Copyright (c) agenta ltd, 2004",description:"",trademark:"",designer:"",designer_url:"",unique_font_identifier:"agenta ltd:Helvetiker:22-10-104",license_url:"http://www.ellak.gr/fonts/MgOpen/license.html",license_description:`Copyright (c) 2004 by MAGENTA Ltd. All Rights Reserved.\r
\r
Permission is hereby granted, free of charge, to any person obtaining a copy of the fonts accompanying this license ("Fonts") and associated documentation files (the "Font Software"), to reproduce and distribute the Font Software, including without limitation the rights to use, copy, merge, publish, distribute, and/or sell copies of the Font Software, and to permit persons to whom the Font Software is furnished to do so, subject to the following conditions: \r
\r
The above copyright and this permission notice shall be included in all copies of one or more of the Font Software typefaces.\r
\r
The Font Software may be modified, altered, or added to, and in particular the designs of glyphs or characters in the Fonts may be modified and additional glyphs or characters may be added to the Fonts, only if the fonts are renamed to names not containing the word "MgOpen", or if the modifications are accepted for inclusion in the Font Software itself by the each appointed Administrator.\r
\r
This License becomes null and void to the extent applicable to Fonts or Font Software that has been modified and is distributed under the "MgOpen" name.\r
\r
The Font Software may be sold as part of a larger software package but no copy of one or more of the Font Software typefaces may be sold by itself. \r
\r
THE FONT SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO ANY WARRANTIES OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT OF COPYRIGHT, PATENT, TRADEMARK, OR OTHER RIGHT. IN NO EVENT SHALL MAGENTA OR PERSONS OR BODIES IN CHARGE OF ADMINISTRATION AND MAINTENANCE OF THE FONT SOFTWARE BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, INCLUDING ANY GENERAL, SPECIAL, INDIRECT, INCIDENTAL, OR CONSEQUENTIAL DAMAGES, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF THE USE OR INABILITY TO USE THE FONT SOFTWARE OR FROM OTHER DEALINGS IN THE FONT SOFTWARE.`,manufacturer_name:"agenta ltd",font_sub_family_name:"Regular"},l0e=-334,u0e="Helvetiker",c0e=1522,h0e=50,f0e={glyphs:e0e,cssFontWeight:t0e,ascender:n0e,underlinePosition:i0e,cssFontStyle:r0e,boundingBox:s0e,resolution:o0e,original_font_information:a0e,descender:l0e,familyName:u0e,lineHeight:c0e,underlineThickness:h0e},S0=Ni(Ni({},window.THREE?window.THREE:{BoxGeometry:_l,CircleGeometry:c5,DoubleSide:Mr,Group:Zs,Mesh:ei,MeshLambertMaterial:U0,TextGeometry:gM,Vector3:J}),{},{Font:uae,TextGeometry:gM}),YD=io({props:{labelsData:{default:[]},labelLat:{default:"lat"},labelLng:{default:"lng"},labelAltitude:{default:.002},labelText:{default:"text"},labelSize:{default:.5},labelTypeFace:{default:f0e,onChange:function(e,t){t.font=new S0.Font(e)}},labelColor:{default:function(){return"lightgrey"}},labelRotation:{default:0},labelResolution:{default:3},labelIncludeDot:{default:!0},labelDotRadius:{default:.1},labelDotOrientation:{default:function(){return"bottom"}},labelsTransitionDuration:{default:1e3,triggerUpdate:!1}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r;var s=new S0.CircleGeometry(1,32);t.dataMapper=new ea(e,{objBindAttr:"__threeObjLabel"}).onCreateObj(function(){var o=new S0.MeshLambertMaterial;o.side=Mr;var a=new S0.Group;a.add(new S0.Mesh(s,o));var l=new S0.Mesh(void 0,o);a.add(l);var u=new S0.Mesh;return u.visible=!1,l.add(u),a.__globeObjType="label",a})},update:function(e){var t=ct(e.labelLat),n=ct(e.labelLng),r=ct(e.labelAltitude),s=ct(e.labelText),o=ct(e.labelSize),a=ct(e.labelRotation),l=ct(e.labelColor),u=ct(e.labelIncludeDot),c=ct(e.labelDotRadius),A=ct(e.labelDotOrientation),m=new Set(["right","top","bottom"]),_=2*Math.PI*ir/360;e.dataMapper.onUpdateObj(function(b,M){var w=lr(b.children,2),T=w[0],N=w[1],P=lr(N.children,1),I=P[0],B=l(M),F=L0(B);N.material.color.set(yl(B)),N.material.transparent=F<1,N.material.opacity=F;var O=u(M),V=A(M);!O||!m.has(V)&&(V="bottom");var U=O?+c(M)*_:1e-12;T.scale.x=T.scale.y=U;var z=+o(M)*_;if(N.geometry&&N.geometry.dispose(),N.geometry=new S0.TextGeometry(s(M),{font:e.font,size:z,depth:0,bevelEnabled:!0,bevelThickness:0,bevelSize:0,curveSegments:e.labelResolution}),I.geometry&&I.geometry.dispose(),N.geometry.computeBoundingBox(),I.geometry=Cx(S0.BoxGeometry,ki(new S0.Vector3().subVectors(N.geometry.boundingBox.max,N.geometry.boundingBox.min).clampScalar(0,1/0).toArray())),V!=="right"&&N.geometry.center(),O){var H=U+z/2;V==="right"&&(N.position.x=H),N.position.y={right:-z/2,top:H+z/2,bottom:-H-z/2}[V]}var Q=function(se){var pe=b.__currentTargetD=se,re=pe.lat,de=pe.lng,ye=pe.alt,Pe=pe.rot,Qe=pe.scale;Object.assign(b.position,e0(re,de,ye)),b.lookAt(e.scene.localToWorld(new S0.Vector3(0,0,0))),b.rotateY(Math.PI),b.rotateZ(-Pe*Math.PI/180),b.scale.x=b.scale.y=b.scale.z=Qe},Y={lat:+t(M),lng:+n(M),alt:+r(M),rot:+a(M),scale:1},ne=b.__currentTargetD||Object.assign({},Y,{scale:1e-12});Object.keys(Y).some(function(ee){return ne[ee]!==Y[ee]})&&(!e.labelsTransitionDuration||e.labelsTransitionDuration<0?Q(Y):e.tweenGroup.add(new xa(ne).to(Y,e.labelsTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(Q).start()))}).digest(e.labelsData)}}),d0e=Ni(Ni({},window.THREE?window.THREE:{}),{},{CSS2DObject:fae}),KD=io({props:{htmlElementsData:{default:[]},htmlLat:{default:"lat"},htmlLng:{default:"lng"},htmlAltitude:{default:0},htmlElement:{},htmlElementVisibilityModifier:{triggerUpdate:!1},htmlTransitionDuration:{default:1e3,triggerUpdate:!1},isBehindGlobe:{onChange:function(){this.updateObjVisibility()},triggerUpdate:!1}},methods:{updateObjVisibility:function(e,t){if(e.dataMapper){var n=t?[t]:e.dataMapper.entries().map(function(r){var s=lr(r,2),o=s[1];return o}).filter(function(r){return r});n.forEach(function(r){var s=!e.isBehindGlobe||!e.isBehindGlobe(r.position);e.htmlElementVisibilityModifier?(r.visible=!0,e.htmlElementVisibilityModifier(r.element,s)):r.visible=s})}}},init:function(e,t,n){var r=n.tweenGroup;Hi(e),t.scene=e,t.tweenGroup=r,t.dataMapper=new ea(e,{objBindAttr:"__threeObjHtml"}).onCreateObj(function(s){var o=ct(t.htmlElement)(s),a=new d0e.CSS2DObject(o);return a.__globeObjType="html",a})},update:function(e,t){var n=this,r=ct(e.htmlLat),s=ct(e.htmlLng),o=ct(e.htmlAltitude);t.hasOwnProperty("htmlElement")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(a,l){var u=function(m){var _=a.__currentTargetD=m,b=_.alt,M=_.lat,w=_.lng;Object.assign(a.position,e0(M,w,b)),n.updateObjVisibility(a)},c={lat:+r(l),lng:+s(l),alt:+o(l)};!e.htmlTransitionDuration||e.htmlTransitionDuration<0||!a.__currentTargetD?u(c):e.tweenGroup.add(new xa(a.__currentTargetD).to(c,e.htmlTransitionDuration).easing(ks.Quadratic.InOut).onUpdate(u).start())}).digest(e.htmlElementsData)}}),Df=window.THREE?window.THREE:{Group:Zs,Mesh:ei,MeshLambertMaterial:U0,SphereGeometry:i0},ZD=io({props:{objectsData:{default:[]},objectLat:{default:"lat"},objectLng:{default:"lng"},objectAltitude:{default:.01},objectFacesSurface:{default:!0},objectRotation:{},objectThreeObject:{default:new Df.Mesh(new Df.SphereGeometry(1,16,8),new Df.MeshLambertMaterial({color:"#ffffaa",transparent:!0,opacity:.7}))}},init:function(e,t){Hi(e),t.scene=e,t.dataMapper=new ea(e,{objBindAttr:"__threeObjObject"}).onCreateObj(function(n){var r=ct(t.objectThreeObject)(n);t.objectThreeObject===r&&(r=r.clone());var s=new Df.Group;return s.add(r),s.__globeObjType="object",s})},update:function(e,t){var n=ct(e.objectLat),r=ct(e.objectLng),s=ct(e.objectAltitude),o=ct(e.objectFacesSurface),a=ct(e.objectRotation);t.hasOwnProperty("objectThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(l,u){var c=+n(u),A=+r(u),m=+s(u);Object.assign(l.position,e0(c,A,m)),o(u)?l.setRotationFromEuler(new Ts(N2(-c),N2(A),0,"YXZ")):l.rotation.set(0,0,0);var _=l.children[0],b=a(u);b&&_.setRotationFromEuler(new Ts(N2(b.x||0),N2(b.y||0),N2(b.z||0)))}).digest(e.objectsData)}}),JD=io({props:{customLayerData:{default:[]},customThreeObject:{},customThreeObjectUpdate:{triggerUpdate:!1}},init:function(e,t){Hi(e),t.scene=e,t.dataMapper=new ea(e,{objBindAttr:"__threeObjCustom"}).onCreateObj(function(n){var r=ct(t.customThreeObject)(n,ir);return r&&(t.customThreeObject===r&&(r=r.clone()),r.__globeObjType="custom"),r})},update:function(e,t){e.customThreeObjectUpdate||Hi(e.scene);var n=ct(e.customThreeObjectUpdate);t.hasOwnProperty("customThreeObject")&&e.dataMapper.clear(),e.dataMapper.onUpdateObj(function(r,s){return n(r,s,ir)}).digest(e.customLayerData)}}),Bf=window.THREE?window.THREE:{Camera:yu,Group:Zs,Vector2:Ge,Vector3:J},A0e=["globeLayer","pointsLayer","arcsLayer","hexBinLayer","heatmapsLayer","polygonsLayer","hexedPolygonsLayer","pathsLayer","tilesLayer","particlesLayer","ringsLayer","labelsLayer","htmlElementsLayer","objectsLayer","customLayer"],eB=wo("globeLayer",UD),p0e=Object.assign.apply(Object,ki(["globeImageUrl","bumpImageUrl","globeCurvatureResolution","globeTileEngineUrl","globeTileEngineMaxLevel","showGlobe","showGraticules","showAtmosphere","atmosphereColor","atmosphereAltitude"].map(function(i){return Ms({},i,eB.linkProp(i))}))),m0e=Object.assign.apply(Object,ki(["globeMaterial"].map(function(i){return Ms({},i,eB.linkMethod(i))}))),g0e=wo("pointsLayer",OD),y0e=Object.assign.apply(Object,ki(["pointsData","pointLat","pointLng","pointColor","pointAltitude","pointRadius","pointResolution","pointsMerge","pointsTransitionDuration"].map(function(i){return Ms({},i,g0e.linkProp(i))}))),v0e=wo("arcsLayer",VD),_0e=Object.assign.apply(Object,ki(["arcsData","arcStartLat","arcStartLng","arcStartAltitude","arcEndLat","arcEndLng","arcEndAltitude","arcColor","arcAltitude","arcAltitudeAutoScale","arcStroke","arcCurveResolution","arcCircularResolution","arcDashLength","arcDashGap","arcDashInitialGap","arcDashAnimateTime","arcsTransitionDuration"].map(function(i){return Ms({},i,v0e.linkProp(i))}))),x0e=wo("hexBinLayer",zD),b0e=Object.assign.apply(Object,ki(["hexBinPointsData","hexBinPointLat","hexBinPointLng","hexBinPointWeight","hexBinResolution","hexMargin","hexTopCurvatureResolution","hexTopColor","hexSideColor","hexAltitude","hexBinMerge","hexTransitionDuration"].map(function(i){return Ms({},i,x0e.linkProp(i))}))),S0e=wo("heatmapsLayer",qD),T0e=Object.assign.apply(Object,ki(["heatmapsData","heatmapPoints","heatmapPointLat","heatmapPointLng","heatmapPointWeight","heatmapBandwidth","heatmapColorFn","heatmapColorSaturation","heatmapBaseAltitude","heatmapTopAltitude","heatmapsTransitionDuration"].map(function(i){return Ms({},i,S0e.linkProp(i))}))),w0e=wo("hexedPolygonsLayer",WD),M0e=Object.assign.apply(Object,ki(["hexPolygonsData","hexPolygonGeoJsonGeometry","hexPolygonColor","hexPolygonAltitude","hexPolygonResolution","hexPolygonMargin","hexPolygonUseDots","hexPolygonCurvatureResolution","hexPolygonDotResolution","hexPolygonsTransitionDuration"].map(function(i){return Ms({},i,w0e.linkProp(i))}))),E0e=wo("polygonsLayer",HD),R0e=Object.assign.apply(Object,ki(["polygonsData","polygonGeoJsonGeometry","polygonCapColor","polygonCapMaterial","polygonSideColor","polygonSideMaterial","polygonStrokeColor","polygonAltitude","polygonCapCurvatureResolution","polygonsTransitionDuration"].map(function(i){return Ms({},i,E0e.linkProp(i))}))),C0e=wo("pathsLayer",jD),P0e=Object.assign.apply(Object,ki(["pathsData","pathPoints","pathPointLat","pathPointLng","pathPointAlt","pathResolution","pathColor","pathStroke","pathDashLength","pathDashGap","pathDashInitialGap","pathDashAnimateTime","pathTransitionDuration"].map(function(i){return Ms({},i,C0e.linkProp(i))}))),N0e=wo("tilesLayer",$D),I0e=Object.assign.apply(Object,ki(["tilesData","tileLat","tileLng","tileAltitude","tileWidth","tileHeight","tileUseGlobeProjection","tileMaterial","tileCurvatureResolution","tilesTransitionDuration"].map(function(i){return Ms({},i,N0e.linkProp(i))}))),L0e=wo("particlesLayer",XD),D0e=Object.assign.apply(Object,ki(["particlesData","particlesList","particleLat","particleLng","particleAltitude","particlesSize","particlesSizeAttenuation","particlesColor","particlesTexture"].map(function(i){return Ms({},i,L0e.linkProp(i))}))),B0e=wo("ringsLayer",QD),F0e=Object.assign.apply(Object,ki(["ringsData","ringLat","ringLng","ringAltitude","ringColor","ringResolution","ringMaxRadius","ringPropagationSpeed","ringRepeatPeriod"].map(function(i){return Ms({},i,B0e.linkProp(i))}))),U0e=wo("labelsLayer",YD),O0e=Object.assign.apply(Object,ki(["labelsData","labelLat","labelLng","labelAltitude","labelRotation","labelText","labelSize","labelTypeFace","labelColor","labelResolution","labelIncludeDot","labelDotRadius","labelDotOrientation","labelsTransitionDuration"].map(function(i){return Ms({},i,U0e.linkProp(i))}))),k0e=wo("htmlElementsLayer",KD),V0e=Object.assign.apply(Object,ki(["htmlElementsData","htmlLat","htmlLng","htmlAltitude","htmlElement","htmlElementVisibilityModifier","htmlTransitionDuration"].map(function(i){return Ms({},i,k0e.linkProp(i))}))),z0e=wo("objectsLayer",ZD),G0e=Object.assign.apply(Object,ki(["objectsData","objectLat","objectLng","objectAltitude","objectRotation","objectFacesSurface","objectThreeObject"].map(function(i){return Ms({},i,z0e.linkProp(i))}))),q0e=wo("customLayer",JD),H0e=Object.assign.apply(Object,ki(["customLayerData","customThreeObject","customThreeObjectUpdate"].map(function(i){return Ms({},i,q0e.linkProp(i))}))),W0e=io({props:Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni(Ni({onGlobeReady:{triggerUpdate:!1},rendererSize:{default:new Bf.Vector2(window.innerWidth,window.innerHeight),onChange:function(e,t){t.pathsLayer.rendererSize(e)},triggerUpdate:!1}},p0e),y0e),_0e),b0e),T0e),R0e),M0e),P0e),I0e),D0e),F0e),O0e),V0e),G0e),H0e),methods:Ni({getGlobeRadius:_M,getCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return e0.apply(void 0,n)},toGeoCoords:function(e){for(var t=arguments.length,n=new Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];return FD.apply(void 0,n)},setPointOfView:function(e,t){var n=t instanceof Bf.Camera?t.position:t,r=_M(),s=void 0;if(e.scene&&n){var o,a,l,u;s=function(A){o===void 0&&(o=n.clone().applyMatrix4(e.scene.matrixWorld.clone().invert())),a===void 0&&(a=o.length()),l===void 0&&(l=Math.sqrt(Math.pow(a,2)-Math.pow(r,2))),u===void 0&&(u=Math.acos(l/a));var m=o.distanceTo(A);if(m<l)return!1;var _=A.length(),b=Math.acos((Math.pow(a,2)+Math.pow(m,2)-Math.pow(_,2))/(2*a*m));return b<u}}e.layersThatNeedUpdatePov.forEach(function(c){return c.updatePov(t)}),e.layersThatNeedBehindGlobeChecker.forEach(function(c){return c.isBehindGlobe(s)})},pauseAnimation:function(e){return e.animationFrameRequestId!==null&&(cancelAnimationFrame(e.animationFrameRequestId),e.animationFrameRequestId=null),e.pausableLayers.forEach(function(t){var n;return(n=t.pauseAnimation)===null||n===void 0?void 0:n.call(t)}),this},resumeAnimation:function(e){return e.animationFrameRequestId===null&&this._animationCycle(),e.pausableLayers.forEach(function(t){var n;return(n=t.resumeAnimation)===null||n===void 0?void 0:n.call(t)}),this},_animationCycle:function(e){e.animationFrameRequestId=requestAnimationFrame(this._animationCycle),e.tweenGroup.update()},_destructor:function(e){this.pauseAnimation(),e.destructableLayers.forEach(function(t){return t._destructor()})}},m0e),stateInit:function(){var e=new mR,t={tweenGroup:e},n={globeLayer:UD(t),pointsLayer:OD(t),arcsLayer:VD(t),hexBinLayer:zD(t),heatmapsLayer:qD(t),polygonsLayer:HD(t),hexedPolygonsLayer:WD(t),pathsLayer:jD(t),tilesLayer:$D(t),particlesLayer:XD(t),ringsLayer:QD(t),labelsLayer:YD(t),htmlElementsLayer:KD(t),objectsLayer:ZD(t),customLayer:JD(t)};return Ni(Ni({tweenGroup:e},n),{},{layersThatNeedUpdatePov:Object.values(n).filter(function(r){return r.hasOwnProperty("updatePov")}),layersThatNeedBehindGlobeChecker:Object.values(n).filter(function(r){return r.hasOwnProperty("isBehindGlobe")}),destructableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("_destructor")}),pausableLayers:Object.values(n).filter(function(r){return r.hasOwnProperty("pauseAnimation")})})},init:function(e,t,n){var r=n.animateIn,s=r===void 0?!0:r,o=n.waitForGlobeReady,a=o===void 0?!0:o;Hi(e),t.scene=e,t.scene.visible=!1,A0e.forEach(function(u){var c=new Bf.Group;t.scene.add(c),t[u](c)});var l=function(){if(s){t.scene.scale.set(1e-6,1e-6,1e-6),t.tweenGroup.add(new xa({k:1e-6}).to({k:1},600).easing(ks.Quadratic.Out).onUpdate(function(A){var m=A.k;return t.scene.scale.set(m,m,m)}).start());var c=new Bf.Vector3(0,1,0);t.tweenGroup.add(new xa({rot:Math.PI*2}).to({rot:0},1200).easing(ks.Quintic.Out).onUpdate(function(A){var m=A.rot;return t.scene.setRotationFromAxisAngle(c,m)}).start())}t.scene.visible=!0,t.onGlobeReady&&t.onGlobeReady()};a?t.globeLayer.onReady(l):l(),this._animationCycle()},update:function(e){}});function j0e(i){var e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:Object,t=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!1,n=function(r){function s(){var o;DA(this,s);for(var a=arguments.length,l=new Array(a),u=0;u<a;u++)l[u]=arguments[u];return o=LA(this,s,[].concat(l)),o.__kapsuleInstance=Cx(i,[].concat(ki(t?[o]:[]),l)),o}return FA(s,r),BA(s)}(e);return Object.keys(i()).forEach(function(r){return n.prototype[r]=function(){var s,o=(s=this.__kapsuleInstance)[r].apply(s,arguments);return o===this.__kapsuleInstance?this:o}}),n}var $0e=window.THREE?window.THREE:{Group:Zs},tB=j0e(W0e,$0e.Group,!0),nB={exports:{}},Oc={};/**
 * @license React
 * react-reconciler-constants.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */Oc.ConcurrentRoot=1;Oc.ContinuousEventPriority=4;Oc.DefaultEventPriority=16;Oc.DiscreteEventPriority=1;Oc.IdleEventPriority=536870912;Oc.LegacyRoot=0;nB.exports=Oc;var g4=nB.exports;function X0e(i){let e;const t=new Set,n=(u,c)=>{const A=typeof u=="function"?u(e):u;if(A!==e){const m=e;e=c?A:Object.assign({},e,A),t.forEach(_=>_(e,m))}},r=()=>e,s=(u,c=r,A=Object.is)=>{console.warn("[DEPRECATED] Please use `subscribeWithSelector` middleware");let m=c(e);function _(){const b=c(e);if(!A(m,b)){const M=m;u(m=b,M)}}return t.add(_),()=>t.delete(_)},l={setState:n,getState:r,subscribe:(u,c,A)=>c||A?s(u,c,A):(t.add(u),()=>t.delete(u)),destroy:()=>t.clear()};return e=i(n,r,l),l}const Q0e=typeof window>"u"||!window.navigator||/ServerSideRendering|^Deno\//.test(window.navigator.userAgent),CM=Q0e?Qt.useEffect:Qt.useLayoutEffect;function Y0e(i){const e=typeof i=="function"?X0e(i):i,t=(n=e.getState,r=Object.is)=>{const[,s]=Qt.useReducer(w=>w+1,0),o=e.getState(),a=Qt.useRef(o),l=Qt.useRef(n),u=Qt.useRef(r),c=Qt.useRef(!1),A=Qt.useRef();A.current===void 0&&(A.current=n(o));let m,_=!1;(a.current!==o||l.current!==n||u.current!==r||c.current)&&(m=n(o),_=!r(A.current,m)),CM(()=>{_&&(A.current=m),a.current=o,l.current=n,u.current=r,c.current=!1});const b=Qt.useRef(o);CM(()=>{const w=()=>{try{const N=e.getState(),P=l.current(N);u.current(A.current,P)||(a.current=N,A.current=P,s())}catch{c.current=!0,s()}},T=e.subscribe(w);return e.getState()!==b.current&&w(),T},[]);const M=_?m:A.current;return Qt.useDebugValue(M),M};return Object.assign(t,e),t[Symbol.iterator]=function(){console.warn("[useStore, api] = create() is deprecated and will be removed in v4");const n=[t,e];return{next(){const r=n.length<=0;return{value:n.shift(),done:r}}}},t}var iB={exports:{}},rB={exports:{}},sB={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(i){function e(re,de){var ye=re.length;re.push(de);e:for(;0<ye;){var Pe=ye-1>>>1,Qe=re[Pe];if(0<r(Qe,de))re[Pe]=de,re[ye]=Qe,ye=Pe;else break e}}function t(re){return re.length===0?null:re[0]}function n(re){if(re.length===0)return null;var de=re[0],ye=re.pop();if(ye!==de){re[0]=ye;e:for(var Pe=0,Qe=re.length,et=Qe>>>1;Pe<et;){var Pt=2*(Pe+1)-1,Ne=re[Pt],nt=Pt+1,tt=re[nt];if(0>r(Ne,ye))nt<Qe&&0>r(tt,Ne)?(re[Pe]=tt,re[nt]=ye,Pe=nt):(re[Pe]=Ne,re[Pt]=ye,Pe=Pt);else if(nt<Qe&&0>r(tt,ye))re[Pe]=tt,re[nt]=ye,Pe=nt;else break e}}return de}function r(re,de){var ye=re.sortIndex-de.sortIndex;return ye!==0?ye:re.id-de.id}if(typeof performance=="object"&&typeof performance.now=="function"){var s=performance;i.unstable_now=function(){return s.now()}}else{var o=Date,a=o.now();i.unstable_now=function(){return o.now()-a}}var l=[],u=[],c=1,A=null,m=3,_=!1,b=!1,M=!1,w=typeof setTimeout=="function"?setTimeout:null,T=typeof clearTimeout=="function"?clearTimeout:null,N=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function P(re){for(var de=t(u);de!==null;){if(de.callback===null)n(u);else if(de.startTime<=re)n(u),de.sortIndex=de.expirationTime,e(l,de);else break;de=t(u)}}function I(re){if(M=!1,P(re),!b)if(t(l)!==null)b=!0,se(B);else{var de=t(u);de!==null&&pe(I,de.startTime-re)}}function B(re,de){b=!1,M&&(M=!1,T(V),V=-1),_=!0;var ye=m;try{for(P(de),A=t(l);A!==null&&(!(A.expirationTime>de)||re&&!H());){var Pe=A.callback;if(typeof Pe=="function"){A.callback=null,m=A.priorityLevel;var Qe=Pe(A.expirationTime<=de);de=i.unstable_now(),typeof Qe=="function"?A.callback=Qe:A===t(l)&&n(l),P(de)}else n(l);A=t(l)}if(A!==null)var et=!0;else{var Pt=t(u);Pt!==null&&pe(I,Pt.startTime-de),et=!1}return et}finally{A=null,m=ye,_=!1}}var F=!1,O=null,V=-1,U=5,z=-1;function H(){return!(i.unstable_now()-z<U)}function Q(){if(O!==null){var re=i.unstable_now();z=re;var de=!0;try{de=O(!0,re)}finally{de?Y():(F=!1,O=null)}}else F=!1}var Y;if(typeof N=="function")Y=function(){N(Q)};else if(typeof MessageChannel<"u"){var ne=new MessageChannel,ee=ne.port2;ne.port1.onmessage=Q,Y=function(){ee.postMessage(null)}}else Y=function(){w(Q,0)};function se(re){O=re,F||(F=!0,Y())}function pe(re,de){V=w(function(){re(i.unstable_now())},de)}i.unstable_IdlePriority=5,i.unstable_ImmediatePriority=1,i.unstable_LowPriority=4,i.unstable_NormalPriority=3,i.unstable_Profiling=null,i.unstable_UserBlockingPriority=2,i.unstable_cancelCallback=function(re){re.callback=null},i.unstable_continueExecution=function(){b||_||(b=!0,se(B))},i.unstable_forceFrameRate=function(re){0>re||125<re?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):U=0<re?Math.floor(1e3/re):5},i.unstable_getCurrentPriorityLevel=function(){return m},i.unstable_getFirstCallbackNode=function(){return t(l)},i.unstable_next=function(re){switch(m){case 1:case 2:case 3:var de=3;break;default:de=m}var ye=m;m=de;try{return re()}finally{m=ye}},i.unstable_pauseExecution=function(){},i.unstable_requestPaint=function(){},i.unstable_runWithPriority=function(re,de){switch(re){case 1:case 2:case 3:case 4:case 5:break;default:re=3}var ye=m;m=re;try{return de()}finally{m=ye}},i.unstable_scheduleCallback=function(re,de,ye){var Pe=i.unstable_now();switch(typeof ye=="object"&&ye!==null?(ye=ye.delay,ye=typeof ye=="number"&&0<ye?Pe+ye:Pe):ye=Pe,re){case 1:var Qe=-1;break;case 2:Qe=250;break;case 5:Qe=1073741823;break;case 4:Qe=1e4;break;default:Qe=5e3}return Qe=ye+Qe,re={id:c++,callback:de,priorityLevel:re,startTime:ye,expirationTime:Qe,sortIndex:-1},ye>Pe?(re.sortIndex=ye,e(u,re),t(l)===null&&re===t(u)&&(M?(T(V),V=-1):M=!0,pe(I,ye-Pe))):(re.sortIndex=Qe,e(l,re),b||_||(b=!0,se(B))),re},i.unstable_shouldYield=H,i.unstable_wrapCallback=function(re){var de=m;return function(){var ye=m;m=de;try{return re.apply(this,arguments)}finally{m=ye}}}})(sB);rB.exports=sB;var ky=rB.exports;/**
 * @license React
 * react-reconciler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var K0e=function(e){var t={},n=Qt,r=ky,s=Object.assign;function o(g){for(var v="https://reactjs.org/docs/error-decoder.html?invariant="+g,C=1;C<arguments.length;C++)v+="&args[]="+encodeURIComponent(arguments[C]);return"Minified React error #"+g+"; visit "+v+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var a=n.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,l=Symbol.for("react.element"),u=Symbol.for("react.portal"),c=Symbol.for("react.fragment"),A=Symbol.for("react.strict_mode"),m=Symbol.for("react.profiler"),_=Symbol.for("react.provider"),b=Symbol.for("react.context"),M=Symbol.for("react.forward_ref"),w=Symbol.for("react.suspense"),T=Symbol.for("react.suspense_list"),N=Symbol.for("react.memo"),P=Symbol.for("react.lazy"),I=Symbol.for("react.offscreen"),B=Symbol.iterator;function F(g){return g===null||typeof g!="object"?null:(g=B&&g[B]||g["@@iterator"],typeof g=="function"?g:null)}function O(g){if(g==null)return null;if(typeof g=="function")return g.displayName||g.name||null;if(typeof g=="string")return g;switch(g){case c:return"Fragment";case u:return"Portal";case m:return"Profiler";case A:return"StrictMode";case w:return"Suspense";case T:return"SuspenseList"}if(typeof g=="object")switch(g.$$typeof){case b:return(g.displayName||"Context")+".Consumer";case _:return(g._context.displayName||"Context")+".Provider";case M:var v=g.render;return g=g.displayName,g||(g=v.displayName||v.name||"",g=g!==""?"ForwardRef("+g+")":"ForwardRef"),g;case N:return v=g.displayName||null,v!==null?v:O(g.type)||"Memo";case P:v=g._payload,g=g._init;try{return O(g(v))}catch{}}return null}function V(g){var v=g.type;switch(g.tag){case 24:return"Cache";case 9:return(v.displayName||"Context")+".Consumer";case 10:return(v._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return g=v.render,g=g.displayName||g.name||"",v.displayName||(g!==""?"ForwardRef("+g+")":"ForwardRef");case 7:return"Fragment";case 5:return v;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return O(v);case 8:return v===A?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof v=="function")return v.displayName||v.name||null;if(typeof v=="string")return v}return null}function U(g){var v=g,C=g;if(g.alternate)for(;v.return;)v=v.return;else{g=v;do v=g,v.flags&4098&&(C=v.return),g=v.return;while(g)}return v.tag===3?C:null}function z(g){if(U(g)!==g)throw Error(o(188))}function H(g){var v=g.alternate;if(!v){if(v=U(g),v===null)throw Error(o(188));return v!==g?null:g}for(var C=g,L=v;;){var G=C.return;if(G===null)break;var j=G.alternate;if(j===null){if(L=G.return,L!==null){C=L;continue}break}if(G.child===j.child){for(j=G.child;j;){if(j===C)return z(G),g;if(j===L)return z(G),v;j=j.sibling}throw Error(o(188))}if(C.return!==L.return)C=G,L=j;else{for(var fe=!1,we=G.child;we;){if(we===C){fe=!0,C=G,L=j;break}if(we===L){fe=!0,L=G,C=j;break}we=we.sibling}if(!fe){for(we=j.child;we;){if(we===C){fe=!0,C=j,L=G;break}if(we===L){fe=!0,L=j,C=G;break}we=we.sibling}if(!fe)throw Error(o(189))}}if(C.alternate!==L)throw Error(o(190))}if(C.tag!==3)throw Error(o(188));return C.stateNode.current===C?g:v}function Q(g){return g=H(g),g!==null?Y(g):null}function Y(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){var v=Y(g);if(v!==null)return v;g=g.sibling}return null}function ne(g){if(g.tag===5||g.tag===6)return g;for(g=g.child;g!==null;){if(g.tag!==4){var v=ne(g);if(v!==null)return v}g=g.sibling}return null}var ee=Array.isArray,se=e.getPublicInstance,pe=e.getRootHostContext,re=e.getChildHostContext,de=e.prepareForCommit,ye=e.resetAfterCommit,Pe=e.createInstance,Qe=e.appendInitialChild,et=e.finalizeInitialChildren,Pt=e.prepareUpdate,Ne=e.shouldSetTextContent,nt=e.createTextInstance,tt=e.scheduleTimeout,Dt=e.cancelTimeout,Rt=e.noTimeout,It=e.isPrimaryRenderer,yn=e.supportsMutation,Kt=e.supportsPersistence,Ae=e.supportsHydration,Je=e.getInstanceFromNode,Xe=e.preparePortalMount,ht=e.getCurrentEventPriority,Ze=e.detachDeletedInstance,vt=e.supportsMicrotasks,ut=e.scheduleMicrotask,Tt=e.supportsTestSelectors,fn=e.findFiberRoot,bn=e.getBoundingRect,he=e.getTextContent,Z=e.isHiddenSubtree,De=e.matchAccessibilityRole,ze=e.setFocusIfFocusable,ft=e.setupIntersectionObserver,We=e.appendChild,Zt=e.appendChildToContainer,St=e.commitTextUpdate,$t=e.commitMount,Yt=e.commitUpdate,yt=e.insertBefore,Bt=e.insertInContainerBefore,vn=e.removeChild,ge=e.removeChildFromContainer,Be=e.resetTextContent,bt=e.hideInstance,oe=e.hideTextInstance,at=e.unhideInstance,xt=e.unhideTextInstance,Ut=e.clearContainer,_t=e.cloneInstance,rt=e.createContainerChildSet,Ot=e.appendChildToContainerChildSet,cn=e.finalizeContainerChildren,ai=e.replaceContainerChildren,Xn=e.cloneHiddenInstance,xr=e.cloneHiddenTextInstance,hr=e.canHydrateInstance,Oe=e.canHydrateTextInstance,it=e.canHydrateSuspenseInstance,Ct=e.isSuspenseInstancePending,st=e.isSuspenseInstanceFallback,d=e.registerSuspenseInstanceRetry,X=e.getNextHydratableSibling,ii=e.getFirstHydratableChild,fi=e.getFirstHydratableChildWithinContainer,pr=e.getFirstHydratableChildWithinSuspenseInstance,On=e.hydrateInstance,li=e.hydrateTextInstance,wa=e.hydrateSuspenseInstance,pi=e.getNextHydratableInstanceAfterSuspenseInstance,kn=e.commitHydratedContainer,qs=e.commitHydratedSuspenseInstance,p1=e.clearSuspenseBoundary,ie=e.clearSuspenseBoundaryFromContainer,Ce=e.shouldDeleteUnhydratedTailInstances,Fe=e.didNotMatchHydratedContainerTextInstance,Ve=e.didNotMatchHydratedTextInstance,Me;function pt(g){if(Me===void 0)try{throw Error()}catch(C){var v=C.stack.trim().match(/\n( *(at )?)/);Me=v&&v[1]||""}return`
`+Me+g}var Ft=!1;function kt(g,v){if(!g||Ft)return"";Ft=!0;var C=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(v)if(v=function(){throw Error()},Object.defineProperty(v.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(v,[])}catch(Mt){var L=Mt}Reflect.construct(g,[],v)}else{try{v.call()}catch(Mt){L=Mt}g.call(v.prototype)}else{try{throw Error()}catch(Mt){L=Mt}g()}}catch(Mt){if(Mt&&L&&typeof Mt.stack=="string"){for(var G=Mt.stack.split(`
`),j=L.stack.split(`
`),fe=G.length-1,we=j.length-1;1<=fe&&0<=we&&G[fe]!==j[we];)we--;for(;1<=fe&&0<=we;fe--,we--)if(G[fe]!==j[we]){if(fe!==1||we!==1)do if(fe--,we--,0>we||G[fe]!==j[we]){var Ye=`
`+G[fe].replace(" at new "," at ");return g.displayName&&Ye.includes("<anonymous>")&&(Ye=Ye.replace("<anonymous>",g.displayName)),Ye}while(1<=fe&&0<=we);break}}}finally{Ft=!1,Error.prepareStackTrace=C}return(g=g?g.displayName||g.name:"")?pt(g):""}var ot=Object.prototype.hasOwnProperty,K=[],dt=-1;function Jt(g){return{current:g}}function nn(g){0>dt||(g.current=K[dt],K[dt]=null,dt--)}function dn(g,v){dt++,K[dt]=g.current,g.current=v}var xi={},Qn=Jt(xi),$=Jt(!1),an=xi;function Mi(g,v){var C=g.type.contextTypes;if(!C)return xi;var L=g.stateNode;if(L&&L.__reactInternalMemoizedUnmaskedChildContext===v)return L.__reactInternalMemoizedMaskedChildContext;var G={},j;for(j in C)G[j]=v[j];return L&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=v,g.__reactInternalMemoizedMaskedChildContext=G),G}function Nn(g){return g=g.childContextTypes,g!=null}function Fr(){nn($),nn(Qn)}function o0(g,v,C){if(Qn.current!==xi)throw Error(o(168));dn(Qn,v),dn($,C)}function ds(g,v,C){var L=g.stateNode;if(v=v.childContextTypes,typeof L.getChildContext!="function")return C;L=L.getChildContext();for(var G in L)if(!(G in v))throw Error(o(108,V(g)||"Unknown",G));return s({},C,L)}function ta(g){return g=(g=g.stateNode)&&g.__reactInternalMemoizedMergedChildContext||xi,an=Qn.current,dn(Qn,g),dn($,$.current),!0}function Fi(g,v,C){var L=g.stateNode;if(!L)throw Error(o(169));C?(g=ds(g,v,an),L.__reactInternalMemoizedMergedChildContext=g,nn($),nn(Qn),dn(Qn,g)):nn($),dn($,C)}var $i=Math.clz32?Math.clz32:Ur,fr=Math.log,mi=Math.LN2;function Ur(g){return g>>>=0,g===0?32:31-(fr(g)/mi|0)|0}var k0=64,Mo=4194304;function m1(g){switch(g&-g){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return g&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return g&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return g}}function kc(g,v){var C=g.pendingLanes;if(C===0)return 0;var L=0,G=g.suspendedLanes,j=g.pingedLanes,fe=C&268435455;if(fe!==0){var we=fe&~G;we!==0?L=m1(we):(j&=fe,j!==0&&(L=m1(j)))}else fe=C&~G,fe!==0?L=m1(fe):j!==0&&(L=m1(j));if(L===0)return 0;if(v!==0&&v!==L&&!(v&G)&&(G=L&-L,j=v&-v,G>=j||G===16&&(j&4194240)!==0))return v;if(L&4&&(L|=C&16),v=g.entangledLanes,v!==0)for(g=g.entanglements,v&=L;0<v;)C=31-$i(v),G=1<<C,L|=g[C],v&=~G;return L}function UA(g,v){switch(g){case 1:case 2:case 4:return v+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return v+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OA(g,v){for(var C=g.suspendedLanes,L=g.pingedLanes,G=g.expirationTimes,j=g.pendingLanes;0<j;){var fe=31-$i(j),we=1<<fe,Ye=G[fe];Ye===-1?(!(we&C)||we&L)&&(G[fe]=UA(we,v)):Ye<=v&&(g.expiredLanes|=we),j&=~we}}function Ui(g){return g=g.pendingLanes&-1073741825,g!==0?g:g&1073741824?1073741824:0}function Ru(g){for(var v=[],C=0;31>C;C++)v.push(g);return v}function g1(g,v,C){g.pendingLanes|=v,v!==536870912&&(g.suspendedLanes=0,g.pingedLanes=0),g=g.eventTimes,v=31-$i(v),g[v]=C}function kA(g,v){var C=g.pendingLanes&~v;g.pendingLanes=v,g.suspendedLanes=0,g.pingedLanes=0,g.expiredLanes&=v,g.mutableReadLanes&=v,g.entangledLanes&=v,v=g.entanglements;var L=g.eventTimes;for(g=g.expirationTimes;0<C;){var G=31-$i(C),j=1<<G;v[G]=0,L[G]=-1,g[G]=-1,C&=~j}}function m5(g,v){var C=g.entangledLanes|=v;for(g=g.entanglements;C;){var L=31-$i(C),G=1<<L;G&v|g[L]&v&&(g[L]|=v),C&=~G}}var vi=0;function g5(g){return g&=-g,1<g?4<g?g&268435455?16:536870912:4:1}var Cu=r.unstable_scheduleCallback,Vc=r.unstable_cancelCallback,VA=r.unstable_shouldYield,zA=r.unstable_requestPaint,Or=r.unstable_now,zc=r.unstable_ImmediatePriority,GA=r.unstable_UserBlockingPriority,Pu=r.unstable_NormalPriority,y5=r.unstable_IdlePriority,Gc=null,na=null;function x6(g){if(na&&typeof na.onCommitFiberRoot=="function")try{na.onCommitFiberRoot(Gc,g,void 0,(g.current.flags&128)===128)}catch{}}function b6(g,v){return g===v&&(g!==0||1/g===1/v)||g!==g&&v!==v}var Ma=typeof Object.is=="function"?Object.is:b6,a0=null,qc=!1,v5=!1;function es(g){a0===null?a0=[g]:a0.push(g)}function Tl(g){qc=!0,es(g)}function Ji(){if(!v5&&a0!==null){v5=!0;var g=0,v=vi;try{var C=a0;for(vi=1;g<C.length;g++){var L=C[g];do L=L(!0);while(L!==null)}a0=null,qc=!1}catch(G){throw a0!==null&&(a0=a0.slice(g+1)),Cu(zc,Ji),G}finally{vi=v,v5=!1}}return null}var _5=a.ReactCurrentBatchConfig;function Nu(g,v){if(Ma(g,v))return!0;if(typeof g!="object"||g===null||typeof v!="object"||v===null)return!1;var C=Object.keys(g),L=Object.keys(v);if(C.length!==L.length)return!1;for(L=0;L<C.length;L++){var G=C[L];if(!ot.call(v,G)||!Ma(g[G],v[G]))return!1}return!0}function Hc(g){switch(g.tag){case 5:return pt(g.type);case 16:return pt("Lazy");case 13:return pt("Suspense");case 19:return pt("SuspenseList");case 0:case 2:case 15:return g=kt(g.type,!1),g;case 11:return g=kt(g.type.render,!1),g;case 1:return g=kt(g.type,!0),g;default:return""}}function ia(g,v){if(g&&g.defaultProps){v=s({},v),g=g.defaultProps;for(var C in g)v[C]===void 0&&(v[C]=g[C]);return v}return v}var Wc=Jt(null),jc=null,wl=null,y1=null;function l0(){y1=wl=jc=null}function x5(g,v,C){It?(dn(Wc,v._currentValue),v._currentValue=C):(dn(Wc,v._currentValue2),v._currentValue2=C)}function $c(g){var v=Wc.current;nn(Wc),It?g._currentValue=v:g._currentValue2=v}function v1(g,v,C){for(;g!==null;){var L=g.alternate;if((g.childLanes&v)!==v?(g.childLanes|=v,L!==null&&(L.childLanes|=v)):L!==null&&(L.childLanes&v)!==v&&(L.childLanes|=v),g===C)break;g=g.return}}function Eo(g,v){jc=g,y1=wl=null,g=g.dependencies,g!==null&&g.firstContext!==null&&(g.lanes&v&&(oo=!0),g.firstContext=null)}function Pr(g){var v=It?g._currentValue:g._currentValue2;if(y1!==g)if(g={context:g,memoizedValue:v,next:null},wl===null){if(jc===null)throw Error(o(308));wl=g,jc.dependencies={lanes:0,firstContext:g}}else wl=wl.next=g;return v}var ra=null,u0=!1;function Iu(g){g.updateQueue={baseState:g.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function S6(g,v){g=g.updateQueue,v.updateQueue===g&&(v.updateQueue={baseState:g.baseState,firstBaseUpdate:g.firstBaseUpdate,lastBaseUpdate:g.lastBaseUpdate,shared:g.shared,effects:g.effects})}function c0(g,v){return{eventTime:g,lane:v,tag:0,payload:null,callback:null,next:null}}function h0(g,v){var C=g.updateQueue;C!==null&&(C=C.shared,qr!==null&&g.mode&1&&!(ri&2)?(g=C.interleaved,g===null?(v.next=v,ra===null?ra=[C]:ra.push(C)):(v.next=g.next,g.next=v),C.interleaved=v):(g=C.pending,g===null?v.next=v:(v.next=g.next,g.next=v),C.pending=v))}function Xc(g,v,C){if(v=v.updateQueue,v!==null&&(v=v.shared,(C&4194240)!==0)){var L=v.lanes;L&=g.pendingLanes,C|=L,v.lanes=C,m5(g,C)}}function T6(g,v){var C=g.updateQueue,L=g.alternate;if(L!==null&&(L=L.updateQueue,C===L)){var G=null,j=null;if(C=C.firstBaseUpdate,C!==null){do{var fe={eventTime:C.eventTime,lane:C.lane,tag:C.tag,payload:C.payload,callback:C.callback,next:null};j===null?G=j=fe:j=j.next=fe,C=C.next}while(C!==null);j===null?G=j=v:j=j.next=v}else G=j=v;C={baseState:L.baseState,firstBaseUpdate:G,lastBaseUpdate:j,shared:L.shared,effects:L.effects},g.updateQueue=C;return}g=C.lastBaseUpdate,g===null?C.firstBaseUpdate=v:g.next=v,C.lastBaseUpdate=v}function Qc(g,v,C,L){var G=g.updateQueue;u0=!1;var j=G.firstBaseUpdate,fe=G.lastBaseUpdate,we=G.shared.pending;if(we!==null){G.shared.pending=null;var Ye=we,Mt=Ye.next;Ye.next=null,fe===null?j=Mt:fe.next=Mt,fe=Ye;var tn=g.alternate;tn!==null&&(tn=tn.updateQueue,we=tn.lastBaseUpdate,we!==fe&&(we===null?tn.firstBaseUpdate=Mt:we.next=Mt,tn.lastBaseUpdate=Ye))}if(j!==null){var Kn=G.baseState;fe=0,tn=Mt=Ye=null,we=j;do{var En=we.lane,Qi=we.eventTime;if((L&En)===En){tn!==null&&(tn=tn.next={eventTime:Qi,lane:0,tag:we.tag,payload:we.payload,callback:we.callback,next:null});e:{var An=g,Ws=we;switch(En=v,Qi=C,Ws.tag){case 1:if(An=Ws.payload,typeof An=="function"){Kn=An.call(Qi,Kn,En);break e}Kn=An;break e;case 3:An.flags=An.flags&-65537|128;case 0:if(An=Ws.payload,En=typeof An=="function"?An.call(Qi,Kn,En):An,En==null)break e;Kn=s({},Kn,En);break e;case 2:u0=!0}}we.callback!==null&&we.lane!==0&&(g.flags|=64,En=G.effects,En===null?G.effects=[we]:En.push(we))}else Qi={eventTime:Qi,lane:En,tag:we.tag,payload:we.payload,callback:we.callback,next:null},tn===null?(Mt=tn=Qi,Ye=Kn):tn=tn.next=Qi,fe|=En;if(we=we.next,we===null){if(we=G.shared.pending,we===null)break;En=we,we=En.next,En.next=null,G.lastBaseUpdate=En,G.shared.pending=null}}while(!0);if(tn===null&&(Ye=Kn),G.baseState=Ye,G.firstBaseUpdate=Mt,G.lastBaseUpdate=tn,v=G.shared.interleaved,v!==null){G=v;do fe|=G.lane,G=G.next;while(G!==v)}else j===null&&(G.shared.lanes=0);p3|=fe,g.lanes=fe,g.memoizedState=Kn}}function w6(g,v,C){if(g=v.effects,v.effects=null,g!==null)for(v=0;v<g.length;v++){var L=g[v],G=L.callback;if(G!==null){if(L.callback=null,L=C,typeof G!="function")throw Error(o(191,G));G.call(L)}}}var M6=new n.Component().refs;function b5(g,v,C,L){v=g.memoizedState,C=C(L,v),C=C==null?v:s({},v,C),g.memoizedState=C,g.lanes===0&&(g.updateQueue.baseState=C)}var Yc={isMounted:function(g){return(g=g._reactInternals)?U(g)===g:!1},enqueueSetState:function(g,v,C){g=g._reactInternals;var L=lo(),G=L1(g),j=c0(L,G);j.payload=v,C!=null&&(j.callback=C),h0(g,j),v=Da(g,G,L),v!==null&&Xc(v,g,G)},enqueueReplaceState:function(g,v,C){g=g._reactInternals;var L=lo(),G=L1(g),j=c0(L,G);j.tag=1,j.payload=v,C!=null&&(j.callback=C),h0(g,j),v=Da(g,G,L),v!==null&&Xc(v,g,G)},enqueueForceUpdate:function(g,v){g=g._reactInternals;var C=lo(),L=L1(g),G=c0(C,L);G.tag=2,v!=null&&(G.callback=v),h0(g,G),v=Da(g,L,C),v!==null&&Xc(v,g,L)}};function E6(g,v,C,L,G,j,fe){return g=g.stateNode,typeof g.shouldComponentUpdate=="function"?g.shouldComponentUpdate(L,j,fe):v.prototype&&v.prototype.isPureReactComponent?!Nu(C,L)||!Nu(G,j):!0}function Lu(g,v,C){var L=!1,G=xi,j=v.contextType;return typeof j=="object"&&j!==null?j=Pr(j):(G=Nn(v)?an:Qn.current,L=v.contextTypes,j=(L=L!=null)?Mi(g,G):xi),v=new v(C,j),g.memoizedState=v.state!==null&&v.state!==void 0?v.state:null,v.updater=Yc,g.stateNode=v,v._reactInternals=g,L&&(g=g.stateNode,g.__reactInternalMemoizedUnmaskedChildContext=G,g.__reactInternalMemoizedMaskedChildContext=j),v}function R6(g,v,C,L){g=v.state,typeof v.componentWillReceiveProps=="function"&&v.componentWillReceiveProps(C,L),typeof v.UNSAFE_componentWillReceiveProps=="function"&&v.UNSAFE_componentWillReceiveProps(C,L),v.state!==g&&Yc.enqueueReplaceState(v,v.state,null)}function S5(g,v,C,L){var G=g.stateNode;G.props=C,G.state=g.memoizedState,G.refs=M6,Iu(g);var j=v.contextType;typeof j=="object"&&j!==null?G.context=Pr(j):(j=Nn(v)?an:Qn.current,G.context=Mi(g,j)),G.state=g.memoizedState,j=v.getDerivedStateFromProps,typeof j=="function"&&(b5(g,v,j,C),G.state=g.memoizedState),typeof v.getDerivedStateFromProps=="function"||typeof G.getSnapshotBeforeUpdate=="function"||typeof G.UNSAFE_componentWillMount!="function"&&typeof G.componentWillMount!="function"||(v=G.state,typeof G.componentWillMount=="function"&&G.componentWillMount(),typeof G.UNSAFE_componentWillMount=="function"&&G.UNSAFE_componentWillMount(),v!==G.state&&Yc.enqueueReplaceState(G,G.state,null),Qc(g,C,G,L),G.state=g.memoizedState),typeof G.componentDidMount=="function"&&(g.flags|=4194308)}var _1=[],Ea=0,Kc=null,x1=0,ro=[],ts=0,Ml=null,sa=1,Ra="";function El(g,v){_1[Ea++]=x1,_1[Ea++]=Kc,Kc=g,x1=v}function T5(g,v,C){ro[ts++]=sa,ro[ts++]=Ra,ro[ts++]=Ml,Ml=g;var L=sa;g=Ra;var G=32-$i(L)-1;L&=~(1<<G),C+=1;var j=32-$i(v)+G;if(30<j){var fe=G-G%5;j=(L&(1<<fe)-1).toString(32),L>>=fe,G-=fe,sa=1<<32-$i(v)+G|C<<G|L,Ra=j+g}else sa=1<<j|C<<G|L,Ra=g}function Du(g){g.return!==null&&(El(g,1),T5(g,1,0))}function Bu(g){for(;g===Kc;)Kc=_1[--Ea],_1[Ea]=null,x1=_1[--Ea],_1[Ea]=null;for(;g===Ml;)Ml=ro[--ts],ro[ts]=null,Ra=ro[--ts],ro[ts]=null,sa=ro[--ts],ro[ts]=null}var Es=null,ns=null,wn=!1,Fu=!1,Ro=null;function w5(g,v){var C=Ba(5,null,null,0);C.elementType="DELETED",C.stateNode=v,C.return=g,v=g.deletions,v===null?(g.deletions=[C],g.flags|=16):v.push(C)}function C6(g,v){switch(g.tag){case 5:return v=hr(v,g.type,g.pendingProps),v!==null?(g.stateNode=v,Es=g,ns=ii(v),!0):!1;case 6:return v=Oe(v,g.pendingProps),v!==null?(g.stateNode=v,Es=g,ns=null,!0):!1;case 13:if(v=it(v),v!==null){var C=Ml!==null?{id:sa,overflow:Ra}:null;return g.memoizedState={dehydrated:v,treeContext:C,retryLane:1073741824},C=Ba(18,null,null,0),C.stateNode=v,C.return=g,g.child=C,Es=g,ns=null,!0}return!1;default:return!1}}function M5(g){return(g.mode&1)!==0&&(g.flags&128)===0}function E5(g){if(wn){var v=ns;if(v){var C=v;if(!C6(g,v)){if(M5(g))throw Error(o(418));v=X(C);var L=Es;v&&C6(g,v)?w5(L,C):(g.flags=g.flags&-4097|2,wn=!1,Es=g)}}else{if(M5(g))throw Error(o(418));g.flags=g.flags&-4097|2,wn=!1,Es=g}}}function P6(g){for(g=g.return;g!==null&&g.tag!==5&&g.tag!==3&&g.tag!==13;)g=g.return;Es=g}function kr(g){if(!Ae||g!==Es)return!1;if(!wn)return P6(g),wn=!0,!1;if(g.tag!==3&&(g.tag!==5||Ce(g.type)&&!Ne(g.type,g.memoizedProps))){var v=ns;if(v){if(M5(g)){for(g=ns;g;)g=X(g);throw Error(o(418))}for(;v;)w5(g,v),v=X(v)}}if(P6(g),g.tag===13){if(!Ae)throw Error(o(316));if(g=g.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));ns=pi(g)}else ns=Es?X(g.stateNode):null;return!0}function V0(){Ae&&(ns=Es=null,Fu=wn=!1)}function f0(g){Ro===null?Ro=[g]:Ro.push(g)}function Uu(g,v,C){if(g=C.ref,g!==null&&typeof g!="function"&&typeof g!="object"){if(C._owner){if(C=C._owner,C){if(C.tag!==1)throw Error(o(309));var L=C.stateNode}if(!L)throw Error(o(147,g));var G=L,j=""+g;return v!==null&&v.ref!==null&&typeof v.ref=="function"&&v.ref._stringRef===j?v.ref:(v=function(fe){var we=G.refs;we===M6&&(we=G.refs={}),fe===null?delete we[j]:we[j]=fe},v._stringRef=j,v)}if(typeof g!="string")throw Error(o(284));if(!C._owner)throw Error(o(290,g))}return g}function b1(g,v){throw g=Object.prototype.toString.call(v),Error(o(31,g==="[object Object]"?"object with keys {"+Object.keys(v).join(", ")+"}":g))}function N6(g){var v=g._init;return v(g._payload)}function so(g){function v(ke,Ie){if(g){var He=ke.deletions;He===null?(ke.deletions=[Ie],ke.flags|=16):He.push(Ie)}}function C(ke,Ie){if(!g)return null;for(;Ie!==null;)v(ke,Ie),Ie=Ie.sibling;return null}function L(ke,Ie){for(ke=new Map;Ie!==null;)Ie.key!==null?ke.set(Ie.key,Ie):ke.set(Ie.index,Ie),Ie=Ie.sibling;return ke}function G(ke,Ie){return ke=B1(ke,Ie),ke.index=0,ke.sibling=null,ke}function j(ke,Ie,He){return ke.index=He,g?(He=ke.alternate,He!==null?(He=He.index,He<Ie?(ke.flags|=2,Ie):He):(ke.flags|=2,Ie)):(ke.flags|=1048576,Ie)}function fe(ke){return g&&ke.alternate===null&&(ke.flags|=2),ke}function we(ke,Ie,He,Gt){return Ie===null||Ie.tag!==6?(Ie=ap(He,ke.mode,Gt),Ie.return=ke,Ie):(Ie=G(Ie,He),Ie.return=ke,Ie)}function Ye(ke,Ie,He,Gt){var hn=He.type;return hn===c?tn(ke,Ie,He.props.children,Gt,He.key):Ie!==null&&(Ie.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===P&&N6(hn)===Ie.type)?(Gt=G(Ie,He.props),Gt.ref=Uu(ke,Ie,He),Gt.return=ke,Gt):(Gt=e7(He.type,He.key,He.props,null,ke.mode,Gt),Gt.ref=Uu(ke,Ie,He),Gt.return=ke,Gt)}function Mt(ke,Ie,He,Gt){return Ie===null||Ie.tag!==4||Ie.stateNode.containerInfo!==He.containerInfo||Ie.stateNode.implementation!==He.implementation?(Ie=lp(He,ke.mode,Gt),Ie.return=ke,Ie):(Ie=G(Ie,He.children||[]),Ie.return=ke,Ie)}function tn(ke,Ie,He,Gt,hn){return Ie===null||Ie.tag!==7?(Ie=Zu(He,ke.mode,Gt,hn),Ie.return=ke,Ie):(Ie=G(Ie,He),Ie.return=ke,Ie)}function Kn(ke,Ie,He){if(typeof Ie=="string"&&Ie!==""||typeof Ie=="number")return Ie=ap(""+Ie,ke.mode,He),Ie.return=ke,Ie;if(typeof Ie=="object"&&Ie!==null){switch(Ie.$$typeof){case l:return He=e7(Ie.type,Ie.key,Ie.props,null,ke.mode,He),He.ref=Uu(ke,null,Ie),He.return=ke,He;case u:return Ie=lp(Ie,ke.mode,He),Ie.return=ke,Ie;case P:var Gt=Ie._init;return Kn(ke,Gt(Ie._payload),He)}if(ee(Ie)||F(Ie))return Ie=Zu(Ie,ke.mode,He,null),Ie.return=ke,Ie;b1(ke,Ie)}return null}function En(ke,Ie,He,Gt){var hn=Ie!==null?Ie.key:null;if(typeof He=="string"&&He!==""||typeof He=="number")return hn!==null?null:we(ke,Ie,""+He,Gt);if(typeof He=="object"&&He!==null){switch(He.$$typeof){case l:return He.key===hn?Ye(ke,Ie,He,Gt):null;case u:return He.key===hn?Mt(ke,Ie,He,Gt):null;case P:return hn=He._init,En(ke,Ie,hn(He._payload),Gt)}if(ee(He)||F(He))return hn!==null?null:tn(ke,Ie,He,Gt,null);b1(ke,He)}return null}function Qi(ke,Ie,He,Gt,hn){if(typeof Gt=="string"&&Gt!==""||typeof Gt=="number")return ke=ke.get(He)||null,we(Ie,ke,""+Gt,hn);if(typeof Gt=="object"&&Gt!==null){switch(Gt.$$typeof){case l:return ke=ke.get(Gt.key===null?He:Gt.key)||null,Ye(Ie,ke,Gt,hn);case u:return ke=ke.get(Gt.key===null?He:Gt.key)||null,Mt(Ie,ke,Gt,hn);case P:var ti=Gt._init;return Qi(ke,Ie,He,ti(Gt._payload),hn)}if(ee(Gt)||F(Gt))return ke=ke.get(He)||null,tn(Ie,ke,Gt,hn,null);b1(Ie,Gt)}return null}function An(ke,Ie,He,Gt){for(var hn=null,ti=null,Zn=Ie,Ei=Ie=0,gs=null;Zn!==null&&Ei<He.length;Ei++){Zn.index>Ei?(gs=Zn,Zn=null):gs=Zn.sibling;var Ri=En(ke,Zn,He[Ei],Gt);if(Ri===null){Zn===null&&(Zn=gs);break}g&&Zn&&Ri.alternate===null&&v(ke,Zn),Ie=j(Ri,Ie,Ei),ti===null?hn=Ri:ti.sibling=Ri,ti=Ri,Zn=gs}if(Ei===He.length)return C(ke,Zn),wn&&El(ke,Ei),hn;if(Zn===null){for(;Ei<He.length;Ei++)Zn=Kn(ke,He[Ei],Gt),Zn!==null&&(Ie=j(Zn,Ie,Ei),ti===null?hn=Zn:ti.sibling=Zn,ti=Zn);return wn&&El(ke,Ei),hn}for(Zn=L(ke,Zn);Ei<He.length;Ei++)gs=Qi(Zn,ke,Ei,He[Ei],Gt),gs!==null&&(g&&gs.alternate!==null&&Zn.delete(gs.key===null?Ei:gs.key),Ie=j(gs,Ie,Ei),ti===null?hn=gs:ti.sibling=gs,ti=gs);return g&&Zn.forEach(function(F1){return v(ke,F1)}),wn&&El(ke,Ei),hn}function Ws(ke,Ie,He,Gt){var hn=F(He);if(typeof hn!="function")throw Error(o(150));if(He=hn.call(He),He==null)throw Error(o(151));for(var ti=hn=null,Zn=Ie,Ei=Ie=0,gs=null,Ri=He.next();Zn!==null&&!Ri.done;Ei++,Ri=He.next()){Zn.index>Ei?(gs=Zn,Zn=null):gs=Zn.sibling;var F1=En(ke,Zn,Ri.value,Gt);if(F1===null){Zn===null&&(Zn=gs);break}g&&Zn&&F1.alternate===null&&v(ke,Zn),Ie=j(F1,Ie,Ei),ti===null?hn=F1:ti.sibling=F1,ti=F1,Zn=gs}if(Ri.done)return C(ke,Zn),wn&&El(ke,Ei),hn;if(Zn===null){for(;!Ri.done;Ei++,Ri=He.next())Ri=Kn(ke,Ri.value,Gt),Ri!==null&&(Ie=j(Ri,Ie,Ei),ti===null?hn=Ri:ti.sibling=Ri,ti=Ri);return wn&&El(ke,Ei),hn}for(Zn=L(ke,Zn);!Ri.done;Ei++,Ri=He.next())Ri=Qi(Zn,ke,Ei,Ri.value,Gt),Ri!==null&&(g&&Ri.alternate!==null&&Zn.delete(Ri.key===null?Ei:Ri.key),Ie=j(Ri,Ie,Ei),ti===null?hn=Ri:ti.sibling=Ri,ti=Ri);return g&&Zn.forEach(function(FB){return v(ke,FB)}),wn&&El(ke,Ei),hn}function Fa(ke,Ie,He,Gt){if(typeof He=="object"&&He!==null&&He.type===c&&He.key===null&&(He=He.props.children),typeof He=="object"&&He!==null){switch(He.$$typeof){case l:e:{for(var hn=He.key,ti=Ie;ti!==null;){if(ti.key===hn){if(hn=He.type,hn===c){if(ti.tag===7){C(ke,ti.sibling),Ie=G(ti,He.props.children),Ie.return=ke,ke=Ie;break e}}else if(ti.elementType===hn||typeof hn=="object"&&hn!==null&&hn.$$typeof===P&&N6(hn)===ti.type){C(ke,ti.sibling),Ie=G(ti,He.props),Ie.ref=Uu(ke,ti,He),Ie.return=ke,ke=Ie;break e}C(ke,ti);break}else v(ke,ti);ti=ti.sibling}He.type===c?(Ie=Zu(He.props.children,ke.mode,Gt,He.key),Ie.return=ke,ke=Ie):(Gt=e7(He.type,He.key,He.props,null,ke.mode,Gt),Gt.ref=Uu(ke,Ie,He),Gt.return=ke,ke=Gt)}return fe(ke);case u:e:{for(ti=He.key;Ie!==null;){if(Ie.key===ti)if(Ie.tag===4&&Ie.stateNode.containerInfo===He.containerInfo&&Ie.stateNode.implementation===He.implementation){C(ke,Ie.sibling),Ie=G(Ie,He.children||[]),Ie.return=ke,ke=Ie;break e}else{C(ke,Ie);break}else v(ke,Ie);Ie=Ie.sibling}Ie=lp(He,ke.mode,Gt),Ie.return=ke,ke=Ie}return fe(ke);case P:return ti=He._init,Fa(ke,Ie,ti(He._payload),Gt)}if(ee(He))return An(ke,Ie,He,Gt);if(F(He))return Ws(ke,Ie,He,Gt);b1(ke,He)}return typeof He=="string"&&He!==""||typeof He=="number"?(He=""+He,Ie!==null&&Ie.tag===6?(C(ke,Ie.sibling),Ie=G(Ie,He),Ie.return=ke,ke=Ie):(C(ke,Ie),Ie=ap(He,ke.mode,Gt),Ie.return=ke,ke=Ie),fe(ke)):C(ke,Ie)}return Fa}var z0=so(!0),Zc=so(!1),Ca={},Vr=Jt(Ca),Pa=Jt(Ca),S1=Jt(Ca);function oa(g){if(g===Ca)throw Error(o(174));return g}function R5(g,v){dn(S1,v),dn(Pa,g),dn(Vr,Ca),g=pe(v),nn(Vr),dn(Vr,g)}function G0(){nn(Vr),nn(Pa),nn(S1)}function I6(g){var v=oa(S1.current),C=oa(Vr.current);v=re(C,g.type,v),C!==v&&(dn(Pa,g),dn(Vr,v))}function C5(g){Pa.current===g&&(nn(Vr),nn(Pa))}var Xi=Jt(0);function Ou(g){for(var v=g;v!==null;){if(v.tag===13){var C=v.memoizedState;if(C!==null&&(C=C.dehydrated,C===null||Ct(C)||st(C)))return v}else if(v.tag===19&&v.memoizedProps.revealOrder!==void 0){if(v.flags&128)return v}else if(v.child!==null){v.child.return=v,v=v.child;continue}if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return null;v=v.return}v.sibling.return=v.return,v=v.sibling}return null}var ku=[];function Rl(){for(var g=0;g<ku.length;g++){var v=ku[g];It?v._workInProgressVersionPrimary=null:v._workInProgressVersionSecondary=null}ku.length=0}var d0=a.ReactCurrentDispatcher,er=a.ReactCurrentBatchConfig,T1=0,zi=null,As=null,zr=null,Jc=!1,w1=!1,Vu=0,qA=0;function ps(){throw Error(o(321))}function zu(g,v){if(v===null)return!1;for(var C=0;C<v.length&&C<g.length;C++)if(!Ma(g[C],v[C]))return!1;return!0}function e3(g,v,C,L,G,j){if(T1=j,zi=v,v.memoizedState=null,v.updateQueue=null,v.lanes=0,d0.current=g===null||g.memoizedState===null?HA:WA,g=C(L,G),w1){j=0;do{if(w1=!1,Vu=0,25<=j)throw Error(o(301));j+=1,zr=As=null,v.updateQueue=null,d0.current=jA,g=C(L,G)}while(w1)}if(d0.current=a3,v=As!==null&&As.next!==null,T1=0,zr=As=zi=null,Jc=!1,v)throw Error(o(300));return g}function Gu(){var g=Vu!==0;return Vu=0,g}function A0(){var g={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return zr===null?zi.memoizedState=zr=g:zr=zr.next=g,zr}function Na(){if(As===null){var g=zi.alternate;g=g!==null?g.memoizedState:null}else g=As.next;var v=zr===null?zi.memoizedState:zr.next;if(v!==null)zr=v,As=g;else{if(g===null)throw Error(o(310));As=g,g={memoizedState:As.memoizedState,baseState:As.baseState,baseQueue:As.baseQueue,queue:As.queue,next:null},zr===null?zi.memoizedState=zr=g:zr=zr.next=g}return zr}function Cl(g,v){return typeof v=="function"?v(g):v}function t3(g){var v=Na(),C=v.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=g;var L=As,G=L.baseQueue,j=C.pending;if(j!==null){if(G!==null){var fe=G.next;G.next=j.next,j.next=fe}L.baseQueue=G=j,C.pending=null}if(G!==null){j=G.next,L=L.baseState;var we=fe=null,Ye=null,Mt=j;do{var tn=Mt.lane;if((T1&tn)===tn)Ye!==null&&(Ye=Ye.next={lane:0,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null}),L=Mt.hasEagerState?Mt.eagerState:g(L,Mt.action);else{var Kn={lane:tn,action:Mt.action,hasEagerState:Mt.hasEagerState,eagerState:Mt.eagerState,next:null};Ye===null?(we=Ye=Kn,fe=L):Ye=Ye.next=Kn,zi.lanes|=tn,p3|=tn}Mt=Mt.next}while(Mt!==null&&Mt!==j);Ye===null?fe=L:Ye.next=we,Ma(L,v.memoizedState)||(oo=!0),v.memoizedState=L,v.baseState=fe,v.baseQueue=Ye,C.lastRenderedState=L}if(g=C.interleaved,g!==null){G=g;do j=G.lane,zi.lanes|=j,p3|=j,G=G.next;while(G!==g)}else G===null&&(C.lanes=0);return[v.memoizedState,C.dispatch]}function n3(g){var v=Na(),C=v.queue;if(C===null)throw Error(o(311));C.lastRenderedReducer=g;var L=C.dispatch,G=C.pending,j=v.memoizedState;if(G!==null){C.pending=null;var fe=G=G.next;do j=g(j,fe.action),fe=fe.next;while(fe!==G);Ma(j,v.memoizedState)||(oo=!0),v.memoizedState=j,v.baseQueue===null&&(v.baseState=j),C.lastRenderedState=j}return[j,L]}function L6(){}function D6(g,v){var C=zi,L=Na(),G=v(),j=!Ma(L.memoizedState,G);if(j&&(L.memoizedState=G,oo=!0),L=L.queue,Co(N5.bind(null,C,L,g),[g]),L.getSnapshot!==v||j||zr!==null&&zr.memoizedState.tag&1){if(C.flags|=2048,qu(9,B6.bind(null,C,L,G,v),void 0,null),qr===null)throw Error(o(349));T1&30||P5(C,v,G)}return G}function P5(g,v,C){g.flags|=16384,g={getSnapshot:v,value:C},v=zi.updateQueue,v===null?(v={lastEffect:null,stores:null},zi.updateQueue=v,v.stores=[g]):(C=v.stores,C===null?v.stores=[g]:C.push(g))}function B6(g,v,C,L){v.value=C,v.getSnapshot=L,Ia(v)&&Da(g,1,-1)}function N5(g,v,C){return C(function(){Ia(v)&&Da(g,1,-1)})}function Ia(g){var v=g.getSnapshot;g=g.value;try{var C=v();return!Ma(g,C)}catch{return!0}}function i3(g){var v=A0();return typeof g=="function"&&(g=g()),v.memoizedState=v.baseState=g,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Cl,lastRenderedState:g},v.queue=g,g=g.dispatch=F5.bind(null,zi,g),[v.memoizedState,g]}function qu(g,v,C,L){return g={tag:g,create:v,destroy:C,deps:L,next:null},v=zi.updateQueue,v===null?(v={lastEffect:null,stores:null},zi.updateQueue=v,v.lastEffect=g.next=g):(C=v.lastEffect,C===null?v.lastEffect=g.next=g:(L=C.next,C.next=g,g.next=L,v.lastEffect=g)),g}function F6(){return Na().memoizedState}function r3(g,v,C,L){var G=A0();zi.flags|=g,G.memoizedState=qu(1|v,C,void 0,L===void 0?null:L)}function s3(g,v,C,L){var G=Na();L=L===void 0?null:L;var j=void 0;if(As!==null){var fe=As.memoizedState;if(j=fe.destroy,L!==null&&zu(L,fe.deps)){G.memoizedState=qu(v,C,j,L);return}}zi.flags|=g,G.memoizedState=qu(1|v,C,j,L)}function I5(g,v){return r3(8390656,8,g,v)}function Co(g,v){return s3(2048,8,g,v)}function o3(g,v){return s3(4,2,g,v)}function U6(g,v){return s3(4,4,g,v)}function Hu(g,v){if(typeof v=="function")return g=g(),v(g),function(){v(null)};if(v!=null)return g=g(),v.current=g,function(){v.current=null}}function L5(g,v,C){return C=C!=null?C.concat([g]):null,s3(4,4,Hu.bind(null,v,g),C)}function D5(){}function O6(g,v){var C=Na();v=v===void 0?null:v;var L=C.memoizedState;return L!==null&&v!==null&&zu(v,L[1])?L[0]:(C.memoizedState=[g,v],g)}function M1(g,v){var C=Na();v=v===void 0?null:v;var L=C.memoizedState;return L!==null&&v!==null&&zu(v,L[1])?L[0]:(g=g(),C.memoizedState=[g,v],g)}function k6(g,v){var C=vi;vi=C!==0&&4>C?C:4,g(!0);var L=er.transition;er.transition={};try{g(!1),v()}finally{vi=C,er.transition=L}}function E1(){return Na().memoizedState}function B5(g,v,C){var L=L1(g);C={lane:L,action:C,hasEagerState:!1,eagerState:null,next:null},U5(g)?Wu(v,C):(O5(g,v,C),C=lo(),g=Da(g,L,C),g!==null&&V6(g,v,L))}function F5(g,v,C){var L=L1(g),G={lane:L,action:C,hasEagerState:!1,eagerState:null,next:null};if(U5(g))Wu(v,G);else{O5(g,v,G);var j=g.alternate;if(g.lanes===0&&(j===null||j.lanes===0)&&(j=v.lastRenderedReducer,j!==null))try{var fe=v.lastRenderedState,we=j(fe,C);if(G.hasEagerState=!0,G.eagerState=we,Ma(we,fe))return}catch{}finally{}C=lo(),g=Da(g,L,C),g!==null&&V6(g,v,L)}}function U5(g){var v=g.alternate;return g===zi||v!==null&&v===zi}function Wu(g,v){w1=Jc=!0;var C=g.pending;C===null?v.next=v:(v.next=C.next,C.next=v),g.pending=v}function O5(g,v,C){qr!==null&&g.mode&1&&!(ri&2)?(g=v.interleaved,g===null?(C.next=C,ra===null?ra=[v]:ra.push(v)):(C.next=g.next,g.next=C),v.interleaved=C):(g=v.pending,g===null?C.next=C:(C.next=g.next,g.next=C),v.pending=C)}function V6(g,v,C){if(C&4194240){var L=v.lanes;L&=g.pendingLanes,C|=L,v.lanes=C,m5(g,C)}}var a3={readContext:Pr,useCallback:ps,useContext:ps,useEffect:ps,useImperativeHandle:ps,useInsertionEffect:ps,useLayoutEffect:ps,useMemo:ps,useReducer:ps,useRef:ps,useState:ps,useDebugValue:ps,useDeferredValue:ps,useTransition:ps,useMutableSource:ps,useSyncExternalStore:ps,useId:ps,unstable_isNewReconciler:!1},HA={readContext:Pr,useCallback:function(g,v){return A0().memoizedState=[g,v===void 0?null:v],g},useContext:Pr,useEffect:I5,useImperativeHandle:function(g,v,C){return C=C!=null?C.concat([g]):null,r3(4194308,4,Hu.bind(null,v,g),C)},useLayoutEffect:function(g,v){return r3(4194308,4,g,v)},useInsertionEffect:function(g,v){return r3(4,2,g,v)},useMemo:function(g,v){var C=A0();return v=v===void 0?null:v,g=g(),C.memoizedState=[g,v],g},useReducer:function(g,v,C){var L=A0();return v=C!==void 0?C(v):v,L.memoizedState=L.baseState=v,g={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:g,lastRenderedState:v},L.queue=g,g=g.dispatch=B5.bind(null,zi,g),[L.memoizedState,g]},useRef:function(g){var v=A0();return g={current:g},v.memoizedState=g},useState:i3,useDebugValue:D5,useDeferredValue:function(g){var v=i3(g),C=v[0],L=v[1];return I5(function(){var G=er.transition;er.transition={};try{L(g)}finally{er.transition=G}},[g]),C},useTransition:function(){var g=i3(!1),v=g[0];return g=k6.bind(null,g[1]),A0().memoizedState=g,[v,g]},useMutableSource:function(){},useSyncExternalStore:function(g,v,C){var L=zi,G=A0();if(wn){if(C===void 0)throw Error(o(407));C=C()}else{if(C=v(),qr===null)throw Error(o(349));T1&30||P5(L,v,C)}G.memoizedState=C;var j={value:C,getSnapshot:v};return G.queue=j,I5(N5.bind(null,L,j,g),[g]),L.flags|=2048,qu(9,B6.bind(null,L,j,C,v),void 0,null),C},useId:function(){var g=A0(),v=qr.identifierPrefix;if(wn){var C=Ra,L=sa;C=(L&~(1<<32-$i(L)-1)).toString(32)+C,v=":"+v+"R"+C,C=Vu++,0<C&&(v+="H"+C.toString(32)),v+=":"}else C=qA++,v=":"+v+"r"+C.toString(32)+":";return g.memoizedState=v},unstable_isNewReconciler:!1},WA={readContext:Pr,useCallback:O6,useContext:Pr,useEffect:Co,useImperativeHandle:L5,useInsertionEffect:o3,useLayoutEffect:U6,useMemo:M1,useReducer:t3,useRef:F6,useState:function(){return t3(Cl)},useDebugValue:D5,useDeferredValue:function(g){var v=t3(Cl),C=v[0],L=v[1];return Co(function(){var G=er.transition;er.transition={};try{L(g)}finally{er.transition=G}},[g]),C},useTransition:function(){var g=t3(Cl)[0],v=Na().memoizedState;return[g,v]},useMutableSource:L6,useSyncExternalStore:D6,useId:E1,unstable_isNewReconciler:!1},jA={readContext:Pr,useCallback:O6,useContext:Pr,useEffect:Co,useImperativeHandle:L5,useInsertionEffect:o3,useLayoutEffect:U6,useMemo:M1,useReducer:n3,useRef:F6,useState:function(){return n3(Cl)},useDebugValue:D5,useDeferredValue:function(g){var v=n3(Cl),C=v[0],L=v[1];return Co(function(){var G=er.transition;er.transition={};try{L(g)}finally{er.transition=G}},[g]),C},useTransition:function(){var g=n3(Cl)[0],v=Na().memoizedState;return[g,v]},useMutableSource:L6,useSyncExternalStore:D6,useId:E1,unstable_isNewReconciler:!1};function k5(g,v){try{var C="",L=v;do C+=Hc(L),L=L.return;while(L);var G=C}catch(j){G=`
Error generating stack: `+j.message+`
`+j.stack}return{value:g,source:v,stack:G}}function V5(g,v){try{console.error(v.value)}catch(C){setTimeout(function(){throw C})}}var $A=typeof WeakMap=="function"?WeakMap:Map;function z6(g,v,C){C=c0(-1,C),C.tag=3,C.payload={element:null};var L=v.value;return C.callback=function(){$6||($6=!0,ep=L),V5(g,v)},C}function z5(g,v,C){C=c0(-1,C),C.tag=3;var L=g.type.getDerivedStateFromError;if(typeof L=="function"){var G=v.value;C.payload=function(){return L(G)},C.callback=function(){V5(g,v)}}var j=g.stateNode;return j!==null&&typeof j.componentDidCatch=="function"&&(C.callback=function(){V5(g,v),typeof L!="function"&&(N1===null?N1=new Set([this]):N1.add(this));var fe=v.stack;this.componentDidCatch(v.value,{componentStack:fe!==null?fe:""})}),C}function G5(g,v,C){var L=g.pingCache;if(L===null){L=g.pingCache=new $A;var G=new Set;L.set(v,G)}else G=L.get(v),G===void 0&&(G=new Set,L.set(v,G));G.has(C)||(G.add(C),g=RB.bind(null,g,v,C),v.then(g,g))}function mr(g){do{var v;if((v=g.tag===13)&&(v=g.memoizedState,v=v!==null?v.dehydrated!==null:!0),v)return g;g=g.return}while(g!==null);return null}function G6(g,v,C,L,G){return g.mode&1?(g.flags|=65536,g.lanes=G,g):(g===v?g.flags|=65536:(g.flags|=128,C.flags|=131072,C.flags&=-52805,C.tag===1&&(C.alternate===null?C.tag=17:(v=c0(-1,1),v.tag=2,h0(C,v))),C.lanes|=1),g)}function La(g){g.flags|=4}function R1(g,v){if(g!==null&&g.child===v.child)return!0;if(v.flags&16)return!1;for(g=v.child;g!==null;){if(g.flags&12854||g.subtreeFlags&12854)return!1;g=g.sibling}return!0}var ms,ju,l3,u3;if(yn)ms=function(g,v){for(var C=v.child;C!==null;){if(C.tag===5||C.tag===6)Qe(g,C.stateNode);else if(C.tag!==4&&C.child!==null){C.child.return=C,C=C.child;continue}if(C===v)break;for(;C.sibling===null;){if(C.return===null||C.return===v)return;C=C.return}C.sibling.return=C.return,C=C.sibling}},ju=function(){},l3=function(g,v,C,L,G){if(g=g.memoizedProps,g!==L){var j=v.stateNode,fe=oa(Vr.current);C=Pt(j,C,g,L,G,fe),(v.updateQueue=C)&&La(v)}},u3=function(g,v,C,L){C!==L&&La(v)};else if(Kt){ms=function(g,v,C,L){for(var G=v.child;G!==null;){if(G.tag===5){var j=G.stateNode;C&&L&&(j=Xn(j,G.type,G.memoizedProps,G)),Qe(g,j)}else if(G.tag===6)j=G.stateNode,C&&L&&(j=xr(j,G.memoizedProps,G)),Qe(g,j);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)j=G.child,j!==null&&(j.return=G),ms(g,G,!0,!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===v)break;for(;G.sibling===null;){if(G.return===null||G.return===v)return;G=G.return}G.sibling.return=G.return,G=G.sibling}};var q5=function(g,v,C,L){for(var G=v.child;G!==null;){if(G.tag===5){var j=G.stateNode;C&&L&&(j=Xn(j,G.type,G.memoizedProps,G)),Ot(g,j)}else if(G.tag===6)j=G.stateNode,C&&L&&(j=xr(j,G.memoizedProps,G)),Ot(g,j);else if(G.tag!==4){if(G.tag===22&&G.memoizedState!==null)j=G.child,j!==null&&(j.return=G),q5(g,G,!0,!0);else if(G.child!==null){G.child.return=G,G=G.child;continue}}if(G===v)break;for(;G.sibling===null;){if(G.return===null||G.return===v)return;G=G.return}G.sibling.return=G.return,G=G.sibling}};ju=function(g,v){var C=v.stateNode;if(!R1(g,v)){g=C.containerInfo;var L=rt(g);q5(L,v,!1,!1),C.pendingChildren=L,La(v),cn(g,L)}},l3=function(g,v,C,L,G){var j=g.stateNode,fe=g.memoizedProps;if((g=R1(g,v))&&fe===L)v.stateNode=j;else{var we=v.stateNode,Ye=oa(Vr.current),Mt=null;fe!==L&&(Mt=Pt(we,C,fe,L,G,Ye)),g&&Mt===null?v.stateNode=j:(j=_t(j,Mt,C,fe,L,v,g,we),et(j,C,L,G,Ye)&&La(v),v.stateNode=j,g?La(v):ms(j,v,!1,!1))}},u3=function(g,v,C,L){C!==L?(g=oa(S1.current),C=oa(Vr.current),v.stateNode=nt(L,g,C,v),La(v)):v.stateNode=g.stateNode}}else ju=function(){},l3=function(){},u3=function(){};function C1(g,v){if(!wn)switch(g.tailMode){case"hidden":v=g.tail;for(var C=null;v!==null;)v.alternate!==null&&(C=v),v=v.sibling;C===null?g.tail=null:C.sibling=null;break;case"collapsed":C=g.tail;for(var L=null;C!==null;)C.alternate!==null&&(L=C),C=C.sibling;L===null?v||g.tail===null?g.tail=null:g.tail.sibling=null:L.sibling=null}}function is(g){var v=g.alternate!==null&&g.alternate.child===g.child,C=0,L=0;if(v)for(var G=g.child;G!==null;)C|=G.lanes|G.childLanes,L|=G.subtreeFlags&14680064,L|=G.flags&14680064,G.return=g,G=G.sibling;else for(G=g.child;G!==null;)C|=G.lanes|G.childLanes,L|=G.subtreeFlags,L|=G.flags,G.return=g,G=G.sibling;return g.subtreeFlags|=L,g.childLanes=C,v}function q6(g,v,C){var L=v.pendingProps;switch(Bu(v),v.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return is(v),null;case 1:return Nn(v.type)&&Fr(),is(v),null;case 3:return L=v.stateNode,G0(),nn($),nn(Qn),Rl(),L.pendingContext&&(L.context=L.pendingContext,L.pendingContext=null),(g===null||g.child===null)&&(kr(v)?La(v):g===null||g.memoizedState.isDehydrated&&!(v.flags&256)||(v.flags|=1024,Ro!==null&&(ip(Ro),Ro=null))),ju(g,v),is(v),null;case 5:C5(v),C=oa(S1.current);var G=v.type;if(g!==null&&v.stateNode!=null)l3(g,v,G,L,C),g.ref!==v.ref&&(v.flags|=512,v.flags|=2097152);else{if(!L){if(v.stateNode===null)throw Error(o(166));return is(v),null}if(g=oa(Vr.current),kr(v)){if(!Ae)throw Error(o(175));g=On(v.stateNode,v.type,v.memoizedProps,C,g,v,!Fu),v.updateQueue=g,g!==null&&La(v)}else{var j=Pe(G,L,C,g,v);ms(j,v,!1,!1),v.stateNode=j,et(j,G,L,C,g)&&La(v)}v.ref!==null&&(v.flags|=512,v.flags|=2097152)}return is(v),null;case 6:if(g&&v.stateNode!=null)u3(g,v,g.memoizedProps,L);else{if(typeof L!="string"&&v.stateNode===null)throw Error(o(166));if(g=oa(S1.current),C=oa(Vr.current),kr(v)){if(!Ae)throw Error(o(176));if(g=v.stateNode,L=v.memoizedProps,(C=li(g,L,v,!Fu))&&(G=Es,G!==null))switch(j=(G.mode&1)!==0,G.tag){case 3:Fe(G.stateNode.containerInfo,g,L,j);break;case 5:Ve(G.type,G.memoizedProps,G.stateNode,g,L,j)}C&&La(v)}else v.stateNode=nt(L,g,C,v)}return is(v),null;case 13:if(nn(Xi),L=v.memoizedState,wn&&ns!==null&&v.mode&1&&!(v.flags&128)){for(g=ns;g;)g=X(g);return V0(),v.flags|=98560,v}if(L!==null&&L.dehydrated!==null){if(L=kr(v),g===null){if(!L)throw Error(o(318));if(!Ae)throw Error(o(344));if(g=v.memoizedState,g=g!==null?g.dehydrated:null,!g)throw Error(o(317));wa(g,v)}else V0(),!(v.flags&128)&&(v.memoizedState=null),v.flags|=4;return is(v),null}return Ro!==null&&(ip(Ro),Ro=null),v.flags&128?(v.lanes=C,v):(L=L!==null,C=!1,g===null?kr(v):C=g.memoizedState!==null,L&&!C&&(v.child.flags|=8192,v.mode&1&&(g===null||Xi.current&1?ss===0&&(ss=3):sp())),v.updateQueue!==null&&(v.flags|=4),is(v),null);case 4:return G0(),ju(g,v),g===null&&Xe(v.stateNode.containerInfo),is(v),null;case 10:return $c(v.type._context),is(v),null;case 17:return Nn(v.type)&&Fr(),is(v),null;case 19:if(nn(Xi),G=v.memoizedState,G===null)return is(v),null;if(L=(v.flags&128)!==0,j=G.rendering,j===null)if(L)C1(G,!1);else{if(ss!==0||g!==null&&g.flags&128)for(g=v.child;g!==null;){if(j=Ou(g),j!==null){for(v.flags|=128,C1(G,!1),g=j.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),v.subtreeFlags=0,g=C,L=v.child;L!==null;)C=L,G=g,C.flags&=14680066,j=C.alternate,j===null?(C.childLanes=0,C.lanes=G,C.child=null,C.subtreeFlags=0,C.memoizedProps=null,C.memoizedState=null,C.updateQueue=null,C.dependencies=null,C.stateNode=null):(C.childLanes=j.childLanes,C.lanes=j.lanes,C.child=j.child,C.subtreeFlags=0,C.deletions=null,C.memoizedProps=j.memoizedProps,C.memoizedState=j.memoizedState,C.updateQueue=j.updateQueue,C.type=j.type,G=j.dependencies,C.dependencies=G===null?null:{lanes:G.lanes,firstContext:G.firstContext}),L=L.sibling;return dn(Xi,Xi.current&1|2),v.child}g=g.sibling}G.tail!==null&&Or()>JA&&(v.flags|=128,L=!0,C1(G,!1),v.lanes=4194304)}else{if(!L)if(g=Ou(j),g!==null){if(v.flags|=128,L=!0,g=g.updateQueue,g!==null&&(v.updateQueue=g,v.flags|=4),C1(G,!0),G.tail===null&&G.tailMode==="hidden"&&!j.alternate&&!wn)return is(v),null}else 2*Or()-G.renderingStartTime>JA&&C!==1073741824&&(v.flags|=128,L=!0,C1(G,!1),v.lanes=4194304);G.isBackwards?(j.sibling=v.child,v.child=j):(g=G.last,g!==null?g.sibling=j:v.child=j,G.last=j)}return G.tail!==null?(v=G.tail,G.rendering=v,G.tail=v.sibling,G.renderingStartTime=Or(),v.sibling=null,g=Xi.current,dn(Xi,L?g&1|2:g&1),v):(is(v),null);case 22:case 23:return rp(),L=v.memoizedState!==null,g!==null&&g.memoizedState!==null!==L&&(v.flags|=8192),L&&v.mode&1?la&1073741824&&(is(v),yn&&v.subtreeFlags&6&&(v.flags|=8192)):is(v),null;case 24:return null;case 25:return null}throw Error(o(156,v.tag))}var XA=a.ReactCurrentOwner,oo=!1;function Rs(g,v,C,L){v.child=g===null?Zc(v,null,C,L):z0(v,g.child,C,L)}function H6(g,v,C,L,G){C=C.render;var j=v.ref;return Eo(v,G),L=e3(g,v,C,L,j,G),C=Gu(),g!==null&&!oo?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~G,Po(g,v,G)):(wn&&C&&Du(v),v.flags|=1,Rs(g,v,L,G),v.child)}function p0(g,v,C,L,G){if(g===null){var j=C.type;return typeof j=="function"&&!op(j)&&j.defaultProps===void 0&&C.compare===null&&C.defaultProps===void 0?(v.tag=15,v.type=j,aa(g,v,j,L,G)):(g=e7(C.type,null,L,v,v.mode,G),g.ref=v.ref,g.return=v,v.child=g)}if(j=g.child,!(g.lanes&G)){var fe=j.memoizedProps;if(C=C.compare,C=C!==null?C:Nu,C(fe,L)&&g.ref===v.ref)return Po(g,v,G)}return v.flags|=1,g=B1(j,L),g.ref=v.ref,g.return=v,v.child=g}function aa(g,v,C,L,G){if(g!==null&&Nu(g.memoizedProps,L)&&g.ref===v.ref)if(oo=!1,(g.lanes&G)!==0)g.flags&131072&&(oo=!0);else return v.lanes=g.lanes,Po(g,v,G);return ln(g,v,C,L,G)}function xn(g,v,C){var L=v.pendingProps,G=L.children,j=g!==null?g.memoizedState:null;if(L.mode==="hidden")if(!(v.mode&1))v.memoizedState={baseLanes:0,cachePool:null},dn(A3,la),la|=C;else if(C&1073741824)v.memoizedState={baseLanes:0,cachePool:null},L=j!==null?j.baseLanes:C,dn(A3,la),la|=L;else return g=j!==null?j.baseLanes|C:C,v.lanes=v.childLanes=1073741824,v.memoizedState={baseLanes:g,cachePool:null},v.updateQueue=null,dn(A3,la),la|=g,null;else j!==null?(L=j.baseLanes|C,v.memoizedState=null):L=C,dn(A3,la),la|=L;return Rs(g,v,G,C),v.child}function ao(g,v){var C=v.ref;(g===null&&C!==null||g!==null&&g.ref!==C)&&(v.flags|=512,v.flags|=2097152)}function ln(g,v,C,L,G){var j=Nn(C)?an:Qn.current;return j=Mi(v,j),Eo(v,G),C=e3(g,v,C,L,j,G),L=Gu(),g!==null&&!oo?(v.updateQueue=g.updateQueue,v.flags&=-2053,g.lanes&=~G,Po(g,v,G)):(wn&&L&&Du(v),v.flags|=1,Rs(g,v,C,G),v.child)}function Gr(g,v,C,L,G){if(Nn(C)){var j=!0;ta(v)}else j=!1;if(Eo(v,G),v.stateNode===null)g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),Lu(v,C,L),S5(v,C,L,G),L=!0;else if(g===null){var fe=v.stateNode,we=v.memoizedProps;fe.props=we;var Ye=fe.context,Mt=C.contextType;typeof Mt=="object"&&Mt!==null?Mt=Pr(Mt):(Mt=Nn(C)?an:Qn.current,Mt=Mi(v,Mt));var tn=C.getDerivedStateFromProps,Kn=typeof tn=="function"||typeof fe.getSnapshotBeforeUpdate=="function";Kn||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(we!==L||Ye!==Mt)&&R6(v,fe,L,Mt),u0=!1;var En=v.memoizedState;fe.state=En,Qc(v,L,fe,G),Ye=v.memoizedState,we!==L||En!==Ye||$.current||u0?(typeof tn=="function"&&(b5(v,C,tn,L),Ye=v.memoizedState),(we=u0||E6(v,C,we,L,En,Ye,Mt))?(Kn||typeof fe.UNSAFE_componentWillMount!="function"&&typeof fe.componentWillMount!="function"||(typeof fe.componentWillMount=="function"&&fe.componentWillMount(),typeof fe.UNSAFE_componentWillMount=="function"&&fe.UNSAFE_componentWillMount()),typeof fe.componentDidMount=="function"&&(v.flags|=4194308)):(typeof fe.componentDidMount=="function"&&(v.flags|=4194308),v.memoizedProps=L,v.memoizedState=Ye),fe.props=L,fe.state=Ye,fe.context=Mt,L=we):(typeof fe.componentDidMount=="function"&&(v.flags|=4194308),L=!1)}else{fe=v.stateNode,S6(g,v),we=v.memoizedProps,Mt=v.type===v.elementType?we:ia(v.type,we),fe.props=Mt,Kn=v.pendingProps,En=fe.context,Ye=C.contextType,typeof Ye=="object"&&Ye!==null?Ye=Pr(Ye):(Ye=Nn(C)?an:Qn.current,Ye=Mi(v,Ye));var Qi=C.getDerivedStateFromProps;(tn=typeof Qi=="function"||typeof fe.getSnapshotBeforeUpdate=="function")||typeof fe.UNSAFE_componentWillReceiveProps!="function"&&typeof fe.componentWillReceiveProps!="function"||(we!==Kn||En!==Ye)&&R6(v,fe,L,Ye),u0=!1,En=v.memoizedState,fe.state=En,Qc(v,L,fe,G);var An=v.memoizedState;we!==Kn||En!==An||$.current||u0?(typeof Qi=="function"&&(b5(v,C,Qi,L),An=v.memoizedState),(Mt=u0||E6(v,C,Mt,L,En,An,Ye)||!1)?(tn||typeof fe.UNSAFE_componentWillUpdate!="function"&&typeof fe.componentWillUpdate!="function"||(typeof fe.componentWillUpdate=="function"&&fe.componentWillUpdate(L,An,Ye),typeof fe.UNSAFE_componentWillUpdate=="function"&&fe.UNSAFE_componentWillUpdate(L,An,Ye)),typeof fe.componentDidUpdate=="function"&&(v.flags|=4),typeof fe.getSnapshotBeforeUpdate=="function"&&(v.flags|=1024)):(typeof fe.componentDidUpdate!="function"||we===g.memoizedProps&&En===g.memoizedState||(v.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||we===g.memoizedProps&&En===g.memoizedState||(v.flags|=1024),v.memoizedProps=L,v.memoizedState=An),fe.props=L,fe.state=An,fe.context=Ye,L=Mt):(typeof fe.componentDidUpdate!="function"||we===g.memoizedProps&&En===g.memoizedState||(v.flags|=4),typeof fe.getSnapshotBeforeUpdate!="function"||we===g.memoizedProps&&En===g.memoizedState||(v.flags|=1024),L=!1)}return c3(g,v,C,L,j,G)}function c3(g,v,C,L,G,j){ao(g,v);var fe=(v.flags&128)!==0;if(!L&&!fe)return G&&Fi(v,C,!1),Po(g,v,j);L=v.stateNode,XA.current=v;var we=fe&&typeof C.getDerivedStateFromError!="function"?null:L.render();return v.flags|=1,g!==null&&fe?(v.child=z0(v,g.child,null,j),v.child=z0(v,null,we,j)):Rs(g,v,we,j),v.memoizedState=L.state,G&&Fi(v,C,!0),v.child}function h3(g){var v=g.stateNode;v.pendingContext?o0(g,v.pendingContext,v.pendingContext!==v.context):v.context&&o0(g,v.context,!1),R5(g,v.containerInfo)}function m0(g,v,C,L,G){return V0(),f0(G),v.flags|=256,Rs(g,v,C,L),v.child}var f3={dehydrated:null,treeContext:null,retryLane:0};function Nr(g){return{baseLanes:g,cachePool:null}}function Pl(g,v,C){var L=v.pendingProps,G=Xi.current,j=!1,fe=(v.flags&128)!==0,we;if((we=fe)||(we=g!==null&&g.memoizedState===null?!1:(G&2)!==0),we?(j=!0,v.flags&=-129):(g===null||g.memoizedState!==null)&&(G|=1),dn(Xi,G&1),g===null)return E5(v),g=v.memoizedState,g!==null&&(g=g.dehydrated,g!==null)?(v.mode&1?st(g)?v.lanes=8:v.lanes=1073741824:v.lanes=1,null):(G=L.children,g=L.fallback,j?(L=v.mode,j=v.child,G={mode:"hidden",children:G},!(L&1)&&j!==null?(j.childLanes=0,j.pendingProps=G):j=t7(G,L,0,null),g=Zu(g,L,C,null),j.return=v,g.return=v,j.sibling=g,v.child=j,v.child.memoizedState=Nr(C),v.memoizedState=f3,g):q0(v,G));if(G=g.memoizedState,G!==null){if(we=G.dehydrated,we!==null){if(fe)return v.flags&256?(v.flags&=-257,mt(g,v,C,Error(o(422)))):v.memoizedState!==null?(v.child=g.child,v.flags|=128,null):(j=L.fallback,G=v.mode,L=t7({mode:"visible",children:L.children},G,0,null),j=Zu(j,G,C,null),j.flags|=2,L.return=v,j.return=v,L.sibling=j,v.child=L,v.mode&1&&z0(v,g.child,null,C),v.child.memoizedState=Nr(C),v.memoizedState=f3,j);if(!(v.mode&1))v=mt(g,v,C,null);else if(st(we))v=mt(g,v,C,Error(o(419)));else if(L=(C&g.childLanes)!==0,oo||L){if(L=qr,L!==null){switch(C&-C){case 4:j=2;break;case 16:j=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:j=32;break;case 536870912:j=268435456;break;default:j=0}L=j&(L.suspendedLanes|C)?0:j,L!==0&&L!==G.retryLane&&(G.retryLane=L,Da(g,L,-1))}sp(),v=mt(g,v,C,Error(o(421)))}else Ct(we)?(v.flags|=128,v.child=g.child,v=CB.bind(null,g),d(we,v),v=null):(C=G.treeContext,Ae&&(ns=pr(we),Es=v,wn=!0,Ro=null,Fu=!1,C!==null&&(ro[ts++]=sa,ro[ts++]=Ra,ro[ts++]=Ml,sa=C.id,Ra=C.overflow,Ml=v)),v=q0(v,v.pendingProps.children),v.flags|=4096);return v}return j?(L=lt(g,v,L.children,L.fallback,C),j=v.child,G=g.child.memoizedState,j.memoizedState=G===null?Nr(C):{baseLanes:G.baseLanes|C,cachePool:null},j.childLanes=g.childLanes&~C,v.memoizedState=f3,L):(C=H5(g,v,L.children,C),v.memoizedState=null,C)}return j?(L=lt(g,v,L.children,L.fallback,C),j=v.child,G=g.child.memoizedState,j.memoizedState=G===null?Nr(C):{baseLanes:G.baseLanes|C,cachePool:null},j.childLanes=g.childLanes&~C,v.memoizedState=f3,L):(C=H5(g,v,L.children,C),v.memoizedState=null,C)}function q0(g,v){return v=t7({mode:"visible",children:v},g.mode,0,null),v.return=g,g.child=v}function H5(g,v,C,L){var G=g.child;return g=G.sibling,C=B1(G,{mode:"visible",children:C}),!(v.mode&1)&&(C.lanes=L),C.return=v,C.sibling=null,g!==null&&(L=v.deletions,L===null?(v.deletions=[g],v.flags|=16):L.push(g)),v.child=C}function lt(g,v,C,L,G){var j=v.mode;g=g.child;var fe=g.sibling,we={mode:"hidden",children:C};return!(j&1)&&v.child!==g?(C=v.child,C.childLanes=0,C.pendingProps=we,v.deletions=null):(C=B1(g,we),C.subtreeFlags=g.subtreeFlags&14680064),fe!==null?L=B1(fe,L):(L=Zu(L,j,G,null),L.flags|=2),L.return=v,C.return=v,C.sibling=L,v.child=C,L}function mt(g,v,C,L){return L!==null&&f0(L),z0(v,g.child,null,C),g=q0(v,v.pendingProps.children),g.flags|=2,v.memoizedState=null,g}function W5(g,v,C){g.lanes|=v;var L=g.alternate;L!==null&&(L.lanes|=v),v1(g.return,v,C)}function d3(g,v,C,L,G){var j=g.memoizedState;j===null?g.memoizedState={isBackwards:v,rendering:null,renderingStartTime:0,last:L,tail:C,tailMode:G}:(j.isBackwards=v,j.rendering=null,j.renderingStartTime=0,j.last=L,j.tail=C,j.tailMode=G)}function $u(g,v,C){var L=v.pendingProps,G=L.revealOrder,j=L.tail;if(Rs(g,v,L.children,C),L=Xi.current,L&2)L=L&1|2,v.flags|=128;else{if(g!==null&&g.flags&128)e:for(g=v.child;g!==null;){if(g.tag===13)g.memoizedState!==null&&W5(g,C,v);else if(g.tag===19)W5(g,C,v);else if(g.child!==null){g.child.return=g,g=g.child;continue}if(g===v)break e;for(;g.sibling===null;){if(g.return===null||g.return===v)break e;g=g.return}g.sibling.return=g.return,g=g.sibling}L&=1}if(dn(Xi,L),!(v.mode&1))v.memoizedState=null;else switch(G){case"forwards":for(C=v.child,G=null;C!==null;)g=C.alternate,g!==null&&Ou(g)===null&&(G=C),C=C.sibling;C=G,C===null?(G=v.child,v.child=null):(G=C.sibling,C.sibling=null),d3(v,!1,G,C,j);break;case"backwards":for(C=null,G=v.child,v.child=null;G!==null;){if(g=G.alternate,g!==null&&Ou(g)===null){v.child=G;break}g=G.sibling,G.sibling=C,C=G,G=g}d3(v,!0,C,null,j);break;case"together":d3(v,!1,null,null,void 0);break;default:v.memoizedState=null}return v.child}function Po(g,v,C){if(g!==null&&(v.dependencies=g.dependencies),p3|=v.lanes,!(C&v.childLanes))return null;if(g!==null&&v.child!==g.child)throw Error(o(153));if(v.child!==null){for(g=v.child,C=B1(g,g.pendingProps),v.child=C,C.return=v;g.sibling!==null;)g=g.sibling,C=C.sibling=B1(g,g.pendingProps),C.return=v;C.sibling=null}return v.child}function P1(g,v,C){switch(v.tag){case 3:h3(v),V0();break;case 5:I6(v);break;case 1:Nn(v.type)&&ta(v);break;case 4:R5(v,v.stateNode.containerInfo);break;case 10:x5(v,v.type._context,v.memoizedProps.value);break;case 13:var L=v.memoizedState;if(L!==null)return L.dehydrated!==null?(dn(Xi,Xi.current&1),v.flags|=128,null):C&v.child.childLanes?Pl(g,v,C):(dn(Xi,Xi.current&1),g=Po(g,v,C),g!==null?g.sibling:null);dn(Xi,Xi.current&1);break;case 19:if(L=(C&v.childLanes)!==0,g.flags&128){if(L)return $u(g,v,C);v.flags|=128}var G=v.memoizedState;if(G!==null&&(G.rendering=null,G.tail=null,G.lastEffect=null),dn(Xi,Xi.current),L)break;return null;case 22:case 23:return v.lanes=0,xn(g,v,C)}return Po(g,v,C)}function Nl(g,v){switch(Bu(v),v.tag){case 1:return Nn(v.type)&&Fr(),g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 3:return G0(),nn($),nn(Qn),Rl(),g=v.flags,g&65536&&!(g&128)?(v.flags=g&-65537|128,v):null;case 5:return C5(v),null;case 13:if(nn(Xi),g=v.memoizedState,g!==null&&g.dehydrated!==null){if(v.alternate===null)throw Error(o(340));V0()}return g=v.flags,g&65536?(v.flags=g&-65537|128,v):null;case 19:return nn(Xi),null;case 4:return G0(),null;case 10:return $c(v.type._context),null;case 22:case 23:return rp(),null;case 24:return null;default:return null}}var Xu=!1,Hs=!1,f=typeof WeakSet=="function"?WeakSet:Set,h=null;function p(g,v){var C=g.ref;if(C!==null)if(typeof C=="function")try{C(null)}catch(L){Lo(g,v,L)}else C.current=null}function y(g,v,C){try{C()}catch(L){Lo(g,v,L)}}var x=!1;function S(g,v){for(de(g.containerInfo),h=v;h!==null;)if(g=h,v=g.child,(g.subtreeFlags&1028)!==0&&v!==null)v.return=g,h=v;else for(;h!==null;){g=h;try{var C=g.alternate;if(g.flags&1024)switch(g.tag){case 0:case 11:case 15:break;case 1:if(C!==null){var L=C.memoizedProps,G=C.memoizedState,j=g.stateNode,fe=j.getSnapshotBeforeUpdate(g.elementType===g.type?L:ia(g.type,L),G);j.__reactInternalSnapshotBeforeUpdate=fe}break;case 3:yn&&Ut(g.stateNode.containerInfo);break;case 5:case 6:case 4:case 17:break;default:throw Error(o(163))}}catch(we){Lo(g,g.return,we)}if(v=g.sibling,v!==null){v.return=g.return,h=v;break}h=g.return}return C=x,x=!1,C}function E(g,v,C){var L=v.updateQueue;if(L=L!==null?L.lastEffect:null,L!==null){var G=L=L.next;do{if((G.tag&g)===g){var j=G.destroy;G.destroy=void 0,j!==void 0&&y(v,C,j)}G=G.next}while(G!==L)}}function R(g,v){if(v=v.updateQueue,v=v!==null?v.lastEffect:null,v!==null){var C=v=v.next;do{if((C.tag&g)===g){var L=C.create;C.destroy=L()}C=C.next}while(C!==v)}}function D(g){var v=g.ref;if(v!==null){var C=g.stateNode;switch(g.tag){case 5:g=se(C);break;default:g=C}typeof v=="function"?v(g):v.current=g}}function k(g,v,C){if(na&&typeof na.onCommitFiberUnmount=="function")try{na.onCommitFiberUnmount(Gc,v)}catch{}switch(v.tag){case 0:case 11:case 14:case 15:if(g=v.updateQueue,g!==null&&(g=g.lastEffect,g!==null)){var L=g=g.next;do{var G=L,j=G.destroy;G=G.tag,j!==void 0&&(G&2||G&4)&&y(v,C,j),L=L.next}while(L!==g)}break;case 1:if(p(v,C),g=v.stateNode,typeof g.componentWillUnmount=="function")try{g.props=v.memoizedProps,g.state=v.memoizedState,g.componentWillUnmount()}catch(fe){Lo(v,C,fe)}break;case 5:p(v,C);break;case 4:yn?Ue(g,v,C):Kt&&Kt&&(v=v.stateNode.containerInfo,C=rt(v),ai(v,C))}}function W(g,v,C){for(var L=v;;)if(k(g,L,C),L.child===null||yn&&L.tag===4){if(L===v)break;for(;L.sibling===null;){if(L.return===null||L.return===v)return;L=L.return}L.sibling.return=L.return,L=L.sibling}else L.child.return=L,L=L.child}function te(g){var v=g.alternate;v!==null&&(g.alternate=null,te(v)),g.child=null,g.deletions=null,g.sibling=null,g.tag===5&&(v=g.stateNode,v!==null&&Ze(v)),g.stateNode=null,g.return=null,g.dependencies=null,g.memoizedProps=null,g.memoizedState=null,g.pendingProps=null,g.stateNode=null,g.updateQueue=null}function ce(g){return g.tag===5||g.tag===3||g.tag===4}function le(g){e:for(;;){for(;g.sibling===null;){if(g.return===null||ce(g.return))return null;g=g.return}for(g.sibling.return=g.return,g=g.sibling;g.tag!==5&&g.tag!==6&&g.tag!==18;){if(g.flags&2||g.child===null||g.tag===4)continue e;g.child.return=g,g=g.child}if(!(g.flags&2))return g.stateNode}}function ue(g){if(yn){e:{for(var v=g.return;v!==null;){if(ce(v))break e;v=v.return}throw Error(o(160))}var C=v;switch(C.tag){case 5:v=C.stateNode,C.flags&32&&(Be(v),C.flags&=-33),C=le(g),Te(g,C,v);break;case 3:case 4:v=C.stateNode.containerInfo,C=le(g),ve(g,C,v);break;default:throw Error(o(161))}}}function ve(g,v,C){var L=g.tag;if(L===5||L===6)g=g.stateNode,v?Bt(C,g,v):Zt(C,g);else if(L!==4&&(g=g.child,g!==null))for(ve(g,v,C),g=g.sibling;g!==null;)ve(g,v,C),g=g.sibling}function Te(g,v,C){var L=g.tag;if(L===5||L===6)g=g.stateNode,v?yt(C,g,v):We(C,g);else if(L!==4&&(g=g.child,g!==null))for(Te(g,v,C),g=g.sibling;g!==null;)Te(g,v,C),g=g.sibling}function Ue(g,v,C){for(var L=v,G=!1,j,fe;;){if(!G){G=L.return;e:for(;;){if(G===null)throw Error(o(160));switch(j=G.stateNode,G.tag){case 5:fe=!1;break e;case 3:j=j.containerInfo,fe=!0;break e;case 4:j=j.containerInfo,fe=!0;break e}G=G.return}G=!0}if(L.tag===5||L.tag===6)W(g,L,C),fe?ge(j,L.stateNode):vn(j,L.stateNode);else if(L.tag===18)fe?ie(j,L.stateNode):p1(j,L.stateNode);else if(L.tag===4){if(L.child!==null){j=L.stateNode.containerInfo,fe=!0,L.child.return=L,L=L.child;continue}}else if(k(g,L,C),L.child!==null){L.child.return=L,L=L.child;continue}if(L===v)break;for(;L.sibling===null;){if(L.return===null||L.return===v)return;L=L.return,L.tag===4&&(G=!1)}L.sibling.return=L.return,L=L.sibling}}function Le(g,v){if(yn){switch(v.tag){case 0:case 11:case 14:case 15:E(3,v,v.return),R(3,v),E(5,v,v.return);return;case 1:return;case 5:var C=v.stateNode;if(C!=null){var L=v.memoizedProps;g=g!==null?g.memoizedProps:L;var G=v.type,j=v.updateQueue;v.updateQueue=null,j!==null&&Yt(C,j,G,g,L,v)}return;case 6:if(v.stateNode===null)throw Error(o(162));C=v.memoizedProps,St(v.stateNode,g!==null?g.memoizedProps:C,C);return;case 3:Ae&&g!==null&&g.memoizedState.isDehydrated&&kn(v.stateNode.containerInfo);return;case 12:return;case 13:Ee(v);return;case 19:Ee(v);return;case 17:return}throw Error(o(163))}switch(v.tag){case 0:case 11:case 14:case 15:E(3,v,v.return),R(3,v),E(5,v,v.return);return;case 12:return;case 13:Ee(v);return;case 19:Ee(v);return;case 3:Ae&&g!==null&&g.memoizedState.isDehydrated&&kn(v.stateNode.containerInfo);break;case 22:case 23:return}e:if(Kt){switch(v.tag){case 1:case 5:case 6:break e;case 3:case 4:v=v.stateNode,ai(v.containerInfo,v.pendingChildren);break e}throw Error(o(163))}}function Ee(g){var v=g.updateQueue;if(v!==null){g.updateQueue=null;var C=g.stateNode;C===null&&(C=g.stateNode=new f),v.forEach(function(L){var G=PB.bind(null,g,L);C.has(L)||(C.add(L),L.then(G,G))})}}function _e(g,v){for(h=v;h!==null;){v=h;var C=v.deletions;if(C!==null)for(var L=0;L<C.length;L++){var G=C[L];try{var j=g;yn?Ue(j,G,v):W(j,G,v);var fe=G.alternate;fe!==null&&(fe.return=null),G.return=null}catch(hn){Lo(G,v,hn)}}if(C=v.child,v.subtreeFlags&12854&&C!==null)C.return=v,h=C;else for(;h!==null;){v=h;try{var we=v.flags;if(we&32&&yn&&Be(v.stateNode),we&512){var Ye=v.alternate;if(Ye!==null){var Mt=Ye.ref;Mt!==null&&(typeof Mt=="function"?Mt(null):Mt.current=null)}}if(we&8192)switch(v.tag){case 13:if(v.memoizedState!==null){var tn=v.alternate;(tn===null||tn.memoizedState===null)&&(ZA=Or())}break;case 22:var Kn=v.memoizedState!==null,En=v.alternate,Qi=En!==null&&En.memoizedState!==null;if(C=v,yn){e:if(L=C,G=Kn,j=null,yn)for(var An=L;;){if(An.tag===5){if(j===null){j=An;var Ws=An.stateNode;G?bt(Ws):at(An.stateNode,An.memoizedProps)}}else if(An.tag===6){if(j===null){var Fa=An.stateNode;G?oe(Fa):xt(Fa,An.memoizedProps)}}else if((An.tag!==22&&An.tag!==23||An.memoizedState===null||An===L)&&An.child!==null){An.child.return=An,An=An.child;continue}if(An===L)break;for(;An.sibling===null;){if(An.return===null||An.return===L)break e;j===An&&(j=null),An=An.return}j===An&&(j=null),An.sibling.return=An.return,An=An.sibling}}if(Kn&&!Qi&&C.mode&1){h=C;for(var ke=C.child;ke!==null;){for(C=h=ke;h!==null;){L=h;var Ie=L.child;switch(L.tag){case 0:case 11:case 14:case 15:E(4,L,L.return);break;case 1:p(L,L.return);var He=L.stateNode;if(typeof He.componentWillUnmount=="function"){var Gt=L.return;try{He.props=L.memoizedProps,He.state=L.memoizedState,He.componentWillUnmount()}catch(hn){Lo(L,Gt,hn)}}break;case 5:p(L,L.return);break;case 22:if(L.memoizedState!==null){Pn(C);continue}}Ie!==null?(Ie.return=L,h=Ie):Pn(C)}ke=ke.sibling}}}switch(we&4102){case 2:ue(v),v.flags&=-3;break;case 6:ue(v),v.flags&=-3,Le(v.alternate,v);break;case 4096:v.flags&=-4097;break;case 4100:v.flags&=-4097,Le(v.alternate,v);break;case 4:Le(v.alternate,v)}}catch(hn){Lo(v,v.return,hn)}if(C=v.sibling,C!==null){C.return=v.return,h=C;break}h=v.return}}}function gt(g,v,C){h=g,en(g)}function en(g,v,C){for(var L=(g.mode&1)!==0;h!==null;){var G=h,j=G.child;if(G.tag===22&&L){var fe=G.memoizedState!==null||Xu;if(!fe){var we=G.alternate,Ye=we!==null&&we.memoizedState!==null||Hs;we=Xu;var Mt=Hs;if(Xu=fe,(Hs=Ye)&&!Mt)for(h=G;h!==null;)fe=h,Ye=fe.child,fe.tag===22&&fe.memoizedState!==null?In(G):Ye!==null?(Ye.return=fe,h=Ye):In(G);for(;j!==null;)h=j,en(j),j=j.sibling;h=G,Xu=we,Hs=Mt}zt(g)}else G.subtreeFlags&8772&&j!==null?(j.return=G,h=j):zt(g)}}function zt(g){for(;h!==null;){var v=h;if(v.flags&8772){var C=v.alternate;try{if(v.flags&8772)switch(v.tag){case 0:case 11:case 15:Hs||R(5,v);break;case 1:var L=v.stateNode;if(v.flags&4&&!Hs)if(C===null)L.componentDidMount();else{var G=v.elementType===v.type?C.memoizedProps:ia(v.type,C.memoizedProps);L.componentDidUpdate(G,C.memoizedState,L.__reactInternalSnapshotBeforeUpdate)}var j=v.updateQueue;j!==null&&w6(v,j,L);break;case 3:var fe=v.updateQueue;if(fe!==null){if(C=null,v.child!==null)switch(v.child.tag){case 5:C=se(v.child.stateNode);break;case 1:C=v.child.stateNode}w6(v,fe,C)}break;case 5:var we=v.stateNode;C===null&&v.flags&4&&$t(we,v.type,v.memoizedProps,v);break;case 6:break;case 4:break;case 12:break;case 13:if(Ae&&v.memoizedState===null){var Ye=v.alternate;if(Ye!==null){var Mt=Ye.memoizedState;if(Mt!==null){var tn=Mt.dehydrated;tn!==null&&qs(tn)}}}break;case 19:case 17:case 21:case 22:case 23:break;default:throw Error(o(163))}Hs||v.flags&512&&D(v)}catch(Kn){Lo(v,v.return,Kn)}}if(v===g){h=null;break}if(C=v.sibling,C!==null){C.return=v.return,h=C;break}h=v.return}}function Pn(g){for(;h!==null;){var v=h;if(v===g){h=null;break}var C=v.sibling;if(C!==null){C.return=v.return,h=C;break}h=v.return}}function In(g){for(;h!==null;){var v=h;try{switch(v.tag){case 0:case 11:case 15:var C=v.return;try{R(4,v)}catch(Ye){Lo(v,C,Ye)}break;case 1:var L=v.stateNode;if(typeof L.componentDidMount=="function"){var G=v.return;try{L.componentDidMount()}catch(Ye){Lo(v,G,Ye)}}var j=v.return;try{D(v)}catch(Ye){Lo(v,j,Ye)}break;case 5:var fe=v.return;try{D(v)}catch(Ye){Lo(v,fe,Ye)}}}catch(Ye){Lo(v,v.return,Ye)}if(v===g){h=null;break}var we=v.sibling;if(we!==null){we.return=v.return,h=we;break}h=v.return}}var $n=0,_n=1,Xt=2,At=3,Bn=4;if(typeof Symbol=="function"&&Symbol.for){var yi=Symbol.for;$n=yi("selector.component"),_n=yi("selector.has_pseudo_class"),Xt=yi("selector.role"),At=yi("selector.test_id"),Bn=yi("selector.text")}function Ln(g){var v=Je(g);if(v!=null){if(typeof v.memoizedProps["data-testname"]!="string")throw Error(o(364));return v}if(g=fn(g),g===null)throw Error(o(362));return g.stateNode.current}function bi(g,v){switch(v.$$typeof){case $n:if(g.type===v.value)return!0;break;case _n:e:{v=v.value,g=[g,0];for(var C=0;C<g.length;){var L=g[C++],G=g[C++],j=v[G];if(L.tag!==5||!Z(L)){for(;j!=null&&bi(L,j);)G++,j=v[G];if(G===v.length){v=!0;break e}else for(L=L.child;L!==null;)g.push(L,G),L=L.sibling}}v=!1}return v;case Xt:if(g.tag===5&&De(g.stateNode,v.value))return!0;break;case Bn:if((g.tag===5||g.tag===6)&&(g=he(g),g!==null&&0<=g.indexOf(v.value)))return!0;break;case At:if(g.tag===5&&(g=g.memoizedProps["data-testname"],typeof g=="string"&&g.toLowerCase()===v.value.toLowerCase()))return!0;break;default:throw Error(o(365))}return!1}function rs(g){switch(g.$$typeof){case $n:return"<"+(O(g.value)||"Unknown")+">";case _n:return":has("+(rs(g)||"")+")";case Xt:return'[role="'+g.value+'"]';case Bn:return'"'+g.value+'"';case At:return'[data-testname="'+g.value+'"]';default:throw Error(o(365))}}function j5(g,v){var C=[];g=[g,0];for(var L=0;L<g.length;){var G=g[L++],j=g[L++],fe=v[j];if(G.tag!==5||!Z(G)){for(;fe!=null&&bi(G,fe);)j++,fe=v[j];if(j===v.length)C.push(G);else for(G=G.child;G!==null;)g.push(G,j),G=G.sibling}}return C}function QA(g,v){if(!Tt)throw Error(o(363));g=Ln(g),g=j5(g,v),v=[],g=Array.from(g);for(var C=0;C<g.length;){var L=g[C++];if(L.tag===5)Z(L)||v.push(L.stateNode);else for(L=L.child;L!==null;)g.push(L),L=L.sibling}return v}var SB=Math.ceil,W6=a.ReactCurrentDispatcher,YA=a.ReactCurrentOwner,Ir=a.ReactCurrentBatchConfig,ri=0,qr=null,Hr=null,Cs=0,la=0,A3=Jt(0),ss=0,$5=null,p3=0,j6=0,KA=0,X5=null,No=null,ZA=0,JA=1/0;function m3(){JA=Or()+500}var $6=!1,ep=null,N1=null,X6=!1,I1=null,Q6=0,Q5=0,tp=null,Y6=-1,K6=0;function lo(){return ri&6?Or():Y6!==-1?Y6:Y6=Or()}function L1(g){return g.mode&1?ri&2&&Cs!==0?Cs&-Cs:_5.transition!==null?(K6===0&&(g=k0,k0<<=1,!(k0&4194240)&&(k0=64),K6=g),K6):(g=vi,g!==0?g:ht()):1}function Da(g,v,C){if(50<Q5)throw Q5=0,tp=null,Error(o(185));var L=Z6(g,v);return L===null?null:(g1(L,v,C),(!(ri&2)||L!==qr)&&(L===qr&&(!(ri&2)&&(j6|=v),ss===4&&D1(L,Cs)),Io(L,C),v===1&&ri===0&&!(g.mode&1)&&(m3(),qc&&Ji())),L)}function Z6(g,v){g.lanes|=v;var C=g.alternate;for(C!==null&&(C.lanes|=v),C=g,g=g.return;g!==null;)g.childLanes|=v,C=g.alternate,C!==null&&(C.childLanes|=v),C=g,g=g.return;return C.tag===3?C.stateNode:null}function Io(g,v){var C=g.callbackNode;OA(g,v);var L=kc(g,g===qr?Cs:0);if(L===0)C!==null&&Vc(C),g.callbackNode=null,g.callbackPriority=0;else if(v=L&-L,g.callbackPriority!==v){if(C!=null&&Vc(C),v===1)g.tag===0?Tl(Fx.bind(null,g)):es(Fx.bind(null,g)),vt?ut(function(){ri===0&&Ji()}):Cu(zc,Ji),C=null;else{switch(g5(L)){case 1:C=zc;break;case 4:C=GA;break;case 16:C=Pu;break;case 536870912:C=y5;break;default:C=Pu}C=Wx(C,Bx.bind(null,g))}g.callbackPriority=v,g.callbackNode=C}}function Bx(g,v){if(Y6=-1,K6=0,ri&6)throw Error(o(327));var C=g.callbackNode;if(Ku()&&g.callbackNode!==C)return null;var L=kc(g,g===qr?Cs:0);if(L===0)return null;if(L&30||L&g.expiredLanes||v)v=J6(g,L);else{v=L;var G=ri;ri|=2;var j=kx();(qr!==g||Cs!==v)&&(m3(),Qu(g,v));do try{MB();break}catch(we){Ox(g,we)}while(!0);l0(),W6.current=j,ri=G,Hr!==null?v=0:(qr=null,Cs=0,v=ss)}if(v!==0){if(v===2&&(G=Ui(g),G!==0&&(L=G,v=np(g,G))),v===1)throw C=$5,Qu(g,0),D1(g,L),Io(g,Or()),C;if(v===6)D1(g,L);else{if(G=g.current.alternate,!(L&30)&&!TB(G)&&(v=J6(g,L),v===2&&(j=Ui(g),j!==0&&(L=j,v=np(g,j))),v===1))throw C=$5,Qu(g,0),D1(g,L),Io(g,Or()),C;switch(g.finishedWork=G,g.finishedLanes=L,v){case 0:case 1:throw Error(o(345));case 2:Yu(g,No);break;case 3:if(D1(g,L),(L&130023424)===L&&(v=ZA+500-Or(),10<v)){if(kc(g,0)!==0)break;if(G=g.suspendedLanes,(G&L)!==L){lo(),g.pingedLanes|=g.suspendedLanes&G;break}g.timeoutHandle=tt(Yu.bind(null,g,No),v);break}Yu(g,No);break;case 4:if(D1(g,L),(L&4194240)===L)break;for(v=g.eventTimes,G=-1;0<L;){var fe=31-$i(L);j=1<<fe,fe=v[fe],fe>G&&(G=fe),L&=~j}if(L=G,L=Or()-L,L=(120>L?120:480>L?480:1080>L?1080:1920>L?1920:3e3>L?3e3:4320>L?4320:1960*SB(L/1960))-L,10<L){g.timeoutHandle=tt(Yu.bind(null,g,No),L);break}Yu(g,No);break;case 5:Yu(g,No);break;default:throw Error(o(329))}}}return Io(g,Or()),g.callbackNode===C?Bx.bind(null,g):null}function np(g,v){var C=X5;return g.current.memoizedState.isDehydrated&&(Qu(g,v).flags|=256),g=J6(g,v),g!==2&&(v=No,No=C,v!==null&&ip(v)),g}function ip(g){No===null?No=g:No.push.apply(No,g)}function TB(g){for(var v=g;;){if(v.flags&16384){var C=v.updateQueue;if(C!==null&&(C=C.stores,C!==null))for(var L=0;L<C.length;L++){var G=C[L],j=G.getSnapshot;G=G.value;try{if(!Ma(j(),G))return!1}catch{return!1}}}if(C=v.child,v.subtreeFlags&16384&&C!==null)C.return=v,v=C;else{if(v===g)break;for(;v.sibling===null;){if(v.return===null||v.return===g)return!0;v=v.return}v.sibling.return=v.return,v=v.sibling}}return!0}function D1(g,v){for(v&=~KA,v&=~j6,g.suspendedLanes|=v,g.pingedLanes&=~v,g=g.expirationTimes;0<v;){var C=31-$i(v),L=1<<C;g[C]=-1,v&=~L}}function Fx(g){if(ri&6)throw Error(o(327));Ku();var v=kc(g,0);if(!(v&1))return Io(g,Or()),null;var C=J6(g,v);if(g.tag!==0&&C===2){var L=Ui(g);L!==0&&(v=L,C=np(g,L))}if(C===1)throw C=$5,Qu(g,0),D1(g,v),Io(g,Or()),C;if(C===6)throw Error(o(345));return g.finishedWork=g.current.alternate,g.finishedLanes=v,Yu(g,No),Io(g,Or()),null}function Ux(g){I1!==null&&I1.tag===0&&!(ri&6)&&Ku();var v=ri;ri|=1;var C=Ir.transition,L=vi;try{if(Ir.transition=null,vi=1,g)return g()}finally{vi=L,Ir.transition=C,ri=v,!(ri&6)&&Ji()}}function rp(){la=A3.current,nn(A3)}function Qu(g,v){g.finishedWork=null,g.finishedLanes=0;var C=g.timeoutHandle;if(C!==Rt&&(g.timeoutHandle=Rt,Dt(C)),Hr!==null)for(C=Hr.return;C!==null;){var L=C;switch(Bu(L),L.tag){case 1:L=L.type.childContextTypes,L!=null&&Fr();break;case 3:G0(),nn($),nn(Qn),Rl();break;case 5:C5(L);break;case 4:G0();break;case 13:nn(Xi);break;case 19:nn(Xi);break;case 10:$c(L.type._context);break;case 22:case 23:rp()}C=C.return}if(qr=g,Hr=g=B1(g.current,null),Cs=la=v,ss=0,$5=null,KA=j6=p3=0,No=X5=null,ra!==null){for(v=0;v<ra.length;v++)if(C=ra[v],L=C.interleaved,L!==null){C.interleaved=null;var G=L.next,j=C.pending;if(j!==null){var fe=j.next;j.next=G,L.next=fe}C.pending=L}ra=null}return g}function Ox(g,v){do{var C=Hr;try{if(l0(),d0.current=a3,Jc){for(var L=zi.memoizedState;L!==null;){var G=L.queue;G!==null&&(G.pending=null),L=L.next}Jc=!1}if(T1=0,zr=As=zi=null,w1=!1,Vu=0,YA.current=null,C===null||C.return===null){ss=1,$5=v,Hr=null;break}e:{var j=g,fe=C.return,we=C,Ye=v;if(v=Cs,we.flags|=32768,Ye!==null&&typeof Ye=="object"&&typeof Ye.then=="function"){var Mt=Ye,tn=we,Kn=tn.tag;if(!(tn.mode&1)&&(Kn===0||Kn===11||Kn===15)){var En=tn.alternate;En?(tn.updateQueue=En.updateQueue,tn.memoizedState=En.memoizedState,tn.lanes=En.lanes):(tn.updateQueue=null,tn.memoizedState=null)}var Qi=mr(fe);if(Qi!==null){Qi.flags&=-257,G6(Qi,fe,we,j,v),Qi.mode&1&&G5(j,Mt,v),v=Qi,Ye=Mt;var An=v.updateQueue;if(An===null){var Ws=new Set;Ws.add(Ye),v.updateQueue=Ws}else An.add(Ye);break e}else{if(!(v&1)){G5(j,Mt,v),sp();break e}Ye=Error(o(426))}}else if(wn&&we.mode&1){var Fa=mr(fe);if(Fa!==null){!(Fa.flags&65536)&&(Fa.flags|=256),G6(Fa,fe,we,j,v),f0(Ye);break e}}j=Ye,ss!==4&&(ss=2),X5===null?X5=[j]:X5.push(j),Ye=k5(Ye,we),we=fe;do{switch(we.tag){case 3:we.flags|=65536,v&=-v,we.lanes|=v;var ke=z6(we,Ye,v);T6(we,ke);break e;case 1:j=Ye;var Ie=we.type,He=we.stateNode;if(!(we.flags&128)&&(typeof Ie.getDerivedStateFromError=="function"||He!==null&&typeof He.componentDidCatch=="function"&&(N1===null||!N1.has(He)))){we.flags|=65536,v&=-v,we.lanes|=v;var Gt=z5(we,j,v);T6(we,Gt);break e}}we=we.return}while(we!==null)}zx(C)}catch(hn){v=hn,Hr===C&&C!==null&&(Hr=C=C.return);continue}break}while(!0)}function kx(){var g=W6.current;return W6.current=a3,g===null?a3:g}function sp(){(ss===0||ss===3||ss===2)&&(ss=4),qr===null||!(p3&268435455)&&!(j6&268435455)||D1(qr,Cs)}function J6(g,v){var C=ri;ri|=2;var L=kx();qr===g&&Cs===v||Qu(g,v);do try{wB();break}catch(G){Ox(g,G)}while(!0);if(l0(),ri=C,W6.current=L,Hr!==null)throw Error(o(261));return qr=null,Cs=0,ss}function wB(){for(;Hr!==null;)Vx(Hr)}function MB(){for(;Hr!==null&&!VA();)Vx(Hr)}function Vx(g){var v=Hx(g.alternate,g,la);g.memoizedProps=g.pendingProps,v===null?zx(g):Hr=v,YA.current=null}function zx(g){var v=g;do{var C=v.alternate;if(g=v.return,v.flags&32768){if(C=Nl(C,v),C!==null){C.flags&=32767,Hr=C;return}if(g!==null)g.flags|=32768,g.subtreeFlags=0,g.deletions=null;else{ss=6,Hr=null;return}}else if(C=q6(C,v,la),C!==null){Hr=C;return}if(v=v.sibling,v!==null){Hr=v;return}Hr=v=g}while(v!==null);ss===0&&(ss=5)}function Yu(g,v){var C=vi,L=Ir.transition;try{Ir.transition=null,vi=1,EB(g,v,C)}finally{Ir.transition=L,vi=C}return null}function EB(g,v,C){do Ku();while(I1!==null);if(ri&6)throw Error(o(327));var L=g.finishedWork,G=g.finishedLanes;if(L===null)return null;if(g.finishedWork=null,g.finishedLanes=0,L===g.current)throw Error(o(177));g.callbackNode=null,g.callbackPriority=0;var j=L.lanes|L.childLanes;if(kA(g,j),g===qr&&(Hr=qr=null,Cs=0),!(L.subtreeFlags&2064)&&!(L.flags&2064)||X6||(X6=!0,Wx(Pu,function(){return Ku(),null})),j=(L.flags&15990)!==0,L.subtreeFlags&15990||j){j=Ir.transition,Ir.transition=null;var fe=vi;vi=1;var we=ri;ri|=4,YA.current=null,S(g,L),_e(g,L),ye(g.containerInfo),g.current=L,gt(L),zA(),ri=we,vi=fe,Ir.transition=j}else g.current=L;if(X6&&(X6=!1,I1=g,Q6=G),j=g.pendingLanes,j===0&&(N1=null),x6(L.stateNode),Io(g,Or()),v!==null)for(C=g.onRecoverableError,L=0;L<v.length;L++)C(v[L]);if($6)throw $6=!1,g=ep,ep=null,g;return Q6&1&&g.tag!==0&&Ku(),j=g.pendingLanes,j&1?g===tp?Q5++:(Q5=0,tp=g):Q5=0,Ji(),null}function Ku(){if(I1!==null){var g=g5(Q6),v=Ir.transition,C=vi;try{if(Ir.transition=null,vi=16>g?16:g,I1===null)var L=!1;else{if(g=I1,I1=null,Q6=0,ri&6)throw Error(o(331));var G=ri;for(ri|=4,h=g.current;h!==null;){var j=h,fe=j.child;if(h.flags&16){var we=j.deletions;if(we!==null){for(var Ye=0;Ye<we.length;Ye++){var Mt=we[Ye];for(h=Mt;h!==null;){var tn=h;switch(tn.tag){case 0:case 11:case 15:E(8,tn,j)}var Kn=tn.child;if(Kn!==null)Kn.return=tn,h=Kn;else for(;h!==null;){tn=h;var En=tn.sibling,Qi=tn.return;if(te(tn),tn===Mt){h=null;break}if(En!==null){En.return=Qi,h=En;break}h=Qi}}}var An=j.alternate;if(An!==null){var Ws=An.child;if(Ws!==null){An.child=null;do{var Fa=Ws.sibling;Ws.sibling=null,Ws=Fa}while(Ws!==null)}}h=j}}if(j.subtreeFlags&2064&&fe!==null)fe.return=j,h=fe;else e:for(;h!==null;){if(j=h,j.flags&2048)switch(j.tag){case 0:case 11:case 15:E(9,j,j.return)}var ke=j.sibling;if(ke!==null){ke.return=j.return,h=ke;break e}h=j.return}}var Ie=g.current;for(h=Ie;h!==null;){fe=h;var He=fe.child;if(fe.subtreeFlags&2064&&He!==null)He.return=fe,h=He;else e:for(fe=Ie;h!==null;){if(we=h,we.flags&2048)try{switch(we.tag){case 0:case 11:case 15:R(9,we)}}catch(hn){Lo(we,we.return,hn)}if(we===fe){h=null;break e}var Gt=we.sibling;if(Gt!==null){Gt.return=we.return,h=Gt;break e}h=we.return}}if(ri=G,Ji(),na&&typeof na.onPostCommitFiberRoot=="function")try{na.onPostCommitFiberRoot(Gc,g)}catch{}L=!0}return L}finally{vi=C,Ir.transition=v}}return!1}function Gx(g,v,C){v=k5(C,v),v=z6(g,v,1),h0(g,v),v=lo(),g=Z6(g,1),g!==null&&(g1(g,1,v),Io(g,v))}function Lo(g,v,C){if(g.tag===3)Gx(g,g,C);else for(;v!==null;){if(v.tag===3){Gx(v,g,C);break}else if(v.tag===1){var L=v.stateNode;if(typeof v.type.getDerivedStateFromError=="function"||typeof L.componentDidCatch=="function"&&(N1===null||!N1.has(L))){g=k5(C,g),g=z5(v,g,1),h0(v,g),g=lo(),v=Z6(v,1),v!==null&&(g1(v,1,g),Io(v,g));break}}v=v.return}}function RB(g,v,C){var L=g.pingCache;L!==null&&L.delete(v),v=lo(),g.pingedLanes|=g.suspendedLanes&C,qr===g&&(Cs&C)===C&&(ss===4||ss===3&&(Cs&130023424)===Cs&&500>Or()-ZA?Qu(g,0):KA|=C),Io(g,v)}function qx(g,v){v===0&&(g.mode&1?(v=Mo,Mo<<=1,!(Mo&130023424)&&(Mo=4194304)):v=1);var C=lo();g=Z6(g,v),g!==null&&(g1(g,v,C),Io(g,C))}function CB(g){var v=g.memoizedState,C=0;v!==null&&(C=v.retryLane),qx(g,C)}function PB(g,v){var C=0;switch(g.tag){case 13:var L=g.stateNode,G=g.memoizedState;G!==null&&(C=G.retryLane);break;case 19:L=g.stateNode;break;default:throw Error(o(314))}L!==null&&L.delete(v),qx(g,C)}var Hx;Hx=function(g,v,C){if(g!==null)if(g.memoizedProps!==v.pendingProps||$.current)oo=!0;else{if(!(g.lanes&C)&&!(v.flags&128))return oo=!1,P1(g,v,C);oo=!!(g.flags&131072)}else oo=!1,wn&&v.flags&1048576&&T5(v,x1,v.index);switch(v.lanes=0,v.tag){case 2:var L=v.type;g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps;var G=Mi(v,Qn.current);Eo(v,C),G=e3(null,v,L,g,G,C);var j=Gu();return v.flags|=1,typeof G=="object"&&G!==null&&typeof G.render=="function"&&G.$$typeof===void 0?(v.tag=1,v.memoizedState=null,v.updateQueue=null,Nn(L)?(j=!0,ta(v)):j=!1,v.memoizedState=G.state!==null&&G.state!==void 0?G.state:null,Iu(v),G.updater=Yc,v.stateNode=G,G._reactInternals=v,S5(v,L,g,C),v=c3(null,v,L,!0,j,C)):(v.tag=0,wn&&j&&Du(v),Rs(null,v,G,C),v=v.child),v;case 16:L=v.elementType;e:{switch(g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),g=v.pendingProps,G=L._init,L=G(L._payload),v.type=L,G=v.tag=IB(L),g=ia(L,g),G){case 0:v=ln(null,v,L,g,C);break e;case 1:v=Gr(null,v,L,g,C);break e;case 11:v=H6(null,v,L,g,C);break e;case 14:v=p0(null,v,L,ia(L.type,g),C);break e}throw Error(o(306,L,""))}return v;case 0:return L=v.type,G=v.pendingProps,G=v.elementType===L?G:ia(L,G),ln(g,v,L,G,C);case 1:return L=v.type,G=v.pendingProps,G=v.elementType===L?G:ia(L,G),Gr(g,v,L,G,C);case 3:e:{if(h3(v),g===null)throw Error(o(387));L=v.pendingProps,j=v.memoizedState,G=j.element,S6(g,v),Qc(v,L,null,C);var fe=v.memoizedState;if(L=fe.element,Ae&&j.isDehydrated)if(j={element:L,isDehydrated:!1,cache:fe.cache,transitions:fe.transitions},v.updateQueue.baseState=j,v.memoizedState=j,v.flags&256){G=Error(o(423)),v=m0(g,v,L,C,G);break e}else if(L!==G){G=Error(o(424)),v=m0(g,v,L,C,G);break e}else for(Ae&&(ns=fi(v.stateNode.containerInfo),Es=v,wn=!0,Ro=null,Fu=!1),C=Zc(v,null,L,C),v.child=C;C;)C.flags=C.flags&-3|4096,C=C.sibling;else{if(V0(),L===G){v=Po(g,v,C);break e}Rs(g,v,L,C)}v=v.child}return v;case 5:return I6(v),g===null&&E5(v),L=v.type,G=v.pendingProps,j=g!==null?g.memoizedProps:null,fe=G.children,Ne(L,G)?fe=null:j!==null&&Ne(L,j)&&(v.flags|=32),ao(g,v),Rs(g,v,fe,C),v.child;case 6:return g===null&&E5(v),null;case 13:return Pl(g,v,C);case 4:return R5(v,v.stateNode.containerInfo),L=v.pendingProps,g===null?v.child=z0(v,null,L,C):Rs(g,v,L,C),v.child;case 11:return L=v.type,G=v.pendingProps,G=v.elementType===L?G:ia(L,G),H6(g,v,L,G,C);case 7:return Rs(g,v,v.pendingProps,C),v.child;case 8:return Rs(g,v,v.pendingProps.children,C),v.child;case 12:return Rs(g,v,v.pendingProps.children,C),v.child;case 10:e:{if(L=v.type._context,G=v.pendingProps,j=v.memoizedProps,fe=G.value,x5(v,L,fe),j!==null)if(Ma(j.value,fe)){if(j.children===G.children&&!$.current){v=Po(g,v,C);break e}}else for(j=v.child,j!==null&&(j.return=v);j!==null;){var we=j.dependencies;if(we!==null){fe=j.child;for(var Ye=we.firstContext;Ye!==null;){if(Ye.context===L){if(j.tag===1){Ye=c0(-1,C&-C),Ye.tag=2;var Mt=j.updateQueue;if(Mt!==null){Mt=Mt.shared;var tn=Mt.pending;tn===null?Ye.next=Ye:(Ye.next=tn.next,tn.next=Ye),Mt.pending=Ye}}j.lanes|=C,Ye=j.alternate,Ye!==null&&(Ye.lanes|=C),v1(j.return,C,v),we.lanes|=C;break}Ye=Ye.next}}else if(j.tag===10)fe=j.type===v.type?null:j.child;else if(j.tag===18){if(fe=j.return,fe===null)throw Error(o(341));fe.lanes|=C,we=fe.alternate,we!==null&&(we.lanes|=C),v1(fe,C,v),fe=j.sibling}else fe=j.child;if(fe!==null)fe.return=j;else for(fe=j;fe!==null;){if(fe===v){fe=null;break}if(j=fe.sibling,j!==null){j.return=fe.return,fe=j;break}fe=fe.return}j=fe}Rs(g,v,G.children,C),v=v.child}return v;case 9:return G=v.type,L=v.pendingProps.children,Eo(v,C),G=Pr(G),L=L(G),v.flags|=1,Rs(g,v,L,C),v.child;case 14:return L=v.type,G=ia(L,v.pendingProps),G=ia(L.type,G),p0(g,v,L,G,C);case 15:return aa(g,v,v.type,v.pendingProps,C);case 17:return L=v.type,G=v.pendingProps,G=v.elementType===L?G:ia(L,G),g!==null&&(g.alternate=null,v.alternate=null,v.flags|=2),v.tag=1,Nn(L)?(g=!0,ta(v)):g=!1,Eo(v,C),Lu(v,L,G),S5(v,L,G,C),c3(null,v,L,!0,g,C);case 19:return $u(g,v,C);case 22:return xn(g,v,C)}throw Error(o(156,v.tag))};function Wx(g,v){return Cu(g,v)}function NB(g,v,C,L){this.tag=g,this.key=C,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=v,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=L,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Ba(g,v,C,L){return new NB(g,v,C,L)}function op(g){return g=g.prototype,!(!g||!g.isReactComponent)}function IB(g){if(typeof g=="function")return op(g)?1:0;if(g!=null){if(g=g.$$typeof,g===M)return 11;if(g===N)return 14}return 2}function B1(g,v){var C=g.alternate;return C===null?(C=Ba(g.tag,v,g.key,g.mode),C.elementType=g.elementType,C.type=g.type,C.stateNode=g.stateNode,C.alternate=g,g.alternate=C):(C.pendingProps=v,C.type=g.type,C.flags=0,C.subtreeFlags=0,C.deletions=null),C.flags=g.flags&14680064,C.childLanes=g.childLanes,C.lanes=g.lanes,C.child=g.child,C.memoizedProps=g.memoizedProps,C.memoizedState=g.memoizedState,C.updateQueue=g.updateQueue,v=g.dependencies,C.dependencies=v===null?null:{lanes:v.lanes,firstContext:v.firstContext},C.sibling=g.sibling,C.index=g.index,C.ref=g.ref,C}function e7(g,v,C,L,G,j){var fe=2;if(L=g,typeof g=="function")op(g)&&(fe=1);else if(typeof g=="string")fe=5;else e:switch(g){case c:return Zu(C.children,G,j,v);case A:fe=8,G|=8;break;case m:return g=Ba(12,C,v,G|2),g.elementType=m,g.lanes=j,g;case w:return g=Ba(13,C,v,G),g.elementType=w,g.lanes=j,g;case T:return g=Ba(19,C,v,G),g.elementType=T,g.lanes=j,g;case I:return t7(C,G,j,v);default:if(typeof g=="object"&&g!==null)switch(g.$$typeof){case _:fe=10;break e;case b:fe=9;break e;case M:fe=11;break e;case N:fe=14;break e;case P:fe=16,L=null;break e}throw Error(o(130,g==null?g:typeof g,""))}return v=Ba(fe,C,v,G),v.elementType=g,v.type=L,v.lanes=j,v}function Zu(g,v,C,L){return g=Ba(7,g,L,v),g.lanes=C,g}function t7(g,v,C,L){return g=Ba(22,g,L,v),g.elementType=I,g.lanes=C,g.stateNode={},g}function ap(g,v,C){return g=Ba(6,g,null,v),g.lanes=C,g}function lp(g,v,C){return v=Ba(4,g.children!==null?g.children:[],g.key,v),v.lanes=C,v.stateNode={containerInfo:g.containerInfo,pendingChildren:null,implementation:g.implementation},v}function LB(g,v,C,L,G){this.tag=v,this.containerInfo=g,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=Rt,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Ru(0),this.expirationTimes=Ru(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Ru(0),this.identifierPrefix=L,this.onRecoverableError=G,Ae&&(this.mutableSourceEagerHydrationData=null)}function jx(g,v,C,L,G,j,fe,we,Ye){return g=new LB(g,v,C,we,Ye),v===1?(v=1,j===!0&&(v|=8)):v=0,j=Ba(3,null,null,v),g.current=j,j.stateNode=g,j.memoizedState={element:L,isDehydrated:C,cache:null,transitions:null},Iu(j),g}function $x(g){if(!g)return xi;g=g._reactInternals;e:{if(U(g)!==g||g.tag!==1)throw Error(o(170));var v=g;do{switch(v.tag){case 3:v=v.stateNode.context;break e;case 1:if(Nn(v.type)){v=v.stateNode.__reactInternalMemoizedMergedChildContext;break e}}v=v.return}while(v!==null);throw Error(o(171))}if(g.tag===1){var C=g.type;if(Nn(C))return ds(g,C,v)}return v}function Xx(g){var v=g._reactInternals;if(v===void 0)throw typeof g.render=="function"?Error(o(188)):(g=Object.keys(g).join(","),Error(o(268,g)));return g=Q(v),g===null?null:g.stateNode}function Qx(g,v){if(g=g.memoizedState,g!==null&&g.dehydrated!==null){var C=g.retryLane;g.retryLane=C!==0&&C<v?C:v}}function up(g,v){Qx(g,v),(g=g.alternate)&&Qx(g,v)}function DB(g){return g=Q(g),g===null?null:g.stateNode}function BB(){return null}return t.attemptContinuousHydration=function(g){if(g.tag===13){var v=lo();Da(g,134217728,v),up(g,134217728)}},t.attemptHydrationAtCurrentPriority=function(g){if(g.tag===13){var v=lo(),C=L1(g);Da(g,C,v),up(g,C)}},t.attemptSynchronousHydration=function(g){switch(g.tag){case 3:var v=g.stateNode;if(v.current.memoizedState.isDehydrated){var C=m1(v.pendingLanes);C!==0&&(m5(v,C|1),Io(v,Or()),!(ri&6)&&(m3(),Ji()))}break;case 13:var L=lo();Ux(function(){return Da(g,1,L)}),up(g,1)}},t.batchedUpdates=function(g,v){var C=ri;ri|=1;try{return g(v)}finally{ri=C,ri===0&&(m3(),qc&&Ji())}},t.createComponentSelector=function(g){return{$$typeof:$n,value:g}},t.createContainer=function(g,v,C,L,G,j,fe){return jx(g,v,!1,null,C,L,G,j,fe)},t.createHasPseudoClassSelector=function(g){return{$$typeof:_n,value:g}},t.createHydrationContainer=function(g,v,C,L,G,j,fe,we,Ye){return g=jx(C,L,!0,g,G,j,fe,we,Ye),g.context=$x(null),C=g.current,L=lo(),G=L1(C),j=c0(L,G),j.callback=v??null,h0(C,j),g.current.lanes=G,g1(g,G,L),Io(g,L),g},t.createPortal=function(g,v,C){var L=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:u,key:L==null?null:""+L,children:g,containerInfo:v,implementation:C}},t.createRoleSelector=function(g){return{$$typeof:Xt,value:g}},t.createTestNameSelector=function(g){return{$$typeof:At,value:g}},t.createTextSelector=function(g){return{$$typeof:Bn,value:g}},t.deferredUpdates=function(g){var v=vi,C=Ir.transition;try{return Ir.transition=null,vi=16,g()}finally{vi=v,Ir.transition=C}},t.discreteUpdates=function(g,v,C,L,G){var j=vi,fe=Ir.transition;try{return Ir.transition=null,vi=1,g(v,C,L,G)}finally{vi=j,Ir.transition=fe,ri===0&&m3()}},t.findAllNodes=QA,t.findBoundingRects=function(g,v){if(!Tt)throw Error(o(363));v=QA(g,v),g=[];for(var C=0;C<v.length;C++)g.push(bn(v[C]));for(v=g.length-1;0<v;v--){C=g[v];for(var L=C.x,G=L+C.width,j=C.y,fe=j+C.height,we=v-1;0<=we;we--)if(v!==we){var Ye=g[we],Mt=Ye.x,tn=Mt+Ye.width,Kn=Ye.y,En=Kn+Ye.height;if(L>=Mt&&j>=Kn&&G<=tn&&fe<=En){g.splice(v,1);break}else if(L!==Mt||C.width!==Ye.width||En<j||Kn>fe){if(!(j!==Kn||C.height!==Ye.height||tn<L||Mt>G)){Mt>L&&(Ye.width+=Mt-L,Ye.x=L),tn<G&&(Ye.width=G-Mt),g.splice(v,1);break}}else{Kn>j&&(Ye.height+=Kn-j,Ye.y=j),En<fe&&(Ye.height=fe-Kn),g.splice(v,1);break}}}return g},t.findHostInstance=Xx,t.findHostInstanceWithNoPortals=function(g){return g=H(g),g=g!==null?ne(g):null,g===null?null:g.stateNode},t.findHostInstanceWithWarning=function(g){return Xx(g)},t.flushControlled=function(g){var v=ri;ri|=1;var C=Ir.transition,L=vi;try{Ir.transition=null,vi=1,g()}finally{vi=L,Ir.transition=C,ri=v,ri===0&&(m3(),Ji())}},t.flushPassiveEffects=Ku,t.flushSync=Ux,t.focusWithin=function(g,v){if(!Tt)throw Error(o(363));for(g=Ln(g),v=j5(g,v),v=Array.from(v),g=0;g<v.length;){var C=v[g++];if(!Z(C)){if(C.tag===5&&ze(C.stateNode))return!0;for(C=C.child;C!==null;)v.push(C),C=C.sibling}}return!1},t.getCurrentUpdatePriority=function(){return vi},t.getFindAllNodesFailureDescription=function(g,v){if(!Tt)throw Error(o(363));var C=0,L=[];g=[Ln(g),0];for(var G=0;G<g.length;){var j=g[G++],fe=g[G++],we=v[fe];if((j.tag!==5||!Z(j))&&(bi(j,we)&&(L.push(rs(we)),fe++,fe>C&&(C=fe)),fe<v.length))for(j=j.child;j!==null;)g.push(j,fe),j=j.sibling}if(C<v.length){for(g=[];C<v.length;C++)g.push(rs(v[C]));return`findAllNodes was able to match part of the selector:
  `+(L.join(" > ")+`

No matching component was found for:
  `)+g.join(" > ")}return null},t.getPublicRootInstance=function(g){if(g=g.current,!g.child)return null;switch(g.child.tag){case 5:return se(g.child.stateNode);default:return g.child.stateNode}},t.injectIntoDevTools=function(g){if(g={bundleType:g.bundleType,version:g.version,rendererPackageName:g.rendererPackageName,rendererConfig:g.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:a.ReactCurrentDispatcher,findHostInstanceByFiber:DB,findFiberByHostInstance:g.findFiberByHostInstance||BB,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.0.0-fc46dba67-20220329"},typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u")g=!1;else{var v=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(v.isDisabled||!v.supportsFiber)g=!0;else{try{Gc=v.inject(g),na=v}catch{}g=!!v.checkDCE}}return g},t.isAlreadyRendering=function(){return!1},t.observeVisibleRects=function(g,v,C,L){if(!Tt)throw Error(o(363));g=QA(g,v);var G=ft(g,C,L).disconnect;return{disconnect:function(){G()}}},t.registerMutableSourceForHydration=function(g,v){var C=v._getVersion;C=C(v._source),g.mutableSourceEagerHydrationData==null?g.mutableSourceEagerHydrationData=[v,C]:g.mutableSourceEagerHydrationData.push(v,C)},t.runWithPriority=function(g,v){var C=vi;try{return vi=g,v()}finally{vi=C}},t.shouldError=function(){return null},t.shouldSuspend=function(){return!1},t.updateContainer=function(g,v,C,L){var G=v.current,j=lo(),fe=L1(G);return C=$x(C),v.context===null?v.context=C:v.pendingContext=C,v=c0(j,fe),v.payload={element:g},L=L===void 0?null:L,L!==null&&(v.callback=L),h0(G,v),g=Da(G,fe,j),g!==null&&Xc(g,G,fe),fe},t};iB.exports=K0e;var Z0e=iB.exports;const J0e=$M(Z0e),Lx={},oB=i=>void Object.assign(Lx,i);function ele(i,e){function t(c,{args:A=[],attach:m,..._},b){let M=`${c[0].toUpperCase()}${c.slice(1)}`,w;if(c==="primitive"){if(_.object===void 0)throw new Error("R3F: Primitives without 'object' are invalid!");const T=_.object;w=s4(T,{type:c,root:b,attach:m,primitive:!0})}else{const T=Lx[M];if(!T)throw new Error(`R3F: ${M} is not part of the THREE namespace! Did you forget to extend? See: https://docs.pmnd.rs/react-three-fiber/api/objects#using-3rd-party-objects-declaratively`);if(!Array.isArray(A))throw new Error("R3F: The args prop must be an array!");w=s4(new T(...A),{type:c,root:b,attach:m,memoizedProps:{args:A}})}return w.__r3f.attach===void 0&&(w.isBufferGeometry?w.__r3f.attach="geometry":w.isMaterial&&(w.__r3f.attach="material")),M!=="inject"&&og(w,_),w}function n(c,A){let m=!1;if(A){var _,b;(_=A.__r3f)!=null&&_.attach?sg(c,A,A.__r3f.attach):A.isObject3D&&c.isObject3D&&(c.add(A),m=!0),m||(b=c.__r3f)==null||b.objects.push(A),A.__r3f||s4(A,{}),A.__r3f.parent=c,zy(A),o4(A)}}function r(c,A,m){let _=!1;if(A){var b,M;if((b=A.__r3f)!=null&&b.attach)sg(c,A,A.__r3f.attach);else if(A.isObject3D&&c.isObject3D){A.parent=c,A.dispatchEvent({type:"added"}),c.dispatchEvent({type:"childadded",child:A});const w=c.children.filter(N=>N!==A),T=w.indexOf(m);c.children=[...w.slice(0,T),A,...w.slice(T)],_=!0}_||(M=c.__r3f)==null||M.objects.push(A),A.__r3f||s4(A,{}),A.__r3f.parent=c,zy(A),o4(A)}}function s(c,A,m=!1){c&&[...c].forEach(_=>o(A,_,m))}function o(c,A,m){if(A){var _,b,M;if(A.__r3f&&(A.__r3f.parent=null),(_=c.__r3f)!=null&&_.objects&&(c.__r3f.objects=c.__r3f.objects.filter(I=>I!==A)),(b=A.__r3f)!=null&&b.attach)DM(c,A,A.__r3f.attach);else if(A.isObject3D&&c.isObject3D){var w;c.remove(A),(w=A.__r3f)!=null&&w.root&&ale(nd(A),A)}const N=(M=A.__r3f)==null?void 0:M.primitive,P=!N&&(m===void 0?A.dispose!==null:m);if(!N){var T;s((T=A.__r3f)==null?void 0:T.objects,A,P),s(A.children,A,P)}if(delete A.__r3f,P&&A.dispose&&A.type!=="Scene"){const I=()=>{try{A.dispose()}catch{}};typeof IS_REACT_ACT_ENVIRONMENT>"u"?ky.unstable_scheduleCallback(ky.unstable_IdlePriority,I):I()}o4(c)}}function a(c,A,m,_){var b;const M=(b=c.__r3f)==null?void 0:b.parent;if(!M)return;const w=t(A,m,c.__r3f.root);if(c.children){for(const T of c.children)T.__r3f&&n(w,T);c.children=c.children.filter(T=>!T.__r3f)}c.__r3f.objects.forEach(T=>n(w,T)),c.__r3f.objects=[],c.__r3f.autoRemovedBeforeAppend||o(M,c),w.parent&&(w.__r3f.autoRemovedBeforeAppend=!0),n(M,w),w.raycast&&w.__r3f.eventCount&&nd(w).getState().internal.interaction.push(w),[_,_.alternate].forEach(T=>{T!==null&&(T.stateNode=w,T.ref&&(typeof T.ref=="function"?T.ref(w):T.ref.current=w))})}const l=()=>{};return{reconciler:J0e({createInstance:t,removeChild:o,appendChild:n,appendInitialChild:n,insertBefore:r,supportsMutation:!0,isPrimaryRenderer:!1,supportsPersistence:!1,supportsHydration:!1,noTimeout:-1,appendChildToContainer:(c,A)=>{if(!A)return;const m=c.getState().scene;m.__r3f&&(m.__r3f.root=c,n(m,A))},removeChildFromContainer:(c,A)=>{A&&o(c.getState().scene,A)},insertInContainerBefore:(c,A,m)=>{if(!A||!m)return;const _=c.getState().scene;_.__r3f&&r(_,A,m)},getRootHostContext:()=>null,getChildHostContext:c=>c,finalizeInitialChildren(c){var A;return!!((A=c==null?void 0:c.__r3f)!=null?A:{}).handlers},prepareUpdate(c,A,m,_){var b;if(((b=c==null?void 0:c.__r3f)!=null?b:{}).primitive&&_.object&&_.object!==c)return[!0];{const{args:w=[],children:T,...N}=_,{args:P=[],children:I,...B}=m;if(!Array.isArray(w))throw new Error("R3F: the args prop must be an array!");if(w.some((O,V)=>O!==P[V]))return[!0];const F=dB(c,N,B,!0);return F.changes.length?[!1,F]:null}},commitUpdate(c,[A,m],_,b,M,w){A?a(c,_,M,w):og(c,m)},commitMount(c,A,m,_){var b;const M=(b=c.__r3f)!=null?b:{};c.raycast&&M.handlers&&M.eventCount&&nd(c).getState().internal.interaction.push(c)},getPublicInstance:c=>c,prepareForCommit:()=>null,preparePortalMount:c=>s4(c.getState().scene),resetAfterCommit:()=>{},shouldSetTextContent:()=>!1,clearContainer:()=>!1,hideInstance(c){var A;const{attach:m,parent:_}=(A=c.__r3f)!=null?A:{};m&&_&&DM(_,c,m),c.isObject3D&&(c.visible=!1),o4(c)},unhideInstance(c,A){var m;const{attach:_,parent:b}=(m=c.__r3f)!=null?m:{};_&&b&&sg(b,c,_),(c.isObject3D&&A.visible==null||A.visible)&&(c.visible=!0),o4(c)},createTextInstance:l,hideTextInstance:l,unhideTextInstance:l,getCurrentEventPriority:()=>e?e():g4.DefaultEventPriority,beforeActiveInstanceBlur:()=>{},afterActiveInstanceBlur:()=>{},detachDeletedInstance:()=>{},now:typeof performance<"u"&&rr.fun(performance.now)?performance.now:rr.fun(Date.now)?Date.now:()=>0,scheduleTimeout:rr.fun(setTimeout)?setTimeout:void 0,cancelTimeout:rr.fun(clearTimeout)?clearTimeout:void 0}),applyProps:og}}var PM,NM;const rg=i=>"colorSpace"in i||"outputColorSpace"in i,aB=()=>{var i;return(i=Lx.ColorManagement)!=null?i:null},lB=i=>i&&i.isOrthographicCamera,tle=i=>i&&i.hasOwnProperty("current"),_6=typeof window<"u"&&((PM=window.document)!=null&&PM.createElement||((NM=window.navigator)==null?void 0:NM.product)==="ReactNative")?Qt.useLayoutEffect:Qt.useEffect;function uB(i){const e=Qt.useRef(i);return _6(()=>void(e.current=i),[i]),e}function nle({set:i}){return _6(()=>(i(new Promise(()=>null)),()=>i(!1)),[i]),null}class cB extends Qt.Component{constructor(...e){super(...e),this.state={error:!1}}componentDidCatch(e){this.props.set(e)}render(){return this.state.error?null:this.props.children}}cB.getDerivedStateFromError=()=>({error:!0});const hB="__default",IM=new Map,ile=i=>i&&!!i.memoized&&!!i.changes;function fB(i){var e;const t=typeof window<"u"?(e=window.devicePixelRatio)!=null?e:2:1;return Array.isArray(i)?Math.min(Math.max(i[0],t),i[1]):i}const Ph=i=>{var e;return(e=i.__r3f)==null?void 0:e.root.getState()};function nd(i){let e=i.__r3f.root;for(;e.getState().previousRoot;)e=e.getState().previousRoot;return e}const rr={obj:i=>i===Object(i)&&!rr.arr(i)&&typeof i!="function",fun:i=>typeof i=="function",str:i=>typeof i=="string",num:i=>typeof i=="number",boo:i=>typeof i=="boolean",und:i=>i===void 0,arr:i=>Array.isArray(i),equ(i,e,{arrays:t="shallow",objects:n="reference",strict:r=!0}={}){if(typeof i!=typeof e||!!i!=!!e)return!1;if(rr.str(i)||rr.num(i)||rr.boo(i))return i===e;const s=rr.obj(i);if(s&&n==="reference")return i===e;const o=rr.arr(i);if(o&&t==="reference")return i===e;if((o||s)&&i===e)return!0;let a;for(a in i)if(!(a in e))return!1;if(s&&t==="shallow"&&n==="shallow"){for(a in r?e:i)if(!rr.equ(i[a],e[a],{strict:r,objects:"reference"}))return!1}else for(a in r?e:i)if(i[a]!==e[a])return!1;if(rr.und(a)){if(o&&i.length===0&&e.length===0||s&&Object.keys(i).length===0&&Object.keys(e).length===0)return!0;if(i!==e)return!1}return!0}};function rle(i){i.dispose&&i.type!=="Scene"&&i.dispose();for(const e in i)e.dispose==null||e.dispose(),delete i[e]}function s4(i,e){const t=i;return t.__r3f={type:"",root:null,previousAttach:null,memoizedProps:{},eventCount:0,handlers:{},objects:[],parent:null,...e},i}function Vy(i,e){let t=i;if(e.includes("-")){const n=e.split("-"),r=n.pop();return t=n.reduce((s,o)=>s[o],i),{target:t,key:r}}else return{target:t,key:e}}const LM=/-\d+$/;function sg(i,e,t){if(rr.str(t)){if(LM.test(t)){const s=t.replace(LM,""),{target:o,key:a}=Vy(i,s);Array.isArray(o[a])||(o[a]=[])}const{target:n,key:r}=Vy(i,t);e.__r3f.previousAttach=n[r],n[r]=e}else e.__r3f.previousAttach=t(i,e)}function DM(i,e,t){var n,r;if(rr.str(t)){const{target:s,key:o}=Vy(i,t),a=e.__r3f.previousAttach;a===void 0?delete s[o]:s[o]=a}else(n=e.__r3f)==null||n.previousAttach==null||n.previousAttach(i,e);(r=e.__r3f)==null||delete r.previousAttach}function dB(i,{children:e,key:t,ref:n,...r},{children:s,key:o,ref:a,...l}={},u=!1){const c=i.__r3f,A=Object.entries(r),m=[];if(u){const b=Object.keys(l);for(let M=0;M<b.length;M++)r.hasOwnProperty(b[M])||A.unshift([b[M],hB+"remove"])}A.forEach(([b,M])=>{var w;if((w=i.__r3f)!=null&&w.primitive&&b==="object"||rr.equ(M,l[b]))return;if(/^on(Pointer|Click|DoubleClick|ContextMenu|Wheel)/.test(b))return m.push([b,M,!0,[]]);let T=[];b.includes("-")&&(T=b.split("-")),m.push([b,M,!1,T]);for(const N in r){const P=r[N];N.startsWith(`${b}-`)&&m.push([N,P,!1,N.split("-")])}});const _={...r};return c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.args&&(_.args=c.memoizedProps.args),c!=null&&c.memoizedProps&&c!=null&&c.memoizedProps.attach&&(_.attach=c.memoizedProps.attach),{memoized:_,changes:m}}function og(i,e){var t;const n=i.__r3f,r=n==null?void 0:n.root,s=r==null||r.getState==null?void 0:r.getState(),{memoized:o,changes:a}=ile(e)?e:dB(i,e),l=n==null?void 0:n.eventCount;i.__r3f&&(i.__r3f.memoizedProps=o);for(let m=0;m<a.length;m++){let[_,b,M,w]=a[m];if(rg(i)){const I="srgb",B="srgb-linear";_==="encoding"?(_="colorSpace",b=b===3001?I:B):_==="outputEncoding"&&(_="outputColorSpace",b=b===3001?I:B)}let T=i,N=T[_];if(w.length&&(N=w.reduce((P,I)=>P[I],i),!(N&&N.set))){const[P,...I]=w.reverse();T=I.reverse().reduce((B,F)=>B[F],i),_=P}if(b===hB+"remove")if(T.constructor){let P=IM.get(T.constructor);P||(P=new T.constructor,IM.set(T.constructor,P)),b=P[_]}else b=0;if(M&&n)b?n.handlers[_]=b:delete n.handlers[_],n.eventCount=Object.keys(n.handlers).length;else if(N&&N.set&&(N.copy||N instanceof q2)){if(Array.isArray(b))N.fromArray?N.fromArray(b):N.set(...b);else if(N.copy&&b&&b.constructor&&N.constructor===b.constructor)N.copy(b);else if(b!==void 0){var u;const P=(u=N)==null?void 0:u.isColor;!P&&N.setScalar?N.setScalar(b):N instanceof q2&&b instanceof q2?N.mask=b.mask:N.set(b),!aB()&&s&&!s.linear&&P&&N.convertSRGBToLinear()}}else{var c;if(T[_]=b,(c=T[_])!=null&&c.isTexture&&T[_].format===Zi&&T[_].type===ar&&s){const P=T[_];rg(P)&&rg(s.gl)?P.colorSpace=s.gl.outputColorSpace:P.encoding=s.gl.outputEncoding}}o4(i)}if(n&&n.parent&&i.raycast&&l!==n.eventCount){const m=nd(i).getState().internal,_=m.interaction.indexOf(i);_>-1&&m.interaction.splice(_,1),n.eventCount&&m.interaction.push(i)}return!(a.length===1&&a[0][0]==="onUpdate")&&a.length&&(t=i.__r3f)!=null&&t.parent&&zy(i),i}function o4(i){var e,t;const n=(e=i.__r3f)==null||(t=e.root)==null||t.getState==null?void 0:t.getState();n&&n.internal.frames===0&&n.invalidate()}function zy(i){i.onUpdate==null||i.onUpdate(i)}function sle(i,e){i.manual||(lB(i)?(i.left=e.width/-2,i.right=e.width/2,i.top=e.height/2,i.bottom=e.height/-2):i.aspect=e.width/e.height,i.updateProjectionMatrix(),i.updateMatrixWorld())}function Ff(i){return(i.eventObject||i.object).uuid+"/"+i.index+i.instanceId}function ole(){var i;const e=typeof self<"u"&&self||typeof window<"u"&&window;if(!e)return g4.DefaultEventPriority;switch((i=e.event)==null?void 0:i.type){case"click":case"contextmenu":case"dblclick":case"pointercancel":case"pointerdown":case"pointerup":return g4.DiscreteEventPriority;case"pointermove":case"pointerout":case"pointerover":case"pointerenter":case"pointerleave":case"wheel":return g4.ContinuousEventPriority;default:return g4.DefaultEventPriority}}function AB(i,e,t,n){const r=t.get(e);r&&(t.delete(e),t.size===0&&(i.delete(n),r.target.releasePointerCapture(n)))}function ale(i,e){const{internal:t}=i.getState();t.interaction=t.interaction.filter(n=>n!==e),t.initialHits=t.initialHits.filter(n=>n!==e),t.hovered.forEach((n,r)=>{(n.eventObject===e||n.object===e)&&t.hovered.delete(r)}),t.capturedMap.forEach((n,r)=>{AB(t.capturedMap,e,n,r)})}function lle(i){function e(l){const{internal:u}=i.getState(),c=l.offsetX-u.initialClick[0],A=l.offsetY-u.initialClick[1];return Math.round(Math.sqrt(c*c+A*A))}function t(l){return l.filter(u=>["Move","Over","Enter","Out","Leave"].some(c=>{var A;return(A=u.__r3f)==null?void 0:A.handlers["onPointer"+c]}))}function n(l,u){const c=i.getState(),A=new Set,m=[],_=u?u(c.internal.interaction):c.internal.interaction;for(let T=0;T<_.length;T++){const N=Ph(_[T]);N&&(N.raycaster.camera=void 0)}c.previousRoot||c.events.compute==null||c.events.compute(l,c);function b(T){const N=Ph(T);if(!N||!N.events.enabled||N.raycaster.camera===null)return[];if(N.raycaster.camera===void 0){var P;N.events.compute==null||N.events.compute(l,N,(P=N.previousRoot)==null?void 0:P.getState()),N.raycaster.camera===void 0&&(N.raycaster.camera=null)}return N.raycaster.camera?N.raycaster.intersectObject(T,!0):[]}let M=_.flatMap(b).sort((T,N)=>{const P=Ph(T.object),I=Ph(N.object);return!P||!I?T.distance-N.distance:I.events.priority-P.events.priority||T.distance-N.distance}).filter(T=>{const N=Ff(T);return A.has(N)?!1:(A.add(N),!0)});c.events.filter&&(M=c.events.filter(M,c));for(const T of M){let N=T.object;for(;N;){var w;(w=N.__r3f)!=null&&w.eventCount&&m.push({...T,eventObject:N}),N=N.parent}}if("pointerId"in l&&c.internal.capturedMap.has(l.pointerId))for(let T of c.internal.capturedMap.get(l.pointerId).values())A.has(Ff(T.intersection))||m.push(T.intersection);return m}function r(l,u,c,A){const m=i.getState();if(l.length){const _={stopped:!1};for(const b of l){const M=Ph(b.object)||m,{raycaster:w,pointer:T,camera:N,internal:P}=M,I=new J(T.x,T.y,0).unproject(N),B=z=>{var H,Q;return(H=(Q=P.capturedMap.get(z))==null?void 0:Q.has(b.eventObject))!=null?H:!1},F=z=>{const H={intersection:b,target:u.target};P.capturedMap.has(z)?P.capturedMap.get(z).set(b.eventObject,H):P.capturedMap.set(z,new Map([[b.eventObject,H]])),u.target.setPointerCapture(z)},O=z=>{const H=P.capturedMap.get(z);H&&AB(P.capturedMap,b.eventObject,H,z)};let V={};for(let z in u){let H=u[z];typeof H!="function"&&(V[z]=H)}let U={...b,...V,pointer:T,intersections:l,stopped:_.stopped,delta:c,unprojectedPoint:I,ray:w.ray,camera:N,stopPropagation(){const z="pointerId"in u&&P.capturedMap.get(u.pointerId);if((!z||z.has(b.eventObject))&&(U.stopped=_.stopped=!0,P.hovered.size&&Array.from(P.hovered.values()).find(H=>H.eventObject===b.eventObject))){const H=l.slice(0,l.indexOf(b));s([...H,b])}},target:{hasPointerCapture:B,setPointerCapture:F,releasePointerCapture:O},currentTarget:{hasPointerCapture:B,setPointerCapture:F,releasePointerCapture:O},nativeEvent:u};if(A(U),_.stopped===!0)break}}return l}function s(l){const{internal:u}=i.getState();for(const c of u.hovered.values())if(!l.length||!l.find(A=>A.object===c.object&&A.index===c.index&&A.instanceId===c.instanceId)){const m=c.eventObject.__r3f,_=m==null?void 0:m.handlers;if(u.hovered.delete(Ff(c)),m!=null&&m.eventCount){const b={...c,intersections:l};_.onPointerOut==null||_.onPointerOut(b),_.onPointerLeave==null||_.onPointerLeave(b)}}}function o(l,u){for(let c=0;c<u.length;c++){const A=u[c].__r3f;A==null||A.handlers.onPointerMissed==null||A.handlers.onPointerMissed(l)}}function a(l){switch(l){case"onPointerLeave":case"onPointerCancel":return()=>s([]);case"onLostPointerCapture":return u=>{const{internal:c}=i.getState();"pointerId"in u&&c.capturedMap.has(u.pointerId)&&requestAnimationFrame(()=>{c.capturedMap.has(u.pointerId)&&(c.capturedMap.delete(u.pointerId),s([]))})}}return function(c){const{onPointerMissed:A,internal:m}=i.getState();m.lastEvent.current=c;const _=l==="onPointerMove",b=l==="onClick"||l==="onContextMenu"||l==="onDoubleClick",w=n(c,_?t:void 0),T=b?e(c):0;l==="onPointerDown"&&(m.initialClick=[c.offsetX,c.offsetY],m.initialHits=w.map(P=>P.eventObject)),b&&!w.length&&T<=2&&(o(c,m.interaction),A&&A(c)),_&&s(w);function N(P){const I=P.eventObject,B=I.__r3f,F=B==null?void 0:B.handlers;if(B!=null&&B.eventCount)if(_){if(F.onPointerOver||F.onPointerEnter||F.onPointerOut||F.onPointerLeave){const O=Ff(P),V=m.hovered.get(O);V?V.stopped&&P.stopPropagation():(m.hovered.set(O,P),F.onPointerOver==null||F.onPointerOver(P),F.onPointerEnter==null||F.onPointerEnter(P))}F.onPointerMove==null||F.onPointerMove(P)}else{const O=F[l];O?(!b||m.initialHits.includes(I))&&(o(c,m.interaction.filter(V=>!m.initialHits.includes(V))),O(P)):b&&m.initialHits.includes(I)&&o(c,m.interaction.filter(V=>!m.initialHits.includes(V)))}}r(w,c,T,N)}}return{handlePointer:a}}const pB=i=>!!(i!=null&&i.render),mB=Qt.createContext(null),ule=(i,e)=>{const t=Y0e((a,l)=>{const u=new J,c=new J,A=new J;function m(T=l().camera,N=c,P=l().size){const{width:I,height:B,top:F,left:O}=P,V=I/B;N.isVector3?A.copy(N):A.set(...N);const U=T.getWorldPosition(u).distanceTo(A);if(lB(T))return{width:I/T.zoom,height:B/T.zoom,top:F,left:O,factor:1,distance:U,aspect:V};{const z=T.fov*Math.PI/180,H=2*Math.tan(z/2)*U,Q=H*(I/B);return{width:Q,height:H,top:F,left:O,factor:I/Q,distance:U,aspect:V}}}let _;const b=T=>a(N=>({performance:{...N.performance,current:T}})),M=new Ge;return{set:a,get:l,gl:null,camera:null,raycaster:null,events:{priority:1,enabled:!0,connected:!1},xr:null,scene:null,invalidate:(T=1)=>i(l(),T),advance:(T,N)=>e(T,N,l()),legacy:!1,linear:!1,flat:!1,controls:null,clock:new Gv,pointer:M,mouse:M,frameloop:"always",onPointerMissed:void 0,performance:{current:1,min:.5,max:1,debounce:200,regress:()=>{const T=l();_&&clearTimeout(_),T.performance.current!==T.performance.min&&b(T.performance.min),_=setTimeout(()=>b(l().performance.max),T.performance.debounce)}},size:{width:0,height:0,top:0,left:0,updateStyle:!1},viewport:{initialDpr:0,dpr:0,width:0,height:0,top:0,left:0,aspect:0,distance:0,factor:0,getCurrentViewport:m},setEvents:T=>a(N=>({...N,events:{...N.events,...T}})),setSize:(T,N,P,I,B)=>{const F=l().camera,O={width:T,height:N,top:I||0,left:B||0,updateStyle:P};a(V=>({size:O,viewport:{...V.viewport,...m(F,c,O)}}))},setDpr:T=>a(N=>{const P=fB(T);return{viewport:{...N.viewport,dpr:P,initialDpr:N.viewport.initialDpr||P}}}),setFrameloop:(T="always")=>{const N=l().clock;N.stop(),N.elapsedTime=0,T!=="never"&&(N.start(),N.elapsedTime=0),a(()=>({frameloop:T}))},previousRoot:void 0,internal:{active:!1,priority:0,frames:0,lastEvent:Qt.createRef(),interaction:[],hovered:new Map,subscribers:[],initialClick:[0,0],initialHits:[],capturedMap:new Map,subscribe:(T,N,P)=>{const I=l().internal;return I.priority=I.priority+(N>0?1:0),I.subscribers.push({ref:T,priority:N,store:P}),I.subscribers=I.subscribers.sort((B,F)=>B.priority-F.priority),()=>{const B=l().internal;B!=null&&B.subscribers&&(B.priority=B.priority-(N>0?1:0),B.subscribers=B.subscribers.filter(F=>F.ref!==T))}}}}}),n=t.getState();let r=n.size,s=n.viewport.dpr,o=n.camera;return t.subscribe(()=>{const{camera:a,size:l,viewport:u,gl:c,set:A}=t.getState();if(l.width!==r.width||l.height!==r.height||u.dpr!==s){var m;r=l,s=u.dpr,sle(a,l),c.setPixelRatio(u.dpr);const _=(m=l.updateStyle)!=null?m:typeof HTMLCanvasElement<"u"&&c.domElement instanceof HTMLCanvasElement;c.setSize(l.width,l.height,_)}a!==o&&(o=a,A(_=>({viewport:{..._.viewport,..._.viewport.getCurrentViewport(a)}})))}),t.subscribe(a=>i(a)),t};let Uf,cle=new Set,hle=new Set,fle=new Set;function ag(i,e){if(i.size)for(const{callback:t}of i.values())t(e)}function Nh(i,e){switch(i){case"before":return ag(cle,e);case"after":return ag(hle,e);case"tail":return ag(fle,e)}}let lg,ug;function cg(i,e,t){let n=e.clock.getDelta();for(e.frameloop==="never"&&typeof i=="number"&&(n=i-e.clock.elapsedTime,e.clock.oldTime=e.clock.elapsedTime,e.clock.elapsedTime=i),lg=e.internal.subscribers,Uf=0;Uf<lg.length;Uf++)ug=lg[Uf],ug.ref.current(ug.store.getState(),n,t);return!e.internal.priority&&e.gl.render&&e.gl.render(e.scene,e.camera),e.internal.frames=Math.max(0,e.internal.frames-1),e.frameloop==="always"?1:e.internal.frames}function dle(i){let e=!1,t=!1,n,r,s;function o(u){r=requestAnimationFrame(o),e=!0,n=0,Nh("before",u),t=!0;for(const A of i.values()){var c;s=A.store.getState(),s.internal.active&&(s.frameloop==="always"||s.internal.frames>0)&&!((c=s.gl.xr)!=null&&c.isPresenting)&&(n+=cg(u,s))}if(t=!1,Nh("after",u),n===0)return Nh("tail",u),e=!1,cancelAnimationFrame(r)}function a(u,c=1){var A;if(!u)return i.forEach(m=>a(m.store.getState(),c));(A=u.gl.xr)!=null&&A.isPresenting||!u.internal.active||u.frameloop==="never"||(c>1?u.internal.frames=Math.min(60,u.internal.frames+c):t?u.internal.frames=2:u.internal.frames=1,e||(e=!0,requestAnimationFrame(o)))}function l(u,c=!0,A,m){if(c&&Nh("before",u),A)cg(u,A,m);else for(const _ of i.values())cg(u,_.store.getState());c&&Nh("after",u)}return{loop:o,invalidate:a,advance:l}}function gB(){const i=Qt.useContext(mB);if(!i)throw new Error("R3F: Hooks can only be used within the Canvas component!");return i}function kl(i=t=>t,e){return gB()(i,e)}function Ale(i,e=0){const t=gB(),n=t.getState().internal.subscribe,r=uB(i);return _6(()=>n(r,e,t),[e,n,t]),null}const s5=new Map,{invalidate:BM,advance:FM}=dle(s5),{reconciler:a9,applyProps:t4}=ele(s5,ole),n4={objects:"shallow",strict:!1},ple=(i,e)=>{const t=typeof i=="function"?i(e):i;return pB(t)?t:new dR({powerPreference:"high-performance",canvas:e,antialias:!0,alpha:!0,...i})};function mle(i,e){const t=typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement;if(e){const{width:n,height:r,top:s,left:o,updateStyle:a=t}=e;return{width:n,height:r,top:s,left:o,updateStyle:a}}else if(typeof HTMLCanvasElement<"u"&&i instanceof HTMLCanvasElement&&i.parentElement){const{width:n,height:r,top:s,left:o}=i.parentElement.getBoundingClientRect();return{width:n,height:r,top:s,left:o,updateStyle:t}}else if(typeof OffscreenCanvas<"u"&&i instanceof OffscreenCanvas)return{width:i.width,height:i.height,top:0,left:0,updateStyle:t};return{width:0,height:0,top:0,left:0}}function gle(i){const e=s5.get(i),t=e==null?void 0:e.fiber,n=e==null?void 0:e.store;e&&console.warn("R3F.createRoot should only be called once!");const r=typeof reportError=="function"?reportError:console.error,s=n||ule(BM,FM),o=t||a9.createContainer(s,g4.ConcurrentRoot,null,!1,null,"",r,null);e||s5.set(i,{fiber:o,store:s});let a,l=!1,u;return{configure(c={}){let{gl:A,size:m,scene:_,events:b,onCreated:M,shadows:w=!1,linear:T=!1,flat:N=!1,legacy:P=!1,orthographic:I=!1,frameloop:B="always",dpr:F=[1,2],performance:O,raycaster:V,camera:U,onPointerMissed:z}=c,H=s.getState(),Q=H.gl;H.gl||H.set({gl:Q=ple(A,i)});let Y=H.raycaster;Y||H.set({raycaster:Y=new nR});const{params:ne,...ee}=V||{};if(rr.equ(ee,Y,n4)||t4(Y,{...ee}),rr.equ(ne,Y.params,n4)||t4(Y,{params:{...Y.params,...ne}}),!H.camera||H.camera===u&&!rr.equ(u,U,n4)){u=U;const ye=U instanceof yu,Pe=ye?U:I?new rl(0,0,0,0,.1,1e3):new tr(75,0,.1,1e3);ye||(Pe.position.z=5,U&&(t4(Pe,U),("aspect"in U||"left"in U||"right"in U||"bottom"in U||"top"in U)&&(Pe.manual=!0,Pe.updateProjectionMatrix())),!H.camera&&!(U!=null&&U.rotation)&&Pe.lookAt(0,0,0)),H.set({camera:Pe}),Y.camera=Pe}if(!H.scene){let ye;_!=null&&_.isScene?ye=_:(ye=new Rc,_&&t4(ye,_)),H.set({scene:s4(ye)})}if(!H.xr){var se;const ye=(et,Pt)=>{const Ne=s.getState();Ne.frameloop!=="never"&&FM(et,!0,Ne,Pt)},Pe=()=>{const et=s.getState();et.gl.xr.enabled=et.gl.xr.isPresenting,et.gl.xr.setAnimationLoop(et.gl.xr.isPresenting?ye:null),et.gl.xr.isPresenting||BM(et)},Qe={connect(){const et=s.getState().gl;et.xr.addEventListener("sessionstart",Pe),et.xr.addEventListener("sessionend",Pe)},disconnect(){const et=s.getState().gl;et.xr.removeEventListener("sessionstart",Pe),et.xr.removeEventListener("sessionend",Pe)}};typeof((se=Q.xr)==null?void 0:se.addEventListener)=="function"&&Qe.connect(),H.set({xr:Qe})}if(Q.shadowMap){const ye=Q.shadowMap.enabled,Pe=Q.shadowMap.type;if(Q.shadowMap.enabled=!!w,rr.boo(w))Q.shadowMap.type=Wh;else if(rr.str(w)){var pe;const Qe={basic:Hy,percentage:O8,soft:Wh,variance:Ao};Q.shadowMap.type=(pe=Qe[w])!=null?pe:Wh}else rr.obj(w)&&Object.assign(Q.shadowMap,w);(ye!==Q.shadowMap.enabled||Pe!==Q.shadowMap.type)&&(Q.shadowMap.needsUpdate=!0)}const re=aB();re&&("enabled"in re?re.enabled=!P:"legacyMode"in re&&(re.legacyMode=P)),l||t4(Q,{outputEncoding:T?3e3:3001,toneMapping:N?eo:y9}),H.legacy!==P&&H.set(()=>({legacy:P})),H.linear!==T&&H.set(()=>({linear:T})),H.flat!==N&&H.set(()=>({flat:N})),A&&!rr.fun(A)&&!pB(A)&&!rr.equ(A,Q,n4)&&t4(Q,A),b&&!H.events.handlers&&H.set({events:b(s)});const de=mle(i,m);return rr.equ(de,H.size,n4)||H.setSize(de.width,de.height,de.updateStyle,de.top,de.left),F&&H.viewport.dpr!==fB(F)&&H.setDpr(F),H.frameloop!==B&&H.setFrameloop(B),H.onPointerMissed||H.set({onPointerMissed:z}),O&&!rr.equ(O,H.performance,n4)&&H.set(ye=>({performance:{...ye.performance,...O}})),a=M,l=!0,this},render(c){return l||this.configure(),a9.updateContainer(Xr.jsx(yle,{store:s,children:c,onCreated:a,rootElement:i}),o,null,()=>{}),s},unmount(){yB(i)}}}function yle({store:i,children:e,onCreated:t,rootElement:n}){return _6(()=>{const r=i.getState();r.set(s=>({internal:{...s.internal,active:!0}})),t&&t(r),i.getState().events.connected||r.events.connect==null||r.events.connect(n)},[]),Xr.jsx(mB.Provider,{value:i,children:e})}function yB(i,e){const t=s5.get(i),n=t==null?void 0:t.fiber;if(n){const r=t==null?void 0:t.store.getState();r&&(r.internal.active=!1),a9.updateContainer(null,n,null,()=>{r&&setTimeout(()=>{try{var s,o,a,l;r.events.disconnect==null||r.events.disconnect(),(s=r.gl)==null||(o=s.renderLists)==null||o.dispose==null||o.dispose(),(a=r.gl)==null||a.forceContextLoss==null||a.forceContextLoss(),(l=r.gl)!=null&&l.xr&&r.xr.disconnect(),rle(r),s5.delete(i)}catch{}},500)})}}a9.injectIntoDevTools({bundleType:0,rendererPackageName:"@react-three/fiber",version:Qt.version});const hg={onClick:["click",!1],onContextMenu:["contextmenu",!1],onDoubleClick:["dblclick",!1],onWheel:["wheel",!0],onPointerDown:["pointerdown",!0],onPointerUp:["pointerup",!0],onPointerLeave:["pointerleave",!0],onPointerMove:["pointermove",!0],onPointerCancel:["pointercancel",!0],onLostPointerCapture:["lostpointercapture",!0]};function vle(i){const{handlePointer:e}=lle(i);return{priority:1,enabled:!0,compute(t,n,r){n.pointer.set(t.offsetX/n.size.width*2-1,-(t.offsetY/n.size.height)*2+1),n.raycaster.setFromCamera(n.pointer,n.camera)},connected:void 0,handlers:Object.keys(hg).reduce((t,n)=>({...t,[n]:e(n)}),{}),update:()=>{var t;const{events:n,internal:r}=i.getState();(t=r.lastEvent)!=null&&t.current&&n.handlers&&n.handlers.onPointerMove(r.lastEvent.current)},connect:t=>{var n;const{set:r,events:s}=i.getState();s.disconnect==null||s.disconnect(),r(o=>({events:{...o.events,connected:t}})),Object.entries((n=s.handlers)!=null?n:[]).forEach(([o,a])=>{const[l,u]=hg[o];t.addEventListener(l,a,{passive:u})})},disconnect:()=>{const{set:t,events:n}=i.getState();if(n.connected){var r;Object.entries((r=n.handlers)!=null?r:[]).forEach(([s,o])=>{if(n&&n.connected instanceof HTMLElement){const[a]=hg[s];n.connected.removeEventListener(a,o)}}),t(s=>({events:{...s.events,connected:void 0}}))}}}}function UM(i,e){let t;return(...n)=>{window.clearTimeout(t),t=window.setTimeout(()=>i(...n),e)}}function _le({debounce:i,scroll:e,polyfill:t,offsetSize:n}={debounce:0,scroll:!1,offsetSize:!1}){const r=t||(typeof window>"u"?class{}:window.ResizeObserver);if(!r)throw new Error("This browser does not support ResizeObserver out of the box. See: https://github.com/react-spring/react-use-measure/#resize-observer-polyfills");const[s,o]=Qt.useState({left:0,top:0,width:0,height:0,bottom:0,right:0,x:0,y:0}),a=Qt.useRef({element:null,scrollContainers:null,resizeObserver:null,lastBounds:s,orientationHandler:null}),l=i?typeof i=="number"?i:i.scroll:null,u=i?typeof i=="number"?i:i.resize:null,c=Qt.useRef(!1);Qt.useEffect(()=>(c.current=!0,()=>void(c.current=!1)));const[A,m,_]=Qt.useMemo(()=>{const T=()=>{if(!a.current.element)return;const{left:N,top:P,width:I,height:B,bottom:F,right:O,x:V,y:U}=a.current.element.getBoundingClientRect(),z={left:N,top:P,width:I,height:B,bottom:F,right:O,x:V,y:U};a.current.element instanceof HTMLElement&&n&&(z.height=a.current.element.offsetHeight,z.width=a.current.element.offsetWidth),Object.freeze(z),c.current&&!Tle(a.current.lastBounds,z)&&o(a.current.lastBounds=z)};return[T,u?UM(T,u):T,l?UM(T,l):T]},[o,n,l,u]);function b(){a.current.scrollContainers&&(a.current.scrollContainers.forEach(T=>T.removeEventListener("scroll",_,!0)),a.current.scrollContainers=null),a.current.resizeObserver&&(a.current.resizeObserver.disconnect(),a.current.resizeObserver=null),a.current.orientationHandler&&("orientation"in screen&&"removeEventListener"in screen.orientation?screen.orientation.removeEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.removeEventListener("orientationchange",a.current.orientationHandler))}function M(){a.current.element&&(a.current.resizeObserver=new r(_),a.current.resizeObserver.observe(a.current.element),e&&a.current.scrollContainers&&a.current.scrollContainers.forEach(T=>T.addEventListener("scroll",_,{capture:!0,passive:!0})),a.current.orientationHandler=()=>{_()},"orientation"in screen&&"addEventListener"in screen.orientation?screen.orientation.addEventListener("change",a.current.orientationHandler):"onorientationchange"in window&&window.addEventListener("orientationchange",a.current.orientationHandler))}const w=T=>{!T||T===a.current.element||(b(),a.current.element=T,a.current.scrollContainers=vB(T),M())};return ble(_,!!e),xle(m),Qt.useEffect(()=>{b(),M()},[e,_,m]),Qt.useEffect(()=>b,[]),[w,s,A]}function xle(i){Qt.useEffect(()=>{const e=i;return window.addEventListener("resize",e),()=>void window.removeEventListener("resize",e)},[i])}function ble(i,e){Qt.useEffect(()=>{if(e){const t=i;return window.addEventListener("scroll",t,{capture:!0,passive:!0}),()=>void window.removeEventListener("scroll",t,!0)}},[i,e])}function vB(i){const e=[];if(!i||i===document.body)return e;const{overflow:t,overflowX:n,overflowY:r}=window.getComputedStyle(i);return[t,n,r].some(s=>s==="auto"||s==="scroll")&&e.push(i),[...e,...vB(i.parentElement)]}const Sle=["x","y","top","bottom","left","right","width","height"],Tle=(i,e)=>Sle.every(t=>i[t]===e[t]);var wle=Object.defineProperty,Mle=Object.defineProperties,Ele=Object.getOwnPropertyDescriptors,OM=Object.getOwnPropertySymbols,Rle=Object.prototype.hasOwnProperty,Cle=Object.prototype.propertyIsEnumerable,kM=(i,e,t)=>e in i?wle(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,VM=(i,e)=>{for(var t in e||(e={}))Rle.call(e,t)&&kM(i,t,e[t]);if(OM)for(var t of OM(e))Cle.call(e,t)&&kM(i,t,e[t]);return i},Ple=(i,e)=>Mle(i,Ele(e)),zM,GM;typeof window<"u"&&((zM=window.document)!=null&&zM.createElement||((GM=window.navigator)==null?void 0:GM.product)==="ReactNative")?Qt.useLayoutEffect:Qt.useEffect;function _B(i,e,t){if(!i)return;if(t(i)===!0)return i;let n=i.child;for(;n;){const r=_B(n,e,t);if(r)return r;n=n.sibling}}function xB(i){try{return Object.defineProperties(i,{_currentRenderer:{get(){return null},set(){}},_currentRenderer2:{get(){return null},set(){}}})}catch{return i}}const qM=console.error;console.error=function(){const i=[...arguments].join("");if(i!=null&&i.startsWith("Warning:")&&i.includes("useContext")){console.error=qM;return}return qM.apply(this,arguments)};const Dx=xB(Qt.createContext(null));class bB extends Qt.Component{render(){return Qt.createElement(Dx.Provider,{value:this._reactInternals},this.props.children)}}function Nle(){const i=Qt.useContext(Dx);if(i===null)throw new Error("its-fine: useFiber must be called within a <FiberProvider />!");const e=Qt.useId();return Qt.useMemo(()=>{for(const n of[i,i==null?void 0:i.alternate]){if(!n)continue;const r=_B(n,!1,s=>{let o=s.memoizedState;for(;o;){if(o.memoizedState===e)return!0;o=o.next}});if(r)return r}},[i,e])}function Ile(){const i=Nle(),[e]=Qt.useState(()=>new Map);e.clear();let t=i;for(;t;){if(t.type&&typeof t.type=="object"){const r=t.type._context===void 0&&t.type.Provider===t.type?t.type:t.type._context;r&&r!==Dx&&!e.has(r)&&e.set(r,Qt.useContext(xB(r)))}t=t.return}return e}function Lle(){const i=Ile();return Qt.useMemo(()=>Array.from(i.keys()).reduce((e,t)=>n=>Qt.createElement(e,null,Qt.createElement(t.Provider,Ple(VM({},n),{value:i.get(t)}))),e=>Qt.createElement(bB,VM({},e))),[i])}const Dle=Qt.forwardRef(function({children:e,fallback:t,resize:n,style:r,gl:s,events:o=vle,eventSource:a,eventPrefix:l,shadows:u,linear:c,flat:A,legacy:m,orthographic:_,frameloop:b,dpr:M,performance:w,raycaster:T,camera:N,scene:P,onPointerMissed:I,onCreated:B,...F},O){Qt.useMemo(()=>oB(Pq),[]);const V=Lle(),[U,z]=_le({scroll:!0,debounce:{scroll:50,resize:0},...n}),H=Qt.useRef(null),Q=Qt.useRef(null);Qt.useImperativeHandle(O,()=>H.current);const Y=uB(I),[ne,ee]=Qt.useState(!1),[se,pe]=Qt.useState(!1);if(ne)throw ne;if(se)throw se;const re=Qt.useRef(null);_6(()=>{const ye=H.current;z.width>0&&z.height>0&&ye&&(re.current||(re.current=gle(ye)),re.current.configure({gl:s,events:o,shadows:u,linear:c,flat:A,legacy:m,orthographic:_,frameloop:b,dpr:M,performance:w,raycaster:T,camera:N,scene:P,size:z,onPointerMissed:(...Pe)=>Y.current==null?void 0:Y.current(...Pe),onCreated:Pe=>{Pe.events.connect==null||Pe.events.connect(a?tle(a)?a.current:a:Q.current),l&&Pe.setEvents({compute:(Qe,et)=>{const Pt=Qe[l+"X"],Ne=Qe[l+"Y"];et.pointer.set(Pt/et.size.width*2-1,-(Ne/et.size.height)*2+1),et.raycaster.setFromCamera(et.pointer,et.camera)}}),B==null||B(Pe)}}),re.current.render(Xr.jsx(V,{children:Xr.jsx(cB,{set:pe,children:Xr.jsx(Qt.Suspense,{fallback:Xr.jsx(nle,{set:ee}),children:e??null})})})))}),Qt.useEffect(()=>{const ye=H.current;if(ye)return()=>yB(ye)},[]);const de=a?"none":"auto";return Xr.jsx("div",{ref:Q,style:{position:"relative",width:"100%",height:"100%",overflow:"hidden",pointerEvents:de,...r},...F,children:Xr.jsx("div",{ref:U,style:{width:"100%",height:"100%"},children:Xr.jsx("canvas",{ref:H,style:{display:"block"},children:t})})})}),Ble=Qt.forwardRef(function(e,t){return Xr.jsx(bB,{children:Xr.jsx(Dle,{...e,ref:t})})});var Fle=Object.defineProperty,Ule=(i,e,t)=>e in i?Fle(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Ole=(i,e,t)=>(Ule(i,e+"",t),t);class kle{constructor(){Ole(this,"_listeners")}addEventListener(e,t){this._listeners===void 0&&(this._listeners={});const n=this._listeners;n[e]===void 0&&(n[e]=[]),n[e].indexOf(t)===-1&&n[e].push(t)}hasEventListener(e,t){if(this._listeners===void 0)return!1;const n=this._listeners;return n[e]!==void 0&&n[e].indexOf(t)!==-1}removeEventListener(e,t){if(this._listeners===void 0)return;const r=this._listeners[e];if(r!==void 0){const s=r.indexOf(t);s!==-1&&r.splice(s,1)}}dispatchEvent(e){if(this._listeners===void 0)return;const n=this._listeners[e.type];if(n!==void 0){e.target=this;const r=n.slice(0);for(let s=0,o=r.length;s<o;s++)r[s].call(this,e);e.target=null}}}var Vle=Object.defineProperty,zle=(i,e,t)=>e in i?Vle(i,e,{enumerable:!0,configurable:!0,writable:!0,value:t}):i[e]=t,Rn=(i,e,t)=>(zle(i,typeof e!="symbol"?e+"":e,t),t);const Of=new Ec,HM=new M0,Gle=Math.cos(70*(Math.PI/180)),WM=(i,e)=>(i%e+e)%e;let qle=class extends kle{constructor(e,t){super(),Rn(this,"object"),Rn(this,"domElement"),Rn(this,"enabled",!0),Rn(this,"target",new J),Rn(this,"minDistance",0),Rn(this,"maxDistance",1/0),Rn(this,"minZoom",0),Rn(this,"maxZoom",1/0),Rn(this,"minPolarAngle",0),Rn(this,"maxPolarAngle",Math.PI),Rn(this,"minAzimuthAngle",-1/0),Rn(this,"maxAzimuthAngle",1/0),Rn(this,"enableDamping",!1),Rn(this,"dampingFactor",.05),Rn(this,"enableZoom",!0),Rn(this,"zoomSpeed",1),Rn(this,"enableRotate",!0),Rn(this,"rotateSpeed",1),Rn(this,"enablePan",!0),Rn(this,"panSpeed",1),Rn(this,"screenSpacePanning",!0),Rn(this,"keyPanSpeed",7),Rn(this,"zoomToCursor",!1),Rn(this,"autoRotate",!1),Rn(this,"autoRotateSpeed",2),Rn(this,"reverseOrbit",!1),Rn(this,"reverseHorizontalOrbit",!1),Rn(this,"reverseVerticalOrbit",!1),Rn(this,"keys",{LEFT:"ArrowLeft",UP:"ArrowUp",RIGHT:"ArrowRight",BOTTOM:"ArrowDown"}),Rn(this,"mouseButtons",{LEFT:S2.ROTATE,MIDDLE:S2.DOLLY,RIGHT:S2.PAN}),Rn(this,"touches",{ONE:T2.ROTATE,TWO:T2.DOLLY_PAN}),Rn(this,"target0"),Rn(this,"position0"),Rn(this,"zoom0"),Rn(this,"_domElementKeyEvents",null),Rn(this,"getPolarAngle"),Rn(this,"getAzimuthalAngle"),Rn(this,"setPolarAngle"),Rn(this,"setAzimuthalAngle"),Rn(this,"getDistance"),Rn(this,"getZoomScale"),Rn(this,"listenToKeyEvents"),Rn(this,"stopListenToKeyEvents"),Rn(this,"saveState"),Rn(this,"reset"),Rn(this,"update"),Rn(this,"connect"),Rn(this,"dispose"),Rn(this,"dollyIn"),Rn(this,"dollyOut"),Rn(this,"getScale"),Rn(this,"setScale"),this.object=e,this.domElement=t,this.target0=this.target.clone(),this.position0=this.object.position.clone(),this.zoom0=this.object.zoom,this.getPolarAngle=()=>c.phi,this.getAzimuthalAngle=()=>c.theta,this.setPolarAngle=ge=>{let Be=WM(ge,2*Math.PI),bt=c.phi;bt<0&&(bt+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let oe=Math.abs(Be-bt);2*Math.PI-oe<oe&&(Be<bt?Be+=2*Math.PI:bt+=2*Math.PI),A.phi=Be-bt,n.update()},this.setAzimuthalAngle=ge=>{let Be=WM(ge,2*Math.PI),bt=c.theta;bt<0&&(bt+=2*Math.PI),Be<0&&(Be+=2*Math.PI);let oe=Math.abs(Be-bt);2*Math.PI-oe<oe&&(Be<bt?Be+=2*Math.PI:bt+=2*Math.PI),A.theta=Be-bt,n.update()},this.getDistance=()=>n.object.position.distanceTo(n.target),this.listenToKeyEvents=ge=>{ge.addEventListener("keydown",We),this._domElementKeyEvents=ge},this.stopListenToKeyEvents=()=>{this._domElementKeyEvents.removeEventListener("keydown",We),this._domElementKeyEvents=null},this.saveState=()=>{n.target0.copy(n.target),n.position0.copy(n.object.position),n.zoom0=n.object.zoom},this.reset=()=>{n.target.copy(n.target0),n.object.position.copy(n.position0),n.object.zoom=n.zoom0,n.object.updateProjectionMatrix(),n.dispatchEvent(r),n.update(),l=a.NONE},this.update=(()=>{const ge=new J,Be=new J(0,1,0),bt=new Os().setFromUnitVectors(e.up,Be),oe=bt.clone().invert(),at=new J,xt=new Os,Ut=2*Math.PI;return function(){const rt=n.object.position;bt.setFromUnitVectors(e.up,Be),oe.copy(bt).invert(),ge.copy(rt).sub(n.target),ge.applyQuaternion(bt),c.setFromVector3(ge),n.autoRotate&&l===a.NONE&&ne(Q()),n.enableDamping?(c.theta+=A.theta*n.dampingFactor,c.phi+=A.phi*n.dampingFactor):(c.theta+=A.theta,c.phi+=A.phi);let Ot=n.minAzimuthAngle,cn=n.maxAzimuthAngle;isFinite(Ot)&&isFinite(cn)&&(Ot<-Math.PI?Ot+=Ut:Ot>Math.PI&&(Ot-=Ut),cn<-Math.PI?cn+=Ut:cn>Math.PI&&(cn-=Ut),Ot<=cn?c.theta=Math.max(Ot,Math.min(cn,c.theta)):c.theta=c.theta>(Ot+cn)/2?Math.max(Ot,c.theta):Math.min(cn,c.theta)),c.phi=Math.max(n.minPolarAngle,Math.min(n.maxPolarAngle,c.phi)),c.makeSafe(),n.enableDamping===!0?n.target.addScaledVector(_,n.dampingFactor):n.target.add(_),n.zoomToCursor&&U||n.object.isOrthographicCamera?c.radius=et(c.radius):c.radius=et(c.radius*m),ge.setFromSpherical(c),ge.applyQuaternion(oe),rt.copy(n.target).add(ge),n.object.matrixAutoUpdate||n.object.updateMatrix(),n.object.lookAt(n.target),n.enableDamping===!0?(A.theta*=1-n.dampingFactor,A.phi*=1-n.dampingFactor,_.multiplyScalar(1-n.dampingFactor)):(A.set(0,0,0),_.set(0,0,0));let ai=!1;if(n.zoomToCursor&&U){let Xn=null;if(n.object instanceof tr&&n.object.isPerspectiveCamera){const xr=ge.length();Xn=et(xr*m);const hr=xr-Xn;n.object.position.addScaledVector(O,hr),n.object.updateMatrixWorld()}else if(n.object.isOrthographicCamera){const xr=new J(V.x,V.y,0);xr.unproject(n.object),n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix(),ai=!0;const hr=new J(V.x,V.y,0);hr.unproject(n.object),n.object.position.sub(hr).add(xr),n.object.updateMatrixWorld(),Xn=ge.length()}else console.warn("WARNING: OrbitControls.js encountered an unknown camera type - zoom to cursor disabled."),n.zoomToCursor=!1;Xn!==null&&(n.screenSpacePanning?n.target.set(0,0,-1).transformDirection(n.object.matrix).multiplyScalar(Xn).add(n.object.position):(Of.origin.copy(n.object.position),Of.direction.set(0,0,-1).transformDirection(n.object.matrix),Math.abs(n.object.up.dot(Of.direction))<Gle?e.lookAt(n.target):(HM.setFromNormalAndCoplanarPoint(n.object.up,n.target),Of.intersectPlane(HM,n.target))))}else n.object instanceof rl&&n.object.isOrthographicCamera&&(ai=m!==1,ai&&(n.object.zoom=Math.max(n.minZoom,Math.min(n.maxZoom,n.object.zoom/m)),n.object.updateProjectionMatrix()));return m=1,U=!1,ai||at.distanceToSquared(n.object.position)>u||8*(1-xt.dot(n.object.quaternion))>u?(n.dispatchEvent(r),at.copy(n.object.position),xt.copy(n.object.quaternion),ai=!1,!0):!1}})(),this.connect=ge=>{n.domElement=ge,n.domElement.style.touchAction="none",n.domElement.addEventListener("contextmenu",$t),n.domElement.addEventListener("pointerdown",bn),n.domElement.addEventListener("pointercancel",Z),n.domElement.addEventListener("wheel",ft)},this.dispose=()=>{var ge,Be,bt,oe,at,xt;n.domElement&&(n.domElement.style.touchAction="auto"),(ge=n.domElement)==null||ge.removeEventListener("contextmenu",$t),(Be=n.domElement)==null||Be.removeEventListener("pointerdown",bn),(bt=n.domElement)==null||bt.removeEventListener("pointercancel",Z),(oe=n.domElement)==null||oe.removeEventListener("wheel",ft),(at=n.domElement)==null||at.ownerDocument.removeEventListener("pointermove",he),(xt=n.domElement)==null||xt.ownerDocument.removeEventListener("pointerup",Z),n._domElementKeyEvents!==null&&n._domElementKeyEvents.removeEventListener("keydown",We)};const n=this,r={type:"change"},s={type:"start"},o={type:"end"},a={NONE:-1,ROTATE:0,DOLLY:1,PAN:2,TOUCH_ROTATE:3,TOUCH_PAN:4,TOUCH_DOLLY_PAN:5,TOUCH_DOLLY_ROTATE:6};let l=a.NONE;const u=1e-6,c=new xg,A=new xg;let m=1;const _=new J,b=new Ge,M=new Ge,w=new Ge,T=new Ge,N=new Ge,P=new Ge,I=new Ge,B=new Ge,F=new Ge,O=new J,V=new Ge;let U=!1;const z=[],H={};function Q(){return 2*Math.PI/60/60*n.autoRotateSpeed}function Y(){return Math.pow(.95,n.zoomSpeed)}function ne(ge){n.reverseOrbit||n.reverseHorizontalOrbit?A.theta+=ge:A.theta-=ge}function ee(ge){n.reverseOrbit||n.reverseVerticalOrbit?A.phi+=ge:A.phi-=ge}const se=(()=>{const ge=new J;return function(bt,oe){ge.setFromMatrixColumn(oe,0),ge.multiplyScalar(-bt),_.add(ge)}})(),pe=(()=>{const ge=new J;return function(bt,oe){n.screenSpacePanning===!0?ge.setFromMatrixColumn(oe,1):(ge.setFromMatrixColumn(oe,0),ge.crossVectors(n.object.up,ge)),ge.multiplyScalar(bt),_.add(ge)}})(),re=(()=>{const ge=new J;return function(bt,oe){const at=n.domElement;if(at&&n.object instanceof tr&&n.object.isPerspectiveCamera){const xt=n.object.position;ge.copy(xt).sub(n.target);let Ut=ge.length();Ut*=Math.tan(n.object.fov/2*Math.PI/180),se(2*bt*Ut/at.clientHeight,n.object.matrix),pe(2*oe*Ut/at.clientHeight,n.object.matrix)}else at&&n.object instanceof rl&&n.object.isOrthographicCamera?(se(bt*(n.object.right-n.object.left)/n.object.zoom/at.clientWidth,n.object.matrix),pe(oe*(n.object.top-n.object.bottom)/n.object.zoom/at.clientHeight,n.object.matrix)):(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - pan disabled."),n.enablePan=!1)}})();function de(ge){n.object instanceof tr&&n.object.isPerspectiveCamera||n.object instanceof rl&&n.object.isOrthographicCamera?m=ge:(console.warn("WARNING: OrbitControls.js encountered an unknown camera type - dolly/zoom disabled."),n.enableZoom=!1)}function ye(ge){de(m/ge)}function Pe(ge){de(m*ge)}function Qe(ge){if(!n.zoomToCursor||!n.domElement)return;U=!0;const Be=n.domElement.getBoundingClientRect(),bt=ge.clientX-Be.left,oe=ge.clientY-Be.top,at=Be.width,xt=Be.height;V.x=bt/at*2-1,V.y=-(oe/xt)*2+1,O.set(V.x,V.y,1).unproject(n.object).sub(n.object.position).normalize()}function et(ge){return Math.max(n.minDistance,Math.min(n.maxDistance,ge))}function Pt(ge){b.set(ge.clientX,ge.clientY)}function Ne(ge){Qe(ge),I.set(ge.clientX,ge.clientY)}function nt(ge){T.set(ge.clientX,ge.clientY)}function tt(ge){M.set(ge.clientX,ge.clientY),w.subVectors(M,b).multiplyScalar(n.rotateSpeed);const Be=n.domElement;Be&&(ne(2*Math.PI*w.x/Be.clientHeight),ee(2*Math.PI*w.y/Be.clientHeight)),b.copy(M),n.update()}function Dt(ge){B.set(ge.clientX,ge.clientY),F.subVectors(B,I),F.y>0?ye(Y()):F.y<0&&Pe(Y()),I.copy(B),n.update()}function Rt(ge){N.set(ge.clientX,ge.clientY),P.subVectors(N,T).multiplyScalar(n.panSpeed),re(P.x,P.y),T.copy(N),n.update()}function It(ge){Qe(ge),ge.deltaY<0?Pe(Y()):ge.deltaY>0&&ye(Y()),n.update()}function yn(ge){let Be=!1;switch(ge.code){case n.keys.UP:re(0,n.keyPanSpeed),Be=!0;break;case n.keys.BOTTOM:re(0,-n.keyPanSpeed),Be=!0;break;case n.keys.LEFT:re(n.keyPanSpeed,0),Be=!0;break;case n.keys.RIGHT:re(-n.keyPanSpeed,0),Be=!0;break}Be&&(ge.preventDefault(),n.update())}function Kt(){if(z.length==1)b.set(z[0].pageX,z[0].pageY);else{const ge=.5*(z[0].pageX+z[1].pageX),Be=.5*(z[0].pageY+z[1].pageY);b.set(ge,Be)}}function Ae(){if(z.length==1)T.set(z[0].pageX,z[0].pageY);else{const ge=.5*(z[0].pageX+z[1].pageX),Be=.5*(z[0].pageY+z[1].pageY);T.set(ge,Be)}}function Je(){const ge=z[0].pageX-z[1].pageX,Be=z[0].pageY-z[1].pageY,bt=Math.sqrt(ge*ge+Be*Be);I.set(0,bt)}function Xe(){n.enableZoom&&Je(),n.enablePan&&Ae()}function ht(){n.enableZoom&&Je(),n.enableRotate&&Kt()}function Ze(ge){if(z.length==1)M.set(ge.pageX,ge.pageY);else{const bt=vn(ge),oe=.5*(ge.pageX+bt.x),at=.5*(ge.pageY+bt.y);M.set(oe,at)}w.subVectors(M,b).multiplyScalar(n.rotateSpeed);const Be=n.domElement;Be&&(ne(2*Math.PI*w.x/Be.clientHeight),ee(2*Math.PI*w.y/Be.clientHeight)),b.copy(M)}function vt(ge){if(z.length==1)N.set(ge.pageX,ge.pageY);else{const Be=vn(ge),bt=.5*(ge.pageX+Be.x),oe=.5*(ge.pageY+Be.y);N.set(bt,oe)}P.subVectors(N,T).multiplyScalar(n.panSpeed),re(P.x,P.y),T.copy(N)}function ut(ge){const Be=vn(ge),bt=ge.pageX-Be.x,oe=ge.pageY-Be.y,at=Math.sqrt(bt*bt+oe*oe);B.set(0,at),F.set(0,Math.pow(B.y/I.y,n.zoomSpeed)),ye(F.y),I.copy(B)}function Tt(ge){n.enableZoom&&ut(ge),n.enablePan&&vt(ge)}function fn(ge){n.enableZoom&&ut(ge),n.enableRotate&&Ze(ge)}function bn(ge){var Be,bt;n.enabled!==!1&&(z.length===0&&((Be=n.domElement)==null||Be.ownerDocument.addEventListener("pointermove",he),(bt=n.domElement)==null||bt.ownerDocument.addEventListener("pointerup",Z)),Yt(ge),ge.pointerType==="touch"?Zt(ge):De(ge))}function he(ge){n.enabled!==!1&&(ge.pointerType==="touch"?St(ge):ze(ge))}function Z(ge){var Be,bt,oe;yt(ge),z.length===0&&((Be=n.domElement)==null||Be.releasePointerCapture(ge.pointerId),(bt=n.domElement)==null||bt.ownerDocument.removeEventListener("pointermove",he),(oe=n.domElement)==null||oe.ownerDocument.removeEventListener("pointerup",Z)),n.dispatchEvent(o),l=a.NONE}function De(ge){let Be;switch(ge.button){case 0:Be=n.mouseButtons.LEFT;break;case 1:Be=n.mouseButtons.MIDDLE;break;case 2:Be=n.mouseButtons.RIGHT;break;default:Be=-1}switch(Be){case S2.DOLLY:if(n.enableZoom===!1)return;Ne(ge),l=a.DOLLY;break;case S2.ROTATE:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enablePan===!1)return;nt(ge),l=a.PAN}else{if(n.enableRotate===!1)return;Pt(ge),l=a.ROTATE}break;case S2.PAN:if(ge.ctrlKey||ge.metaKey||ge.shiftKey){if(n.enableRotate===!1)return;Pt(ge),l=a.ROTATE}else{if(n.enablePan===!1)return;nt(ge),l=a.PAN}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function ze(ge){if(n.enabled!==!1)switch(l){case a.ROTATE:if(n.enableRotate===!1)return;tt(ge);break;case a.DOLLY:if(n.enableZoom===!1)return;Dt(ge);break;case a.PAN:if(n.enablePan===!1)return;Rt(ge);break}}function ft(ge){n.enabled===!1||n.enableZoom===!1||l!==a.NONE&&l!==a.ROTATE||(ge.preventDefault(),n.dispatchEvent(s),It(ge),n.dispatchEvent(o))}function We(ge){n.enabled===!1||n.enablePan===!1||yn(ge)}function Zt(ge){switch(Bt(ge),z.length){case 1:switch(n.touches.ONE){case T2.ROTATE:if(n.enableRotate===!1)return;Kt(),l=a.TOUCH_ROTATE;break;case T2.PAN:if(n.enablePan===!1)return;Ae(),l=a.TOUCH_PAN;break;default:l=a.NONE}break;case 2:switch(n.touches.TWO){case T2.DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Xe(),l=a.TOUCH_DOLLY_PAN;break;case T2.DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;ht(),l=a.TOUCH_DOLLY_ROTATE;break;default:l=a.NONE}break;default:l=a.NONE}l!==a.NONE&&n.dispatchEvent(s)}function St(ge){switch(Bt(ge),l){case a.TOUCH_ROTATE:if(n.enableRotate===!1)return;Ze(ge),n.update();break;case a.TOUCH_PAN:if(n.enablePan===!1)return;vt(ge),n.update();break;case a.TOUCH_DOLLY_PAN:if(n.enableZoom===!1&&n.enablePan===!1)return;Tt(ge),n.update();break;case a.TOUCH_DOLLY_ROTATE:if(n.enableZoom===!1&&n.enableRotate===!1)return;fn(ge),n.update();break;default:l=a.NONE}}function $t(ge){n.enabled!==!1&&ge.preventDefault()}function Yt(ge){z.push(ge)}function yt(ge){delete H[ge.pointerId];for(let Be=0;Be<z.length;Be++)if(z[Be].pointerId==ge.pointerId){z.splice(Be,1);return}}function Bt(ge){let Be=H[ge.pointerId];Be===void 0&&(Be=new Ge,H[ge.pointerId]=Be),Be.set(ge.pageX,ge.pageY)}function vn(ge){const Be=ge.pointerId===z[0].pointerId?z[1]:z[0];return H[Be.pointerId]}this.dollyIn=(ge=Y())=>{Pe(ge),n.update()},this.dollyOut=(ge=Y())=>{ye(ge),n.update()},this.getScale=()=>m,this.setScale=ge=>{de(ge),n.update()},this.getZoomScale=()=>Y(),t!==void 0&&this.connect(t),this.update()}};const Hle=Qt.forwardRef(({makeDefault:i,camera:e,regress:t,domElement:n,enableDamping:r=!0,keyEvents:s=!1,onChange:o,onStart:a,onEnd:l,...u},c)=>{const A=kl(F=>F.invalidate),m=kl(F=>F.camera),_=kl(F=>F.gl),b=kl(F=>F.events),M=kl(F=>F.setEvents),w=kl(F=>F.set),T=kl(F=>F.get),N=kl(F=>F.performance),P=e||m,I=n||b.connected||_.domElement,B=Qt.useMemo(()=>new qle(P),[P]);return Ale(()=>{B.enabled&&B.update()},-1),Qt.useEffect(()=>(s&&B.connect(s===!0?I:s),B.connect(I),()=>void B.dispose()),[s,I,t,B,A]),Qt.useEffect(()=>{const F=U=>{A(),t&&N.regress(),o&&o(U)},O=U=>{a&&a(U)},V=U=>{l&&l(U)};return B.addEventListener("change",F),B.addEventListener("start",O),B.addEventListener("end",V),()=>{B.removeEventListener("start",O),B.removeEventListener("end",V),B.removeEventListener("change",F)}},[o,a,l,B,A,M]),Qt.useEffect(()=>{if(i){const F=T().controls;return w({controls:B}),()=>w({controls:F})}},[i,B]),Qt.createElement("primitive",OB({ref:c,object:B,enableDamping:r},u))}),Wle=[{type:"Feature",properties:{admin:"Afghanistan",name:"Afghanistan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[61.2108170917257,35.6500723333092],[62.2306514830059,35.2706639674223],[62.9846623065766,35.4040408391676],[63.1935384459003,35.8571656357189],[63.9828959491587,36.0079574651466],[64.5464791197339,36.3120732691843],[64.7461051776774,37.1118177353333],[65.5889477883578,37.3052167831856],[65.7456307310668,37.6611640488121],[66.2173848814593,37.3937901881339],[66.5186068052887,37.3627843287588],[67.0757820982596,37.3561439072093],[67.8299996275595,37.1449940048647],[68.1355623717014,37.0231151393043],[68.8594458352459,37.3443358424306],[69.1962728209244,37.1511435003074],[69.518785434858,37.6089966904134],[70.1165784036103,37.5882227646321],[70.2705741718401,37.735164699854],[70.3763041523093,38.1383959010275],[70.8068205097329,38.4862816432164],[71.3481311379903,38.2589053411322],[71.2394039244482,37.9532650823419],[71.5419177590848,37.9057744410656],[71.4486934752302,37.0656448430805],[71.8446382994506,36.7381712916469],[72.1930408059624,36.9482876653457],[72.6368896829173,37.0475580917784],[73.260055779925,37.495256862939],[73.9486959166465,37.4215662704908],[74.9800024758954,37.4199901393059],[75.1580277851409,37.1330309107891],[74.575892775373,37.0208413762835],[74.0675517109178,36.8361756454884],[72.9200248554445,36.7200070256963],[71.8462919452839,36.5099423284299],[71.2623482603857,36.0743875188578],[71.4987679381211,35.650563259416],[71.6130762063507,35.1532034368229],[71.1150187519216,34.7331257187222],[71.1567733092135,34.3489114446321],[70.8818030129884,33.9888559026385],[69.9305432473596,34.0201201441751],[70.3235941913716,33.3585326197584],[69.6871472512649,33.1054989690412],[69.2625220071225,32.5019440780883],[69.3177641132426,31.9014122584244],[68.9266768736577,31.6201891138921],[68.5569320006093,31.713310044882],[67.7926892434448,31.5829304062096],[67.6833935891475,31.3031542017814],[66.9388912291185,31.3049112004793],[66.381457553986,30.7388992375865],[66.3464726093244,29.8879434270362],[65.0468620136161,29.4721806910319],[64.3504187356185,29.5600306259281],[64.1480021503312,29.340819200146],[63.5502608580112,29.4683307968262],[62.5498568052728,29.3185724960443],[60.8742484882088,29.8292389999526],[61.7812215513634,30.7358503280812],[61.6993144061808,31.3795061304927],[60.9419446145111,31.5480746526287],[60.863654819589,32.1829196233344],[60.5360779152908,32.9812688258116],[60.963700392506,33.5288323023763],[60.5284298033116,33.676446031218],[60.8031933938074,34.4041018743199],[61.2108170917257,35.6500723333092]]]}},{type:"Feature",properties:{admin:"Angola",name:"Angola",continent:"Africa"},geometry:{type:"MultiPolygon",coordinates:[[[[16.326528354567,-5.87747039146622],[16.5731799658961,-6.62264454511509],[16.8601908708452,-7.22229786542998],[17.0899959652472,-7.54568897871247],[17.4729700049623,-8.06855112064166],[18.134221632569,-7.98767750410487],[18.4641756527527,-7.84701425540648],[19.0167517432497,-7.98824594486014],[19.1666133968961,-7.73818368899972],[19.4175024756732,-7.15542856204428],[20.0377230160402,-7.11636117923166],[20.0916215349206,-6.94309010175695],[20.6018229509383,-6.93931772219969],[20.5147481625265,-7.29960580813866],[21.7281107927398,-7.29087249108132],[21.7464559262034,-7.92008473066711],[21.949130893652,-8.3059009741583],[21.801801385188,-8.90870655684299],[21.8751819190424,-9.52370777754856],[22.2087532894864,-9.89479623783653],[22.1552681820643,-11.0848011206538],[22.4027982927424,-10.9930754533357],[22.8373454118848,-11.0176217586743],[23.4567908057675,-10.8678634578925],[23.9122152035557,-10.9268262671375],[24.0178935075926,-11.2372982723471],[23.9041536801182,-11.7222815894063],[24.0799052263429,-12.1912968888873],[23.9309220720454,-12.5658476701388],[24.0161365088947,-12.9110462378486],[21.9338863461259,-12.8984371883694],[21.8878426449539,-16.0803101538769],[22.5624784685243,-16.8984514299218],[23.2150484555061,-17.523116143466],[21.3771761410456,-17.9306364885197],[18.9561869646036,-17.7890947404722],[18.2633093604342,-17.309950860262],[14.2097066585951,-17.3531006812257],[14.058501417709,-17.4233806291427],[13.46236209479,-16.9712118465887],[12.8140812516884,-16.9413428687241],[12.2154614600194,-17.1116683895581],[11.7341988460851,-17.3018893368245],[11.6400960628816,-16.6731421851292],[11.7785372249916,-15.7938160132507],[12.1235807634044,-14.8783163387679],[12.1756189307223,-14.4491435685839],[12.500095249083,-13.5476998836844],[12.7384786312454,-13.1379057756099],[13.3129138526018,-12.4836304663625],[13.6337211442698,-12.0386447078972],[13.7387276546869,-11.2978630509931],[13.6863794287753,-10.7310759416158],[13.3873279151022,-10.3735783830207],[13.1209875830699,-9.76689706791411],[12.8753695003866,-9.16693368900549],[12.9290613135378,-8.95909107832757],[13.2364327328099,-8.56262948978434],[12.9330403988243,-7.59653858808775],[12.7282983740839,-6.9271220841788],[12.2273470394464,-6.29444752362937],[12.3224316748636,-6.10009246177965],[12.7351713395787,-5.96568206138848],[13.024869419007,-5.98438892987811],[13.3755973649719,-5.86424122479956],[16.326528354567,-5.87747039146622]]],[[[12.4366882666609,-5.68430388755922],[12.1823368669203,-5.7899305151638],[11.9149630062421,-5.03798674888473],[12.3186076188739,-4.60623015708616],[12.6207597184845,-4.43802336997612],[12.9955172054652,-4.78110320396192],[12.6316117692658,-4.99127125409294],[12.4680041846298,-5.24836150474499],[12.4366882666609,-5.68430388755922]]]]}},{type:"Feature",properties:{admin:"Albania",name:"Albania",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[20.5902474301049,41.8554041611336],[20.4631750830992,41.5150890162753],[20.6051819190374,41.0862263046852],[21.0200403174764,40.8427269557259],[20.9999898617472,40.580003973954],[20.6749967790636,40.434999904943],[20.6150004411728,40.1100068222594],[20.1500159034105,39.624997666984],[19.9800004411701,39.6949933945234],[19.9600016618732,39.915005805006],[19.4060819841367,40.2507734238225],[19.3190588721571,40.7272301295536],[19.4035498389543,41.4095657415354],[19.5400272966371,41.7199860703128],[19.371768833095,41.8775475123706],[19.3044861182508,42.1957451442078],[19.7380513851796,42.6882473821656],[19.8016133968987,42.5000934921908],[20.0707,42.58863],[20.2837545101819,42.3202595078151],[20.52295,42.21787],[20.5902474301049,41.8554041611336]]]}},{type:"Feature",properties:{admin:"United Arab Emirates",name:"United Arab Emirates",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[51.5795186704633,24.2454971379511],[51.7574406268442,24.2940729843055],[51.7943892759329,24.0198261581325],[52.5770805194256,24.1774392766227],[53.4040067889601,24.1513168400992],[54.0080009295876,24.1217579208282],[54.6930237160486,24.7978923609351],[55.4390246926141,25.4391452092449],[56.0708207538145,26.055464178974],[56.261041701081,25.7146064315768],[56.396847365144,24.9247321639955],[55.886232537668,24.9208305933574],[55.8041186867562,24.2696041936153],[55.9812138202205,24.1305429143178],[55.5286316262082,23.9336040308535],[55.5258410988645,23.5248692896409],[55.2344893736029,23.1109927434153],[55.2083410988632,22.708329982997],[55.0068030129249,22.4969475367071],[52.0007332700743,23.0011544865789],[51.617707553927,24.0142192652288],[51.5795186704633,24.2454971379511]]]}},{type:"Feature",properties:{admin:"Argentina",name:"Argentina",continent:"South America"},geometry:{type:"MultiPolygon",coordinates:[[[[-65.5,-55.2],[-66.45,-55.25],[-66.95992,-54.89681],[-67.56244,-54.87001],[-68.63335,-54.8695],[-68.6340102275832,-52.6363704588745],[-68.25,-53.1],[-67.75,-53.85],[-66.45,-54.45],[-65.05,-54.7],[-65.5,-55.2]]],[[[-64.9648921372946,-22.0758615048123],[-64.3770210435423,-22.7980913225235],[-63.9868381415225,-21.993644301036],[-62.8464684719215,-22.0349854468695],[-62.6850571356579,-22.2490292294224],[-60.8465647040099,-23.8807125790383],[-60.028966030504,-24.0327963192732],[-58.8071284653949,-24.7714592424533],[-57.777217169818,-25.162339776309],[-57.6336600409111,-25.6036565080817],[-58.6181735907197,-27.1237187639471],[-57.6097596909761,-27.3958985328284],[-56.486701626193,-27.5484990373862],[-55.6958455063982,-27.3878370093908],[-54.788794928595,-26.6217855770961],[-54.6252906968235,-25.7392554664155],[-54.1300496079544,-25.5476392554772],[-53.6283489650487,-26.1248650041774],[-53.6487353175879,-26.9234725888161],[-54.4907252671355,-27.4747567685058],[-55.1622863429846,-27.8819153785334],[-56.2908996242391,-28.8527605120009],[-57.6251334295829,-30.2162948544542],[-57.8749373032819,-31.0165560849262],[-58.1424403550407,-32.0445036760762],[-58.1326476711214,-33.040566908502],[-58.3496111720988,-33.2631889788154],[-58.4270741441044,-33.9094544410575],[-58.4954420640265,-34.4314897600701],[-57.2258296372636,-35.2880266253079],[-57.3623587713787,-35.9773902320815],[-56.7374873521055,-36.4131259091666],[-56.7882852850483,-36.9015715471893],[-57.7491568670834,-38.1838705380799],[-59.2318570624019,-38.7202202288372],[-61.2374452378656,-38.9284245745411],[-62.3359569973101,-38.8277072080044],[-62.1257631089629,-39.4241049130849],[-62.3305309719194,-40.1725863584003],[-62.1459944322052,-40.6768966611367],[-62.745802781817,-41.0287614886121],[-63.7704947577325,-41.1667892392637],[-64.7320898098197,-40.8026770973351],[-65.1180352443916,-41.0643148740289],[-64.9785605536358,-42.0580009905693],[-64.3034079657425,-42.3590162086695],[-63.7559478420423,-42.0436866188245],[-63.4580590480959,-42.5631381162224],[-64.3788038804563,-42.8735584449996],[-65.1818039618397,-43.4953809547678],[-65.3288234117101,-44.5013660621937],[-65.5652689276616,-45.0367855771698],[-66.5099657863893,-45.0396277809458],[-67.2937939113924,-45.5518962542552],[-67.5805464341801,-46.3017729632425],[-66.5970664130173,-47.0339246559538],[-65.6410265774014,-47.2361345355119],[-65.9850882636007,-48.1332890765311],[-67.1661789618477,-48.6973373349969],[-67.8160876125665,-49.8696688779704],[-68.7287450832732,-50.2642184385189],[-69.1385391913478,-50.7325102679478],[-68.8155614895235,-51.7711040115941],[-68.1499948798204,-52.3499834061277],[-68.5715453762413,-52.2994438553463],[-69.4983621893961,-52.1427609126372],[-71.9148038397963,-52.0090223058659],[-72.329403856074,-51.4259563128724],[-72.3099735175323,-50.6770097796663],[-72.9757468329646,-50.7414502907343],[-73.3280509101145,-50.3787850889099],[-73.41543575712,-49.318436374713],[-72.6482474433149,-48.8786182594768],[-72.3311608547719,-48.2442383766618],[-72.4473553127803,-47.7385328102535],[-71.9172584703302,-46.8848381487918],[-71.5520094468912,-45.5607329241771],[-71.6593155585453,-44.9736886533414],[-71.2227788967597,-44.7842428525594],[-71.3298007880362,-44.4075216611517],[-71.7936226060719,-44.2071721331561],[-71.4640561591305,-43.7876111793783],[-71.9154239569839,-43.4085645485174],[-72.1488980780785,-42.2548881976014],[-71.7468037584155,-42.051386407236],[-71.9157340155775,-40.8323393694707],[-71.6807612779464,-39.8081641578781],[-71.413516608349,-38.9160222307911],[-70.8146642727347,-38.5529952939407],[-71.1186250474754,-37.5768274879472],[-71.1218806627098,-36.6581238746623],[-70.3647692532017,-36.0050887997899],[-70.3880494859491,-35.1696875953594],[-69.8173091295015,-34.1935714657983],[-69.8147769843192,-33.2738860002998],[-70.0743993801536,-33.091209812148],[-70.5350689358194,-31.3650102678703],[-69.9190083482519,-30.3363392066683],[-70.0135503811299,-29.3679228655185],[-69.6561303371831,-28.4591411272337],[-69.0012349107483,-27.5212138811361],[-68.2955415513704,-26.8993396949358],[-68.5947997707727,-26.5069088681113],[-68.3860011460973,-26.1850163713652],[-68.4176529608761,-24.5185547828169],[-67.3284429592441,-24.0253032365909],[-66.9852339341776,-22.9863485653628],[-67.1066735500636,-22.7359245744764],[-66.2733394029248,-21.8323104794207],[-64.9648921372946,-22.0758615048123]]]]}},{type:"Feature",properties:{admin:"Armenia",name:"Armenia",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[43.5827458025927,41.0921432561826],[44.9724800962181,41.2481285670556],[45.1794958839793,40.9853539088514],[45.5603511899704,40.8122895371059],[45.3591748390582,40.5615038111935],[45.8919071795551,40.21847565364],[45.6100122414029,39.8999938014252],[46.0345341326807,39.6280207382731],[46.4834989764324,39.4641547714755],[46.505719842318,38.7706053736863],[46.1436230812488,38.7412014837122],[45.735379266143,39.3197191432197],[45.739978468617,39.4739991318271],[45.2981449725215,39.4717512070224],[45.0019873390567,39.7400035670496],[44.7939896990819,39.713002631177],[44.4000085792887,40.0050003118423],[43.6564363950409,40.2535639511662],[43.7526579119684,40.7402009140588],[43.5827458025927,41.0921432561826]]]}},{type:"Feature",properties:{admin:"French Southern and Antarctic Lands",name:"Fr. S. Antarctic Lands",continent:"Seven seas (open ocean)"},geometry:{type:"Polygon",coordinates:[[[68.935,-48.625],[69.58,-48.94],[70.525,-49.065],[70.56,-49.255],[70.28,-49.71],[68.745,-49.775],[68.72,-49.2425],[68.8675,-48.83],[68.935,-48.625]]]}},{type:"Feature",properties:{admin:"Australia",name:"Australia",continent:"Australia"},geometry:{type:"MultiPolygon",coordinates:[[[[145.397978143495,-40.7925485166059],[146.364120721624,-41.1376954078833],[146.908583612251,-41.0005461565807],[147.689259474884,-40.8082581520227],[148.289067824496,-40.8754375140021],[148.359864536736,-42.0624451637464],[148.017301467073,-42.4070236142686],[147.914051955354,-43.2115223121885],[147.564564243764,-42.9376888974739],[146.870343052355,-43.6345972633621],[146.663327264594,-43.5808537737785],[146.04837772032,-43.5497445615389],[145.431929559511,-42.6937761370563],[145.295090366802,-42.0336097145276],[144.718071323831,-41.1625517718157],[144.74375451068,-40.7039751116577],[145.397978143495,-40.7925485166059]]],[[[143.5618111513,-13.7636556942322],[143.922099237239,-14.548310642152],[144.563713820575,-14.1711760392859],[144.894908075134,-14.5944576961886],[145.374723748963,-14.9849764950183],[145.271991001567,-15.4282052547857],[145.485259637636,-16.2856722958048],[145.637033319277,-16.7849183081766],[145.888904250268,-16.9069263648176],[146.160308872664,-17.7616545549252],[146.063673944279,-18.2800725236773],[146.38747846902,-18.9582740210759],[147.471081577748,-19.4807227515467],[148.177601760042,-19.9559392229028],[148.848413527623,-20.3912098120973],[148.717465448196,-20.6334689266815],[149.289420200802,-21.2605107561111],[149.678337030231,-22.3425118954384],[150.077382440389,-22.1227837053333],[150.482939081015,-22.556142266533],[150.727265252891,-22.4024048804647],[150.899554478152,-23.4622368303387],[151.609175246384,-24.0762561988308],[152.073539666959,-24.4578866513062],[152.855197381806,-25.267501316023],[153.136162144177,-26.0711731910262],[153.16194868389,-26.6413192685024],[153.092908970349,-27.2602995744945],[153.569469028944,-28.1100668271021],[153.5121081891,-28.9950774065328],[153.339095493787,-29.4582015927324],[153.069241164359,-30.3502401669548],[153.089601678682,-30.9236418596654],[152.891577590139,-31.640445651986],[152.450002476205,-32.5500025367552],[151.709117466437,-33.0413420549863],[151.343971795862,-33.8160234514738],[151.010555454715,-34.3103602027779],[150.714139439089,-35.1734599749168],[150.328219842733,-35.6718791643719],[150.075212030232,-36.4202055803905],[149.946124302367,-37.1090524228412],[149.997283970336,-37.4252605120351],[149.423882277626,-37.7726811663335],[148.304622430616,-37.8090613746669],[147.381733026315,-38.2192172177675],[146.922122837511,-38.6065320777951],[146.317921991155,-39.0357565244114],[145.489652134381,-38.593767999019],[144.876976353128,-38.4174480120391],[145.032212355733,-37.896187839511],[144.485682407814,-38.0853235816993],[143.609973586196,-38.8094654274053],[142.745426873953,-38.5382675107375],[142.178329705982,-38.3800342750598],[141.606581659105,-38.3085140927679],[140.638578729413,-38.0193327776625],[139.992158237874,-37.4029362932851],[139.806588169514,-36.6436027971883],[139.574147577065,-36.1383623186707],[139.082808058834,-35.7327540016118],[138.120747918856,-35.6122962379394],[138.449461704665,-35.1272612444479],[138.207564325107,-34.3847225888459],[137.719170363516,-35.076825046531],[136.829405552315,-35.2605347633286],[137.352371047108,-34.7073385556441],[137.503886346588,-34.1302678362408],[137.890116001538,-33.6404786109783],[137.810327590079,-32.9000070126681],[136.99683719294,-33.7527714983486],[136.372069126532,-34.0947661272562],[135.989043410384,-34.8901180966605],[135.208212518454,-34.4786703427526],[135.239218377829,-33.947953383115],[134.613416782775,-33.2227780087631],[134.085903761939,-32.8480721982148],[134.273902622617,-32.617233575167],[132.99077680881,-32.0112240536802],[132.288080682505,-31.9826469866228],[131.326330601121,-31.495803318001],[129.53579389864,-31.5904228655275],[128.240937534702,-31.9484888648779],[127.102867466338,-32.282266941051],[126.148713820501,-32.2159660784206],[125.088623488466,-32.7287513160528],[124.221647983905,-32.9594865862361],[124.028946567889,-33.4838473447017],[123.659666782731,-33.8901791318127],[122.811036411634,-33.9144670549898],[122.183064406423,-34.0034021949642],[121.299190708503,-33.8210360654061],[120.580268182458,-33.9301766904066],[119.893695103028,-33.9760653622818],[119.298899367349,-34.509366143534],[119.007340936358,-34.4641492652785],[118.505717808101,-34.7468193499151],[118.02497195849,-35.0647327613747],[117.295507440257,-35.0254586728329],[116.625109084135,-35.0250969378068],[115.56434695848,-34.3864279111116],[115.02680870978,-34.1965170224389],[115.048616164207,-33.623425388322],[115.545123325667,-33.487257989233],[115.714673700017,-33.2595716285549],[115.679378696761,-32.9003687476941],[115.801645135564,-32.205062351207],[115.689610630355,-31.6124370256838],[115.160909051577,-30.6015943336225],[114.997043084779,-30.0307247860942],[115.040037876446,-29.4610954729408],[114.641974318502,-28.8102308082247],[114.616497837382,-28.516398614213],[114.173579136208,-28.1180766741073],[114.048883905088,-27.3347653134271],[113.477497593237,-26.5431340471479],[113.338953078262,-26.1165450985785],[113.77835778204,-26.5490251604292],[113.440962355607,-25.6212781714932],[113.936901076312,-25.9112346330829],[114.232852004047,-26.2984461402459],[114.216160516417,-25.7862810198011],[113.721255324358,-24.9989388974021],[113.625343866024,-24.6839710425831],[113.393523390763,-24.3847644996133],[113.502043898576,-23.8063501929703],[113.706992629045,-23.5602153459641],[113.843418410296,-23.0599874813787],[113.736551548316,-22.4754753557254],[114.149756300922,-21.755881036061],[114.225307244933,-22.5174882951786],[114.647762078919,-21.8295199520769],[115.460167270979,-21.4951734351485],[115.947372674627,-21.0686878394437],[116.711615431792,-20.7016818173068],[117.166316359528,-20.6235987281138],[117.441545037914,-20.7468986955622],[118.229558953933,-20.3742082658732],[118.836085239743,-20.2633106421748],[118.987807244952,-20.0442025692573],[119.252493931151,-19.9529419898298],[119.805225050945,-19.976506442955],[120.856220330897,-19.6837077775892],[121.399856398607,-19.2397555477697],[121.655137974129,-18.7053178850071],[122.241665480642,-18.1976486141718],[122.286623976736,-17.7986032040139],[122.312772251475,-17.2549671363034],[123.012574497572,-16.4051998836959],[123.433789097183,-17.2685580379962],[123.859344517107,-17.0690353329173],[123.503242222183,-16.5965060360404],[123.817073195492,-16.111316013252],[124.2582865744,-16.3279436174196],[124.379726190286,-15.567059828354],[124.92615278534,-15.0751001929353],[125.167275018414,-14.68039560309],[125.670086704614,-14.510070082256],[125.68579634003,-14.2306556128538],[126.125149367376,-14.347340996969],[126.14282270722,-14.0959868303012],[126.582589146024,-13.9527914364204],[127.065867140817,-13.8179676245709],[127.804633416862,-14.276906019755],[128.359689976109,-14.8691696102523],[128.985543247596,-14.8759908993147],[129.62147342338,-14.9697836239246],[129.409600050983,-14.420669854391],[129.888640578329,-13.6187033016535],[130.339465773643,-13.3573755835535],[130.183506300986,-13.1075200334223],[130.617795037967,-12.5363921037325],[131.22349450086,-12.1836487769081],[131.735091180549,-12.3024528947472],[132.575298293183,-12.114040622611],[132.557211541881,-11.6030123836767],[131.824698114144,-11.2737818335451],[132.357223748911,-11.1285193823726],[133.019560581596,-11.3764112280768],[133.550845981989,-11.7865153947451],[134.393068475482,-12.0423654110222],[134.678632440327,-11.9411829565947],[135.298491245668,-12.2486060522991],[135.882693312728,-11.9622669409698],[136.258380975489,-12.0493417293816],[136.492475213772,-11.8572087541204],[136.951620314685,-12.3519589168827],[136.685124953356,-12.8872234025621],[136.305406528875,-13.2912297502199],[135.961758254134,-13.3245093726159],[136.077616815333,-13.7242782528258],[135.783836297753,-14.2239893530882],[135.428664178611,-14.7154322241839],[135.500184360903,-14.9977405737944],[136.295174595281,-15.5502649878591],[137.065360142159,-15.8707622209334],[137.580470819245,-16.2150822892941],[138.303217401279,-16.8076042619527],[138.585164015863,-16.8066224097392],[139.108542922115,-17.0626791317454],[139.260574985918,-17.3716008439862],[140.215245396078,-17.7108049455501],[140.875463495039,-17.3690686988039],[141.071110467696,-16.8320472144267],[141.274095493739,-16.3888701310916],[141.398222284104,-15.8405315080426],[141.702183058845,-15.0449211564769],[141.563380161709,-14.5613331030895],[141.635520461188,-14.2703947892863],[141.519868605719,-13.6980783016538],[141.650920038011,-12.9446875952706],[141.842691278246,-12.7415475399312],[141.686990187751,-12.4076144344611],[141.928629185148,-11.8774659155788],[142.118488397388,-11.3280420874516],[142.143706496346,-11.0427365047681],[142.515260044525,-10.6681857235166],[142.797310011974,-11.1573548315915],[142.866763136974,-11.7847067196149],[143.115946893486,-11.9056295711779],[143.158631626559,-12.3256556128462],[143.5221236513,-12.8343584123274],[143.597157830988,-13.4004220516526],[143.5618111513,-13.7636556942322]]]]}},{type:"Feature",properties:{admin:"Austria",name:"Austria",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[16.979666782304,48.1234970159763],[16.9037541032673,47.7148656276283],[16.3405843441504,47.7129019232012],[16.5342676123804,47.4961709661691],[16.2022982113374,46.852385972677],[16.0116638526127,46.6836107448117],[15.137091912505,46.658702704447],[14.6324715511748,46.4318173284695],[13.8064754574215,46.5093061386912],[12.3764852230408,46.7675591090698],[12.1530880062431,47.1153931748264],[11.1648279150933,46.9415794948127],[11.0485559424365,46.7513585475463],[10.4427014502466,46.8935462509974],[9.93244835779666,46.920728054383],[9.47996951664902,47.1028099635634],[9.63293175623297,47.34760122333],[9.59422610844635,47.5250580918203],[9.89606814946319,47.5801968450757],[10.4020837744652,47.3024876979392],[10.5445040218616,47.5663992376538],[11.4264140153547,47.523766181013],[12.1413574561128,47.7030834010658],[12.6207597184845,47.6723876002844],[12.9326269873659,47.467645575544],[13.0258512712205,47.6375835231358],[12.8841028174439,48.2891458196879],[13.243357374737,48.416114813829],[13.5959456722644,48.8771719427371],[14.3388977393247,48.5553052842072],[14.9014473812541,48.9644017604458],[15.253415561594,49.0390742051076],[16.0296472510502,48.7338990342079],[16.4992826677188,48.7858080104451],[16.9602881201946,48.5969823268506],[16.879982944413,48.4700133327095],[16.979666782304,48.1234970159763]]]}},{type:"Feature",properties:{admin:"Azerbaijan",name:"Azerbaijan",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[45.0019873390568,39.7400035670496],[45.2981449725214,39.4717512070224],[45.739978468617,39.4739991318272],[45.7353792661431,39.3197191432198],[46.1436230812488,38.7412014837122],[45.4577217954387,38.8741391057831],[44.9526880226503,39.3357646754464],[44.793989699082,39.713002631177],[45.0019873390568,39.7400035670496]]],[[[47.3733154640662,41.2197323675113],[47.8156657244847,41.1514161240213],[47.987283156126,41.4058192001942],[48.5843526548263,41.8088695338547],[49.1102637062607,41.2822866888005],[49.6189148293096,40.57292430273],[50.0848295428531,40.5261571315058],[50.3928210793127,40.2565611842391],[49.5692021014448,40.1761009791607],[49.3952592303504,39.3994817164622],[49.2232283872507,39.0492188583879],[48.8565324237076,38.8154863551318],[48.8832491392025,38.3202452662626],[48.6343754412848,38.2703775091009],[48.0107442563865,38.7940147975145],[48.3555294126379,39.2887649602769],[48.0600952492253,39.5822354192624],[47.6850793800831,39.5083639593012],[46.505719842318,38.7706053736863],[46.4834989764324,39.4641547714755],[46.0345341326807,39.628020738273],[45.6100122414029,39.8999938014252],[45.8919071795551,40.21847565364],[45.3591748390582,40.5615038111935],[45.5603511899705,40.812289537106],[45.1794958839794,40.9853539088514],[44.9724800962182,41.2481285670556],[45.2174263852816,41.411451931314],[45.9626005389304,41.1238725856098],[46.501637404167,41.0644446884741],[46.6379081561206,41.1816726751282],[46.145431756379,41.7228024358726],[46.4049507993488,41.8606751572273],[46.6860705910167,41.8271371526699],[47.3733154640662,41.2197323675113]]]]}},{type:"Feature",properties:{admin:"Burundi",name:"Burundi",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[29.3399975929003,-4.49998341229409],[29.276383904749,-3.29390715903406],[29.0249263852168,-2.83925790773016],[29.6321761410786,-2.9178577612461],[29.9383590024079,-2.34848683025424],[30.469696079233,-2.41385751710346],[30.5276770362645,-2.80763193116753],[30.7430127296247,-3.03428476319969],[30.7522628110049,-3.35932952231557],[30.5055595232436,-3.56856739666536],[30.1163326352212,-4.09013762778724],[29.7535124040999,-4.45238941815328],[29.3399975929003,-4.49998341229409]]]}},{type:"Feature",properties:{admin:"Belgium",name:"Belgium",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[3.31497114422854,51.3457809515361],[4.04707116050753,51.2672586126686],[4.97399132652691,51.4750237086981],[5.60697594567,51.0372984889698],[6.15665815595878,50.8037210150106],[6.04307335778111,50.1280516627942],[5.78241743330091,50.0903278672212],[5.67405195478483,49.5294835475575],[4.79922163251581,49.9853730332364],[4.28602298342508,49.9074966497725],[3.58818444175569,50.3789924180036],[3.1232515804258,50.7803632676146],[2.65842207196027,50.7968480495157],[2.51357303224614,51.1485061712618],[3.31497114422854,51.3457809515361]]]}},{type:"Feature",properties:{admin:"Benin",name:"Benin",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[2.69170169435625,6.25881724692863],[1.86524051271232,6.14215770102973],[1.61895063640924,6.83203807212624],[1.66447757325838,9.12859039960938],[1.46304284018467,9.33462433515709],[1.42506066245014,9.825395412633],[1.07779503744874,10.175606594275],[.772335646171484,10.4708082137424],[.899563022474069,10.9973393823643],[1.24346967937649,11.1105107690835],[1.44717817547107,11.5477192244889],[1.93598554851988,11.6411502140726],[2.15447350424992,11.9401500513133],[2.49016360841793,12.2330520695437],[2.84864301922667,12.2356358911583],[3.61118045412556,11.660167141156],[3.57221642417747,11.3279393579515],[3.79711225751171,10.7347455916731],[3.6000700211828,10.3321861841194],[3.70543826662592,10.0632103540402],[3.2203515967021,9.4441525333997],[2.91230838381026,9.13760793704432],[2.72379275880951,8.50684540448971],[2.74906253420022,7.87073436119289],[2.69170169435625,6.25881724692863]]]}},{type:"Feature",properties:{admin:"Burkina Faso",name:"Burkina Faso",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-2.82749630371271,9.64246084231978],[-3.51189897298627,9.90032623945622],[-3.98044918457668,9.8623440617217],[-4.33024695476038,9.61083486575714],[-4.77988359213197,9.82198476810174],[-4.9546532861431,10.1527139347697],[-5.40434159994697,10.3707368026091],[-5.470564947929,10.951269842976],[-5.19784257650865,11.3751457788501],[-5.22094194174312,11.7138589543072],[-4.4271661035238,12.5426455754043],[-4.28040503581488,13.2284435083497],[-4.00639075358723,13.4724854598481],[-3.52280270019986,13.3376616479986],[-3.10370683431276,13.5412667912286],[-2.96769446452058,13.7981503361515],[-2.19182451009038,14.2464175480674],[-2.00103512206877,14.5590082870009],[-1.06636349120566,14.9738150090078],[-.515854458000348,15.1161577417557],[-.26625729003058,14.9243089868721],[.374892205414682,14.9289081893461],[.295646396495101,14.4442349308807],[.429927605805517,13.9887330184439],[.993045688490071,13.3357496200038],[1.02410322429748,12.8518256698066],[2.17710778159378,12.6250178084775],[2.15447350424992,11.9401500513133],[1.93598554851988,11.6411502140726],[1.44717817547107,11.5477192244889],[1.24346967937649,11.1105107690835],[.899563022474069,10.9973393823643],[.023802524423701,11.0186817489008],[-.438701544588582,11.0983409692787],[-.761575893548183,10.9369296330151],[-1.20335771321143,11.0098192407627],[-2.94040930827046,10.9626903345126],[-2.96389624674711,10.3953347843801],[-2.82749630371271,9.64246084231978]]]}},{type:"Feature",properties:{admin:"Bangladesh",name:"Bangladesh",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[92.6727209818256,22.0412389185412],[92.652257114638,21.3240475529785],[92.3032344909387,21.4754853378098],[92.3685535013556,20.6708832870253],[92.0828861836461,21.1921951359858],[92.0252152852084,21.7015697290868],[91.8348909850774,22.1829356958856],[91.4170870299977,22.7650190292212],[90.4960063008273,22.8050165878151],[90.586956821661,22.3927936874229],[90.2729708190555,21.8363677027201],[89.8474670755643,22.0391460230334],[89.7020495950949,21.8571157902853],[89.4188627461355,21.9661789006373],[89.0319612975662,22.055708319583],[88.8763118835031,22.8791464299378],[88.5297697285538,23.6311418726492],[88.6999402200909,24.2337149113886],[88.0844222350624,24.5016572128219],[88.306372511756,24.8660794133442],[88.9315539896231,25.2386923283848],[88.2097892598025,25.7680657007827],[88.5630493509497,26.4465255803427],[89.3550940286873,26.0144072535181],[89.8324809101996,25.9650820988955],[89.9206925801218,25.2697498641922],[90.8722107279121,25.1326006128895],[91.7995959818221,25.1474317489573],[92.3762016133348,24.976692816665],[91.9150928079944,24.1304137232371],[91.4677299336437,24.0726394719348],[91.1589632506997,23.5035269231044],[91.7064750508321,22.9852639836492],[91.8699276061713,23.6243464218028],[92.1460347839068,23.6274986841726],[92.6727209818256,22.0412389185412]]]}},{type:"Feature",properties:{admin:"Bulgaria",name:"Bulgaria",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[22.657149692483,44.2349230006613],[22.9448323910518,43.8237853053471],[23.3323022803763,43.8970108099047],[24.1006791521242,43.7410513372478],[25.5692716814269,43.6884447291747],[26.0651587256997,43.9434937607513],[27.2423995297409,44.1759860296324],[27.9701070492751,43.8124681666752],[28.558081495892,43.7074616562581],[28.0390950863847,43.2931716985742],[27.673897739378,42.5778923610062],[27.9967204119054,42.0073587102878],[27.1357393734905,42.1414848903013],[26.1170418637208,41.8269046087246],[26.1061381365072,41.3288988307278],[25.1972013689254,41.2344859889305],[24.492644891058,41.583896185872],[23.6920736019923,41.3090809189438],[22.9523771501664,41.3379938828111],[22.8813737321974,41.9992971868502],[22.3805257504246,42.3202595078151],[22.5450118344096,42.461362006188],[22.4365946794613,42.5803211533239],[22.6048014665713,42.8985187851611],[22.9860185075885,43.211161200527],[22.5001566911803,43.642814439461],[22.4104464047216,44.0080634629],[22.657149692483,44.2349230006613]]]}},{type:"Feature",properties:{admin:"The Bahamas",name:"Bahamas",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[-77.53466,23.75975],[-77.78,23.71],[-78.03405,24.28615],[-78.40848,24.57564],[-78.19087,25.2103],[-77.89,25.17],[-77.54,24.34],[-77.53466,23.75975]]],[[[-77.82,26.58],[-78.91,26.42],[-78.98,26.79],[-78.51,26.87],[-77.85,26.84],[-77.82,26.58]]],[[[-77,26.59],[-77.17255,25.87918],[-77.35641,26.00735],[-77.34,26.53],[-77.78802,26.92516],[-77.79,27.04],[-77,26.59]]]]}},{type:"Feature",properties:{admin:"Bosnia and Herzegovina",name:"Bosnia and Herz.",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[19.0054862810101,44.8602336696091],[19.36803,44.863],[19.11761,44.42307],[19.59976,44.03847],[19.454,43.5681000000001],[19.21852,43.52384],[19.03165,43.43253],[18.70648,43.20011],[18.56,42.65],[17.674921502359,43.0285625270236],[17.2973734880345,43.4463406438874],[16.9161564470173,43.6677224798257],[16.4564429053489,44.0412397324313],[16.2396602718845,44.3511432968857],[15.750026075919,44.8187116562626],[15.9593673031334,45.2337767604309],[16.3181567725359,45.0041266953259],[16.5349394060002,45.2116075709777],[17.002146030351,45.2337767604309],[17.8617834815264,45.0677403834771],[18.5532141455916,45.0815896673315],[19.0054862810101,44.8602336696091]]]}},{type:"Feature",properties:{admin:"Belarus",name:"Belarus",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[23.4841276384498,53.9124976670411],[24.450683628037,53.9057022161948],[25.536353794057,54.2824234076025],[25.7684326514798,54.8469625921751],[26.5882792497904,55.1671756048717],[26.4943314958838,55.6151069199776],[27.1024597510945,55.7833137070877],[28.176709425578,56.1691299505788],[29.2295133806603,55.9183442246664],[29.3715718930307,55.6700906439362],[29.8962943865224,55.7894632025304],[30.87390913262,55.5509764675034],[30.9718359718131,55.081547756564],[30.7575338070987,54.8117709417843],[31.3844722836637,54.1570563828624],[31.7914241879622,53.9746385768721],[31.7312728207745,53.794029446012],[32.4055985857512,53.618045355842],[32.693643019346,53.3514208034321],[32.3045194841882,53.1327261419729],[31.4976436703829,53.1674268662569],[31.305200636528,53.0739958766732],[31.5400183448623,52.7420523138463],[31.7859981625716,52.1016779648854],[30.927549269339,52.0423534206144],[30.6194543800148,51.8228060980224],[30.5551172218115,51.3195034857156],[30.1573637224609,51.4161384141015],[29.2549381853479,51.3682343613669],[28.9928353207635,51.6020443792715],[28.6176127458922,51.4277139349348],[28.2416150245366,51.5722270778391],[27.4540661964084,51.5923033717845],[26.3379586117686,51.8322887233479],[25.327787713327,51.9106560329185],[24.5531063168395,51.8884610052492],[24.0050777523842,51.6174439560945],[23.5270707536844,51.5784540879302],[23.5080021501687,52.0236465521247],[23.1994938493862,52.4869774440537],[23.7991988461334,52.6910993516066],[23.8049349301178,53.0897313503061],[23.527535841575,53.4701215684065],[23.4841276384498,53.9124976670411]]]}},{type:"Feature",properties:{admin:"Belize",name:"Belize",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-89.1430804105033,17.8083189966493],[-89.1509093899955,17.9554676376004],[-89.0298573473518,18.0015113387725],[-88.8483438789266,17.8831981470402],[-88.4901228502793,18.4868305526416],[-88.3000310940937,18.4999822046599],[-88.2963362291848,18.3532728133833],[-88.1068129137544,18.3486736109093],[-88.1234785631685,18.076674709541],[-88.2853549873228,17.644142971258],[-88.1978667874526,17.4894754094085],[-88.3026407539244,17.1316936304357],[-88.2395179918799,17.0360663924796],[-88.3554282295106,16.5307742375296],[-88.5518245104358,16.2654674341431],[-88.7324336412959,16.2336347518514],[-88.9306127591352,15.8872734644151],[-89.2291216702693,15.8869375676052],[-89.1508060371309,17.0155766870758],[-89.1430804105033,17.8083189966493]]]}},{type:"Feature",properties:{admin:"Bolivia",name:"Bolivia",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-62.8464684719215,-22.0349854468694],[-63.9868381415225,-21.9936443010359],[-64.3770210435422,-22.7980913225235],[-64.9648921372946,-22.0758615048123],[-66.2733394029248,-21.8323104794207],[-67.1066735500636,-22.7359245744764],[-67.8281798977227,-22.8729187964822],[-68.2199130927113,-21.4943466122319],[-68.7571671210337,-20.3726579729045],[-68.4422251044309,-19.4050684546714],[-68.9668184068419,-18.9816834449041],[-69.1002469550195,-18.2601254208127],[-69.590423753524,-17.5800118954193],[-68.9596353827533,-16.5006979305713],[-69.3897641669347,-15.6601290829117],[-69.1603466457749,-15.323973890853],[-69.339534674747,-14.9531954891588],[-68.9488866848366,-14.4536394181933],[-68.9292238023495,-13.602683607643],[-68.88007951524,-12.8997290991767],[-68.6650797186896,-12.5613001440972],[-69.5296781073649,-10.9517343075022],[-68.7861575995495,-11.0363803035963],[-68.2712536281933,-11.0145211727368],[-68.0481923082054,-10.7120590145325],[-67.1738012356107,-10.3068124324996],[-66.6469083319628,-9.93133147546686],[-65.3384352281164,-9.76198780684639],[-65.4448370022054,-10.5114511043754],[-65.321898769783,-10.8958720841947],[-65.402281460213,-11.5662704403172],[-64.3163529120316,-12.4619780412322],[-63.1964987860506,-12.6270325659724],[-62.8030602687964,-13.0006531714427],[-62.1270808579864,-13.1987806128497],[-61.7132043117608,-13.48920216233],[-61.0841212632556,-13.4793836401946],[-60.5033040025111,-13.7759546851177],[-60.45919816755,-14.3540072567346],[-60.2643263413774,-14.6459790991836],[-60.2511488511429,-15.0772189266593],[-60.5429656642951,-15.0939104142896],[-60.158389655179,-16.2582837866901],[-58.2412198553667,-16.2995732560913],[-58.388058437724,-16.8771090633853],[-58.2808040025022,-17.271710300366],[-57.734558274961,-17.5524683570078],[-57.498371141171,-18.1741875139113],[-57.6760088771743,-18.961839694904],[-57.9499973211858,-19.4000041643068],[-57.8538016424745,-19.9699952124862],[-58.166392381408,-20.1767009416537],[-58.1834714422805,-19.8683993466004],[-59.1150424872061,-19.3569060197754],[-60.0435646226265,-19.3427466773274],[-61.7863264634538,-19.633736667563],[-62.2659612697708,-20.5137346330613],[-62.2911793687292,-21.0516346167874],[-62.6850571356579,-22.2490292294224],[-62.8464684719215,-22.0349854468694]]]}},{type:"Feature",properties:{admin:"Brazil",name:"Brazil",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-57.6251334295829,-30.2162948544543],[-56.2908996242391,-28.8527605120009],[-55.1622863429846,-27.8819153785335],[-54.4907252671355,-27.4747567685058],[-53.6487353175879,-26.9234725888161],[-53.6283489650487,-26.1248650041775],[-54.1300496079544,-25.5476392554772],[-54.6252906968236,-25.7392554664155],[-54.4289460923306,-25.1621847470122],[-54.2934763250774,-24.570799655864],[-54.2929595607545,-24.0210140927107],[-54.6528342352351,-23.839578138934],[-55.0279017808095,-24.0012736955752],[-55.4007472397954,-23.9569353166688],[-55.5176393296396,-23.5719975725266],[-55.6106827459811,-22.6556193986948],[-55.7979581366069,-22.3569296200478],[-56.4733174302294,-22.0863001441353],[-56.8815095689029,-22.2821538225215],[-57.9371557277613,-22.0901758765572],[-57.8706739976178,-20.7326876766819],[-58.166392381408,-20.1767009416537],[-57.8538016424745,-19.9699952124862],[-57.9499973211858,-19.4000041643068],[-57.6760088771743,-18.961839694904],[-57.498371141171,-18.1741875139113],[-57.734558274961,-17.5524683570078],[-58.2808040025022,-17.271710300366],[-58.388058437724,-16.8771090633853],[-58.2412198553667,-16.2995732560913],[-60.158389655179,-16.2582837866901],[-60.5429656642951,-15.0939104142896],[-60.2511488511429,-15.0772189266593],[-60.2643263413774,-14.6459790991836],[-60.45919816755,-14.3540072567346],[-60.5033040025111,-13.7759546851177],[-61.0841212632556,-13.4793836401946],[-61.7132043117608,-13.48920216233],[-62.1270808579864,-13.1987806128497],[-62.8030602687964,-13.0006531714427],[-63.1964987860506,-12.6270325659724],[-64.3163529120316,-12.4619780412322],[-65.402281460213,-11.5662704403172],[-65.321898769783,-10.8958720841947],[-65.4448370022054,-10.5114511043754],[-65.3384352281164,-9.76198780684639],[-66.6469083319628,-9.93133147546686],[-67.1738012356107,-10.3068124324996],[-68.0481923082054,-10.7120590145325],[-68.2712536281933,-11.0145211727368],[-68.7861575995495,-11.0363803035963],[-69.5296781073649,-10.9517343075022],[-70.0937522040469,-11.123971856331],[-70.5486856757284,-11.0091468237785],[-70.4818938869912,-9.49011809655884],[-71.3024122789215,-10.0794361304154],[-72.1848907131698,-10.0535979142694],[-72.5630330064656,-9.52019378015272],[-73.2267134263902,-9.46221282312123],[-73.0153826565325,-9.03283334720806],[-73.5710593329671,-8.42444670983583],[-73.9872354804297,-7.52382984785306],[-73.7234014553635,-7.34099863040441],[-73.7244866604416,-6.91859547285064],[-73.1200274319236,-6.62993092206824],[-73.2197112698146,-6.08918873456608],[-72.9645072089412,-5.74125131594489],[-72.8919276597872,-5.27456145591698],[-71.7484057278165,-4.59398284263301],[-70.9288433498836,-4.40159148521037],[-70.7947688463023,-4.2512647436733],[-69.8936352199966,-4.29818694419433],[-69.4441019354896,-1.55628712321982],[-69.4204858059322,-1.12261850342641],[-69.5770653957766,-.549991957200163],[-70.02065589057,-.185156345219539],[-70.0155657619893,.541414292804205],[-69.4523960028725,.706158758950693],[-69.252434048119,.602650865070075],[-69.2186376614002,.985676581217433],[-69.8045967271577,1.08908112223347],[-69.8169732326916,1.71480520263962],[-67.8685650295588,1.69245514567339],[-67.5378100246747,2.03716278727633],[-67.2599975246736,1.71999868408496],[-67.0650481838525,1.13011220947323],[-66.8763258531226,1.25336050048934],[-66.3257651434849,.724452215982012],[-65.5482673814376,.78925446207603],[-65.3547133042884,1.0952822941085],[-64.6110119289599,1.32873057698704],[-64.1993057928905,1.49285492594602],[-64.0830854966661,1.91636912679408],[-63.3687880113116,2.20089956299313],[-63.4228673977051,2.41106761312417],[-64.2699991522658,2.49700552002557],[-64.4088278876179,3.12678620036662],[-64.3684944322141,3.79721039470525],[-64.816064012294,4.05644521729742],[-64.6286594305875,4.14848094320925],[-63.8883428615741,4.02053009685457],[-63.0931975978991,3.77057119385878],[-62.8045330471167,4.00696503337795],[-62.0854296535591,4.16212352133431],[-60.9668932766015,4.53646759685664],[-60.6011791652719,4.91809804933213],[-60.7335741848037,5.2002772078619],[-60.2136834377313,5.2444863956876],[-59.9809586249049,5.01406118409814],[-60.1110023667674,4.57496653891408],[-59.7674057684587,4.42350291586661],[-59.5380399237312,3.95880259848194],[-59.8154131740579,3.60649852133209],[-59.9745249090845,2.75523265218806],[-59.7185457017267,2.24963043864436],[-59.6460436672212,1.78689382568679],[-59.0308615790026,1.31769765869272],[-58.5400129868783,1.26808828369252],[-58.429477098206,1.46394196207872],[-58.113449876525,1.50719513590703],[-57.6609710353774,1.68258494710564],[-57.3358229233969,1.94853770589576],[-56.7827042303608,1.86371084228865],[-56.5393857489145,1.89952260986692],[-55.9956980047717,1.8176671411166],[-55.9056001450709,2.02199575439866],[-56.0733418442903,2.2207949894255],[-55.9733221095894,2.51036387777302],[-55.569755011606,2.42150625244713],[-55.0975874497551,2.52374807373661],[-54.5247541977997,2.31184886312379],[-54.0880625067172,2.10555654541463],[-53.7785206772889,2.37670278565008],[-53.5548392401135,2.33489655192595],[-53.4184651352953,2.05338918701598],[-52.939657151895,2.12485769287564],[-52.5564247300184,2.50470530843705],[-52.2493375311239,3.24109446859624],[-51.6577974106789,4.15623240805303],[-51.3171463690108,4.20349050538395],[-51.0697712876297,3.65039765056403],[-50.5088752915336,1.90156382894246],[-49.974075893745,1.73648346598607],[-49.9471007960887,1.04618968343122],[-50.6992512680969,.222984117021681],[-50.3882108221321,-.078444512536819],[-48.6205667791563,-.235489190271821],[-48.5844966294166,-1.237805271005],[-47.8249564275906,-.5816179337628],[-46.5665836248512,-.941027520352776],[-44.9057030909904,-1.55173959717813],[-44.4176191879937,-2.13775033936798],[-44.5815885076558,-2.69130828207852],[-43.4187912664402,-2.38311003988979],[-41.4726568263282,-2.91201832439712],[-39.978665330554,-2.87305429444904],[-38.5003834701966,-3.70065235760339],[-37.2232521225352,-4.82094573325892],[-36.4529373845764,-5.10940357831215],[-35.5977957830105,-5.14950448977065],[-35.2353889633476,-5.46493743248025],[-34.8960298324868,-6.73819304771971],[-34.729993455533,-7.34322071699297],[-35.1282120427742,-8.99640146244228],[-35.6369665186877,-9.64928150801781],[-37.046518724097,-11.0407211239088],[-37.6836116196074,-12.1711947567258],[-38.4238765121884,-13.0381185848543],[-38.6738870916165,-13.0576522762606],[-38.9532757228025,-13.7933696428],[-38.8822981430496,-15.6670537248388],[-39.1610924952643,-17.2084066708085],[-39.2673392400564,-17.8677462704205],[-39.5835214910342,-18.2622958309689],[-39.7608233302276,-19.5991134579274],[-40.7747407700103,-20.9045118140524],[-40.9447562322506,-21.9373169898378],[-41.7541641912382,-22.3706755510375],[-41.9882842677365,-22.9700704891909],[-43.0747037420247,-22.9676933733055],[-44.6478118556378,-23.3519593238278],[-45.3521357895599,-23.7968417294286],[-46.4720932684055,-24.0889686011745],[-47.6489723374206,-24.8851990699277],[-48.4954581365777,-25.8770248349056],[-48.6410048081277,-26.6236976050909],[-48.4747358872287,-27.1759119605619],[-48.6615203517476,-28.1861345354357],[-48.8884574041574,-28.6741150855679],[-49.5873294744727,-29.2244690894763],[-50.6968741522115,-30.984465020473],[-51.5762261623062,-31.7776982561532],[-52.256081305538,-32.2453699683947],[-52.7120999822977,-33.1965780575912],[-53.3736616684982,-33.7683777809008],[-53.6505439927181,-33.2020040829818],[-53.2095889959715,-32.7276661109747],[-53.7879516261822,-32.0472425269876],[-54.5724515448051,-31.4945114071937],[-55.6015101792493,-30.8538786760714],[-55.9732445949409,-30.8830758603163],[-56.9760257635647,-30.1096863746361],[-57.6251334295829,-30.2162948544543]]]}},{type:"Feature",properties:{admin:"Brunei",name:"Brunei",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[114.204016554828,4.52587392823681],[114.599961379049,4.90001129802997],[115.45071048387,5.44772980389153],[115.405700311344,4.95522756593384],[115.347460972151,4.31663605388701],[114.869557326315,4.34831370688192],[114.659595981914,4.00763682699775],[114.204016554828,4.52587392823681]]]}},{type:"Feature",properties:{admin:"Bhutan",name:"Bhutan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[91.6966565286967,27.7717418482517],[92.1037117858597,27.4526140406332],[92.0334835143751,26.8383104517636],[91.2175126484864,26.808648179628],[90.3732747741341,26.8757241887429],[89.7445276224388,26.71940298106],[88.8356425312894,27.0989663762438],[88.8142484883205,27.2993159042394],[89.4758101745211,28.0427588974064],[90.0158288919712,28.2964385035272],[90.7305139505678,28.0649539250758],[91.2588537943199,28.0406143254663],[91.6966565286967,27.7717418482517]]]}},{type:"Feature",properties:{admin:"Botswana",name:"Botswana",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[25.6491634457502,-18.536025892819],[25.8503914730947,-18.7144129370905],[26.1647908871585,-19.2930856258949],[27.2965047543505,-20.391519870691],[27.7247473487532,-20.4990585262904],[27.7272278175033,-20.8518018531147],[28.0213700701086,-21.4859750302006],[28.7946562029242,-21.6394540341074],[29.432188348109,-22.0913127580676],[28.0172359555252,-22.8277535946591],[27.1194096208862,-23.5743230119798],[26.7864066911974,-24.2406906063835],[26.4857532081233,-24.6163265927131],[25.9416520525222,-24.6963733863332],[25.7658488298652,-25.1748454729237],[25.6646663754377,-25.4868160946697],[25.0251705258258,-25.7196700985769],[24.2112667172288,-25.6702157528736],[23.7335697771227,-25.3901294898516],[23.3120967953502,-25.2686898739657],[22.8242712745149,-25.5004586727948],[22.5795316911806,-25.9794475237081],[22.1059688656579,-26.2802560360791],[21.6058960303694,-26.7265337053518],[20.8896090023717,-26.8285429826959],[20.6664701677354,-26.4774533017049],[20.7586092465118,-25.8681364885514],[20.1657255388272,-24.9179619280008],[19.8957678565344,-24.7677902157606],[19.8954577979407,-21.8491569963479],[20.8811340674759,-21.8143270809831],[20.9106413103145,-18.252218926672],[21.655040317479,-18.2191460100052],[23.1968583513393,-17.8690381812278],[23.5790055681377,-18.2812610816201],[24.2173645362392,-17.8893470191185],[24.5207051937925,-17.8871249325299],[25.0844433936646,-17.6618156877374],[25.264225701608,-17.7365398088314],[25.6491634457502,-18.536025892819]]]}},{type:"Feature",properties:{admin:"Central African Republic",name:"Central African Rep.",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[15.2794604834691,7.42192454673797],[16.1062317237068,7.4970879175065],[16.2905615576919,7.7543073592393],[16.4561845231873,7.73477366783297],[16.7059883968863,7.50832754152998],[17.9649296403809,7.89091400800287],[18.3895548845232,8.28130361575182],[18.9110217627805,8.63089468020635],[18.8120097185093,8.9829145369786],[19.094008009526,9.07484691002584],[20.0596854997643,9.01270600019485],[21.0008683610962,9.47598521569151],[21.7238216488595,10.567055568886],[22.2311291846688,10.9718887394605],[22.8641654802442,11.1423951278075],[22.9775435726926,10.7144625919985],[23.5543042335022,10.0892552759153],[23.5572497901428,9.68121816653868],[23.3947790870172,9.26506785729222],[23.459012892356,8.95428579348889],[23.8058134294667,8.66631887454243],[24.5673690121521,8.22918793378547],[25.1149324887168,7.82510407147917],[25.1241308936647,7.50008515057944],[25.7966479835112,6.97931590415807],[26.2134184099451,6.54660329836207],[26.4659094581232,5.94671743410187],[27.2134090512252,5.55095347739456],[27.3742261085175,5.23394440350006],[27.0440653826047,5.12785268800484],[26.4027608578625,5.15087453859087],[25.6504553565575,5.25608775473712],[25.2787984555143,5.17040822999719],[25.1288334490033,4.92724477784779],[24.8050289242624,4.89724660890235],[24.4105310401463,5.10878408448913],[23.2972139828501,4.60969310141422],[22.8414795264681,4.71012624757348],[22.7041235694363,4.63305084881016],[22.4051237321955,4.02916006104732],[21.65912275563,4.22434194581372],[20.9275911801063,4.32278554932974],[20.2906791521089,4.69167776124529],[19.4677836442931,5.03152781821278],[18.9323124528848,4.70950613038597],[18.5429822119978,4.20178518311832],[18.4530652198099,3.50438589112335],[17.8099003435053,3.56019643799857],[17.1330424333463,3.72819651937945],[16.5370581397241,3.19825470622628],[16.0128524105554,2.26763967529808],[15.9073808122476,2.55738943115861],[15.8627323747475,3.01353729899898],[15.4053959489644,3.33530060466434],[15.0362195166712,3.85136729574712],[14.9509534033897,4.21038930909492],[14.4783724300805,4.73260549562045],[14.5589359880235,5.03059764243153],[14.4594071794293,5.4517605656103],[14.5365600928411,6.22695872642069],[14.7765454444046,6.40849803306204],[15.2794604834691,7.42192454673797]]]}},{type:"Feature",properties:{admin:"Canada",name:"Canada",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[-63.6645,46.55001],[-62.9393,46.41587],[-62.01208,46.44314],[-62.50391,46.03339],[-62.87433,45.96818],[-64.1428,46.39265],[-64.39261,46.72747],[-64.01486,47.03601],[-63.6645,46.55001]]],[[[-61.806305,49.10506],[-62.29318,49.08717],[-63.58926,49.40069],[-64.51912,49.87304],[-64.17322,49.95718],[-62.85829,49.70641],[-61.835585,49.28855],[-61.806305,49.10506]]],[[[-123.510001587551,48.5100108913034],[-124.012890788399,48.3708462591414],[-125.655012777338,48.8250045843385],[-125.954994466793,49.1799958359676],[-126.850004435872,49.5300003118804],[-127.029993449544,49.8149958359701],[-128.059336304366,49.9949590114266],[-128.444584107102,50.5391376816761],[-128.358413656255,50.7706480983437],[-127.30858109603,50.552573554072],[-126.695000977212,50.4009032252954],[-125.755006673823,50.2950182155294],[-125.415001587559,49.9500005153326],[-124.920768189119,49.4752749700834],[-123.922508708321,49.0624836289358],[-123.510001587551,48.5100108913034]]],[[[-56.1340358140171,50.6870097926793],[-56.7958817205953,49.8123086614909],[-56.1431050278843,50.1501174993828],[-55.4714922756029,49.9358153346685],[-55.8224010890809,49.5871286077791],[-54.9351425848457,49.3130109726868],[-54.4737753973438,49.5566911891592],[-53.4765494451913,49.2491389023741],[-53.7860137599712,48.5167805039336],[-53.0861339992263,48.6878036566035],[-52.9586482407622,48.1571642116145],[-52.6480987209042,47.5355484075755],[-53.0691582912183,46.6554987656449],[-53.521456264853,46.6182917343948],[-54.1789355129025,46.807065741557],[-53.9618686590605,47.6252070176019],[-54.2404821437621,47.7522793646076],[-55.4007730780115,46.8849938014531],[-55.9974808416858,46.9197203639533],[-55.2912190415528,47.389562486351],[-56.2507987127805,47.6325450709874],[-57.3252292547771,47.572807115258],[-59.2660151841468,47.6033478867425],[-59.4194941880537,47.8994538437749],[-58.7965864732074,48.2515253769795],[-59.2316245184565,48.5231883815378],[-58.3918049790652,49.1255805527642],[-57.358689744686,50.7182740342158],[-56.738650071832,51.2874382594785],[-55.8709769354353,51.6320942246492],[-55.4069742498866,51.5882726100657],[-55.6002182684421,51.3170746933979],[-56.1340358140171,50.6870097926793]]],[[[-133.180004041712,54.1699754909353],[-132.710007884431,54.0400093154235],[-131.749989584003,54.1200043809092],[-132.049480347351,52.9846214870245],[-131.179042521827,52.1804328476983],[-131.577829549823,52.1823707139092],[-132.180428426779,52.6397071396924],[-132.549992432314,53.1000149603321],[-133.054611178756,53.4114688177554],[-133.239664482793,53.8510802272624],[-133.180004041712,54.1699754909353]]],[[[-79.26582,62.158675],[-79.65752,61.63308],[-80.09956,61.7181],[-80.36215,62.01649],[-80.315395,62.085565],[-79.92939,62.3856],[-79.52002,62.36371],[-79.26582,62.158675]]],[[[-81.89825,62.7108],[-83.06857,62.15922],[-83.77462,62.18231],[-83.99367,62.4528],[-83.25048,62.91409],[-81.87699,62.90458],[-81.89825,62.7108]]],[[[-85.1613079495499,65.6572846543928],[-84.9757637194059,65.217518215589],[-84.4640120104195,65.3717723659802],[-83.8826263089197,65.1096178249635],[-82.7875768704388,64.7666930202747],[-81.6420137193925,64.4551358099869],[-81.5534403144443,63.9796092800371],[-80.8173612128789,64.057485663501],[-80.1034513007666,63.7259813503486],[-80.9910198635957,63.411246039475],[-82.547178107417,63.6517223171452],[-83.108797573565,64.1018757188397],[-84.1004166328139,63.569711819098],[-85.523404710619,63.0523790554241],[-85.8667687649823,63.6372529161035],[-87.2219832018367,63.5412381049052],[-86.3527597724713,64.0358332383707],[-86.2248864407651,64.8229169786083],[-85.8838478258549,65.738778388117],[-85.1613079495499,65.6572846543928]]],[[[-75.86588,67.14886],[-76.98687,67.09873],[-77.2364,67.58809],[-76.81166,68.14856],[-75.89521,68.28721],[-75.1145,68.01036],[-75.10333,67.58202],[-75.21597,67.44425],[-75.86588,67.14886]]],[[[-95.6476812038005,69.1076903583218],[-96.2695212038006,68.7570403583217],[-97.6174012038005,69.0600303583218],[-98.4318012038005,68.9507003583218],[-99.7974012038005,69.4000303583218],[-98.9174012038005,69.7100303583218],[-98.2182612038005,70.1435403583217],[-97.1574012038005,69.8600303583218],[-96.5574012038005,69.6800303583218],[-96.2574012038005,69.4900303583218],[-95.6476812038005,69.1076903583218]]],[[[-90.5471,69.49766],[-90.55151,68.47499],[-89.21515,69.25873],[-88.01966,68.61508],[-88.31749,67.87338],[-87.35017,67.19872],[-86.30607,67.92146],[-85.57664,68.78456],[-85.52197,69.88211],[-84.10081,69.80539],[-82.62258,69.65826],[-81.28043,69.16202],[-81.2202,68.66567],[-81.96436,68.13253],[-81.25928,67.59716],[-81.38653,67.11078],[-83.34456,66.41154],[-84.73542,66.2573],[-85.76943,66.55833],[-86.0676,66.05625],[-87.03143,65.21297],[-87.32324,64.77563],[-88.48296,64.09897],[-89.91444,64.03273],[-90.70398,63.61017],[-90.77004,62.96021],[-91.93342,62.83508],[-93.15698,62.02469],[-94.24153,60.89865],[-94.62931,60.11021],[-94.6846,58.94882],[-93.21502,58.78212],[-92.76462,57.84571],[-92.2970299999999,57.08709],[-90.89769,57.28468],[-89.03953,56.85172],[-88.03978,56.47162],[-87.32421,55.99914],[-86.07121,55.72383],[-85.01181,55.3026],[-83.36055,55.24489],[-82.27285,55.14832],[-82.4362,54.28227],[-82.12502,53.27703],[-81.40075,52.15788],[-79.91289,51.20842],[-79.14301,51.53393],[-78.60191,52.56208],[-79.12421,54.14145],[-79.82958,54.66772],[-78.22874,55.13645],[-77.0956,55.83741],[-76.54137,56.53423],[-76.62319,57.20263],[-77.30226,58.05209],[-78.51688,58.80458],[-77.33676,59.85261],[-77.77272,60.75788],[-78.10687,62.31964],[-77.41067,62.55053],[-75.69621,62.2784],[-74.6682,62.18111],[-73.83988,62.4438],[-72.90853,62.10507],[-71.67708,61.52535],[-71.37369,61.13717],[-69.59042,61.06141],[-69.62033,60.22125],[-69.2879,58.95736],[-68.37455,58.80106],[-67.64976,58.21206],[-66.20178,58.76731],[-65.24517,59.87071],[-64.58352,60.33558],[-63.80475,59.4426],[-62.50236,58.16708],[-61.39655,56.96745],[-61.79866,56.33945],[-60.46853,55.77548],[-59.56962,55.20407],[-57.97508,54.94549],[-57.3332,54.6265],[-56.93689,53.78032],[-56.15811,53.64749],[-55.75632,53.27036],[-55.68338,52.14664],[-56.40916,51.7707],[-57.12691,51.41972],[-58.77482,51.0643],[-60.03309,50.24277],[-61.72366,50.08046],[-63.86251,50.29099],[-65.36331,50.2982],[-66.39905,50.22897],[-67.23631,49.51156],[-68.51114,49.06836],[-69.95362,47.74488],[-71.10458,46.82171],[-70.25522,46.98606],[-68.65,48.3],[-66.55243,49.1331],[-65.05626,49.23278],[-64.17099,48.74248],[-65.11545,48.07085],[-64.79854,46.99297],[-64.47219,46.23849],[-63.17329,45.73902],[-61.52072,45.88377],[-60.51815,47.00793],[-60.4486,46.28264],[-59.80287,45.9204],[-61.03988,45.26525],[-63.25471,44.67014],[-64.24656,44.26553],[-65.36406,43.54523],[-66.1234,43.61867],[-66.16173,44.46512],[-64.42549,45.29204],[-66.02605,45.25931],[-67.13741,45.13753],[-67.79134,45.70281],[-67.79046,47.06636],[-68.23444,47.35486],[-68.905,47.185],[-69.237216,47.447781],[-69.99997,46.69307],[-70.305,45.915],[-70.66,45.46],[-71.08482,45.30524],[-71.405,45.255],[-71.50506,45.0082],[-73.34783,45.00738],[-74.867,45.00048],[-75.31821,44.81645],[-76.375,44.09631],[-76.5,44.0184588937587],[-76.8200341458056,43.6287842880938],[-77.7378850979577,43.6290555893633],[-78.7202799140424,43.6250894231849],[-79.1716735501119,43.4663394231842],[-79.01,43.27],[-78.92,42.965],[-78.9393621487437,42.863611355148],[-80.2474476793479,42.3661998561226],[-81.2777465481671,42.2090259873068],[-82.4392777167916,41.6751050888672],[-82.6900892809202,41.6751050888672],[-83.0298101468069,41.8327957220058],[-83.1419996813126,41.9756810572928],[-83.12,42.08],[-82.9,42.43],[-82.43,42.98],[-82.1376423815039,43.5710875514399],[-82.3377631254311,44.44],[-82.5509246487582,45.3475165879054],[-83.5928507148431,45.8168936224124],[-83.4695507473946,45.9946863877126],[-83.6161309475906,46.1169269882991],[-83.8907653470057,46.1169269882991],[-84.0918512641615,46.2754186061382],[-84.1421195136734,46.5122258571157],[-84.3367,46.40877],[-84.6049,46.4396],[-84.5437487454459,46.5386841904491],[-84.7792382473999,46.637101955749],[-84.8760798815149,46.9000833196824],[-85.6523632474034,47.2202188177305],[-86.4619908312283,47.553338019392],[-87.4397926233002,47.94],[-88.3781141832867,48.3029175888937],[-89.2729174466367,48.0198082545827],[-89.6,48.01],[-90.83,48.27],[-91.64,48.14],[-92.61,48.45],[-93.63087,48.60926],[-94.32914,48.67074],[-94.64,48.84],[-94.81758,49.38905],[-95.15609,49.38425],[-95.159069509172,49],[-97.2287200000048,49.0007],[-100.65,49],[-104.04826,48.99986],[-107.05,49],[-110.05,49],[-113,49],[-116.04818,49],[-117.03121,49],[-120,49],[-122.84,49],[-122.97421,49.0025377777778],[-124.91024,49.98456],[-125.62461,50.41656],[-127.43561,50.83061],[-127.99276,51.71583],[-127.85032,52.32961],[-129.12979,52.75538],[-129.30523,53.56159],[-130.51497,54.28757],[-130.53611,54.80278],[-129.98,55.285],[-130.00778,55.91583],[-131.70781,56.55212],[-132.73042,57.69289],[-133.35556,58.41028],[-134.27111,58.86111],[-134.945,59.27056],[-135.47583,59.78778],[-136.47972,59.46389],[-137.4525,58.905],[-138.34089,59.56211],[-139.039,60],[-140.013,60.27682],[-140.99778,60.30639],[-140.9925,66.00003],[-140.986,69.712],[-139.12052,69.47102],[-137.54636,68.99002],[-136.50358,68.89804],[-135.62576,69.31512],[-134.41464,69.62743],[-132.92925,69.50534],[-131.43136,69.94451],[-129.79471,70.19369],[-129.10773,69.77927],[-128.36156,70.01286],[-128.13817,70.48384],[-127.44712,70.37721],[-125.75632,69.48058],[-124.42483,70.1584],[-124.28968,69.39969],[-123.06108,69.56372],[-122.6835,69.85553],[-121.47226,69.79778],[-119.94288,69.37786],[-117.60268,69.01128],[-116.22643,68.84151],[-115.2469,68.90591],[-113.89794,68.3989],[-115.30489,67.90261],[-113.49727,67.68815],[-110.798,67.80612],[-109.94619,67.98104],[-108.8802,67.38144],[-107.79239,67.88736],[-108.81299,68.31164],[-108.16721,68.65392],[-106.95,68.7],[-106.15,68.8],[-105.34282,68.56122],[-104.33791,68.018],[-103.22115,68.09775],[-101.45433,67.64689],[-99.90195,67.80566],[-98.4432,67.78165],[-98.5586,68.40394],[-97.66948,68.57864],[-96.11991,68.23939],[-96.12588,67.29338],[-95.48943,68.0907],[-94.685,68.06383],[-94.23282,69.06903],[-95.30408,69.68571],[-96.47131,70.08976],[-96.39115,71.19482],[-95.2088,71.92053],[-93.88997,71.76015],[-92.87818,71.31869],[-91.51964,70.19129],[-92.40692,69.69997],[-90.5471,69.49766]]],[[[-114.16717,73.12145],[-114.66634,72.65277],[-112.44102,72.9554],[-111.05039,72.4504],[-109.92035,72.96113],[-109.00654,72.63335],[-108.18835,71.65089],[-107.68599,72.06548],[-108.39639,73.08953],[-107.51645,73.23598],[-106.52259,73.07601],[-105.40246,72.67259],[-104.77484,71.6984],[-104.46476,70.99297],[-102.78537,70.49776],[-100.98078,70.02432],[-101.08929,69.5844700000001],[-102.73116,69.50402],[-102.09329,69.11962],[-102.43024,68.75282],[-104.24,68.91],[-105.96,69.1800000000001],[-107.12254,69.11922],[-109,68.78],[-111.5341488752,68.6300591568179],[-113.3132,68.53554],[-113.85496,69.0074400000001],[-115.22,69.28],[-116.10794,69.16821],[-117.34,69.9600000000001],[-116.67473,70.06655],[-115.13112,70.2373],[-113.72141,70.19237],[-112.4161,70.36638],[-114.35,70.6],[-116.48684,70.52045],[-117.9048,70.5405600000001],[-118.43238,70.9092],[-116.11311,71.30918],[-117.65568,71.2952],[-119.40199,71.55859],[-118.56267,72.30785],[-117.86642,72.70594],[-115.18909,73.3145900000001],[-114.16717,73.12145]]],[[[-104.5,73.42],[-105.38,72.76],[-106.94,73.46],[-106.6,73.6],[-105.26,73.64],[-104.5,73.42]]],[[[-76.34,73.102684989953],[-76.2514038085937,72.8263854980469],[-77.3144378662109,72.8555450439453],[-78.3916702270508,72.8766555786133],[-79.4862518310546,72.7422027587891],[-79.7758331298828,72.8029022216797],[-80.8760986328125,73.3331832885742],[-80.8338851928711,73.6931838989258],[-80.3530578613281,73.7597198486328],[-78.0644378662109,73.6519317626953],[-76.34,73.102684989953]]],[[[-86.5621785143341,73.1574470079384],[-85.7743713040445,72.5341258816338],[-84.8501124742882,73.3402782253871],[-82.315590176101,73.7509508328106],[-80.6000876533076,72.7165436876242],[-80.7489416165244,72.0619066433508],[-78.7706385973108,72.3521731635342],[-77.8246239895596,72.749616604291],[-75.6058446926757,72.2436784939374],[-74.228616095665,71.7671442735579],[-74.0991407945577,71.3308401557176],[-72.2422257147976,71.5569245469945],[-71.2000154283352,70.9200125189972],[-68.7860542466849,70.5250237087742],[-67.9149704657569,70.1219475368976],[-66.9690333726542,69.1860873480919],[-68.8051228502005,68.7201984727644],[-66.4498660956339,68.067163397892],[-64.8623144191952,67.8475385606516],[-63.4249344549967,66.9284732123407],[-61.8519813706806,66.8621206732778],[-62.1631768459423,66.1602513698896],[-63.9184443833842,64.9986685248328],[-65.1488602362536,65.4260326198867],[-66.7212190415985,66.3880410834322],[-68.015016038674,66.2627257351244],[-68.1412874009792,65.6897891303044],[-67.0896461656234,65.108455105237],[-65.7320804510998,64.6484056667586],[-65.3201676093013,64.3827371283461],[-64.6694062974497,63.3929267442275],[-65.0138038804589,62.674185085696],[-66.2750447251905,62.9450987819861],[-68.7831862046927,63.7456700710518],[-67.369680752213,62.8839655625849],[-66.3282972886672,62.280074774822],[-66.1655682033802,61.9308971218259],[-68.8773665025446,62.3301492377128],[-71.0234370591938,62.9107081162958],[-72.235378587519,63.3978360052952],[-71.8862784491713,63.6799893256088],[-73.3783062405184,64.1939631211838],[-74.8344189114226,64.6790756293238],[-74.8185025702767,64.389093329518],[-77.70997982452,64.2295423448168],[-78.5559488593542,64.5729063991801],[-77.8972810533619,65.3091922064748],[-76.0182742987972,65.3269688991831],[-73.9597952948827,65.4547647162409],[-74.2938834296496,65.8117713487294],[-73.9449124823826,66.3105781114267],[-72.6511671617394,67.2845755072639],[-72.9260599433161,67.7269257676824],[-73.3116178046457,68.0694371609129],[-74.8433072577768,68.5546271837013],[-76.8691009182667,68.8947356228303],[-76.2286490546573,69.1477692735474],[-77.2873699612371,69.7695401068833],[-78.1686339993266,69.8264875352689],[-78.9572421943167,70.1668801947754],[-79.4924550035637,69.8718077663889],[-81.3054709540917,69.7431851264143],[-84.9447061835985,69.9666340196444],[-87.0600034248179,70.2600011257654],[-88.6817132230015,70.4107412787608],[-89.513419562523,70.762037665481],[-88.4677211168808,71.2181855333213],[-89.8881512112875,71.2225521918499],[-90.205160285182,72.2350743679608],[-89.4365767077049,73.1294642198524],[-88.4082415433128,73.5378889024712],[-85.8261510892009,73.8038158230452],[-86.5621785143341,73.1574470079384]]],[[[-100.35642,73.84389],[-99.16387,73.63339],[-97.38,73.76],[-97.12,73.47],[-98.05359,72.99052],[-96.54,72.56],[-96.72,71.66],[-98.35966,71.27285],[-99.32286,71.35639],[-100.01482,71.73827],[-102.5,72.51],[-102.48,72.83],[-100.43836,72.70588],[-101.54,73.36],[-100.35642,73.84389]]],[[[-93.1962955391002,72.7719924994733],[-94.2690465970473,72.024596259236],[-95.4098555163226,72.0618808051346],[-96.0337450833824,72.9402768012318],[-96.018267991911,73.4374299180958],[-95.495793423224,73.8624168972642],[-94.5036575996523,74.1349067247392],[-92.4200121732118,74.1000251329422],[-90.5097928535426,73.856732489712],[-92.0039652168299,72.9662442084585],[-93.1962955391002,72.7719924994733]]],[[[-120.46,71.3836017930876],[-123.09219,70.90164],[-123.62,71.34],[-125.928948737473,71.8686884630114],[-125.5,72.292260811795],[-124.80729,73.02256],[-123.94,73.6800000000001],[-124.91775,74.2927500000001],[-121.53788,74.44893],[-120.10978,74.24135],[-117.55564,74.18577],[-116.58442,73.89607],[-115.51081,73.47519],[-116.76794,73.22292],[-119.22,72.52],[-120.46,71.82],[-120.46,71.3836017930876]]],[[[-93.6127559069405,74.9799972602244],[-94.1569087389738,74.5923465033869],[-95.6086805895656,74.6668639187518],[-96.8209321764846,74.9276231960966],[-96.2885874092298,75.3778282742233],[-94.8508198717891,75.6472175157609],[-93.9777465482179,75.296489569796],[-93.6127559069405,74.9799972602244]]],[[[-98.5,76.72],[-97.735585,76.25656],[-97.704415,75.74344],[-98.16,75],[-99.80874,74.89744],[-100.88366,75.05736],[-100.86292,75.64075],[-102.50209,75.5638],[-102.56552,76.3366],[-101.48973,76.30537],[-99.98349,76.64634],[-98.57699,76.58859],[-98.5,76.72]]],[[[-108.21141,76.20168],[-107.81943,75.84552],[-106.92893,76.01282],[-105.881,75.9694],[-105.70498,75.47951],[-106.31347,75.00527],[-109.7,74.85],[-112.22307,74.41696],[-113.74381,74.39427],[-113.87135,74.72029],[-111.79421,75.1625],[-116.31221,75.04343],[-117.7104,75.2222],[-116.34602,76.19903],[-115.40487,76.47887],[-112.59056,76.14134],[-110.81422,75.54919],[-109.0671,75.47321],[-110.49726,76.42982],[-109.5811,76.79417],[-108.54859,76.67832],[-108.21141,76.20168]]],[[[-94.6840858629994,77.0978783230584],[-93.5739210680731,76.7762958849061],[-91.6050231595366,76.7785179714946],[-90.7418458727492,76.4495974799568],[-90.969661424508,76.0740131700594],[-89.8222379218992,75.8477737494856],[-89.1870828925998,75.6101655138076],[-87.8382763333496,75.5661888699272],[-86.3791922675887,75.4824213731822],[-84.7896252102906,75.6992040066465],[-82.7534445869101,75.7843150906312],[-81.1285308499244,75.713983466282],[-80.0575109524591,75.3368488634159],[-79.8339328681483,74.9231273464872],[-80.4577707587758,74.6573037787778],[-81.9488425361255,74.4424590115243],[-83.2288936022114,74.5640278184909],[-86.0974523587333,74.4100320502611],[-88.1503503079602,74.392307033985],[-89.7647220527584,74.5155553250011],[-92.4224409655294,74.837757880341],[-92.7682854886428,75.3868199734421],[-92.8899059720417,75.8826553412826],[-93.893824022176,76.3192436795005],[-95.9624574450358,76.4413809272224],[-97.1213789538295,76.7510777859476],[-96.7451228503123,77.1613886583451],[-94.6840858629994,77.0978783230584]]],[[[-116.198586595507,77.6452867703262],[-116.335813361458,76.8769615750106],[-117.106050584769,76.5300318468191],[-118.040412157038,76.4811717800871],[-119.899317586886,76.053213406062],[-121.499995077126,75.9000186225328],[-122.854924486159,76.1165428738357],[-122.854925293603,76.1165428738357],[-121.157535360328,76.8645075548283],[-119.103938971821,77.5122199571746],[-117.570130784966,77.4983189968881],[-116.198586595507,77.6452867703262]]],[[[-93.840003017944,77.5199972602345],[-94.2956082832452,77.4913426785287],[-96.1696541003101,77.5551113959769],[-96.4363044909361,77.8346292182436],[-94.4225772773864,77.820004787905],[-93.7206562975659,77.6343313666803],[-93.840003017944,77.5199972602345]]],[[[-110.186938035913,77.6970148790503],[-112.051191169058,77.4092288276168],[-113.534278937619,77.7322065294411],[-112.724586758254,78.0510501166819],[-111.264443325631,78.1529560411615],[-109.854451870547,77.9963247748848],[-110.186938035913,77.6970148790503]]],[[[-109.663145718203,78.6019725613457],[-110.881314256619,78.40691986766],[-112.542091437615,78.4079017198735],[-112.525890876092,78.5505545112152],[-111.500010342233,78.8499935981305],[-110.963660651476,78.8044408230652],[-109.663145718203,78.6019725613457]]],[[[-95.8302949694493,78.0569412299632],[-97.309842902398,77.8505972358218],[-98.124289313534,78.0828569607576],[-98.5528678047466,78.4581053738451],[-98.6319844225855,78.8719302436384],[-97.3372314115126,78.8319843614768],[-96.7543987699088,78.765812689927],[-95.5592779202946,78.4183145209803],[-95.8302949694493,78.0569412299632]]],[[[-100.060191820052,78.3247543403159],[-99.6709390938136,77.9075446642074],[-101.303940192453,78.0189848904448],[-102.949808722733,78.3432286648602],[-105.176132778732,78.3803323432457],[-104.210429450277,78.6774201524918],[-105.419580451259,78.9183356798364],[-105.492289191493,79.3015939399292],[-103.529282396238,79.1653490261916],[-100.825158047269,78.8004617377787],[-100.060191820052,78.3247543403159]]],[[[-87.02,79.66],[-85.81435,79.3369],[-87.18756,79.0393],[-89.03535,78.28723],[-90.80436,78.21533],[-92.87669,78.34333],[-93.95116,78.75099],[-93.93574,79.11373],[-93.14524,79.3801],[-94.974,79.37248],[-96.07614,79.70502],[-96.70972,80.15777],[-96.01644,80.60233],[-95.32345,80.90729],[-94.29843,80.97727],[-94.73542,81.20646],[-92.40984,81.25739],[-91.13289,80.72345],[-89.45,80.5093220338983],[-87.81,80.32],[-87.02,79.66]]],[[[-68.5,83.1063215167657],[-65.82735,83.02801],[-63.68,82.9],[-61.85,82.6286],[-61.89388,82.36165],[-64.334,81.92775],[-66.75342,81.72527],[-67.65755,81.50141],[-65.48031,81.50657],[-67.84,80.9],[-69.4697,80.61683],[-71.18,79.8],[-73.2428,79.63415],[-73.88,79.4301622048021],[-76.90773,79.32309],[-75.52924,79.19766],[-76.22046,79.01907],[-75.39345,78.52581],[-76.34354,78.18296],[-77.88851,77.89991],[-78.36269,77.50859],[-79.75951,77.20968],[-79.61965,76.98336],[-77.91089,77.022045],[-77.88911,76.777955],[-80.56125,76.17812],[-83.17439,76.45403],[-86.11184,76.29901],[-87.6,76.42],[-89.49068,76.47239],[-89.6161,76.95213],[-87.76739,77.17833],[-88.26,77.9],[-87.65,77.9702222222222],[-84.97634,77.53873],[-86.34,78.18],[-87.96192,78.37181],[-87.15198,78.75867],[-85.37868,78.9969],[-85.09495,79.34543],[-86.50734,79.73624],[-86.93179,80.25145],[-84.19844,80.20836],[-83.4086956521738,80.1],[-81.84823,80.46442],[-84.1,80.58],[-87.59895,80.51627],[-89.36663,80.85569],[-90.2,81.26],[-91.36786,81.5531],[-91.58702,81.89429],[-90.1,82.085],[-88.93227,82.11751],[-86.97024,82.27961],[-85.5,82.652273458057],[-84.260005,82.6],[-83.18,82.32],[-82.42,82.86],[-81.1,83.02],[-79.30664,83.13056],[-76.25,83.1720588235294],[-75.71878,83.06404],[-72.83153,83.23324],[-70.665765,83.1697807583828],[-68.5,83.1063215167657]]]]}},{type:"Feature",properties:{admin:"Switzerland",name:"Switzerland",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[9.59422610844635,47.5250580918203],[9.63293175623297,47.34760122333],[9.47996951664902,47.1028099635634],[9.93244835779666,46.920728054383],[10.4427014502466,46.8935462509974],[10.3633781266786,46.4835712754099],[9.92283654139038,46.3148994004092],[9.18288170740305,46.440214748717],[8.9663057796678,46.0369318711112],[8.48995242680132,46.0051508652517],[8.31662967289438,46.1636424830909],[7.75599205895983,45.8244900579593],[7.27385094567666,45.7769477402508],[6.8435929704145,45.9911465521006],[6.50009972497042,46.4296727565294],[6.02260949059354,46.2729898138205],[6.037388950229,46.7257787135619],[6.76871382002361,47.2877082383037],[6.73657107913806,47.5418012558828],[7.19220218265551,47.449765529971],[7.46675906742223,47.6205819769118],[8.31730146651415,47.6135798203363],[8.52261193200977,47.8308275416913],[9.59422610844635,47.5250580918203]]]}},{type:"Feature",properties:{admin:"Chile",name:"Chile",continent:"South America"},geometry:{type:"MultiPolygon",coordinates:[[[[-68.6340102275832,-52.6363704588744],[-68.6333499999999,-54.8695],[-67.56244,-54.87001],[-66.95992,-54.89681],[-67.2910299999999,-55.30124],[-68.1486299999998,-55.61183],[-68.6399908108118,-55.5800179990869],[-69.2321,-55.49906],[-69.95809,-55.19843],[-71.00568,-55.05383],[-72.2639,-54.49514],[-73.2852,-53.9575199999999],[-74.66253,-52.83749],[-73.8381,-53.04743],[-72.43418,-53.7154],[-71.10773,-54.07433],[-70.5917799999998,-53.61583],[-70.26748,-52.93123],[-69.3456499999999,-52.5183],[-68.6340102275832,-52.6363704588744]]],[[[-68.2199130927112,-21.4943466122318],[-67.8281798977226,-22.8729187964822],[-67.1066735500636,-22.7359245744764],[-66.9852339341776,-22.9863485653628],[-67.3284429592441,-24.0253032365909],[-68.4176529608761,-24.5185547828169],[-68.3860011460973,-26.1850163713652],[-68.5947997707727,-26.5069088681113],[-68.2955415513704,-26.8993396949358],[-69.0012349107483,-27.5212138811361],[-69.6561303371831,-28.4591411272337],[-70.0135503811299,-29.3679228655185],[-69.9190083482519,-30.3363392066683],[-70.5350689358194,-31.3650102678703],[-70.0743993801536,-33.091209812148],[-69.8147769843192,-33.2738860002998],[-69.8173091295015,-34.1935714657983],[-70.3880494859491,-35.1696875953594],[-70.3647692532017,-36.0050887997899],[-71.1218806627098,-36.6581238746623],[-71.1186250474754,-37.5768274879472],[-70.8146642727347,-38.5529952939407],[-71.413516608349,-38.9160222307911],[-71.6807612779464,-39.8081641578781],[-71.9157340155775,-40.8323393694707],[-71.7468037584155,-42.051386407236],[-72.1488980780785,-42.2548881976014],[-71.9154239569839,-43.4085645485174],[-71.4640561591305,-43.7876111793783],[-71.7936226060719,-44.2071721331561],[-71.3298007880362,-44.4075216611517],[-71.2227788967597,-44.7842428525594],[-71.6593155585453,-44.9736886533414],[-71.5520094468912,-45.5607329241771],[-71.9172584703302,-46.8848381487918],[-72.4473553127803,-47.7385328102535],[-72.3311608547719,-48.2442383766618],[-72.6482474433149,-48.8786182594768],[-73.41543575712,-49.318436374713],[-73.3280509101145,-50.3787850889099],[-72.9757468329646,-50.7414502907343],[-72.3099735175323,-50.6770097796663],[-72.329403856074,-51.4259563128724],[-71.9148038397963,-52.0090223058659],[-69.4983621893961,-52.1427609126372],[-68.5715453762413,-52.2994438553463],[-69.4612843492266,-52.2919507726639],[-69.9427795071061,-52.5379305903732],[-70.8451016913545,-52.8992005285257],[-71.0063321601052,-53.8332520422013],[-71.4297946845209,-53.8564547603004],[-72.5579428778849,-53.5314100011845],[-73.7027567206629,-52.8350692686073],[-73.7027567206629,-52.8350700760515],[-74.9467634752252,-52.262753588419],[-75.2600260077785,-51.6293547503732],[-74.9766324530898,-51.0433956846157],[-75.4797541978835,-50.3783716774516],[-75.6080151028319,-48.6737728818718],[-75.1827697415021,-47.7119194476232],[-74.1265809801047,-46.9392534319951],[-75.6443953111654,-46.647643324572],[-74.6921536933231,-45.763976332381],[-74.3517093573843,-44.1030441220879],[-73.2403560045152,-44.4549606259956],[-72.7178039211798,-42.383355808279],[-73.3888999091382,-42.1175322405696],[-73.7013356187748,-43.3657764625797],[-74.3319431220326,-43.2249581845844],[-74.0179571194272,-41.7948129209068],[-73.6770993720299,-39.9422128232431],[-73.2175925360907,-39.2586886533185],[-73.505559455037,-38.2828825823511],[-73.5880608791911,-37.156284681956],[-73.1667170884993,-37.1237802060444],[-72.5531369696817,-35.508840020491],[-71.8617321438326,-33.9090927060315],[-71.4384504869299,-32.4188994280308],[-71.6687206692224,-30.9206446265925],[-71.3700825670077,-30.095682061485],[-71.4898943752765,-28.8614421526259],[-70.9051238674616,-27.6403797340012],[-70.724953986276,-25.7059241675872],[-70.403965827095,-23.6289966773445],[-70.0912458970807,-21.3933191871012],[-70.164419725206,-19.7564681942562],[-70.3725723944777,-18.3479753557089],[-69.8584435696058,-18.092693780187],[-69.590423753524,-17.5800118954193],[-69.1002469550194,-18.2601254208127],[-68.9668184068418,-18.9816834449041],[-68.4422251044309,-19.4050684546714],[-68.7571671210337,-20.3726579729045],[-68.2199130927112,-21.4943466122318]]]]}},{type:"Feature",properties:{admin:"China",name:"China",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[110.339187860152,18.6783950871476],[109.475209588664,18.1977009139686],[108.655207961056,18.5076819930714],[108.62621748254,19.367887885002],[109.119055617308,19.8210385197694],[110.211598748823,20.1012539738721],[110.786550734502,20.0775344914501],[111.010051304165,19.6959298771907],[110.570646600387,19.2558792180093],[110.339187860152,18.6783950871476]]],[[[127.657407261262,49.7602704941729],[129.39781782442,49.4406000840154],[130.582293328982,48.7296874049761],[130.987281528854,47.7901323512614],[132.5066719911,47.7889696315349],[133.373595819228,48.1834416774349],[135.026311476787,48.4782298854439],[134.500813836811,47.5784398463778],[134.112362095273,47.2124673528867],[133.769643996313,46.1169269882991],[133.097126906466,45.1440664739722],[131.88345421766,45.3211616074364],[131.025212030156,44.9679531927216],[131.288555129116,44.1115196803483],[131.144687941615,42.9299897324269],[130.63386640841,42.9030146347705],[130.640015903852,42.3950094671253],[129.994267205933,42.9853868678438],[129.596668735879,42.4249817978546],[128.052215203972,41.994284572918],[128.208433058791,41.4667715520825],[127.343782993683,41.503151760416],[126.86908328665,41.8165693222662],[126.182045119329,41.1073361272764],[125.079941847841,40.5698237167925],[124.265624627785,39.9284933538341],[122.867570428561,39.6377875839763],[122.131387974131,39.1704517685446],[121.054554478033,38.8974710149629],[121.585994907722,39.3608535833241],[121.376757033373,39.7502613388595],[122.168595005381,40.422442531896],[121.640358514494,40.9463898789033],[120.768628778162,40.5933881699176],[119.639602085449,39.8980559352142],[119.023463983233,39.2523330755111],[118.042748651198,39.2042739934797],[117.532702264477,38.7376358098841],[118.05969852099,38.0614755315611],[118.878149855628,37.8973253443859],[118.911636183754,37.4484638534987],[119.702802362142,37.1563886581851],[120.823457472824,37.870427761378],[121.711258579598,37.4811233587072],[122.357937453298,37.4544841578607],[122.519994744966,36.9306143255018],[121.104163853033,36.6513290471804],[120.637008905115,36.1114395208111],[119.664561802246,35.6097905543377],[119.151208123859,34.9098591171605],[120.227524855634,34.3603319361686],[120.620369093917,33.3767227239251],[121.22901411345,32.4603187118772],[121.90814578663,31.6921743840747],[121.89191938689,30.9493515080951],[121.264257440273,30.6762674016487],[121.503519321785,30.1429149439643],[122.092113885589,29.8325204534032],[121.938428175953,29.0180223658348],[121.684438511238,28.2255126002067],[121.125661248866,28.1356731226672],[120.395473260582,27.0532068954494],[119.58549686084,25.7407805445326],[118.656871372555,24.5473908554002],[117.281606479971,23.6245014510997],[115.890735304835,22.7828732365781],[114.763827345846,22.6680740422417],[114.152546828266,22.2237600773962],[113.806779819801,22.5483397486214],[113.241077915502,22.0513674992705],[111.843592157032,21.5504936792815],[110.785465529424,21.3971438664553],[110.444039341272,20.3410326197064],[109.889861281374,20.2824573837034],[109.627655063925,21.0082270370267],[109.864488153118,21.3950509709475],[108.522812941524,21.7152123072118],[108.050180291783,21.5523798690601],[107.043420037873,21.8118989120299],[106.567273390735,22.2182048609247],[106.725403273548,22.7942678898984],[105.811247186305,22.9768924016179],[105.329209425887,23.352063300057],[104.476858351664,22.8191500920469],[103.504514601661,22.7037566187392],[102.7069922221,22.7087950708877],[102.170435825614,22.4647531193893],[101.652017856862,22.3181987574096],[101.803119744883,21.1743667668451],[101.27002566936,21.2016519230952],[101.180005324308,21.4365729842941],[101.150032993578,21.849984442629],[100.416537713627,21.5588394230967],[99.9834892110216,21.7429367131365],[99.2408988789872,22.1183143173046],[99.5319922220874,22.9490388046126],[98.8987492207828,23.1427220728426],[98.6602624857558,24.06328603769],[97.604719679762,23.8974046900331],[97.7246090026791,25.083637193293],[98.6718380065892,25.9187025009135],[98.7120939473446,26.7435358749402],[98.6826900573705,27.5088121607507],[98.2462309102334,27.7472213811292],[97.9119877461694,28.3359451360144],[97.32711388549,28.2615827499463],[96.2488334492878,28.4110309921345],[96.5865906107475,28.8309795191544],[96.117678664131,29.4528020289225],[95.4048022806646,29.0317166203922],[94.5659904317029,29.27743805594],[93.4133476094327,28.6406293808072],[92.5031189310436,27.8968763290464],[91.6966565286967,27.7717418482516],[91.2588537943199,28.0406143254663],[90.7305139505678,28.0649539250757],[90.0158288919712,28.2964385035272],[89.4758101745212,28.0427588974064],[88.8142484883206,27.2993159042394],[88.7303259622785,28.0868647323676],[88.1204407083699,27.8765416529396],[86.9545170430006,27.9742617864035],[85.8233199401315,28.2035759546987],[85.0116382181231,28.6427739527474],[84.2345797057502,28.8398937037247],[83.8989929544467,29.3202261418776],[83.3371151061372,29.4637315943522],[82.3275126484509,30.1152680526882],[81.5258044778748,30.4227169866087],[81.1112561380293,30.1834809433134],[79.7213668151071,30.8827147486547],[78.738894484374,31.515906073527],[78.458446486326,32.6181643743127],[79.1761287779955,32.4837798121378],[79.2088916360685,32.9943946396137],[78.8110864602857,33.5061980250324],[78.9122689147132,34.3219363469758],[77.8374507994746,35.4940095077878],[76.1928483417857,35.8984034286879],[75.8968974140502,36.6668061386519],[75.158027785141,37.1330309107892],[74.9800024758954,37.4199901393059],[74.8299857929521,37.9900070257014],[74.8648157083168,38.3788463404816],[74.2575142760227,38.6065068629435],[73.9288521666464,38.5058153346227],[73.6753792662548,39.4312368841056],[73.9600130553184,39.6600084498617],[73.8222436868283,39.8939734970631],[74.776862420556,40.3664252792916],[75.4678279967307,40.5620722519487],[76.5263680357974,40.4279460719351],[76.9044844908771,41.0664859075497],[78.187196893226,41.1853158636048],[78.5436609231753,41.5822425400387],[80.1194303730514,42.1239407415382],[80.2599902688853,42.3499992945991],[80.1801501809944,42.9200678574268],[80.8662064961012,43.180362046881],[79.9661063984414,44.9175169948046],[81.9470707539181,45.3170274928531],[82.458925815769,45.5396495631665],[83.1804838398605,47.3300312363507],[85.1642903991132,47.0009557155161],[85.7204838398707,47.4529694687731],[85.7682328633084,48.4557506373969],[86.5987764831034,48.5491816269806],[87.3599703307627,49.2149807806292],[87.7512642760767,49.2971979844055],[88.0138322285517,48.5994627956006],[88.8542977233468,48.069081732773],[90.2808256367639,47.6935490993079],[90.970809360725,46.8881460638229],[90.5857682637183,45.7197160914875],[90.9455395853343,45.2860733099102],[92.1338908223182,45.1150759954564],[93.4807336771413,44.97547211362],[94.6889286641254,44.3523318548285],[95.3068754414715,44.2413308782655],[95.7624548685567,43.3194491643946],[96.3493957865278,42.7256352809286],[97.451757440178,42.7488896754601],[99.51581749878,42.5246914739617],[100.845865513108,42.6638044296914],[101.83304039918,42.5148729518263],[103.312278273535,41.9074681666676],[104.522281935649,41.9083466660166],[104.964993931093,41.5974095729163],[106.129315627062,42.1343277044289],[107.744772576938,42.4815158147819],[109.243595819131,42.5194463160842],[110.412103306115,42.871233628911],[111.12968224492,43.4068340114002],[111.829587843881,43.7431183945395],[111.667737257943,44.0731757675877],[111.348376906379,44.4574417181101],[111.8733061056,45.1020793727351],[112.436062453259,45.0116456162243],[113.463906691544,44.8088931341271],[114.460331658996,45.3398167994939],[115.9850964702,45.727235012386],[116.717868280099,46.3882024196152],[117.421701287914,46.6727328558142],[118.874325799639,46.8054120957236],[119.663269891439,46.6926799586789],[119.772823927898,47.0480587835501],[118.866574334795,47.7470600449462],[118.064142694167,48.0667304551037],[117.295507440257,47.6977090521074],[116.308952671373,47.8534101426028],[115.742837355616,47.7265445013263],[115.485282017073,48.1353825954034],[116.191802199368,49.1345980901991],[116.678800897286,49.8885313991214],[117.879244419426,49.5109833847969],[119.288460728026,50.142882798862],[119.279365675942,50.5829076198273],[120.182049595217,51.643566392618],[120.738191359542,51.9641153021246],[120.725789015792,52.5162263047308],[120.177088657717,52.7538862168412],[121.00308475147,53.2514010687312],[122.245747918793,53.4317259792137],[123.571506789241,53.4588044297346],[125.06821129771,53.1610448268688],[125.946348911646,52.7927985703569],[126.564399041857,51.7842554795327],[126.939156528838,51.3538941514059],[127.287455682485,50.7397972682654],[127.657407261262,49.7602704941729]]]]}},{type:"Feature",properties:{admin:"Ivory Coast",name:"Cte d'Ivoire",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-2.8561250472024,4.99447581625951],[-3.31108435710007,4.98429555909801],[-4.00881954590494,5.17981334067431],[-4.64991736491791,5.16826365805708],[-5.83449622234453,4.99370066977514],[-6.52876909018585,4.70508779542502],[-7.51894120933043,4.33828847901731],[-7.71215938966975,4.36456594483772],[-7.63536821128403,5.18815908448946],[-7.53971513511176,5.31334524171652],[-7.57015255373169,5.7073521997259],[-7.99369259279588,6.12618968345154],[-8.31134762209402,6.19303314862108],[-8.60288021486862,6.46756419517166],[-8.38545162600057,6.91180064536874],[-8.48544552248535,7.39520783124307],[-8.4392984684487,7.68604279218174],[-8.28070349774494,7.68717967369216],[-8.2217923649322,8.12332876223557],[-8.29904863120856,8.3164435897103],[-8.20349890790088,8.45545319257545],[-7.83210038901919,8.57570425051863],[-8.07911373537435,9.37622386315203],[-8.30961646161225,9.78953196862244],[-8.22933712404682,10.1290202905639],[-8.02994361004862,10.2065349390017],[-7.89958980959237,10.2973821069708],[-7.62275916180481,10.1472362329468],[-6.85050655763506,10.1389938419962],[-6.66646094402755,10.4308106551484],[-6.49396501303727,10.4113028019583],[-6.20522294760643,10.5240607772191],[-6.05045203289227,10.0963607853554],[-5.81692623536529,10.2225546330122],[-5.40434159994697,10.3707368026091],[-4.9546532861431,10.1527139347697],[-4.77988359213197,9.82198476810174],[-4.33024695476038,9.61083486575714],[-3.98044918457668,9.8623440617217],[-3.51189897298627,9.90032623945622],[-2.82749630371271,9.64246084231978],[-2.56218950032624,8.21962779381148],[-2.98358496745033,7.37970490155551],[-3.24437008301126,6.2504715031135],[-2.81070146321784,5.38905121502411],[-2.8561250472024,4.99447581625951]]]}},{type:"Feature",properties:{admin:"Cameroon",name:"Cameroon",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[13.0758223812468,2.26709707275901],[12.9513338558556,2.32161570882694],[12.3593803239522,2.19281220133945],[11.7516654801998,2.32675751383999],[11.2764490088437,2.26105093018087],[9.64915815597263,2.28386607503774],[9.79519575362946,3.07340444580912],[9.404366896206,3.7345268823352],[8.94811567550107,3.90412893311714],[8.74492394372942,4.35221527751996],[8.48881554529089,4.49561737712992],[8.50028771325969,4.77198293702685],[8.75753299320863,5.47966583904791],[9.23316287602304,6.44449066815333],[9.5227059261544,6.45348236737212],[10.1182768083183,7.03876963950988],[10.4973751156114,7.05535777427556],[11.0587878760304,6.64442678469059],[11.7457743669185,6.98138296144975],[11.8393087093668,7.39704234458943],[12.0639461605396,7.7998084578723],[12.2188721045506,8.30582408287432],[12.7536715023392,8.71776276288899],[12.955467970439,9.4177717147147],[13.1675997249971,9.64062632897341],[13.3086763851539,10.1603620467489],[13.5729496598946,10.7985659855536],[14.4153788591167,11.5723688826921],[14.468192172919,11.9047516951934],[14.5771777686225,12.0853608260535],[14.1813362972668,12.4836569279431],[14.2135307145846,12.8020354272933],[14.4957873877628,12.8593962671373],[14.8933858578165,12.2190477563926],[14.9601518083376,11.5555740421972],[14.923564894275,10.8913251815175],[15.4678727556053,9.98233673750343],[14.9093538753947,9.99212942142273],[14.6272005550811,9.92091929772454],[14.171466098699,10.0213782820999],[13.954218377344,9.54949494062669],[14.5444665869818,8.96586131432227],[14.9799955583377,8.79610423424347],[15.1208655127653,8.38215017336942],[15.4360917497458,7.69281240481197],[15.2794604834691,7.42192454673797],[14.7765454444046,6.40849803306204],[14.5365600928411,6.22695872642069],[14.4594071794293,5.4517605656103],[14.5589359880235,5.03059764243153],[14.4783724300805,4.73260549562045],[14.9509534033897,4.21038930909492],[15.0362195166712,3.85136729574712],[15.4053959489644,3.33530060466434],[15.8627323747475,3.01353729899898],[15.9073808122476,2.55738943115861],[16.0128524105554,2.26763967529808],[15.9409188168051,1.7276726342803],[15.1463419938852,1.96401479736718],[14.3378125342466,2.22787466064949],[13.0758223812468,2.26709707275901]]]}},{type:"Feature",properties:{admin:"Democratic Republic of the Congo",name:"Dem. Rep. Congo",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[30.8338598975938,3.50916596111034],[30.77334679538,2.33988332764213],[31.1741492042358,2.20446523682126],[30.852670118948,1.84939647054381],[30.4685075212903,1.58380544677972],[30.0861535987627,1.06231273030629],[29.8757788429025,.597379868976304],[29.8195032081366,-.205310153813372],[29.5878377621722,-.58740569417948],[29.5794661801409,-1.34131316488563],[29.2918868344366,-1.62005584066799],[29.2548348324833,-2.21510995850891],[29.1174788754515,-2.29221119548838],[29.0249263852168,-2.83925790773016],[29.276383904749,-3.29390715903406],[29.3399975929003,-4.49998341229409],[29.5199866065729,-5.41997893638631],[29.4199927100882,-5.93999887453943],[29.62003217949,-6.52001515058342],[30.1999967791017,-7.07998097089816],[30.7400154965518,-8.34000741947091],[30.3460860531908,-8.23825652428822],[29.0029122250605,-8.40703175215347],[28.7348665707625,-8.52655934004458],[28.4498710466728,-9.16491830814608],[28.6736816749289,-9.60592498132493],[28.4960697771418,-10.789883721564],[28.3722530453704,-11.7936467424014],[28.6424174333923,-11.9715686987823],[29.3415478858691,-12.3607439103724],[29.6160014177712,-12.1788945451373],[29.6996138852195,-13.2572266577718],[28.9342859229768,-13.2489584286051],[28.523561639121,-12.6986044246967],[28.15510867688,-12.2724805640179],[27.3887988624238,-12.1327474911007],[27.1644197934125,-11.6087484676611],[26.5530875993996,-11.9244397925321],[25.7523096046047,-11.7849651017764],[25.4181181169732,-11.33093596766],[24.7831697934029,-11.238693536019],[24.3145162289479,-11.2628264298993],[24.257155389104,-10.9519926896637],[23.9122152035557,-10.9268262671375],[23.4567908057674,-10.8678634578925],[22.8373454118847,-11.0176217586743],[22.4027982927424,-10.9930754533357],[22.1552681820643,-11.0848011206538],[22.2087532894864,-9.89479623783651],[21.8751819190423,-9.52370777754856],[21.8018013851879,-8.90870655684298],[21.949130893652,-8.30590097415828],[21.7464559262033,-7.92008473066715],[21.7281107927397,-7.2908724910813],[20.5147481625265,-7.29960580813863],[20.6018229509383,-6.93931772219968],[20.0916215349206,-6.94309010175699],[20.0377230160402,-7.11636117923164],[19.4175024756732,-7.1554285620443],[19.1666133968961,-7.73818368899975],[19.0167517432497,-7.98824594486013],[18.4641756527527,-7.84701425540644],[18.134221632569,-7.98767750410492],[17.4729700049622,-8.0685511206417],[17.0899959652472,-7.54568897871253],[16.8601908708452,-7.22229786542998],[16.5731799658961,-6.62264454511509],[16.326528354567,-5.87747039146627],[13.3755973649719,-5.86424122479955],[13.024869419007,-5.98438892987816],[12.7351713395787,-5.9656820613885],[12.3224316748635,-6.10009246177966],[12.1823368669202,-5.78993051516384],[12.4366882666609,-5.68430388755925],[12.4680041846297,-5.248361504745],[12.6316117692658,-4.99127125409294],[12.9955172054652,-4.78110320396188],[13.258240187237,-4.88295745200917],[13.6002348161447,-4.50013844159097],[14.1449560889333,-4.51000864015872],[14.2090348649752,-4.7930921362536],[14.5826037940132,-4.97023894615014],[15.1709916520884,-4.3435071753143],[15.7535400733147,-3.8551648901561],[16.0062895036543,-3.53513274497253],[15.9728031755292,-2.71239226645361],[16.4070919125101,-1.74092701579868],[16.8653068376421,-1.22581633871329],[17.5237162614729,-.743830254726987],[17.63864464689,-.424831638189246],[17.6635526872547,-.058083998213817],[17.8265401547032,.288923244626105],[17.7741919287916,.855658677571085],[17.8988354834796,1.74183197672828],[18.0942757504074,2.36572154378806],[18.3937923519711,2.90044342692822],[18.4530652198099,3.50438589112335],[18.5429822119978,4.20178518311832],[18.9323124528848,4.70950613038597],[19.4677836442931,5.03152781821278],[20.2906791521089,4.69167776124529],[20.9275911801063,4.32278554932974],[21.65912275563,4.22434194581372],[22.4051237321955,4.02916006104732],[22.7041235694363,4.63305084881016],[22.8414795264681,4.71012624757348],[23.2972139828501,4.60969310141422],[24.4105310401463,5.10878408448913],[24.8050289242624,4.89724660890235],[25.1288334490033,4.92724477784779],[25.2787984555143,5.17040822999719],[25.6504553565575,5.25608775473712],[26.4027608578625,5.15087453859087],[27.0440653826047,5.12785268800484],[27.3742261085175,5.23394440350006],[27.9799772478428,4.40841339763737],[28.4289937680269,4.28715464926449],[28.6966776872988,4.45507721599694],[29.1590784034465,4.38926727947323],[29.715995314256,4.60080475506002],[29.9535001970695,4.17369904216768],[30.8338598975938,3.50916596111034]]]}},{type:"Feature",properties:{admin:"Republic of Congo",name:"Congo",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[12.9955172054652,-4.78110320396188],[12.6207597184845,-4.43802336997614],[12.3186076188739,-4.60623015708619],[11.9149630062421,-5.03798674888479],[11.0937728206919,-3.97882659263055],[11.8551216976481,-3.42687061932105],[11.4780387712143,-2.76561899171424],[11.8209635759032,-2.51416147218198],[12.4957027523382,-2.39168832765024],[12.5752844580676,-1.94851124431513],[13.1096187679656,-2.42874032960351],[13.9924072608077,-2.4708049454891],[14.2992102393246,-1.99827564861221],[14.4254557634136,-1.33340667074497],[14.3164184912777,-.552627455247048],[13.8433207536457,.038757635901149],[14.276265903387,1.19692983642662],[14.0266687354172,1.39567739502115],[13.2826314632788,1.31418366129688],[13.0031136410121,1.83089630778332],[13.0758223812468,2.26709707275901],[14.3378125342466,2.22787466064949],[15.1463419938852,1.96401479736718],[15.9409188168051,1.7276726342803],[16.0128524105554,2.26763967529808],[16.5370581397241,3.19825470622628],[17.1330424333463,3.72819651937945],[17.8099003435053,3.56019643799857],[18.4530652198099,3.50438589112335],[18.3937923519711,2.90044342692822],[18.0942757504074,2.36572154378806],[17.8988354834796,1.74183197672828],[17.7741919287916,.855658677571085],[17.8265401547032,.288923244626105],[17.6635526872547,-.058083998213817],[17.63864464689,-.424831638189246],[17.5237162614729,-.743830254726987],[16.8653068376421,-1.22581633871329],[16.4070919125101,-1.74092701579868],[15.9728031755292,-2.71239226645361],[16.0062895036543,-3.53513274497253],[15.7535400733147,-3.8551648901561],[15.1709916520884,-4.3435071753143],[14.5826037940132,-4.97023894615014],[14.2090348649752,-4.7930921362536],[14.1449560889333,-4.51000864015872],[13.6002348161447,-4.50013844159097],[13.258240187237,-4.88295745200917],[12.9955172054652,-4.78110320396188]]]}},{type:"Feature",properties:{admin:"Colombia",name:"Colombia",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-75.3732232327138,-.15203175212045],[-75.8014658271166,.084801337073202],[-76.2923144192409,.416047268064119],[-76.5763797675494,.256935533037435],[-77.4249843004304,.395686753741117],[-77.6686128404704,.825893052570961],[-77.8550614081795,.809925034992773],[-78.8552587551887,1.38092377360182],[-78.990935228171,1.69136994059525],[-78.6178313870237,1.76640412028306],[-78.6621180894978,2.26735545492048],[-78.4276104397573,2.62955556885422],[-77.9315425279715,2.69660573975293],[-77.510431281225,3.32501699463825],[-77.1276897854553,3.84963613526536],[-77.496271938777,4.08760610596943],[-77.3076012844794,4.66798411703945],[-77.5332205878657,5.5828119979025],[-77.3188150702867,5.84535411216136],[-77.4766607327223,6.6911164412663],[-77.8815714179452,7.22377126711478],[-77.7534138658614,7.70983978925214],[-77.431107957657,7.63806122479873],[-77.2425664944401,7.93527822512544],[-77.4747228665113,8.52428620038822],[-77.3533607652739,8.67050466555807],[-76.8366739570035,8.63874949791472],[-76.0863838365578,9.33682058352949],[-75.67460018584,9.4432481958346],[-75.6647041490562,9.77400320071874],[-75.4804259915033,10.6189903833393],[-74.906895107712,11.0830447453203],[-74.2767526923449,11.1020358341876],[-74.1972226630477,11.3104727238369],[-73.4147639635003,11.2270152856855],[-72.6278352525596,11.7319715438255],[-72.2381949530789,11.9555496281363],[-71.7540901353686,12.4373031681773],[-71.3998223537917,12.3760407576953],[-71.1374611070459,12.1129818791135],[-71.3315836249503,11.7762840845158],[-71.9739216783383,11.6086715763771],[-72.2275754462429,11.1087020939532],[-72.6146577623252,10.8219754093818],[-72.9052860175347,10.4503443465548],[-73.0276041327696,9.73677033125244],[-73.30495154488,9.1519998234376],[-72.7887298245004,9.08502716718733],[-72.6604947577681,8.62528778730268],[-72.4398622300979,8.40527537682003],[-72.360900641556,8.00263845461789],[-72.4796789211788,7.63250600832735],[-72.4444872707881,7.42378489830048],[-72.1983524237819,7.34043081301368],[-71.9601757473486,6.99161489504354],[-70.6742335679815,7.08778473553872],[-70.0933129543724,6.96037649172311],[-69.3894799465571,6.09986054119884],[-68.9853185696023,6.20680491782686],[-68.2650524563182,6.15326813397247],[-67.695087246355,6.26731802004065],[-67.3414395819656,6.09546804445402],[-67.5215319485027,5.55687042889197],[-67.7446966213552,5.22112864829167],[-67.8230122544935,4.5039372827289],[-67.6218359035813,3.83948171631999],[-67.3375638495437,3.54234223064172],[-67.3031731838534,3.31845408773718],[-67.8099381171237,2.82065501546957],[-67.4470920477863,2.60028086996087],[-67.181294318293,2.25063812907406],[-66.8763258531226,1.25336050048934],[-67.0650481838525,1.13011220947323],[-67.2599975246736,1.71999868408496],[-67.5378100246747,2.03716278727633],[-67.8685650295588,1.69245514567339],[-69.8169732326916,1.71480520263962],[-69.8045967271577,1.08908112223347],[-69.2186376614002,.985676581217433],[-69.252434048119,.602650865070075],[-69.4523960028725,.706158758950693],[-70.0155657619893,.541414292804205],[-70.02065589057,-.185156345219539],[-69.5770653957766,-.549991957200163],[-69.4204858059322,-1.12261850342641],[-69.4441019354896,-1.55628712321982],[-69.8936352199966,-4.29818694419433],[-70.394043952095,-3.76659148520783],[-70.6926820543097,-3.74287200278586],[-70.0477085028748,-2.7251563452297],[-70.813475714792,-2.25686451580074],[-71.4136457994298,-2.34280242270213],[-71.7747607082854,-2.16978972738894],[-72.3257865058136,-2.43421803142645],[-73.0703922187072,-2.30895435955095],[-73.6595035468346,-1.26049122478113],[-74.1223951890891,-1.00283253337385],[-74.441600511356,-.530820000819887],[-75.1066245185201,-.05720549886486],[-75.3732232327138,-.15203175212045]]]}},{type:"Feature",properties:{admin:"Costa Rica",name:"Costa Rica",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-82.9657830471974,8.22502798098598],[-83.5084372626943,8.44692658124728],[-83.7114739651691,8.65683624921686],[-83.5963130358066,8.83044322350142],[-83.6326415677078,9.05138580976532],[-83.9098856269537,9.29080272057358],[-84.3034016588563,9.48735403079571],[-84.6476442125687,9.61553742109571],[-84.7133507962277,9.90805186608385],[-84.9756603665413,10.086723130733],[-84.9113748847702,9.79599152265892],[-85.1109234280653,9.55703969974131],[-85.3394882880923,9.83454214114866],[-85.660786505867,9.93334747969072],[-85.7974448310628,10.134885565629],[-85.7917087470784,10.4393372664766],[-85.6593137275467,10.7543309595117],[-85.9417254300218,10.8952784285878],[-85.7125404528073,11.0884449324948],[-85.5618519762442,11.2171192489016],[-84.9030033027389,10.9523033716219],[-84.6730690172562,11.0826571720781],[-84.355930752281,10.9992255721429],[-84.1901785957048,10.7934500187567],[-83.8950544908859,10.7268390975324],[-83.6556117418616,10.9387641463614],[-83.4023197089829,10.3954381372447],[-83.0156766425752,9.99298208255555],[-82.5461962552035,9.56613475182467],[-82.9328909980436,9.47681203860817],[-82.9271549140591,9.07433014570291],[-82.7191831123005,8.92570872643149],[-82.8686571927048,8.80726634361852],[-82.8297706774052,8.62629547773237],[-82.9131764391242,8.42351715741907],[-82.9657830471974,8.22502798098598]]]}},{type:"Feature",properties:{admin:"Cuba",name:"Cuba",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-82.268151211257,23.1886107447177],[-81.4044571601468,23.1172714299388],[-80.6187686835812,23.105980129483],[-79.6795236884602,22.7653032495988],[-79.2814859687321,22.3992015650271],[-78.3474344550565,22.5121662460171],[-77.9932958645603,22.2771935083859],[-77.146422492161,21.6578514673678],[-76.5238248359085,21.2068195663244],[-76.1946201239932,21.220565497314],[-75.5982224189127,21.0166244572741],[-75.671060350228,20.735091254148],[-74.9338960435845,20.6939051376114],[-74.1780248684513,20.2846277938597],[-74.2966481187772,20.0503785262807],[-74.9615946112929,19.9234353703557],[-75.6346801418946,19.8737743189232],[-76.323656175426,19.9528909367621],[-77.755480923153,19.8554808618919],[-77.0851084052467,20.4133537866988],[-77.4926545885166,20.6731053736139],[-78.1372922431416,20.7399488387834],[-78.4828267076612,21.0286133895658],[-78.719866502584,21.5981135116384],[-79.2849999661279,21.5591753199065],[-80.2174753486186,21.827324327069],[-80.5175345527214,22.0370789657418],[-81.8209433662032,22.1920565861851],[-82.1699918281186,22.3871092798707],[-81.7950017971926,22.636964830002],[-82.7758979967408,22.6881503361871],[-83.4944587877593,22.1685179712761],[-83.9088004218756,22.1545653345573],[-84.0521508450533,21.9105750594913],[-84.5470301988964,21.8012277287616],[-84.9749110582731,21.8960281438011],[-84.4470621406278,22.2049498560419],[-84.2303570218118,22.5657547063038],[-83.7782399156902,22.7881183944557],[-83.2675475735657,22.9830418970606],[-82.5104361640575,23.0787466496652],[-82.268151211257,23.1886107447177]]]}},{type:"Feature",properties:{admin:"Northern Cyprus",name:"N. Cyprus",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[32.7317802263774,35.1400259465884],[32.8024735857527,35.1455036484114],[32.9469608904408,35.3867033961337],[33.6672270037249,35.3732158473055],[34.5764738299005,35.6715955673588],[33.9008044776842,35.2457559270576],[33.9736165707835,35.058506374648],[33.8664396502101,35.0935946721742],[33.6753918800271,35.0178628606504],[33.5256852556775,35.0386884628641],[33.4758174985158,35.0003445501035],[33.4559220720835,35.1014236516664],[33.3838334490363,35.1627119003646],[33.190977003723,35.1731247014714],[32.9195723813261,35.0878327499736],[32.7317802263774,35.1400259465884]]]}},{type:"Feature",properties:{admin:"Cyprus",name:"Cyprus",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[33.9736165707835,35.058506374648],[34.00488081232,34.9780978460019],[32.9798271013784,34.5718694117554],[32.4902962582775,34.7016547714565],[32.256667107886,35.1032323267966],[32.7317802263774,35.1400259465884],[32.9195723813261,35.0878327499736],[33.190977003723,35.1731247014714],[33.3838334490363,35.1627119003646],[33.4559220720835,35.1014236516664],[33.4758174985158,35.0003445501035],[33.5256852556775,35.0386884628641],[33.6753918800271,35.0178628606504],[33.8664396502101,35.0935946721742],[33.9736165707835,35.058506374648]]]}},{type:"Feature",properties:{admin:"Czech Republic",name:"Czech Rep.",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[16.9602881201946,48.5969823268506],[16.4992826677188,48.7858080104451],[16.0296472510502,48.7338990342079],[15.253415561594,49.0390742051076],[14.9014473812541,48.9644017604458],[14.3388977393247,48.5553052842072],[13.5959456722644,48.8771719427371],[13.0313289730434,49.3070681829732],[12.5210242041612,49.5474152695627],[12.4151908708274,49.9691207952806],[12.2401111182226,50.2663377956073],[12.9668367855432,50.4840764430691],[13.3381319515603,50.7332343613643],[14.0562276546882,50.9269176295943],[14.3070133806006,51.1172677679414],[14.5707182145861,51.0023393825243],[15.0169958838587,51.1066740993216],[15.4909721208397,50.7847299261432],[16.2386267432386,50.6977326523798],[16.1762532894623,50.4226073268579],[16.7194759457144,50.2157465683935],[16.8687691586057,50.473973700556],[17.5545670915511,50.3621459010764],[17.649445021239,50.0490383978199],[18.3929138526222,49.9886286484707],[18.8531441586136,49.4962297633776],[18.5549711442895,49.4950153672188],[18.3999935238462,49.31500051533],[18.170498488038,49.2715147975564],[18.1049727718919,49.0439834661753],[17.9135115902505,48.9964928248991],[17.8864848161618,48.9034752467737],[17.5450069515771,48.8000190293254],[17.1019848975389,48.8169688991171],[16.9602881201946,48.5969823268506]]]}},{type:"Feature",properties:{admin:"Germany",name:"Germany",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[9.92190636560923,54.983104153048],[9.9395797054529,54.5966419541532],[10.9501123389205,54.3636070827332],[10.9394669938684,54.0086933457526],[11.9562524756433,54.1964855007011],[12.5184403825467,54.470370591848],[13.6474670752595,54.0755109727059],[14.1196863135426,53.757029120491],[14.3533154639342,53.2481712917131],[14.0745211117194,52.9812625189253],[14.4375997250022,52.6248501654083],[14.6850264828157,52.0899474147552],[14.6070984229196,51.74518809672],[15.0169958838588,51.1066740993217],[14.5707182145861,51.0023393825244],[14.3070133806007,51.1172677679414],[14.0562276546883,50.9269176295944],[13.3381319515604,50.7332343613643],[12.9668367855432,50.4840764430692],[12.2401111182227,50.2663377956072],[12.4151908708275,49.9691207952806],[12.5210242041613,49.5474152695627],[13.0313289730435,49.3070681829732],[13.5959456722646,48.8771719427372],[13.2433573747371,48.416114813829],[12.8841028174439,48.2891458196878],[13.0258512712205,47.6375835231359],[12.9326269873661,47.467645575544],[12.6207597184845,47.6723876002844],[12.1413574561129,47.7030834010658],[11.4264140153548,47.523766181013],[10.5445040218616,47.5663992376538],[10.4020837744653,47.3024876979392],[9.89606814946319,47.5801968450757],[9.59422610844638,47.5250580918202],[8.52261193200979,47.8308275416913],[8.31730146651409,47.6135798203363],[7.46675906742229,47.6205819769119],[7.59367638513106,48.3330191107037],[8.09927859867486,49.0177835150034],[6.65822960778371,49.2019583196916],[6.18632042809418,49.4638028021145],[6.24275109215699,49.9022256536787],[6.04307335778111,50.1280516627942],[6.15665815595878,50.8037210150106],[5.98865807457781,51.851615709025],[6.58939659997083,51.8520291204834],[6.84286950036238,52.2284402532975],[7.0920532568739,53.1440432806449],[6.90513960127413,53.4821621771306],[7.10042483890527,53.6939321966627],[7.93623945479396,53.7482958034338],[8.12170617028948,53.5277924668443],[8.80073449060467,54.0207856309089],[8.57211795414537,54.395646470754],[8.52622928227021,54.9627436387251],[9.28204878097114,54.8308653835163],[9.92190636560923,54.983104153048]]]}},{type:"Feature",properties:{admin:"Djibouti",name:"Djibouti",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[43.0812260272002,12.6996385767071],[43.3178524106647,12.390148423711],[43.2863814633989,11.9749282902459],[42.7158736508965,11.7356405705183],[43.1453048032421,11.4620396997489],[42.776851841001,10.9268785669344],[42.5549300000001,11.1051100000002],[42.3141400000001,11.0342],[41.7555700000002,11.05091],[41.7395900000002,11.3551100000001],[41.6617600000001,11.6312],[42.0000000000001,12.1000000000001],[42.3515600000001,12.5422300000001],[42.7796423683447,12.4554157576957],[43.0812260272002,12.6996385767071]]]}},{type:"Feature",properties:{admin:"Denmark",name:"Denmark",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[12.6900061377556,55.6099909531808],[12.0899910824147,54.8000145534379],[11.0435433285042,55.3648637966042],[10.9039136084516,55.7799547389887],[12.3709041683533,56.1114073757088],[12.6900061377556,55.6099909531808]]],[[[10.9121818376184,56.4586213242779],[10.66780398931,56.0813833685472],[10.369992710012,56.1900072292247],[9.64998497888931,55.469999498102],[9.92190636560917,54.983104153048],[9.28204878097114,54.8308653835162],[8.52622928227024,54.962743638725],[8.12031090661759,55.5177226833236],[8.08997684086225,56.5400117051376],[8.25658165857126,56.8099693874303],[8.54343753422339,57.1100027533169],[9.42446902836761,57.1720661484995],[9.77555870935856,57.4479407822897],[10.5800057308462,57.7300165879548],[10.5461059912627,57.2157327337861],[10.2500000342302,56.8900161810505],[10.369992710012,56.6099815944608],[10.9121818376184,56.4586213242779]]]]}},{type:"Feature",properties:{admin:"Dominican Republic",name:"Dominican Rep.",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-71.712361416293,19.7144558781674],[-71.5873044501466,19.8849105900821],[-70.8067061021617,19.880285549392],[-70.2143649970161,19.6228852401462],[-69.9508151923276,19.64799998624],[-69.7692500474701,19.2932671167724],[-69.2221258205799,19.3132142196371],[-69.2543460761138,19.0151962346099],[-68.8094119940808,18.9790744084378],[-68.317943284769,18.6121975773817],[-68.6893159654345,18.2051423202186],[-69.1649458482489,18.4226484237351],[-69.6239875962976,18.3807129989302],[-69.9529339260515,18.4283069930711],[-70.1332329983179,18.2459150252969],[-70.5171372138142,18.1842908797888],[-70.6692984686976,18.426885891183],[-70.9999501207172,18.2833287622762],[-71.4002099270339,17.5985643579766],[-71.657661912712,17.7575727401387],[-71.708304816358,18.0449970565461],[-71.6877375963059,18.3166600611045],[-71.9451120673355,18.6169001327203],[-71.7013026597825,18.7854169784241],[-71.6248732164228,19.1698379582433],[-71.712361416293,19.7144558781674]]]}},{type:"Feature",properties:{admin:"Algeria",name:"Algeria",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[11.9995056494716,23.4716684025964],[8.57289310062978,21.5656607121591],[5.67756595218068,19.6012069767997],[4.26741946780004,19.155265204337],[3.1581331722227,19.05736420336],[3.1466610042539,19.6935785995214],[2.68358849448643,19.8562301701601],[2.06099083823392,20.1422333846795],[1.82322757325903,20.610809434486],[-1.55005489745761,22.7926659204974],[-4.92333736817423,24.974574082941],[-8.68439978680905,27.395744126896],[-8.66512447756419,27.5894790715582],[-8.66558956545481,27.6564258895924],[-8.67411617678297,28.8412889673966],[-7.05922766766193,29.5792284205245],[-6.06063229005377,29.7316997340017],[-5.24212927898279,30.0004430201356],[-4.85964616537447,30.5011876490438],[-3.6904410465547,30.8969516057512],[-3.64749793132015,31.6372940129807],[-3.06898027181265,31.7244979924732],[-2.61660478352957,32.0943462183861],[-1.30789913573787,32.2628889023061],[-1.12455115396631,32.6515215113571],[-1.38804928222257,32.8640150009413],[-1.73345455566147,33.919712836232],[-1.79298580566169,34.5279186060912],[-2.16991370279862,35.1683963079167],[-1.20860287108906,35.7148487411871],[-.127454392894606,35.8886624212008],[.503876580415209,36.3012728948353],[1.46691857260655,36.6056470810344],[3.16169884605082,36.7839049342252],[4.81575809084913,36.8650369329235],[5.32012007001779,36.7165188665166],[6.26181969567261,37.1106550156067],[7.33038496260397,37.1183806422344],[7.737078484741,36.8857075058402],[8.42096438969167,36.9464273137832],[8.21782433435231,36.4331769882603],[8.37636762862377,35.4798760035559],[8.1409814795343,34.6551459823938],[7.52448164229224,34.0973764104515],[7.61264163578218,33.344114895149],[8.43047285323337,32.7483373072559],[8.43910281742612,32.5062848984008],[9.05560265466815,32.1026919622013],[9.48213992680527,30.3075560572462],[9.80563439295241,29.4246383733234],[9.85999799972344,28.959989732371],[9.68388471847277,28.1441738957792],[9.75612837081678,27.6882585718841],[9.62905602381107,27.1409534774809],[9.71628584151975,26.5122063257857],[9.31941084151816,26.0943248560574],[9.91069257980177,25.3654546167967],[9.94826134607797,24.9369536402325],[10.3038468766784,24.3793132593709],[10.7713635596229,24.5625320500617],[11.560669386449,24.0979092473255],[11.9995056494716,23.4716684025964]]]}},{type:"Feature",properties:{admin:"Ecuador",name:"Ecuador",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-80.3025605943872,-3.40485645916471],[-79.7702933417809,-2.65751189535964],[-79.9865592109224,-2.22079436606101],[-80.3687839423692,-2.68515878663579],[-80.9677654690643,-2.2469426408007],[-80.764806281238,-1.96504770264853],[-80.9336590237517,-1.05745452230636],[-80.5833703274612,-.906662692878683],[-80.3993247138537,-.283703301600141],[-80.0208982001804,.360340074053468],[-80.0906097073421,.768428859862396],[-79.5427620103998,.982937730305963],[-78.8552587551887,1.38092377360182],[-77.8550614081795,.809925034992773],[-77.6686128404704,.825893052570961],[-77.4249843004304,.395686753741117],[-76.5763797675494,.256935533037435],[-76.2923144192409,.416047268064119],[-75.8014658271166,.084801337073202],[-75.3732232327138,-.15203175212045],[-75.2337227037419,-.911416924649529],[-75.544995693652,-1.56160979574588],[-76.6353942532267,-2.60867766684382],[-77.8379048326586,-3.0030205216631],[-78.4506839667756,-3.87309661216138],[-78.6398972236123,-4.54778411216407],[-79.2052890693177,-4.95912851320739],[-79.6249792141762,-4.45419809328349],[-80.0289080471856,-4.34609099692889],[-80.4422419908721,-4.42572437909067],[-80.4692946031769,-4.059286797709],[-80.1840148587097,-3.82116179770804],[-80.3025605943872,-3.40485645916471]]]}},{type:"Feature",properties:{admin:"Egypt",name:"Egypt",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[34.9226,29.50133],[34.64174,29.09942],[34.42655,28.34399],[34.15451,27.8233],[33.92136,27.6487],[33.58811,27.97136],[33.13676,28.41765],[32.42323,29.85108],[32.32046,29.76043],[32.73482,28.70523],[33.34876,27.69989],[34.10455,26.14227],[34.47387,25.59856],[34.79507,25.03375],[35.69241,23.92671],[35.49372,23.75237],[35.52598,23.10244],[36.69069,22.20485],[36.86623,22],[32.9,22],[29.02,22],[25,22],[25,25.682499996361],[25,29.2386545295335],[24.70007,30.04419],[24.95762,30.6616],[24.80287,31.08929],[25.16482,31.56915],[26.49533,31.58568],[27.45762,31.32126],[28.45048,31.02577],[28.91353,30.87005],[29.68342,31.18686],[30.09503,31.4734],[30.97693,31.55586],[31.68796,31.4296],[31.96041,30.9336],[32.19247,31.26034],[32.99392,31.02407],[33.7734,30.96746],[34.26544,31.21936],[34.9226,29.50133]]]}},{type:"Feature",properties:{admin:"Eritrea",name:"Eritrea",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[42.3515600000001,12.5422300000001],[42.00975,12.86582],[41.59856,13.4520900000001],[41.1551937192498,13.7733198104352],[40.8966,14.1186400000001],[40.0262187029692,14.5195791691623],[39.34061,14.53155],[39.0994,14.74064],[38.51295,14.50547],[37.90607,14.9594300000002],[37.59377,14.2131],[36.42951,14.42211],[36.3231889177981,14.8224805770411],[36.7538603045186,16.2918740910443],[36.8525300000001,16.95655],[37.16747,17.2631400000001],[37.9040000000001,17.42754],[38.4100899594732,17.9983073999703],[38.99062299984,16.8406261255517],[39.266110060388,15.9227234969672],[39.8142936541402,15.4356472844003],[41.1792749366976,14.4910796167532],[41.7349516131323,13.9210368921416],[42.2768306821449,13.3439920109544],[42.5895764503753,13.0004212508619],[43.0812260272002,12.6996385767071],[42.7796423683447,12.4554157576957],[42.3515600000001,12.5422300000001]]]}},{type:"Feature",properties:{admin:"Spain",name:"Spain",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[-9.03481767418024,41.8805705836597],[-8.98443315269567,42.5927751735063],[-9.39288367353064,43.0266246608127],[-7.97818966310831,43.748337714201],[-6.75449174643675,43.5679094508539],[-5.4118863590616,43.5742398138097],[-4.34784277995578,43.403449205085],[-3.51753170410609,43.4559007838613],[-1.90135128417776,43.4228020289783],[-1.50277096191053,43.0340143906304],[.338046909190581,42.5795460068395],[.701590610363894,42.7957343613326],[1.82679324708715,42.3433847112657],[2.98599897625846,42.4730150416699],[3.03948408368055,41.8921202662769],[2.09184166831218,41.2260885686831],[.810524529635188,41.0147319606093],[.721331007499401,40.6783183863892],[.106691521819869,40.123933620762],[-.278711310212941,39.3099781357327],[.111290724293838,38.738514309233],[-.467123582349103,38.2923658310411],[-.683389451490598,37.6423538274578],[-1.43838212727485,37.4430636663242],[-2.14645260253812,36.6741441920373],[-3.41578080892339,36.6588996445112],[-4.36890092611472,36.6778390569461],[-4.99521928549221,36.3247081568796],[-5.37715979656146,35.9468500839615],[-5.8664322575009,36.0298165960061],[-6.23669389487217,36.3676771103303],[-6.5201908024254,36.9429133163873],[-7.45372555177809,37.0977875839661],[-7.53710547528102,37.4289043238762],[-7.16650794109986,37.8038943548022],[-7.02928117514879,38.0757640650898],[-7.37409216961632,38.3730585800649],[-7.09803666831313,39.0300727402238],[-7.49863237143972,39.6295710312418],[-7.06659155926353,39.7118915878828],[-7.02641313315659,40.1845242376242],[-6.86401994467938,40.3308718938748],[-6.85112667482255,41.1110826686175],[-6.38908769370091,41.3818154973946],[-6.66860551596766,41.8833869492196],[-7.25130896649082,41.918346055665],[-7.42251298667379,41.7920746933598],[-8.01317460776991,41.7908861354171],[-8.26385698081779,42.2804686549503],[-8.67194576662672,42.134689439455],[-9.03481767418024,41.8805705836597]]]}},{type:"Feature",properties:{admin:"Estonia",name:"Estonia",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[24.3128625831146,57.793423570377],[24.4289278500422,58.3834133978533],[24.0611983578532,58.2573745794934],[23.4265600928767,58.6127534043646],[23.3397953630586,59.1872403021534],[24.6042143083762,59.465853786855],[25.8641890805166,59.6110903998113],[26.9491357764845,59.4458033311258],[27.9811141293532,59.4753880886129],[28.1316992530517,59.3008251003309],[27.4201664568249,58.7245812038442],[27.7166858253157,57.7918991156244],[27.2881848487515,57.4745283067038],[26.4635323422378,57.4763886582663],[25.6028096859844,57.8475287949866],[25.1645935401493,57.9701569688152],[24.3128625831146,57.793423570377]]]}},{type:"Feature",properties:{admin:"Ethiopia",name:"Ethiopia",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[37.90607,14.9594300000002],[38.51295,14.50547],[39.0994,14.74064],[39.34061,14.53155],[40.0262500000001,14.51959],[40.8966,14.1186400000001],[41.1552,13.77333],[41.59856,13.4520900000001],[42.00975,12.86582],[42.3515600000001,12.5422300000001],[42.0000000000001,12.1000000000001],[41.6617600000001,11.6312],[41.7395900000002,11.3551100000001],[41.7555700000002,11.05091],[42.3141400000001,11.0342],[42.5549300000001,11.1051100000002],[42.776851841001,10.9268785669344],[42.55876,10.5725800000001],[42.92812,10.0219400000001],[43.29699,9.54048000000017],[43.67875,9.18358000000012],[46.94834,7.99688],[47.78942,8.003],[44.9636,5.00162000000012],[43.66087,4.95755],[42.7696700000001,4.25259000000022],[42.12861,4.23413000000016],[41.8550830926441,3.91891192048376],[41.1718000000001,3.91909],[40.7684800000001,4.25702000000012],[39.8549400000001,3.83879000000013],[39.5593842587659,3.42206000000022],[38.89251,3.50074],[38.67114,3.61607],[38.4369700000001,3.58851],[38.1209150000001,3.598605],[36.8550932380082,4.44786412767286],[36.1590786328556,4.44786412767286],[35.8174476623536,4.77696566346202],[35.8174476623536,5.33823208279085],[35.2980071182331,5.506],[34.70702,6.59422000000012],[34.25032,6.82607],[34.0751000000002,7.22595],[33.56829,7.71334],[32.9541800000002,7.7849700000001],[33.2948000000001,8.35458],[33.8255000000001,8.37916],[33.97498,8.68456000000015],[33.96162,9.58358],[34.25745,10.63009],[34.7311500000001,10.9101700000001],[34.8316300000001,11.3189600000001],[35.26049,12.08286],[35.8636300000002,12.57828],[36.27022,13.5633300000001],[36.42951,14.42211],[37.59377,14.2131],[37.90607,14.9594300000002]]]}},{type:"Feature",properties:{admin:"Finland",name:"Finland",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[28.5919295590432,69.0647769232866],[28.4459436378187,68.364612942164],[29.9774263852206,67.6982970241926],[29.0545886573523,66.9442862006219],[30.21765,65.80598],[29.544429559047,64.9486715765905],[30.4446846860037,64.2044534369391],[30.0358724301427,63.5528136257385],[31.5160921567111,62.8676874864129],[31.1399910824909,62.3576927761244],[30.2111072120444,61.7800277777497],[28.0699975928953,60.5035165472758],[26.255172967237,60.4239606797625],[24.4966239763445,60.0573163926516],[22.8696948584995,59.8463731960362],[22.2907637875336,60.3919212917415],[21.3222440935193,60.7201699896595],[21.5448661638327,61.7053294948718],[21.0592110531537,62.6073932969587],[21.5360294939108,63.1897350124559],[22.442744174904,63.8178103705313],[24.7305115088975,64.9023436550408],[25.3980676612439,65.1114265000937],[25.2940430030404,65.5343464219704],[23.9033785336338,66.0069273952796],[23.5658797543356,66.3960509304374],[23.5394730974344,67.9360086127352],[21.9785347836261,68.6168456081807],[20.6455928890895,69.1062472602009],[21.2449361508107,69.3704430202931],[22.3562378272474,68.8417414415149],[23.6620495948308,68.8912474636505],[24.7356791521267,68.6495567898215],[25.6892126807764,69.092113755969],[26.1796220232262,69.8252989773261],[27.7322921078679,70.1641930202962],[29.015572950972,69.766491197378],[28.5919295590432,69.0647769232866]]]}},{type:"Feature",properties:{admin:"Fiji",name:"Fiji",continent:"Australia"},geometry:{type:"MultiPolygon",coordinates:[[[[178.3736,-17.33992],[178.71806,-17.62846],[178.55271,-18.15059],[177.93266,-18.28799],[177.38146,-18.16432],[177.28504,-17.72465],[177.67087,-17.38114],[178.12557,-17.50481],[178.3736,-17.33992]]],[[[179.364142661964,-16.8013540769468],[178.725059362997,-17.012041674368],[178.596838595117,-16.63915],[179.096609362997,-16.4339842775474],[179.413509362997,-16.3790542775474],[180,-16.0671326636424],[180,-16.5552165666392],[179.364142661964,-16.8013540769468]]],[[[-179.917369384765,-16.5017831356494],[-180,-16.5552165666392],[-180,-16.0671326636424],[-179.793320109049,-16.0208822567412],[-179.917369384765,-16.5017831356494]]]]}},{type:"Feature",properties:{admin:"Falkland Islands",name:"Falkland Is.",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-61.2,-51.85],[-60,-51.25],[-59.15,-51.5],[-58.55,-51.1],[-57.75,-51.55],[-58.05,-51.9],[-59.4,-52.2],[-59.85,-51.85],[-60.7,-52.3],[-61.2,-51.85]]]}},{type:"Feature",properties:{admin:"France",name:"France",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[-52.5564247300184,2.50470530843705],[-52.939657151895,2.12485769287562],[-53.4184651352953,2.05338918701604],[-53.5548392401135,2.33489655192596],[-53.7785206772889,2.37670278565005],[-54.0880625067173,2.10555654541463],[-54.5247541977997,2.31184886312379],[-54.2712296209758,2.73874787028694],[-54.1842840236447,3.19417226807523],[-54.0115038722768,3.62256989177486],[-54.3995422023565,4.21261139568348],[-54.4786329819792,4.89675568279564],[-53.9580446030709,5.75654816326781],[-53.6184529282648,5.6465290389184],[-52.8821412827541,5.4098509790216],[-51.8233428615259,4.56576813396614],[-51.6577974106789,4.15623240805303],[-52.249337531124,3.24109446859629],[-52.5564247300184,2.50470530843705]]],[[[9.56001631026913,42.1524919703796],[9.22975223149177,41.3800068222644],[8.77572309737536,41.5836119654944],[8.54421268070783,42.2565166285831],[8.74600914880759,42.6281218531939],[9.3900008480289,43.0099848496147],[9.56001631026913,42.1524919703796]]],[[[3.58818444175571,50.3789924180036],[4.28602298342514,49.9074966497725],[4.79922163251575,49.9853730332363],[5.67405195478489,49.5294835475574],[5.89775923017638,49.4426671413072],[6.1863204280942,49.4638028021144],[6.65822960778354,49.2019583196916],[8.09927859867477,49.0177835150034],[7.59367638513106,48.3330191107037],[7.46675906742223,47.6205819769119],[7.19220218265553,47.449765529971],[6.73657107913809,47.5418012558829],[6.76871382002363,47.2877082383037],[6.03738895022897,46.7257787135619],[6.02260949059357,46.2729898138205],[6.50009972497045,46.4296727565294],[6.84359297041456,45.9911465521007],[6.80235517744566,45.7085798203287],[7.09665245934784,45.3330988632959],[6.74995527510171,45.0285179713676],[7.00756229007666,44.2547667506614],[7.54959638838616,44.1279011093848],[7.43518476729184,43.6938449163492],[6.52924523278307,43.1288923203184],[4.5569625179314,43.3996509873116],[3.10041059735272,43.0752005071671],[2.98599897625849,42.4730150416699],[1.82679324708718,42.3433847112657],[.701590610363922,42.7957343613326],[.338046909190581,42.5795460068396],[-1.50277096191047,43.0340143906305],[-1.90135128417774,43.4228020289783],[-1.38422522623296,44.0226103785902],[-1.19379757323736,46.0149177109549],[-2.22572424967379,47.0643626979382],[-2.96327612955957,47.570326646508],[-4.49155493815948,47.9549543320564],[-4.59234981934475,48.6841604681269],[-3.29581397135775,48.9016924098596],[-1.61651078938493,48.6444212916946],[-1.93349402506325,49.7763418646158],[-.98946895995536,49.3473758001609],[1.33876102052275,50.1271731634453],[1.6390010921385,50.9466063502975],[2.51357303224617,51.1485061712619],[2.65842207196033,50.7968480495156],[3.12325158042572,50.7803632676145],[3.58818444175571,50.3789924180036]]]]}},{type:"Feature",properties:{admin:"Gabon",name:"Gabon",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[11.0937728206919,-3.97882659263055],[10.0661352881357,-2.96948251710568],[9.40524539555497,-2.14431324626904],[8.79799563969317,-1.1113013647545],[8.83008670414642,-.779073581550037],[9.04841963057959,-.459351494960217],[9.29135053878369,.268666083167687],[9.49288862472198,1.01011953369149],[9.83028405115564,1.0678937849938],[11.2850789730365,1.05766185140001],[11.2764490088437,2.26105093018087],[11.7516654801998,2.32675751383999],[12.3593803239522,2.19281220133945],[12.9513338558556,2.32161570882694],[13.0758223812468,2.26709707275901],[13.0031136410121,1.83089630778332],[13.2826314632788,1.31418366129688],[14.0266687354172,1.39567739502115],[14.276265903387,1.19692983642662],[13.8433207536457,.038757635901149],[14.3164184912777,-.552627455247048],[14.4254557634136,-1.33340667074497],[14.2992102393246,-1.99827564861221],[13.9924072608077,-2.4708049454891],[13.1096187679656,-2.42874032960351],[12.5752844580676,-1.94851124431513],[12.4957027523382,-2.39168832765024],[11.8209635759032,-2.51416147218198],[11.4780387712143,-2.76561899171424],[11.8551216976481,-3.42687061932105],[11.0937728206919,-3.97882659263055]]]}},{type:"Feature",properties:{admin:"United Kingdom",name:"United Kingdom",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[-5.6619486149219,54.5546031764838],[-6.19788489422098,53.8675650091633],[-6.95373023113799,54.0737022975756],[-7.57216793459108,54.059956366586],[-7.36603064617879,54.5958409694527],[-7.57216793459108,55.1316222194549],[-6.73384701173614,55.1728600124238],[-5.6619486149219,54.5546031764838]]],[[[-3.00500484863528,58.6350001084663],[-4.07382849772802,57.5530248073553],[-3.05500179687766,57.6900190293609],[-1.95928056477692,57.6847997096995],[-2.2199881656893,56.8700174017535],[-3.11900305827112,55.9737930365155],[-2.08500932454302,55.9099984808513],[-2.00567567967386,55.8049028503502],[-1.11499101399221,54.6249864772654],[-.4304849918542,54.4643761257021],[.184981316742039,53.325014146531],[.469976840831777,52.929999498092],[1.68153079591474,52.739520168664],[1.55998782716438,52.099998480836],[1.05056155763091,51.8067605657957],[1.4498653499503,51.289427802122],[.550333693045502,50.7657388372759],[-.787517462558639,50.7749889186562],[-2.48999752441438,50.5000186224312],[-2.95627397298404,50.696879991247],[-3.61744808594233,50.2283556178727],[-4.54250790039924,50.3418370631857],[-5.24502315919113,49.9599999049811],[-5.7765669417453,50.1596776393568],[-4.30998979330184,51.2100011256891],[-3.41485063314212,51.4260086126692],[-3.42271946710832,51.4268481674061],[-4.98436723471087,51.593466091511],[-5.26729570150889,51.9914004583746],[-4.22234656413485,52.3013556992614],[-4.77001339356411,52.8400049912556],[-4.57999915202691,53.4950037705552],[-3.09383067378866,53.4045474006697],[-3.09207963704711,53.4044408229635],[-2.94500851074434,53.9849997015467],[-3.61470082543303,54.6009367732926],[-3.63000545898933,54.615012925833],[-4.844169073903,54.7909711777868],[-5.08252661784922,55.0616006536994],[-4.71911210775664,55.5084726019435],[-5.04798092286211,55.7839855007075],[-5.58639767091114,55.3111461452368],[-5.64499874513018,56.2750149603448],[-6.14998084148635,56.7850096706335],[-5.78682471355529,57.8188483750646],[-5.00999874512757,58.63001333275],[-4.21149451335356,58.5508450384792],[-3.00500484863528,58.6350001084663]]]]}},{type:"Feature",properties:{admin:"Georgia",name:"Georgia",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[41.5540841001107,41.5356562363276],[41.7031706072727,41.9629428167329],[41.4534700864384,42.6451233994179],[40.8754691912538,43.0136280380913],[40.3213944842203,43.1286339381568],[39.9550085792709,43.4349976669992],[40.0769649594798,43.5531041530023],[40.9221846860456,43.3821585149808],[42.3943945656088,43.2203079290426],[43.7560168800674,42.7408281520225],[43.9311999855368,42.5549738632848],[44.537622918482,42.7119927028036],[45.4702791684857,42.50278066667],[45.7764103533828,42.0924439560564],[46.4049507993488,41.8606751572273],[46.145431756379,41.7228024358726],[46.6379081561206,41.1816726751282],[46.5016374041669,41.0644446884741],[45.9626005389304,41.1238725856098],[45.2174263852816,41.411451931314],[44.9724800962181,41.2481285670556],[43.5827458025927,41.0921432561826],[42.6195487811045,41.5831727158199],[41.5540841001107,41.5356562363276]]]}},{type:"Feature",properties:{admin:"Ghana",name:"Ghana",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[1.06012169760493,5.92883738852888],[-.507637905265938,5.34347260174268],[-1.06362464029419,5.00054779705381],[-1.96470659016759,4.71046214438337],[-2.8561250472024,4.99447581625951],[-2.81070146321784,5.38905121502411],[-3.24437008301126,6.2504715031135],[-2.98358496745033,7.37970490155551],[-2.56218950032624,8.21962779381148],[-2.82749630371271,9.64246084231978],[-2.96389624674711,10.3953347843801],[-2.94040930827046,10.9626903345126],[-1.20335771321143,11.0098192407627],[-.761575893548183,10.9369296330151],[-.438701544588582,11.0983409692787],[.023802524423701,11.0186817489008],[-.049784715159944,10.7069178328839],[.367579990245389,10.1912128768272],[.365900506195885,9.46500397382948],[.461191847342121,8.67722260175601],[.712029249686878,8.31246450442383],[.490957472342245,7.41174428957647],[.570384148774849,6.91435862876719],[.836931186536333,6.27997874595215],[1.06012169760493,5.92883738852888]]]}},{type:"Feature",properties:{admin:"Guinea",name:"Guinea",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-8.4392984684487,7.68604279218174],[-8.72212358238212,7.71167430259851],[-8.926064622422,7.30903738039638],[-9.20878638349084,7.31392080324795],[-9.40334815106975,7.52690521893891],[-9.33727983238458,7.92853445071135],[-9.75534216962583,8.54105520266692],[-10.0165665348613,8.42850393313523],[-10.2300935530913,8.40620555260129],[-10.5054772607747,8.3488963891896],[-10.4943151513996,8.71554067630043],[-10.6547704736659,8.97717845299419],[-10.622395188835,9.26791006106828],[-10.8391519840833,9.68824616133037],[-11.1174812484073,10.0458729110063],[-11.9172773909887,10.0469839543006],[-12.150338100625,9.85857168216438],[-12.4259285140376,9.83583405195595],[-12.5967191227622,9.62018830000197],[-12.7119575667731,9.34271169681077],[-13.2465502588325,8.90304861087151],[-13.6851539779098,9.49474376061346],[-14.0740449691223,9.88616689700825],[-14.3300758529124,10.015719712764],[-14.5796988590983,10.2144672713585],[-14.6932319808435,10.656300767454],[-14.8395537988779,10.8765715600981],[-15.1303112451682,11.0404116886795],[-14.6856872217289,11.5278237980565],[-14.3821915348787,11.5092719588637],[-14.1214064193178,11.6771170109477],[-13.9007997298638,11.6787189803487],[-13.7431607731574,11.8112690291774],[-13.8282718571421,12.142644151249],[-13.7187436588995,12.2471855737755],[-13.7004760400843,12.5861829696102],[-13.2178181624782,12.575873521368],[-12.4990506657306,12.3320899520311],[-12.2785990055734,12.3544400089973],[-12.2035648258856,12.4656476912894],[-11.6583009505579,12.3865827498828],[-11.5139428369506,12.4429875757294],[-11.4561685856483,12.0768342147253],[-11.2975736149445,12.0779710962358],[-11.0365559554383,12.2112446151165],[-10.8708296370782,12.1778874780721],[-10.5932238428063,11.923975328006],[-10.1652137923488,11.8440835636827],[-9.89099280439201,12.060478623905],[-9.56791174970321,12.1942430688925],[-9.32761633954601,12.3342862004035],[-9.12747351727958,12.3080604110153],[-8.90526485842453,12.0883580591264],[-8.78609900555946,11.8125609399847],[-8.37630489748491,11.3936459416106],[-8.58130530438677,11.1362456323648],[-8.62032101076713,10.8108908146552],[-8.40731075686003,10.9092569035228],[-8.28235714357828,10.7925973576238],[-8.33537716310974,10.4948119165419],[-8.02994361004862,10.2065349390017],[-8.22933712404682,10.1290202905639],[-8.30961646161225,9.78953196862244],[-8.07911373537435,9.37622386315203],[-7.83210038901919,8.57570425051863],[-8.20349890790088,8.45545319257545],[-8.29904863120856,8.3164435897103],[-8.2217923649322,8.12332876223557],[-8.28070349774494,7.68717967369216],[-8.4392984684487,7.68604279218174]]]}},{type:"Feature",properties:{admin:"Gambia",name:"Gambia",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-16.8415246240813,13.1513939478026],[-16.7137288070235,13.5949586043799],[-15.6245963200399,13.6235873478696],[-15.3987703109245,13.8603687606309],[-15.0817353988138,13.876491807506],[-14.6870308089685,13.6303569604998],[-14.3767138330558,13.6256802433774],[-14.0469923568175,13.7940678980004],[-13.8449633447724,13.505041612192],[-14.2777017887846,13.2805850285322],[-14.7121972314946,13.2982066919438],[-15.1411632959495,13.5095116235852],[-15.5118125065629,13.2785696476729],[-15.691000535535,13.2703530949385],[-15.9312959456922,13.1302841252113],[-16.8415246240813,13.1513939478026]]]}},{type:"Feature",properties:{admin:"Guinea Bissau",name:"Guinea-Bissau",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-15.1303112451682,11.0404116886795],[-15.6641804671755,11.4584740259208],[-16.0852141992736,11.5245940210382],[-16.3147867497302,11.8065147974065],[-16.3089473128812,11.9587018905061],[-16.6138382634033,12.1709111597127],[-16.6774519515546,12.3848515894011],[-16.1477168441306,12.5477615422012],[-15.8165742660043,12.5155671248833],[-15.548476935274,12.6281700708473],[-13.7004760400843,12.5861829696102],[-13.7187436588995,12.2471855737755],[-13.8282718571421,12.142644151249],[-13.7431607731574,11.8112690291774],[-13.9007997298638,11.6787189803487],[-14.1214064193178,11.6771170109477],[-14.3821915348787,11.5092719588637],[-14.6856872217289,11.5278237980565],[-15.1303112451682,11.0404116886795]]]}},{type:"Feature",properties:{admin:"Equatorial Guinea",name:"Eq. Guinea",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[9.49288862472198,1.01011953369149],[9.30561323409626,1.16091136311918],[9.64915815597263,2.28386607503774],[11.2764490088437,2.26105093018087],[11.2850789730365,1.05766185140001],[9.83028405115564,1.0678937849938],[9.49288862472198,1.01011953369149]]]}},{type:"Feature",properties:{admin:"Greece",name:"Greece",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[23.699980096133,35.7050043808355],[24.2466650733487,35.3680223658602],[25.0250154965289,35.424995632462],[25.7692077979642,35.3540180527091],[25.7450232276516,35.1799976669662],[26.2900028826017,35.2999903427479],[26.1649975928877,35.0049954290098],[24.7249821306423,34.9199876978896],[24.7350073585069,35.0849905461976],[23.5149784685281,35.279991563451],[23.699980096133,35.7050043808355]]],[[[26.6041955909363,41.5621145696611],[26.2946020850758,40.9362612981742],[26.0569421729655,40.8241234401008],[25.4476770362442,40.8525454778615],[24.9258484229609,40.9470616725232],[23.7148112322008,40.6871292180951],[24.4079988949641,40.1249929876241],[23.8999678891026,39.9620055201756],[23.3429993018608,39.9609978297458],[22.813987664489,40.4760051539666],[22.6262988624048,40.2565611842392],[22.8497477556348,39.6593108180258],[23.3500272966526,39.1900112981673],[22.9730993995155,38.9709032252497],[23.530016310325,38.5100011256385],[24.0250248552489,38.2199929876164],[24.0400110206136,37.6550145533694],[23.1150028825891,37.9200112981622],[23.4099719581111,37.4099907496574],[22.7749719581086,37.3050100774566],[23.1542252946986,36.422505804992],[22.4900281104511,36.4100001083774],[21.6700264828437,36.8449864771942],[21.2950106137016,37.6449893255047],[21.1200342139613,38.3103233912627],[20.7300321794546,38.7699852564988],[20.2177120297129,39.3402346868396],[20.1500159034105,39.624997666984],[20.6150004411728,40.1100068222594],[20.6749967790636,40.4349999049431],[20.9999898617473,40.580003973954],[21.0200403174764,40.8427269557259],[21.674160597427,40.931274522458],[22.0553776384443,41.1498658310527],[22.597308383889,41.1304871689432],[22.76177,41.3048],[22.9523771501666,41.3379938828112],[23.6920736019925,41.3090809189439],[24.492644891058,41.583896185872],[25.1972013689255,41.2344859889307],[26.1061381365072,41.3288988307278],[26.1170418637209,41.8269046087247],[26.6041955909363,41.5621145696611]]]]}},{type:"Feature",properties:{admin:"Greenland",name:"Greenland",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-46.76379,82.62796],[-43.40644,83.22516],[-39.89753,83.18018],[-38.62214,83.54905],[-35.08787,83.64513],[-27.10046,83.51966],[-20.84539,82.72669],[-22.69182,82.34165],[-26.51753,82.29765],[-31.9,82.2],[-31.39646,82.02154],[-27.85666,82.13178],[-24.84448,81.78697],[-22.90328,82.09317],[-22.07175,81.73449],[-23.16961,81.15271],[-20.62363,81.52462],[-15.76818,81.91245],[-12.77018,81.71885],[-12.20855,81.29154],[-16.28533,80.58004],[-16.85,80.35],[-20.04624,80.17708],[-17.73035,80.12912],[-18.9,79.4],[-19.70499,78.75128],[-19.67353,77.63859],[-18.47285,76.98565],[-20.03503,76.94434],[-21.67944,76.62795],[-19.83407,76.09808],[-19.59896,75.24838],[-20.66818,75.15585],[-19.37281,74.29561],[-21.59422,74.22382],[-20.43454,73.81713],[-20.76234,73.46436],[-22.17221,73.30955],[-23.56593,73.30663],[-22.31311,72.62928],[-22.29954,72.18409],[-24.27834,72.59788],[-24.79296,72.3302],[-23.44296,72.08016],[-22.13281,71.46898],[-21.75356,70.66369],[-23.53603,70.471],[-24.30702,70.85649],[-25.54341,71.43094],[-25.20135,70.75226],[-26.36276,70.22646],[-23.72742,70.18401],[-22.34902,70.12946],[-25.02927,69.2588],[-27.74737,68.47046],[-30.67371,68.12503],[-31.77665,68.12078],[-32.81105,67.73547],[-34.20196,66.67974],[-36.35284,65.9789],[-37.04378,65.93768],[-38.37505,65.69213],[-39.81222,65.45848],[-40.66899,64.83997],[-40.68281,64.13902],[-41.1887,63.48246],[-42.81938,62.68233],[-42.41666,61.90093],[-42.86619,61.07404],[-43.3784,60.09772],[-44.7875,60.03676],[-46.26364,60.85328],[-48.26294,60.85843],[-49.23308,61.40681],[-49.90039,62.38336],[-51.63325,63.62691],[-52.14014,64.27842],[-52.27659,65.1767],[-53.66166,66.09957],[-53.30161,66.8365],[-53.96911,67.18899],[-52.9804,68.35759],[-51.47536,68.72958],[-51.08041,69.14781],[-50.87122,69.9291],[-52.013585,69.574925],[-52.55792,69.42616],[-53.45629,69.283625],[-54.68336,69.61003],[-54.75001,70.28932],[-54.35884,70.821315],[-53.431315,70.835755],[-51.39014,70.56978],[-53.10937,71.20485],[-54.00422,71.54719],[-55,71.4065369672726],[-55.83468,71.65444],[-54.71819,72.58625],[-55.32634,72.95861],[-56.12003,73.64977],[-57.32363,74.71026],[-58.59679,75.09861],[-58.58516,75.51727],[-61.26861,76.10238],[-63.39165,76.1752],[-66.06427,76.13486],[-68.50438,76.06141],[-69.66485,76.37975],[-71.40257,77.00857],[-68.77671,77.32312],[-66.76397,77.37595],[-71.04293,77.63595],[-73.297,78.04419],[-73.15938,78.43271],[-69.37345,78.91388],[-65.7107,79.39436],[-65.3239,79.75814],[-68.02298,80.11721],[-67.15129,80.51582],[-63.68925,81.21396],[-62.23444,81.3211],[-62.65116,81.77042],[-60.28249,82.03363],[-57.20744,82.19074],[-54.13442,82.19962],[-53.04328,81.88833],[-50.39061,82.43883],[-48.00386,82.06481],[-46.59984,81.985945],[-44.523,81.6607],[-46.9007,82.19979],[-46.76379,82.62796]]]}},{type:"Feature",properties:{admin:"Guatemala",name:"Guatemala",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-90.095554572291,13.7353376327007],[-90.6086240303008,13.9097714299019],[-91.232410244496,13.927832342988],[-91.6897466702791,14.1262181665565],[-92.2277500068698,14.5388286401909],[-92.2032295397473,14.8301028508041],[-92.087215949252,15.0645846623284],[-92.2292486234063,15.2514466414959],[-91.7479601712559,16.0665648462517],[-90.4644726224227,16.0695620793247],[-90.438866950222,16.4101097681281],[-90.6008467272409,16.4707778996388],[-90.7118218655877,16.6874830184547],[-91.0816700915006,16.9184766707994],[-91.4539212715151,17.2521772323242],[-91.0022692532842,17.2546577010742],[-91.0015199450159,17.8175949162457],[-90.067933519231,17.8193260767275],[-89.1430804105033,17.8083189966493],[-89.1508060371309,17.0155766870758],[-89.2291216702693,15.8869375676052],[-88.9306127591352,15.8872734644151],[-88.6045861478058,15.7063801131774],[-88.5183640205269,15.855389105691],[-88.225022752622,15.7277224797139],[-88.6806796943556,15.3462470565353],[-89.1548109606335,15.0664191756748],[-89.2252200996312,14.8742862004136],[-89.1455350410372,14.6780191105691],[-89.3533259752828,14.4241327987191],[-89.5873426989165,14.3625861678595],[-89.5342193265205,14.2448155786663],[-89.7219339668207,14.1342280135617],[-90.0646779039966,13.8819695093289],[-90.095554572291,13.7353376327007]]]}},{type:"Feature",properties:{admin:"Guyana",name:"Guyana",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-59.7582848781592,8.36703481692405],[-59.1016841294586,7.99920197187049],[-58.482962205628,7.3476913517507],[-58.4548760646774,6.83278738039446],[-58.0781031968374,6.80909373618864],[-57.5422185939706,6.32126821535336],[-57.1474364894769,5.97314992921916],[-57.3072458563395,5.07356659588223],[-57.9142889064721,4.81262645102441],[-57.8602095200787,4.57680105226045],[-58.0446943833607,4.06086355225838],[-57.6015689764579,3.33465464926068],[-57.2814334784097,3.33349192953412],[-57.1500978257399,2.76892690674541],[-56.5393857489145,1.89952260986692],[-56.7827042303608,1.86371084228865],[-57.3358229233969,1.94853770589576],[-57.6609710353774,1.68258494710564],[-58.113449876525,1.50719513590703],[-58.429477098206,1.46394196207872],[-58.5400129868783,1.26808828369252],[-59.0308615790026,1.31769765869272],[-59.6460436672212,1.78689382568679],[-59.7185457017267,2.24963043864436],[-59.9745249090845,2.75523265218806],[-59.8154131740579,3.60649852133209],[-59.5380399237312,3.95880259848194],[-59.7674057684587,4.42350291586661],[-60.1110023667674,4.57496653891408],[-59.9809586249049,5.01406118409814],[-60.2136834377313,5.2444863956876],[-60.7335741848037,5.2002772078619],[-61.4103029038819,5.95906810141962],[-61.1394150458079,6.23429677980614],[-61.1593363104565,6.69607737876632],[-60.543999192941,6.85658437746488],[-60.2956680975624,7.04391144452292],[-60.6379727850638,7.41499990481085],[-60.5505879380582,7.77960297284618],[-59.7582848781592,8.36703481692405]]]}},{type:"Feature",properties:{admin:"Honduras",name:"Honduras",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-87.3166544257955,12.984685777229],[-87.4894087389471,13.2975348983239],[-87.7931111315265,13.3844804956552],[-87.7235029772293,13.7850503605656],[-87.8595153470216,13.8933124862171],[-88.0653425768401,13.9646259627798],[-88.5039979723496,13.8454859481309],[-88.5412308418159,13.9801547306835],[-88.8430728828327,14.1405067000852],[-89.0585119290576,14.3400294051642],[-89.3533259752828,14.4241327987191],[-89.1455350410372,14.6780191105692],[-89.2252200996312,14.8742862004137],[-89.1548109606335,15.0664191756749],[-88.6806796943556,15.3462470565354],[-88.2250227526219,15.727722479714],[-88.1211531237154,15.6886550969014],[-87.9018125068524,15.8644583195582],[-87.6156801012523,15.8787985295192],[-87.5229209052884,15.7972789575788],[-87.3677624173321,15.8469400090113],[-86.9031912910282,15.7567129582296],[-86.4409456041774,15.7828353947532],[-86.1192339749443,15.893448798074],[-86.0019543118578,16.0054057886344],[-85.6833174303463,15.9536518416939],[-85.4440038724026,15.8857490096624],[-85.1824436103572,15.9091584334906],[-84.9837218899788,15.9959231633087],[-84.5269797431671,15.8572236190374],[-84.3682555813826,15.8351577824487],[-84.0630545722668,15.6482441268491],[-83.7739766100261,15.4240717635669],[-83.4103812324204,15.2709028182538],[-83.1472190009741,14.9958291691642],[-83.489988776366,15.0162671981357],[-83.6285849677729,14.8800739608304],[-83.9757214016936,14.7494359399965],[-84.2283416409524,14.7487641463766],[-84.4493359036486,14.6216142847225],[-84.6495820787796,14.6668053247619],[-84.8200367906943,14.8195866968326],[-84.9245006985723,14.7904928654523],[-85.0527874417369,14.5515410425347],[-85.1487505765029,14.5601968449436],[-85.1653645494848,14.354369615125],[-85.5144130114003,14.0790117456579],[-85.6986653307369,13.960078436738],[-85.8012947252685,13.8360549992376],[-86.0962638007906,14.0381873641472],[-86.3121420966898,13.7713561060082],[-86.5207081774199,13.7784874536645],[-86.7550866360796,13.7548454858909],[-86.7338217841915,13.2630925562014],[-86.8805570136844,13.2542042098472],[-87.0057690091274,13.0257943791173],[-87.3166544257955,12.984685777229]]]}},{type:"Feature",properties:{admin:"Croatia",name:"Croatia",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[18.82983808765,45.9088776718918],[19.0727689958542,45.5215111354321],[19.3904757015846,45.2365156113424],[19.0054862810101,44.8602336696091],[18.5532141455916,45.0815896673315],[17.8617834815264,45.0677403834771],[17.002146030351,45.2337767604309],[16.5349394060002,45.2116075709777],[16.3181567725359,45.0041266953259],[15.9593673031334,45.2337767604309],[15.750026075919,44.8187116562626],[16.2396602718845,44.3511432968857],[16.4564429053489,44.0412397324313],[16.9161564470173,43.6677224798257],[17.2973734880345,43.4463406438874],[17.674921502359,43.0285625270236],[18.56,42.65],[18.4500163103048,42.4799913600293],[17.5099703304833,42.8499946152391],[16.9300057308716,43.2099984808004],[16.0153845557377,43.5072154811272],[15.1744539730521,44.2431912298279],[15.3762504411518,44.3179153509221],[14.9203092790405,44.7384839951295],[14.9016024105509,45.0760602890761],[14.25874759284,45.2337767604309],[13.952254672917,44.8021235214969],[13.6569755388012,45.136935126316],[13.6794031104158,45.484149074885],[13.7150598486972,45.5003237981924],[14.4119682145855,45.4661656764474],[14.5951094906279,45.6349409043128],[14.935243767973,45.4716950547028],[15.3276745947974,45.4523163925933],[15.3239538916724,45.7317825384277],[15.6715295752676,45.8341535507979],[15.7687329444086,46.2381082220235],[16.5648083838649,46.5037509222198],[16.8825150895954,46.3806318222844],[17.6300663591296,45.9517691106941],[18.4560624528829,45.7594811061361],[18.82983808765,45.9088776718918]]]}},{type:"Feature",properties:{admin:"Haiti",name:"Haiti",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-73.1897906155176,19.9156839055119],[-72.5796728176636,19.8715005559024],[-71.712361416293,19.7144558781674],[-71.6248732164228,19.1698379582433],[-71.7013026597825,18.7854169784241],[-71.9451120673355,18.6169001327203],[-71.6877375963059,18.3166600611045],[-71.708304816358,18.0449970565461],[-72.3724761623893,18.2149608423541],[-72.8444111802949,18.1456110702184],[-73.454554816365,18.2179063989947],[-73.9224332343356,18.030992743395],[-74.4580336168248,18.3425499536827],[-74.3699252997671,18.6649075383194],[-73.4495422024327,18.5260529647511],[-72.6949370998906,18.4457994654019],[-72.334881557897,18.6684215357153],[-72.7916495429249,19.101625067618],[-72.7841047838103,19.4835914169034],[-73.4150223456617,19.6395508895603],[-73.1897906155176,19.9156839055119]]]}},{type:"Feature",properties:{admin:"Hungary",name:"Hungary",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[16.2022982113374,46.852385972677],[16.5342676123804,47.4961709661691],[16.3405843441504,47.7129019232012],[16.9037541032673,47.7148656276283],[16.979666782304,48.1234970159763],[17.4884729346498,47.8674661321862],[17.85713260262,47.7584288600504],[18.6965128923369,47.8809536810144],[18.7770247738477,48.0817682969006],[19.1743648617399,48.1113788926039],[19.6613635596585,48.2666148952087],[19.7694706560131,48.2026911484636],[20.2390543962493,48.3275672470969],[20.4735620459899,48.5628500433218],[20.8012939795849,48.6238540716424],[21.8722363624017,48.31997081155],[22.0856083513348,48.4222643092718],[22.6408199398787,48.1502395696874],[22.7105314470405,47.8821939153894],[22.0997676937828,47.6724392767167],[21.6265149268539,46.9942377793182],[21.0219523454712,46.3160879583519],[20.2201924984628,46.1274689804866],[19.5960445492416,46.1717298447445],[18.82983808765,45.9088776718919],[18.4560624528829,45.7594811061361],[17.6300663591296,45.9517691106942],[16.8825150895953,46.3806318222844],[16.5648083838649,46.5037509222198],[16.3705049984474,46.8413272161665],[16.2022982113374,46.852385972677]]]}},{type:"Feature",properties:{admin:"Indonesia",name:"Indonesia",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[120.71560875863,-10.2395813940879],[120.295014276207,-10.2586499976035],[118.967808465655,-9.55796925215803],[119.900309686362,-9.36134042728751],[120.425755649905,-9.6659213192158],[120.775501743657,-9.96967538822746],[120.71560875863,-10.2395813940879]]],[[[124.435950148619,-10.1400009090614],[123.579981724137,-10.359987481328],[123.459989048355,-10.2399948055462],[123.550009393407,-9.90001555749798],[123.980008986508,-9.29002695072469],[124.968682489116,-8.89279021569705],[125.070019972841,-9.08998748132284],[125.088520135601,-9.39317310957932],[124.435950148619,-10.1400009090614]]],[[[117.900018345208,-8.09568124759492],[118.26061648974,-8.36238331465333],[118.878459914222,-8.28068287519983],[119.126506789223,-8.70582488366507],[117.970401645989,-8.90663949955126],[117.277730747549,-9.04089487064556],[116.740140822417,-9.03293670007264],[117.083737420725,-8.45715789147654],[117.632024367342,-8.44930307376819],[117.900018345208,-8.09568124759492]]],[[[122.903537225436,-8.09423430749074],[122.756982863456,-8.64980763106064],[121.25449059457,-8.93366627363994],[119.92439090381,-8.81041798262387],[119.920928582846,-8.44485890059107],[120.715091994308,-8.23696461348086],[121.341668735847,-8.53673959720602],[122.00736453663,-8.46062021244016],[122.903537225436,-8.09423430749074]]],[[[108.623478631629,-6.77767384199068],[110.539227329553,-6.87735767988168],[110.759575636846,-6.46518645592175],[112.614811232556,-6.94603565839759],[112.978768345188,-7.59421314863458],[114.478935174621,-7.77652760176028],[115.705526971501,-8.37080657311686],[114.564511346496,-8.75181690840483],[113.464733514461,-8.34894744225742],[112.559672479301,-8.37618092207516],[111.522061395312,-8.30212859460096],[110.586149530074,-8.12260466881902],[109.427667270955,-7.74066415774976],[108.693655226681,-7.64160043704622],[108.277763299596,-7.76665740319258],[106.454102004016,-7.35489959069095],[106.280624220812,-6.9248999975902],[105.365486281356,-6.85141611087117],[106.051645949327,-5.8959188777945],[107.26500857954,-5.95498503990406],[108.072091099075,-6.34576222089524],[108.486846144649,-6.42198495852577],[108.623478631629,-6.77767384199068]]],[[[134.724624465067,-6.21440073000929],[134.210133905169,-6.8952377254547],[134.112775506731,-6.14246713625901],[134.290335728086,-5.78305754966904],[134.499625278868,-5.4450420060479],[134.727001580952,-5.73758228925216],[134.724624465067,-6.21440073000929]]],[[[127.249215122589,-3.45906503663889],[126.874922723499,-3.79098276124958],[126.183802118027,-3.60737639731656],[125.989033644719,-3.17727345135133],[127.000651483265,-3.12931772218441],[127.249215122589,-3.45906503663889]]],[[[130.471344028852,-3.09376433676762],[130.834836053593,-3.85847218182276],[129.990546502808,-3.44630095786282],[129.155248651242,-3.36263681398225],[128.590683628454,-3.42867929445126],[127.898891229362,-3.39343596762819],[128.135879347853,-2.84365040447491],[129.370997756061,-2.80215422934455],[130.471344028852,-3.09376433676762]]],[[[134.143367954648,-1.15186736410359],[134.422627394753,-2.76918466554238],[135.457602980695,-3.36775278077911],[136.293314243719,-2.30704233155609],[137.440737746328,-1.70351327881937],[138.329727411045,-1.70268645590265],[139.184920689043,-2.05129566814364],[139.92668419816,-2.40905160890028],[141.000210402592,-2.60015105551562],[141.017056919519,-5.85902190513802],[141.033851760014,-9.11789275476042],[140.143415155193,-8.29716765710096],[139.127766554928,-8.09604298262094],[138.881476678625,-8.38093515384609],[137.614473911693,-8.41168263105976],[138.039099155835,-7.59788217532735],[138.668621454015,-7.32022470462307],[138.407913853102,-6.23284921633748],[137.927839797111,-5.393365573756],[135.989250116113,-4.54654387778905],[135.1645976096,-4.46293141034077],[133.662880487198,-3.53885344809753],[133.367704705947,-4.02481861737031],[132.983955519747,-4.11297861086028],[132.756940952689,-3.74628264731713],[132.753788690319,-3.31178720460707],[131.989804315316,-2.82055103924046],[133.066844517143,-2.46041798259844],[133.780030959204,-2.47984832114021],[133.696211786026,-2.21454151775369],[132.232373488494,-2.21252613689433],[131.836221958545,-1.6171619604596],[130.942839797083,-1.4325220678808],[130.51955814018,-.937720228686075],[131.867537876514,-.695461114101818],[132.380116408417,-.369537855636977],[133.985548130428,-.780210463060442],[134.143367954648,-1.15186736410359]]],[[[125.240500522972,1.41983612711761],[124.437035353697,.427881171058971],[123.685504998877,.235593166500877],[122.723083123873,.431136786293337],[121.056724888189,.381217352699451],[120.183083123863,.23724681233422],[120.040869582195,-.519657891444851],[120.935905389491,-1.40890593832337],[121.475820754076,-.955962009285116],[123.340564813328,-.615672702643081],[123.258399285984,-1.07621306722834],[122.822715285332,-.930950616055881],[122.388529901215,-1.51685800538112],[121.508273553555,-1.90448292400242],[122.454572381684,-3.18605844484088],[122.271896193533,-3.5295000138527],[123.170962762547,-4.68369312909171],[123.162332798354,-5.34060393638596],[122.628515252779,-5.63459115969449],[122.236394484548,-5.28293303794828],[122.719569126477,-4.46417164471579],[121.738233677254,-4.8513314754465],[121.489463332201,-4.57455250409122],[121.619171177254,-4.18847787843867],[120.898181593918,-3.60210540122283],[120.972388950689,-2.62764291749491],[120.30545291553,-2.93160369223573],[120.390047235192,-4.09757903403722],[120.430716587405,-5.52824106203778],[119.796543410319,-5.67340016034565],[119.366905552245,-5.3798780249278],[119.6536063986,-4.45941741294496],[119.498835483886,-3.49441171632651],[119.078344354327,-3.48702198650876],[118.767768996253,-2.80199920004769],[119.180973748859,-2.1471037736128],[119.323393996255,-1.35314706788047],[119.825998976726,.154254462073496],[120.035701938966,.566477362465804],[120.885779250168,1.30922272379684],[121.666816847827,1.01394358968108],[122.927566766452,.875192368977465],[124.077522414243,.917101955566139],[125.065989211122,1.64325918213156],[125.240500522972,1.41983612711761]]],[[[128.688248732621,1.13238597249411],[128.635952183141,.258485826006179],[128.120169712436,.356412665199286],[127.968034295769,-.252077325037533],[128.379998814,-.780003757331286],[128.100015903842,-.899996433112974],[127.696474644075,-.266598402511505],[127.399490187694,1.01172150309257],[127.600511509309,1.81069082275718],[127.932377557487,2.17459625895656],[128.004156121941,1.62853139892833],[128.594559360875,1.54081065511286],[128.688248732621,1.13238597249411]]],[[[117.875627069166,1.82764069254891],[118.996747267738,.902219143066048],[117.811858351718,.784241848143722],[117.478338657706,.102474676917026],[117.521643507967,-.803723239753211],[116.56004845588,-1.48766082113623],[116.533796828275,-2.4835173478329],[116.148083937649,-4.01272633221401],[116.000857782049,-3.65703744874901],[114.864803094545,-4.10698414471442],[114.468651564595,-3.49570362713382],[113.755671828264,-3.43916961020652],[113.256994256648,-3.11877572999685],[112.068126255341,-3.47839202231607],[111.70329064336,-2.99444223390263],[111.048240187628,-3.04942595786119],[110.223846063276,-2.93403248455348],[110.070935500124,-1.59287403728241],[109.571947869914,-1.31490650798449],[109.091873813923,-.459506524257051],[108.952657505328,.415375474444346],[109.069136183714,1.34193390543764],[109.663260125774,2.00646698649498],[109.830226678509,1.33813568766419],[110.514060907027,.773131415200993],[111.159137811327,.976478176269509],[111.79754845586,.904441229654651],[112.380251906384,1.41012095784676],[112.859809198052,1.49779002522995],[113.80584964402,1.21754873291104],[114.621355422017,1.43068817789889],[115.134037306785,2.82148183838622],[115.519078403792,3.1692383894944],[115.865517205877,4.30655914959016],[117.015214471506,4.30609406169947],[117.88203494677,4.13755137777949],[117.313232456534,3.23442820883058],[118.048329705885,2.28769013102736],[117.875627069166,1.82764069254891]]],[[[105.817655063909,-5.85235564537241],[104.710384149192,-5.87328460045064],[103.868213332131,-5.03731495526497],[102.584260695407,-4.2202588842982],[102.156173130301,-3.61414600994677],[101.399113397225,-2.79977711345917],[100.9025028829,-2.05026213949786],[100.141980828861,-.650347588710957],[99.2637398620602,.183141587724663],[98.9700110209133,1.04288239176454],[98.6013513529431,1.82350657796562],[97.6995976094499,2.45318390544212],[97.1769421732499,3.30879059489861],[96.4240165547573,3.86885976807791],[95.3808760925135,4.97078217205367],[95.2930261576173,5.47982086834482],[95.9368628275417,5.43951325115711],[97.4848820332771,5.24632090903401],[98.3691691426557,4.26837026612637],[99.1425586283358,3.59034963624092],[99.6939978373224,3.17432851807516],[100.641433546962,2.0993812117558],[101.658012323007,2.08369741455519],[102.498271112073,1.39870046631022],[103.076840448013,.561361395668854],[103.838396030698,.104541734208666],[103.437645298275,-.711945896002845],[104.010788608824,-1.05921152100423],[104.369991489685,-1.08484303142102],[104.539490187602,-1.78237151449672],[104.887892694114,-2.34042530681666],[105.622111444117,-2.42884368246807],[106.108593377713,-3.06177662517895],[105.857445916774,-4.30552499757972],[105.817655063909,-5.85235564537241]]]]}},{type:"Feature",properties:{admin:"India",name:"India",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[77.8374507994746,35.4940095077878],[78.9122689147132,34.3219363469758],[78.8110864602857,33.5061980250324],[79.2088916360686,32.9943946396137],[79.1761287779955,32.4837798121377],[78.458446486326,32.6181643743127],[78.738894484374,31.5159060735271],[79.7213668151071,30.8827147486547],[81.1112561380293,30.1834809433134],[80.4767212259174,29.7298652206553],[80.0884245136763,28.7944701197401],[81.057202589852,28.416095282499],[81.999987420585,27.92547923432],[83.3042488951995,27.3645057235756],[84.6750179381738,27.2349012313875],[85.2517785989834,26.7261984319063],[86.0243929381792,26.6309846054086],[87.2274719583663,26.3978980575561],[88.0602376647498,26.4146153834025],[88.1748043151409,26.8104051783259],[88.0431327656612,27.4458185897868],[88.1204407083698,27.8765416529396],[88.7303259622785,28.0868647323675],[88.8142484883205,27.2993159042394],[88.8356425312894,27.0989663762438],[89.7445276224388,26.71940298106],[90.3732747741341,26.8757241887429],[91.2175126484864,26.808648179628],[92.0334835143751,26.8383104517636],[92.1037117858597,27.4526140406332],[91.6966565286967,27.7717418482517],[92.5031189310436,27.8968763290464],[93.4133476094327,28.6406293808072],[94.5659904317029,29.27743805594],[95.4048022806646,29.0317166203921],[96.117678664131,29.4528020289225],[96.5865906107475,28.8309795191543],[96.2488334492878,28.4110309921344],[97.32711388549,28.2615827499463],[97.4025614766361,27.8825361190854],[97.0519885599681,27.6990589462331],[97.1339990580153,27.08377350515],[96.4193656758509,27.2645893417392],[95.1247676940749,26.5735720891323],[95.1551534362626,26.0013072779321],[94.6032491393854,25.1624954289704],[94.5526579121716,24.6752383488903],[94.1067419779251,23.8507408716735],[93.3251876159428,24.0785564234322],[93.2863269388593,23.043658352139],[93.0602942240146,22.7031106633356],[93.1661275573484,22.2784595809771],[92.6727209818256,22.0412389185412],[92.1460347839068,23.6274986841726],[91.8699276061713,23.6243464218028],[91.7064750508321,22.9852639836492],[91.1589632506997,23.5035269231044],[91.4677299336437,24.0726394719348],[91.9150928079944,24.1304137232371],[92.3762016133348,24.976692816665],[91.7995959818221,25.1474317489573],[90.8722107279121,25.1326006128895],[89.9206925801218,25.2697498641922],[89.8324809101996,25.9650820988955],[89.3550940286873,26.0144072535181],[88.5630493509497,26.4465255803427],[88.2097892598025,25.7680657007827],[88.9315539896231,25.2386923283848],[88.306372511756,24.8660794133442],[88.0844222350624,24.5016572128219],[88.6999402200909,24.2337149113886],[88.5297697285538,23.6311418726492],[88.8763118835031,22.8791464299378],[89.0319612975662,22.055708319583],[88.8887659036854,21.6905884872247],[88.2084973489952,21.7031716984878],[86.9757043802403,21.4955616317552],[87.0331685729489,20.7433078068824],[86.4993510273738,20.1516384953566],[85.0602657409097,19.4785788029711],[83.9410058939,18.3020097925497],[83.1892171569178,17.671221421779],[82.1927921894659,17.0166360539378],[82.1912418964972,16.5566641301078],[81.6927193541775,16.3102192245079],[80.7919991393301,15.9519723576445],[80.3248958678439,15.8991848820583],[80.0250692076864,15.1364149032141],[80.2332735533904,13.83577077886],[80.2862935729219,13.0062606877108],[79.8625468281285,12.0562153182409],[79.8579993020868,10.3572750919971],[79.340511509116,10.3088542749396],[78.8853454934892,9.54613597252772],[79.1897196796883,9.21654368737015],[78.2779407083305,8.93304677981693],[77.9411653990843,8.25295909263974],[77.5398979023379,7.96553477623233],[76.5929789570217,8.89927623131419],[76.1300614765511,10.2996300317755],[75.7464673196485,11.3082506372483],[75.3961011087096,11.7812450220158],[74.8648157083168,12.7419357365379],[74.6167171568835,13.9925829126497],[74.4438594908672,14.6172217879777],[73.5341992532334,15.990652167215],[73.1199092955494,17.9285700545925],[72.8209094583086,19.2082335474362],[72.8244751321368,20.4195032821415],[72.6305334817454,21.356009426351],[71.1752734719739,20.7574413111142],[70.4704586119451,20.8773306340314],[69.1641300800388,22.0892980005727],[69.6449276060824,22.4507746444543],[69.3495967955343,22.8431796330627],[68.1766451353734,23.6919650334567],[68.8425993183188,24.3591336125609],[71.0432401874682,24.3565239527302],[70.8446993346028,25.2151020370435],[70.2828731627256,25.7222287053398],[70.168926629522,26.4918716496788],[69.5143929381131,26.9409656845114],[70.6164962096019,27.9891962753359],[71.7776656432003,27.9131802434345],[72.8237516620847,28.961591701772],[73.4506384622174,29.9764134791199],[74.4213802428203,30.9798147649312],[74.405928989565,31.6926394719653],[75.2586417988132,32.2711054550405],[74.4515592792787,32.7648996038055],[74.1042936542773,33.4414732935868],[73.749948358052,34.3176988795278],[74.240202671205,34.7488870305713],[75.7570609882683,34.5049225937213],[76.871721632804,34.6535440129927],[77.8374507994746,35.4940095077878]]]}},{type:"Feature",properties:{admin:"Ireland",name:"Ireland",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[-6.19788489422099,53.8675650091634],[-6.03298539877761,53.1531641709443],[-6.78885657391085,52.2601179062923],[-8.56161658368356,51.6693012558994],[-9.97708574059027,51.8204548203531],[-9.16628251793078,52.8646288112427],[-9.68852454267245,53.8813626165853],[-8.32798743329201,54.6645189479686],[-7.57216793459106,55.1316222194549],[-7.36603064617879,54.5958409694527],[-7.57216793459106,54.059956366586],[-6.95373023113807,54.0737022975756],[-6.19788489422099,53.8675650091634]]]}},{type:"Feature",properties:{admin:"Iran",name:"Iran",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[53.9215979347955,37.1989183619613],[54.8003039894866,37.3924207626782],[55.5115784035519,37.9641171331232],[56.1803747902733,37.9351266546074],[56.6193660825928,38.1213943548035],[57.330433790929,38.0292294378109],[58.4361544126782,37.5223094752438],[59.2347619973168,37.4129879827303],[60.3776379738839,36.5273831243284],[61.1230705096941,36.4915971949662],[61.2108170917257,35.6500723333092],[60.8031933938074,34.4041018743199],[60.5284298033116,33.676446031218],[60.963700392506,33.5288323023763],[60.5360779152908,32.9812688258116],[60.863654819589,32.1829196233344],[60.9419446145111,31.5480746526287],[61.6993144061808,31.3795061304927],[61.7812215513634,30.7358503280812],[60.8742484882088,29.8292389999526],[61.3693087095649,29.3032762720859],[61.7718681171186,28.6993338078908],[62.727830438086,28.2596448837354],[62.7554256529299,27.378923448185],[63.2338977395203,27.2170470240307],[63.3166317076196,26.7565324976617],[61.8741874530565,26.2399748804721],[61.4973629087842,25.0782370061185],[59.6161340676308,25.3801565617838],[58.5257613462723,25.6099616561857],[57.3972514178824,25.7399020451836],[56.9707658221775,26.9661062688214],[56.4921387062902,27.1433047551502],[55.7237101581101,26.964633490501],[54.7150895526373,26.4806578638715],[53.4930969582313,26.812368882753],[52.4835978534096,27.5808491073655],[51.5207625669474,27.8656896021583],[50.8529480324395,28.8145205754694],[50.1150085793116,30.1477725285997],[49.576850213424,29.9857152369324],[48.9413334490985,30.317090359004],[48.5679712257898,29.9267782659035],[48.0145683123761,30.4524567733926],[48.0046981138083,30.9851374374572],[47.6852860858123,30.9848532170796],[47.8492037290421,31.7091759302987],[47.3346614927119,32.4691553817991],[46.1093616066393,33.017287299119],[45.416690708199,33.9677977564796],[45.6484595070281,34.748137722303],[46.1517879575509,35.0932587753643],[46.0763403664048,35.6773833277755],[45.4206181170532,35.9775458847428],[44.77267,37.17045],[44.2257556496005,37.9715843775893],[44.4214026222575,38.2812812363145],[44.1092252947823,39.4281362981681],[44.7939896990819,39.713002631177],[44.9526880226503,39.3357646754464],[45.4577217954388,38.8741391057831],[46.1436230812488,38.7412014837122],[46.505719842318,38.7706053736863],[47.6850793800831,39.5083639593012],[48.0600952492252,39.5822354192625],[48.3555294126379,39.2887649602769],[48.0107442563865,38.7940147975145],[48.6343754412848,38.270377509101],[48.8832491392025,38.3202452662626],[49.1996122576933,37.5828742538899],[50.1477714373846,37.3745665553213],[50.8423543638197,36.8728142359834],[52.2640246926014,36.7004216578577],[53.8257898293264,36.9650308294082],[53.9215979347955,37.1989183619613]]]}},{type:"Feature",properties:{admin:"Iraq",name:"Iraq",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[45.4206181170532,35.9775458847428],[46.0763403664048,35.6773833277755],[46.1517879575509,35.0932587753643],[45.6484595070281,34.748137722303],[45.416690708199,33.9677977564796],[46.1093616066393,33.017287299119],[47.3346614927119,32.4691553817991],[47.8492037290421,31.7091759302987],[47.6852860858123,30.9848532170796],[48.0046981138083,30.9851374374572],[48.0145683123761,30.4524567733926],[48.5679712257898,29.9267782659035],[47.9745190773499,29.9758192001485],[47.302622104691,30.0590699325707],[46.5687134132817,29.0990251734523],[44.7094987322847,29.1788910995594],[41.8899809100078,31.1900086532784],[40.3999943377362,31.8899917668879],[39.195468377445,32.1610088160427],[38.7923405291361,33.3786864283522],[41.0061588885199,34.4193722600621],[41.3839652850058,35.6283165553144],[41.2897074725055,36.3588146021923],[41.837064243341,36.6058537867636],[42.3495910988118,37.2298725449041],[42.7791256040218,37.3852635768057],[43.9422587420473,37.2562275253729],[44.2934517759029,37.0015143906063],[44.7726990089777,37.1704446477684],[45.4206181170532,35.9775458847428]]]}},{type:"Feature",properties:{admin:"Iceland",name:"Iceland",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[-14.5086954411292,66.4558922390314],[-14.7396374170416,65.8087482774403],[-13.6097322249798,65.1266710476199],[-14.9098337467949,64.3640819362887],[-17.7944380355434,63.6787490912338],[-18.656245896875,63.4963829616758],[-19.9727546859428,63.6436349554915],[-22.7629719711102,63.9601789414954],[-21.7784842595177,64.4021157904555],[-23.9550439112191,64.8911298692335],[-22.1844026351704,65.0849681667603],[-22.2274232650533,65.3785936550427],[-24.3261840479393,65.6111892767885],[-23.6505146957231,66.2625190293952],[-22.1349224512509,66.4104686550469],[-20.5762837386795,65.7321121283514],[-19.0568416000016,66.2766008571948],[-17.798623826559,65.9938532579098],[-16.1678189762921,66.5267923041359],[-14.5086954411292,66.4558922390314]]]}},{type:"Feature",properties:{admin:"Israel",name:"Israel",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[35.7199182472227,32.7091924097949],[35.5456653175345,32.3939920110306],[35.1839302914914,32.5325106877889],[34.9746407407093,31.8665823430597],[35.2258915545124,31.7543411321218],[34.970506626126,31.6167784693608],[34.9274084815946,31.3534353704014],[35.397560662586,31.4890860051676],[35.420918409982,31.1000658228744],[34.9226025733914,29.5013261988445],[34.2654333839357,31.2193608668201],[34.5563716977389,31.548823960897],[34.4881071306814,31.6055388453373],[34.7525871111512,32.0729263372012],[34.9554171078968,32.8273764104464],[35.0984574724807,33.0805392522443],[35.1260526873245,33.0909003769188],[35.4607092628467,33.0890400253563],[35.5527966651908,33.264274807258],[35.8211007016502,33.2774264592763],[35.8363969256086,32.8681232773085],[35.7007979672747,32.7160136988574],[35.7199182472227,32.7091924097949]]]}},{type:"Feature",properties:{admin:"Italy",name:"Italy",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[15.5203760108138,38.2311550969915],[15.1602429541717,37.4440455185378],[15.309897902089,37.1342194687318],[15.0999882341194,36.6199872909954],[14.335228712632,36.9966309677548],[13.8267326188799,37.1045313583802],[12.4310038591088,37.6129499374838],[12.5709436377551,38.1263811305197],[13.7411564470046,38.0349655217954],[14.7612492204462,38.1438736028505],[15.5203760108138,38.2311550969915]]],[[[9.21001183435626,41.2099913600242],[9.80997521326497,40.5000088567661],[9.66951867029567,39.1773764104718],[9.21481774255949,39.2404733343001],[8.80693566247973,38.9066177434785],[8.42830244307711,39.1718470322166],[8.38825320805094,40.3783108587188],[8.15999840661766,40.9500072291638],[8.70999067550011,40.8999844427052],[9.21001183435626,41.2099913600242]]],[[[12.3764852230408,46.7675591090699],[13.8064754574216,46.5093061386912],[13.6981099789055,46.0167780625174],[13.9376302425783,45.5910159368647],[13.1416064795543,45.7366917994954],[12.3285811703063,45.3817780625148],[12.3838749528586,44.8853742539191],[12.2614534847592,44.600482082694],[12.5892370947865,44.0913658717545],[13.5269059587225,43.5877273626379],[14.029820997787,42.7610077988325],[15.142569614328,41.9551396754569],[15.9261910336019,41.9613150091157],[16.1698970882904,41.7402949082034],[15.8893457373778,41.5410822617182],[16.7850016618606,41.1796056178366],[17.5191687354312,40.8771434596322],[18.3766874528826,40.3556249049427],[18.4802470231954,40.1688662786398],[18.2933850440281,39.8107744410732],[17.7383801612133,40.2776710068303],[16.8695959815223,40.4422346054638],[16.4487431169373,39.7954007024665],[17.1714896989715,39.4246998154207],[17.0528406104293,38.9028712021373],[16.6350883317818,38.8435724960824],[16.1009607276131,37.9858987493342],[15.6840869483145,37.908849188787],[15.6879626807363,38.2145928004419],[15.8919812354247,38.7509424911992],[16.1093323096443,38.9645470240777],[15.7188135108146,39.5440723740149],[15.4136125016988,40.0483568385352],[14.9984957210982,40.1729487167909],[14.7032682634148,40.6045502792926],[14.0606718278653,40.7863479680954],[13.6279850602854,41.1882872584617],[12.8880819027304,41.2530895045556],[12.1066825700449,41.7045348170574],[11.1919063656142,42.3554253199897],[10.5119478695178,42.9314625107472],[10.200028924204,43.9200068222746],[9.70248823409781,44.0362787949313],[8.88894616052687,44.3663361679795],[8.42856082523858,44.2312281357524],[7.8507666357832,43.7671479355552],[7.43518476729184,43.6938449163492],[7.54959638838616,44.1279011093848],[7.00756229007666,44.2547667506614],[6.74995527510171,45.0285179713676],[7.09665245934784,45.3330988632959],[6.80235517744566,45.7085798203287],[6.84359297041456,45.9911465521007],[7.27385094567668,45.7769477402508],[7.75599205895983,45.8244900579593],[8.31662967289438,46.1636424830908],[8.48995242680129,46.0051508652517],[8.96630577966783,46.0369318711112],[9.18288170740311,46.440214748717],[9.92283654139035,46.3148994004092],[10.3633781266787,46.4835712754098],[10.4427014502466,46.8935462509974],[11.0485559424365,46.7513585475464],[11.1648279150933,46.9415794948127],[12.1530880062431,47.1153931748264],[12.3764852230408,46.7675591090699]]]]}},{type:"Feature",properties:{admin:"Jamaica",name:"Jamaica",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-77.5696007961992,18.4905254175505],[-76.8966186184621,18.4008668075241],[-76.3653590562855,18.1607005884476],[-76.1996585761416,17.886867173733],[-76.9025614081757,17.8682378198917],[-77.2063413154035,17.7011162378598],[-77.7660229153406,17.8615973983422],[-78.3377192857856,18.2259679224322],[-78.2177266100039,18.4545327824592],[-77.7973646715256,18.5242184514048],[-77.5696007961992,18.4905254175505]]]}},{type:"Feature",properties:{admin:"Jordan",name:"Jordan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[35.5456653175345,32.3939920110306],[35.7199182472227,32.7091924097949],[36.8340621274355,32.3129375269808],[38.7923405291361,33.3786864283522],[39.195468377445,32.1610088160427],[39.0048856951525,32.010216986615],[37.002165561681,31.5084129908447],[37.9988489112944,30.5084998642131],[37.6681197446264,30.3386652694859],[37.503581984209,30.0037761500184],[36.7405277849872,29.8652833114762],[36.5012142270436,29.5052536076987],[36.0689408709221,29.1974946151845],[34.9560372250843,29.3565546737788],[34.9226025733914,29.5013261988445],[35.420918409982,31.1000658228744],[35.397560662586,31.4890860051676],[35.5452519060762,31.7825047877208],[35.5456653175345,32.3939920110306]]]}},{type:"Feature",properties:{admin:"Japan",name:"Japan",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[134.638428176004,34.1492337102564],[134.766379022358,33.8063347437837],[134.203415968971,33.2011778834296],[133.792950067276,33.5219851750976],[133.280268182509,33.2895704208649],[133.014858026258,32.7045673691048],[132.363114862193,32.9893820256814],[132.37117638563,33.4636424830401],[132.924372593315,34.060298570282],[133.492968377822,33.9446208765967],[133.904106073136,34.3649311386426],[134.638428176004,34.1492337102564]]],[[[140.976387567305,37.1420742864402],[140.599769728762,36.3439834661245],[140.774074334883,35.8428771021902],[140.253279250245,35.1381139185937],[138.975527785396,34.6676000025761],[137.217598911691,34.6062859156618],[135.792983026269,33.4648052027666],[135.120982700745,33.8490711532891],[135.079434849183,34.5965449081748],[133.340316196832,34.3759382187208],[132.156770868051,33.9049333765965],[130.986144647343,33.8857614202163],[132.00003624891,33.1499923772446],[131.332790155157,31.4503545191648],[130.686317987186,31.0295791692282],[130.202419875205,31.4182376164954],[130.447676222862,32.3194745956657],[129.814691603719,32.6103095566044],[129.408463169473,33.2960558131176],[130.353935174685,33.6041507024417],[130.878450962447,34.23274282484],[131.884229364144,34.7497138534879],[132.617672967663,35.4333930527094],[134.608300815978,35.7316177434658],[135.677537876529,35.5271341008868],[136.723830601142,37.3049842392404],[137.390611607004,36.8273906519988],[138.857602166906,37.8274846461435],[139.426404657143,38.2159622258976],[140.054790073812,39.4388074814364],[139.8833793479,40.5633124863237],[140.305782505454,41.1950051946596],[141.368973423427,41.3785598821603],[141.91426313697,39.9916161158787],[141.884600864835,39.1808645696515],[140.959489373946,38.1740009628766],[140.976387567305,37.1420742864402]]],[[[143.910161981379,44.1740998398537],[144.61342654844,43.9608828802175],[145.320825230083,44.3847329778754],[145.543137241803,43.2620883245506],[144.0596619,42.9883582627006],[143.183849725517,41.9952147486992],[141.611490920172,42.6787905950561],[141.067286411707,41.584593817708],[139.955106235921,41.569555975911],[139.81754357316,42.5637588567744],[140.312087030193,43.3332726100326],[141.38054894426,43.3888247747465],[141.671952345954,44.7721253525515],[141.967644891528,45.5514834661613],[143.14287031471,44.510358384777],[143.910161981379,44.1740998398537]]]]}},{type:"Feature",properties:{admin:"Kazakhstan",name:"Kazakhstan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[70.9623148944993,42.2661542832055],[70.3889648782208,42.0813076848975],[69.0700272968352,41.3842442897123],[68.63248294462,40.6686807317669],[68.2598958677956,40.6623245305949],[67.9858557473518,41.1359907089822],[66.7140470722166,41.1684435084616],[66.5106486347157,41.9876441513686],[66.0233915546356,41.994646307944],[66.0980123228652,42.9976600205131],[64.9008244159593,43.7280805527427],[63.1857869810566,43.650074978198],[62.0133004087863,43.5044766302157],[61.0583199400325,44.4058169622506],[60.2399719582585,44.7840367701947],[58.6899890480958,45.5000137395987],[58.5031270689284,45.586804307633],[55.9289172707412,44.9958584661592],[55.968191359283,41.3086416692694],[55.4552510923538,41.2598591171858],[54.7553454933927,42.0439714625666],[54.079417759015,42.3241094020208],[52.9442932472917,42.1160342473976],[52.5024597511963,41.7833155380865],[52.4463391457272,42.0271507838556],[52.6921122577073,42.4438953720734],[52.5014262225503,42.7922978785852],[51.3424271991082,43.1329747584693],[50.8912919452002,44.0310336370538],[50.3391292661614,44.2840156113385],[50.3056429380363,44.6098355169389],[51.2785034523632,44.5148542343865],[51.316899041556,45.2459982366679],[52.1673897642157,45.4083914251451],[53.0408764992452,45.2590465358218],[53.2208655129177,46.2346459010599],[53.0427368508078,46.8530060898645],[52.0420227394756,46.8046369492392],[51.1919454282743,47.0487047389539],[50.0340832863425,46.6089899765822],[49.10116,46.3993300000001],[48.5932410011805,46.5610342474155],[48.6947335142017,47.0756281601779],[48.0572530454493,47.7437527532795],[47.3152311541702,47.715847479842],[46.4664457537763,48.3941523301049],[47.0436715024765,49.1520388860976],[46.7515963071627,49.3560057643538],[47.5494804217493,50.4546983913111],[48.5778414243575,49.8747596299157],[48.702381626181,50.6051284857128],[50.7666483905121,51.6927623561599],[52.328723585831,51.7186522487381],[54.5328784523762,51.0262397324593],[55.7169405454798,50.6217166204785],[56.7779610532966,51.043551337277],[58.3632906431467,51.0636534694386],[59.6422823423706,50.5454422064157],[59.9328072447155,50.8421941188519],[61.3374243508409,50.7990701361043],[61.5880033710242,51.2726587998432],[59.9675338072155,51.9604204372157],[60.9272685077403,52.447548326215],[60.7399931171146,52.7199864772577],[61.6999861998006,52.9799964463343],[60.9780664406832,53.6649933945791],[61.4365914244091,54.0062645534348],[65.1785335630959,54.3542278102721],[65.666875848254,54.6012669948435],[68.1691003762588,54.9703917507043],[69.0681669452729,55.3852501491435],[70.8652665546551,55.1697335882701],[71.1801310566094,54.1332852240083],[72.2241500182022,54.3766553818867],[73.5085160663844,54.0356167669766],[73.4256787454204,53.4898102891097],[74.38484500519,53.5468610703601],[76.8911002949134,54.4905244004419],[76.5251794778547,54.1770034857271],[77.8009155618442,53.4044149847476],[80.0355595234417,50.8647508815472],[80.5684468932355,51.3883364935285],[81.9459855488399,50.8121959499064],[83.3830037780124,51.0691828476939],[83.9351147806188,50.8892455104536],[84.4163773945531,50.3113996445658],[85.115559523462,50.1173029648776],[85.5412699726825,49.6928585882482],[86.8293567239896,49.8266747096682],[87.3599703307627,49.2149807806292],[86.5987764831034,48.5491816269806],[85.7682328633083,48.455750637397],[85.7204838398707,47.4529694687731],[85.1642903991134,47.0009557155161],[83.1804838398604,47.3300312363509],[82.4589258157691,45.5396495631665],[81.9470707539181,45.3170274928532],[79.9661063984414,44.9175169948046],[80.8662064961014,43.180362046881],[80.1801501809943,42.9200678574269],[80.2599902688853,42.3499992945991],[79.6436454609401,42.4966828476597],[79.1421773619798,42.8560924342496],[77.6583919615832,42.9606855332083],[76.0003536314986,42.9880223658906],[75.6369649596221,42.8778998886768],[74.2128658385226,43.2983393418035],[73.6453035826609,43.0912718776099],[73.4897575214623,42.5008944768913],[71.8446382994506,42.8453954127652],[71.1862805520523,42.7042929143922],[70.9623148944993,42.2661542832055]]]}},{type:"Feature",properties:{admin:"Kenya",name:"Kenya",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[40.993,-.85829],[41.58513,-1.68325],[40.88477,-2.08255],[40.63785,-2.49979],[40.26304,-2.57309],[40.12119,-3.27768],[39.80006,-3.68116],[39.60489,-4.34653],[39.20222,-4.67677],[37.7669,-3.67712],[37.69869,-3.09699],[34.07262,-1.05982],[33.9037111971045,-.95],[33.8935689696669,.109813537861896],[34.18,.515],[34.6721,1.17694],[35.03599,1.90584],[34.59607,3.05374],[34.47913,3.5556],[34.005,4.24988494736205],[34.6201962678539,4.84712274208199],[35.298007118233,5.506],[35.8174476623535,5.3382320827908],[35.8174476623535,4.77696566346189],[36.1590786328556,4.44786412767277],[36.8550932380081,4.44786412767277],[38.120915,3.598605],[38.43697,3.58851],[38.67114,3.61607],[38.89251,3.50074],[39.5593842587658,3.42206],[39.85494,3.83879],[40.76848,4.25702],[41.1718,3.91909],[41.855083092644,3.91891192048373],[40.98105,2.78452],[40.993,-.85829]]]}},{type:"Feature",properties:{admin:"Kyrgyzstan",name:"Kyrgyzstan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[70.9623148944991,42.2661542832055],[71.1862805520521,42.7042929143921],[71.8446382994506,42.8453954127651],[73.4897575214623,42.5008944768913],[73.6453035826609,43.0912718776098],[74.2128658385226,43.2983393418034],[75.636964959622,42.8778998886767],[76.0003536314984,42.9880223658907],[77.6583919615832,42.9606855332083],[79.1421773619798,42.8560924342495],[79.6436454609401,42.4966828476595],[80.2599902688853,42.349999294599],[80.1194303730514,42.1239407415382],[78.5436609231753,41.5822425400387],[78.187196893226,41.1853158636048],[76.9044844908771,41.0664859075496],[76.5263680357974,40.4279460719351],[75.4678279967307,40.5620722519487],[74.776862420556,40.3664252792916],[73.8222436868283,39.8939734970632],[73.9600130553184,39.6600084498617],[73.6753792662548,39.4312368841056],[71.784693637992,39.2794632024644],[70.5491618183256,39.6041979029865],[69.4648869159775,39.5266832545487],[69.5596098163685,40.103211371413],[70.6480188333,39.9357538925712],[71.0141980325202,40.2443655462182],[71.7748751158566,40.1458444280538],[73.0554171080492,40.8660330266895],[71.8701147805705,41.3929000921213],[71.1578585142916,41.1435871445291],[70.4200224140282,41.5199982773431],[71.2592476744482,42.1677106796895],[70.9623148944991,42.2661542832055]]]}},{type:"Feature",properties:{admin:"Cambodia",name:"Cambodia",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[103.49727990114,10.6325554468159],[103.090689731867,11.1536605900472],[102.584932489027,12.1865949569133],[102.348099399833,13.3942473413582],[102.988422072362,14.2257211369345],[104.281418084737,14.4167430689014],[105.218776890079,14.2732117782107],[106.043946160916,13.88109100998],[106.496373325631,14.5705838078343],[107.382727492301,14.202440904187],[107.614547967562,13.5355307072442],[107.491403029411,12.3372059188279],[105.810523716253,11.5676146509212],[106.249670037869,10.9618118351636],[105.199914992292,10.8893098006581],[104.334334751403,10.4865436873752],[103.49727990114,10.6325554468159]]]}},{type:"Feature",properties:{admin:"South Korea",name:"Korea",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[128.349716424677,38.6122429469278],[129.21291954968,37.4323924830559],[129.460449660358,36.7841891546028],[129.468304478066,35.6321406113039],[129.09137658093,35.0824842392314],[128.185850457879,34.8903771021864],[127.386519403188,34.4756737330441],[126.485747511909,34.3900458847365],[126.373919712429,34.9345604517959],[126.559231398628,35.6845405136479],[126.117397902532,36.7254847275193],[126.860143263863,36.8939240585746],[126.174758742376,37.749685777328],[126.237338901882,37.8403779160003],[126.683719924019,37.8047728541512],[127.073308547067,38.2561148137884],[127.780035435091,38.3045356308459],[128.205745884311,38.3703972438019],[128.349716424677,38.6122429469278]]]}},{type:"Feature",properties:{admin:"Kosovo",name:"Kosovo",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[20.76216,42.05186],[20.7173100000001,41.84711],[20.59023,41.85541],[20.52295,42.21787],[20.28374,42.32025],[20.0707,42.58863],[20.25758,42.81275],[20.49679,42.88469],[20.63508,43.21671],[20.81448,43.27205],[20.95651,43.13094],[21.143395,43.0686850000001],[21.27421,42.90959],[21.43866,42.86255],[21.63302,42.67717],[21.77505,42.6827],[21.66292,42.43922],[21.54332,42.32025],[21.5766359894021,42.2452243970619],[21.3527000000001,42.2068],[20.76216,42.05186]]]}},{type:"Feature",properties:{admin:"Kuwait",name:"Kuwait",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[47.9745190773499,29.9758192001485],[48.1831885109445,29.5344766301598],[48.0939433123764,29.306299343375],[48.4160941912839,28.5520042994267],[47.7088505389374,28.5260627304161],[47.4598218117228,29.0025194361472],[46.5687134132817,29.0990251734523],[47.302622104691,30.0590699325707],[47.9745190773499,29.9758192001485]]]}},{type:"Feature",properties:{admin:"Laos",name:"Lao PDR",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[105.218776890079,14.2732117782107],[105.544338413518,14.7239336206604],[105.58903852745,15.5703160669529],[104.779320509869,16.4418649357714],[104.716947056092,17.4288589543301],[103.956476678485,18.2409540877969],[103.200192091894,18.3096320663128],[102.998705682388,17.9616946476916],[102.413004998792,17.9327816838243],[102.113591750092,18.1091016708042],[101.059547560635,17.5124972599945],[101.035931431078,18.4089283309616],[101.282014601652,19.4625849471768],[100.606293573003,19.5083444279712],[100.548881056727,20.1092379826611],[100.115987583418,20.4178496363082],[100.32910119019,20.7861217310362],[101.180005324308,21.436572984294],[101.27002566936,21.2016519230952],[101.803119744883,21.1743667668451],[101.652017856861,22.3181987574095],[102.170435825614,22.4647531193893],[102.754896274835,21.6751372339695],[103.203861118586,20.7665622014137],[104.435000441508,20.7587332219215],[104.822573683697,19.8866417505639],[104.183387892679,19.6246680770602],[103.896532017027,19.2651809758218],[105.094598423282,18.6669745956111],[105.925762160264,17.485315456609],[106.556007928496,16.6042839624648],[107.312705926546,15.9085383163032],[107.564525181104,15.2021731633056],[107.382727492301,14.202440904187],[106.496373325631,14.5705838078343],[106.043946160916,13.88109100998],[105.218776890079,14.2732117782107]]]}},{type:"Feature",properties:{admin:"Lebanon",name:"Lebanon",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[35.8211007016502,33.2774264592763],[35.5527966651908,33.264274807258],[35.4607092628467,33.0890400253563],[35.1260526873245,33.0909003769188],[35.4822066586801,33.9054501409194],[35.9795923194894,34.6100582952191],[35.9984025408436,34.6449140488],[36.4481942075121,34.5939352483441],[36.6117501157159,34.2017886418972],[36.0664604021721,33.8249124211925],[35.8211007016502,33.2774264592763]]]}},{type:"Feature",properties:{admin:"Liberia",name:"Liberia",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-7.71215938966975,4.36456594483772],[-7.97410722495725,4.35575511313196],[-9.00479366701867,4.8324185245922],[-9.91342037600668,5.59356069581921],[-10.7653838769866,6.14071076092556],[-11.4387794661821,6.78591685630575],[-11.1998018050483,7.10584564862474],[-11.1467042708684,7.39670644777953],[-10.6955948551765,7.93946401614109],[-10.2300935530913,8.40620555260129],[-10.0165665348613,8.42850393313523],[-9.75534216962583,8.54105520266692],[-9.33727983238458,7.92853445071135],[-9.40334815106975,7.52690521893891],[-9.20878638349084,7.31392080324795],[-8.926064622422,7.30903738039638],[-8.72212358238212,7.71167430259851],[-8.4392984684487,7.68604279218174],[-8.48544552248535,7.39520783124307],[-8.38545162600057,6.91180064536874],[-8.60288021486862,6.46756419517166],[-8.31134762209402,6.19303314862108],[-7.99369259279588,6.12618968345154],[-7.57015255373169,5.7073521997259],[-7.53971513511176,5.31334524171652],[-7.63536821128403,5.18815908448946],[-7.71215938966975,4.36456594483772]]]}},{type:"Feature",properties:{admin:"Libya",name:"Libya",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[14.8513,22.8629500000001],[14.1438708838552,22.4912889673711],[13.5814245947905,23.0405060897693],[11.9995056494717,23.4716684025964],[11.560669386449,24.0979092473256],[10.771363559623,24.5625320500617],[10.3038468766784,24.379313259371],[9.94826134607802,24.9369536402326],[9.91069257980177,25.3654546167968],[9.31941084151822,26.0943248560575],[9.71628584151966,26.5122063257857],[9.62905602381107,27.140953477481],[9.75612837081678,27.6882585718842],[9.68388471847288,28.1441738957793],[9.85999799972347,28.9599897323711],[9.80563439295235,29.4246383733234],[9.48213992680542,30.3075560572462],[9.97001712407297,30.5393248560754],[10.0565751481617,30.9618313664935],[9.95022505050519,31.3760696477453],[10.6369014827995,31.7614208033457],[10.9447896663945,32.0818146835554],[11.4322534522038,32.3689031031528],[11.488787469131,33.1369957545232],[12.66331,32.79278],[13.08326,32.87882],[13.91868,32.71196],[15.24563,32.26508],[15.71394,31.37626],[16.61162,31.18218],[18.02109,30.76357],[19.08641,30.26639],[19.57404,30.52582],[20.05335,30.98576],[19.82033,31.7517900000001],[20.13397,32.2382],[20.85452,32.7068],[21.54298,32.8432],[22.89576,32.63858],[23.2368,32.19149],[23.6091300000001,32.18726],[23.9275,32.01667],[24.92114,31.89936],[25.16482,31.56915],[24.80287,31.08929],[24.95762,30.6616],[24.70007,30.04419],[25.0000000000001,29.2386545295336],[25.0000000000001,25.682499996361],[25.0000000000001,22],[25.0000000000001,20.00304],[23.8500000000001,20],[23.8376600000001,19.5804700000001],[19.84926,21.49509],[15.86085,23.40972],[14.8513,22.8629500000001]]]}},{type:"Feature",properties:{admin:"Sri Lanka",name:"Sri Lanka",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[81.7879590188914,7.52305532473316],[81.6373222187606,6.48177521405192],[81.2180196471443,6.19714142498829],[80.3483569681044,5.96836985923215],[79.8724687031285,6.76346344647493],[79.6951668639351,8.20084341067338],[80.1478007343796,9.82407766360955],[80.8388179869865,9.26842682539119],[81.3043192890718,8.56420624433369],[81.7879590188914,7.52305532473316]]]}},{type:"Feature",properties:{admin:"Lesotho",name:"Lesotho",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[28.9782625668572,-28.9555966122617],[29.3251664568326,-29.2573869768462],[29.018415154748,-29.7437655575774],[28.8483996925077,-30.0700505510682],[28.2910693702399,-30.2262167294543],[28.1072046241454,-30.5457321103149],[27.7493970069565,-30.6451058896122],[26.9992619158076,-29.87595387138],[27.5325110206275,-29.2427108700754],[28.0743384132078,-28.8514686011936],[28.5417000668555,-28.6475017229376],[28.9782625668572,-28.9555966122617]]]}},{type:"Feature",properties:{admin:"Lithuania",name:"Lithuania",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[22.7310986670927,54.3275369329933],[22.6510518734725,54.5827409938667],[22.7577637061553,54.8565744085814],[22.3157235043306,55.0152985703659],[21.2684489275035,55.1904816758353],[21.0558004086224,56.0310763617111],[22.2011568539395,56.3378018255795],[23.87826378754,56.2736713731053],[24.8606844418408,56.3725283880796],[25.0009342790809,56.1645307481048],[25.5330465023903,56.100296942766],[26.4943314958838,55.6151069199776],[26.5882792497904,55.1671756048717],[25.7684326514798,54.8469625921751],[25.536353794057,54.2824234076025],[24.450683628037,53.9057022161948],[23.4841276384498,53.9124976670411],[23.2439872575895,54.2205667181491],[22.7310986670927,54.3275369329933]]]}},{type:"Feature",properties:{admin:"Luxembourg",name:"Luxembourg",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[6.04307335778111,50.1280516627942],[6.24275109215699,49.9022256536787],[6.18632042809418,49.4638028021145],[5.8977592301764,49.442667141307],[5.67405195478483,49.5294835475575],[5.78241743330091,50.0903278672212],[6.04307335778111,50.1280516627942]]]}},{type:"Feature",properties:{admin:"Latvia",name:"Latvia",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[21.0558004086224,56.0310763617111],[21.090423618258,56.7838727891229],[21.5818664893537,57.4118706325499],[22.5243412614929,57.7533743353508],[23.3184529965221,57.0062364772749],[24.1207296078534,57.0256926540328],[24.3128625831146,57.793423570377],[25.1645935401493,57.9701569688152],[25.6028096859844,57.8475287949866],[26.4635323422378,57.4763886582663],[27.2881848487515,57.4745283067038],[27.7700159034409,57.2442581244112],[27.8552820167225,56.7593264837843],[28.176709425578,56.1691299505788],[27.1024597510945,55.7833137070877],[26.4943314958838,55.6151069199776],[25.5330465023903,56.100296942766],[25.0009342790809,56.1645307481048],[24.8606844418408,56.3725283880796],[23.87826378754,56.2736713731053],[22.2011568539395,56.3378018255795],[21.0558004086224,56.0310763617111]]]}},{type:"Feature",properties:{admin:"Morocco",name:"Morocco",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-5.19386349122203,35.7551821965908],[-4.59100623210514,35.3307119817456],[-3.64005652507001,35.399855048152],[-2.60430579264411,35.1790933294011],[-2.16991370279862,35.1683963079167],[-1.79298580566166,34.5279186060913],[-1.73345455566141,33.9197128362321],[-1.3880492822226,32.8640150009414],[-1.1245511539662,32.6515215113572],[-1.30789913573787,32.262888902306],[-2.61660478352957,32.0943462183862],[-3.06898027181265,31.7244979924733],[-3.64749793132015,31.6372940129808],[-3.69044104655467,30.8969516057512],[-4.85964616537444,30.5011876490439],[-5.24212927898279,30.0004430201356],[-6.06063229005375,29.7316997340018],[-7.0592276676619,29.5792284205247],[-8.67411617678283,28.8412889673966],[-8.66558956545484,27.6564258895925],[-8.81780900794052,27.6564258895925],[-8.81782833498664,27.6564258895925],[-8.79488399904903,27.1206963160226],[-9.41303748212451,27.0884760604885],[-9.73534339032875,26.8609447291074],[-10.1894242008775,26.8609447291074],[-10.5512625797853,26.9908076034569],[-11.3925548974969,26.8834239771544],[-11.7182197738003,26.1040917017608],[-12.0307588363017,26.0308661972031],[-12.5009626937254,24.7701162785781],[-13.891110398809,23.6910090194594],[-14.2211677718572,22.3101630721883],[-14.6308326888509,21.8609398462749],[-14.7509545557134,21.5006000839038],[-17.0029617985611,21.4207341577967],[-17.0204284326758,21.4223102889816],[-16.9732478499932,21.885744533775],[-16.5891369287676,22.1582343612501],[-16.2619217594957,22.6793395044813],[-16.3264139469959,23.0177684595609],[-15.9826106429581,23.7233584660741],[-15.4260037907422,24.359133612561],[-15.0893318343607,24.520260728447],[-14.8246451481617,25.1035326197253],[-14.8009256657397,25.6362649602223],[-14.4399399479648,26.2544184432976],[-13.7738048975065,26.6188923202523],[-13.1399417790143,27.6401478134205],[-13.1216133699147,27.6541476717198],[-12.6188366357831,28.0381855331487],[-11.6889192366908,28.1486439071726],[-10.9009569971044,28.8321422388809],[-10.3995922510086,29.0985859237778],[-9.56481116376562,29.9335737167499],[-9.81471839032917,31.1777355006091],[-9.43479326011936,32.0380964218365],[-9.30069291832183,32.5646792668906],[-8.65747636558504,33.2402452662424],[-7.65417843263822,33.6970649277025],[-6.91254411460136,34.1104763860374],[-6.24434200685141,35.1458653834375],[-5.92999426921983,35.759988104794],[-5.19386349122203,35.7551821965908]]]}},{type:"Feature",properties:{admin:"Moldova",name:"Moldova",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[26.6193367855978,48.2207262233335],[26.8578235206248,48.3682107610945],[27.5225374691952,48.4671194525011],[28.2595467465418,48.1555622422134],[28.6708911475852,48.1181485052341],[29.122698195113,47.8490951605065],[29.0508679542273,47.5102269557525],[29.4151351254527,47.3466452093326],[29.5596741065731,46.9285828720913],[29.9088517595693,46.6743606634315],[29.8382100766263,46.5253258327017],[30.0246586443354,46.423936672545],[29.7599719581364,46.3499876979354],[29.1706539242799,46.3792623968287],[29.0721069678993,46.5176777207225],[28.8629724464141,46.4378893092638],[28.9337174822216,46.2588304713725],[28.6599874203716,45.9399868841316],[28.4852694027928,45.5969070501459],[28.233553501099,45.4882831894684],[28.0544429867754,45.9445860866056],[28.1600179379477,46.3715626084172],[28.128030226359,46.8104763860882],[27.5511662126848,47.4051170924708],[27.2338729184127,47.8267709417564],[26.9241760596876,48.123264472031],[26.6193367855978,48.2207262233335]]]}},{type:"Feature",properties:{admin:"Madagascar",name:"Madagascar",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[49.5435189145957,-12.4698328589406],[49.8089807472791,-12.8952849259996],[50.0565108579572,-13.555761407122],[50.2174312681141,-14.7587887508768],[50.4765368996255,-15.2265121395505],[50.3771114438959,-15.7060694312191],[50.2002746925932,-16.0002633602568],[49.8606055031387,-15.4142526180669],[49.6726066424609,-15.7102035458025],[49.8633443540501,-16.4510368791388],[49.7745642433727,-16.8750420060936],[49.4986120949341,-17.1060356584383],[49.4356185239703,-17.9530640601344],[49.0417924334739,-19.1187810197744],[48.548540887248,-20.4968881161341],[47.9307491391987,-22.3915011532511],[47.5477234230513,-23.7819589169285],[47.0957613462266,-24.9416297339904],[46.2824776548171,-25.1784628231841],[45.4095076841104,-25.6014344214931],[44.8335738462176,-25.3461011695389],[44.0397204933498,-24.9883452287823],[43.7637683449112,-24.46067717865],[43.6977775408744,-23.5741163062506],[43.3456543312376,-22.7769039852839],[43.254187046081,-22.0574130184841],[43.4332975604046,-21.3364751115802],[43.8936828956929,-21.1633073869701],[43.8963700701721,-20.8304594865782],[44.3743253924396,-20.0723662248564],[44.4643974139244,-19.435454196859],[44.2324219093662,-18.9619947242009],[44.0429761085842,-18.3313872209432],[43.9630843442609,-17.4099447567468],[44.3124687029863,-16.850495700755],[44.4465173683514,-16.2162191708045],[44.9449365578065,-16.1793738745804],[45.502731967965,-15.9743734676785],[45.8729936053363,-15.7934542782247],[46.3122432798172,-15.7800184058288],[46.8821826515643,-15.2101823869463],[47.7051298358124,-14.5943026668918],[48.0052148781312,-14.0912325985304],[47.8690474790422,-13.6638685034766],[48.2938277524814,-13.7840678849875],[48.8450602557388,-13.0891748999587],[48.863508742067,-12.4878679338104],[49.1946513201933,-12.040556735892],[49.5435189145957,-12.4698328589406]]]}},{type:"Feature",properties:{admin:"Mexico",name:"Mexico",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-97.1400083076707,25.8699974634784],[-97.5280724759665,24.9921440699203],[-97.7029455228422,24.2723430445267],[-97.776041836319,22.9325798609277],[-97.8723667061111,22.4442117375534],[-97.6990439522042,21.8986894800643],[-97.3889595202367,21.4110189885258],[-97.1893334622933,20.6354332544731],[-96.5255755277203,19.8909308944441],[-96.2921272448417,19.3203714055095],[-95.9008849759599,18.8280241968487],[-94.8390634834427,18.5627173934622],[-94.4257295397562,18.1443708358433],[-93.5486512926824,18.4238369816779],[-92.7861138577835,18.5248385685923],[-92.0373481920904,18.7045692001034],[-91.4079034085592,18.8760832788802],[-90.7718698799109,19.2841203882568],[-90.533589850613,19.8674181177513],[-90.4514759997012,20.7075218775204],[-90.2786183336849,20.9998554549955],[-89.6013211738515,21.2617257756345],[-88.5438663398628,21.4936754419766],[-87.6584165107577,21.458845526612],[-87.0518902249481,21.5435431991383],[-86.8119823880329,21.3315147974447],[-86.8459079658326,20.8498646102683],[-87.3832911852359,20.2554047713987],[-87.6210544502107,19.6465530461359],[-87.4367504544418,19.4724034693123],[-87.5865604316559,19.0401301131907],[-87.8371911282715,18.2598159855834],[-88.0906640286632,18.516647854074],[-88.3000310940936,18.49998220466],[-88.4901228502793,18.4868305526417],[-88.8483438789266,17.8831981470403],[-89.0298573473517,18.0015113387726],[-89.1509093899955,17.9554676376004],[-89.1430804105033,17.8083189966494],[-90.0679335192309,17.8193260767275],[-91.0015199450159,17.8175949162457],[-91.0022692532842,17.2546577010743],[-91.4539212715151,17.2521772323242],[-91.0816700915006,16.9184766707995],[-90.7118218655876,16.6874830184548],[-90.6008467272409,16.4707778996388],[-90.438866950222,16.4101097681281],[-90.4644726224226,16.0695620793247],[-91.7479601712559,16.0665648462518],[-92.2292486234063,15.2514466414959],[-92.087215949252,15.0645846623285],[-92.2032295397473,14.8301028508041],[-92.2277500068698,14.538828640191],[-93.3594638740618,15.6154295923437],[-93.8751688301185,15.9401642928659],[-94.6916564603301,16.2009752466429],[-95.250227016973,16.1283181828406],[-96.0533821276533,15.7520879175396],[-96.5574340482283,15.6535151229428],[-97.2635924954966,15.9170649276313],[-98.0130299548096,16.1073117131139],[-98.9476757474565,16.5660434025688],[-99.697397427147,16.7061640487282],[-100.829498867581,17.171071071842],[-101.666088629954,17.6490263941096],[-101.9185280017,17.916090196194],[-102.478132086989,17.9757506372751],[-103.500989549558,18.2922946232788],[-103.917527432047,18.7485716822],[-104.992009650475,19.3161339380617],[-105.493038499761,19.9467672795354],[-105.731396043708,20.4341018742641],[-105.397772996831,20.5317186548634],[-105.500660773524,20.8168950464661],[-105.270752326258,21.0762848983551],[-105.265817226974,21.4221035832523],[-105.603160976975,21.8711459416526],[-105.693413865973,22.2690803085162],[-106.028716396899,22.7737523462786],[-106.909980434988,23.7677743596289],[-107.915448778091,24.5489153101529],[-108.401904873471,25.1723139511059],[-109.260198737407,25.5806094426441],[-109.444089321717,25.8248839380877],[-109.291643846456,26.4429340682984],[-109.801457689232,26.6761756454479],[-110.391731737086,27.1621149765045],[-110.641018846462,27.8598760035255],[-111.178918830188,27.9412405461691],[-111.759606899852,28.4679525823039],[-112.22823462609,28.9544086776835],[-112.271823696729,29.2668443873201],[-112.809594489374,30.0211135930523],[-113.163810594519,30.7868808049694],[-113.148669399857,31.1709658879789],[-113.871881069782,31.5676083440352],[-114.205736660604,31.5240451116131],[-114.776451178835,31.7995321721611],[-114.936699795372,31.3934846054276],[-114.771231859173,30.9136172551653],[-114.673899298952,30.162681179316],[-114.330974494263,29.7504324407074],[-113.588875088335,29.061611436473],[-113.424053107541,28.8261736109512],[-113.271969367306,28.7547826197399],[-113.140039435664,28.411289374296],[-112.962298346796,28.4251903345825],[-112.761587083775,27.7802167831475],[-112.457910529412,27.5258137069748],[-112.244951951937,27.1717267929108],[-111.616489020619,26.6628172877005],[-111.284674648873,25.7325898300144],[-110.987819383572,25.2946062281246],[-110.710006883571,24.8260043401019],[-110.655048997829,24.2985946721311],[-110.172856208113,24.2655475936804],[-109.771847093529,23.8111825627542],[-109.409104377056,23.3646723495362],[-109.433392300233,23.1855876734287],[-109.854219326602,22.8182715926981],[-110.031391974714,22.8230775009012],[-110.295070970484,23.4309732121667],[-110.949501309028,24.000964260346],[-111.670568407013,24.4844231226525],[-112.182035895621,24.7384127873672],[-112.148988817171,25.470125230404],[-112.30071082238,26.0120042994166],[-112.777296719192,26.3219595403032],[-113.464670783322,26.7681855331434],[-113.596729906044,26.6394595403045],[-113.848936733844,26.9000637883524],[-114.46574662968,27.1420903589914],[-115.055142178185,27.7227267522229],[-114.982252570437,27.7982001815851],[-114.570365566855,27.7414852971449],[-114.199328782999,28.1150025497506],[-114.162018398885,28.5661119654423],[-114.931842210737,29.2794792750155],[-115.518653937627,29.5563615992354],[-115.88736528203,30.1807937688342],[-116.258350389453,30.8364643417536],[-116.721526252085,31.635743720012],[-117.12776,32.53534],[-115.99135,32.6123900000001],[-114.72139,32.72083],[-114.815,32.52528],[-113.30498,32.03914],[-111.02361,31.33472],[-109.035,31.3419400000001],[-108.24194,31.34222],[-108.24,31.7548537181664],[-106.50759,31.75452],[-106.1429,31.39995],[-105.63159,31.08383],[-105.03737,30.64402],[-104.70575,30.12173],[-104.45697,29.57196],[-103.94,29.27],[-103.11,28.97],[-102.48,29.76],[-101.6624,29.7793],[-100.9576,29.3807100000001],[-100.45584,28.6961200000001],[-100.11,28.1100000000001],[-99.52,27.54],[-99.3,26.84],[-99.0199999999999,26.37],[-98.24,26.06],[-97.5299999999999,25.84],[-97.1400083076707,25.8699974634784]]]}},{type:"Feature",properties:{admin:"Macedonia",name:"Macedonia",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[20.59023,41.85541],[20.7173100000001,41.84711],[20.76216,42.05186],[21.3527000000001,42.2068],[21.5766359894021,42.2452243970619],[21.9170800000001,42.30364],[22.3805257504247,42.3202595078151],[22.8813737321973,41.9992971868504],[22.9523771501665,41.3379938828112],[22.76177,41.3048],[22.597308383889,41.1304871689432],[22.0553776384443,41.1498658310527],[21.674160597427,40.9312745224579],[21.0200403174764,40.8427269557259],[20.60518,41.08622],[20.46315,41.51509],[20.59023,41.85541]]]}},{type:"Feature",properties:{admin:"Mali",name:"Mali",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-12.1707502913803,14.6168342147355],[-11.8342075260795,14.7990969914289],[-11.6660782536179,15.3882083195563],[-11.3490950179395,15.4112560083585],[-10.6507913883794,15.1327458765214],[-10.0868464827782,15.3304857446863],[-9.7002550928027,15.2641073674074],[-9.55023840985939,15.4864968937754],[-5.53774430990845,15.5016897648693],[-5.31527726889193,16.2018537459918],[-5.48852250815044,16.325102037008],[-5.97112870932425,20.6408334416476],[-6.45378658693033,24.9565906845034],[-4.92333736817423,24.974574082941],[-1.55005489745761,22.7926659204974],[1.82322757325903,20.610809434486],[2.06099083823392,20.1422333846795],[2.68358849448643,19.8562301701601],[3.1466610042539,19.6935785995214],[3.1581331722227,19.05736420336],[4.26741946780004,19.155265204337],[4.2702099951438,16.8522274846012],[3.72342166506348,16.1842837590126],[3.63825890464648,15.5681198185805],[2.74999270998148,15.4095248478767],[1.38552819174686,15.3235611027592],[1.01578331869851,14.9681822778879],[.374892205414682,14.9289081893461],[-.26625729003058,14.9243089868721],[-.515854458000348,15.1161577417557],[-1.06636349120566,14.9738150090078],[-2.00103512206877,14.5590082870009],[-2.19182451009038,14.2464175480674],[-2.96769446452058,13.7981503361515],[-3.10370683431276,13.5412667912286],[-3.52280270019986,13.3376616479986],[-4.00639075358723,13.4724854598481],[-4.28040503581488,13.2284435083497],[-4.4271661035238,12.5426455754043],[-5.22094194174312,11.7138589543072],[-5.19784257650865,11.3751457788501],[-5.470564947929,10.951269842976],[-5.40434159994697,10.3707368026091],[-5.81692623536529,10.2225546330122],[-6.05045203289227,10.0963607853554],[-6.20522294760643,10.5240607772191],[-6.49396501303727,10.4113028019583],[-6.66646094402755,10.4308106551484],[-6.85050655763506,10.1389938419962],[-7.62275916180481,10.1472362329468],[-7.89958980959237,10.2973821069708],[-8.02994361004862,10.2065349390017],[-8.33537716310974,10.4948119165419],[-8.28235714357828,10.7925973576238],[-8.40731075686003,10.9092569035228],[-8.62032101076713,10.8108908146552],[-8.58130530438677,11.1362456323648],[-8.37630489748491,11.3936459416106],[-8.78609900555946,11.8125609399847],[-8.90526485842453,12.0883580591264],[-9.12747351727958,12.3080604110153],[-9.32761633954601,12.3342862004035],[-9.56791174970321,12.1942430688925],[-9.89099280439201,12.060478623905],[-10.1652137923488,11.8440835636827],[-10.5932238428063,11.923975328006],[-10.8708296370782,12.1778874780721],[-11.0365559554383,12.2112446151165],[-11.2975736149445,12.0779710962358],[-11.4561685856483,12.0768342147253],[-11.5139428369506,12.4429875757294],[-11.4678991357785,12.754518947801],[-11.5533977930054,13.1412136906411],[-11.9277160303116,13.4220751001474],[-12.1248874577213,13.9947274845898],[-12.1707502913803,14.6168342147355]]]}},{type:"Feature",properties:{admin:"Myanmar",name:"Myanmar",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[99.5433093607593,20.1865976018021],[98.9596757344549,19.7529806584409],[98.2537239929156,19.70820302986],[97.7977828308044,18.6270803898818],[97.3758964375735,18.4454377303758],[97.8591227559349,17.5679460718437],[98.4937610209113,16.8378355982079],[98.9033484232567,16.1778242049761],[98.5373759297657,15.3084974227461],[98.1920740091914,15.1237025008704],[98.4308191263799,14.6220276961808],[99.0977551615387,13.8275025496933],[99.2120117533361,13.2692937280765],[99.1963537943516,12.8047484399887],[99.5872860046397,11.8927627629017],[99.038120558674,10.9605457625724],[98.553550653073,9.93295990644854],[98.4571741068487,10.6752660181051],[98.7645455261208,11.4412916121837],[98.4283386576298,12.0329867619257],[98.5095740091927,13.1223776310707],[98.1036039571077,13.6404597030129],[97.7777323750752,14.8372858748926],[97.5970715677828,16.1005679386998],[97.1645398294998,16.9287344426093],[96.505768670643,16.4272405054328],[95.3693522481124,15.7143899601826],[94.8084045755841,15.8034542912376],[94.1888041524045,16.037936102762],[94.5334859557913,17.2772403019857],[94.3248165221967,18.2135139022499],[93.5409883971936,19.36649262133],[93.6632548359962,19.726961574782],[93.0782776224522,19.855144965082],[92.3685535013556,20.6708832870253],[92.3032344909387,21.4754853378098],[92.652257114638,21.3240475529785],[92.6727209818256,22.0412389185412],[93.1661275573484,22.2784595809771],[93.0602942240146,22.7031106633356],[93.2863269388593,23.043658352139],[93.3251876159428,24.0785564234322],[94.1067419779251,23.8507408716735],[94.5526579121716,24.6752383488903],[94.6032491393854,25.1624954289704],[95.1551534362626,26.0013072779321],[95.1247676940749,26.5735720891323],[96.4193656758509,27.2645893417392],[97.1339990580153,27.08377350515],[97.0519885599681,27.6990589462331],[97.4025614766361,27.8825361190854],[97.32711388549,28.2615827499463],[97.9119877461694,28.3359451360143],[98.2462309102333,27.7472213811292],[98.6826900573705,27.5088121607506],[98.7120939473445,26.7435358749403],[98.6718380065891,25.9187025009135],[97.7246090026791,25.083637193293],[97.604719679762,23.897404690033],[98.6602624857557,24.06328603769],[98.8987492207828,23.1427220728425],[99.5319922220874,22.9490388046126],[99.2408988789872,22.1183143173046],[99.9834892110215,21.7429367131364],[100.416537713627,21.5588394230966],[101.150032993578,21.849984442629],[101.180005324308,21.436572984294],[100.32910119019,20.7861217310362],[100.115987583418,20.4178496363082],[99.5433093607593,20.1865976018021]]]}},{type:"Feature",properties:{admin:"Montenegro",name:"Montenegro",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[19.8016133968987,42.5000934921908],[19.7380513851796,42.6882473821656],[19.30449,42.19574],[19.3717700000001,41.87755],[19.16246,41.95502],[18.88214,42.28151],[18.45,42.48],[18.56,42.65],[18.70648,43.20011],[19.03165,43.43253],[19.21852,43.52384],[19.48389,43.35229],[19.63,43.2137799702705],[19.95857,43.10604],[20.3398,42.89852],[20.25758,42.81275],[20.0707,42.58863],[19.8016133968987,42.5000934921908]]]}},{type:"Feature",properties:{admin:"Mongolia",name:"Mongolia",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[87.7512642760767,49.2971979844055],[88.8055668476955,49.4705207383124],[90.7136674336407,50.3318118353211],[92.2347115417197,50.8021707220417],[93.1042191914627,50.4952902288764],[94.1475663594356,50.4805366074571],[94.8159493346987,50.0134333359708],[95.814027947984,49.9774665390957],[97.2597278177814,49.7260606959957],[98.2317615091915,50.4224006211287],[97.8257397806743,51.0109951849332],[98.8614905131003,52.0473660345467],[99.9817322123235,51.634006252644],[100.889480421963,51.5168557806383],[102.065222609467,51.2599205592831],[102.255908644624,50.5105606146187],[103.67654544476,50.0899661321951],[104.621552362082,50.2753294948261],[105.886591424587,50.4060191920922],[106.888804152455,50.2742959661802],[107.868175897251,49.7937051458658],[108.475167270951,49.2825477158507],[109.402449171997,49.2929605169575],[110.662010532679,49.1301280788059],[111.581230910287,49.3779682480777],[112.897739699354,49.543565375357],[114.362456496235,50.2483027207374],[114.96210981655,50.1402473008151],[115.485695428531,49.8051773138346],[116.678800897286,49.8885313991214],[116.191802199368,49.1345980901991],[115.485282017073,48.1353825954034],[115.742837355616,47.7265445013263],[116.308952671373,47.8534101426028],[117.295507440257,47.6977090521074],[118.064142694167,48.0667304551037],[118.866574334795,47.7470600449462],[119.772823927897,47.0480587835501],[119.663269891439,46.6926799586789],[118.874325799639,46.8054120957236],[117.421701287914,46.6727328558143],[116.717868280099,46.3882024196152],[115.9850964702,45.727235012386],[114.460331658996,45.3398167994938],[113.463906691544,44.8088931341271],[112.436062453259,45.0116456162243],[111.8733061056,45.1020793727351],[111.348376906379,44.4574417181101],[111.667737257943,44.0731757675877],[111.829587843881,43.7431183945395],[111.12968224492,43.4068340114001],[110.412103306115,42.871233628911],[109.243595819131,42.5194463160841],[107.744772576938,42.4815158147819],[106.129315627062,42.1343277044289],[104.964993931093,41.5974095729163],[104.522281935649,41.9083466660165],[103.312278273535,41.9074681666676],[101.83304039918,42.5148729518263],[100.845865513108,42.6638044296914],[99.51581749878,42.5246914739617],[97.451757440178,42.74888967546],[96.3493957865278,42.7256352809287],[95.7624548685567,43.3194491643946],[95.3068754414715,44.2413308782655],[94.6889286641253,44.3523318548284],[93.4807336771413,44.97547211362],[92.1338908223182,45.1150759954564],[90.9455395853343,45.2860733099103],[90.5857682637183,45.7197160914875],[90.970809360725,46.8881460638229],[90.2808256367639,47.6935490993079],[88.8542977233467,48.069081732773],[88.0138322285517,48.5994627956006],[87.7512642760767,49.2971979844055]]]}},{type:"Feature",properties:{admin:"Mozambique",name:"Mozambique",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[34.5599890479993,-11.5200200334159],[35.312397902169,-11.4391464168791],[36.5140816586843,-11.7209380021667],[36.7751509946228,-11.5945374487808],[37.4712842140266,-11.5687509090672],[37.8276448911114,-11.2687692196128],[38.4275565935877,-11.2852023250817],[39.5210299008838,-10.8968539364082],[40.3165885760172,-10.3170960425257],[40.478387485523,-10.76544076909],[40.4372530454187,-11.761710707245],[40.5608113950286,-12.639176527561],[40.5996203956797,-14.2019751929319],[40.775475294769,-14.6917644181942],[40.4772506040126,-15.406294447494],[40.0892639503652,-16.1007740210645],[39.452558628097,-16.7208912085669],[38.5383508644215,-17.101023044506],[37.4111328468389,-17.5863680965912],[36.2812793312094,-18.6596875952934],[35.8964966163641,-18.8422604305806],[35.1983996925331,-19.5528113745939],[34.78638349787,-19.7840117326677],[34.7018925310728,-20.497043145431],[35.1761271502154,-21.2543612606684],[35.3734277687057,-21.8408370907489],[35.3858482537054,-22.14],[35.5625455363691,-22.09],[35.5339347674043,-23.0707878557278],[35.3717741228724,-23.5353589820317],[35.6074703305556,-23.7065630022147],[35.4587455584196,-24.1226099585965],[35.0407348976107,-24.4783505184938],[34.2158240089355,-24.8163143856827],[33.013210076639,-25.3575733375077],[32.5746321957779,-25.7273182105561],[32.6603633969501,-26.1485844865994],[32.9159550310657,-26.2158672014435],[32.8301204770289,-26.7421916643362],[32.0716654802811,-26.7338200823049],[31.985779249812,-26.2917798804802],[31.8377779477281,-25.8433318010513],[31.7524084815819,-25.4842839494874],[31.9305888201242,-24.3694165992225],[31.6703979835346,-23.6589690080739],[31.1914091326213,-22.2515096981724],[32.244988234188,-21.1164885393137],[32.5086930681734,-20.3952922502483],[32.6597432797626,-20.3042900529823],[32.7727079607526,-19.7155921363133],[32.6119942563249,-19.4193828264163],[32.6548856951271,-18.6720899390435],[32.8498608741644,-17.9790573055772],[32.8476387875758,-16.7133981258846],[32.3282389666102,-16.3920740698938],[31.8520406430406,-16.3194170060914],[31.6364982439512,-16.0719902482779],[31.1730639991577,-15.8609436987979],[30.3389547055345,-15.8808391252302],[30.2742558123051,-15.5077869605152],[30.1794812354818,-14.7960991349915],[33.2140246925252,-13.9718600399362],[33.7897001482567,-14.4518307430631],[34.0648254737786,-14.3599500464481],[34.4596334164885,-14.6130095353814],[34.5176660499523,-15.0137085913726],[34.3072912940921,-15.4786414527026],[34.381291945134,-16.183559665596],[35.0338102556835,-16.8012997372131],[35.3390629412316,-16.1074402808301],[35.7719047381084,-15.8968588192407],[35.6868453305559,-14.6110458309543],[35.267956170398,-13.8878341610296],[34.9071513201362,-13.5654248999606],[34.5599890479993,-13.5799976538669],[34.280006137842,-12.2800253231325],[34.5599890479993,-11.5200200334159]]]}},{type:"Feature",properties:{admin:"Mauritania",name:"Mauritania",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-12.1707502913803,14.6168342147355],[-12.8306583317475,15.3036915145429],[-13.4357376774531,16.0393830428662],[-14.0995214502422,16.3043022730105],[-14.577347581429,16.5982636581028],[-15.1357372705588,16.5872824162408],[-15.6236661442587,16.3693370630498],[-16.1206900700419,16.4556625431934],[-16.4630981104079,16.1350361190385],[-16.5497078109291,16.673892116762],[-16.2705517236884,17.1669627954749],[-16.1463474186748,18.1084815536167],[-16.2568833073472,19.0967158065503],[-16.3776511296133,19.593817246982],[-16.2778381006415,20.0925206568147],[-16.5363236149655,20.5678663192515],[-17.0634232243426,20.9997521021308],[-16.845193650774,21.3333234725749],[-12.9291019352635,21.3270706242676],[-13.1187544417747,22.7712202010963],[-12.8742215641696,23.2848322616452],[-11.9372244938533,23.3745942245362],[-11.9694189111712,25.9333527694683],[-8.6872936670174,25.8810562199889],[-8.68439978680905,27.395744126896],[-4.92333736817423,24.974574082941],[-6.45378658693033,24.9565906845034],[-5.97112870932425,20.6408334416476],[-5.48852250815044,16.325102037008],[-5.31527726889193,16.2018537459918],[-5.53774430990845,15.5016897648693],[-9.55023840985939,15.4864968937754],[-9.7002550928027,15.2641073674074],[-10.0868464827782,15.3304857446863],[-10.6507913883794,15.1327458765214],[-11.3490950179395,15.4112560083585],[-11.6660782536179,15.3882083195563],[-11.8342075260795,14.7990969914289],[-12.1707502913803,14.6168342147355]]]}},{type:"Feature",properties:{admin:"Malawi",name:"Malawi",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[34.5599890479993,-11.5200200334159],[34.280006137842,-12.2800253231325],[34.5599890479993,-13.5799976538669],[34.9071513201362,-13.5654248999606],[35.267956170398,-13.8878341610296],[35.6868453305559,-14.6110458309543],[35.7719047381084,-15.8968588192407],[35.3390629412316,-16.1074402808301],[35.0338102556835,-16.8012997372131],[34.381291945134,-16.183559665596],[34.3072912940921,-15.4786414527026],[34.5176660499523,-15.0137085913726],[34.4596334164885,-14.6130095353814],[34.0648254737786,-14.3599500464481],[33.7897001482567,-14.4518307430631],[33.2140246925252,-13.9718600399362],[32.6881653175231,-13.7128577612893],[32.9917643572379,-12.7838705379783],[33.3064221534631,-12.4357780900602],[33.1142891782019,-11.6071981746923],[33.3153104998173,-10.7965499813297],[33.4856876970836,-10.5255587703911],[33.2313879737753,-9.6767216935648],[32.7593754412213,-9.23059905358906],[33.7397290382304,-9.41715097416272],[33.9408377240965,-9.69367384198029],[34.280006137842,-10.1599996883584],[34.5599890479993,-11.5200200334159]]]}},{type:"Feature",properties:{admin:"Malaysia",name:"Malaysia",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[101.075515578213,6.20486705161589],[101.154218784594,5.69138418214771],[101.814281854258,5.81080841717423],[102.141186964936,6.22163605389466],[102.371147088635,6.12820506431096],[102.961705356867,5.52449514406108],[103.381214634212,4.85500112550375],[103.438575474056,4.18160553630838],[103.332122023535,3.72669790284297],[103.429428745541,3.38286876058902],[103.502447544369,2.7910185815502],[103.85467410687,2.51545400635376],[104.247931756611,1.63114105875906],[104.228811476664,1.29304800048953],[103.519707472754,1.22633372640068],[102.573615350355,1.96711538330474],[101.390638462329,2.76081370687562],[101.273539666756,3.27029165284118],[100.695435418707,3.93913971599487],[100.557407668055,4.76728038168828],[100.196706170658,5.31249258058368],[100.306260207117,6.04056183514388],[100.085756870527,6.46448944745029],[100.259596388757,6.64282481528957],[101.075515578213,6.20486705161589]]],[[[118.618320754065,4.47820241944754],[117.88203494677,4.13755137777949],[117.015214471506,4.30609406169947],[115.865517205877,4.30655914959016],[115.519078403792,3.1692383894944],[115.134037306785,2.82148183838622],[114.621355422017,1.43068817789889],[113.80584964402,1.21754873291104],[112.859809198052,1.49779002522995],[112.380251906384,1.41012095784676],[111.79754845586,.904441229654651],[111.159137811327,.976478176269509],[110.514060907027,.773131415200993],[109.830226678509,1.33813568766419],[109.663260125774,2.00646698649498],[110.396135288537,1.6637747257514],[111.168852980597,1.85063670491878],[111.370081007942,2.69730337158887],[111.796928338673,2.88589651123807],[112.995614862115,3.10239492432487],[113.712935418759,3.89350942628113],[114.204016554828,4.52587392823682],[114.659595981914,4.00763682699781],[114.869557326315,4.34831370688195],[115.347460972151,4.31663605388701],[115.405700311344,4.95522756593382],[115.45071048387,5.44772980389156],[116.220741001451,6.14319122967562],[116.72510298062,6.924771429874],[117.1296260926,6.92805288332457],[117.643393182446,6.42216644940331],[117.689075148592,5.98749013918018],[118.347691278152,5.70869578696546],[119.18190392464,5.40783559816225],[119.110693800942,5.01612824138986],[118.439727004064,4.96651886638962],[118.618320754065,4.47820241944754]]]]}},{type:"Feature",properties:{admin:"Namibia",name:"Namibia",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[16.3449768408952,-28.5767050106977],[15.6018180681058,-27.8212472470228],[15.2104724463595,-27.090955905874],[14.9897107276085,-26.1173719214952],[14.7432141455763,-25.3929200171954],[14.4081441585958,-23.8530140113298],[14.3857165869811,-22.6566529273407],[14.2577140641942,-22.1112081845],[13.8686422054687,-21.69903696054],[13.3524979997374,-20.8728341610575],[12.8268453304645,-19.6731657854017],[12.6085640804636,-19.0453488094877],[11.7949186540281,-18.0691293270619],[11.7341988460851,-17.3018893368245],[12.2154614600194,-17.1116683895581],[12.8140812516884,-16.9413428687241],[13.46236209479,-16.9712118465888],[14.058501417709,-17.4233806291427],[14.209706658595,-17.3531006812257],[18.2633093604342,-17.309950860262],[18.9561869646036,-17.7890947404723],[21.3771761410456,-17.9306364885197],[23.2150484555061,-17.523116143466],[24.0338615251708,-17.2958431942463],[24.6823490740015,-17.3534107398195],[25.0769503109823,-17.5788233374766],[25.0844433936646,-17.6618156877374],[24.5207051937925,-17.8871249325299],[24.2173645362392,-17.8893470191185],[23.5790055681377,-18.2812610816201],[23.1968583513393,-17.8690381812278],[21.655040317479,-18.2191460100052],[20.9106413103145,-18.252218926672],[20.8811340674759,-21.8143270809831],[19.8954577979407,-21.8491569963479],[19.8957678565344,-24.7677902157606],[19.8947343278886,-28.4611048316608],[19.0021273129111,-28.9724431291889],[18.4648991228047,-29.0454619280173],[17.8361519711095,-28.8563778622613],[17.3874971859515,-28.7835140927298],[17.2189286638154,-28.3559432919468],[16.8240173682409,-28.0821615536645],[16.3449768408952,-28.5767050106977]]]}},{type:"Feature",properties:{admin:"New Caledonia",name:"New Caledonia",continent:"Australia"},geometry:{type:"Polygon",coordinates:[[[165.779989862326,-21.0800049781156],[166.599991489934,-21.7000188127535],[167.120011428087,-22.1599907365835],[166.740034621445,-22.3999760881469],[166.189732293969,-22.1297083472604],[165.474375441752,-21.6796066219982],[164.829815301776,-21.1498198381419],[164.167995233414,-20.4447465959516],[164.029605747736,-20.1056458472523],[164.459967075863,-20.1200118954295],[165.020036249042,-20.4599911434777],[165.460009393575,-20.8000220679583],[165.779989862326,-21.0800049781156]]]}},{type:"Feature",properties:{admin:"Niger",name:"Niger",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[2.15447350424995,11.9401500513134],[2.17710778159392,12.6250178084775],[1.02410322429762,12.8518256698066],[.993045688490156,13.3357496200039],[.429927605805517,13.9887330184439],[.295646396495215,14.4442349308807],[.374892205414767,14.9289081893461],[1.01578331869848,14.968182277888],[1.38552819174697,15.3235611027592],[2.74999270998154,15.4095248478768],[3.63825890464659,15.5681198185804],[3.7234216650636,16.1842837590127],[4.27020999514389,16.8522274846013],[4.2674194678001,19.1552652043371],[5.67756595218071,19.6012069767998],[8.57289310062987,21.5656607121592],[11.9995056494717,23.4716684025964],[13.5814245947905,23.0405060897693],[14.1438708838552,22.4912889673711],[14.8513,22.8629500000001],[15.0968876481818,21.3085187850749],[15.4710766944073,21.048457139566],[15.4871480648501,20.7304145370256],[15.9032466976643,20.3876189234175],[15.6857405941478,19.9571800806424],[15.3004411149797,17.927949937405],[15.2477311540418,16.6273058130508],[13.9722017757817,15.6843659530211],[13.5403935075508,14.3671336939012],[13.9566988460941,13.9966911890169],[13.9544767595056,13.3534487980638],[14.5957812842476,13.3304269474779],[14.4957873877629,12.8593962671374],[14.2135307145847,12.8020354272933],[14.1813362972669,12.4836569279432],[13.9953528174483,12.4615652531383],[13.3187016130186,13.556356309458],[13.0839872575488,13.5961471623225],[12.3020711605405,13.0371890324375],[11.5278031755115,13.3289800073736],[10.9895931331915,13.3873226994312],[10.7010319352738,13.246917832894],[10.1148144873547,13.2772518986495],[9.52492801274309,12.8511021997546],[9.01493330245444,12.8266592472804],[7.80467125817887,13.3435269230637],[7.33074669763005,13.0980380314612],[6.82044192874781,13.1150912541176],[6.44542605960572,13.4927684595227],[5.44305830244014,13.8659239771022],[4.36834354006601,13.7474815942894],[4.10794599774738,13.5312157251479],[3.96728274904893,12.9561087101716],[3.68063357912592,12.5529033472142],[3.61118045412559,11.660167141156],[2.84864301922659,12.2356358911582],[2.49016360841802,12.2330520695436],[2.15447350424995,11.9401500513134]]]}},{type:"Feature",properties:{admin:"Nigeria",name:"Nigeria",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[8.50028771325969,4.77198293702685],[7.46210818851594,4.41210826254624],[7.08259646976444,4.46468903240323],[6.6980721370806,4.24059418376952],[5.89817264163469,4.26245331462898],[5.36280480309088,4.88797068930596],[5.03357425295937,5.61180247641823],[4.32560713056068,6.27065114992347],[3.57418012860455,6.25830048260572],[2.69170169435625,6.25881724692863],[2.74906253420022,7.87073436119289],[2.72379275880951,8.50684540448971],[2.91230838381026,9.13760793704432],[3.2203515967021,9.4441525333997],[3.70543826662592,10.0632103540402],[3.6000700211828,10.3321861841194],[3.79711225751171,10.7347455916731],[3.57221642417747,11.3279393579515],[3.61118045412556,11.660167141156],[3.68063357912581,12.5529033472142],[3.96728274904885,12.9561087101716],[4.10794599774732,13.5312157251478],[4.36834354006606,13.7474815942893],[5.44305830244016,13.8659239771023],[6.44542605960564,13.4927684595227],[6.82044192874775,13.1150912541175],[7.33074669763002,13.0980380314612],[7.80467125817878,13.3435269230637],[9.01493330245446,12.8266592472804],[9.52492801274295,12.8511021997545],[10.1148144873547,13.2772518986494],[10.7010319352737,13.2469178328941],[10.9895931331915,13.3873226994311],[11.5278031755114,13.3289800073736],[12.3020711605405,13.0371890324375],[13.0839872575489,13.5961471623226],[13.3187016130186,13.5563563094578],[13.9953528174483,12.4615652531383],[14.1813362972668,12.4836569279431],[14.5771777686225,12.0853608260535],[14.468192172919,11.9047516951934],[14.4153788591167,11.5723688826921],[13.5729496598946,10.7985659855536],[13.3086763851539,10.1603620467489],[13.1675997249971,9.64062632897341],[12.955467970439,9.4177717147147],[12.7536715023392,8.71776276288899],[12.2188721045506,8.30582408287432],[12.0639461605396,7.7998084578723],[11.8393087093668,7.39704234458943],[11.7457743669185,6.98138296144975],[11.0587878760304,6.64442678469059],[10.4973751156114,7.05535777427556],[10.1182768083183,7.03876963950988],[9.5227059261544,6.45348236737212],[9.23316287602304,6.44449066815333],[8.75753299320863,5.47966583904791],[8.50028771325969,4.77198293702685]]]}},{type:"Feature",properties:{admin:"Nicaragua",name:"Nicaragua",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-85.7125404528073,11.0884449324948],[-86.0584883287852,11.4034386255299],[-86.5258499824329,11.8068765324326],[-86.7459915839963,12.1439619002725],[-87.1675162422011,12.4582579614717],[-87.6684934150547,12.9099099797026],[-87.5574666002756,13.0645517033361],[-87.3923862373192,12.9140182560698],[-87.3166544257955,12.984685777229],[-87.0057690091276,13.0257943791172],[-86.8805570136843,13.2542042098472],[-86.7338217841916,13.2630925562014],[-86.7550866360797,13.7548454858909],[-86.5207081774199,13.7784874536644],[-86.3121420966899,13.7713561060082],[-86.0962638007906,14.0381873641472],[-85.8012947252686,13.8360549992376],[-85.6986653307369,13.9600784367381],[-85.5144130114002,14.0790117456578],[-85.1653645494848,14.3543696151251],[-85.148750576503,14.5601968449436],[-85.0527874417369,14.5515410425347],[-84.9245006985724,14.7904928654523],[-84.8200367906944,14.8195866968327],[-84.6495820787796,14.6668053247618],[-84.4493359036486,14.6216142847225],[-84.2283416409524,14.7487641463767],[-83.9757214016936,14.7494359399965],[-83.6285849677729,14.8800739608303],[-83.4899887763661,15.0162671981355],[-83.1472190009741,14.9958291691641],[-83.2332344225239,14.8998660343981],[-83.2841615465476,14.6766238468972],[-83.1821264309873,14.3107030298384],[-83.4124999661444,13.9700778263866],[-83.5198319160147,13.5676992863459],[-83.5522072008455,13.1270543481931],[-83.4985153876943,12.8692923039212],[-83.473323126952,12.4190872257944],[-83.6261044990229,12.3208503280076],[-83.719613003255,11.8931244979277],[-83.6508575100907,11.6290320907001],[-83.8554703437504,11.3733112655038],[-83.8089357164715,11.1030435246173],[-83.6556117418616,10.9387641463614],[-83.8950544908859,10.7268390975324],[-84.1901785957048,10.7934500187567],[-84.355930752281,10.9992255721429],[-84.6730690172562,11.0826571720781],[-84.9030033027389,10.9523033716219],[-85.5618519762442,11.2171192489016],[-85.7125404528073,11.0884449324948]]]}},{type:"Feature",properties:{admin:"Netherlands",name:"Netherlands",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[6.07418257002092,53.5104033473781],[6.90513960127413,53.4821621771306],[7.0920532568739,53.1440432806449],[6.84286950036238,52.2284402532975],[6.58939659997083,51.8520291204834],[5.98865807457781,51.851615709025],[6.15665815595878,50.8037210150106],[5.60697594567,51.0372984889698],[4.97399132652691,51.4750237086981],[4.04707116050753,51.2672586126686],[3.31497114422854,51.3457551133199],[3.83028852704314,51.6205445420319],[4.70599734866118,53.0917984075978],[6.07418257002092,53.5104033473781]]]}},{type:"Feature",properties:{admin:"Norway",name:"Norway",continent:"Europe"},geometry:{type:"MultiPolygon",coordinates:[[[[28.1655473162029,71.1854743516805],[31.2934184099655,70.4537877468599],[30.0054350115228,70.1862588568849],[31.1010787289751,69.5580801459449],[29.3995805193329,69.1569160020631],[28.5919295590432,69.0647769232867],[29.015572950972,69.766491197378],[27.7322921078679,70.1641930202963],[26.1796220232263,69.8252989773261],[25.6892126807764,69.092113755969],[24.7356791521267,68.6495567898214],[23.6620495948308,68.8912474636505],[22.3562378272474,68.8417414415149],[21.2449361508107,69.3704430202931],[20.6455928890896,69.1062472602009],[20.0252689958579,69.0651386583127],[19.8785596045813,68.4071943223726],[17.9938684424644,68.5673912624773],[17.7291817562653,68.0105518663162],[16.7688786149855,68.0139366726314],[16.1087121924568,67.3024555528369],[15.1084114925831,66.1938668890954],[13.5556897315091,64.7870276963815],[13.9199052263022,64.4454206407161],[13.5719161312488,64.0491140814697],[12.5799353369739,64.0662189805583],[11.9305692887942,63.128317572677],[11.9920642432215,61.8003624538566],[12.6311466813752,61.2935716823701],[12.3003658382749,60.11793284773],[11.4682719255112,59.432393296946],[11.0273686051969,58.8561494004594],[10.3565568376161,59.4698070339254],[8.38200035974364,58.3132884792333],[7.0487484066133,58.0788841823573],[5.66583540205042,58.5881554225937],[5.30823449059073,59.6632319199938],[4.99207807782901,61.9709980332843],[5.91290042483789,62.6144729681827],[8.55341108565577,63.4540082871965],[10.5277091813668,64.4860383164975],[12.3583467953064,65.8797258571932],[14.7611458675816,67.8106415879951],[16.435927361729,68.5632054714617],[19.1840283545785,69.8174441596178],[21.3784163754206,70.255169379346],[23.0237423031616,70.2020718451663],[24.5465434099385,71.0304967312372],[26.3700496762218,70.9862617051954],[28.1655473162029,71.1854743516805]]],[[[24.72412,77.85385],[22.49032,77.44493],[20.72601,77.67704],[21.41611,77.93504],[20.8119,78.25463],[22.88426,78.45494],[23.28134,78.07954],[24.72412,77.85385]]],[[[18.25183,79.70175],[21.54383,78.95611],[19.02737,78.5626],[18.47172,77.82669],[17.59441,77.63796],[17.1182,76.80941],[15.91315,76.77045],[13.76259,77.38035],[14.66956,77.73565],[13.1706,78.02493],[11.22231,78.8693],[10.44453,79.65239],[13.17077,80.01046],[13.71852,79.66039],[15.14282,79.67431],[15.52255,80.01608],[16.99085,80.05086],[18.25183,79.70175]]],[[[25.4476253598119,80.4073403998945],[27.4075057309135,80.0564057482005],[25.9246505062982,79.5178339708545],[23.0244657732136,79.4000117052291],[20.0751884294519,79.5668232286672],[19.8972664730709,79.8423619656475],[18.4622636247579,79.8598802761944],[17.3680151709775,80.318896186027],[20.4559920590107,80.5981556261322],[21.9079447771154,80.3576793484621],[22.9192525570674,80.6571442735935],[25.4476253598119,80.4073403998945]]]]}},{type:"Feature",properties:{admin:"Nepal",name:"Nepal",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[88.1204407083698,27.8765416529396],[88.0431327656612,27.4458185897868],[88.1748043151409,26.8104051783259],[88.0602376647498,26.4146153834025],[87.2274719583663,26.3978980575561],[86.0243929381792,26.6309846054086],[85.2517785989834,26.7261984319063],[84.6750179381738,27.2349012313875],[83.3042488951995,27.3645057235756],[81.999987420585,27.92547923432],[81.057202589852,28.416095282499],[80.0884245136763,28.7944701197401],[80.4767212259174,29.7298652206553],[81.1112561380293,30.1834809433134],[81.5258044778747,30.4227169866086],[82.3275126484509,30.1152680526881],[83.3371151061372,29.4637315943522],[83.8989929544467,29.3202261418777],[84.2345797057501,28.8398937037247],[85.011638218123,28.6427739527473],[85.8233199401315,28.2035759546987],[86.9545170430006,27.9742617864035],[88.1204407083698,27.8765416529396]]]}},{type:"Feature",properties:{admin:"New Zealand",name:"New Zealand",continent:"Australia"},geometry:{type:"MultiPolygon",coordinates:[[[[173.020374790741,-40.9190524228564],[173.247234328502,-41.3319987933008],[173.958405389703,-40.9267005348356],[174.247586704808,-41.3491553688217],[174.248516880589,-41.7700082334068],[173.876446568088,-42.2331840960388],[173.222739699596,-42.9700383440886],[172.711246372771,-43.3722876930485],[173.08011274647,-43.8533436012536],[172.308583612352,-43.8656942685713],[171.452925246464,-44.2425188128437],[171.185137974327,-44.8971041806849],[170.616697219117,-45.9089287249597],[169.831422154009,-46.3557748349876],[169.332331170934,-46.6412354469679],[168.411353794629,-46.6199447568636],[167.763744745147,-46.2901974424092],[166.676886021184,-46.2199174944922],[166.509144321965,-45.8527047666262],[167.046424188503,-45.1109412575087],[168.303763462597,-44.1239730771661],[168.949408807652,-43.9358191871914],[169.667814569373,-43.5553256162263],[170.524919875366,-43.0316883278128],[171.125089960004,-42.5127535947378],[171.569713983443,-41.7674244117921],[171.948708937872,-41.5144165992911],[172.097227004279,-40.9561044248097],[172.798579543344,-40.4939620908235],[173.020374790741,-40.9190524228564]]],[[[174.612008905331,-36.1563973935405],[175.336615838927,-37.2090979957583],[175.357596470438,-36.5261939430211],[175.808886753642,-36.7989421526577],[175.958490025127,-37.5553817685461],[176.763195428777,-37.8812533505787],[177.438813104561,-37.9612484677665],[178.010354445709,-37.5798247210201],[178.517093540763,-37.6953732236248],[178.274731073314,-38.5828125953731],[177.970460239979,-39.166342868813],[177.206992629299,-39.1457756487608],[176.939980503647,-39.4497364235016],[177.03294640534,-39.8799427223315],[176.885823602605,-40.0659778785822],[176.508017206119,-40.6048080380896],[176.01244022044,-41.2896241188215],[175.239567499083,-41.6883077939532],[175.067898391009,-41.4258948707751],[174.650972935278,-41.2818209775454],[175.227630243224,-40.4592355283234],[174.90015669179,-39.9089332008472],[173.824046665744,-39.5088542620435],[173.852261997775,-39.1466024716775],[174.57480187408,-38.7976832008428],[174.743473749081,-38.0278077125584],[174.697016636451,-37.381128838858],[174.292028436579,-36.7110922177614],[174.319003534236,-36.5348239072139],[173.840996535536,-36.1219808896341],[173.05417117746,-35.2371253395003],[172.636005487354,-34.5291065406694],[173.007042271209,-34.4506617164503],[173.551298456107,-35.006183363588],[174.329390497126,-35.2654957008286],[174.612008905331,-36.1563973935405]]]]}},{type:"Feature",properties:{admin:"Oman",name:"Oman",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[58.8611413918466,21.1140345321443],[58.487985874267,20.4289859074671],[58.0343184751766,20.4814374862433],[57.8263725116341,20.2430024276486],[57.6657621600709,19.7360049504331],[57.7887003924934,19.0675702987376],[57.6943909035607,18.9447095809638],[57.2342639504338,18.9479910344143],[56.609650913322,18.5742670760795],[56.5121891620195,18.0871133488639],[56.283520949128,17.8760667993839],[55.6614917336307,17.8841283228215],[55.2699394061552,17.6323090682632],[55.2749003436551,17.2283543970377],[54.7910022316741,16.9506969263334],[54.2392529640938,17.04498057705],[53.5705082538046,16.7076626652647],[53.1085726255475,16.651051133689],[52.7821842791921,17.3497423364912],[52.0000098000222,19.0000033635161],[54.9999817238624,19.9999940047961],[55.6666593768599,22.0000011255723],[55.2083410988632,22.708329982997],[55.2344893736029,23.1109927434154],[55.5258410988645,23.5248692896409],[55.5286316262083,23.9336040308535],[55.9812138202205,24.1305429143179],[55.8041186867562,24.2696041936153],[55.8862325376681,24.9208305933575],[56.396847365144,24.9247321639955],[56.8451404152761,24.2416730819615],[57.4034525897574,23.8785944686788],[58.1369478697083,23.7479306096288],[58.7292114602054,23.5656678329354],[59.1805017434103,22.9923953313055],[59.450097690677,22.6602709009656],[59.8080603371629,22.5336119654182],[59.8061483091681,22.3105248072142],[59.4421911965364,21.7145405135921],[59.2824076678899,21.4338858098149],[58.8611413918466,21.1140345321443]]],[[[56.3914213397534,25.8959907089213],[56.2610417010809,25.7146064315767],[56.0708207538145,26.0554641789739],[56.3620174497793,26.3959343531289],[56.4856791522538,26.3091179468787],[56.3914213397534,25.8959907089213]]]]}},{type:"Feature",properties:{admin:"Pakistan",name:"Pakistan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[75.1580277851409,37.1330309107891],[75.8968974140501,36.6668061386518],[76.1928483417857,35.8984034286878],[77.8374507994746,35.4940095077878],[76.871721632804,34.6535440129927],[75.7570609882683,34.5049225937213],[74.240202671205,34.7488870305713],[73.749948358052,34.3176988795278],[74.1042936542773,33.4414732935868],[74.4515592792787,32.7648996038055],[75.2586417988132,32.2711054550405],[74.405928989565,31.6926394719653],[74.4213802428203,30.9798147649312],[73.4506384622174,29.9764134791199],[72.8237516620847,28.961591701772],[71.7776656432003,27.9131802434345],[70.6164962096019,27.9891962753359],[69.5143929381131,26.9409656845114],[70.168926629522,26.4918716496788],[70.2828731627256,25.7222287053398],[70.8446993346028,25.2151020370435],[71.0432401874682,24.3565239527302],[68.8425993183188,24.3591336125609],[68.1766451353734,23.6919650334567],[67.4436666197455,23.944843654877],[67.1454419289891,24.6636111516246],[66.3728275897933,25.4251408960938],[64.5304077492911,25.2370386825514],[62.9057007180346,25.2184093287102],[61.4973629087842,25.0782370061185],[61.8741874530565,26.2399748804721],[63.3166317076196,26.7565324976617],[63.2338977395203,27.2170470240307],[62.7554256529299,27.378923448185],[62.727830438086,28.2596448837354],[61.7718681171186,28.6993338078908],[61.3693087095649,29.3032762720859],[60.8742484882088,29.8292389999526],[62.5498568052728,29.3185724960443],[63.5502608580112,29.4683307968262],[64.1480021503312,29.340819200146],[64.3504187356185,29.5600306259281],[65.0468620136161,29.4721806910319],[66.3464726093244,29.8879434270362],[66.381457553986,30.7388992375865],[66.9388912291185,31.3049112004793],[67.6833935891475,31.3031542017814],[67.7926892434448,31.5829304062096],[68.5569320006093,31.713310044882],[68.9266768736577,31.6201891138921],[69.3177641132426,31.9014122584244],[69.2625220071225,32.5019440780883],[69.6871472512649,33.1054989690412],[70.3235941913716,33.3585326197584],[69.9305432473596,34.0201201441751],[70.8818030129884,33.9888559026385],[71.1567733092135,34.3489114446321],[71.1150187519216,34.7331257187222],[71.6130762063507,35.1532034368229],[71.4987679381211,35.650563259416],[71.2623482603857,36.0743875188578],[71.8462919452839,36.5099423284299],[72.9200248554445,36.7200070256963],[74.0675517109178,36.8361756454884],[74.575892775373,37.0208413762835],[75.1580277851409,37.1330309107891]]]}},{type:"Feature",properties:{admin:"Panama",name:"Panama",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-77.8815714179452,7.22377126711478],[-78.2149360826601,7.51225495038416],[-78.4291607327261,8.05204112388893],[-78.1820957099386,8.31918244062177],[-78.4354652574657,8.38770538984079],[-78.6221205309039,8.71812449791503],[-79.1203071764137,8.99609202721302],[-79.5578773668452,8.93237498619715],[-79.76057817251,8.5845150822244],[-80.1644811673033,8.33331594485359],[-80.3826590644396,8.29840851484043],[-80.4806892564973,8.09030752200107],[-80.0036899482272,7.54752411542337],[-80.276670701809,7.41975413658171],[-80.4211580064971,7.27157196698476],[-80.8864009264208,7.22054149009654],[-81.0595428128147,7.8179210473906],[-81.1897157457579,7.64790558515034],[-81.5195147366447,7.70661001223391],[-81.7213112047445,8.10896271405843],[-82.1314412096289,8.17539276776964],[-82.3909344143825,8.29236237226229],[-82.8200813463504,8.29086375572582],[-82.8509580146448,8.07382274009995],[-82.9657830471974,8.22502798098598],[-82.9131764391242,8.42351715741907],[-82.8297706774052,8.62629547773237],[-82.8686571927048,8.80726634361852],[-82.7191831123005,8.92570872643149],[-82.9271549140591,9.07433014570291],[-82.9328909980436,9.47681203860817],[-82.5461962552035,9.56613475182467],[-82.1871225654234,9.20744863528678],[-82.207586432611,8.9955752628901],[-81.8085668606693,8.95061676679617],[-81.714154018872,9.03195547122358],[-81.4392870755115,8.78623403567572],[-80.9473016018768,8.85850352623591],[-80.5219012112501,9.11107208906243],[-79.914599778956,9.31276520429762],[-79.5733027818843,9.61161001224153],[-79.0211917792779,9.5529314233741],[-79.0584504869604,9.45456533450652],[-78.5008876207472,9.42045888919388],[-78.055927700498,9.2477304142583],[-77.7295135159264,8.94684438723887],[-77.3533607652739,8.67050466555807],[-77.4747228665113,8.52428620038822],[-77.2425664944401,7.93527822512544],[-77.431107957657,7.63806122479873],[-77.7534138658614,7.70983978925214],[-77.8815714179452,7.22377126711478]]]}},{type:"Feature",properties:{admin:"Peru",name:"Peru",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-69.590423753524,-17.5800118954193],[-69.8584435696058,-18.092693780187],[-70.3725723944777,-18.3479753557089],[-71.3752502102369,-17.7737985165139],[-71.4620407782711,-17.3634876441164],[-73.4445295885004,-16.359362888253],[-75.2378826565414,-15.2656828752278],[-76.0092050849299,-14.6492863908503],[-76.4234692043977,-13.8231869442324],[-76.2592415025742,-13.5350391577729],[-77.1061923896218,-12.2227161597208],[-78.0921528795346,-10.3777124976041],[-79.0369530911269,-8.38656788496589],[-79.4459203762848,-7.93083342858386],[-79.76057817251,-7.19434091556008],[-80.5374816555861,-6.54166757571372],[-81.2499963040264,-6.13683440513918],[-80.9263468085824,-5.69055673586656],[-81.4109425523994,-4.73676482505546],[-81.0996695624894,-4.0363941382037],[-80.3025605943872,-3.40485645916471],[-80.1840148587097,-3.82116179770804],[-80.4692946031769,-4.059286797709],[-80.4422419908721,-4.42572437909067],[-80.0289080471856,-4.34609099692889],[-79.6249792141762,-4.45419809328349],[-79.2052890693177,-4.95912851320739],[-78.6398972236123,-4.54778411216407],[-78.4506839667756,-3.87309661216138],[-77.8379048326586,-3.0030205216631],[-76.6353942532267,-2.60867766684382],[-75.544995693652,-1.56160979574588],[-75.2337227037419,-.911416924649529],[-75.3732232327138,-.15203175212045],[-75.1066245185201,-.05720549886486],[-74.441600511356,-.530820000819887],[-74.1223951890891,-1.00283253337385],[-73.6595035468346,-1.26049122478113],[-73.0703922187072,-2.30895435955095],[-72.3257865058136,-2.43421803142645],[-71.7747607082854,-2.16978972738894],[-71.4136457994298,-2.34280242270213],[-70.813475714792,-2.25686451580074],[-70.0477085028748,-2.7251563452297],[-70.6926820543097,-3.74287200278586],[-70.394043952095,-3.76659148520783],[-69.8936352199966,-4.29818694419433],[-70.7947688463023,-4.2512647436733],[-70.9288433498836,-4.40159148521037],[-71.7484057278165,-4.59398284263301],[-72.8919276597872,-5.27456145591698],[-72.9645072089412,-5.74125131594489],[-73.2197112698146,-6.08918873456608],[-73.1200274319236,-6.62993092206824],[-73.7244866604416,-6.91859547285064],[-73.7234014553635,-7.34099863040441],[-73.9872354804297,-7.52382984785306],[-73.5710593329671,-8.42444670983583],[-73.0153826565325,-9.03283334720806],[-73.2267134263902,-9.46221282312123],[-72.5630330064656,-9.52019378015272],[-72.1848907131698,-10.0535979142694],[-71.3024122789215,-10.0794361304154],[-70.4818938869912,-9.49011809655884],[-70.5486856757284,-11.0091468237785],[-70.0937522040469,-11.123971856331],[-69.5296781073649,-10.9517343075022],[-68.6650797186896,-12.5613001440972],[-68.88007951524,-12.8997290991767],[-68.9292238023495,-13.602683607643],[-68.9488866848366,-14.4536394181933],[-69.339534674747,-14.9531954891588],[-69.1603466457749,-15.323973890853],[-69.3897641669347,-15.6601290829117],[-68.9596353827533,-16.5006979305713],[-69.590423753524,-17.5800118954193]]]}},{type:"Feature",properties:{admin:"Philippines",name:"Philippines",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[126.376813592637,8.41470632571335],[126.478512811388,7.75035411216898],[126.537423944201,7.18938060142457],[126.196772902533,6.27429433840004],[125.831420526229,7.29371531822186],[125.363852166852,6.78648529706099],[125.683160841984,6.04965688722726],[125.396511672061,5.58100332277229],[124.219787632342,6.16135549562618],[123.938719517107,6.88513560630612],[124.243662144061,7.36061045982366],[123.610212437028,7.83352732994275],[123.296071405125,7.41887563723279],[122.825505812675,7.45737457929022],[122.085499302256,6.89942413983485],[121.919928013193,7.19211945233607],[122.312358840017,8.03496206301651],[122.94239790252,8.31623688398117],[123.487687616064,8.69300975182119],[123.84115441294,8.24032420494438],[124.60146976125,8.51415761965902],[124.764612257996,8.96040945071546],[125.471390822452,8.98699697512964],[125.412117954613,9.76033478437755],[126.222714471543,9.28607432701885],[126.306636997585,8.78248749433457],[126.376813592637,8.41470632571335]]],[[[123.982437778826,10.2787785913458],[123.623183221533,9.9500906437533],[123.309920688979,9.31826874433668],[122.995883009942,9.0221886255204],[122.380054966319,9.7133609074242],[122.586088901867,9.9810448266961],[122.837081333509,10.2611569279342],[122.947410516452,10.881868394408],[123.498849725438,10.9406244979239],[123.337774285985,10.2673839380254],[124.077935825701,11.2327255314537],[123.982437778826,10.2787785913458]]],[[[118.50458092659,9.31638255455809],[117.174274530101,8.36749990481466],[117.664477166821,9.06688873945293],[118.386913690262,9.68449961998922],[118.987342157061,10.3762920190805],[119.511496209798,11.3696680770272],[119.68967654834,10.5542914901099],[119.029458449379,10.0036532658239],[118.50458092659,9.31638255455809]]],[[[121.883547804859,11.891755072472],[122.483821242361,11.5821874048275],[123.120216506036,11.5836601831479],[123.100837843926,11.1659337427165],[122.637713657727,10.7413084985742],[122.00261030486,10.4410167505261],[121.967366978037,10.9056912296946],[122.038370396006,11.41584096928],[121.883547804859,11.891755072472]]],[[[125.502551711123,12.1626946069783],[125.783464797062,11.0461219344478],[125.011883986512,11.3114545760504],[125.032761265158,10.9758161483147],[125.27744917206,10.3587220321013],[124.801819289246,10.1346788598999],[124.760168084818,10.8379951033923],[124.459101190286,10.8899299178456],[124.302521600442,11.4953709985772],[124.891012811382,11.4155825871186],[124.877990350444,11.794189968305],[124.266761509296,12.5577609318497],[125.227116327008,12.5357209334772],[125.502551711123,12.1626946069783]]],[[[121.527393833503,13.0695901554845],[121.262190382982,12.2055602075644],[120.833896112147,12.7044961613424],[120.323436313967,13.4664134790539],[121.180128208502,13.4296973739104],[121.527393833503,13.0695901554845]]],[[[121.321308221524,18.504064642811],[121.937601353036,18.2185523543984],[122.246006300954,18.4789498967171],[122.336956821788,18.2248827173542],[122.174279412933,17.8102827010764],[122.515653924653,17.093504746972],[122.252310825694,16.2624443628541],[121.662786086108,15.9310175643501],[121.505069614753,15.1248135441646],[121.728828566577,14.3283763696822],[122.258925409027,14.218202216036],[122.701275669446,14.3365412459844],[123.95029503794,13.7821306421411],[123.855107049659,13.2377711043785],[124.181288690285,12.9975273706535],[124.077419061378,12.5366769474746],[123.298035109552,13.027525539599],[122.92865197153,13.5529198267104],[122.671355015149,13.1858362899251],[122.034649692881,13.7844819198103],[121.126384718919,13.6366873234556],[120.628637323083,13.8576557479356],[120.679383579594,14.2710155298383],[120.991819289231,14.5253927677951],[120.693336216313,14.7566706405173],[120.564145135583,14.3962792017138],[120.070428501466,14.9708694523671],[119.920928582846,15.4063467472907],[119.883773228028,16.36370433193],[120.286487664879,16.0346288110953],[120.390047235192,17.5990811222995],[120.715867140792,18.5052273625375],[121.321308221524,18.504064642811]]]]}},{type:"Feature",properties:{admin:"Papua New Guinea",name:"Papua New Guinea",continent:"Australia"},geometry:{type:"MultiPolygon",coordinates:[[[[155.880025669578,-6.81999684003776],[155.599991082989,-6.91999073652249],[155.166994256815,-6.5359314917293],[154.729191522438,-5.90082813886221],[154.51411421124,-5.13911752688001],[154.652503696917,-5.04243092206184],[154.759990676084,-5.33998381919849],[155.062917922179,-5.56679168052749],[155.547746209942,-6.20065479901966],[156.019965448225,-6.54001392988039],[155.880025669578,-6.81999684003776]]],[[[151.982795851854,-5.47806324628234],[151.459106887009,-5.56028045005874],[151.301390415654,-5.8407284481067],[150.754447056277,-6.08376270917539],[150.241196730754,-6.31775359459298],[149.709963006793,-6.31651336021805],[148.89006473205,-6.02604013430543],[148.318936802361,-5.74714242922613],[148.401825799757,-5.43775562909472],[149.298411900021,-5.58374155031922],[149.845561965127,-5.50550343182934],[149.99625044169,-5.02610116945767],[150.139755894165,-5.00134815838979],[150.236907586873,-5.53222014732428],[150.807467075808,-5.45584238039689],[151.089672072554,-5.11369272219237],[151.647880894171,-4.75707366294617],[151.537861769822,-4.16780730552189],[152.136791620084,-4.14879037843852],[152.338743117481,-4.31296640382976],[152.318692661752,-4.86766122805075],[151.982795851854,-5.47806324628234]]],[[[147.191873814075,-7.38802418378998],[148.084635858349,-8.04410816816761],[148.734105259394,-9.10466358809376],[149.306835158484,-9.07143564213007],[149.266630894161,-9.51440601973603],[150.038728469034,-9.6843181291117],[149.738798456012,-9.872937106977],[150.801627638959,-10.2936866186974],[150.690574985964,-10.5827129045059],[150.028393182576,-10.6524760880999],[149.782310012002,-10.3932671037239],[148.923137648717,-10.2809225399214],[147.913018426708,-10.1304407690875],[147.135443150012,-9.49244353601202],[146.567880894151,-8.94255461999415],[146.048481073185,-8.06741423913131],[144.744167922138,-7.63012826907747],[143.89708784401,-7.91533049889628],[143.286375767184,-8.24549122480906],[143.413913202081,-8.98306894291095],[142.628431431244,-9.3268205705165],[142.0682589052,-9.15959563562003],[141.033851760014,-9.11789275476042],[141.017056919519,-5.85902190513802],[141.000210402592,-2.60015105551562],[142.735246616791,-3.28915292726322],[144.583970982033,-3.8614177384634],[145.27317955951,-4.37373788820503],[145.829786411726,-4.87649789797268],[145.981921828393,-5.46560922610001],[147.648073358348,-6.0836593563108],[147.891107619416,-6.61401458092232],[146.970905389595,-6.72165658938626],[147.191873814075,-7.38802418378998]]],[[[153.140037876599,-4.49998341229411],[152.827292108368,-4.766427097191],[152.638673130503,-4.17612721112093],[152.406025832325,-3.78974252687456],[151.953236932584,-3.46206226971182],[151.38427941305,-3.03542164471011],[150.662049595339,-2.74148609783396],[150.939965448205,-2.50000212973403],[151.479984165655,-2.77998503989139],[151.820015090135,-2.99997161215791],[152.239989455371,-3.24000864015366],[152.640016717743,-3.65998300538965],[153.019993524385,-3.98001515057329],[153.140037876599,-4.49998341229411]]]]}},{type:"Feature",properties:{admin:"Poland",name:"Poland",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[15.0169958838587,51.1066740993216],[14.6070984229195,51.74518809672],[14.6850264828157,52.0899474147552],[14.4375997250022,52.6248501654084],[14.0745211117195,52.9812625189254],[14.3533154639341,53.248171291713],[14.1196863135426,53.757029120491],[14.8029004248735,54.0507062852057],[16.3634770036557,54.5131586777857],[17.6228316586087,54.8515359564329],[18.6208585954616,54.6826056992708],[18.6962545101755,54.4387187770693],[19.6606400896064,54.4260838893739],[20.8922445004186,54.3125249294125],[22.7310986670927,54.3275369329933],[23.2439872575895,54.2205667181491],[23.4841276384498,53.9124976670411],[23.527535841575,53.4701215684065],[23.8049349301178,53.0897313503061],[23.7991988461334,52.6910993516066],[23.1994938493862,52.4869774440537],[23.5080021501687,52.0236465521247],[23.5270707536844,51.5784540879302],[24.0299857927489,50.7054066025752],[23.9227571957433,50.4248810898787],[23.4265084164444,50.3085057643575],[22.5184501482116,49.4767735866197],[22.7764188982126,49.0273953314096],[22.5581376482118,49.0857380234671],[21.6078080583642,49.4701073268541],[20.8879553565384,49.3287722845358],[20.4158394711199,49.4314533554998],[19.8250228207269,49.2171253525692],[19.3207125179905,49.5715740016592],[18.9095748226763,49.4358458522446],[18.8531441586136,49.4962297633776],[18.3929138526222,49.9886286484707],[17.649445021239,50.0490383978199],[17.5545670915511,50.3621459010764],[16.8687691586057,50.473973700556],[16.7194759457144,50.2157465683935],[16.1762532894623,50.4226073268579],[16.2386267432386,50.6977326523798],[15.4909721208397,50.7847299261432],[15.0169958838587,51.1066740993216]]]}},{type:"Feature",properties:{admin:"Puerto Rico",name:"Puerto Rico",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-66.2824344550082,18.5147616642954],[-65.7713028632093,18.4266791854539],[-65.5910037909429,18.2280349797239],[-65.8471638658138,17.9759056665719],[-66.5999344550095,17.9818226180693],[-67.1841623602853,17.9465534530301],[-67.2424275376943,18.3744601506229],[-67.1006790839177,18.5206011011443],[-66.2824344550082,18.5147616642954]]]}},{type:"Feature",properties:{admin:"North Korea",name:"Dem. Rep. Korea",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[130.640015903852,42.3950094671253],[130.780007358931,42.2200072291688],[130.400030552289,42.2800035670597],[129.965948521037,41.9413679062511],[129.667362095255,41.6011044378252],[129.705189243692,40.8828278671843],[129.18811486218,40.661807766272],[129.010399611528,40.4854361028598],[128.633368361527,40.1898469101503],[127.967414178581,40.0254125025976],[127.533435500194,39.7568500839767],[127.502119582225,39.3239307724515],[127.38543419811,39.2134723984277],[127.783342726758,39.0508983424374],[128.349716424677,38.6122429469278],[128.205745884311,38.3703972438019],[127.780035435091,38.3045356308459],[127.073308547067,38.2561148137884],[126.683719924019,37.8047728541512],[126.237338901882,37.8403779160003],[126.174758742376,37.749685777328],[125.689103631697,37.940010077459],[125.568439162296,37.7520887314296],[125.275330438336,37.6690705429527],[125.240087111513,37.8572244329274],[124.981033156434,37.9488209091648],[124.712160679219,38.1083460556498],[124.985994093934,38.5484742294797],[125.221948683779,38.6658572454307],[125.132858514507,38.8485592717986],[125.386589797061,39.3879578720612],[125.321115757347,39.5513845891842],[124.737482131042,39.6603443466716],[124.265624627785,39.9284933538342],[125.079941847841,40.5698237167924],[126.182045119329,41.1073361272764],[126.86908328665,41.8165693222662],[127.343782993683,41.503151760416],[128.208433058791,41.4667715520825],[128.052215203972,41.9942845729179],[129.59666873588,42.4249817978545],[129.994267205933,42.9853868678438],[130.640015903852,42.3950094671253]]]}},{type:"Feature",properties:{admin:"Portugal",name:"Portugal",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[-9.03481767418024,41.8805705836597],[-8.67194576662672,42.134689439455],[-8.26385698081779,42.2804686549503],[-8.01317460776991,41.7908861354171],[-7.42251298667379,41.7920746933598],[-7.25130896649082,41.918346055665],[-6.66860551596766,41.8833869492196],[-6.38908769370091,41.3818154973946],[-6.85112667482255,41.1110826686175],[-6.86401994467938,40.3308718938748],[-7.02641313315659,40.1845242376242],[-7.06659155926353,39.7118915878828],[-7.49863237143972,39.6295710312418],[-7.09803666831313,39.0300727402238],[-7.37409216961632,38.3730585800649],[-7.02928117514879,38.0757640650898],[-7.16650794109986,37.8038943548022],[-7.53710547528102,37.4289043238762],[-7.45372555177809,37.0977875839661],[-7.85561316571199,36.8382685409963],[-8.38281612795369,36.9788801132625],[-8.89885698082033,36.8688093124808],[-8.74610144696555,37.6513455266766],[-8.83999752443988,38.2662433945176],[-9.28746375165522,38.3584858261586],[-9.52657060386971,38.7374291041549],[-9.44698889814023,39.3920661484284],[-9.04830522300843,39.7550930852788],[-8.97735348147168,40.1593061386658],[-8.7686840478771,40.7606389430302],[-8.79085323733031,41.1843340113913],[-8.99078935386757,41.5434593776036],[-9.03481767418024,41.8805705836597]]]}},{type:"Feature",properties:{admin:"Paraguay",name:"Paraguay",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-62.6850571356579,-22.2490292294224],[-62.2911793687292,-21.0516346167874],[-62.2659612697708,-20.5137346330613],[-61.7863264634538,-19.633736667563],[-60.0435646226265,-19.3427466773274],[-59.1150424872061,-19.3569060197754],[-58.1834714422805,-19.8683993466004],[-58.166392381408,-20.1767009416537],[-57.8706739976178,-20.7326876766819],[-57.9371557277613,-22.0901758765572],[-56.8815095689029,-22.2821538225215],[-56.4733174302294,-22.0863001441353],[-55.7979581366069,-22.3569296200478],[-55.6106827459811,-22.6556193986948],[-55.5176393296396,-23.5719975725266],[-55.4007472397954,-23.9569353166688],[-55.0279017808095,-24.0012736955752],[-54.6528342352351,-23.839578138934],[-54.2929595607545,-24.0210140927107],[-54.2934763250774,-24.570799655864],[-54.4289460923306,-25.1621847470122],[-54.6252906968236,-25.7392554664155],[-54.788794928595,-26.6217855770961],[-55.6958455063981,-27.3878370093909],[-56.486701626193,-27.5484990373863],[-57.6097596909761,-27.3958985328284],[-58.6181735907197,-27.1237187639471],[-57.6336600409111,-25.6036565080816],[-57.7772171698179,-25.162339776309],[-58.807128465395,-24.7714592424533],[-60.028966030504,-24.0327963192733],[-60.8465647040099,-23.8807125790383],[-62.6850571356579,-22.2490292294224]]]}},{type:"Feature",properties:{admin:"Palestine",name:"Palestine",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[35.5456653175345,32.3939920110306],[35.5452519060762,31.7825047877208],[35.397560662586,31.4890860051676],[34.9274084815946,31.3534353704014],[34.970506626126,31.6167784693608],[35.2258915545124,31.7543411321218],[34.9746407407093,31.8665823430597],[35.1839302914914,32.5325106877889],[35.5456653175345,32.3939920110306]]]}},{type:"Feature",properties:{admin:"Qatar",name:"Qatar",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[50.8101082700696,24.7547425399714],[50.7439107603037,25.4824242212894],[51.0133516782735,26.0069916854842],[51.286461622936,26.1145820175159],[51.5890788104372,25.8011127792334],[51.6067004738488,25.2156704777987],[51.3896077817906,24.6273859725881],[51.112415398977,24.5563308781867],[50.8101082700696,24.7547425399714]]]}},{type:"Feature",properties:{admin:"Romania",name:"Romania",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[22.7105314470405,47.8821939153894],[23.1422363624068,48.0963410508069],[23.7609582862374,47.9855984564055],[24.4020561052504,47.9818777532804],[24.8663171729606,47.7375257431883],[25.207743361113,47.8910564235275],[25.9459411964024,47.9871487493742],[26.1974503923669,48.2208812526303],[26.6193367855978,48.2207262233335],[26.9241760596876,48.123264472031],[27.2338729184127,47.8267709417564],[27.5511662126848,47.4051170924708],[28.128030226359,46.8104763860882],[28.1600179379477,46.3715626084172],[28.0544429867754,45.9445860866056],[28.233553501099,45.4882831894684],[28.6797794939394,45.3040308701317],[29.1497249692016,45.4649254420724],[29.6032890154274,45.2933080104311],[29.6265434099588,45.0353909368624],[29.1416117693318,44.820210272799],[28.8378577003202,44.913873806328],[28.558081495892,43.7074616562581],[27.9701070492751,43.8124681666752],[27.2423995297409,44.1759860296324],[26.0651587256997,43.9434937607513],[25.5692716814269,43.6884447291747],[24.1006791521242,43.7410513372478],[23.3323022803763,43.8970108099047],[22.9448323910518,43.8237853053471],[22.657149692483,44.2349230006613],[22.4740084164406,44.4092276067818],[22.7057255388374,44.578002834647],[22.4590222510759,44.7025171982543],[22.1450879249028,44.4784223496206],[21.5620227393536,44.7689472519655],[21.4835262387022,45.1811701523578],[20.8743127784134,45.4163754339342],[20.76217492034,45.7345730657714],[20.2201924984628,46.1274689804866],[21.0219523454712,46.3160879583519],[21.6265149268539,46.9942377793182],[22.0997676937828,47.6724392767167],[22.7105314470405,47.8821939153894]]]}},{type:"Feature",properties:{admin:"Russia",name:"Russia",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[143.648007440363,50.7476004095415],[144.654147577086,48.9763906927376],[143.173927850517,49.3065514186504],[142.55866824765,47.8615750189049],[143.533492466404,46.8367280136925],[143.505277134373,46.1379076198095],[142.747700636974,46.7407648789266],[142.092030064054,45.9667552760588],[141.906925083585,46.8059288600465],[142.018442824471,47.7801329616129],[141.904444614835,48.8591885442996],[142.135800002206,49.6151630722975],[142.179983351815,50.9523424342819],[141.59407596249,51.9354348822025],[141.682546014574,53.3019664577288],[142.606934035411,53.7621450872879],[142.209748976815,54.2254759792169],[142.654786411713,54.3658808457539],[142.914615513277,53.7045775417147],[143.260847609632,52.740760403039],[143.235267775648,51.7566602646887],[143.648007440363,50.7476004095415]]],[[[22.7310986670927,54.3275369329933],[20.8922445004187,54.3125249294126],[19.6606400896064,54.426083889374],[19.8884814795813,54.8661603867715],[21.2684489275035,55.1904816758353],[22.3157235043306,55.0152985703659],[22.7577637061553,54.8565744085814],[22.6510518734726,54.5827409938667],[22.7310986670927,54.3275369329933]]],[[[180,70.8321992085467],[178.903425,70.78114],[178.7253,71.0988],[180,71.5157143364283],[180,70.8321992085467]]],[[[143.60385,73.21244],[142.08763,73.20544],[140.038155,73.31692],[139.86312,73.36983],[140.81171,73.76506],[142.06207,73.85758],[143.48283,73.47525],[143.60385,73.21244]]],[[[150.73167,75.08406],[149.575925,74.68892],[147.977465,74.778355],[146.11919,75.17298],[146.358485,75.49682],[148.22223,75.345845],[150.73167,75.08406]]],[[[145.086285,75.562625],[144.3,74.82],[140.61381,74.84768],[138.95544,74.61148],[136.97439,75.26167],[137.51176,75.94917],[138.831075,76.13676],[141.471615,76.09289],[145.086285,75.562625]]],[[[57.5356925799924,70.7204639757022],[56.9449792824639,70.6327432318867],[53.6773751157842,70.7626577826685],[53.4120166359654,71.2066616889202],[51.6018945656457,71.4747590196505],[51.4557536151242,72.0148810899651],[52.4782751808836,72.229441636841],[52.4441687355708,72.7747313503848],[54.4276135597977,73.6275475124976],[53.5082898293251,73.7498139513001],[55.9024589374076,74.6274864773453],[55.6319328143597,75.0814122585972],[57.8686438332488,75.6093903673232],[61.1700443866475,76.2518834500081],[64.4983683612702,76.4390554877693],[66.2109770038551,76.8097822130312],[68.1570597675348,76.9396967638129],[68.8522111347251,76.5448113064546],[68.1805725442276,76.2336416694091],[64.637326287703,75.7377546251362],[61.5835075214148,75.2608845079468],[58.4770821470534,74.3090563015628],[56.986785516188,73.3330435248662],[55.4193359719109,72.371267605266],[55.6228377622763,71.5405947943903],[57.5356925799924,70.7204639757022]]],[[[106.97013,76.97419],[107.24,76.48],[108.1538,76.7233500000001],[111.07726,76.71],[113.33151,76.22224],[114.13417,75.84764],[113.88539,75.3277900000001],[112.77918,75.03186],[110.15125,74.47673],[109.4,74.18],[110.64,74.04],[112.11919,73.7877400000001],[113.01954,73.9769300000001],[113.52958,73.33505],[113.96881,73.59488],[115.56782,73.75285],[118.77633,73.58772],[119.02,73.12],[123.20066,72.97122],[123.25777,73.73503],[125.38,73.56],[126.97644,73.56549],[128.59126,73.03871],[129.05157,72.39872],[128.46,71.98],[129.71599,71.19304],[131.28858,70.7869900000001],[132.2535,71.8363],[133.85766,71.3864200000001],[135.56193,71.6552500000001],[137.49755,71.34763],[138.23409,71.62803],[139.86983,71.4878300000001],[139.14791,72.4161900000001],[140.46817,72.8494100000001],[149.5,72.2],[150.35118,71.60643],[152.9689,70.84222],[157.00688,71.03141],[158.99779,70.86672],[159.83031,70.45324],[159.70866,69.72198],[160.94053,69.43728],[162.27907,69.64204],[164.05248,69.66823],[165.94037,69.47199],[167.83567,69.58269],[169.57763,68.6938],[170.81688,69.01363],[170.0082,69.65276],[170.45345,70.09703],[173.64391,69.81743],[175.72403,69.8772500000002],[178.6,69.4],[180,68.9636363636366],[180,64.9797087021985],[179.99281,64.97433],[178.7072,64.53493],[177.41128,64.60821],[178.313,64.07593],[178.90825,63.2519700000001],[179.37034,62.98262],[179.48636,62.56894],[179.22825,62.3041000000001],[177.3643,62.5219],[174.56929,61.76915],[173.68013,61.65261],[172.15,60.95],[170.6985,60.33618],[170.33085,59.88177],[168.90046,60.57355],[166.29498,59.7885500000002],[165.84,60.16],[164.87674,59.7316],[163.53929,59.86871],[163.21711,59.21101],[162.01733,58.24328],[162.05297,57.83912],[163.19191,57.61503],[163.05794,56.1592400000001],[162.12958,56.12219],[161.70146,55.2856800000002],[162.11749,54.85514],[160.36877,54.34433],[160.02173,53.20257],[158.53094,52.9586800000002],[158.23118,51.94269],[156.78979,51.01105],[156.42,51.7],[155.99182,53.15895],[155.43366,55.3810300000001],[155.91442,56.7679200000001],[156.75815,57.3647],[156.81035,57.83204],[158.36433,58.05575],[160.15064,59.3147700000001],[161.87204,60.3430000000001],[163.66969,61.1409],[164.47355,62.55061],[163.25842,62.46627],[162.65791,61.6425],[160.12148,60.54423],[159.30232,61.77396],[156.72068,61.43442],[154.21806,59.7581800000001],[155.04375,59.14495],[152.81185,58.88385],[151.26573,58.78089],[151.33815,59.50396],[149.78371,59.6557300000001],[148.54481,59.16448],[145.48722,59.33637],[142.19782,59.03998],[138.95848,57.08805],[135.12619,54.72959],[136.70171,54.6035500000001],[137.19342,53.97732],[138.1647,53.7550100000003],[138.80463,54.25455],[139.90151,54.1896800000002],[141.34531,53.0895700000001],[141.37923,52.23877],[140.59742,51.23967],[140.51308,50.0455300000001],[140.06193,48.4467100000002],[138.55472,46.99965],[138.21971,46.30795],[136.86232,45.1435000000002],[135.51535,43.989],[134.86939,43.39821],[133.53687,42.81147],[132.90627,42.79849],[132.27807,43.2845600000001],[130.93587,42.55274],[130.78,42.2200000000002],[130.64,42.395],[130.63386640841,42.9030146347705],[131.144687941615,42.9299897324269],[131.288555129116,44.1115196803483],[131.02519,44.96796],[131.88345421766,45.3211616074365],[133.09712,45.14409],[133.769643996313,46.1169269882992],[134.11235,47.2124800000001],[134.50081,47.5784500000001],[135.026311476787,48.4782298854439],[133.373595819228,48.1834416774348],[132.50669,47.78896],[130.98726,47.79013],[130.582293328983,48.7296874049762],[129.39781782442,49.4406000840156],[127.6574,49.76027],[127.287455682485,50.7397972682654],[126.939156528838,51.3538941514059],[126.564399041857,51.7842554795327],[125.946348911646,52.7927985703569],[125.06821129771,53.1610448268689],[123.57147,53.4588],[122.245747918793,53.4317259792137],[121.00308475147,53.2514010687312],[120.177088657717,52.7538862168412],[120.725789015792,52.5162263047309],[120.7382,51.96411],[120.18208,51.64355],[119.27939,50.58292],[119.288460728026,50.142882798862],[117.879244419426,49.510983384797],[116.678800897286,49.8885313991214],[115.485695428531,49.8051773138347],[114.96210981655,50.1402473008151],[114.362456496235,50.2483027207375],[112.897739699354,49.543565375357],[111.581230910287,49.3779682480777],[110.662010532679,49.1301280788058],[109.402449171997,49.2929605169577],[108.475167270951,49.2825477158507],[107.868175897251,49.7937051458659],[106.888804152455,50.2742959661803],[105.886591424587,50.4060191920922],[104.62158,50.2753200000002],[103.67654544476,50.0899661321951],[102.25589,50.5105600000001],[102.06521,51.25991],[100.889480421963,51.5168557806384],[99.9817322123236,51.634006252644],[98.8614905131005,52.0473660345467],[97.8257397806745,51.0109951849332],[98.2317615091917,50.4224006211287],[97.2597600000002,49.72605],[95.8140200000002,49.9774600000001],[94.8159493346988,50.0134333359709],[94.1475663594356,50.4805366074572],[93.10421,50.49529],[92.2347115417197,50.8021707220417],[90.7136674336408,50.3318118353211],[88.8055668476956,49.4705207383125],[87.7512642760768,49.2971979844055],[87.3599703307627,49.2149807806292],[86.8293567239897,49.8266747096681],[85.5412699726825,49.6928585882482],[85.1155595234621,50.1173029648776],[84.416377394553,50.3113996445658],[83.9351147806189,50.8892455104536],[83.3830037780125,51.0691828476939],[81.9459855488399,50.8121959499063],[80.5684468932355,51.3883364935284],[80.0355595234417,50.8647508815472],[77.8009155618443,53.4044149847475],[76.5251794778548,54.1770034857271],[76.8911002949134,54.4905244004419],[74.3848200000001,53.5468500000001],[73.4256787454205,53.4898102891097],[73.5085160663844,54.0356167669766],[72.2241500182022,54.3766553818868],[71.1801310566095,54.1332852240083],[70.8652665546552,55.1697335882701],[69.0681669452729,55.3852501491435],[68.1691003762589,54.9703917507044],[65.66687,54.6012500000002],[65.1785335630959,54.3542278102721],[61.4366000000001,54.00625],[60.9780664406832,53.6649933945791],[61.6999861998006,52.9799964463343],[60.7399931171145,52.7199864772577],[60.9272685077402,52.447548326215],[59.9675338072156,51.9604204372157],[61.5880033710241,51.2726587998432],[61.337424350841,50.7990701361043],[59.9328072447156,50.8421941188518],[59.6422823423706,50.5454422064157],[58.3633200000001,51.06364],[56.77798,51.04355],[55.71694,50.6217100000001],[54.5328784523762,51.0262397324594],[52.328723585831,51.7186522487381],[50.7666483905122,51.6927623561599],[48.702381626181,50.6051284857128],[48.5778414243576,49.8747596299156],[47.5494804217494,50.4546983913111],[46.7515963071628,49.3560057643537],[47.0436715024766,49.1520388860976],[46.4664457537763,48.3941523301049],[47.3152400000002,47.71585],[48.05725,47.74377],[48.6947335142019,47.0756281601779],[48.5932500000001,46.56104],[49.1011600000001,46.39933],[48.6454100000001,45.80629],[47.67591,45.6414900000001],[46.68201,44.6092],[47.59094,43.6601600000001],[47.49252,42.98658],[48.5843700000002,41.80888],[47.987283156126,41.4058192001944],[47.8156657244847,41.1514161240213],[47.3733154640664,41.2197323675111],[46.6860705910167,41.8271371526699],[46.4049507993489,41.8606751572274],[45.7764,42.0924400000002],[45.4702791684859,42.50278066667],[44.5376229184821,42.7119927028037],[43.93121,42.5549600000001],[43.7559900000002,42.74083],[42.3944000000002,43.2203],[40.9221900000001,43.3821500000001],[40.0769649594798,43.5531041530025],[39.9550085792711,43.4349976669993],[38.68,44.28],[37.5391200000001,44.65721],[36.6754600000001,45.24469],[37.40317,45.40451],[38.23295,46.24087],[37.67372,46.63657],[39.14767,47.0447500000001],[39.1212000000001,47.26336],[38.2235380388995,47.102189846376],[38.2551123390298,47.546400458357],[38.77057,47.8256200000002],[39.738277622239,47.8989370794521],[39.8956200000001,48.23241],[39.67465,48.7838200000001],[40.0807890154695,49.3074299179994],[40.0690400000001,49.60105],[38.5949882342136,49.9264619004237],[38.0106311378571,49.9156615260747],[37.3934595069952,50.3839533555037],[36.6261678403254,50.2255909287451],[35.3561161638881,50.5771973740591],[35.37791,50.77394],[35.0221830584179,51.2075723333715],[34.2248157081544,51.2559931504289],[34.1419783871906,51.5664134792062],[34.3917305844572,51.7688817409259],[33.7526998227359,52.3350745713316],[32.7157605323672,52.2384654811622],[32.4120581397878,52.2886949733498],[32.1594400000002,52.0612500000001],[31.78597,52.10168],[31.5400183448623,52.7420523138464],[31.305200636528,53.0739958766733],[31.49764,53.1674300000001],[32.3045194841884,53.1327261419728],[32.6936430193461,53.3514208034321],[32.4055985857512,53.618045355842],[31.7312728207746,53.794029446012],[31.7914241879624,53.9746385768722],[31.3844722836638,54.1570563828624],[30.7575338070988,54.8117709417844],[30.9718359718132,55.0815477565641],[30.8739091326201,55.5509764675035],[29.8962943865224,55.7894632025305],[29.3715718930308,55.6700906439363],[29.2295133806604,55.9183442246664],[28.1767094255779,56.1691299505788],[27.8552820167225,56.7593264837844],[27.770015903441,57.2442581244112],[27.2881848487516,57.4745283067039],[27.7166858253158,57.7918991156244],[27.4201500000002,58.7245700000001],[28.1316992530519,59.300825100331],[27.98112,59.47537],[29.1177,60.0280500000001],[28.07,60.5035200000001],[30.2111072120446,61.7800277777497],[31.139991082491,62.3576927761244],[31.5160921567113,62.8676874864129],[30.0358724301428,63.5528136257386],[30.4446846860037,64.2044534369391],[29.544429559047,64.9486715765905],[30.21765,65.80598],[29.0545886573524,66.944286200622],[29.9774263852207,67.6982970241927],[28.4459436378188,68.364612942164],[28.5919295590434,69.0647769232867],[29.39955,69.1569200000002],[31.1010800000001,69.55811],[32.1327200000003,69.9059500000002],[33.77547,69.3014200000001],[36.51396,69.06342],[40.2923400000002,67.9324],[41.0598700000001,67.4571300000001],[41.1259500000002,66.7915800000001],[40.01583,66.2661800000001],[38.38295,65.99953],[33.9187100000002,66.75961],[33.18444,66.63253],[34.81477,65.9001500000001],[34.8785742530788,65.4362128770482],[34.9439100000002,64.4143700000002],[36.23129,64.10945],[37.0127300000001,63.84983],[37.1419700000001,64.33471],[36.5395790350898,64.76446],[37.1760400000001,65.1432200000001],[39.59345,64.5207900000002],[40.4356,64.76446],[39.7626000000002,65.49682],[42.09309,66.47623],[43.0160400000001,66.41858],[43.9497500000001,66.06908],[44.53226,66.7563400000001],[43.69839,67.35245],[44.1879500000001,67.95051],[43.45282,68.57079],[46.2500000000001,68.25],[46.8213400000002,67.68997],[45.55517,67.56652],[45.56202,67.0100500000002],[46.3491500000001,66.66767],[47.8941600000003,66.8845500000002],[48.13876,67.52238],[50.2276600000001,67.9986700000001],[53.7174300000002,68.85738],[54.47171,68.80815],[53.4858200000001,68.20131],[54.72628,68.09702],[55.4426800000001,68.43866],[57.3170200000002,68.46628],[58.8020000000002,68.88082],[59.9414200000002,68.27844],[61.0778400000002,68.94069],[60.03,69.52],[60.55,69.85],[63.5040000000002,69.54739],[64.888115,69.2348350000001],[68.5121600000001,68.0923300000002],[69.18068,68.6156300000001],[68.16444,69.14436],[68.13522,69.35649],[66.9300800000001,69.4546100000001],[67.25976,69.92873],[66.7249200000001,70.7088900000001],[66.69466,71.0289700000002],[68.5400600000001,71.9345000000002],[69.19636,72.8433600000002],[69.94,73.0400000000001],[72.58754,72.77629],[72.79603,72.22006],[71.84811,71.40898],[72.47011,71.09019],[72.79188,70.39114],[72.5647000000002,69.02085],[73.66787,68.4079],[73.2387,67.7404],[71.2800000000001,66.3200000000002],[72.4230100000002,66.1726700000002],[72.82077,66.53267],[73.9209900000001,66.7894600000001],[74.1865100000002,67.28429],[75.052,67.7604700000002],[74.4692600000002,68.32899],[74.93584,68.98918],[73.84236,69.07146],[73.6018700000002,69.62763],[74.3998,70.63175],[73.1011,71.4471700000002],[74.8908200000002,72.12119],[74.65926,72.83227],[75.1580100000002,72.8549700000001],[75.68351,72.3005600000001],[75.2889800000001,71.33556],[76.35911,71.1528700000001],[75.9031300000002,71.87401],[77.5766500000001,72.26717],[79.6520200000001,72.32011],[81.5,71.75],[80.61071,72.5828500000001],[80.51109,73.6482],[82.25,73.85],[84.65526,73.8059100000002],[86.8223000000002,73.93688],[86.00956,74.4596700000001],[87.1668200000001,75.11643],[88.31571,75.14393],[90.26,75.64],[92.90058,75.77333],[93.2342100000001,76.0472],[95.8600000000001,76.14],[96.67821,75.91548],[98.9225400000002,76.44689],[100.75967,76.43028],[101.03532,76.86189],[101.99084,77.2875400000002],[104.3516,77.69792],[106.06664,77.37389],[104.705,77.1274],[106.97013,76.97419]]],[[[105.07547,78.30689],[99.43814,77.921],[101.2649,79.23399],[102.08635,79.34641],[102.837815,79.28129],[105.37243,78.71334],[105.07547,78.30689]]],[[[51.1361865578313,80.5472801785409],[49.7936845233207,80.4154277615482],[48.8944112485775,80.3395667589437],[48.7549365578218,80.1754682482008],[47.5861190122442,80.0101811795153],[46.5028259621097,80.2472468126543],[47.0724552752629,80.5594241401295],[44.8469580421811,80.5898098823172],[46.7991386248712,80.7719176297136],[48.3184774106847,80.7840099148699],[48.5228060239667,80.5145689969001],[49.0971895688909,80.7539859077084],[50.0397676938946,80.9188854031518],[51.5229329771037,80.6997256538019],[51.1361865578313,80.5472801785409]]],[[[99.93976,78.88094],[97.75794,78.7562],[94.97259,79.044745],[93.31288,79.4265],[92.5454,80.14379],[91.18107,80.34146],[93.77766,81.0246],[95.940895,81.2504],[97.88385,80.746975],[100.186655,79.780135],[99.93976,78.88094]]]]}},{type:"Feature",properties:{admin:"Rwanda",name:"Rwanda",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[30.4191048520192,-1.13465911215042],[30.8161348813177,-1.69891407634539],[30.7583089535831,-2.28725025798837],[30.469696079233,-2.41385751710346],[29.9383590024079,-2.34848683025424],[29.6321761410786,-2.9178577612461],[29.0249263852168,-2.83925790773016],[29.1174788754515,-2.29221119548838],[29.2548348324833,-2.21510995850891],[29.2918868344366,-1.62005584066799],[29.5794661801409,-1.34131316488563],[29.821518588996,-1.44332244222979],[30.4191048520192,-1.13465911215042]]]}},{type:"Feature",properties:{admin:"Western Sahara",name:"W. Sahara",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-8.79488399904908,27.1206963160225],[-8.81782833498667,27.6564258895924],[-8.66558956545481,27.6564258895924],[-8.66512447756419,27.5894790715582],[-8.68439978680905,27.395744126896],[-8.6872936670174,25.8810562199889],[-11.9694189111712,25.9333527694683],[-11.9372244938533,23.3745942245362],[-12.8742215641696,23.2848322616452],[-13.1187544417747,22.7712202010963],[-12.9291019352635,21.3270706242676],[-16.845193650774,21.3333234725749],[-17.0634232243426,20.9997521021308],[-17.0204284326757,21.4223102889815],[-17.0029617985611,21.4207341577966],[-14.7509545557135,21.5006000839037],[-14.6308326888511,21.8609398462749],[-14.2211677718573,22.3101630721882],[-13.891110398809,23.6910090194593],[-12.5009626937254,24.7701162785782],[-12.0307588363016,26.030866197203],[-11.7182197738004,26.1040917017606],[-11.392554897497,26.8834239771544],[-10.5512625797853,26.9908076034569],[-10.1894242008776,26.8609447291074],[-9.73534339032888,26.8609447291074],[-9.41303748212446,27.0884760604885],[-8.79488399904908,27.1206963160225]]]}},{type:"Feature",properties:{admin:"Saudi Arabia",name:"Saudi Arabia",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[42.779332309751,16.3478913436487],[42.6495727882661,16.774635321515],[42.3479891294107,17.075805568912],[42.2708878924312,17.4747217879891],[41.754381951674,17.833046169501],[41.2213912290156,18.6715996363012],[40.9393412615665,19.4864852971118],[40.2476522153398,20.1746345077265],[39.8016846046609,20.3388622095501],[39.1393994484083,21.2919048120929],[39.0236959165068,21.9868753117702],[39.0663289731476,22.5796556665903],[38.4927722511401,23.6884510360609],[38.0238603045236,24.0786856145129],[37.4836348813444,24.285494696545],[37.1548177426712,24.8584829777973],[37.209491408036,25.0845415308581],[36.9316272316026,25.6029594996102],[36.6396037127212,25.8262275253272],[36.2491365903238,26.5701356063849],[35.6401815121964,27.3765204940834],[35.1301868019079,28.0633519556747],[34.632336053208,28.0585460474716],[34.7877787615419,28.6074272730597],[34.8322204933129,28.9574834254048],[34.9560372250843,29.3565546737788],[36.0689408709221,29.1974946151845],[36.5012142270436,29.5052536076987],[36.7405277849872,29.8652833114762],[37.503581984209,30.0037761500184],[37.6681197446264,30.3386652694859],[37.9988489112944,30.5084998642131],[37.002165561681,31.5084129908447],[39.0048856951525,32.010216986615],[39.195468377445,32.1610088160427],[40.3999943377362,31.8899917668879],[41.8899809100078,31.1900086532784],[44.7094987322847,29.1788910995594],[46.5687134132817,29.0990251734523],[47.4598218117228,29.0025194361472],[47.7088505389374,28.5260627304161],[48.4160941912839,28.5520042994267],[48.8075948423272,27.6896279973399],[49.2995544777458,27.4612181666098],[49.4709135272257,27.1099992945381],[50.1524223162909,26.689663194276],[50.2129354185047,26.2770268824254],[50.1133032570459,25.9439722763042],[50.2398588397287,25.6080496281909],[50.5273865090007,25.3278083358721],[50.6605566750169,24.999895534764],[50.8101082700696,24.7547425399714],[51.112415398977,24.5563308781867],[51.3896077817906,24.6273859725881],[51.5795186704633,24.2454971379511],[51.617707553927,24.0142192652288],[52.0007332700743,23.0011544865789],[55.0068030129249,22.4969475367071],[55.2083410988632,22.708329982997],[55.6666593768598,22.0000011255723],[54.9999817238624,19.9999940047961],[52.0000098000222,19.0000033635161],[49.1166715838649,18.6166675887749],[48.1833435402413,18.1666692163773],[47.4666947772176,17.1166816268549],[47.0000049171898,16.9499992944974],[46.7499943377616,17.2833381209962],[46.3666585630205,17.2333153345376],[45.3999992205688,17.3333350692386],[45.2166512387972,17.4333289657233],[44.0626131528551,17.4103587915696],[43.7915185890519,17.3199767114911],[43.3807943051961,17.5799866805677],[43.1157975604034,17.0884404566074],[43.2183752785027,16.6668899601864],[42.779332309751,16.3478913436487]]]}},{type:"Feature",properties:{admin:"Sudan",name:"Sudan",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[33.9633927949712,9.46428522942062],[33.8249634809075,9.48406084571536],[33.8421308530281,9.98191463721599],[33.7219592481831,10.3252620796302],[33.2069380845618,10.7201116384066],[33.0867664797167,11.4411412674765],[33.2069380845618,12.1793382686671],[32.7434190373025,12.24800775715],[32.6747495488196,12.0248319195807],[32.0738915245948,11.9733298032185],[32.3142347342847,11.6814844771665],[32.4000715948883,11.0806264529415],[31.8507156870255,10.5312705450788],[31.3528618955249,9.81024091600869],[30.8378407319034,9.70723668328452],[29.9966394979885,10.2909273353887],[29.6189573113328,10.0849188699402],[29.5159530786086,9.79307354388805],[29.0009319149872,9.60423245056029],[28.9665971707458,9.39822398511165],[27.9708895877443,9.39822398511165],[27.8335506107788,9.60423245056029],[27.1125209817089,9.63856719480162],[26.7520061671738,9.46689347359449],[26.4773282132425,9.55273033419809],[25.962307049621,10.1364209863024],[25.7906333284139,10.4110989402337],[25.069603699344,10.273759963268],[24.7949257454127,9.81024091600869],[24.537415163602,8.91753756573172],[24.1940677211876,8.7286964724039],[23.8869795808607,8.61972971293306],[23.8058134294667,8.66631887454252],[23.459012892356,8.95428579348902],[23.3947790870173,9.26506785729225],[23.5572497901429,9.68121816653877],[23.5543042335022,10.0892552759153],[22.9775435726928,10.7144625919985],[22.8641654802442,11.1423951278076],[22.87622,11.3846100000001],[22.50869,11.67936],[22.49762,12.26024],[22.28801,12.64605],[21.93681,12.5881800000001],[22.03759,12.95546],[22.29658,13.37232],[22.18329,13.78648],[22.51202,14.09318],[22.30351,14.32682],[22.5679500000001,14.9442900000001],[23.02459,15.68072],[23.8868900000001,15.61084],[23.8376600000001,19.5804700000001],[23.8500000000001,20],[25.0000000000001,20.00304],[25.0000000000001,22],[29.02,22],[32.9,22],[36.86623,22],[37.18872,21.01885],[36.96941,20.8374400000001],[37.1147000000001,19.80796],[37.48179,18.61409],[37.86276,18.36786],[38.4100899594732,17.9983073999703],[37.9040000000001,17.42754],[37.16747,17.2631400000001],[36.8525300000001,16.95655],[36.75389,16.29186],[36.32322,14.82249],[36.42951,14.42211],[36.27022,13.5633300000001],[35.86363,12.57828],[35.26049,12.08286],[34.8316300000001,11.3189600000001],[34.7311500000001,10.9101700000001],[34.25745,10.63009],[33.96162,9.58358],[33.9633927949712,9.46428522942062]]]}},{type:"Feature",properties:{admin:"South Sudan",name:"S. Sudan",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[33.9633927949712,9.46428522942062],[33.97498,8.68456],[33.8255000000001,8.37916],[33.2948000000001,8.35458],[32.95418,7.7849700000001],[33.56829,7.71334],[34.0751,7.22595],[34.25032,6.82607],[34.70702,6.59422000000012],[35.2980071182331,5.506],[34.6201962678539,4.84712274208203],[34.005,4.24988494736215],[33.39,3.79],[32.68642,3.79232],[31.8814500000001,3.55827],[31.24556,3.7819],[30.83385,3.50917],[29.95349,4.1737],[29.715995314256,4.60080475506015],[29.1590784034466,4.38926727947324],[28.6966776872988,4.45507721599699],[28.428993768027,4.28715464926461],[27.9799772478429,4.40841339763739],[27.3742261085176,5.23394440350017],[27.2134090512253,5.55095347739461],[26.4659094581233,5.94671743410186],[26.2134184099451,6.54660329836213],[25.7966479835113,6.97931590415817],[25.1241308936648,7.50008515057942],[25.1149324887169,7.82510407147924],[24.5673690121522,8.22918793378545],[23.8869795808607,8.61972971293306],[24.1940677211876,8.7286964724039],[24.537415163602,8.91753756573172],[24.7949257454127,9.81024091600869],[25.069603699344,10.273759963268],[25.7906333284139,10.4110989402337],[25.962307049621,10.1364209863024],[26.4773282132425,9.55273033419809],[26.7520061671738,9.46689347359449],[27.1125209817089,9.63856719480162],[27.8335506107788,9.60423245056029],[27.9708895877443,9.39822398511165],[28.9665971707458,9.39822398511165],[29.0009319149872,9.60423245056029],[29.5159530786086,9.79307354388805],[29.6189573113328,10.0849188699402],[29.9966394979885,10.2909273353887],[30.8378407319034,9.70723668328452],[31.3528618955249,9.81024091600869],[31.8507156870255,10.5312705450788],[32.4000715948883,11.0806264529415],[32.3142347342847,11.6814844771665],[32.0738915245948,11.9733298032185],[32.6747495488196,12.0248319195807],[32.7434190373025,12.24800775715],[33.2069380845618,12.1793382686671],[33.0867664797167,11.4411412674765],[33.2069380845618,10.7201116384066],[33.7219592481831,10.3252620796302],[33.8421308530281,9.98191463721599],[33.8249634809075,9.48406084571536],[33.9633927949712,9.46428522942062]]]}},{type:"Feature",properties:{admin:"Senegal",name:"Senegal",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-16.7137288070235,13.5949586043799],[-17.1261067367126,14.3735157332892],[-17.6250426904907,14.7295405135641],[-17.1851728988222,14.9194772404529],[-16.7007063460859,15.6215274113541],[-16.4630981104079,16.1350361190385],[-16.1206900700419,16.4556625431934],[-15.6236661442587,16.3693370630498],[-15.1357372705588,16.5872824162408],[-14.577347581429,16.5982636581028],[-14.0995214502422,16.3043022730105],[-13.4357376774531,16.0393830428662],[-12.8306583317475,15.3036915145429],[-12.1707502913803,14.6168342147355],[-12.1248874577213,13.9947274845898],[-11.9277160303116,13.4220751001474],[-11.5533977930054,13.1412136906411],[-11.4678991357785,12.754518947801],[-11.5139428369506,12.4429875757294],[-11.6583009505579,12.3865827498828],[-12.2035648258856,12.4656476912894],[-12.2785990055734,12.3544400089973],[-12.4990506657306,12.3320899520311],[-13.2178181624782,12.575873521368],[-13.7004760400843,12.5861829696102],[-15.548476935274,12.6281700708473],[-15.8165742660043,12.5155671248833],[-16.1477168441306,12.5477615422012],[-16.6774519515546,12.3848515894011],[-16.8415246240813,13.1513939478026],[-15.9312959456922,13.1302841252113],[-15.691000535535,13.2703530949385],[-15.5118125065629,13.2785696476729],[-15.1411632959495,13.5095116235852],[-14.7121972314946,13.2982066919438],[-14.2777017887846,13.2805850285322],[-13.8449633447724,13.505041612192],[-14.0469923568175,13.7940678980004],[-14.3767138330558,13.6256802433774],[-14.6870308089685,13.6303569604998],[-15.0817353988138,13.876491807506],[-15.3987703109245,13.8603687606309],[-15.6245963200399,13.6235873478696],[-16.7137288070235,13.5949586043799]]]}},{type:"Feature",properties:{admin:"Solomon Islands",name:"Solomon Is.",continent:"Australia"},geometry:{type:"MultiPolygon",coordinates:[[[[162.119024693041,-10.4827190080211],[162.398645868172,-10.8263672827621],[161.700032180018,-10.8200110815902],[161.319796991215,-10.2047514787231],[161.917383254238,-10.4467005347137],[162.119024693041,-10.4827190080211]]],[[[160.852228631838,-9.872937106977],[160.462588332357,-9.89520964929484],[159.849447463214,-9.79402719486737],[159.640002883135,-9.63997975020527],[159.702944777667,-9.24294972090678],[160.362956170898,-9.40030445723553],[160.688517694337,-9.61016244877281],[160.852228631838,-9.872937106977]]],[[[161.679981724289,-9.59998219161137],[161.529396600591,-9.78431202559643],[160.788253208661,-8.91754322676492],[160.579997186524,-8.32000864017397],[160.920028111005,-8.32000864017397],[161.28000613835,-9.12001148848445],[161.679981724289,-9.59998219161137]]],[[[159.875027297199,-8.33732024499171],[159.917401971678,-8.53828989017486],[159.133677199539,-8.1141814103554],[158.586113722975,-7.75482350019771],[158.211149530265,-7.42187224694115],[158.359977655265,-7.32001799889392],[158.820001255528,-7.56000335045739],[159.640002883135,-8.02002695071957],[159.875027297199,-8.33732024499171]]],[[[157.538425734689,-7.34781991946693],[157.339419793933,-7.40476734785255],[156.902030471015,-7.17687428144539],[156.491357863591,-6.76594329186039],[156.542827590154,-6.59933847415148],[157.140000441719,-7.02163827884065],[157.538425734689,-7.34781991946693]]]]}},{type:"Feature",properties:{admin:"Sierra Leone",name:"Sierra Leone",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[-11.4387794661821,6.78591685630575],[-11.7081945459357,6.86009837486072],[-12.4280989241938,7.26294200279203],[-12.9490490381282,7.79864573814574],[-13.1240254378685,8.16394643801698],[-13.2465502588325,8.90304861087151],[-12.7119575667731,9.34271169681077],[-12.5967191227622,9.62018830000197],[-12.4259285140376,9.83583405195595],[-12.150338100625,9.85857168216438],[-11.9172773909887,10.0469839543006],[-11.1174812484073,10.0458729110063],[-10.8391519840833,9.68824616133037],[-10.622395188835,9.26791006106828],[-10.6547704736659,8.97717845299419],[-10.4943151513996,8.71554067630043],[-10.5054772607747,8.3488963891896],[-10.2300935530913,8.40620555260129],[-10.6955948551765,7.93946401614109],[-11.1467042708684,7.39670644777953],[-11.1998018050483,7.10584564862474],[-11.4387794661821,6.78591685630575]]]}},{type:"Feature",properties:{admin:"El Salvador",name:"El Salvador",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-87.7931111315266,13.3844804956551],[-87.9041121080895,13.1490168319171],[-88.4833015612168,13.1639513208495],[-88.8432279121297,13.2597335881025],[-89.2567427233293,13.4585328231293],[-89.8123935615476,13.520622056528],[-90.095554572291,13.7353376327007],[-90.0646779039966,13.8819695093289],[-89.7219339668207,14.1342280135617],[-89.5342193265205,14.2448155786663],[-89.5873426989165,14.3625861678595],[-89.3533259752828,14.4241327987191],[-89.0585119290576,14.3400294051641],[-88.8430728828328,14.1405067000852],[-88.541230841816,13.9801547306835],[-88.5039979723497,13.8454859481309],[-88.0653425768401,13.9646259627798],[-87.8595153470216,13.893312486217],[-87.7235029772294,13.7850503605655],[-87.7931111315266,13.3844804956551]]]}},{type:"Feature",properties:{admin:"Somaliland",name:"Somaliland",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[48.9381295102965,9.45174896894667],[48.486735874227,8.83762624758998],[47.78942,8.003],[46.9483284848979,7.99687653241739],[43.67875,9.18358000000012],[43.2969751320187,9.54047740319174],[42.92812,10.0219400000001],[42.55876,10.5725800000001],[42.776851841001,10.9268785669344],[43.1453048032421,11.4620396997489],[43.4706596209517,11.2777098657639],[43.6666683286348,10.8641692163482],[44.1178035825428,10.4455384383516],[44.6142590675709,10.4422053084689],[45.5569405454391,10.6980294865298],[46.645401238803,10.8165493839912],[47.5256575864628,11.12722809493],[48.0215963071678,11.1930638696697],[48.3787838071693,11.3754816756601],[48.9482064145935,11.4106216496185],[48.9420052427184,11.3942660587982],[48.9384912453226,10.9823273787835],[48.9382328631611,9.97350006758148],[48.9381295102965,9.45174896894667]]]}},{type:"Feature",properties:{admin:"Somalia",name:"Somalia",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[49.72862,11.5789],[50.25878,11.67957],[50.73202,12.0219],[51.1112,12.02464],[51.13387,11.74815],[51.04153,11.16651],[51.04531,10.6409],[50.83418,10.27972],[50.55239,9.19874],[50.07092,8.08173],[49.4527,6.80466],[48.59455,5.33911],[47.74079,4.2194],[46.56476,2.85529],[45.56399,2.04576],[44.06815,1.05283],[43.13597,.2922],[42.04157,-.91916],[41.81095,-1.44647],[41.58513,-1.68325],[40.993,-.85829],[40.98105,2.78452],[41.855083092644,3.91891192048373],[42.12861,4.23413],[42.76967,4.25259],[43.66087,4.95755],[44.9636,5.00162],[47.78942,8.003],[48.4867358742269,8.83762624758999],[48.9381295102964,9.45174896894662],[48.938232863161,9.97350006758151],[48.9384912453225,10.9823273787835],[48.9420052427183,11.3942660587981],[48.9482047585097,11.410617281698],[49.26776,11.43033],[49.72862,11.5789]]]}},{type:"Feature",properties:{admin:"Republic of Serbia",name:"Serbia",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[20.8743127784134,45.4163754339343],[21.4835262387022,45.1811701523579],[21.5620227393537,44.7689472519656],[22.1450879249029,44.4784223496206],[22.459022251076,44.7025171982544],[22.7057255388374,44.578002834647],[22.4740084164407,44.4092276067818],[22.6571496924831,44.2349230006614],[22.4104464047216,44.0080634629001],[22.5001566911802,43.642814439461],[22.9860185075885,43.2111612005271],[22.6048014665714,42.8985187851611],[22.4365946794614,42.5803211533239],[22.5450118344096,42.461362006188],[22.3805257504247,42.3202595078151],[21.9170800000001,42.30364],[21.5766359894021,42.2452243970619],[21.54332,42.32025],[21.66292,42.43922],[21.77505,42.6827],[21.63302,42.67717],[21.43866,42.86255],[21.27421,42.90959],[21.143395,43.0686850000001],[20.95651,43.13094],[20.81448,43.27205],[20.63508,43.21671],[20.49679,42.88469],[20.25758,42.81275],[20.3398,42.89852],[19.95857,43.10604],[19.63,43.2137799702705],[19.48389,43.35229],[19.21852,43.52384],[19.454,43.5681000000001],[19.59976,44.03847],[19.11761,44.42307],[19.36803,44.863],[19.00548,44.86023],[19.3904757015846,45.2365156113424],[19.0727689958542,45.5215111354321],[18.82982,45.90888],[19.5960445492416,46.1717298447446],[20.2201924984629,46.1274689804866],[20.76217492034,45.7345730657715],[20.8743127784134,45.4163754339343]]]}},{type:"Feature",properties:{admin:"Suriname",name:"Suriname",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-57.1474364894769,5.97314992921916],[-55.9493184067898,5.772877915872],[-55.8417797511904,5.95312531170606],[-55.0332502915518,6.02529144940166],[-53.9580446030709,5.75654816326776],[-54.4786329819792,4.89675568279559],[-54.3995422023565,4.21261139568347],[-54.006930508019,3.62003774659256],[-54.1817260402463,3.18977977133042],[-54.2697051662232,2.73239166911505],[-54.5247541977997,2.31184886312379],[-55.0975874497551,2.52374807373661],[-55.569755011606,2.42150625244713],[-55.9733221095894,2.51036387777302],[-56.0733418442903,2.2207949894255],[-55.9056001450709,2.02199575439866],[-55.9956980047717,1.8176671411166],[-56.5393857489145,1.89952260986692],[-57.1500978257399,2.76892690674541],[-57.2814334784097,3.33349192953412],[-57.6015689764579,3.33465464926068],[-58.0446943833607,4.06086355225838],[-57.8602095200787,4.57680105226045],[-57.9142889064721,4.81262645102441],[-57.3072458563395,5.07356659588223],[-57.1474364894769,5.97314992921916]]]}},{type:"Feature",properties:{admin:"Slovakia",name:"Slovakia",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[18.8531441586136,49.4962297633776],[18.9095748226763,49.4358458522446],[19.3207125179905,49.5715740016592],[19.8250228207269,49.2171253525692],[20.4158394711199,49.4314533554998],[20.8879553565384,49.3287722845358],[21.6078080583642,49.4701073268541],[22.5581376482118,49.0857380234671],[22.2808419125336,48.8253921575807],[22.0856083513348,48.4222643092718],[21.8722363624017,48.31997081155],[20.8012939795849,48.6238540716424],[20.4735620459899,48.5628500433218],[20.2390543962493,48.3275672470969],[19.7694706560131,48.2026911484636],[19.6613635596585,48.2666148952087],[19.1743648617399,48.1113788926039],[18.7770247738477,48.0817682969006],[18.6965128923369,47.8809536810144],[17.85713260262,47.7584288600504],[17.4884729346498,47.8674661321862],[16.979666782304,48.1234970159763],[16.879982944413,48.4700133327095],[16.9602881201946,48.5969823268506],[17.1019848975389,48.8169688991171],[17.5450069515771,48.8000190293254],[17.8864848161618,48.9034752467737],[17.9135115902505,48.9964928248991],[18.1049727718919,49.0439834661753],[18.170498488038,49.2715147975564],[18.3999935238462,49.31500051533],[18.5549711442895,49.4950153672188],[18.8531441586136,49.4962297633776]]]}},{type:"Feature",properties:{admin:"Slovenia",name:"Slovenia",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[13.8064754574215,46.5093061386912],[14.6324715511748,46.4318173284695],[15.137091912505,46.658702704447],[16.0116638526127,46.6836107448117],[16.2022982113374,46.852385972677],[16.3705049984474,46.8413272161665],[16.5648083838649,46.5037509222198],[15.7687329444085,46.2381082220234],[15.6715295752676,45.8341535507979],[15.3239538916724,45.7317825384277],[15.3276745947974,45.4523163925932],[14.9352437679729,45.4716950547027],[14.5951094906278,45.6349409043127],[14.4119682145854,45.4661656764474],[13.7150598486972,45.5003237981924],[13.9376302425783,45.5910159368646],[13.6981099789055,46.0167780625173],[13.8064754574215,46.5093061386912]]]}},{type:"Feature",properties:{admin:"Sweden",name:"Sweden",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[22.1831734555019,65.7237405463202],[21.2135168799772,65.0260053575153],[21.369631381931,64.4135879584243],[19.7788757666902,63.609554348395],[17.8477791683752,62.7494001328968],[17.1195548845181,61.341165676511],[17.8313460629064,60.6365833604274],[18.7877217953321,60.0819143744226],[17.8692248877763,58.9537661810587],[16.8291850114701,58.7198269720734],[16.4477095882915,57.0411180690719],[15.8797855974038,56.1043018662687],[14.6666813493521,56.2008851182222],[14.1007210628915,55.4077810736226],[12.9429105973921,55.3617373724506],[12.625100538797,56.307080186582],[11.7879423356687,57.4418171250631],[11.0273686051969,58.8561494004593],[11.4682719255111,59.432393296946],[12.3003658382749,60.11793284773],[12.6311466813752,61.2935716823701],[11.9920642432216,61.8003624538565],[11.9305692887942,63.128317572677],[12.5799353369739,64.0662189805583],[13.5719161312487,64.0491140814697],[13.9199052263022,64.4454206407161],[13.5556897315091,64.7870276963815],[15.108411492583,66.1938668890955],[16.1087121924568,67.3024555528369],[16.7688786149855,68.0139366726314],[17.7291817562653,68.0105518663163],[17.9938684424643,68.5673912624773],[19.8785596045813,68.4071943223726],[20.0252689958579,69.0651386583127],[20.6455928890895,69.1062472602009],[21.9785347836261,68.6168456081807],[23.5394730974344,67.9360086127352],[23.5658797543356,66.3960509304374],[23.9033785336338,66.0069273952796],[22.1831734555019,65.7237405463202]]]}},{type:"Feature",properties:{admin:"Swaziland",name:"Swaziland",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[32.0716654802811,-26.7338200823049],[31.8680603370511,-27.1779273414213],[31.2827730649133,-27.285879408479],[30.6859619483745,-26.7438453101695],[30.6766085141296,-26.3980783017046],[30.9496667823599,-26.0226490211041],[31.0440796241571,-25.7314523251394],[31.3331575863979,-25.6601905250089],[31.8377779477281,-25.8433318010513],[31.985779249812,-26.2917798804802],[32.0716654802811,-26.7338200823049]]]}},{type:"Feature",properties:{admin:"Syria",name:"Syria",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[38.7923405291361,33.3786864283522],[36.8340621274355,32.3129375269808],[35.7199182472227,32.7091924097949],[35.7007979672747,32.7160136988574],[35.8363969256086,32.8681232773085],[35.8211007016502,33.2774264592763],[36.0664604021721,33.8249124211925],[36.6117501157159,34.2017886418972],[36.4481942075121,34.5939352483441],[35.9984025408436,34.6449140488],[35.9050232276922,35.4100094670973],[36.1497628110265,35.8215347356537],[36.417550083163,36.0406169703551],[36.6853890317318,36.2596992050565],[36.7394942563414,36.8175204534311],[37.0667611020458,36.6230362005006],[38.1677274920242,36.9012104355278],[38.6998913917659,36.7129273544723],[39.5225801938525,36.716053778626],[40.6732593116957,37.0912763534973],[41.212089471203,37.0743523219217],[42.3495910988118,37.2298725449041],[41.837064243341,36.6058537867636],[41.2897074725055,36.3588146021923],[41.3839652850058,35.6283165553144],[41.0061588885199,34.4193722600621],[38.7923405291361,33.3786864283522]]]}},{type:"Feature",properties:{admin:"Chad",name:"Chad",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[14.4957873877629,12.8593962671374],[14.5957812842476,13.3304269474779],[13.9544767595056,13.3534487980638],[13.9566988460941,13.9966911890169],[13.5403935075508,14.3671336939012],[13.97217,15.68437],[15.2477311540418,16.6273058130508],[15.3004411149797,17.927949937405],[15.6857405941478,19.9571800806424],[15.9032466976643,20.3876189234175],[15.4871480648501,20.7304145370256],[15.47106,21.04845],[15.0968876481818,21.3085187850749],[14.8513,22.8629500000001],[15.86085,23.40972],[19.84926,21.49509],[23.8376600000001,19.5804700000001],[23.8868900000001,15.61084],[23.02459,15.68072],[22.5679500000001,14.9442900000001],[22.30351,14.32682],[22.51202,14.09318],[22.18329,13.78648],[22.29658,13.37232],[22.03759,12.95546],[21.93681,12.5881800000001],[22.28801,12.64605],[22.49762,12.26024],[22.50869,11.67936],[22.87622,11.3846100000001],[22.8641654802442,11.1423951278076],[22.2311291846688,10.9718887394606],[21.7238216488595,10.567055568886],[21.0008683610963,9.47598521569148],[20.0596854997643,9.01270600019484],[19.0940080095261,9.07484691002577],[18.8120097185093,8.98291453697862],[18.9110217627806,8.63089468020644],[18.3895548845233,8.28130361575188],[17.9649296403809,7.89091400800299],[16.7059883968864,7.50832754152998],[16.4561845231874,7.73477366783294],[16.2905615576919,7.75430735923942],[16.1062317237067,7.49708791750646],[15.2794604834692,7.42192454673801],[15.4360917497457,7.69281240481189],[15.1208655127653,8.38215017336944],[14.9799955583377,8.79610423424344],[14.5444665869819,8.96586131432224],[13.9542183773441,9.54949494062669],[14.1714660986991,10.0213782821],[14.6272005550811,9.92091929772459],[14.9093538753948,9.99212942142276],[15.4678727556052,9.98233673750354],[14.923564894275,10.8913251815175],[14.9601518083377,11.5555740421972],[14.89336,12.21905],[14.4957873877629,12.8593962671374]]]}},{type:"Feature",properties:{admin:"Togo",name:"Togo",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[1.86524051271232,6.14215770102973],[1.06012169760493,5.92883738852888],[.836931186536333,6.27997874595215],[.570384148774849,6.91435862876719],[.490957472342245,7.41174428957647],[.712029249686878,8.31246450442383],[.461191847342121,8.67722260175601],[.365900506195885,9.46500397382948],[.367579990245389,10.1912128768272],[-.049784715159944,10.7069178328839],[.023802524423701,11.0186817489008],[.899563022474069,10.9973393823643],[.772335646171484,10.4708082137424],[1.07779503744874,10.175606594275],[1.42506066245014,9.825395412633],[1.46304284018467,9.33462433515709],[1.66447757325838,9.12859039960938],[1.61895063640924,6.83203807212624],[1.86524051271232,6.14215770102973]]]}},{type:"Feature",properties:{admin:"Thailand",name:"Thailand",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[102.584932489027,12.1865949569133],[101.68715783082,12.6457400578266],[100.831809523525,12.6270848657692],[100.978467238369,13.4127216659026],[100.097797479251,13.4068563908374],[100.018732537845,12.3070010441534],[99.4789205261236,10.8463666854235],[99.1537724141431,9.96306142825855],[99.2223987162268,9.23925547936243],[99.8738318216981,9.20786204674512],[100.279646844486,8.29515289960605],[100.459274123133,7.42957265871718],[101.017327915453,6.85686859784248],[101.623079054778,6.74062246340192],[102.141186964936,6.22163605389463],[101.814281854258,5.81080841717424],[101.154218784594,5.69138418214771],[101.075515578213,6.20486705161592],[100.259596388757,6.64282481528954],[100.085756870527,6.46448944745029],[99.6906905456557,6.8482127954336],[99.5196415547696,7.34345388430276],[98.9882528015123,7.90799306887533],[98.503786248776,8.38230520266629],[98.339661899817,7.79451162356238],[98.1500093933058,8.35000743248388],[98.2591500183062,8.9739228377598],[98.553550653073,9.93295990644854],[99.038120558674,10.9605457625724],[99.5872860046397,11.8927627629017],[99.1963537943516,12.8047484399887],[99.2120117533361,13.2692937280765],[99.0977551615387,13.8275025496933],[98.4308191263799,14.6220276961808],[98.1920740091914,15.1237025008704],[98.5373759297657,15.3084974227461],[98.9033484232567,16.1778242049761],[98.4937610209113,16.8378355982079],[97.8591227559349,17.5679460718437],[97.3758964375735,18.4454377303758],[97.7977828308044,18.6270803898818],[98.2537239929156,19.70820302986],[98.9596757344549,19.7529806584409],[99.5433093607593,20.1865976018021],[100.115987583418,20.4178496363082],[100.548881056727,20.1092379826611],[100.606293573003,19.5083444279712],[101.282014601652,19.4625849471768],[101.035931431078,18.4089283309616],[101.059547560635,17.5124972599945],[102.113591750092,18.1091016708042],[102.413004998792,17.9327816838243],[102.998705682388,17.9616946476916],[103.200192091894,18.3096320663128],[103.956476678485,18.2409540877969],[104.716947056092,17.4288589543301],[104.779320509869,16.4418649357714],[105.58903852745,15.5703160669529],[105.544338413518,14.7239336206604],[105.218776890079,14.2732117782107],[104.281418084737,14.4167430689014],[102.988422072362,14.2257211369345],[102.348099399833,13.3942473413582],[102.584932489027,12.1865949569133]]]}},{type:"Feature",properties:{admin:"Tajikistan",name:"Tajikistan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[71.0141980325202,40.2443655462182],[70.6480188333,39.9357538925712],[69.5596098163685,40.103211371413],[69.4648869159775,39.5266832545487],[70.5491618183256,39.6041979029865],[71.784693637992,39.2794632024644],[73.6753792662548,39.4312368841056],[73.9288521666464,38.5058153346227],[74.2575142760227,38.6065068629434],[74.8648157083168,38.3788463404816],[74.8299857929521,37.9900070257014],[74.9800024758954,37.4199901393059],[73.9486959166465,37.4215662704908],[73.260055779925,37.495256862939],[72.6368896829173,37.0475580917784],[72.1930408059624,36.9482876653457],[71.8446382994506,36.7381712916469],[71.4486934752302,37.0656448430805],[71.5419177590848,37.9057744410656],[71.2394039244482,37.9532650823419],[71.3481311379903,38.2589053411322],[70.8068205097329,38.4862816432164],[70.3763041523093,38.1383959010275],[70.2705741718401,37.735164699854],[70.1165784036103,37.5882227646321],[69.518785434858,37.6089966904134],[69.1962728209244,37.1511435003074],[68.8594458352459,37.3443358424306],[68.1355623717014,37.0231151393043],[67.8299996275595,37.1449940048647],[68.3920325051659,38.1570252548687],[68.1760250181859,38.9015534531139],[67.4422196796413,39.1401435410055],[67.7014286640173,39.5804784205645],[68.5364164569894,39.5334528671789],[69.0116329283455,40.0861581487567],[69.3294946633728,40.7278244085248],[70.666622348925,40.9602133245414],[70.4581596210596,40.4964948593703],[70.6014066913727,40.2185273300723],[71.0141980325202,40.2443655462182]]]}},{type:"Feature",properties:{admin:"Turkmenistan",name:"Turkmenistan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[61.2108170917257,35.6500723333092],[61.1230705096941,36.4915971949662],[60.3776379738839,36.5273831243284],[59.2347619973168,37.4129879827303],[58.4361544126782,37.5223094752438],[57.330433790929,38.0292294378109],[56.6193660825928,38.1213943548035],[56.1803747902733,37.9351266546074],[55.5115784035519,37.9641171331232],[54.8003039894866,37.3924207626782],[53.9215979347955,37.1989183619613],[53.7355111021125,37.9061361760917],[53.8809285825818,38.9520930038954],[53.1010278664329,39.2905736354071],[53.3578080584912,39.9752863632744],[52.6939726092698,40.033629055332],[52.9152510923436,40.8765233424447],[53.8581392759411,40.6310344508422],[54.7368453306321,40.9510149195935],[54.0083109881813,41.5512108424474],[53.7217134946906,42.12319143327],[52.9167497088801,41.8681165634773],[52.8146887551036,41.1353705917947],[52.5024597511961,41.7833155380864],[52.9442932472916,42.1160342473976],[54.0794177590149,42.3241094020208],[54.7553454933926,42.0439714625666],[55.4552510923538,41.2598591171858],[55.9681913592829,41.3086416692694],[57.0963912290791,41.3223100856106],[56.9322152036878,41.8260261093756],[57.7865299823371,42.1705528834655],[58.6290108579915,42.751551011723],[59.9764221535698,42.2230819768902],[60.0833406919817,41.4251461858714],[60.4659529966707,41.2203266464825],[61.5471789895136,41.2663703476546],[61.8827140643847,41.0848568792294],[62.374260288345,40.0538862167904],[63.518014764261,39.3632565374256],[64.1702230162168,38.8924067245982],[65.2159989765074,38.4026950139843],[66.5461503437002,37.9746849635269],[66.5186068052887,37.3627843287588],[66.2173848814593,37.3937901881339],[65.7456307310668,37.6611640488121],[65.5889477883578,37.3052167831856],[64.7461051776774,37.1118177353333],[64.5464791197339,36.3120732691843],[63.9828959491587,36.0079574651466],[63.1935384459003,35.8571656357189],[62.9846623065766,35.4040408391676],[62.2306514830059,35.2706639674223],[61.2108170917257,35.6500723333092]]]}},{type:"Feature",properties:{admin:"East Timor",name:"Timor-Leste",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[124.968682489116,-8.89279021569708],[125.08624637258,-8.65688730228468],[125.947072381698,-8.43209482181503],[126.644704217639,-8.39824675866385],[126.95724328014,-8.2733448218144],[127.335928175975,-8.3973165828826],[126.967991978057,-8.66825611738889],[125.925885044459,-9.10600717533335],[125.088520135601,-9.39317310957929],[125.070019972841,-9.08998748132287],[124.968682489116,-8.89279021569708]]]}},{type:"Feature",properties:{admin:"Trinidad and Tobago",name:"Trinidad and Tobago",continent:"North America"},geometry:{type:"Polygon",coordinates:[[[-61.68,10.76],[-61.105,10.89],[-60.895,10.855],[-60.935,10.11],[-61.77,10],[-61.95,10.09],[-61.66,10.365],[-61.68,10.76]]]}},{type:"Feature",properties:{admin:"Tunisia",name:"Tunisia",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[9.48213992680527,30.3075560572462],[9.05560265466815,32.1026919622013],[8.43910281742612,32.5062848984008],[8.43047285323337,32.7483373072559],[7.61264163578218,33.344114895149],[7.52448164229224,34.0973764104515],[8.1409814795343,34.6551459823938],[8.37636762862377,35.4798760035559],[8.21782433435231,36.4331769882603],[8.42096438969167,36.9464273137832],[9.50999352381061,37.3499944117665],[10.2100024756363,37.2300017359848],[10.1806502620945,36.7240377874151],[11.0288672217333,37.092103176414],[11.1000256689993,36.8999960393689],[10.6000045101431,36.4100001083774],[10.5932865739451,35.9474443629328],[10.9395186703007,35.6989840764735],[10.807847120821,34.8335071884492],[10.1495927262871,34.3307730168977],[10.3396586442566,33.7857416855153],[10.8568363786337,33.7687401392913],[11.1085006038951,33.2933428004222],[11.488787469131,33.1369957545231],[11.4322534522037,32.3689031031529],[10.9447896663945,32.0818146835554],[10.6369014827995,31.7614208033457],[9.95022505050508,31.3760696477453],[10.0565751481618,30.9618313664936],[9.97001712407285,30.5393248560752],[9.48213992680527,30.3075560572462]]]}},{type:"Feature",properties:{admin:"Turkey",name:"Turkey",continent:"Asia"},geometry:{type:"MultiPolygon",coordinates:[[[[36.9131270688422,41.3353583847643],[38.3476648292645,40.9485861272757],[39.5126066424202,41.1027627630186],[40.3734326515382,41.0136725937473],[41.5540841001107,41.5356562363276],[42.6195487811046,41.5831727158199],[43.5827458025927,41.0921432561826],[43.7526579119685,40.7402009140588],[43.656436395041,40.2535639511662],[44.4000085792888,40.0050003118423],[44.793989699082,39.713002631177],[44.1092252947824,39.4281362981681],[44.4214026222576,38.2812812363145],[44.2257556496005,37.9715843775893],[44.7726990089777,37.1704446477684],[44.2934517759029,37.0015143906064],[43.9422587420473,37.2562275253729],[42.7791256040219,37.3852635768058],[42.3495910988118,37.2298725449041],[41.212089471203,37.0743523219217],[40.6732593116957,37.0912763534974],[39.5225801938525,36.716053778626],[38.6998913917659,36.7129273544723],[38.1677274920242,36.9012104355278],[37.0667611020458,36.6230362005006],[36.7394942563414,36.8175204534311],[36.6853890317318,36.2596992050565],[36.4175500831631,36.0406169703551],[36.1497628110266,35.8215347356537],[35.7820849952699,36.2749954290149],[36.1608215675371,36.6506055771284],[35.5509363136283,36.5654428167113],[34.7145532569844,36.7955321314909],[34.0268949724765,36.219960028624],[32.5091581560641,36.1075637883892],[31.6995951677796,36.6442752141726],[30.6216247901711,36.6778648951623],[30.3910962257171,36.262980658507],[29.6999756202456,36.144357408181],[28.7329028663354,36.6768313665164],[27.6411865577374,36.6588221298628],[27.0487679379433,37.653360907536],[26.318218214633,38.2081332464054],[26.8047001482287,38.9857601995336],[26.1707853533044,39.4636121689365],[27.2800199724494,40.4200137395783],[28.8199776547472,40.4600112981722],[29.2400036964156,41.2199907496727],[31.1459338722044,41.0876215683571],[32.3479793637458,41.7362641464846],[33.5132829119275,42.0189600693373],[35.1677038917519,42.0402249212254],[36.9131270688422,41.3353583847643]]],[[[27.1923767432824,40.6905657008425],[26.3580090674978,40.1519939234965],[26.0433512712725,40.6177536077432],[26.0569421729653,40.8241234401007],[26.2946020850757,40.9362612981742],[26.6041955909363,41.562114569661],[26.1170418637208,41.8269046087246],[27.1357393734905,42.1414848903013],[27.9967204119054,42.0073587102878],[28.1155245297444,41.6228860540363],[28.9884428240188,41.2999341904282],[28.8064384294867,41.0549620631485],[27.6190173682841,40.9998233098931],[27.1923767432824,40.6905657008425]]]]}},{type:"Feature",properties:{admin:"Taiwan",name:"Taiwan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[121.77781782439,24.3942735865194],[121.175632358893,22.7908572453672],[120.747079705896,21.9705713973821],[120.220083449384,22.8148609481667],[120.106188592612,23.5562627222582],[120.694679803552,24.5384508326137],[121.495044386889,25.2954588892574],[121.951243931161,24.997595933527],[121.77781782439,24.3942735865194]]]}},{type:"Feature",properties:{admin:"United Republic of Tanzania",name:"Tanzania",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[33.9037111971046,-.95],[34.07262,-1.05982],[37.69869,-3.09699],[37.7669,-3.67712],[39.20222,-4.67677],[38.74054,-5.90895],[38.79977,-6.47566],[39.44,-6.84],[39.4700000000001,-7.1],[39.19469,-7.7039],[39.25203,-8.00781],[39.18652,-8.48551],[39.53574,-9.11236999999988],[39.9496,-10.0984],[40.31659,-10.3170999999999],[39.521,-10.89688],[38.4275565935878,-11.2852023250816],[37.82764,-11.26879],[37.47129,-11.56876],[36.7751509946229,-11.5945374487808],[36.5140816586844,-11.7209380021667],[35.3123979021691,-11.4391464168792],[34.5599890479995,-11.5200200334158],[34.28,-10.16],[33.9408377240965,-9.69367384198028],[33.73972,-9.41715],[32.7593754412214,-9.230599053589],[32.1918648617919,-8.93035898197326],[31.5563480974666,-8.76204884199865],[31.1577513369501,-8.59457874731731],[30.74,-8.34],[30.2,-7.08],[29.62,-6.52],[29.4199927100883,-5.9399988745393],[29.5199866065731,-5.41997893638626],[29.3399975929004,-4.49998341229411],[29.7535124040999,-4.4523894181533],[30.11632,-4.09012],[30.50554,-3.56858],[30.75224,-3.35931],[30.74301,-3.03431],[30.52766,-2.80762],[30.46967,-2.41383],[30.7583089535831,-2.28725025798838],[30.8161348813178,-1.69891407634537],[30.4191048520193,-1.13465911215042],[30.7698600000001,-1.01455],[31.86617,-1.02736],[33.9037111971046,-.95]]]}},{type:"Feature",properties:{admin:"Uganda",name:"Uganda",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[31.86617,-1.02736],[30.7698600000001,-1.01455],[30.4191048520193,-1.13465911215042],[29.8215185889961,-1.44332244222977],[29.579466180141,-1.34131316488561],[29.5878377621722,-.587405694179381],[29.8195,-.2053],[29.8757788429024,.597379868976361],[30.0861535987628,1.06231273030642],[30.4685075212903,1.58380544677971],[30.8526701189481,1.84939647054375],[31.174149204236,2.20446523682131],[30.77332,2.33989000000014],[30.83385,3.50917],[31.24556,3.7819],[31.88145,3.55827],[32.68642,3.79232],[33.39,3.79],[34.005,4.24988494736215],[34.47913,3.5556],[34.59607,3.05374000000012],[35.03599,1.90584],[34.6721,1.17694],[34.18,.515],[33.893568969667,.109813537861839],[33.9037111971046,-.95],[31.86617,-1.02736]]]}},{type:"Feature",properties:{admin:"Ukraine",name:"Ukraine",continent:"Europe"},geometry:{type:"Polygon",coordinates:[[[31.7859981625716,52.1016779648854],[32.1594120623127,52.0612669948332],[32.4120581397876,52.2886949733497],[32.715760532367,52.238465481162],[33.7526998227357,52.3350745713317],[34.391730584457,51.7688817409258],[34.1419783871904,51.5664134792062],[34.2248157081543,51.2559931504289],[35.0221830584179,51.2075723333714],[35.3779236183151,50.7739553900103],[35.3561161638879,50.5771973740591],[36.6261678403253,50.2255909287451],[37.3934595069951,50.3839533555036],[38.0106311378569,49.9156615260746],[38.5949882342134,49.9264619004236],[40.0690584653391,49.6010554062817],[40.0807890154693,49.3074299179993],[39.6746639340875,48.7838184678019],[39.8956323585676,48.2324050970314],[39.7382776222388,47.898937079452],[38.7705847511412,47.8256082220298],[38.2551123390297,47.5464004583568],[38.2235380388994,47.1021898463759],[37.42513715999,47.0222205674042],[36.7598547706644,46.6987002630409],[35.8236845232648,46.6459644638871],[34.9623417498239,46.2731965195496],[35.020787794746,45.6512189804847],[35.5100085792532,45.4099933945462],[36.5299979998302,45.4699897324371],[36.3347127621991,45.113215643894],[35.2399992205281,44.9399962428516],[33.8825110206529,44.3614785833441],[33.32642093276,44.5648770208449],[33.5469242693495,45.0347708196749],[32.4541744321055,45.3274661321761],[32.6308044776791,45.5191856959789],[33.5881620623184,45.8515685084802],[33.2985673357547,46.0805984563978],[31.7441402524152,46.3333478867374],[31.6753072446024,46.7062450221555],[30.7487488136091,46.583100084004],[30.3776086768889,46.0324101832857],[29.6032890154274,45.2933080104311],[29.1497249692016,45.4649254420724],[28.6797794939394,45.3040308701317],[28.233553501099,45.4882831894684],[28.4852694027928,45.5969070501459],[28.6599874203716,45.9399868841316],[28.9337174822216,46.2588304713725],[28.8629724464141,46.4378893092638],[29.0721069678993,46.5176777207225],[29.1706539242799,46.3792623968287],[29.7599719581364,46.3499876979354],[30.0246586443354,46.423936672545],[29.8382100766263,46.5253258327017],[29.9088517595693,46.6743606634315],[29.5596741065731,46.9285828720913],[29.4151351254527,47.3466452093326],[29.0508679542273,47.5102269557525],[29.122698195113,47.8490951605065],[28.6708911475852,48.1181485052341],[28.2595467465418,48.1555622422134],[27.5225374691952,48.4671194525011],[26.8578235206248,48.3682107610945],[26.6193367855978,48.2207262233335],[26.1974503923669,48.2208812526303],[25.9459411964024,47.9871487493742],[25.207743361113,47.8910564235275],[24.8663171729606,47.7375257431883],[24.4020561052504,47.9818777532804],[23.7609582862374,47.9855984564055],[23.1422363624068,48.0963410508069],[22.7105314470405,47.8821939153894],[22.6408199398787,48.1502395696874],[22.0856083513348,48.4222643092718],[22.2808419125336,48.8253921575807],[22.5581376482118,49.0857380234671],[22.7764188982126,49.0273953314096],[22.5184501482116,49.4767735866197],[23.4265084164444,50.3085057643575],[23.9227571957433,50.4248810898787],[24.0299857927489,50.7054066025752],[23.5270707536844,51.5784540879302],[24.0050777523842,51.6174439560945],[24.5531063168395,51.8884610052492],[25.327787713327,51.9106560329185],[26.3379586117686,51.8322887233479],[27.4540661964084,51.5923033717845],[28.2416150245366,51.5722270778391],[28.6176127458922,51.4277139349348],[28.9928353207635,51.6020443792715],[29.2549381853479,51.3682343613669],[30.1573637224609,51.4161384141015],[30.5551172218115,51.3195034857156],[30.6194543800148,51.8228060980224],[30.927549269339,52.0423534206144],[31.7859981625716,52.1016779648854]]]}},{type:"Feature",properties:{admin:"Uruguay",name:"Uruguay",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-57.6251334295829,-30.2162948544543],[-56.9760257635647,-30.1096863746361],[-55.9732445949409,-30.8830758603163],[-55.6015101792493,-30.8538786760714],[-54.5724515448051,-31.4945114071937],[-53.7879516261822,-32.0472425269876],[-53.2095889959715,-32.7276661109747],[-53.6505439927181,-33.2020040829818],[-53.3736616684982,-33.7683777809008],[-53.8064259507265,-34.3968148740022],[-54.9358660548977,-34.9526465797336],[-55.6740897284033,-34.7526587867641],[-56.2152970037961,-34.8598357073374],[-57.1396850246331,-34.4304562314242],[-57.8178606838155,-34.4625472958775],[-58.4270741441044,-33.9094544410576],[-58.3496111720989,-33.2631889788154],[-58.1326476711214,-33.040566908502],[-58.1424403550408,-32.0445036760762],[-57.8749373032819,-31.0165560849262],[-57.6251334295829,-30.2162948544543]]]}},{type:"Feature",properties:{admin:"United States of America",name:"United States",continent:"North America"},geometry:{type:"MultiPolygon",coordinates:[[[[-155.54211,19.08348],[-155.68817,18.91619],[-155.93665,19.05939],[-155.90806,19.33888],[-156.07347,19.70294],[-156.02368,19.81422],[-155.85008,19.97729],[-155.91907,20.17395],[-155.86108,20.26721],[-155.78505,20.2487],[-155.40214,20.07975],[-155.22452,19.99302],[-155.06226,19.8591],[-154.80741,19.50871],[-154.83147,19.45328],[-155.22217,19.23972],[-155.54211,19.08348]]],[[[-156.07926,20.64397],[-156.41445,20.57241],[-156.58673,20.783],[-156.70167,20.8643],[-156.71055,20.92676],[-156.61258,21.01249],[-156.25711,20.91745],[-155.99566,20.76404],[-156.07926,20.64397]]],[[[-156.75824,21.17684],[-156.78933,21.06873],[-157.32521,21.09777],[-157.25027,21.21958],[-156.75824,21.17684]]],[[[-157.65283,21.32217],[-157.70703,21.26442],[-157.7786,21.27729],[-158.12667,21.31244],[-158.2538,21.53919],[-158.29265,21.57912],[-158.0252,21.71696],[-157.94161,21.65272],[-157.65283,21.32217]]],[[[-159.34512,21.982],[-159.46372,21.88299],[-159.80051,22.06533],[-159.74877,22.1382],[-159.5962,22.23618],[-159.36569,22.21494],[-159.34512,21.982]]],[[[-94.81758,49.38905],[-94.6399999999999,48.8400000000001],[-94.32914,48.67074],[-93.63087,48.60926],[-92.61,48.45],[-91.64,48.14],[-90.8299999999999,48.27],[-89.6,48.01],[-89.2729174466367,48.0198082545828],[-88.3781141832865,48.3029175888938],[-87.4397926233002,47.94],[-86.4619908312281,47.553338019392],[-85.6523632474032,47.2202188177305],[-84.8760798815149,46.9000833196824],[-84.7792382473998,46.6371019557491],[-84.5437487454456,46.5386841904492],[-84.6049,46.4396],[-84.3367,46.4087700000001],[-84.1421195136733,46.5122258571157],[-84.0918512641615,46.2754186061383],[-83.8907653470057,46.1169269882992],[-83.6161309475905,46.1169269882992],[-83.4695507473946,45.9946863877126],[-83.5928507148431,45.8168936224125],[-82.5509246487582,45.3475165879054],[-82.3377631254311,44.44],[-82.137642381504,43.57108755144],[-82.43,42.98],[-82.8999999999999,42.4300000000001],[-83.1199999999999,42.08],[-83.1419996813126,41.975681057293],[-83.0298101468069,41.832795722006],[-82.6900892809202,41.6751050888673],[-82.4392777167916,41.6751050888673],[-81.2777465481671,42.2090259873068],[-80.2474476793478,42.3661998561227],[-78.9393621487437,42.8636113551481],[-78.92,42.965],[-79.0099999999999,43.27],[-79.1716735501119,43.4663394231843],[-78.7202799140424,43.625089423185],[-77.7378850979576,43.6290555893634],[-76.8200341458056,43.6287842880938],[-76.5,44.0184588937586],[-76.375,44.09631],[-75.31821,44.8164500000002],[-74.867,45.0004800000001],[-73.3478299999999,45.00738],[-71.5050599999999,45.0082],[-71.405,45.2550000000001],[-71.08482,45.3052400000002],[-70.6599999999998,45.46],[-70.305,45.915],[-69.99997,46.69307],[-69.237216,47.447781],[-68.905,47.185],[-68.23444,47.35486],[-67.79046,47.06636],[-67.79134,45.7028100000001],[-67.13741,45.13753],[-66.96466,44.8097000000002],[-68.03252,44.3252],[-69.0599999999999,43.98],[-70.1161699999999,43.6840500000001],[-70.645475633411,43.090238348964],[-70.81489,42.8653],[-70.825,42.335],[-70.4949999999999,41.805],[-70.08,41.78],[-70.185,42.145],[-69.88497,41.9228300000001],[-69.96503,41.6371700000002],[-70.64,41.475],[-71.12039,41.4944500000002],[-71.8599999999998,41.32],[-72.295,41.27],[-72.87643,41.22065],[-73.71,40.9311023516545],[-72.24126,41.1194800000001],[-71.9449999999998,40.93],[-73.345,40.63],[-73.982,40.628],[-73.952325,40.75075],[-74.25671,40.47351],[-73.96244,40.42763],[-74.17838,39.70926],[-74.90604,38.93954],[-74.98041,39.1964],[-75.20002,39.24845],[-75.52805,39.4985],[-75.32,38.96],[-75.0718347647898,38.7820322301793],[-75.05673,38.4041200000001],[-75.37747,38.01551],[-75.94023,37.21689],[-76.03127,37.2566],[-75.7220499999998,37.9370500000001],[-76.23287,38.319215],[-76.35,39.15],[-76.542725,38.717615],[-76.32933,38.08326],[-76.9899979316135,38.2399917669134],[-76.3016199999999,37.917945],[-76.25874,36.9664000000001],[-75.9718,36.89726],[-75.8680399999998,36.55125],[-75.72749,35.5507400000001],[-76.36318,34.8085400000001],[-77.3976349999999,34.51201],[-78.05496,33.92547],[-78.5543499999998,33.8613300000001],[-79.06067,33.49395],[-79.20357,33.15839],[-80.301325,32.509355],[-80.86498,32.0333],[-81.33629,31.44049],[-81.49042,30.7299900000001],[-81.31371,30.03552],[-80.98,29.1800000000001],[-80.5355849999999,28.47213],[-80.5299999999998,28.04],[-80.0565392849775,26.8800000000001],[-80.088015,26.205765],[-80.1315599999998,25.816775],[-80.38103,25.20616],[-80.6799999999999,25.08],[-81.17213,25.2012600000001],[-81.33,25.64],[-81.7099999999998,25.87],[-82.2399999999999,26.7300000000001],[-82.70515,27.49504],[-82.85526,27.88624],[-82.65,28.5500000000001],[-82.9299999999999,29.1000000000001],[-83.70959,29.93656],[-84.1,30.0900000000001],[-85.10882,29.63615],[-85.28784,29.6861200000001],[-85.7731,30.1526100000001],[-86.3999999999999,30.4000000000001],[-87.5303599999998,30.27433],[-88.41782,30.3849],[-89.1804899999998,30.31598],[-89.5938311784198,30.1599940048368],[-89.413735,29.89419],[-89.43,29.48864],[-89.21767,29.29108],[-89.40823,29.15961],[-89.77928,29.3071400000001],[-90.15463,29.11743],[-90.8802249999999,29.1485350000001],[-91.6267849999998,29.6770000000001],[-92.49906,29.5523],[-93.22637,29.78375],[-93.84842,29.71363],[-94.69,29.4800000000001],[-95.60026,28.73863],[-96.59404,28.30748],[-97.1399999999998,27.83],[-97.37,27.38],[-97.3799999999999,26.69],[-97.33,26.2100000000001],[-97.1399999999998,25.87],[-97.5299999999999,25.84],[-98.2399999999999,26.0600000000001],[-99.0199999999999,26.37],[-99.3,26.84],[-99.52,27.54],[-100.11,28.1100000000001],[-100.45584,28.6961200000001],[-100.9576,29.3807100000001],[-101.6624,29.7793000000001],[-102.48,29.76],[-103.11,28.97],[-103.94,29.27],[-104.45697,29.57196],[-104.70575,30.12173],[-105.03737,30.64402],[-105.63159,31.0838300000001],[-106.1429,31.39995],[-106.50759,31.75452],[-108.24,31.7548537181664],[-108.24194,31.34222],[-109.035,31.3419400000002],[-111.02361,31.33472],[-113.30498,32.03914],[-114.815,32.52528],[-114.72139,32.72083],[-115.99135,32.6123900000001],[-117.12776,32.53534],[-117.295937691274,33.0462246152039],[-117.944,33.6212364312014],[-118.410602275897,33.7409092231245],[-118.5198948228,34.0277815775757],[-119.081,34.078],[-119.438840642017,34.3484771782843],[-120.36778,34.44711],[-120.62286,34.60855],[-120.74433,35.1568600000001],[-121.71457,36.16153],[-122.54747,37.5517600000001],[-122.51201,37.7833900000001],[-122.95319,38.1137100000001],[-123.7272,38.9516600000001],[-123.86517,39.7669900000001],[-124.39807,40.3132],[-124.17886,41.1420200000001],[-124.2137,41.9996400000001],[-124.53284,42.76599],[-124.14214,43.70838],[-124.020535,44.615895],[-123.89893,45.52341],[-124.079635,46.86475],[-124.39567,47.72017],[-124.687210083008,48.1844329833985],[-124.566101074219,48.3797149658204],[-123.12,48.04],[-122.58736,47.096],[-122.34,47.36],[-122.5,48.18],[-122.84,49],[-120,49],[-117.03121,49],[-116.04818,49],[-113,49],[-110.05,49],[-107.05,49],[-104.04826,48.99986],[-100.65,49],[-97.2287200000047,49.0007],[-95.1590695091719,49],[-95.15609,49.38425],[-94.81758,49.38905]]],[[[-153.006314053337,57.1158421901659],[-154.005090298458,56.7346768255811],[-154.51640275777,56.9927489284467],[-154.670992804971,57.4611957871725],[-153.762779507441,57.8165746120438],[-153.228729417921,57.9689684108724],[-152.564790615835,57.901427313867],[-152.141147223906,57.591058661522],[-153.006314053337,57.1158421901659]]],[[[-165.579164191734,59.9099868841875],[-166.192770148767,59.754440822989],[-166.848337368822,59.9414061550209],[-167.45527706609,60.2130691595794],[-166.467792121425,60.3841698268978],[-165.674429694664,60.2936068793062],[-165.579164191734,59.9099868841875]]],[[[-171.731656867539,63.7825153672759],[-171.114433560245,63.592191067145],[-170.491112433941,63.6949754909735],[-169.682505459654,63.4311156276911],[-168.689439460301,63.2975062120006],[-168.771940884455,63.1885981309454],[-169.529439867205,62.9769314642779],[-170.290556200216,63.1944375677945],[-170.671385667991,63.375821845139],[-171.553063117539,63.3177892116751],[-171.791110602891,63.4058458523005],[-171.731656867539,63.7825153672759]]],[[[-155.067790290324,71.1477763943237],[-154.344165208941,70.6964085964702],[-153.900006273393,70.8899885118357],[-152.210006069935,70.8299921739448],[-152.270002407826,70.6000062120298],[-150.739992438745,70.4300165880057],[-149.720003018168,70.5300104844904],[-147.613361579357,70.2140349392418],[-145.689989800225,70.1200096706867],[-144.920010959076,69.9899917670405],[-143.589446180425,70.1525141465983],[-142.072510348713,69.8519381781726],[-140.985987521561,69.7119983995264],[-140.985988329005,69.7119983995264],[-140.992498752029,66.0000285915687],[-140.997769748123,60.3063967962986],[-140.012997816153,60.2768378770276],[-139.039000420316,60.00000722924],[-138.34089,59.5621100000001],[-137.4525,58.9050000000001],[-136.47972,59.46389],[-135.47583,59.78778],[-134.945,59.2705600000001],[-134.27111,58.86111],[-133.355548882207,58.4102851426452],[-132.73042,57.6928900000001],[-131.70781,56.55212],[-130.00778,55.91583],[-129.979994263358,55.2849978704972],[-130.536110189467,54.8027534043494],[-131.085818237972,55.178906155002],[-131.967211467142,55.4977755804591],[-132.250010742859,56.3699962428974],[-133.539181084356,57.1788874375621],[-134.078062920296,58.1230675319669],[-135.038211032279,58.1877147487639],[-136.628062309955,58.2122093776705],[-137.800006279686,58.4999954291038],[-139.867787041413,59.5377615423891],[-140.825273817133,59.7275174017651],[-142.574443535564,60.084446519605],[-143.95888099488,59.9991804063234],[-145.925556816828,60.4586097276143],[-147.114373949147,60.8846560736446],[-148.224306200128,60.6729894069772],[-148.018065558851,59.9783289658936],[-148.570822516861,59.9141726752033],[-149.727857835876,59.7056582709055],[-150.608243374616,59.3682111680395],[-151.716392788683,59.15582103132],[-151.859433153267,59.7449840358796],[-151.409719001247,60.7258027207794],[-150.346941494733,61.0335875515099],[-150.621110806257,61.2844249538545],[-151.895839199817,60.7271979844513],[-152.578329841096,60.0616572129643],[-154.019172126258,59.3502794460343],[-153.287511359653,58.8647276882198],[-154.232492438758,58.1463736029305],[-155.30749142151,57.7277945013663],[-156.308334723923,57.4227743597636],[-156.556097378546,56.9799848496706],[-158.117216559868,56.4636080999942],[-158.433321296197,55.9941535508385],[-159.603327399717,55.5666861029201],[-160.289719611634,55.6435806341706],[-161.223047655258,55.3647346055235],[-162.237766079741,55.0241869167201],[-163.069446581046,54.6897370469272],[-164.785569221027,54.4041730820822],[-164.94222632552,54.5722248398953],[-163.848339606766,55.0394314642461],[-162.870001390616,55.3480431178932],[-161.804174974596,55.8949864772704],[-160.563604702781,56.008054511125],[-160.070559862284,56.4180553249287],[-158.684442918919,57.0166751165979],[-158.461097378554,57.2169212917289],[-157.722770352184,57.5700005153631],[-157.550274421194,58.3283263210302],[-157.041674974577,58.9188845892617],[-158.194731208305,58.6158023138698],[-158.517217984023,58.7877814805373],[-159.058606126929,58.4241861029317],[-159.711667040017,58.9313902858763],[-159.9812888255,58.5725491400416],[-160.355271165997,59.0711233587936],[-161.355003425115,58.6708377142607],[-161.968893602526,58.6716645371774],[-162.054986538725,59.2669253607474],[-161.874170702135,59.6336213242906],[-162.518059048492,59.9897236192139],[-163.81834143782,59.7980557318434],[-164.662217577146,60.2674844427826],[-165.346387702475,60.5074956325624],[-165.350831875652,61.0738951686975],[-166.121379157556,61.5000190293762],[-165.73445187077,62.0749968532718],[-164.919178636718,62.6330764838079],[-164.562507901039,63.146378485763],[-163.753332485997,63.2194489610238],[-163.067224494458,63.059458726648],[-162.260555386382,63.5419357367412],[-161.534449836249,63.4558169623268],[-160.772506680321,63.7661081000233],[-160.958335130843,64.2227985704028],[-161.518068407212,64.4027875840753],[-160.777777676415,64.7886038275664],[-161.391926235988,64.7772350124623],[-162.453050096669,64.5594446885682],[-162.757786017894,64.3386054551688],[-163.546394212884,64.5591604681905],[-164.960829841145,64.4469450954689],[-166.425288255864,64.6866720648707],[-166.845004238939,65.0888955756145],[-168.110560065767,65.6699970567367],[-166.705271166022,66.0883177761394],[-164.474709642575,66.5766600612975],[-163.652511766596,66.5766600612975],[-163.788601651036,66.0772073431967],[-161.67777442121,66.1161196967124],[-162.48971452538,66.7355650905951],[-163.719716966791,67.1163945583701],[-164.430991380857,67.6163382025778],[-165.390286831707,68.0427721218502],[-166.764440680996,68.3588768581797],[-166.204707404627,68.8830309109162],[-164.430810513343,68.9155353868277],[-163.168613654615,69.3711148139129],[-162.930566169262,69.8580618353993],[-161.908897264636,70.3333299831876],[-160.934796515934,70.4476899278496],[-159.039175788387,70.8916421576689],[-158.119722866834,70.824721177851],[-156.580824551398,71.3577635769417],[-155.067790290324,71.1477763943237]]]]}},{type:"Feature",properties:{admin:"Uzbekistan",name:"Uzbekistan",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[66.5186068052887,37.3627843287588],[66.5461503437002,37.9746849635269],[65.2159989765074,38.4026950139843],[64.1702230162168,38.8924067245982],[63.518014764261,39.3632565374256],[62.374260288345,40.0538862167904],[61.8827140643847,41.0848568792294],[61.5471789895136,41.2663703476546],[60.4659529966707,41.2203266464825],[60.0833406919817,41.4251461858714],[59.9764221535698,42.2230819768902],[58.6290108579915,42.751551011723],[57.7865299823371,42.1705528834655],[56.9322152036878,41.8260261093756],[57.0963912290791,41.3223100856106],[55.9681913592829,41.3086416692694],[55.9289172707411,44.9958584661591],[58.5031270689285,45.5868043076328],[58.6899890480959,45.5000137395986],[60.2399719582583,44.7840367701947],[61.0583199400324,44.4058169622505],[62.0133004087862,43.5044766302156],[63.1857869810566,43.650074978198],[64.9008244159593,43.7280805527426],[66.0980123228651,42.9976600205131],[66.0233915546356,41.994646307944],[66.5106486347157,41.9876441513684],[66.7140470722165,41.1684435084615],[67.9858557473518,41.1359907089822],[68.2598958677956,40.6623245305949],[68.63248294462,40.6686807317668],[69.0700272968353,41.3842442897124],[70.3889648782208,42.0813076848974],[70.9623148944991,42.2661542832055],[71.2592476744482,42.1677106796895],[70.4200224140282,41.5199982773431],[71.1578585142916,41.1435871445291],[71.8701147805705,41.3929000921213],[73.0554171080492,40.8660330266895],[71.7748751158566,40.1458444280538],[71.0141980325202,40.2443655462182],[70.6014066913727,40.2185273300723],[70.4581596210596,40.4964948593703],[70.666622348925,40.9602133245414],[69.3294946633728,40.7278244085248],[69.0116329283455,40.0861581487567],[68.5364164569894,39.5334528671789],[67.7014286640173,39.5804784205645],[67.4422196796413,39.1401435410055],[68.1760250181859,38.9015534531139],[68.3920325051659,38.1570252548687],[67.8299996275595,37.1449940048647],[67.0757820982596,37.3561439072093],[66.5186068052887,37.3627843287588]]]}},{type:"Feature",properties:{admin:"Venezuela",name:"Venezuela",continent:"South America"},geometry:{type:"Polygon",coordinates:[[[-71.3315836249503,11.7762840845158],[-71.3600056627108,11.5399935978612],[-71.9470499335465,11.42328237553],[-71.6208682929202,10.9694599471428],[-71.6330639309411,10.446494452349],[-72.0741739569845,9.86565135338837],[-71.6956440904465,9.07226308841125],[-71.2645592922677,9.13719452558598],[-71.0399993557434,9.85999278405241],[-71.3500837877108,10.2119351261762],[-71.4006233384922,10.968969021036],[-70.1552988349065,11.37548167566],[-70.293843349881,11.8468224145942],[-69.9432445949968,12.1623070337361],[-69.5843000962975,11.4596109074312],[-68.8829992336644,11.4433845076916],[-68.2332714504587,10.8857441268299],[-68.1941265529976,10.5546532251359],[-67.2962485419263,10.5458682316463],[-66.227864142508,10.6486268172587],[-65.6552375962817,10.2007988550173],[-64.8904522365782,10.0772146671913],[-64.3294787258337,10.3895987003957],[-64.3180065578649,10.641417954954],[-63.0793224758287,10.7017243514386],[-61.8809460109802,10.7156253117251],[-62.7301189846164,10.4202686629609],[-62.388511928951,9.94820445397464],[-61.5887674628019,9.87306692142226],[-60.8305966864317,9.38133982994894],[-60.6712524074597,8.58017426191188],[-60.1500955877962,8.60275686282343],[-59.7582848781592,8.36703481692405],[-60.5505879380582,7.77960297284618],[-60.6379727850638,7.41499990481085],[-60.2956680975624,7.04391144452292],[-60.543999192941,6.85658437746488],[-61.1593363104565,6.69607737876632],[-61.1394150458079,6.23429677980614],[-61.4103029038819,5.95906810141962],[-60.7335741848037,5.2002772078619],[-60.6011791652719,4.91809804933213],[-60.9668932766015,4.53646759685664],[-62.0854296535591,4.16212352133431],[-62.8045330471167,4.00696503337795],[-63.0931975978991,3.77057119385878],[-63.8883428615741,4.02053009685457],[-64.6286594305875,4.14848094320925],[-64.816064012294,4.05644521729742],[-64.3684944322141,3.79721039470525],[-64.4088278876179,3.12678620036662],[-64.2699991522658,2.49700552002557],[-63.4228673977051,2.41106761312417],[-63.3687880113116,2.20089956299313],[-64.0830854966661,1.91636912679408],[-64.1993057928905,1.49285492594602],[-64.6110119289599,1.32873057698704],[-65.3547133042884,1.0952822941085],[-65.5482673814376,.78925446207603],[-66.3257651434849,.724452215982012],[-66.8763258531226,1.25336050048934],[-67.181294318293,2.25063812907406],[-67.4470920477863,2.60028086996087],[-67.8099381171237,2.82065501546957],[-67.3031731838534,3.31845408773718],[-67.3375638495437,3.54234223064172],[-67.6218359035813,3.83948171631999],[-67.8230122544935,4.5039372827289],[-67.7446966213552,5.22112864829167],[-67.5215319485027,5.55687042889197],[-67.3414395819656,6.09546804445402],[-67.695087246355,6.26731802004065],[-68.2650524563182,6.15326813397247],[-68.9853185696023,6.20680491782686],[-69.3894799465571,6.09986054119884],[-70.0933129543724,6.96037649172311],[-70.6742335679815,7.08778473553872],[-71.9601757473486,6.99161489504354],[-72.1983524237819,7.34043081301368],[-72.4444872707881,7.42378489830048],[-72.4796789211788,7.63250600832735],[-72.360900641556,8.00263845461789],[-72.4398622300979,8.40527537682003],[-72.6604947577681,8.62528778730268],[-72.7887298245004,9.08502716718733],[-73.30495154488,9.1519998234376],[-73.0276041327696,9.73677033125244],[-72.9052860175347,10.4503443465548],[-72.6146577623252,10.8219754093818],[-72.2275754462429,11.1087020939532],[-71.9739216783383,11.6086715763771],[-71.3315836249503,11.7762840845158]]]}},{type:"Feature",properties:{admin:"Vietnam",name:"Vietnam",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[108.050180291783,21.5523798690601],[106.71506798709,20.696850694252],[105.881682163519,19.7520504826597],[105.662005649846,19.0581651880606],[106.426816847766,18.0041209986032],[107.36195356652,16.6974565698871],[108.26949507043,16.0797423364861],[108.877106561317,15.2766905786704],[109.335269810017,13.4260283472177],[109.200135939574,11.6668592391378],[108.366129998815,11.0083206242263],[107.220928582795,10.3644839543018],[106.405112746203,9.53083974856932],[105.158263787865,8.59975962975049],[104.795185174582,9.2410383162765],[105.076201613386,9.91849050540681],[104.334334751403,10.4865436873752],[105.199914992292,10.8893098006581],[106.249670037869,10.9618118351636],[105.810523716253,11.5676146509212],[107.491403029411,12.3372059188279],[107.614547967562,13.5355307072442],[107.382727492301,14.202440904187],[107.564525181104,15.2021731633056],[107.312705926546,15.9085383163032],[106.556007928496,16.6042839624648],[105.925762160264,17.485315456609],[105.094598423282,18.6669745956111],[103.896532017027,19.2651809758218],[104.183387892679,19.6246680770602],[104.822573683697,19.8866417505639],[104.435000441508,20.7587332219215],[103.203861118586,20.7665622014137],[102.754896274835,21.6751372339695],[102.170435825614,22.4647531193893],[102.7069922221,22.7087950708877],[103.504514601661,22.7037566187392],[104.476858351664,22.819150092047],[105.329209425887,23.3520633000569],[105.811247186305,22.9768924016179],[106.725403273548,22.7942678898984],[106.567273390735,22.2182048609248],[107.043420037873,21.8118989120299],[108.050180291783,21.5523798690601]]]}},{type:"Feature",properties:{admin:"Vanuatu",name:"Vanuatu",continent:"Australia"},geometry:{type:"MultiPolygon",coordinates:[[[[167.844876743845,-16.4663331030972],[167.515181105823,-16.59784962328],[167.180007765978,-16.159995212471],[167.21680138577,-15.8918462053084],[167.844876743845,-16.4663331030972]]],[[[167.107712437201,-14.933920179914],[167.27002811103,-15.7400208472349],[167.001207310248,-15.6146021460625],[166.793157993841,-15.6688107235367],[166.649859247096,-15.3927035458012],[166.629136997746,-14.6264970842096],[167.107712437201,-14.933920179914]]]]}},{type:"Feature",properties:{admin:"Yemen",name:"Yemen",continent:"Asia"},geometry:{type:"Polygon",coordinates:[[[53.1085726255475,16.651051133689],[52.3852059263259,16.3824112004197],[52.1917293638251,15.938433132384],[52.1681649107,15.5974203556899],[51.1725150897325,15.1752497420815],[49.5745764504031,14.7087665877827],[48.6792305845142,14.0032024194857],[48.2389473813874,13.9480895044464],[47.9389140155008,14.0072331812044],[47.3544535662797,13.5922197534684],[46.7170764503917,13.399699204965],[45.8775928078103,13.3477643905117],[45.6250500831999,13.2909461532068],[45.4064587746052,13.0269054224114],[45.1443559100209,12.9539383000153],[44.9895333188744,12.6995869002747],[44.4945764503828,12.7216527368633],[44.1751127459545,12.5859504256649],[43.4829586118371,12.6368000350401],[43.2228711281121,13.2209504256674],[43.2514481951695,13.7675837264508],[43.0879439633981,14.0626303166213],[42.8922453143087,14.8022492537987],[42.6048726743336,15.2133352726806],[42.8050154966,15.2619627954673],[42.7024377785007,15.718885809792],[42.8236706886574,15.9117422551053],[42.779332309751,16.3478913436487],[43.2183752785027,16.6668899601864],[43.1157975604034,17.0884404566074],[43.3807943051961,17.5799866805677],[43.7915185890519,17.3199767114911],[44.0626131528551,17.4103587915696],[45.2166512387972,17.4333289657233],[45.3999992205688,17.3333350692386],[46.3666585630205,17.2333153345376],[46.7499943377616,17.2833381209962],[47.0000049171898,16.9499992944974],[47.4666947772176,17.1166816268549],[48.1833435402413,18.1666692163773],[49.1166715838649,18.6166675887749],[52.0000098000222,19.0000033635161],[52.782184279192,17.3497423364912],[53.1085726255475,16.651051133689]]]}},{type:"Feature",properties:{admin:"South Africa",name:"South Africa",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[31.5210014177789,-29.2573869768462],[31.325561150851,-29.4019776343989],[30.9017627296253,-29.909956963828],[30.6228133481138,-30.4237757301061],[30.0557161801428,-31.140269463833],[28.9255526059195,-32.1720411109725],[28.2197558936771,-32.7719528134489],[27.464608188596,-33.2269637997788],[26.4194523454928,-33.6149504534262],[25.9096643409335,-33.6670402971764],[25.7806282895007,-33.9446460914483],[25.172861769316,-33.7968514950936],[24.6778532243921,-33.9871757952245],[23.5940434099346,-33.7944743792082],[22.9881889177447,-33.916430759417],[22.5741573422222,-33.8640825335053],[21.542799106541,-34.2588387997829],[20.689052768647,-34.4171753883252],[20.0712610205976,-34.795136814108],[19.6164050635646,-34.8191663551237],[19.1932784359587,-34.4625989723098],[18.8553145687699,-34.4443055152785],[18.4246431820494,-33.997872816709],[18.3774109229346,-34.1365206845481],[18.2444991390799,-33.867751560198],[18.2500801937674,-33.2814307594144],[17.9251904639484,-32.6112907854534],[18.2479097836112,-32.4291313616246],[18.2217615088715,-31.6616329892257],[17.5669177588689,-30.7257211239875],[17.0644161312627,-29.8786410458592],[17.0629175147262,-29.87595387138],[16.3449768408952,-28.5767050106977],[16.8240173682409,-28.0821615536645],[17.2189286638154,-28.3559432919468],[17.3874971859515,-28.7835140927298],[17.8361519711095,-28.8563778622613],[18.4648991228047,-29.0454619280173],[19.0021273129111,-28.9724431291889],[19.8947343278886,-28.4611048316608],[19.8957678565344,-24.7677902157606],[20.1657255388272,-24.9179619280008],[20.7586092465118,-25.8681364885514],[20.6664701677354,-26.4774533017049],[20.8896090023717,-26.8285429826959],[21.6058960303694,-26.7265337053518],[22.1059688656579,-26.2802560360791],[22.5795316911806,-25.9794475237081],[22.8242712745149,-25.5004586727948],[23.3120967953502,-25.2686898739657],[23.7335697771227,-25.3901294898516],[24.2112667172288,-25.6702157528736],[25.0251705258258,-25.7196700985769],[25.6646663754377,-25.4868160946697],[25.7658488298652,-25.1748454729237],[25.9416520525222,-24.6963733863332],[26.4857532081233,-24.6163265927131],[26.7864066911974,-24.2406906063835],[27.1194096208862,-23.5743230119798],[28.0172359555252,-22.8277535946591],[29.432188348109,-22.0913127580676],[29.839036899543,-22.1022164852812],[30.3228833350918,-22.2716118303339],[30.6598653500671,-22.1515674781199],[31.1914091326213,-22.2515096981724],[31.6703979835346,-23.6589690080739],[31.9305888201242,-24.3694165992225],[31.7524084815819,-25.4842839494874],[31.8377779477281,-25.8433318010513],[31.3331575863979,-25.6601905250089],[31.0440796241571,-25.7314523251394],[30.9496667823599,-26.0226490211041],[30.6766085141296,-26.3980783017046],[30.6859619483745,-26.7438453101695],[31.2827730649133,-27.285879408479],[31.8680603370511,-27.1779273414213],[32.0716654802811,-26.7338200823049],[32.8301204770289,-26.7421916643362],[32.5802649268977,-27.4701575660318],[32.4621326026784,-28.3010112444206],[32.203388706193,-28.7524048804901],[31.5210014177789,-29.2573869768462]],[[28.9782625668572,-28.9555966122617],[28.5417000668555,-28.6475017229376],[28.0743384132078,-28.8514686011936],[27.5325110206275,-29.2427108700754],[26.9992619158076,-29.87595387138],[27.7493970069565,-30.6451058896122],[28.1072046241454,-30.5457321103149],[28.2910693702399,-30.2262167294543],[28.8483996925077,-30.0700505510682],[29.018415154748,-29.7437655575774],[29.3251664568326,-29.2573869768462],[28.9782625668572,-28.9555966122617]]]}},{type:"Feature",properties:{admin:"Zambia",name:"Zambia",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[32.7593754412213,-9.23059905358906],[33.2313879737753,-9.6767216935648],[33.4856876970836,-10.5255587703911],[33.3153104998173,-10.7965499813297],[33.1142891782019,-11.6071981746923],[33.3064221534631,-12.4357780900602],[32.9917643572379,-12.7838705379783],[32.6881653175231,-13.7128577612893],[33.2140246925252,-13.9718600399362],[30.1794812354818,-14.7960991349915],[30.2742558123051,-15.5077869605152],[29.5168343442031,-15.6446778296564],[28.9474634132113,-16.0430514461944],[28.8258687680285,-16.3897486304406],[28.4679061215427,-16.4684001603888],[27.5982434425028,-17.290830580314],[27.0444271176307,-17.9380262183374],[26.7067733090356,-17.9612289364365],[26.3819352556489,-17.8460421688579],[25.264225701608,-17.7365398088314],[25.0844433936646,-17.6618156877374],[25.0769503109823,-17.5788233374766],[24.6823490740015,-17.3534107398195],[24.0338615251708,-17.2958431942463],[23.2150484555061,-17.523116143466],[22.5624784685243,-16.8984514299218],[21.8878426449539,-16.0803101538769],[21.9338863461259,-12.8984371883694],[24.0161365088947,-12.9110462378486],[23.9309220720454,-12.5658476701389],[24.0799052263428,-12.1912968888874],[23.9041536801182,-11.7222815894063],[24.0178935075926,-11.2372982723471],[23.9122152035557,-10.9268262671375],[24.257155389104,-10.9519926896637],[24.3145162289479,-11.2628264298993],[24.7831697934029,-11.238693536019],[25.4181181169732,-11.33093596766],[25.7523096046047,-11.7849651017764],[26.5530875993996,-11.9244397925321],[27.1644197934125,-11.6087484676611],[27.3887988624238,-12.1327474911007],[28.15510867688,-12.2724805640179],[28.523561639121,-12.6986044246967],[28.9342859229768,-13.2489584286051],[29.6996138852195,-13.2572266577718],[29.6160014177712,-12.1788945451373],[29.3415478858691,-12.3607439103724],[28.6424174333923,-11.9715686987823],[28.3722530453704,-11.7936467424014],[28.4960697771418,-10.789883721564],[28.6736816749289,-9.60592498132493],[28.4498710466728,-9.16491830814608],[28.7348665707625,-8.52655934004458],[29.0029122250605,-8.40703175215347],[30.3460860531908,-8.23825652428822],[30.7400154965518,-8.34000741947091],[31.15775133695,-8.59457874731736],[31.5563480974665,-8.76204884199864],[32.191864861792,-8.93035898197328],[32.7593754412213,-9.23059905358906]]]}},{type:"Feature",properties:{admin:"Zimbabwe",name:"Zimbabwe",continent:"Africa"},geometry:{type:"Polygon",coordinates:[[[31.1914091326213,-22.2515096981724],[30.6598653500671,-22.1515674781199],[30.3228833350918,-22.2716118303339],[29.839036899543,-22.1022164852812],[29.432188348109,-22.0913127580676],[28.7946562029242,-21.6394540341074],[28.0213700701086,-21.4859750302006],[27.7272278175033,-20.8518018531147],[27.7247473487532,-20.4990585262904],[27.2965047543505,-20.391519870691],[26.1647908871585,-19.2930856258949],[25.8503914730947,-18.7144129370905],[25.6491634457502,-18.536025892819],[25.264225701608,-17.7365398088314],[26.3819352556489,-17.8460421688579],[26.7067733090356,-17.9612289364365],[27.0444271176307,-17.9380262183374],[27.5982434425028,-17.290830580314],[28.4679061215427,-16.4684001603888],[28.8258687680285,-16.3897486304406],[28.9474634132113,-16.0430514461944],[29.5168343442031,-15.6446778296564],[30.2742558123051,-15.5077869605152],[30.3389547055345,-15.8808391252302],[31.1730639991577,-15.8609436987979],[31.6364982439512,-16.0719902482779],[31.8520406430406,-16.3194170060914],[32.3282389666102,-16.3920740698938],[32.8476387875758,-16.7133981258846],[32.8498608741644,-17.9790573055772],[32.6548856951271,-18.6720899390435],[32.6119942563249,-19.4193828264163],[32.7727079607526,-19.7155921363133],[32.6597432797626,-20.3042900529823],[32.5086930681734,-20.3952922502483],[32.244988234188,-21.1164885393137],[31.1914091326213,-22.2515096981724]]]}}],jle={features:Wle};oB({ThreeGlobe:tB});const $le=3,Xle=1.2,jM=300;function Qle({globeConfig:i,data:e}){const t=Qt.useRef(null),n=Qt.useRef(null),[r,s]=Qt.useState(!1),o={pointSize:1,atmosphereColor:"#ffffff",showAtmosphere:!0,atmosphereAltitude:.1,polygonColor:"rgba(255,255,255,0.7)",arcTime:2e3,arcLength:.9,rings:1,maxRings:3,...i};return Qt.useEffect(()=>{!t.current&&n.current&&(t.current=new tB,n.current.add(t.current),s(!0))},[]),Qt.useEffect(()=>{if(!t.current||!r)return;const a=t.current.globeMaterial();a.color=new Et(i.globeColor),a.emissive=new Et(i.emissive),a.emissiveIntensity=i.emissiveIntensity||.1,a.shininess=i.shininess||.9},[r,i.globeColor,i.emissive,i.emissiveIntensity,i.shininess]),Qt.useEffect(()=>{if(!t.current||!r||!e)return;const a=e;let l=[];for(let c=0;c<a.length;c++){const A=a[c];l.push({size:o.pointSize,order:A.order,color:A.color,lat:A.startLat,lng:A.startLng}),l.push({size:o.pointSize,order:A.order,color:A.color,lat:A.endLat,lng:A.endLng})}const u=l.filter((c,A,m)=>m.findIndex(_=>["lat","lng"].every(b=>_[b]===c[b]))===A);t.current.hexPolygonsData(jle.features).hexPolygonResolution(3).hexPolygonMargin(.7).showAtmosphere(o.showAtmosphere).atmosphereColor(o.atmosphereColor).atmosphereAltitude(o.atmosphereAltitude).hexPolygonColor(()=>o.polygonColor),t.current.arcsData(e).arcStartLat(c=>c.startLat*1).arcStartLng(c=>c.startLng*1).arcEndLat(c=>c.endLat*1).arcEndLng(c=>c.endLng*1).arcColor(c=>c.color).arcAltitude(c=>c.arcAlt*1).arcStroke(()=>[.32,.28,.3][Math.round(Math.random()*2)]).arcDashLength(o.arcLength).arcDashInitialGap(c=>c.order*1).arcDashGap(15).arcDashAnimateTime(()=>o.arcTime),t.current.pointsData(u).pointColor(c=>c.color).pointsMerge(!0).pointAltitude(0).pointRadius(2),t.current.ringsData([]).ringColor(()=>o.polygonColor).ringMaxRadius(o.maxRings).ringPropagationSpeed($le).ringRepeatPeriod(o.arcTime*o.arcLength/o.rings)},[r,e,o.pointSize,o.showAtmosphere,o.atmosphereColor,o.atmosphereAltitude,o.polygonColor,o.arcLength,o.arcTime,o.rings,o.maxRings]),Qt.useEffect(()=>{if(!t.current||!r||!e)return;const a=setInterval(()=>{if(!t.current)return;const l=Kle(0,e.length,Math.floor(e.length*4/5)),u=e.filter((c,A)=>l.includes(A)).map(c=>({lat:c.startLat,lng:c.startLng,color:c.color}));t.current.ringsData(u)},2e3);return()=>{clearInterval(a)}},[r,e]),Xr.jsx("group",{ref:n})}function Yle(){const{gl:i,size:e}=kl();return Qt.useEffect(()=>{i.setPixelRatio(window.devicePixelRatio),i.setSize(e.width,e.height),i.setClearColor(16755455,0)},[]),null}function a1e(i){const{globeConfig:e}=i,t=new Rc;return t.fog=new $8(16777215,400,2e3),Xr.jsxs(Ble,{scene:t,camera:new tr(50,Xle,180,1800),children:[Xr.jsx(Yle,{}),Xr.jsx("ambientLight",{color:e.ambientLight,intensity:.6}),Xr.jsx("directionalLight",{color:e.directionalLeftLight,position:new J(-400,100,400)}),Xr.jsx("directionalLight",{color:e.directionalTopLight,position:new J(-200,500,200)}),Xr.jsx("pointLight",{color:e.pointLight,position:new J(-200,500,200),intensity:.8}),Xr.jsx(Qle,{...i}),Xr.jsx(Hle,{enablePan:!1,enableZoom:!1,minDistance:jM,maxDistance:jM,autoRotateSpeed:1,autoRotate:!0,minPolarAngle:Math.PI/3.5,maxPolarAngle:Math.PI-Math.PI/3})]})}function l1e(i){var e=/^#?([a-f\d])([a-f\d])([a-f\d])$/i;i=i.replace(e,function(n,r,s,o){return r+r+s+s+o+o});var t=/^#?([a-f\d]{2})([a-f\d]{2})([a-f\d]{2})$/i.exec(i);return t?{r:parseInt(t[1],16),g:parseInt(t[2],16),b:parseInt(t[3],16)}:null}function Kle(i,e,t){const n=[];for(;n.length<t;){const r=Math.floor(Math.random()*(e-i))+i;n.indexOf(r)===-1&&n.push(r)}return n}export{Qle as Globe,Yle as WebGLRendererConfig,a1e as World,Kle as genRandomNumbers,l1e as hexToRgb};
